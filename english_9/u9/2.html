<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luy·ªán t·∫≠p Ti·∫øng Anh 9 - Unit 5 (Ms Mai An ULIS)</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #8854C0; /* H·ªìng nh·∫°t/T√≠m pastel theo y√™u c·∫ßu */
            --secondary-color: #00C9A7; /* Xanh ng·ªçc */
            --correct-color: #00D26A; /* Xanh l√° */
            --wrong-color: #FF4757; /* ƒê·ªè cam */
            --bg-color: #f0f3ff;
            --card-bg: #ffffff;
            --text-color: #2f3542;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(var(--primary-color) 0.5px, transparent 0.5px), radial-gradient(var(--primary-color) 0.5px, var(--bg-color) 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 2px solid var(--primary-color);
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .teacher-name {
            font-size: 1rem;
            color: #666;
            margin-top: 5px;
            font-weight: 600;
        }

        /* Question Card Style */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 20px rgba(136, 84, 192, 0.15);
            border-bottom: 5px solid #e1e1e1;
            position: relative;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-number {
            background: var(--secondary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 0.9rem;
            box-shadow: 0 4px 0 rgba(0, 155, 128, 0.4);
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* Grid for Options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 #e0e0e0;
            text-align: left;
            position: relative;
            outline: none;
        }

        .option-btn:hover:not(:disabled) {
            transform: scale(1.02);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(5px);
            box-shadow: none;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 5px 0 #00b85c;
        }

        .option-btn.wrong {
            background-color: var(--wrong-color);
            color: white;
            border-color: #e63b49;
            box-shadow: 0 5px 0 #e63b49;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Explanation Box */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 20px;
            background: #f8f9fa;
            border-left: 5px solid var(--primary-color);
            padding: 15px;
            border-radius: 10px;
            font-size: 1rem;
            line-height: 1.6;
            white-space: pre-wrap; /* Preserve newlines from JSON */
            animation: fadeIn 0.5s;
        }

        .explanation-header {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .teacher-avatar {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; margin-top: 0; }
            to { opacity: 1; margin-top: 20px; }
        }

        /* Submit Button */
        .submit-section {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 60px;
        }

        .submit-btn {
            background: var(--primary-color);
            color: white;
            font-size: 1.5rem;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            box-shadow: 0 8px 0 #6c429c;
            cursor: pointer;
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 11px 0 #6c429c;
        }

        .submit-btn:active {
            transform: translateY(5px);
            box-shadow: 0 3px 0 #6c429c;
        }

        /* Result Popup */
        .result-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .result-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            border: 5px solid var(--primary-color);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .score-display {
            font-size: 4rem;
            font-weight: bold;
            color: var(--secondary-color);
            margin: 20px 0;
        }

        .feedback-text {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #555;
        }

        .close-btn {
            background: var(--wrong-color);
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 0 #d6303e;
            font-size: 1.1rem;
        }

        .close-btn:active {
            transform: translateY(5px);
            box-shadow: none;
        }

        /* Glossary Section */
        .glossary-section {
            margin-top: 40px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            border: 2px dashed var(--primary-color);
        }

        .glossary-header {
            font-size: 1.5rem;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .glossary-item {
            background: #f0f3ff;
            padding: 10px;
            border-radius: 10px;
            border-left: 4px solid var(--secondary-color);
        }
        
        .glossary-word {
            font-weight: bold;
            color: var(--primary-color);
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Luy·ªán t·∫≠p Ti·∫øng Anh 9 - Unit 5</h1>
        <div class="teacher-name">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</div>
    </header>

    <div id="quiz-container">
        <!-- Questions will be injected here via JS -->
    </div>

    <!-- Glossary Section (Static based on content) -->
    <div class="glossary-section">
        <div class="glossary-header">üìö B·∫£ng T·ª´ V·ª±ng (Glossary)</div>
        <div class="glossary-grid">
            <div class="glossary-item"><span class="glossary-word">concentric</span> (adj): ƒë·ªìng t√¢m</div>
            <div class="glossary-item"><span class="glossary-word">bilingual</span> (adj): song ng·ªØ</div>
            <div class="glossary-item"><span class="glossary-word">fluent</span> (adj): tr√¥i ch·∫£y</div>
            <div class="glossary-item"><span class="glossary-word">exchange student</span> (n): sinh vi√™n trao ƒë·ªïi</div>
            <div class="glossary-item"><span class="glossary-word">look up</span> (v): tra c·ª©u</div>
            <div class="glossary-item"><span class="glossary-word">clarity</span> (n): s·ª± r√µ r√†ng</div>
            <div class="glossary-item"><span class="glossary-word">establish</span> (v): th√†nh l·∫≠p</div>
            <div class="glossary-item"><span class="glossary-word">complexity</span> (n): s·ª± ph·ª©c t·∫°p</div>
        </div>
    </div>

    <div class="submit-section">
        <button class="submit-btn" onclick="showFinalResult()">N·ªôp b√†i & Xem ƒëi·ªÉm</button>
    </div>
</div>

<!-- Result Popup -->
<div class="result-overlay" id="resultOverlay">
    <div class="result-card">
        <h2>K·∫øt qu·∫£</h2>
        <div class="score-display" id="finalScore">0/0</div>
        <div class="feedback-text" id="finalFeedback">C·ªë g·∫Øng l√™n nh√©!</div>
        <button class="close-btn" onclick="closeResult()">Xem l·∫°i b√†i</button>
    </div>
</div>

<script>
    // --- SOUND EFFECTS (Base64 for single file) ---
    // Short Ding (Correct)
    const soundCorrect = new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbqWEyMmih0NupYTIyaKHQ26lhMjJoodDbqWEyMmih0NupYTIyaKHQ26lhMjJoodDbqWEyMmih0NupYTIyAA=="); 
    // Just a placeholder base64, usually you'd use a real one. 
    // Implementing a simple synth for robustness.
    
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
        if (audioCtx.state === 'suspended') {
            audioCtx.resume();
        }
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            osc.type = 'sine';
            osc.frequency.setValueAtTime(500, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } else {
            // Wrong sound (Buzz/Fail)
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // --- CONFETTI EFFECT (Simplified JS) ---
    function fireConfetti(x, y) {
        const colors = ['#8854C0', '#00C9A7', '#FF4757', '#FFD700'];
        for (let i = 0; i < 30; i++) {
            const confetti = document.createElement('div');
            confetti.style.position = 'fixed';
            confetti.style.left = x + 'px';
            confetti.style.top = y + 'px';
            confetti.style.width = '10px';
            confetti.style.height = '10px';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.zIndex = '9999';
            confetti.style.borderRadius = '50%';
            document.body.appendChild(confetti);

            const angle = Math.random() * Math.PI * 2;
            const velocity = 5 + Math.random() * 5;
            const tx = Math.cos(angle) * 100 * Math.random();
            const ty = Math.sin(angle) * 100 * Math.random();

            confetti.animate([
                { transform: 'translate(0,0) scale(1)', opacity: 1 },
                { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
            ], {
                duration: 800,
                easing: 'cubic-bezier(0, .9, .57, 1)',
                fill: 'forwards'
            }).onfinish = () => confetti.remove();
        }
    }

    // --- DATA ---
    const quizData = [
    {
      "questionNumber": 1,
      "question": "Exercise 4 - Q1: If you don‚Äôt know what a word ___________________, try to guess its meaning first.",
      "answerOptions": [
        { "text": "means", "isCorrect": true },
        { "text": "says", "isCorrect": false },
        { "text": "translates", "isCorrect": false },
        { "text": "exchange", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- means (v): c√≥ nghƒ©a l√†.\n- says (v): n√≥i.\n- translates (v): d·ªãch.\n- explains (v): gi·∫£i th√≠ch.\n\n2. D·ªãch nghƒ©a: N·∫øu b·∫°n kh√¥ng bi·∫øt m·ªôt t·ª´ c√≥ nghƒ©a l√† g√¨, h√£y c·ªë g·∫Øng ƒëo√°n nghƒ©a c·ªßa n√≥ tr∆∞·ªõc.\n\n3. Gi·∫£i th√≠ch:\n- C·∫•u tr√∫c 'what a word means' (t·ª´ ƒë√≥ c√≥ nghƒ©a g√¨) l√† c√°ch di·ªÖn ƒë·∫°t ph·ªï bi·∫øn khi n√≥i v·ªÅ ƒë·ªãnh nghƒ©a.\n- T·ª´ trong khung b√†i cho l√† 'means'."
    },
    {
      "questionNumber": 2,
      "question": "Exercise 4 - Q2: To know how to pronounce a word, you can ___________________ it [up] in an Oxford dictionary.",
      "answerOptions": [
        { "text": "look", "isCorrect": true },
        { "text": "copy", "isCorrect": false },
        { "text": "go", "isCorrect": false },
        { "text": "pick", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- look (v): nh√¨n (look up: tra c·ª©u).\n- find (v): t√¨m th·∫•y.\n- see (v): th·∫•y.\n- watch (v): xem.\n\n2. D·ªãch nghƒ©a: ƒê·ªÉ bi·∫øt c√°ch ph√°t √¢m m·ªôt t·ª´, b·∫°n c√≥ th·ªÉ tra c·ª©u n√≥ trong t·ª´ ƒëi·ªÉn Oxford.\n\n3. Gi·∫£i th√≠ch:\n- C·ª•m ƒë·ªông t·ª´ 'look up' nghƒ©a l√† tra c·ª©u (t·ª´ ƒëi·ªÉn, th√¥ng tin).\n- Trong danh s√°ch t·ª´ cho tr∆∞·ªõc, 'look' l√† t·ª´ ph√π h·ª£p ƒë·ªÉ gh√©p th√†nh c·ª•m t·ª´ n√†y."
    },
    {
      "questionNumber": 3,
      "question": "Exercise 4 - Q3: Scientists determine the age of a tree by counting the number of ___________________ rings in its trunk...",
      "answerOptions": [
        { "text": "concentric", "isCorrect": true },
        { "text": "fluent", "isCorrect": false },
        { "text": "bilingual", "isCorrect": false },
        { "text": "external", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- concentric (adj): ƒë·ªìng t√¢m (c√°c v√≤ng tr√≤n c√≥ chung t√¢m).\n- round (adj): tr√≤n.\n- circular (adj): thu·ªôc h√¨nh tr√≤n.\n- wooden (adj): b·∫±ng g·ªó.\n\n2. D·ªãch nghƒ©a: C√°c nh√† khoa h·ªçc x√°c ƒë·ªãnh tu·ªïi c·ªßa c√¢y b·∫±ng c√°ch ƒë·∫øm s·ªë l∆∞·ª£ng c√°c v√≤ng tr√≤n ƒë·ªìng t√¢m trong th√¢n c√¢y...\n\n3. Gi·∫£i th√≠ch:\n- Trong sinh h·ªçc v√† h√¨nh h·ªçc, c√°c v√≤ng g·ªó c·ªßa c√¢y ƒë∆∞·ª£c g·ªçi l√† 'concentric rings' (v√≤ng ƒë·ªìng t√¢m). ƒê√¢y l√† t·ª´ v·ª±ng chuy√™n ng√†nh c√≥ trong b√†i h·ªçc."
    },
    {
      "questionNumber": 4,
      "question": "Exercise 4 - Q4: It‚Äôs often useful to ___________________ words from one language to the other, but it‚Äôs best when you can start to think in the new language.",
      "answerOptions": [
        { "text": "translate", "isCorrect": true },
        { "text": "exchange", "isCorrect": false },
        { "text": "copy", "isCorrect": false },
        { "text": "look", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- translate (v): d·ªãch.\n- transfer (v): chuy·ªÉn ƒë·ªïi/chuy·ªÉn kho·∫£n.\n- transform (v): bi·∫øn ƒë·ªïi.\n- transport (v): v·∫≠n chuy·ªÉn.\n\n2. D·ªãch nghƒ©a: Th∆∞·ªùng r·∫•t h·ªØu √≠ch khi d·ªãch t·ª´ v·ª±ng t·ª´ ng√¥n ng·ªØ n√†y sang ng√¥n ng·ªØ kh√°c, nh∆∞ng t·ªët nh·∫•t l√† b·∫°n c√≥ th·ªÉ b·∫Øt ƒë·∫ßu suy nghƒ© b·∫±ng ng√¥n ng·ªØ m·ªõi.\n\n3. Gi·∫£i th√≠ch:\n- C·ª•m 'from one language to the other' l√† d·∫•u hi·ªáu r√µ nh·∫•t c·ªßa h√†nh ƒë·ªông 'translate' (d·ªãch thu·∫≠t)."
    },
    {
      "questionNumber": 5,
      "question": "Exercise 4 - Q5: We went to Paris last summer and I ___________________ up the basics of French.",
      "answerOptions": [
        { "text": "picked", "isCorrect": true },
        { "text": "look", "isCorrect": false },
        { "text": "went", "isCorrect": false },
        { "text": "copy", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- picked (v): nh·∫∑t/ch·ªçn (picked up: h·ªçc l·ªèm/h·ªçc nhanh).\n- took (v): l·∫•y (took up: b·∫Øt ƒë·∫ßu m·ªôt s·ªü th√≠ch).\n- make (v): l√†m (make up: b·ªãa ƒë·∫∑t/trang ƒëi·ªÉm).\n- get (v): l·∫•y (get up: th·ª©c d·∫≠y).\n\n2. D·ªãch nghƒ©a: Ch√∫ng t√¥i ƒë√£ ƒë·∫øn Paris m√πa h√® nƒÉm ngo√°i v√† t√¥i ƒë√£ h·ªçc ƒë∆∞·ª£c nh·ªØng ƒëi·ªÅu c∆° b·∫£n c·ªßa ti·∫øng Ph√°p.\n\n3. Gi·∫£i th√≠ch:\n- C·ª•m ƒë·ªông t·ª´ 'pick up' (a language/skill) nghƒ©a l√† h·ªçc ƒë∆∞·ª£c (th∆∞·ªùng l√† h·ªçc nhanh qua tr·∫£i nghi·ªám th·ª±c t·∫ø thay v√¨ tr∆∞·ªùng l·ªõp)."
    },
    {
      "questionNumber": 6,
      "question": "Exercise 4 - Q6: I come from Vietnam, and I am a(n) ___________________ student in America.",
      "answerOptions": [
        { "text": "exchange", "isCorrect": true },
        { "text": "bilingual", "isCorrect": false },
        { "text": "fluent", "isCorrect": false },
        { "text": "concentric", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- exchange (n): trao ƒë·ªïi.\n- foreign (adj): n∆∞·ªõc ngo√†i.\n- international (adj): qu·ªëc t·∫ø.\n- transfer (n): chuy·ªÉn ƒë·ªïi.\n\n2. D·ªãch nghƒ©a: T√¥i ƒë·∫øn t·ª´ Vi·ªát Nam, v√† t√¥i l√† m·ªôt sinh vi√™n trao ƒë·ªïi t·∫°i M·ªπ.\n\n3. Gi·∫£i th√≠ch:\n- 'Exchange student' l√† c·ª•m danh t·ª´ c·ªë ƒë·ªãnh ch·ªâ 'sinh vi√™n trao ƒë·ªïi' (ƒëi h·ªçc t·∫≠p ·ªü n∆∞·ªõc kh√°c theo ch∆∞∆°ng tr√¨nh li√™n k·∫øt). Trong khung t·ª´ v·ª±ng c√≥ t·ª´ 'exchange'."
    },
    {
      "questionNumber": 7,
      "question": "Exercise 4 - Q7: I am ___________________ because my father is French and my mother is Spanish.",
      "answerOptions": [
        { "text": "bilingual", "isCorrect": true },
        { "text": "fluent", "isCorrect": false },
        { "text": "concentric", "isCorrect": false },
        { "text": "picked", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- bilingual (adj): song ng·ªØ (n√≥i ƒë∆∞·ª£c 2 th·ª© ti·∫øng).\n- fluent (adj): tr√¥i ch·∫£y.\n- multinational (adj): ƒëa qu·ªëc gia.\n- mixed (adj): lai.\n\n2. D·ªãch nghƒ©a: T√¥i n√≥i ƒë∆∞·ª£c hai th·ª© ti·∫øng v√¨ b·ªë t√¥i l√† ng∆∞·ªùi Ph√°p v√† m·∫π t√¥i l√† ng∆∞·ªùi T√¢y Ban Nha.\n\n3. Gi·∫£i th√≠ch:\n- C√≥ b·ªë m·∫π n√≥i 2 ng√¥n ng·ªØ kh√°c nhau -> ng∆∞·ªùi con c√≥ kh·∫£ nƒÉng n√≥i 2 th·ª© ti·∫øng -> d√πng 'bilingual'."
    },
    {
      "questionNumber": 8,
      "question": "Exercise 4 - Q8: I‚Äôm also ___________________ in English because I work in a multinational company.",
      "answerOptions": [
        { "text": "fluent", "isCorrect": true },
        { "text": "bilingual", "isCorrect": false },
        { "text": "means", "isCorrect": false },
        { "text": "copy", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- fluent (adj): tr√¥i ch·∫£y/th√¥ng th·∫°o.\n- good (adj): gi·ªèi.\n- bad (adj): t·ªá.\n- bilingual (adj): song ng·ªØ.\n\n2. D·ªãch nghƒ©a: T√¥i c≈©ng th√¥ng th·∫°o ti·∫øng Anh v√¨ t√¥i l√†m vi·ªác trong m·ªôt c√¥ng ty ƒëa qu·ªëc gia.\n\n3. Gi·∫£i th√≠ch:\n- C·∫•u tr√∫c 'fluent in + [language]' nghƒ©a l√† th√¥ng th·∫°o ng√¥n ng·ªØ n√†o ƒë√≥.\n- Ng·ªØ c·∫£nh l√†m vi·ªác c√¥ng ty ƒëa qu·ªëc gia ƒë√≤i h·ªèi s·ª± th√¥ng th·∫°o."
    },
    {
      "questionNumber": 9,
      "question": "Exercise 4 - Q9: My English teacher always asks us to ___________________ all new words and sentence structures into a notebook.",
      "answerOptions": [
        { "text": "copy", "isCorrect": true },
        { "text": "translate", "isCorrect": false },
        { "text": "exchange", "isCorrect": false },
        { "text": "go", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- copy (v): sao ch√©p/ch√©p l·∫°i.\n- write (v): vi·∫øt.\n- translate (v): d·ªãch.\n- look (v): nh√¨n.\n\n2. D·ªãch nghƒ©a: Gi√°o vi√™n ti·∫øng Anh c·ªßa t√¥i lu√¥n y√™u c·∫ßu ch√∫ng t√¥i ch√©p t·∫•t c·∫£ t·ª´ m·ªõi v√† c·∫•u tr√∫c c√¢u v√†o m·ªôt cu·ªën v·ªü.\n\n3. Gi·∫£i th√≠ch:\n- H√†nh ƒë·ªông ghi ch√©p l·∫°i b√†i h·ªçc v√†o v·ªü ph√π h·ª£p v·ªõi ƒë·ªông t·ª´ 'copy' (ch√©p l·∫°i)."
    },
    {
      "questionNumber": 10,
      "question": "Exercise 4 - Q10: Please ___________________ over your work before you hand it in or else you would get bad marks.",
      "answerOptions": [
        { "text": "go", "isCorrect": true },
        { "text": "look", "isCorrect": false },
        { "text": "pick", "isCorrect": false },
        { "text": "copy", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- go (v): ƒëi (go over: xem x√©t k·ªπ/ki·ªÉm tra l·∫°i).\n- look (v): nh√¨n (look over: xem qua).\n- read (v): ƒë·ªçc.\n- check (v): ki·ªÉm tra.\n\n2. D·ªãch nghƒ©a: Vui l√≤ng ki·ªÉm tra k·ªπ b√†i l√†m c·ªßa b·∫°n tr∆∞·ªõc khi n·ªôp n·∫øu kh√¥ng b·∫°n s·∫Ω b·ªã ƒëi·ªÉm k√©m.\n\n3. Gi·∫£i th√≠ch:\n- C·ª•m 'go over' nghƒ©a l√† ki·ªÉm tra k·ªπ l∆∞·ª°ng, r√† so√°t l·∫°i (to examine or check something carefully). Trong c√°c t·ª´ cho s·∫µn, 'go' l√† ƒë√°p √°n ƒë√∫ng."
    },
    {
      "questionNumber": 11,
      "question": "Exercise 5 - Q1: Learners of English often **look up** new words in dictionaries to understand their meanings. (T√¨m t·ª´ ƒê·ªíNG NGHƒ®A)",
      "answerOptions": [
        { "text": "search for", "isCorrect": true },
        { "text": "set up", "isCorrect": false },
        { "text": "go over", "isCorrect": false },
        { "text": "come from", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- look up (phr.v): tra c·ª©u.\n- A. set up (phr.v): th√†nh l·∫≠p/c√†i ƒë·∫∑t.\n- B. go over (phr.v): ki·ªÉm tra l·∫°i.\n- C. search for (phr.v): t√¨m ki·∫øm.\n- D. come from (phr.v): ƒë·∫øn t·ª´.\n\n2. D·ªãch nghƒ©a: Ng∆∞·ªùi h·ªçc Ti·∫øng Anh th∆∞·ªùng tra t·ª´ m·ªõi trong t·ª´ ƒëi·ªÉn ƒë·ªÉ hi·ªÉu nghƒ©a c·ªßa ch√∫ng.\n\n3. Gi·∫£i th√≠ch: 'look up' trong ng·ªØ c·∫£nh t·ª´ ƒëi·ªÉn ƒë·ªìng nghƒ©a v·ªõi 'search for' (th√¥ng tin)."
    },
    {
      "questionNumber": 12,
      "question": "Exercise 5 - Q2: Because English has become a global language, many **foreign** words have been incorporated into its vocabulary. (T√¨m t·ª´ ƒê·ªíNG NGHƒ®A v·ªõi t·ª´ ƒë∆∞·ª£c √°m ch·ªâ)",
      "answerOptions": [
        { "text": "external", "isCorrect": true },
        { "text": "excellent", "isCorrect": false },
        { "text": "concentric", "isCorrect": false },
        { "text": "fluent", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- foreign (adj): n∆∞·ªõc ngo√†i/ngo·∫°i lai.\n- A. excellent (adj): xu·∫•t s·∫Øc.\n- B. external (adj): b√™n ngo√†i/ƒë·ªëi ngo·∫°i.\n- C. concentric (adj): ƒë·ªìng t√¢m.\n- D. fluent (adj): tr√¥i ch·∫£y.\n\n2. D·ªãch nghƒ©a: V√¨ Ti·∫øng Anh ƒë√£ tr·ªü th√†nh ng√¥n ng·ªØ to√†n c·∫ßu, nhi·ªÅu t·ª´ ng·ªØ n∆∞·ªõc ngo√†i ƒë√£ ƒë∆∞·ª£c s√°p nh·∫≠p v√†o v·ªën t·ª´ v·ª±ng c·ªßa n√≥.\n\n3. Gi·∫£i th√≠ch: Trong ng·ªØ c·∫£nh n√†y, 'foreign words' (t·ª´ n∆∞·ªõc ngo√†i) ƒë·ªìng nghƒ©a nh·∫•t v·ªõi 'external' (t·ª´ b√™n ngo√†i ƒë∆∞a v√†o) so v·ªõi c√°c ƒë√°p √°n c√≤n l·∫°i."
    },
    {
      "questionNumber": 13,
      "question": "Exercise 5 - Q3: The grammar rules can be quite **complicated** for those who are not familiar with the language. (T√¨m t·ª´ ƒê·ªíNG NGHƒ®A)",
      "answerOptions": [
        { "text": "complex", "isCorrect": true },
        { "text": "challenging", "isCorrect": false },
        { "text": "common", "isCorrect": false },
        { "text": "effective", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- complicated (adj): ph·ª©c t·∫°p.\n- A. complex (adj): ph·ª©c t·∫°p.\n- B. challenging (adj): ƒë·∫ßy th·ª≠ th√°ch.\n- C. common (adj): ph·ªï bi·∫øn.\n- D. effective (adj): hi·ªáu qu·∫£.\n\n2. D·ªãch nghƒ©a: C√°c quy t·∫Øc ng·ªØ ph√°p c√≥ th·ªÉ kh√° ph·ª©c t·∫°p ƒë·ªëi v·ªõi nh·ªØng ng∆∞·ªùi ch∆∞a quen v·ªõi ng√¥n ng·ªØ n√†y.\n\n3. Gi·∫£i th√≠ch: 'Complicated' v√† 'complex' ƒë·ªÅu mang nghƒ©a r·∫Øc r·ªëi, ph·ª©c t·∫°p, nhi·ªÅu th√†nh ph·∫ßn."
    },
    {
      "questionNumber": 14,
      "question": "Exercise 5 - Q4: English as a Lingua Franca (ELF) was **established** to facilitate communication between people who do not share a native language. (T√¨m t·ª´ ƒê·ªíNG NGHƒ®A)",
      "answerOptions": [
        { "text": "created", "isCorrect": true },
        { "text": "borrowed", "isCorrect": false },
        { "text": "translated", "isCorrect": false },
        { "text": "eliminated", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- established (v): thi·∫øt l·∫≠p, th√†nh l·∫≠p.\n- A. created (v): t·∫°o ra.\n- B. borrowed (v): vay m∆∞·ª£n.\n- C. translated (v): d·ªãch.\n- D. eliminated (v): lo·∫°i b·ªè.\n\n2. D·ªãch nghƒ©a: Ti·∫øng Anh nh∆∞ m·ªôt ng√¥n ng·ªØ chung (ELF) ƒë∆∞·ª£c thi·∫øt l·∫≠p ƒë·ªÉ t·∫°o ƒëi·ªÅu ki·ªán giao ti·∫øp gi·ªØa nh·ªØng ng∆∞·ªùi kh√¥ng c√πng ng√¥n ng·ªØ m·∫π ƒë·∫ª.\n\n3. Gi·∫£i th√≠ch: 'Established' (thi·∫øt l·∫≠p/x√¢y d·ª±ng n·ªÅn t·∫£ng) g·∫ßn nghƒ©a nh·∫•t v·ªõi 'created' (t·∫°o ra) trong b·ªëi c·∫£nh h√¨nh th√†nh m·ªôt h·ªá th·ªëng giao ti·∫øp."
    },
    {
      "questionNumber": 15,
      "question": "Exercise 5 - Q5: Many language experts **recommend** immersion as an effective method for learning English. (T√¨m t·ª´ ƒê·ªíNG NGHƒ®A)",
      "answerOptions": [
        { "text": "suggest", "isCorrect": true },
        { "text": "praise", "isCorrect": false },
        { "text": "introduce", "isCorrect": false },
        { "text": "mean", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- recommend (v): ƒë·ªÅ xu·∫•t, khuy√™n d√πng.\n- A. praise (v): khen ng·ª£i.\n- B. introduce (v): gi·ªõi thi·ªáu.\n- C. suggest (v): g·ª£i √Ω, ƒë·ªÅ xu·∫•t.\n- D. mean (v): c√≥ nghƒ©a l√†.\n\n2. D·ªãch nghƒ©a: Nhi·ªÅu chuy√™n gia ng√¥n ng·ªØ khuy√™n d√πng ph∆∞∆°ng ph√°p h√≤a nh·∫≠p (immersion) nh∆∞ m·ªôt c√°ch h·ªçc ti·∫øng Anh hi·ªáu qu·∫£.\n\n3. Gi·∫£i th√≠ch: 'Recommend' v√† 'suggest' ƒë·ªÅu mang nghƒ©a ƒë∆∞a ra √Ω ki·∫øn khuy√™n ai ƒë√≥ n√™n l√†m g√¨."
    },
    {
      "questionNumber": 16,
      "question": "Exercise 6 - Q1: Linguists often visualize the spread of English as a series of **concentric** circles... (T√¨m t·ª´ TR√ÅI NGHƒ®A)",
      "answerOptions": [
        { "text": "random", "isCorrect": true },
        { "text": "foreign", "isCorrect": false },
        { "text": "official", "isCorrect": false },
        { "text": "excellent", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- concentric (adj): ƒë·ªìng t√¢m (c√≥ tr·∫≠t t·ª±, c√πng t√¢m ƒëi·ªÉm).\n- A. random (adj): ng·∫´u nhi√™n, l·ªôn x·ªôn.\n- B. foreign (adj): n∆∞·ªõc ngo√†i.\n- C. official (adj): ch√≠nh th·ª©c.\n- D. excellent (adj): xu·∫•t s·∫Øc.\n\n2. D·ªãch nghƒ©a: C√°c nh√† ng√¥n ng·ªØ h·ªçc th∆∞·ªùng h√¨nh dung s·ª± lan t·ªèa c·ªßa ti·∫øng Anh nh∆∞ m·ªôt lo·∫°t c√°c v√≤ng tr√≤n ƒë·ªìng t√¢m...\n\n3. Gi·∫£i th√≠ch: 'Concentric' √°m ch·ªâ s·ª± s·∫Øp x·∫øp c√≥ tr·∫≠t t·ª±, quy t·∫Øc h√¨nh h·ªçc r√µ r√†ng. 'Random' (ng·∫´u nhi√™n, kh√¥ng c√≥ tr·∫≠t t·ª±) l√† t·ª´ tr√°i nghƒ©a ph√π h·ª£p nh·∫•t trong c√°c l·ª±a ch·ªçn."
    },
    {
      "questionNumber": 17,
      "question": "Exercise 6 - Q2: Speaking English with **clarity** is important for effective communication... (T√¨m t·ª´ TR√ÅI NGHƒ®A)",
      "answerOptions": [
        { "text": "obscurity", "isCorrect": true },
        { "text": "charity", "isCorrect": false },
        { "text": "community", "isCorrect": false },
        { "text": "variety", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- clarity (n): s·ª± r√µ r√†ng.\n- A. charity (n): t·ª´ thi·ªán.\n- B. community (n): c·ªông ƒë·ªìng.\n- C. variety (n): s·ª± ƒëa d·∫°ng.\n- D. obscurity (n): s·ª± t·ªëi nghƒ©a, kh√¥ng r√µ r√†ng.\n\n2. D·ªãch nghƒ©a: N√≥i ti·∫øng Anh v·ªõi s·ª± r√µ r√†ng l√† r·∫•t quan tr·ªçng ƒë·ªÉ giao ti·∫øp hi·ªáu qu·∫£...\n\n3. Gi·∫£i th√≠ch: Tr√°i nghƒ©a v·ªõi 'clarity' (r√µ r√†ng) l√† 'obscurity' (m∆° h·ªì, kh√≥ hi·ªÉu)."
    },
    {
      "questionNumber": 18,
      "question": "Exercise 6 - Q3: Many language learners **praise** the flexibility of English... (T√¨m t·ª´ TR√ÅI NGHƒ®A)",
      "answerOptions": [
        { "text": "criticize", "isCorrect": true },
        { "text": "refer", "isCorrect": false },
        { "text": "educate", "isCorrect": false },
        { "text": "invent", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- praise (v): ca ng·ª£i.\n- A. refer (v): tham kh·∫£o.\n- B. criticize (v): ch·ªâ tr√≠ch/ph√™ b√¨nh.\n- C. educate (v): gi√°o d·ª•c.\n- D. invent (v): ph√°t minh.\n\n2. D·ªãch nghƒ©a: Nhi·ªÅu ng∆∞·ªùi h·ªçc ng√¥n ng·ªØ ca ng·ª£i s·ª± linh ho·∫°t c·ªßa ti·∫øng Anh...\n\n3. Gi·∫£i th√≠ch: Tr√°i nghƒ©a v·ªõi 'ca ng·ª£i' (praise) l√† 'ch·ªâ tr√≠ch' (criticize)."
    },
    {
      "questionNumber": 19,
      "question": "Exercise 6 - Q4: It can be **challenging** to understand different English accents... (T√¨m t·ª´ TR√ÅI NGHƒ®A)",
      "answerOptions": [
        { "text": "easy", "isCorrect": true },
        { "text": "official", "isCorrect": false },
        { "text": "difficult", "isCorrect": false },
        { "text": "developed", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- challenging (adj): ƒë·∫ßy th·ª≠ th√°ch/kh√≥ khƒÉn.\n- A. official (adj): ch√≠nh th·ª©c.\n- B. difficult (adj): kh√≥ khƒÉn (ƒë·ªìng nghƒ©a).\n- C. easy (adj): d·ªÖ d√†ng.\n- D. developed (adj): ph√°t tri·ªÉn.\n\n2. D·ªãch nghƒ©a: C√≥ th·ªÉ r·∫•t th·ª≠ th√°ch ƒë·ªÉ hi·ªÉu c√°c gi·ªçng ti·∫øng Anh kh√°c nhau...\n\n3. Gi·∫£i th√≠ch: Tr√°i nghƒ©a v·ªõi 'th·ª≠ th√°ch/kh√≥' l√† 'd·ªÖ' (easy)."
    },
    {
      "questionNumber": 20,
      "question": "Exercise 6 - Q5: The **increase** in global communication has led to the emergence of many varieties of English... (T√¨m t·ª´ TR√ÅI NGHƒ®A)",
      "answerOptions": [
        { "text": "decrease", "isCorrect": true },
        { "text": "quality", "isCorrect": false },
        { "text": "standard", "isCorrect": false },
        { "text": "development", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- increase (n): s·ª± gia tƒÉng.\n- A. quality (n): ch·∫•t l∆∞·ª£ng.\n- B. standard (n): ti√™u chu·∫©n.\n- C. development (n): s·ª± ph√°t tri·ªÉn.\n- D. decrease (n): s·ª± s·ª•t gi·∫£m.\n\n2. D·ªãch nghƒ©a: S·ª± gia tƒÉng trong giao ti·∫øp to√†n c·∫ßu ƒë√£ d·∫´n ƒë·∫øn s·ª± xu·∫•t hi·ªán c·ªßa nhi·ªÅu bi·∫øn th·ªÉ ti·∫øng Anh...\n\n3. Gi·∫£i th√≠ch: Tr√°i nghƒ©a v·ªõi 'tƒÉng' (increase) l√† 'gi·∫£m' (decrease)."
    }
  ];

    let currentScore = 0;
    const answeredQuestions = new Set();

    // Utility: Shuffle Array
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // Render Quiz
    function renderQuiz() {
        // Shuffle questions before rendering
        shuffleArray(quizData);
        
        const container = document.getElementById('quiz-container');
        container.innerHTML = '';

        quizData.forEach((item, index) => {
            // SHUFFLE OPTIONS HERE:
            shuffleArray(item.answerOptions);

            // Clean Rationale to remove hardcoded A. B. C. D. since answers are shuffled
            // Replace "- A. word:" with "- word:"
            item.rationale = item.rationale.replace(/- [A-D]\. /g, '- ');

            // Create Card
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `q-card-${index}`;

            // Formatting question text to handle bold markdown
            const formattedQuestion = item.question.replace(/\*\*(.*?)\*\*/g, '<u>$1</u>');

            // HTML Structure
            let html = `
                <div class="question-number">C√¢u ${index + 1}</div>
                <div class="question-text">${formattedQuestion}</div>
                <div class="options-grid">
            `;

            // Options
            item.answerOptions.forEach((option, optIndex) => {
                html += `
                    <button class="option-btn" 
                        onclick="checkAnswer(${index}, ${optIndex}, this, ${option.isCorrect})"
                        id="q${index}-opt${optIndex}">
                        ${String.fromCharCode(65 + optIndex)}. ${option.text}
                    </button>
                `;
            });

            // Close grid and add Explanation Box
            html += `
                </div>
                <div class="explanation-box" id="explain-${index}">
                    <div class="explanation-header">
                        <div class="teacher-avatar">Ms</div>
                        C√¥ Mai An gi·∫£i th√≠ch:
                    </div>
                    ${item.rationale}
                </div>
            `;

            card.innerHTML = html;
            container.appendChild(card);
        });
    }

    // Handle Answer Click
    window.checkAnswer = function(questionIndex, optionIndex, btnElement, isCorrect) {
        // Prevent re-answering
        if (answeredQuestions.has(questionIndex)) return;
        answeredQuestions.add(questionIndex);

        const explanationBox = document.getElementById(`explain-${questionIndex}`);
        const allButtons = document.querySelectorAll(`#q-card-${questionIndex} .option-btn`);

        // Disable all buttons for this question
        allButtons.forEach(btn => btn.disabled = true);

        if (isCorrect) {
            btnElement.classList.add('correct');
            currentScore++;
            playSound('correct');
            
            // Get position for confetti
            const rect = btnElement.getBoundingClientRect();
            fireConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2);
        } else {
            btnElement.classList.add('wrong');
            playSound('wrong');
            
            // Highlight the correct answer automatically if wrong
            const correctOptIndex = quizData[questionIndex].answerOptions.findIndex(o => o.isCorrect);
            const correctBtn = document.getElementById(`q${questionIndex}-opt${correctOptIndex}`);
            if(correctBtn) correctBtn.classList.add('correct');
        }

        // Show Explanation
        explanationBox.style.display = 'block';
    }

    // Final Result
    window.showFinalResult = function() {
        const overlay = document.getElementById('resultOverlay');
        const scoreDisplay = document.getElementById('finalScore');
        const feedback = document.getElementById('finalFeedback');
        
        scoreDisplay.innerText = `${currentScore}/${quizData.length}`;
        
        const percentage = (currentScore / quizData.length) * 100;
        if (percentage === 100) {
            feedback.innerText = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i Ti·∫øng Anh! üåü";
            fireConfetti(window.innerWidth / 2, window.innerHeight / 2);
        } else if (percentage >= 80) {
            feedback.innerText = "Gi·ªèi l·∫Øm! Ch·ªâ c√≤n ch√∫t x√≠u n·ªØa l√† ho√†n h·∫£o! üéâ";
        } else if (percentage >= 50) {
            feedback.innerText = "Kh√° t·ªët! C·∫ßn √¥n t·∫≠p th√™m ch√∫t n·ªØa nh√©! üí™";
        } else {
            feedback.innerText = "ƒê·ª´ng bu·ªìn! H√£y xem k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch nh√©! üìö";
        }

        overlay.style.display = 'flex';
    }

    window.closeResult = function() {
        document.getElementById('resultOverlay').style.display = 'none';
    }

    // Start
    renderQuiz();

</script>

</body>
</html>
