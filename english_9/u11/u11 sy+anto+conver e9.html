<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F3F8;
            --card-bg: #FFFFFF;
            --text-dark: #2d3436;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dbe3f0 2px, transparent 2px);
            background-size: 20px 20px;
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        /* --- Header --- */
        .header-bar {
            background: linear-gradient(135deg, var(--primary-pink), #a29bfe);
            color: white;
            padding: 15px 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(136, 84, 192, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        .header-title {
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 1.6rem;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .teacher-name {
            font-size: 0.9rem;
            opacity: 0.95;
            margin-top: 5px;
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 3px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        /* --- Main Container --- */
        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 15px 100px 15px; /* Padding for footer */
        }

        /* --- Section Header --- */
        .section-header {
            background: #fff;
            border: 3px dashed var(--primary-pink);
            color: var(--primary-pink);
            padding: 15px;
            border-radius: 20px;
            text-align: center;
            font-weight: 800;
            font-size: 1.2rem;
            margin: 40px 0 20px 0;
            box-shadow: 0 5px 0 #e1bee7;
        }

        /* --- Question Card --- */
        .question-card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 #dfe6e9, 0 10px 20px rgba(0,0,0,0.1);
            border: 2px solid #f1f2f6;
            transition: transform 0.3s ease;
            position: relative;
        }

        .question-header {
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 25px;
            color: #2f3542;
            line-height: 1.6;
        }

        .q-tag {
            background: var(--primary-teal);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            margin-right: 10px;
            font-size: 0.9rem;
            font-weight: 800;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            vertical-align: middle;
        }

        /* --- Options Grid --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe4ea;
            border-bottom: 5px solid #dfe4ea;
            border-radius: 20px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: #57606f;
            cursor: pointer;
            transition: all 0.1s;
            text-align: left;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-btn .label {
            margin-right: 10px;
            background: #f1f2f6;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            color: #a4b0be;
        }

        .option-btn:hover:not(.disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-pink);
            color: var(--primary-pink);
        }
        
        .option-btn:hover:not(.disabled) .label {
            background: var(--primary-pink);
            color: white;
        }

        .option-btn:active:not(.disabled) {
            transform: translateY(3px);
            border-bottom-width: 2px;
        }

        /* --- States --- */
        .option-btn.correct {
            background-color: var(--correct-green);
            border-color: #00b85c;
            border-bottom-color: #00944a;
            color: white;
        }
        .option-btn.correct .label { background: rgba(255,255,255,0.3); color: white; }

        .option-btn.wrong {
            background-color: var(--wrong-red);
            border-color: #ff2e43;
            border-bottom-color: #d63031;
            color: white;
            animation: shake 0.5s;
        }
        .option-btn.wrong .label { background: rgba(255,255,255,0.3); color: white; }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        /* --- Explanation Box --- */
        .explanation-box {
            display: none;
            margin-top: 25px;
            background: #fff0f6;
            border: 2px solid #ffcce0;
            padding: 20px;
            border-radius: 15px;
            font-size: 0.95rem;
            line-height: 1.6;
            animation: slideUp 0.4s ease-out;
            box-shadow: 0 4px 0 #ffcce0;
        }

        .expl-header {
            font-weight: 800;
            color: #d63031;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        .expl-content strong { color: var(--primary-pink); }
        .expl-content p { margin: 5px 0; }
        .expl-content ul { padding-left: 20px; margin: 10px 0; }
        .expl-content li { margin-bottom: 5px; }

        /* --- Footer/Submit --- */
        .quiz-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px 20px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            z-index: 99;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
        }

        .score-box {
            font-weight: 800;
            color: var(--primary-teal);
            font-size: 1.4rem;
            background: #e0fbf6;
            padding: 8px 20px;
            border-radius: 50px;
            border: 2px solid var(--primary-teal);
        }

        .submit-btn {
            background-color: var(--primary-pink);
            color: white;
            border: none;
            padding: 12px 35px;
            font-size: 1.1rem;
            font-weight: 800;
            border-radius: 50px;
            box-shadow: 0 6px 0 #6c429c;
            cursor: pointer;
            transition: transform 0.2s;
            font-family: 'Quicksand', sans-serif;
        }

        .submit-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #6c429c;
        }

        /* --- Animations --- */
        @keyframes shake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-8px) rotate(-3deg); }
            40% { transform: translateX(8px) rotate(3deg); }
            60% { transform: translateX(-8px) rotate(-3deg); }
            80% { transform: translateX(8px) rotate(3deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        u {
            text-decoration: none;
            border-bottom: 3px solid var(--primary-pink);
            font-weight: 800;
            padding-bottom: 2px;
        }

        /* --- Modal --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 90%;
            width: 450px;
            animation: slideUp 0.5s;
            border: 4px solid var(--primary-teal);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        .modal-score {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary-pink);
            margin: 10px 0;
            text-shadow: 3px 3px 0 #dfe6e9;
        }
    </style>
</head>
<body>

    <header class="header-bar">
        <h1 class="header-title">English Test</h1>
        <span class="teacher-name">Gi√°o vi√™n: Ms Mai An ULIS</span>
    </header>

    <div class="container" id="quiz-container">
        </div>

    <div class="quiz-footer">
        <div class="score-box">ƒêi·ªÉm: <span id="current-score">0</span></div>
        <button class="submit-btn" onclick="finishQuiz()">N·ªôp b√†i</button>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2 style="color:var(--primary-teal); margin-top:0;">T·ªîNG K·∫æT</h2>
            <p style="font-size: 1.2rem;">Em ƒë√£ ho√†n th√†nh b√†i t·∫≠p!</p>
            <div class="modal-score" id="final-score">0/0</div>
            <p id="teacher-message" style="font-weight: 700; color: #57606f; font-size: 1.1rem;"></p>
            <button class="submit-btn" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

<script>
    // --- D·ªÆ LI·ªÜU ƒê·ªÄ B√ÄI ---
    const quizData = [
        // EXERCISE 4: CLOSEST IN MEANING
        {
            type: "section",
            title: "Exercise 4: Mark the letter A, B, C, or D to indicate the word(s) CLOSEST in meaning."
        },
        {
            id: 1,
            question: "This new smartphone model is very <u>portable</u> and easy to carry around.",
            options: [
                { value: "A", text: "compact", correct: true },
                { value: "B", text: "wireless" },
                { value: "C", text: "lightweight" },
                { value: "D", text: "virtual" }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> M·∫´u ƒëi·ªán tho·∫°i th√¥ng minh m·ªõi n√†y r·∫•t <u>di ƒë·ªông/ti·ªán l·ª£i</u> v√† d·ªÖ d√†ng mang theo.<br>
                <strong>Ph√¢n t√≠ch t·ª´ v·ª±ng:</strong>
                <ul>
                    <li>A. compact (adj): nh·ªè g·ªçn (th∆∞·ªùng ƒëi ƒë√¥i v·ªõi portable).</li>
                    <li>B. wireless (adj): kh√¥ng d√¢y.</li>
                    <li>C. lightweight (adj): nh·∫π.</li>
                    <li>D. virtual (adj): ·∫£o.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> "Portable" c√≥ nghƒ©a l√† c√≥ th·ªÉ mang theo d·ªÖ d√†ng. Trong ng·ªØ c·∫£nh c√¥ng ngh·ªá, t·ª´ ƒë·ªìng nghƒ©a s√°t nh·∫•t ch·ªâ t√≠nh ch·∫•t thi·∫øt k·∫ø l√† "Compact" (nh·ªè g·ªçn). M·∫∑c d√π "Lightweight" c≈©ng h·ª£p l√Ω, nh∆∞ng "Compact" bao h√†m √Ω nghƒ©a v·ªÅ k√≠ch th∆∞·ªõc ti·ªán l·ª£i ƒë·ªÉ mang ƒëi (easy to carry).<br>
                <span style="color:red">L∆∞u √Ω:</span> Trong nhi·ªÅu gi√°o tr√¨nh, Portable = Compact.
            `
        },
        {
            id: 2,
            question: "I <u>recommend</u> that she use a screen protector on her smartphone to prevent scratches and damage.",
            options: [
                { value: "A", text: "suggest", correct: true },
                { value: "B", text: "stop" },
                { value: "C", text: "use for" },
                { value: "D", text: "navigate" }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> T√¥i <u>khuy√™n/ƒë·ªÅ xu·∫•t</u> c√¥ ·∫•y n√™n d√πng mi·∫øng d√°n m√†n h√¨nh...<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. suggest (v): g·ª£i √Ω, ƒë·ªÅ xu·∫•t (= recommend).</li>
                    <li>B. stop (v): d·ª´ng l·∫°i.</li>
                    <li>C. use for (v): d√πng cho.</li>
                    <li>D. navigate (v): ƒëi·ªÅu h∆∞·ªõng.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn A v√¨ "Recommend" ƒë·ªìng nghƒ©a v·ªõi "Suggest" trong ng·ªØ c·∫£nh ƒë∆∞a ra l·ªùi khuy√™n.
            `
        },
        {
            id: 3,
            question: "Plastic bags are <u>harmful</u> for the environment, so people try to recycle them as much as possible.",
            options: [
                { value: "A", text: "entertaining" },
                { value: "B", text: "high-quality" },
                { value: "C", text: "damaging", correct: true },
                { value: "D", text: "medical" }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> T√∫i nh·ª±a <u>c√≥ h·∫°i</u> cho m√¥i tr∆∞·ªùng...<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. entertaining (adj): mang t√≠nh gi·∫£i tr√≠.</li>
                    <li>B. high-quality (adj): ch·∫•t l∆∞·ª£ng cao.</li>
                    <li>C. damaging (adj): g√¢y thi·ªát h·∫°i, c√≥ h·∫°i (= harmful).</li>
                    <li>D. medical (adj): thu·ªôc y t·∫ø.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn C. "Harmful" = "Damaging" (g√¢y h·∫°i).
            `
        },
        {
            id: 4,
            question: "Her job requires a lot of <u>flexibility</u> as she often needs to adapt to sudden changes in project deadlines.",
            options: [
                { value: "A", text: "assistant" },
                { value: "B", text: "camcorder" },
                { value: "C", text: "cardboard" },
                { value: "D", text: "adaptability", correct: true }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> C√¥ng vi·ªác ƒë√≤i h·ªèi nhi·ªÅu <u>s·ª± linh ho·∫°t</u> v√¨ c√¥ ·∫•y th∆∞·ªùng ph·∫£i th√≠ch nghi v·ªõi thay ƒë·ªïi...<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. assistant (n): tr·ª£ l√Ω.</li>
                    <li>B. camcorder (n): m√°y quay phim.</li>
                    <li>C. cardboard (n): b√¨a c·ª©ng.</li>
                    <li>D. adaptability (n): kh·∫£ nƒÉng th√≠ch nghi (= flexibility).</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn D. "Flexibility" (s·ª± linh ho·∫°t) ƒë·ªìng nghƒ©a v·ªõi kh·∫£ nƒÉng th√≠ch nghi "Adaptability".
            `
        },
        {
            id: 5,
            question: "Companies now rely on virtual meetings to <u>collaborate</u> with partners from different locations.",
            options: [
                { value: "A", text: "mold" },
                { value: "B", text: "prevent" },
                { value: "C", text: "connect" },
                { value: "D", text: "cooperate", correct: true }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> C√°c c√¥ng ty d·ª±a v√†o h·ªçp tr·ª±c tuy·∫øn ƒë·ªÉ <u>c·ªông t√°c</u> v·ªõi ƒë·ªëi t√°c...<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. mold (v): ƒë√∫c khu√¥n.</li>
                    <li>B. prevent (v): ngƒÉn ch·∫∑n.</li>
                    <li>C. connect (v): k·∫øt n·ªëi.</li>
                    <li>D. cooperate (v): h·ª£p t√°c (= collaborate).</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn D. Collaborate = Cooperate/Work together. "Connect" ch·ªâ l√† k·∫øt n·ªëi, ch∆∞a mang nghƒ©a l√†m vi·ªác chung.
            `
        },

        // EXERCISE 5: OPPOSITE IN MEANING
        {
            type: "section",
            title: "Exercise 5: Mark the letter A, B, C, or D to indicate the word(s) OPPOSITE in meaning."
        },
        {
            id: 6,
            question: "Online resources include a <u>wide range</u> of educational materials readily available on the internet.",
            options: [
                { value: "A", text: "limited", correct: true },
                { value: "B", text: "durable" },
                { value: "C", text: "excellent" },
                { value: "D", text: "visual" }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> T√†i nguy√™n tr·ª±c tuy·∫øn bao g·ªìm <u>nhi·ªÅu lo·∫°i/ph·∫°m vi r·ªông</u> t√†i li·ªáu gi√°o d·ª•c...<br>
                <strong>Ph√¢n t√≠ch (T√¨m t·ª´ TR√ÅI NGHƒ®A):</strong>
                <ul>
                    <li>A. limited (adj): h·∫°n ch·∫ø >< wide range (r·ªông r√£i).</li>
                    <li>B. durable (adj): b·ªÅn.</li>
                    <li>C. excellent (adj): xu·∫•t s·∫Øc.</li>
                    <li>D. visual (adj): thu·ªôc th·ªã gi√°c.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn A. Tr√°i nghƒ©a v·ªõi "Wide range" (ph·∫°m vi r·ªông/ƒëa d·∫°ng) l√† "Limited" (h·∫°n ch·∫ø).
            `
        },
        {
            id: 7,
            question: "A major <u>benefit</u> of using robots in factories is that they can perform dangerous jobs...",
            options: [
                { value: "A", text: "response" },
                { value: "B", text: "disadvantage", correct: true },
                { value: "C", text: "self-portrait" },
                { value: "D", text: "application" }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> M·ªôt <u>l·ª£i √≠ch</u> l·ªõn c·ªßa vi·ªác s·ª≠ d·ª•ng robot...<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. response (n): ph·∫£n h·ªìi.</li>
                    <li>B. disadvantage (n): b·∫•t l·ª£i >< benefit (l·ª£i √≠ch).</li>
                    <li>C. self-portrait (n): ch√¢n dung t·ª± h·ªça.</li>
                    <li>D. application (n): ·ª©ng d·ª•ng.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn B. Tr√°i nghƒ©a c·ªßa Benefit l√† Disadvantage (ho·∫∑c Drawback).
            `
        },
        {
            id: 8,
            question: "The website looked <u>suspicious</u>. Her dad suggested she not enter any personal information.",
            options: [
                { value: "A", text: "high-quality" },
                { value: "B", text: "suspicious" },
                { value: "C", text: "responsive" },
                { value: "D", text: "trustworthy", correct: true }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> Trang web tr√¥ng c√≥ v·∫ª <u>ƒë√°ng ng·ªù</u>...<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. high-quality: ch·∫•t l∆∞·ª£ng cao.</li>
                    <li>B. suspicious: ƒë√°ng ng·ªù (t·ª´ g·ªëc).</li>
                    <li>C. responsive: ph·∫£n h·ªìi nhanh.</li>
                    <li>D. trustworthy: ƒë√°ng tin c·∫≠y >< suspicious.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn D. Tr√°i nghƒ©a v·ªõi "ƒë√°ng ng·ªù" (suspicious) l√† "ƒë√°ng tin" (trustworthy/reliable).
            `
        },
        {
            id: 9,
            question: "Smartphone can be a great learning tool but you need to think of how to use it <u>effectively</u>.",
            options: [
                { value: "A", text: "responsively" },
                { value: "B", text: "unproductively", correct: true },
                { value: "C", text: "conveniently" },
                { value: "D", text: "comfortably" }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> ...b·∫°n c·∫ßn nghƒ© c√°ch s·ª≠ d·ª•ng n√≥ <u>m·ªôt c√°ch hi·ªáu qu·∫£</u>.<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. responsively: m·ªôt c√°ch nhanh nh·∫°y.</li>
                    <li>B. unproductively: kh√¥ng nƒÉng su·∫•t/kh√¥ng hi·ªáu qu·∫£ >< effectively.</li>
                    <li>C. conveniently: ti·ªán l·ª£i.</li>
                    <li>D. comfortably: tho·∫£i m√°i.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn B. Effectively (hi·ªáu qu·∫£) tr√°i nghƒ©a v·ªõi Unproductively (k√©m hi·ªáu qu·∫£/kh√¥ng ra s·∫£n ph·∫©m).
            `
        },
        {
            id: 10,
            question: "Copper is an <u>excellent</u> conductor of electricity, making it ideal for electrical wiring...",
            options: [
                { value: "A", text: "convenient" },
                { value: "B", text: "bad", correct: true },
                { value: "C", text: "regular" },
                { value: "D", text: "harmful" }
            ],
            explanation: `
                <strong>D·ªãch c√¢u:</strong> ƒê·ªìng l√† ch·∫•t d·∫´n ƒëi·ªán <u>xu·∫•t s·∫Øc/tuy·ªát v·ªùi</u>...<br>
                <strong>Ph√¢n t√≠ch:</strong>
                <ul>
                    <li>A. convenient: ti·ªán l·ª£i.</li>
                    <li>B. bad: t·ªìi/d·ªü >< excellent.</li>
                    <li>C. regular: th√¥ng th∆∞·ªùng.</li>
                    <li>D. harmful: c√≥ h·∫°i.</li>
                </ul>
                <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong> Ch·ªçn B. Tr√°i nghƒ©a ƒë∆°n gi·∫£n nh·∫•t c·ªßa Excellent (r·∫•t t·ªët) l√† Bad (t·ªá/x·∫•u).
            `
        },

        // EXERCISE 1: EXCHANGES
        {
            type: "section",
            title: "Exercise 1: Mark the letter A, B, C or D to indicate the option that best completes each of the following exchanges."
        },
        {
            id: 11,
            question: "A: I explained the new software features during the meeting. Do you follow what I said?<br>B: _______ Could you explain one more time, please?",
            options: [
                { value: "A", text: "Is everything okay here?" },
                { value: "B", text: "I apologise for everything." },
                { value: "C", text: "OK. I got what you mean." },
                { value: "D", text: "I‚Äôm sorry. I don‚Äôt quite understand.", correct: true }
            ],
            explanation: `
                <strong>D·ªãch:</strong> A: B·∫°n c√≥ theo k·ªãp t√¥i n√≥i kh√¥ng? - B: ... B·∫°n c√≥ th·ªÉ gi·∫£i th√≠ch l·∫°i m·ªôt l·∫ßn n·ªØa kh√¥ng?<br>
                <strong>Ph√¢n t√≠ch:</strong> V·∫ø sau B y√™u c·∫ßu gi·∫£i th√≠ch l·∫°i -> B ch∆∞a hi·ªÉu.<br>
                <strong>C√¥ Mai An ch·ªçn D:</strong> "Xin l·ªói. T√¥i kh√¥ng hi·ªÉu l·∫Øm." l√† c√¢u tr·∫£ l·ªùi l·ªãch s·ª± v√† ph√π h·ª£p nh·∫•t.
            `
        },
        {
            id: 12,
            question: "A: Digital technology can be the teacher of the future.<br>B: _______ It can support the learning process but cannot replace the role of the teacher.",
            options: [
                { value: "A", text: "I don‚Äôt think so.", correct: true },
                { value: "B", text: "Not at all." },
                { value: "C", text: "Sure." },
                { value: "D", text: "No worries." }
            ],
            explanation: `
                <strong>D·ªãch:</strong> A: C√¥ng ngh·ªá s·ªë c√≥ th·ªÉ l√† gi√°o vi√™n t∆∞∆°ng lai. - B: ... N√≥ ch·ªâ h·ªó tr·ª£ ch·ª© kh√¥ng thay th·∫ø ƒë∆∞·ª£c.<br>
                <strong>Ph√¢n t√≠ch:</strong> B ƒë∆∞a ra √Ω ki·∫øn ph·∫£n b√°c l·∫°i A.<br>
                <strong>C√¥ Mai An ch·ªçn A:</strong> "T√¥i kh√¥ng nghƒ© v·∫≠y" th·ªÉ hi·ªán s·ª± kh√¥ng ƒë·ªìng t√¨nh m·ªôt c√°ch l·ªãch s·ª±.
            `
        },
        {
            id: 13,
            question: "A: _______, you want me to submit the assignment by Friday, is it correct?<br>B: Yes, that‚Äôs correct.",
            options: [
                { value: "A", text: "Let me think about it" },
                { value: "B", text: "So just to clarify", correct: true },
                { value: "C", text: "You‚Äôre welcome" },
                { value: "D", text: "You follow along" }
            ],
            explanation: `
                <strong>D·ªãch:</strong> A: ..., th·∫ßy mu·ªën em n·ªôp b√†i v√†o th·ª© S√°u ƒë√∫ng kh√¥ng ·∫°? - B: ƒê√∫ng r·ªìi.<br>
                <strong>Ph√¢n t√≠ch:</strong> A ƒëang mu·ªën x√°c nh·∫≠n l·∫°i th√¥ng tin (clarify).<br>
                <strong>C√¥ Mai An ch·ªçn B:</strong> "So just to clarify" (V·∫≠y ƒë·ªÉ l√†m r√µ/x√°c nh·∫≠n l·∫°i nh√©) l√† c·ª•m t·ª´ chu·∫©n d√πng ƒë·ªÉ double-check th√¥ng tin.
            `
        },
        {
            id: 14,
            question: "A: Could you help me set up the new email system? I don‚Äôt quite follow the steps.<br>B: _______",
            options: [
                { value: "A", text: "Can‚Äôt you speak more slowly?" },
                { value: "B", text: "Thanks for checking my understanding." },
                { value: "C", text: "Sure. Let‚Äôs go over it together.", correct: true },
                { value: "D", text: "Does everything make sense so far?" }
            ],
            explanation: `
                <strong>D·ªãch:</strong> A: Gi√∫p t√¥i c√†i ƒë·∫∑t email ƒë∆∞·ª£c kh√¥ng? T√¥i kh√¥ng theo k·ªãp c√°c b∆∞·ªõc. - B: ...<br>
                <strong>Ph√¢n t√≠ch:</strong> A nh·ªù gi√∫p ƒë·ª° v√¨ kh√¥ng hi·ªÉu.<br>
                <strong>C√¥ Mai An ch·ªçn C:</strong> "Ch·∫Øc ch·∫Øn r·ªìi. Ch√∫ng ta c√πng xem l·∫°i nh√©" l√† c√¢u tr·∫£ l·ªùi gi√∫p ƒë·ª° nhi·ªát t√¨nh.
            `
        },
        {
            id: 15,
            question: "A: Always turn off and unplug the washing machine before you start cleaning it.<br>B: _______ Thank you.",
            options: [
                { value: "A", text: "I‚Äôll try my best." },
                { value: "B", text: "OK, I got it.", correct: true },
                { value: "C", text: "I don‚Äôt follow you." },
                { value: "D", text: "OK, I‚Äôll think about that." }
            ],
            explanation: `
                <strong>D·ªãch:</strong> A: Lu√¥n t·∫Øt v√† r√∫t ph√≠ch c·∫Øm m√°y gi·∫∑t tr∆∞·ªõc khi v·ªá sinh. (M·ªánh l·ªánh/H∆∞·ªõng d·∫´n) - B: ... C·∫£m ∆°n.<br>
                <strong>Ph√¢n t√≠ch:</strong> ƒê√°p l·∫°i m·ªôt h∆∞·ªõng d·∫´n an to√†n.<br>
                <strong>C√¥ Mai An ch·ªçn B:</strong> "OK, t√¥i hi·ªÉu r·ªìi/T√¥i nh·ªõ r·ªìi".
            `
        },
        {
            id: 16,
            question: "Brother: You need to draw a triangle. You must measure the line segments correctly. Got it?<br>Minh: _______",
            options: [
                { value: "A", text: "Yes, I have three of them." },
                { value: "B", text: "Sure. I‚Äôll find them for you." },
                { value: "C", text: "OK, I got what you mean.", correct: true },
                { value: "D", text: "Could you show me the triangle?" }
            ],
            explanation: `
                <strong>D·ªãch:</strong> Anh trai: Em c·∫ßn v·∫Ω tam gi√°c... Hi·ªÉu ch∆∞a? - Minh: ...<br>
                <strong>Ph√¢n t√≠ch:</strong> C√¢u h·ªèi "Got it?" (Hi·ªÉu ch∆∞a).<br>
                <strong>C√¥ Mai An ch·ªçn C:</strong> "OK, em hi·ªÉu √Ω anh r·ªìi."
            `
        },
        {
            id: 17,
            question: "Nick: First, turn on your computer... Hey, are you with me, Ben?<br>Ben: _______",
            options: [
                { value: "A", text: "No. I‚Äôm still here." },
                { value: "B", text: "Yes, my teacher does." },
                { value: "C", text: "OK, I‚Äôll say it to you." },
                { value: "D", text: "Sorry. Can you say that again?", correct: true }
            ],
            explanation: `
                <strong>D·ªãch:</strong> Nick: (ƒêang h∆∞·ªõng d·∫´n)... N√†y, c·∫≠u c√≥ ƒëang nghe/theo k·ªãp t·ªõ kh√¥ng Ben? - Ben: ...<br>
                <strong>Ph√¢n t√≠ch:</strong> C√¢u "Are you with me?" d√πng ƒë·ªÉ ki·ªÉm tra xem ng∆∞·ªùi nghe c√≥ t·∫≠p trung/hi·ªÉu kh√¥ng.<br>
                <strong>C√¥ Mai An ch·ªçn D:</strong> Ben c√≥ v·∫ª ƒë√£ m·∫•t t·∫≠p trung n√™n y√™u c·∫ßu nh·∫Øc l·∫°i: "Xin l·ªói. C·∫≠u n√≥i l·∫°i ƒë∆∞·ª£c kh√¥ng?".
            `
        },
        {
            id: 18,
            question: "Mai: Go straight ahead to the traffic light... Hey, do you follow me?<br>Elena: _______",
            options: [
                { value: "A", text: "Yeah, my apartment is on the top floor." },
                { value: "B", text: "Sorry. Do you follow me?" },
                { value: "C", text: "I‚Äôm sorry. I don‚Äôt quite follow you. Could you say that again?", correct: true },
                { value: "D", text: "What a pity! She‚Äôs not here." }
            ],
            explanation: `
                <strong>D·ªãch:</strong> Mai: (Ch·ªâ ƒë∆∞·ªùng d√†i d√≤ng)... C·∫≠u c√≥ theo k·ªãp kh√¥ng? - Elena: ...<br>
                <strong>C√¥ Mai An ch·ªçn C:</strong> Elena th·ª´a nh·∫≠n kh√¥ng theo k·ªãp ch·ªâ d·∫´n v√† nh·ªù n√≥i l·∫°i. ƒê√¢y l√† ph·∫£n x·∫° t·ª± nhi√™n nh·∫•t trong giao ti·∫øp khi nghe ch·ªâ ƒë∆∞·ªùng ph·ª©c t·∫°p.
            `
        },
        {
            id: 19,
            question: "Sister: _______<br>Lana: Got it. Thanks.",
            options: [
                { value: "A", text: "What‚Äôs the latest smartphone model?" },
                { value: "B", text: "Underline the key words in the questions... Got it?", correct: true },
                { value: "C", text: "Can I borrow your tablet and its pencil for a while?" },
                { value: "D", text: "Your face is red. Are you having a fever?" }
            ],
            explanation: `
                <strong>D·ªãch:</strong> Lana tr·∫£ l·ªùi: "Hi·ªÉu r·ªìi. C·∫£m ∆°n." -> C√¢u tr∆∞·ªõc ƒë√≥ ph·∫£i l√† m·ªôt h∆∞·ªõng d·∫´n ho·∫∑c gi·∫£i th√≠ch.<br>
                <strong>Ph√¢n t√≠ch:</strong><br>
                - A: C√¢u h·ªèi th√¥ng tin.<br>
                - B: H∆∞·ªõng d·∫´n c√°ch l√†m b√†i + "Got it?". => H·ª£p l√Ω.<br>
                - C: C√¢u xin ph√©p m∆∞·ª£n ƒë·ªì.<br>
                - D: C√¢u h·ªèi s·ª©c kh·ªèe.<br>
                <strong>C√¥ Mai An ch·ªçn B.</strong>
            `
        },
        {
            id: 20,
            question: "Duong: _______<br>Kien: It doesn‚Äôt allow you to play games on it.",
            options: [
                { value: "A", text: "Why don‚Äôt you buy a portable music player?", correct: true },
                { value: "B", text: "What‚Äôs good about using electronic devices in the classroom?" },
                { value: "C", text: "You can‚Äôt buy a laptop. Got it?" },
                { value: "D", text: "How about having an online meeting to discuss the project?" }
            ],
            explanation: `
                <strong>D·ªãch:</strong> Ki√™n: N√≥ kh√¥ng cho ph√©p c·∫≠u ch∆°i game tr√™n ƒë√≥ ƒë√¢u.<br>
                <strong>Ph√¢n t√≠ch:</strong> C√¢u tr·∫£ l·ªùi c·ªßa Ki√™n ƒë∆∞a ra m·ªôt l√Ω do/nh∆∞·ª£c ƒëi·ªÉm (kh√¥ng ch∆°i game ƒë∆∞·ª£c) ƒë·ªÉ ph·∫£n h·ªìi l·∫°i m·ªôt l·ªùi g·ª£i √Ω mua s·∫Øm ho·∫∑c s·ª≠ d·ª•ng thi·∫øt b·ªã n√†o ƒë√≥.<br>
                - A: T·∫°i sao kh√¥ng mua m√°y nghe nh·∫°c...? -> Ki√™n: V√¨ n√≥ kh√¥ng ch∆°i game ƒë∆∞·ª£c (n√™n ch√°n/kh√¥ng mua). => H·ª£p l√Ω.<br>
                - B: H·ªèi v·ªÅ ƒëi·ªÉm t·ªët -> Tr·∫£ l·ªùi ƒëi·ªÉm x·∫•u (kh√¥ng ch∆°i game) -> Kh√¥ng kh·ªõp logic.<br>
                <strong>C√¥ Mai An ch·ªçn A.</strong>
            `
        }
    ];

    // --- LOGIC JS ---
    let currentScore = 0;
    const totalQuestions = quizData.filter(q => q.type !== 'section').length;
    
    // Simple Audio Objects
    const audioDing = new Audio("https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg");
    const audioBuzz = new Audio("https://actions.google.com/sounds/v1/cartoon/clank_car_crash.ogg");

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        let qCount = 0;

        quizData.forEach(item => {
            if (item.type === 'section') {
                const header = document.createElement('div');
                header.className = 'section-header';
                header.innerText = item.title;
                container.appendChild(header);
            } else {
                qCount++;
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `card-${item.id}`;
                
                let optionsHtml = '';
                item.options.forEach(opt => {
                    optionsHtml += `
                        <div class="option-btn" onclick="checkAnswer(this, ${item.id}, ${opt.correct || false})">
                            <span class="label">${opt.value}</span>
                            <span>${opt.text}</span>
                        </div>
                    `;
                });

                card.innerHTML = `
                    <div class="question-header">
                        <span class="q-tag">Question ${qCount}</span>
                        ${item.question}
                    </div>
                    <div class="options-grid">
                        ${optionsHtml}
                    </div>
                    <div class="explanation-box" id="expl-${item.id}">
                        <div class="expl-header">
                            <span>üí°</span> Gi·∫£i th√≠ch chi ti·∫øt
                        </div>
                        <div class="expl-content">
                            ${item.explanation}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            }
        });
    }

    function checkAnswer(btn, qId, isCorrect) {
        const card = document.getElementById(`card-${qId}`);
        if (card.classList.contains('answered')) return; // Prevent re-answering
        card.classList.add('answered');

        const allBtns = card.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.classList.add('disabled'));

        const explBox = document.getElementById(`expl-${qId}`);
        explBox.style.display = 'block';

        if (isCorrect) {
            btn.classList.add('correct');
            currentScore++;
            document.getElementById('current-score').innerText = currentScore;
            audioDing.currentTime = 0;
            audioDing.play();
            // Confetti
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#8854C0', '#00C9A7', '#ffeb3b']
            });
        } else {
            btn.classList.add('wrong');
            audioBuzz.currentTime = 0;
            audioBuzz.play();
            // Highlight correct answer automatically
            // Find the correct button in DOM
            const dataItem = quizData.find(q => q.id === qId);
            const correctOptIndex = dataItem.options.findIndex(o => o.correct);
            allBtns[correctOptIndex].classList.add('correct');
        }
    }

    function finishQuiz() {
        const modal = document.getElementById('result-modal');
        const finalScoreEl = document.getElementById('final-score');
        const msgEl = document.getElementById('teacher-message');

        finalScoreEl.innerText = `${currentScore}/${totalQuestions}`;
        
        const percentage = (currentScore / totalQuestions) * 100;
        if (percentage === 100) {
            msgEl.innerText = "Wow! Em l√† thi√™n t√†i Ti·∫øng Anh! üåü";
            confetti({ particleCount: 300, spread: 120, startVelocity: 40 });
        } else if (percentage >= 80) {
            msgEl.innerText = "Gi·ªèi qu√°! Ch·ªâ sai ch√∫t x√≠u th√¥i! üí™";
        } else if (percentage >= 50) {
            msgEl.innerText = "C·ªë l√™n nh√©! Xem k·ªπ l·∫°i gi·∫£i th√≠ch n√†o! üìö";
        } else {
            msgEl.innerText = "ƒê·ª´ng bu·ªìn, c√¥ Mai An s·∫Ω gi√∫p em l·∫•y l·∫°i g·ªëc! ‚ù§Ô∏è";
        }

        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('result-modal').style.display = 'none';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Initialize
    renderQuiz();

</script>
</body>
</html>


