<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Tr·∫Øc Nghi·ªám T∆∞∆°ng T√°c - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS VARIABLES & RESET */
        :root {
            --primary: #8854C0;
            --secondary: #00C9A7;
            --accent: #FDCB6E;
            --correct: #00D26A;
            --wrong: #FF4757;
            --bg-panel: rgba(255, 255, 255, 0.92);
            --text: #2d3436;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Quicksand', sans-serif; }
        body { overflow: hidden; color: var(--text); }

        /* DYNAMIC THEME BACKGROUND */
        @keyframes gradientLoang {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .main-bg {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -2;
            background: linear-gradient(-45deg, #8854C0, #FDCB6E, #00C9A7, #FF9A9E);
            background-size: 400% 400%;
            animation: gradientLoang 15s ease infinite;
        }
        
        /* FLOATING SVG PATTERN */
        @keyframes floatPattern {
            0% { transform: translateY(0) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(5deg); }
        }
        .pattern-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 100 100"><text x="10" y="30" font-size="25">üèñÔ∏è</text><text x="70" y="80" font-size="25">‚öΩ</text><text x="40" y="50" font-size="25">üöÄ</text><text x="80" y="20" font-size="25">üåü</text></svg>');
            background-repeat: repeat;
            opacity: 0.35;
            animation: floatPattern 20s linear infinite alternate;
        }

        /* TOP BAR */
        .top-bar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 30px; background: rgba(255,255,255,0.95);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); position: relative; z-index: 10;
        }
        .header-title { font-size: 1.2rem; font-weight: 700; color: var(--primary); }
        
        /* TIMER BUTTON */
        .timer-btn {
            background: var(--accent); border: none; padding: 10px 20px;
            font-size: 1.1rem; font-weight: 700; border-radius: 20px;
            cursor: pointer; box-shadow: 0 5px 0 #d9a84e; transition: all 0.2s;
            color: #d35400; display: flex; align-items: center; gap: 10px;
        }
        .timer-btn:active { transform: translateY(5px); box-shadow: 0 0 0 #d9a84e; }
        
        .submit-btn {
            background: var(--primary); color: white; border: none; padding: 10px 25px;
            font-size: 1.1rem; font-weight: bold; border-radius: 20px;
            cursor: pointer; box-shadow: 0 5px 0 #5d3886; transition: all 0.2s;
        }
        .submit-btn:active { transform: translateY(5px); box-shadow: 0 0 0 #5d3886; }

        /* SPLIT SCREEN LAYOUT */
        .split-container {
            display: flex; height: calc(100vh - 65px); width: 100vw;
        }
        .panel {
            flex: 1; padding: 25px; overflow-y: auto;
            scroll-behavior: smooth;
        }
        .left-panel { border-right: 3px dashed rgba(255,255,255,0.5); }
        .right-panel { background: transparent; }

        /* READING CONTENT CARDS */
        .reading-card {
            background: var(--bg-panel); border-radius: 20px; padding: 20px; margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08); line-height: 1.8; font-size: 1.15rem;
        }
        .reading-card h3 { color: var(--primary); margin-bottom: 15px; font-size: 1.4rem; }
        .blank-space {
            display: inline-block; min-width: 60px; border-bottom: 2px dashed #e17055;
            text-align: center; color: #e17055; font-weight: bold; margin: 0 5px; cursor: pointer;
        }
        
        /* TRANSLATION BUTTON & BOX */
        .trans-btn {
            background: #e8f4f8; color: #0984e3; border: 2px solid #74b9ff;
            padding: 8px 15px; border-radius: 15px; font-weight: bold; font-size: 0.95rem;
            cursor: pointer; margin-top: 15px; display: inline-block; transition: 0.3s;
        }
        .trans-btn:hover { background: #74b9ff; color: white; }
        .trans-box {
            display: none; background: #fff3cd; color: #856404; padding: 15px;
            border-left: 5px solid #ffeeba; border-radius: 10px; margin-top: 10px;
            font-size: 1.05rem; font-style: italic; line-height: 1.6;
        }

        /* GLOSSARY TABLE */
        .glossary { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .glossary th { background: var(--secondary); color: white; padding: 12px; text-align: left; }
        .glossary td { padding: 12px; border-bottom: 1px solid #eee; }
        .glossary tr:last-child td { border-bottom: none; }

        /* EXERCISE CARDS */
        .question-card {
            background: var(--bg-panel); border-radius: 20px; padding: 25px; margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1); position: relative;
        }
        .question-text { font-size: 1.25rem; font-weight: bold; margin-bottom: 20px; color: #2d3436; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-btn {
            background: white; border: 2px solid #dfe6e9; padding: 15px; font-size: 1.1rem;
            border-radius: 15px; cursor: pointer; text-align: left; font-weight: 600;
            box-shadow: 0 6px 0 #dfe6e9; transition: all 0.2s ease; position: relative;
        }
        .option-btn:hover { transform: scale(1.02); }
        .option-btn:active { transform: translateY(6px); box-shadow: 0 0 0 #dfe6e9; }
        
        .option-btn.correct { background: var(--correct); color: white; border-color: #00b894; box-shadow: 0 6px 0 #00b894; }
        .option-btn.wrong { background: var(--wrong); color: white; border-color: #d63031; box-shadow: 0 6px 0 #d63031; }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* EXPLANATION BOX */
        .explanation-box {
            display: none; margin-top: 20px; padding: 20px; border-radius: 15px;
            background: #f1f2f6; border-left: 6px solid var(--primary); animation: slideDown 0.4s ease;
        }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-box h4 { color: var(--primary); margin-bottom: 10px; font-size: 1.2rem; }
        .explanation-box p { margin-bottom: 8px; line-height: 1.6; }

        /* CONFETTI */
        .confetti { position: fixed; width: 10px; height: 10px; background-color: #f00; z-index: 100; pointer-events: none; }

        /* RESULT MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.6); display: none; justify-content: center; align-items: center; z-index: 999;
        }
        .modal-content {
            background: white; padding: 40px; border-radius: 25px; text-align: center;
            max-width: 500px; box-shadow: 0 15px 30px rgba(0,0,0,0.3); transform: scale(0.8); transition: 0.3s;
        }
        .modal-content.show { transform: scale(1); }
        .modal-content h2 { font-size: 2.5rem; color: var(--primary); margin-bottom: 10px; }
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%; background: var(--accent);
            display: flex; justify-content: center; align-items: center; margin: 20px auto;
            font-size: 2.5rem; font-weight: bold; color: white; box-shadow: 0 8px 0 #d9a84e;
        }
        .modal-message { font-size: 1.3rem; margin-bottom: 25px; color: #636e72; }
        
        /* SCROLLBAR STYLE */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.2); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
    </style>
</head>
<body>

    <div class="main-bg"></div>
    <div class="pattern-overlay"></div>

    <header class="top-bar">
        <div class="header-title">üéì Ms Mai An ULIS</div>
        <button class="timer-btn" id="timerBtn" onclick="toggleTimer()">
            ‚è≥ B·∫ÆT ƒê·∫¶U T√çNH GI·ªú L√ÄM B√ÄI
        </button>
        <button class="submit-btn" onclick="submitTest()">N·ªòP B√ÄI üöÄ</button>
    </header>

    <div class="split-container">
        <div class="left-panel">
            
            <div class="reading-card">
                <h3>üèïÔ∏è School Announcement: Trip to Ba Vi National Park</h3>
                
                <p>Dear students,<br>
                Our school is organizing a trip to Ba Vi National Park. The bus <span class="blank-space">(1) ________</span> at 7:30 AM, so please be on time. Bring a hat, an umbrella, and a bottle of water. You will learn <span class="blank-space">(2) ________</span> nature conservation and explore wildlife.</p>
                <button class="trans-btn" onclick="toggleTrans('trans1')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="trans-box" id="trans1">
                    <strong>B·∫£n d·ªãch:</strong> Th√¥ng b√°o c·ªßa tr∆∞·ªùng: Chuy·∫øn ƒëi ƒë·∫øn V∆∞·ªùn qu·ªëc gia Ba V√¨.<br>
                    C√°c em h·ªçc sinh th√¢n m·∫øn,<br>
                    Tr∆∞·ªùng ch√∫ng ta ƒëang t·ªï ch·ª©c m·ªôt chuy·∫øn tham quan V∆∞·ªùn qu·ªëc gia Ba V√¨. Xe bu√Ωt s·∫Ω kh·ªüi h√†nh l√∫c 7:30 s√°ng, v√¨ v·∫≠y c√°c em vui l√≤ng ƒë·∫øn ƒë√∫ng gi·ªù. H√£y mang theo m≈©, √¥ v√† m·ªôt chai n∆∞·ªõc. C√°c em s·∫Ω ƒë∆∞·ª£c h·ªçc v·ªÅ b·∫£o t·ªìn thi√™n nhi√™n v√† kh√°m ph√° ƒë·ªông v·∫≠t hoang d√£.
                </div>
            </div>

            <div class="reading-card">
                <h3>üèñÔ∏è Holiday in Nha Trang</h3>
                <p>weather: warm and sunny. It is so good for swimming and sunbathing. Visitors can rent a <span class="blank-space">(20) ________________________</span> and cycle around the city. Nha Trang is also well-known for its delicious <span class="blank-space">(21) ________________________</span>.</p>
                <button class="trans-btn" onclick="toggleTrans('trans2')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="trans-box" id="trans2">
                    <strong>B·∫£n d·ªãch:</strong> th·ªùi ti·∫øt: ·∫•m √°p v√† c√≥ n·∫Øng. R·∫•t tuy·ªát v·ªùi cho vi·ªác b∆°i l·ªôi v√† t·∫Øm n·∫Øng. Du kh√°ch c√≥ th·ªÉ thu√™ m·ªôt chi·∫øc xe ƒë·∫°p v√† ƒë·∫°p xe v√≤ng quanh th√†nh ph·ªë. Nha Trang c≈©ng r·∫•t n·ªïi ti·∫øng v·ªõi c√°c m√≥n h·∫£i s·∫£n th∆°m ngon.
                </div>
            </div>

            <div class="reading-card">
                <h3>‚öΩ Football Facts</h3>
                <p>Football is one of the most popular sports in the world. It started hundreds of years ago in England. People play it in schools, parks, and stadiums. <span class="blank-space">(24) ________________________</span>. It usually lasts for 90 minutes, divided into two halves. <span class="blank-space">(25) ________________________</span> and sometimes matches end in a draw. Fans cheer loudly for their teams, creating a lively atmosphere. <span class="blank-space">(26) ________________________</span></p>
                
                <div style="background: rgba(255,255,255,0.6); padding: 10px; border-radius: 10px; margin-top:15px;">
                    <strong>Options for 24, 25, 26:</strong><br>
                    A. Players work hard to score goals,<br>
                    B. A football match is played between two teams of 11 players each.<br>
                    C. Football is a game that brings people together.
                </div>

                <button class="trans-btn" onclick="toggleTrans('trans3')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="trans-box" id="trans3">
                    <strong>B·∫£n d·ªãch:</strong> B√≥ng ƒë√° l√† m·ªôt trong nh·ªØng m√¥n th·ªÉ thao ph·ªï bi·∫øn nh·∫•t tr√™n th·∫ø gi·ªõi. N√≥ b·∫Øt ƒë·∫ßu t·ª´ h√†ng trƒÉm nƒÉm tr∆∞·ªõc ·ªü n∆∞·ªõc Anh. M·ªçi ng∆∞·ªùi ch∆°i b√≥ng ƒë√° ·ªü tr∆∞·ªùng h·ªçc, c√¥ng vi√™n v√† c√°c s√¢n v·∫≠n ƒë·ªông. (24) M·ªôt tr·∫≠n b√≥ng ƒë√° ƒë∆∞·ª£c ch∆°i gi·ªØa hai ƒë·ªôi, m·ªói ƒë·ªôi 11 ng∆∞·ªùi. Tr·∫≠n ƒë·∫•u th∆∞·ªùng k√©o d√†i 90 ph√∫t, chia l√†m hai hi·ªáp. (25) C√°c c·∫ßu th·ªß l√†m vi·ªác chƒÉm ch·ªâ ƒë·ªÉ ghi b√†n, v√† ƒë√¥i khi c√°c tr·∫≠n ƒë·∫•u k·∫øt th√∫c v·ªõi t·ª∑ s·ªë h√≤a. Ng∆∞·ªùi h√¢m m·ªô c·ªï v≈© n·ªìng nhi·ªát cho ƒë·ªôi c·ªßa h·ªç, t·∫°o ra m·ªôt b·∫ßu kh√¥ng kh√≠ s√¥i ƒë·ªông. (26) B√≥ng ƒë√° l√† m·ªôt tr√≤ ch∆°i g·∫Øn k·∫øt m·ªçi ng∆∞·ªùi l·∫°i v·ªõi nhau.
                </div>
            </div>

            <div class="reading-card">
                <h3>üí∏ Who Wants to Be a Millionaire?</h3>
                
                <p>Who Wants to Be a Millionaire? is a popular TV game show in the world. We can see this show in more than 100 countries. All the questions of this show are multiple-choice ones. Each question has four answer options, but only one option is correct. You have to choose the correct option. You have three ways to get help in order to find the correct answer. First, you can ask the show master to remove two wrong answers. Second, you can ask the audience to tell their answers. Third, you can telephone a friend of yours and ask for help. You can only do these things once. There are fifteen questions in total. The show master asks the contestants to answer the questions one by one. The first five questions are easy to answer, but the others become more difficult. Obviously, it is very difficult to come to the last question, but it's worth a try. In Viet Nam, if you answer the last question correctly, you can win VND 250,000,000.</p>
                <button class="trans-btn" onclick="toggleTrans('trans4')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="trans-box" id="trans4">
                    <strong>B·∫£n d·ªãch:</strong> "Ai l√† tri·ªáu ph√∫?" l√† m·ªôt ch∆∞∆°ng tr√¨nh truy·ªÅn h√¨nh tr√≤ ch∆°i ph·ªï bi·∫øn tr√™n th·∫ø gi·ªõi. Ch√∫ng ta c√≥ th·ªÉ xem ch∆∞∆°ng tr√¨nh n√†y ·ªü h∆°n 100 qu·ªëc gia. T·∫•t c·∫£ c√°c c√¢u h·ªèi c·ªßa ch∆∞∆°ng tr√¨nh n√†y ƒë·ªÅu l√† d·∫°ng tr·∫Øc nghi·ªám. M·ªói c√¢u h·ªèi c√≥ b·ªën l·ª±a ch·ªçn ƒë√°p √°n, nh∆∞ng ch·ªâ c√≥ m·ªôt l·ª±a ch·ªçn l√† ƒë√∫ng. B·∫°n ph·∫£i ch·ªçn ƒë√°p √°n ƒë√∫ng. B·∫°n c√≥ ba c√°ch ƒë·ªÉ nh·∫≠n s·ª± tr·ª£ gi√∫p nh·∫±m t√¨m ra c√¢u tr·∫£ l·ªùi ƒë√∫ng. Th·ª© nh·∫•t, b·∫°n c√≥ th·ªÉ y√™u c·∫ßu ng∆∞·ªùi d·∫´n ch∆∞∆°ng tr√¨nh lo·∫°i b·ªè hai ƒë√°p √°n sai. Th·ª© hai, b·∫°n c√≥ th·ªÉ h·ªèi √Ω ki·∫øn kh√°n gi·∫£. Th·ª© ba, b·∫°n c√≥ th·ªÉ g·ªçi ƒëi·ªán tho·∫°i cho m·ªôt ng∆∞·ªùi b·∫°n ƒë·ªÉ nh·ªù gi√∫p ƒë·ª°. B·∫°n ch·ªâ c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c quy·ªÅn n√†y m·ªôt l·∫ßn duy nh·∫•t. C√≥ t·ªïng c·ªông 15 c√¢u h·ªèi. Ng∆∞·ªùi d·∫´n ch∆∞∆°ng tr√¨nh y√™u c·∫ßu th√≠ sinh tr·∫£ l·ªùi l·∫ßn l∆∞·ª£t t·ª´ng c√¢u h·ªèi m·ªôt. NƒÉm c√¢u h·ªèi ƒë·∫ßu ti√™n r·∫•t d·ªÖ tr·∫£ l·ªùi, nh∆∞ng nh·ªØng c√¢u sau tr·ªü n√™n kh√≥ h∆°n. R√µ r√†ng, r·∫•t kh√≥ ƒë·ªÉ ƒëi ƒë·∫øn c√¢u h·ªèi cu·ªëi c√πng, nh∆∞ng n√≥ r·∫•t ƒë√°ng ƒë·ªÉ th·ª≠. T·∫°i Vi·ªát Nam, n·∫øu b·∫°n tr·∫£ l·ªùi ƒë√∫ng c√¢u h·ªèi cu·ªëi c√πng, b·∫°n c√≥ th·ªÉ gi√†nh ƒë∆∞·ª£c 250.000.000 VNƒê.
                </div>
            </div>

            <div class="reading-card">
                <h3>üìö B·∫£ng T·ª´ V·ª±ng VIP (Glossary)</h3>
                <table class="glossary">
                    <tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a Ti·∫øng Vi·ªát</th></tr>
                    <tr><td>1. Announcement</td><td>Noun (n)</td><td>Th√¥ng b√°o</td></tr>
                    <tr><td>2. Conservation</td><td>Noun (n)</td><td>S·ª± b·∫£o t·ªìn</td></tr>
                    <tr><td>3. Wildlife</td><td>Noun (n)</td><td>ƒê·ªông v·∫≠t hoang d√£</td></tr>
                    <tr><td>4. Sunbathing</td><td>Noun (n)</td><td>T·∫Øm n·∫Øng</td></tr>
                    <tr><td>5. Well-known</td><td>Adjective (adj)</td><td>N·ªïi ti·∫øng, ƒë∆∞·ª£c nhi·ªÅu ng∆∞·ªùi bi·∫øt ƒë·∫øn</td></tr>
                    <tr><td>6. Stadium</td><td>Noun (n)</td><td>S√¢n v·∫≠n ƒë·ªông</td></tr>
                    <tr><td>7. Draw</td><td>Noun (n)</td><td>T·ª∑ s·ªë h√≤a (trong th·ªÉ thao)</td></tr>
                    <tr><td>8. Atmosphere</td><td>Noun (n)</td><td>B·∫ßu kh√¥ng kh√≠</td></tr>
                    <tr><td>9. Multiple-choice</td><td>Adjective (adj)</td><td>Tr·∫Øc nghi·ªám nhi·ªÅu l·ª±a ch·ªçn</td></tr>
                    <tr><td>10. Contestant</td><td>Noun (n)</td><td>Ng∆∞·ªùi d·ª± thi, th√≠Áîü</td></tr>
                    <tr><td>11. Obviously</td><td>Adverb (adv)</td><td>M·ªôt c√°ch r√µ r√†ng, hi·ªÉn nhi√™n</td></tr>
                </table>
            </div>

        </div>

        <div class="right-panel" id="questionsContainer">
            </div>
    </div>

    <div class="modal-overlay" id="resultModal">
        <div class="modal-content" id="modalContent">
            <h2>K·∫øt Qu·∫£ C·ªßa B·∫°n!</h2>
            <div class="score-circle" id="finalScore">0/13</div>
            <div class="modal-message" id="modalMessage">ƒêang t·∫£i ƒë√°nh gi√°...</div>
            <button class="submit-btn" onclick="location.reload()">L√†m L·∫°i L·∫ßn N·ªØa üîÑ</button>
        </div>
    </div>

    <script>
        // --- DATA B√ÄI T·∫¨P ---
        const questionsData = [
            // Dummy questions for (1) & (2) to complete the experience based on context
            {
                id: 1,
                text: "Question 1 (Blank 1): The bus (1) ________ at 7:30 AM...",
                options: [
                    { text: "A. leaves", isCorrect: true },
                    { text: "B. leaving", isCorrect: false },
                    { text: "C. leave", isCorrect: false },
                    { text: "D. to leave", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>1. Ph√¢n t√≠ch ng·ªØ ph√°p:</strong> C√¢u c√≥ ch·ªß ng·ªØ s·ªë √≠t "The bus" v√† tr·∫°ng ng·ªØ ch·ªâ th·ªùi gian ·ªü t∆∞∆°ng lai c√≥ l·ªãch tr√¨nh c·ªë ƒë·ªãnh ("at 7:30 AM"). Ta d√πng th√¨ Hi·ªán t·∫°i ƒë∆°n mang √Ω nghƒ©a t∆∞∆°ng lai cho l·ªãch tr√¨nh t√†u xe.</p>
                <p><strong>2. T·∫°i sao ch·ªçn A?</strong> ƒê·ªông t·ª´ "leave" ph·∫£i th√™m "s" v√¨ ch·ªß ng·ªØ "The bus" l√† ng√¥i th·ª© 3 s·ªë √≠t. V·∫≠y "leaves" l√† ƒë√°p √°n ch√≠nh x√°c nh·∫•t!</p>`
            },
            {
                id: 2,
                text: "Question 2 (Blank 2): You will learn (2) ________ nature conservation...",
                options: [
                    { text: "A. about", isCorrect: true },
                    { text: "B. on", isCorrect: false },
                    { text: "C. in", isCorrect: false },
                    { text: "D. at", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>1. Ph√¢n t√≠ch gi·ªõi t·ª´:</strong> ƒê·ªông t·ª´ "learn" (h·ªçc) khi ƒëi k√®m v·ªõi m·ªôt ch·ªß ƒë·ªÅ n√†o ƒë√≥ th∆∞·ªùng d√πng gi·ªõi t·ª´ "about" (v·ªÅ).</p>
                <p><strong>2. D·ªãch nghƒ©a:</strong> "C√°c em s·∫Ω ƒë∆∞·ª£c h·ªçc <strong>v·ªÅ</strong> b·∫£o t·ªìn thi√™n nhi√™n...". Do ƒë√≥ ch·ªçn <strong>A. about</strong> l√† chu·∫©n x√°c.</p>`
            },
            // Provided questions 18-21
            {
                id: 18,
                text: "Question 18: Nha Trang has ______ weather: warm and sunny. (Gi·∫£ ƒë·ªãnh ng·ªØ c·∫£nh v√¨ ƒë·ªÅ b·ªã c·∫Øt)",
                options: [
                    { text: "A. on", isCorrect: false },
                    { text: "B. in", isCorrect: false },
                    { text: "C. from", isCorrect: false },
                    { text: "D. good", isCorrect: true } // Modified strictly to fit the text logically, or assuming the options provided. Wait, the provided options were A. on, B. in, C. from, D. about. Let's strictly use provided options and assume 'about' or something. Actually, Q18 options in prompt: A. on, B. in, C. from, D. about. I will set B as correct for "in Nha Trang". 
                ],
                // Manual override to use exact provided options for Q18
                overrideOptions: true,
                options: [
                    { text: "A. on", isCorrect: false },
                    { text: "B. in", isCorrect: true },
                    { text: "C. from", isCorrect: false },
                    { text: "D. about", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><em>(L∆∞u √Ω: ƒêo·∫°n vƒÉn b·ªã thi·∫øu ng·ªØ c·∫£nh cho c√¢u 18, 19 nh∆∞ng d·ª±a v√†o 4 ƒë√°p √°n gi·ªõi t·ª´, c√¥ gi·∫£ ƒë·ªãnh l√† ch·ªâ ƒë·ªãa ƒëi·ªÉm).</em></p>
                <p>ƒêi v·ªõi t√™n th√†nh ph·ªë (Nha Trang), ch√∫ng ta lu√¥n d√πng gi·ªõi t·ª´ <strong>IN</strong>. V√≠ d·ª•: In Hanoi, In Nha Trang.</p>`
            },
            {
                id: 19,
                text: "Question 19: (Gi·∫£ ƒë·ªãnh ch·ªó tr·ªëng cho t√≠nh t·ª´ th·ªùi ti·∫øt)",
                options: [
                    { text: "A. good", isCorrect: true },
                    { text: "B. exciting", isCorrect: false },
                    { text: "C. clean", isCorrect: false },
                    { text: "D. quiet", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>T·∫°i sao ch·ªçn A?</strong> V·∫ø sau c√≥ c√¢u "It is so <strong>good</strong> for swimming...". T√≠nh t·ª´ "good" ho√†n to√†n ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh m√¥ t·∫£ th·ªùi ti·∫øt ƒë·∫πp, thu·∫≠n l·ª£i cho vi·ªác ƒëi b∆°i.</p>`
            },
            {
                id: 20,
                text: "Question 20: Visitors can rent a (20) ________________________ and cycle around the city.",
                options: [
                    { text: "A. bus", isCorrect: false },
                    { text: "B. motorbike", isCorrect: false },
                    { text: "C. tour", isCorrect: false },
                    { text: "D. bike", isCorrect: true }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>Key word (T·ª´ kh√≥a):</strong> "cycle" (ƒë·∫°p xe).</p>
                <p>ƒê·ªÉ c√≥ th·ªÉ "ƒë·∫°p xe" v√≤ng quanh th√†nh ph·ªë, du kh√°ch ph·∫£i thu√™ m·ªôt chi·∫øc xe ƒë·∫°p (bike/bicycle). Kh√¥ng th·ªÉ n√†o thu√™ xe bu√Ωt (bus) hay xe m√°y (motorbike) ƒë·ªÉ "ƒë·∫°p" ƒë∆∞·ª£c ƒë√∫ng kh√¥ng n√†o! Ch·ªçn <strong>D</strong>.</p>`
            },
            {
                id: 21,
                text: "Question 21: Nha Trang is also well-known for its delicious (21) ________________________.",
                options: [
                    { text: "A. city", isCorrect: false },
                    { text: "B. weather", isCorrect: false },
                    { text: "C. scene", isCorrect: false },
                    { text: "D. seafood", isCorrect: true }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>1. Ph√¢n t√≠ch:</strong> ƒê·ª©ng sau t√≠nh t·ª´ "delicious" (th∆°m ngon) b·∫Øt bu·ªôc ph·∫£i l√† m·ªôt danh t·ª´ ch·ªâ ƒë·ªì ƒÉn/th·ª©c u·ªëng.</p>
                <p><strong>2. X√©t 4 ƒë√°p √°n:</strong> Ch·ªâ c√≥ <strong>seafood</strong> (h·∫£i s·∫£n) l√† ƒë·ªì ƒÉn. H∆°n n·ªØa, Nha Trang l√† th√†nh ph·ªë bi·ªÉn n√™n n·ªïi ti·∫øng v·ªÅ h·∫£i s·∫£n l√† r·∫•t h·ª£p l√Ω. Ch·ªçn <strong>D</strong>.</p>`
            },
            {
                id: 24,
                text: "Question 24: Match the blank (24)",
                options: [
                    { text: "A. Players work hard to score goals,", isCorrect: false },
                    { text: "B. A football match is played between two teams of 11 players each.", isCorrect: true },
                    { text: "C. Football is a game that brings people together.", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>T·∫°i sao ch·ªçn B?</strong> Ch·ªó tr·ªëng 24 n·∫±m ·ªü ƒë·∫ßu ƒëo·∫°n vƒÉn m√¥ t·∫£ lu·∫≠t ch∆°i c∆° b·∫£n. ƒêang n√≥i v·ªÅ n∆°i m·ªçi ng∆∞·ªùi ch∆°i (schools, parks...), c√¢u ti·∫øp theo n√≥i v·ªÅ c·∫•u t·∫°o tr·∫≠n ƒë·∫•u (2 ƒë·ªôi, m·ªói ƒë·ªôi 11 ng∆∞·ªùi) l√† h·ª£p l√Ω nh·∫•t ƒë·ªÉ d·∫´n d·∫Øt v√†o √Ω th·ªùi gian 90 ph√∫t ·ªü c√¢u sau ƒë√≥.</p>`
            },
            {
                id: 25,
                text: "Question 25: Match the blank (25)",
                options: [
                    { text: "A. Players work hard to score goals,", isCorrect: true },
                    { text: "B. A match is played between two teams...", isCorrect: false },
                    { text: "C. Football is a game that brings people together.", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>T·∫°i sao ch·ªçn A?</strong> H√£y nh√¨n v√†o c·ª•m t·ª´ "and sometimes matches end in a draw" (v√† ƒë√¥i khi tr·∫≠n ƒë·∫•u k·∫øt th√∫c h√≤a). Ph√≠a tr∆∞·ªõc ch·ªØ "and" (v√†) ph·∫£i l√† m·ªôt h√†nh ƒë·ªông n·ªó l·ª±c (c·∫ßu th·ªß c·ªë g·∫Øng ghi b√†n) t∆∞∆°ng ph·∫£n nh·∫π v·ªõi k·∫øt qu·∫£ h√≤a. C√¢u A gh√©p v√†o s·∫Ω t·∫°o th√†nh: "C·∫ßu th·ªß c·ªë g·∫Øng ghi b√†n, nh∆∞ng ƒë√¥i khi l·∫°i h√≤a". R·∫•t m∆∞·ª£t!</p>`
            },
            {
                id: 26,
                text: "Question 26: Match the blank (26)",
                options: [
                    { text: "A. Players work hard to score goals,", isCorrect: false },
                    { text: "B. A match is played between two teams...", isCorrect: false },
                    { text: "C. Football is a game that brings people together.", isCorrect: true }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>T·∫°i sao ch·ªçn C?</strong> Ch·ªó tr·ªëng 26 n·∫±m ·ªü cu·ªëi ƒëo·∫°n vƒÉn. Th∆∞·ªùng c√¢u cu·ªëi s·∫Ω l√† c√¢u k·∫øt lu·∫≠n, n√™u √Ω nghƒ©a chung. "B√≥ng ƒë√° l√† m√¥n th·ªÉ thao g·∫Øn k·∫øt m·ªçi ng∆∞·ªùi" l√†m c√¢u ch·ªët v√¥ c√πng ho√†n h·∫£o cho ƒëo·∫°n vƒÉn m√¥ t·∫£ b·∫ßu kh√¥ng kh√≠ s√¥i ƒë·ªông ·ªü tr√™n.</p>`
            },
            {
                id: 29,
                text: "Question 29: What is the best title of the passage?",
                options: [
                    { text: "A. Who Wants to Be a Millionaire?", isCorrect: true },
                    { text: "B. A game show in the world", isCorrect: false },
                    { text: "C. Difficult but worth a try", isCorrect: false },
                    { text: "D. Who Wants to Be a Millionaire? in Viet Nam", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>T·∫°i sao ch·ªçn A?</strong> Ti√™u ƒë·ªÅ ph·∫£i bao qu√°t ƒë∆∞·ª£c to√†n b√†i. Xuy√™n su·ªët ƒëo·∫°n vƒÉn, t√°c gi·∫£ t·∫≠p trung gi·∫£i th√≠ch lu·∫≠t ch∆°i, c√°ch tr·ª£ gi√∫p v√† c√°ch chi·∫øn th·∫Øng c·ªßa Gameshow "Who Wants to Be a Millionaire?". C√°c ƒë√°p √°n kh√°c ch·ªâ l√† m·ªôt √Ω nh·ªè (nh∆∞ ·ªü Vi·ªát Nam) ho·∫∑c qu√° chung chung (A game show).</p>`
            },
            {
                id: 30,
                text: "Question 30: The word \"multiple-choice\" in line 2 is CLOSEST in meaning to",
                options: [
                    { text: "A. having many questions", isCorrect: false },
                    { text: "B. selecting many questions", isCorrect: false },
                    { text: "C. selecting many options", isCorrect: false },
                    { text: "D. having many options", isCorrect: true }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>Ph√¢n t√≠ch t·ª´ v·ª±ng:</strong> "Multiple-choice" nghƒ©a l√† "tr·∫Øc nghi·ªám nhi·ªÅu l·ª±a ch·ªçn". Trong b√†i ghi r√µ: "Each question has four answer <strong>options</strong>". C√≥ nghƒ©a l√† m·ªôt c√¢u h·ªèi C√ì nhi·ªÅu l·ª±a ch·ªçn (having many options).</p>
                <p>T·∫°i sao lo·∫°i C? V√¨ th√≠ sinh ch·ªâ ƒë∆∞·ª£c ph√©p ch·ªçn 1 (only one option is correct), ch·ª© kh√¥ng ph·∫£i "ch·ªçn nhi·ªÅu l·ª±a ch·ªçn" (selecting many options).</p>`
            },
            {
                id: 31,
                text: "Question 31: According to the passage, which statement is NOT TRUE?",
                options: [
                    { text: "A. There are three ways for the contestants to get help...", isCorrect: false },
                    { text: "B. The contestant can call a friend to ask for help many times.", isCorrect: true },
                    { text: "C. There are 15 questions in total.", isCorrect: false },
                    { text: "D. The contestants have to answer the questions one by one.", isCorrect: false }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>T√¨m d·∫´n ch·ª©ng trong b√†i (Scanning):</strong> B√†i ƒë·ªçc c√≥ c√¢u "Third, you can telephone a friend... <strong>You can only do these things once</strong>" (B·∫°n ch·ªâ c√≥ th·ªÉ l√†m nh·ªØng ƒëi·ªÅu n√†y M·ªòT L·∫¶N duy nh·∫•t).</p>
                <p>Do ƒë√≥, c√¢u B n√≥i "can call... <strong>many times</strong>" (nhi·ªÅu l·∫ßn) l√† SAI v·ªõi b√†i ƒë·ªçc. ƒê·ªÅ b√†i y√™u c·∫ßu t√¨m c√¢u KH√îNG ƒê√öNG (NOT TRUE), n√™n ta ch·ªçn <strong>B</strong>.</p>`
            },
            {
                id: 32,
                text: "Question 32: The word 'win' in last line is OPPOSITE in meaning to ________",
                options: [
                    { text: "A. take", isCorrect: false },
                    { text: "B. get", isCorrect: false },
                    { text: "C. have", isCorrect: false },
                    { text: "D. lose", isCorrect: true }
                ],
                explanation: `<h4>C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>Ph√¢n t√≠ch:</strong> ƒê·ªÅ b√†i y√™u c·∫ßu t√¨m t·ª´ <strong>OPPOSITE</strong> (Tr√°i nghƒ©a).</p>
                <p>T·ª´ "win" nghƒ©a l√† chi·∫øn th·∫Øng, gi√†nh ƒë∆∞·ª£c. Tr√°i nghƒ©a v·ªõi chi·∫øn th·∫Øng/ƒë∆∞·ª£c l√† "lose" (thua cu·ªôc, m·∫•t). C√°c t·ª´ take, get, have ƒë·ªÅu mang nghƒ©a c√≥ ƒë∆∞·ª£c, nh·∫≠n l·∫•y (g·∫ßn nghƒ©a v·ªõi win). V·∫≠y ƒë√°p √°n chu·∫©n l√† <strong>D. lose</strong>.</p>`
            }
        ];

        let score = 0;
        let totalQuestions = questionsData.length;
        let answeredQuestions = new Set();
        
        // --- AUDIO SYSTEM (WEB AUDIO API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playCorrectSound() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        }

        function playWrongSound() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(300, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.4);
            gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.4);
        }

        // --- CONFETTI SYSTEM ---
        function shootConfetti(x, y) {
            const colors = ['#00D26A', '#FDCB6E', '#8854C0', '#00C9A7', '#FF4757'];
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = x + 'px';
                confetti.style.top = y + 'px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(confetti);

                const angle = Math.random() * Math.PI * 2;
                const velocity = 5 + Math.random() * 10;
                let dx = Math.cos(angle) * velocity;
                let dy = Math.sin(angle) * velocity;

                let posX = x;
                let posY = y;
                let life = 0;

                function animateConfetti() {
                    life++;
                    dy += 0.5; // gravity
                    posX += dx;
                    posY += dy;
                    confetti.style.transform = `translate(${posX - x}px, ${posY - y}px) rotate(${life * 10}deg)`;
                    
                    if (life < 50) {
                        requestAnimationFrame(animateConfetti);
                    } else {
                        confetti.remove();
                    }
                }
                requestAnimationFrame(animateConfetti);
            }
        }

        // --- RENDER QUESTIONS ---
        function shuffleArray(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        const container = document.getElementById('questionsContainer');
        
        questionsData.forEach((q, index) => {
            const card = document.createElement('div');
            card.classList.add('question-card');
            card.id = `q-card-${q.id}`;
            
            let html = `<div class="question-text">${q.text}</div><div class="options-grid">`;
            
            // Shuffle options
            let opts = [...q.options];
            opts = shuffleArray(opts);
            
            opts.forEach((opt, oIndex) => {
                html += `<button class="option-btn" onclick="checkAnswer(${q.id}, ${opt.isCorrect}, this, event)">${opt.text}</button>`;
            });
            
            html += `</div>
                <div class="explanation-box" id="exp-${q.id}">
                    ${q.explanation}
                </div>`;
            
            card.innerHTML = html;
            container.appendChild(card);
        });

        // --- INTERACTION LOGIC ---
        function checkAnswer(qId, isCorrect, btnElement, event) {
            if (answeredQuestions.has(qId)) return; // Prevent clicking again
            
            answeredQuestions.add(qId);
            const parentCard = document.getElementById(`q-card-${qId}`);
            const allBtns = parentCard.querySelectorAll('.option-btn');
            const expBox = document.getElementById(`exp-${qId}`);
            
            // Disable all buttons in this question
            allBtns.forEach(btn => {
                btn.style.pointerEvents = 'none';
                // Highlight the correct one regardless
                const isBtnCorrect = questionsData.find(q => q.id === qId).options.find(o => o.text === btn.innerText).isCorrect;
                if(isBtnCorrect) btn.classList.add('correct');
            });

            if (isCorrect) {
                btnElement.classList.add('correct');
                playCorrectSound();
                shootConfetti(event.clientX, event.clientY);
                score++;
            } else {
                btnElement.classList.add('wrong');
                btnElement.classList.add('shake');
                playWrongSound();
            }

            // Show explanation
            expBox.style.display = 'block';
        }

        // --- TOGGLE TRANSLATION ---
        function toggleTrans(id) {
            const box = document.getElementById(id);
            if(box.style.display === 'block') {
                box.style.display = 'none';
            } else {
                box.style.display = 'block';
            }
        }

        // --- TIMER LOGIC ---
        let timeRemaining = 600; // 10 minutes
        let timerInterval;
        let isTimerRunning = false;

        function updateTimerDisplay() {
            const m = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
            const s = (timeRemaining % 60).toString().padStart(2, '0');
            document.getElementById('timerBtn').innerHTML = `‚è≥ ${m}:${s} (T·∫°m d·ª´ng)`;
        }

        function toggleTimer() {
            const btn = document.getElementById('timerBtn');
            if (!isTimerRunning) {
                isTimerRunning = true;
                timerInterval = setInterval(() => {
                    if (timeRemaining > 0) {
                        timeRemaining--;
                        updateTimerDisplay();
                    } else {
                        clearInterval(timerInterval);
                        btn.innerHTML = "‚è∞ ƒê√£ H·∫øt Gi·ªù!";
                        btn.style.background = "#FF4757";
                        btn.style.color = "white";
                        alert("ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                    }
                }, 1000);
                updateTimerDisplay();
            } else {
                isTimerRunning = false;
                clearInterval(timerInterval);
                const m = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
                const s = (timeRemaining % 60).toString().padStart(2, '0');
                btn.innerHTML = `‚è≥ ${m}:${s} (Ti·∫øp t·ª•c)`;
            }
        }

        // --- SUBMIT LOGIC ---
        function submitTest() {
            clearInterval(timerInterval);
            const modal = document.getElementById('resultModal');
            const content = document.getElementById('modalContent');
            const scoreDisplay = document.getElementById('finalScore');
            const message = document.getElementById('modalMessage');

            modal.style.display = 'flex';
            setTimeout(() => content.classList.add('show'), 50);

            scoreDisplay.innerText = `${score}/${totalQuestions}`;

            let msg = "";
            let percent = score / totalQuestions;
            if (percent === 1) {
                msg = "üèÜ THI√äN T√ÄI! C√¥ Mai An r·∫•t t·ª± h√†o v·ªÅ em! Kh·ªõp 100%!";
            } else if (percent >= 0.7) {
                msg = "üåü L√ÄM T·ªêT L·∫ÆM! Em n·∫Øm b√†i r·∫•t v·ªØng, c·ªë th√™m ch√∫t n·ªØa nh√©!";
            } else if (percent >= 0.5) {
                msg = "üëç C·ªê L√äN NH√â! ƒê·ªçc k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt c·ªßa c√¥ b√™n d∆∞·ªõi nh√©.";
            } else {
                msg = "üí™ ƒê·ª™NG N·∫¢N CH√ç! Th·∫•t b·∫°i l√† m·∫π th√†nh c√¥ng, xem l·∫°i gi·∫£i th√≠ch v√† l√†m l·∫°i nha em!";
            }
            message.innerText = msg;
            
            // Auto scroll to top to see modal clearly
            window.scrollTo(0,0);
        }
    </script>
</body>
</html>