<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Future Simple Quiz - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0;
            --secondary: #00C9A7;
            --accent: #FDCB6E;
            --correct: #00D26A;
            --correct-shadow: #00a051;
            --wrong: #FF4757;
            --wrong-shadow: #d83442;
            --btn-shadow: #dcdde1;
            --text-main: #2f3640;
            --bg-card: rgba(255, 255, 255, 0.95);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Nunito', sans-serif;
        }

        body {
            /* Linear gradient káº¿t há»£p vá»›i pattern SVG lÆ¡ lá»­ng */
            background: 
                url('data:image/svg+xml;utf8,<svg width="150" height="150" xmlns="http://www.w3.org/2000/svg"><text x="10" y="30" font-size="25" opacity="0.6">â­</text><text x="80" y="90" font-size="30" opacity="0.5">ğŸŒ¸</text><text x="30" y="120" font-size="25" opacity="0.6">â˜ï¸</text><text x="110" y="40" font-size="25" opacity="0.5">ğŸ</text><text x="130" y="140" font-size="25" opacity="0.6">ğŸ±</text></svg>'),
                linear-gradient(135deg, #8854C0, #FDCB6E, #00C9A7);
            background-attachment: fixed;
            background-size: 200px 200px, 100% 100%;
            color: var(--text-main);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h5.author {
            text-align: center;
            color: white;
            background: rgba(0,0,0,0.3);
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            position: relative;
            left: 50%;
            transform: translateX(-50%);
        }

        /* LÃ THUYáº¾T */
        .theory-section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
        }
        
        .theory-section h1 {
            color: var(--primary);
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .theory-section h2 {
            color: var(--secondary);
            margin-top: 20px;
            border-bottom: 3px dashed var(--accent);
            padding-bottom: 5px;
        }

        .theory-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 0 var(--btn-shadow);
        }
        .theory-table th, .theory-table td {
            border: 2px solid #f1f2f6;
            padding: 12px;
            text-align: left;
        }
        .theory-table th {
            background: var(--accent);
            color: #333;
        }
        .theory-box {
            background: #f8e8ff;
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 10px 10px 0;
        }

        /* QUIZ CARDS */
        .quiz-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            position: relative;
            transition: all 0.3s ease;
        }

        .quiz-header {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        /* Dáº NG ABCD (MCQ & FIND ERROR) */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe4ea;
            border-bottom: 6px solid #ced6e0;
            border-radius: 15px;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-main);
            cursor: pointer;
            transition: transform 0.1s, border-color 0.2s;
            text-align: center;
        }

        .option-btn:hover:not(:disabled) {
            transform: scale(1.02) translateY(-2px);
            border-color: var(--primary);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }

        /* Dáº NG GAP FILL */
        .gap-fill-area {
            display: inline-block;
            position: relative;
        }
        .gap-btn {
            background: #f1f2f6;
            border: 2px dashed #a4b0be;
            border-radius: 10px;
            padding: 5px 20px;
            color: #a4b0be;
            font-weight: 800;
            cursor: pointer;
            min-width: 100px;
            display: inline-block;
            text-align: center;
            margin: 0 10px;
        }
        .gap-btn:hover { background: #eccc68; color: #fff; border-color: #ffa502;}
        .gap-options {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            padding: 10px;
            z-index: 10;
            width: 200px;
            flex-direction: column;
            gap: 10px;
        }
        .gap-options.show { display: flex; }

        /* Dáº NG REORDER */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .word-chip {
            background: white;
            border: 2px solid #dfe4ea;
            border-bottom: 4px solid #ced6e0;
            border-radius: 12px;
            padding: 10px 15px;
            font-weight: 700;
            cursor: pointer;
            user-select: none;
            transition: transform 0.1s, border-color 0.2s;
        }
        .word-chip:hover:not(.disabled) { border-color: var(--secondary); transform: translateY(-2px); }
        .word-chip.disabled { opacity: 0.5; cursor: not-allowed; }
        .answer-box {
            min-height: 60px;
            background: #f1f2f6;
            border: 3px dashed #ced6e0;
            border-radius: 15px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .check-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-bottom: 5px solid #5f27cd;
            border-radius: 15px;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 800;
            cursor: pointer;
        }
        .check-btn:active:not(:disabled) { transform: translateY(4px); border-bottom-width: 1px; }

        /* TRáº NG THÃI ÄÃšNG SAI */
        .option-btn.correct, .gap-btn.correct, .check-btn.correct {
            background: var(--correct) !important;
            border-color: var(--correct-shadow) !important;
            border-bottom-color: var(--correct-shadow) !important;
            color: white !important;
        }

        .option-btn.wrong, .gap-btn.wrong, .check-btn.wrong {
            background: var(--wrong) !important;
            border-color: var(--wrong-shadow) !important;
            border-bottom-color: var(--wrong-shadow) !important;
            color: white !important;
        }

        .shake {
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-6px, 0, 0); }
            40%, 60% { transform: translate3d(6px, 0, 0); }
        }

        /* GIáº¢I THÃCH (EXPLANATION) */
        .explanation-box {
            display: none;
            margin-top: 20px;
            background: #fff4de;
            border: 3px solid var(--accent);
            border-radius: 15px;
            padding: 20px;
            animation: fadeInDown 0.4s ease;
        }
        .explanation-box h4 { color: #d35400; margin-bottom: 10px; font-size: 1.2rem; }
        .explanation-box p { margin-bottom: 8px; font-size: 1.05rem; }
        .explanation-box .step { font-weight: bold; color: var(--primary); }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* SUBMIT BUTTON */
        .submit-area { text-align: center; margin: 40px 0; }
        .submit-btn {
            background: var(--secondary);
            color: white;
            font-size: 1.8rem;
            font-weight: 900;
            padding: 15px 50px;
            border: none;
            border-bottom: 8px solid #00a051;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .submit-btn:hover { transform: scale(1.05); }
        .submit-btn:active { transform: translateY(8px); border-bottom-width: 0px; }

        /* CONFETTI */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            z-index: 9999;
            animation: fall 3s linear forwards;
            pointer-events: none;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* MODAL ÄIá»‚M Sá» */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .score-modal {
            background: white;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: scaleIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .score-modal h2 { font-size: 2.5rem; color: var(--primary); margin-bottom: 10px; }
        .score-modal .score-text { font-size: 4rem; font-weight: 900; color: var(--correct); margin: 20px 0; }
        .score-modal .praise { font-size: 1.5rem; color: var(--secondary); font-weight: bold; }
        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
    </style>
</head>
<body>

<div class="container">
    <h5 class="author">GiÃ¡o viÃªn táº¡o: Ms Mai An ULIS</h5>

    <div class="theory-section">
        <h1>I. THÃŒ TÆ¯Æ NG LAI ÄÆ N (Future Simple)</h1>
        
        <h2>1. Cáº¥u trÃºc</h2>
        <table class="theory-table">
            <tr>
                <th>Thá»ƒ kháº³ng Ä‘á»‹nh (+)</th>
                <td>S + <b>will</b> + V (nguyÃªn máº«u)<br><i>*will = 'll</i></td>
                <td>I will visit Hue city.<br>She will be 14 years old on her next birthday.</td>
            </tr>
            <tr>
                <th>Thá»ƒ phá»§ Ä‘á»‹nh (-)</th>
                <td>S + <b>will not (won't)</b> + V (nguyÃªn máº«u)</td>
                <td>She won't forget him.<br>Hung will not go camping next week.</td>
            </tr>
            <tr>
                <th>Thá»ƒ nghi váº¥n (?)</th>
                <td><b>Will</b> + S + V (nguyÃªn máº«u)?<br> Yes, S + will. / No, S + won't.</td>
                <td>Will you go to Ha Noi next month?<br>Yes, I will. / No, I won't.</td>
            </tr>
        </table>

        <h2>2. CÃ¡ch dÃ¹ng</h2>
        <div class="theory-box">
            ğŸ‘‰ <b>Diá»…n táº£ má»™t hÃ nh Ä‘á»™ng sáº½ xáº£y ra trong tÆ°Æ¡ng lai:</b> She'll be back at 6pm tonight.
        </div>
        <div class="theory-box">
            ğŸ‘‰ <b>Diá»…n táº£ má»™t quyáº¿t Ä‘á»‹nh ngay lÃºc nÃ³i:</b> I will drink water instead of milk.
        </div>
        <div class="theory-box">
            ğŸ‘‰ <b>Diá»…n táº£ má»™t lá»i há»©a, dá»± Ä‘oÃ¡n:</b> Äi kÃ¨m cÃ¡c cá»¥m: <i>I think</i> (TÃ´i nghÄ©), <i>I'm sure</i> (TÃ´i cháº¯c cháº¯n), <i>I believe</i> (TÃ´i tin), <i>I promise</i> (TÃ´i há»©a).<br>
            <i>VÃ­ dá»¥: I think it will rain tomorrow.</i>
        </div>

        <h2>3. Dáº¥u hiá»‡u nháº­n biáº¿t (Tráº¡ng tá»« chá»‰ thá»i gian)</h2>
        <p>ğŸŒŸ <b>Tomorrow</b> (ngÃ y mai) | ğŸŒŸ <b>Tonight</b> (tá»‘i nay) | ğŸŒŸ <b>Someday / One day</b> (má»™t ngÃ y nÃ o Ä‘Ã³)</p>
        <p>ğŸŒŸ <b>Soon</b> (sá»›m thÃ´i) | ğŸŒŸ <b>In the future</b> (trong tÆ°Æ¡ng lai) | ğŸŒŸ <b>In + thá»i gian</b> (trong ... tá»›i)</p>
        <p>ğŸŒŸ <b>Next + N</b> (tiáº¿p theo, tá»›i) | ğŸŒŸ <b>Perhaps / Probably</b> (cÃ³ láº½, ráº¥t cÃ³ thá»ƒ)</p>
    </div>

    <div id="quiz-container"></div>

    <div class="submit-area">
        <button class="submit-btn" onclick="submitQuiz()">Ná»™p bÃ i ğŸš€</button>
    </div>
</div>

<div class="modal-overlay" id="scoreModal">
    <div class="score-modal">
        <h2>Káº¿t quáº£ cá»§a báº¡n!</h2>
        <div class="score-text" id="finalScore">0/30</div>
        <div class="praise" id="praiseText">Tháº­t tuyá»‡t vá»i!</div>
        <button class="submit-btn" style="margin-top:20px; font-size:1.2rem; padding: 10px 30px;" onclick="location.reload()">LÃ m láº¡i bÃ i</button>
    </div>
</div>

<script>
// ==========================================
// 1. DATA Äá»€ BÃ€I VÃ€ GIáº¢I THÃCH SIÃŠU CHI TIáº¾T
// ==========================================
const quizData = [
    // --- BÃ€I 1: TRáº®C NGHIá»†M (10 CÃ‚U) ---
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'I ______ visit Hue city tomorrow.', options: ['will', 'am', 'wills', 'will to'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i sáº½ Ä‘i thÄƒm thÃ nh phá»‘ Huáº¿ vÃ o ngÃ y mai.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. will (trá»£ Ä‘á»™ng tá»«): sáº½<br>B. am (Ä‘á»™ng tá»« to be): lÃ /á»Ÿ<br>C. wills: sai chÃ­nh táº£ ngá»¯ phÃ¡p<br>D. will to: sai cáº¥u trÃºc<br>
                  <span class="step">3. Táº¡i sao chá»n A?</span> CÃ³ tráº¡ng tá»« "tomorrow" (ngÃ y mai) -> dáº¥u hiá»‡u thÃ¬ TÆ°Æ¡ng lai Ä‘Æ¡n. Cáº¥u trÃºc: S + will + V(nguyÃªn máº«u). Chá»§ ngá»¯ "I" + will + visit.<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> B sai thÃ¬ (hiá»‡n táº¡i). C sai vÃ¬ 'will' lÃ  Ä‘á»™ng tá»« khuyáº¿t thiáº¿u khÃ´ng bao giá» thÃªm 's'. D sai vÃ¬ sau 'will' lÃ  Ä‘á»™ng tá»« nguyÃªn máº«u khÃ´ng 'to'.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'Hung ______ go camping next week.', options: ['not will', 'won\'t', 'doesn\'t will', 'don\'t will'], correct: 1,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> HÃ¹ng sáº½ khÃ´ng Ä‘i cáº¯m tráº¡i vÃ o tuáº§n tá»›i.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. not will: cáº¥u trÃºc ngÆ°á»£c<br>B. won't (will not): sáº½ khÃ´ng<br>C. doesn't will: mÆ°á»£n sai trá»£ Ä‘á»™ng tá»«<br>D. don't will: mÆ°á»£n sai trá»£ Ä‘á»™ng tá»«<br>
                  <span class="step">3. Táº¡i sao chá»n B?</span> "next week" (tuáº§n tá»›i) -> TÆ°Æ¡ng lai Ä‘Æ¡n. Dáº¡ng phá»§ Ä‘á»‹nh lÃ  "will not" viáº¿t táº¯t lÃ  "won't".<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> Phá»§ Ä‘á»‹nh cá»§a tÆ°Æ¡ng lai Ä‘Æ¡n chá»‰ cáº§n thÃªm 'not' ngay sau 'will' (will not = won't), tuyá»‡t Ä‘á»‘i khÃ´ng mÆ°á»£n trá»£ Ä‘á»™ng tá»« do/does/don't/doesn't nhÆ° thÃ¬ hiá»‡n táº¡i Ä‘Æ¡n.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: '______ you go to Ha Noi city next month?', options: ['Do', 'Are', 'Will', 'Does'], correct: 2,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Báº¡n sáº½ Ä‘i thÃ nh phá»‘ HÃ  Ná»™i vÃ o thÃ¡ng tá»›i pháº£i khÃ´ng?<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. Do: trá»£ Ä‘á»™ng tá»« Hiá»‡n táº¡i Ä‘Æ¡n<br>B. Are: Ä‘á»™ng tá»« to be<br>C. Will: trá»£ Ä‘á»™ng tá»« TÆ°Æ¡ng lai Ä‘Æ¡n<br>D. Does: trá»£ Ä‘á»™ng tá»« Hiá»‡n táº¡i Ä‘Æ¡n sá»‘ Ã­t<br>
                  <span class="step">3. Táº¡i sao chá»n C?</span> CÃ¢u há»i cÃ³ "next month" (thÃ¡ng tá»›i) -> TÆ°Æ¡ng lai Ä‘Æ¡n. Cáº¥u trÃºc cÃ¢u há»i: Will + S + V(nguyÃªn máº«u)?<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> A vÃ  D sai thÃ¬ (thÃ¬ hiá»‡n táº¡i Ä‘Æ¡n). B sai vÃ¬ cÃ³ Ä‘á»™ng tá»« thÆ°á»ng "go" thÃ¬ khÃ´ng dÃ¹ng to be "Are" Ä‘á»ƒ Ä‘áº·t cÃ¢u há»i.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'They will ______ to the party next Sunday.', options: ['coming', 'comes', 'come', 'to come'], correct: 2,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Há» sáº½ Ä‘áº¿n bá»¯a tiá»‡c vÃ o Chá»§ nháº­t tá»›i.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. coming (V-ing): Ä‘ang Ä‘áº¿n<br>B. comes (V-s/es): Ä‘áº¿n (chia sá»‘ Ã­t)<br>C. come (V-nguyÃªn máº«u): Ä‘áº¿n<br>D. to come (To V): Ä‘á»ƒ Ä‘áº¿n<br>
                  <span class="step">3. Táº¡i sao chá»n C?</span> Äá»©ng ngay sau "will" Báº®T BUá»˜C pháº£i lÃ  Äá»™ng tá»« nguyÃªn máº«u (V-infinitive). "come" lÃ  nguyÃªn máº«u.<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> CÃ¡c Ä‘Ã¡p Ã¡n A (thÃªm ing), B (thÃªm s), D (thÃªm to) Ä‘á»u vi pháº¡m quy táº¯c: Sau Ä‘á»™ng tá»« khuyáº¿t thiáº¿u (will) khÃ´ng chia báº¥t ká»³ Ä‘uÃ´i nÃ o.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'I think it ______ rain tomorrow.', options: ['will', 'is', 'won\'t to', 'wills'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i nghÄ© ngÃ y mai trá»i sáº½ mÆ°a.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. will: sáº½<br>B. is: lÃ /á»Ÿ<br>C. won't to: sai cáº¥u trÃºc<br>D. wills: sai cáº¥u trÃºc<br>
                  <span class="step">3. Táº¡i sao chá»n A?</span> CÃ¢u chá»©a "I think" (TÃ´i nghÄ©) vÃ  "tomorrow" (ngÃ y mai) lÃ  dáº¥u hiá»‡u kinh Ä‘iá»ƒn dÃ¹ng thÃ¬ tÆ°Æ¡ng lai Ä‘Æ¡n Ä‘á»ƒ diá»…n táº£ dá»± Ä‘oÃ¡n. S + will + V.<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> B sai thÃ¬. C sai vÃ¬ sau won't khÃ´ng cÃ³ 'to'. D sai vÃ¬ 'will' khÃ´ng bao giá» thÃªm 's' dÃ¹ chá»§ ngá»¯ lÃ  'it'.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'She won\'t ______ him.', options: ['forgot', 'forgets', 'forget', 'forgetting'], correct: 2,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> CÃ´ áº¥y sáº½ khÃ´ng quÃªn anh áº¥y.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. forgot (V-quÃ¡ khá»©)<br>B. forgets (V-thÃªm s)<br>C. forget (V-nguyÃªn máº«u): quÃªn<br>D. forgetting (V-ing)<br>
                  <span class="step">3. Táº¡i sao chá»n C?</span> "won't" chÃ­nh lÃ  "will not". Theo quy táº¯c, sau will/won't Báº®T BUá»˜C cá»™ng Äá»™ng tá»« nguyÃªn máº«u. "forget" lÃ  V-nguyÃªn máº«u.<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> A chia quÃ¡ khá»©, B chia hiá»‡n táº¡i sá»‘ Ã­t, D chia V-ing Ä‘á»u vi pháº¡m quy táº¯c Ä‘á»™ng tá»« nguyÃªn máº«u sau won't.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: '______ she meet her boyfriend tonight? - Yes, she ______. ', options: ['Will / will', 'Will / won\'t', 'Does / will', 'Is / will'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Tá»‘i nay cÃ´ áº¥y sáº½ gáº·p báº¡n trai Ã ? - ÄÃºng váº­y.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span> CÃ¡c cáº·p trá»£ Ä‘á»™ng tá»« cho cÃ¢u há»i vÃ  cÃ¢u tráº£ lá»i.<br>
                  <span class="step">3. Táº¡i sao chá»n A?</span> "tonight" (tá»‘i nay) -> TÆ°Æ¡ng lai Ä‘Æ¡n. CÃ¢u há»i Ä‘áº£o "Will" lÃªn Ä‘áº§u. Khi tráº£ lá»i Yes -> Yes, S + will. NÃªn ta cÃ³ cáº·p Will / will.<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> B sai vÃ¬ Yes thÃ¬ khÃ´ng Ä‘i vá»›i won't. C vÃ  D dÃ¹ng sai trá»£ Ä‘á»™ng tá»«/Ä‘á»™ng tá»« to be á»Ÿ váº¿ Ä‘áº§u.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'In the ______, people will travel to Mars.', options: ['tonight', 'tomorrow', 'future', 'next'], correct: 2,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Trong tÆ°Æ¡ng lai, con ngÆ°á»i sáº½ Ä‘i du hÃ nh tá»›i sao Há»a.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch tá»« vá»±ng:</span><br>
                  A. tonight (n): tá»‘i nay<br>B. tomorrow (n): ngÃ y mai<br>C. future (n): tÆ°Æ¡ng lai<br>D. next (adj): káº¿ tiáº¿p<br>
                  <span class="step">3. Táº¡i sao chá»n C?</span> Ta cÃ³ cá»¥m tá»« cá»‘ Ä‘á»‹nh chá»‰ thá»i gian: "In the future" = Trong tÆ°Æ¡ng lai.<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> A, B, D sai ngá»¯ cáº£nh vÃ  cá»¥m tá»«. KhÃ´ng ai nÃ³i "In the tomorrow" hay "In the tonight" cáº£.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'I\'m sure she ______ pass the exam.', options: ['will', 'won\'t', 'wills', 'is'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i cháº¯c cháº¯n ráº±ng cÃ´ áº¥y sáº½ vÆ°á»£t qua ká»³ thi.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. will: sáº½ (dá»± Ä‘oÃ¡n/niá»m tin tÃ­ch cá»±c)<br>B. won't: sáº½ khÃ´ng<br>C. wills: sai ngá»¯ phÃ¡p<br>D. is: thÃ¬ hiá»‡n táº¡i<br>
                  <span class="step">3. Táº¡i sao chá»n A?</span> Cá»¥m "I'm sure" (TÃ´i cháº¯c cháº¯n) dÃ¹ng Ä‘á»ƒ Ä‘Æ°a ra má»™t niá»m tin/dá»± Ä‘oÃ¡n á»Ÿ tÆ°Æ¡ng lai -> dÃ¹ng thÃ¬ TÆ°Æ¡ng lai Ä‘Æ¡n kháº³ng Ä‘á»‹nh "will" (há»£p ngá»¯ cáº£nh Ä‘á»— ká»³ thi).<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> B (won't) sai vá» máº·t logic ngá»¯ nghÄ©a (TÃ´i cháº¯c cháº¯n cÃ´ áº¥y sáº½ TRÆ¯á»¢T thÃ¬ buá»“n cÆ°á»i). C sai ngá»¯ phÃ¡p vÃ¬ 'will' khÃ´ng thÃªm s. D sai thÃ¬.`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 1: Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng nháº¥t',
        q: 'Next summer, we ______ go to the beach.', options: ['will', 'are', 'do', 'going'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> MÃ¹a hÃ¨ tá»›i, chÃºng tÃ´i sáº½ Ä‘i biá»ƒn.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span><br>
                  A. will: sáº½<br>B. are: to be<br>C. do: trá»£ Ä‘á»™ng tá»«<br>D. going: V-ing<br>
                  <span class="step">3. Táº¡i sao chá»n A?</span> CÃ³ "Next summer" (MÃ¹a hÃ¨ tá»›i) -> Dáº¥u hiá»‡u tÆ°Æ¡ng lai. Ta dÃ¹ng will + V nguyÃªn máº«u (go).<br>
                  <span class="step">4. Táº¡i sao cÃ¡c Ä‘Ã¡p Ã¡n cÃ²n láº¡i sai?</span> B thiáº¿u V-ing (are going to). C lÃ  thÃ¬ hiá»‡n táº¡i Ä‘Æ¡n. D thiáº¿u to be (are going).`
    },

    // --- BÃ€I 2: GAP FILL (10 CÃ‚U) - Thiáº¿t káº¿ dáº¡ng nÃºt báº¥m chá»n tá»« ---
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'She [GAP] fourteen years old on her next birthday.', options: ['will be', 'be', 'is', 'will'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> CÃ´ áº¥y sáº½ 14 tuá»•i vÃ o sinh nháº­t tiáº¿p theo cá»§a mÃ¬nh.<br>
                  <span class="step">2. PhÃ¢n tÃ­ch Ä‘Ã¡p Ã¡n:</span> A. will be (sáº½ lÃ /sáº½ Ä‘Æ°á»£c); B. be (nguyÃªn máº«u); C. is (hiá»‡n táº¡i); D. will (thiáº¿u Ä‘á»™ng tá»« chÃ­nh).<br>
                  <span class="step">3. Táº¡i sao chá»n A?</span> "next birthday" -> TÆ°Æ¡ng lai Ä‘Æ¡n. Cáº¥u trÃºc: will + V. Äá»™ng tá»« trong ngoáº·c lÃ  "be" -> will be.<br>
                  <span class="step">4. VÃ¬ sao cÃ¡c Ä‘Ã¡p Ã¡n khÃ¡c sai?</span> B thiáº¿u "will". C lÃ  thÃ¬ hiá»‡n táº¡i Ä‘Æ¡n. D thiáº¿u Ä‘á»™ng tá»« chÃ­nh "be".`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'They [GAP] me do this exercise.', options: ['will help', 'help', 'helping', 'will helps'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Há» sáº½ giÃºp tÃ´i lÃ m bÃ i táº­p nÃ y.<br>
                  <span class="step">2. Táº¡i sao chá»n "will help"?</span> HÃ nh Ä‘á»™ng sáº½ xáº£y ra, dÃ¹ng cáº¥u trÃºc TÆ°Æ¡ng lai Ä‘Æ¡n: will + V(nguyÃªn máº«u) -> will help.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "help" (hiá»‡n táº¡i Ä‘Æ¡n). "helping" (thiáº¿u to be). "will helps" (will khÃ´ng Ä‘i vá»›i V thÃªm s).`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'I [GAP] water instead of milk.', options: ['will drink', 'drink', 'drinks', 'drinking'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i sáº½ uá»‘ng nÆ°á»›c thay cho sá»¯a.<br>
                  <span class="step">2. Táº¡i sao chá»n "will drink"?</span> ÄÃ¢y lÃ  má»™t quyáº¿t Ä‘á»‹nh Ä‘Æ°a ra ngay táº¡i thá»i Ä‘iá»ƒm nÃ³i. DÃ¹ng thÃ¬ TÆ°Æ¡ng lai Ä‘Æ¡n: S + will + V.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "drink", "drinks" (hiá»‡n táº¡i Ä‘Æ¡n). "drinking" (sai ngá»¯ phÃ¡p hoÃ n toÃ n vÃ¬ thiáº¿u to be).`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'We [GAP] some shopping tomorrow.', options: ['won\'t do', 'don\'t do', 'not do', 'will not doing'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> ChÃºng tÃ´i sáº½ khÃ´ng Ä‘i mua sáº¯m vÃ o ngÃ y mai.<br>
                  <span class="step">2. Táº¡i sao chá»n "won't do"?</span> "tomorrow" -> TÆ°Æ¡ng lai. Äá» bÃ i yÃªu cáº§u thá»ƒ phá»§ Ä‘á»‹nh (not / do). Cáº¥u trÃºc: will not (won't) + V(nguyÃªn máº«u) -> won't do.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "don't do" (hiá»‡n táº¡i Ä‘Æ¡n). "not do" (thiáº¿u will). "will not doing" (sau will not pháº£i lÃ  V nguyÃªn máº«u, khÃ´ng Ä‘Æ°á»£c V-ing).`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'I promise I [GAP] here tomorrow.', options: ['will come', 'come', 'coming', 'came'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i há»©a ngÃ y mai tÃ´i sáº½ Ä‘áº¿n Ä‘Ã¢y.<br>
                  <span class="step">2. Táº¡i sao chá»n "will come"?</span> Dáº¥u hiá»‡u "I promise" (TÃ´i há»©a) vÃ  "tomorrow" (ngÃ y mai) -> dÃ¹ng thÃ¬ TÆ°Æ¡ng lai Ä‘Æ¡n: will + V -> will come.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "come" (hiá»‡n táº¡i). "coming" (thiáº¿u to be). "came" (quÃ¡ khá»©).`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'I believe he [GAP] a great teacher.', options: ['will be', 'is', 'be', 'will is'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i tin ráº±ng anh áº¥y sáº½ lÃ  má»™t giÃ¡o viÃªn giá»i.<br>
                  <span class="step">2. Táº¡i sao chá»n "will be"?</span> Dáº¥u hiá»‡u "I believe" (TÃ´i tin) thá»ƒ hiá»‡n sá»± dá»± Ä‘oÃ¡n vá» tÆ°Æ¡ng lai -> dÃ¹ng TÆ°Æ¡ng lai Ä‘Æ¡n. Äá»™ng tá»« "be" -> will be.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "is" (hiá»‡n táº¡i Ä‘Æ¡n). "be" (thiáº¿u will). "will is" (sau will pháº£i lÃ  nguyÃªn máº«u 'be', khÃ´ng dÃ¹ng 'is').`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: '[GAP] here next week? (they / arrive)', options: ['Will they arrive', 'Do they arrive', 'Are they arrive', 'They will arrive'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Tuáº§n tá»›i há» sáº½ Ä‘áº¿n Ä‘Ã¢y chá»©?<br>
                  <span class="step">2. Táº¡i sao chá»n "Will they arrive"?</span> Dáº¥u hiá»‡u "next week" vÃ  lÃ  cÃ¢u há»i (?) -> Ä‘áº£o "Will" lÃªn trÆ°á»›c chá»§ ngá»¯. Cáº¥u trÃºc: Will + S + V? -> Will they arrive.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "Do they arrive" (hiá»‡n táº¡i Ä‘Æ¡n). "Are they arrive" (sai ngá»¯ phÃ¡p to be + V thÆ°á»ng). "They will arrive" (Ä‘Ã¢y lÃ  cÃ¢u kháº³ng Ä‘á»‹nh, khÃ´ng pháº£i cÃ¢u há»i).`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'In a few days, I [GAP] this book.', options: ['will finish', 'finish', 'finishes', 'am finish'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Trong vÃ i ngÃ y tá»›i, tÃ´i sáº½ Ä‘á»c xong cuá»‘n sÃ¡ch nÃ y.<br>
                  <span class="step">2. Táº¡i sao chá»n "will finish"?</span> Dáº¥u hiá»‡u "In a few days" (Trong vÃ i ngÃ y tá»›i) chá»‰ tÆ°Æ¡ng lai. Cáº¥u trÃºc: S + will + V -> will finish.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "finish", "finishes" (hiá»‡n táº¡i Ä‘Æ¡n). "am finish" (sai ngá»¯ phÃ¡p).`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'Perhaps it [GAP] tomorrow.', options: ['will snow', 'snows', 'snowing', 'is snow'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> CÃ³ láº½ ngÃ y mai trá»i sáº½ cÃ³ tuyáº¿t.<br>
                  <span class="step">2. Táº¡i sao chá»n "will snow"?</span> Dáº¥u hiá»‡u "Perhaps" (CÃ³ láº½) dá»± Ä‘oÃ¡n + "tomorrow" -> TÆ°Æ¡ng lai Ä‘Æ¡n. Cáº¥u trÃºc: will + V -> will snow.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "snows" (hiá»‡n táº¡i). "snowing" (sai ngá»¯ phÃ¡p). "is snow" (sai ngá»¯ phÃ¡p).`
    },
    {
        type: 'gap', part: 'BÃ i táº­p 2: Äiá»n tá»« vÃ o chá»— trá»‘ng',
        text: 'Someday, you [GAP] my decision.', options: ['will understand', 'understand', 'understands', 'are understand'], correct: 0,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Má»™t ngÃ y nÃ o Ä‘Ã³, báº¡n sáº½ hiá»ƒu quyáº¿t Ä‘á»‹nh cá»§a tÃ´i.<br>
                  <span class="step">2. Táº¡i sao chá»n "will understand"?</span> Dáº¥u hiá»‡u "Someday" (Má»™t ngÃ y nÃ o Ä‘Ã³) -> TÆ°Æ¡ng lai. Cáº¥u trÃºc: will + V -> will understand.<br>
                  <span class="step">3. CÃ¡c Ä‘Ã¡p Ã¡n sai:</span> "understand", "understands" (hiá»‡n táº¡i Ä‘Æ¡n). "are understand" (sai cáº¥u trÃºc to be Ä‘i vá»›i V nguyÃªn).`
    },

    // --- BÃ€I 3: TÃŒM VÃ€ Sá»¬A Lá»–I SAI (5 CÃ‚U) - Thiáº¿t káº¿ dáº¡ng Tráº¯c nghiá»‡m chá»n cáº·p ---
    // Sá»­a lá»—i cÃº phÃ¡p Javascript á»Ÿ cá»¥m won't (Ä‘Ã£ dÃ¹ng kÃ½ tá»± escape \')
    {
        type: 'mcq', part: 'BÃ i táº­p 3: TÃ¬m lá»—i sai vÃ  sá»­a láº¡i cho Ä‘Ãºng',
        q: '<u>She</u> <u>will goes</u> <u>shopping</u> <u>tomorrow.</u>', options: ['Lá»—i: She -> He', 'Lá»—i: will goes -> will go', 'Lá»—i: shopping -> shops', 'Lá»—i: tomorrow -> today'], correct: 1,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a cÃ¢u:</span> CÃ´ áº¥y sáº½ Ä‘i mua sáº¯m vÃ o ngÃ y mai.<br>
                  <span class="step">2. VÃ¬ sao "will goes" lÃ  Lá»–I SAI?</span> Theo cáº¥u trÃºc thÃ¬ tÆ°Æ¡ng lai Ä‘Æ¡n, sau Ä‘á»™ng tá»« khuyáº¿t thiáº¿u "will", Ä‘á»™ng tá»« chÃ­nh Báº®T BUá»˜C á»Ÿ dáº¡ng NGUYÃŠN MáºªU khÃ´ng chia.<br>
                  <span class="step">3. CÃ¡ch sá»­a:</span> Tá»« "goes" Ä‘ang bá»‹ chia thÃªm "es" (dÃ¹ng cho hiá»‡n táº¡i Ä‘Æ¡n sá»‘ Ã­t). Pháº£i bá» "es" Ä‘i, sá»­a thÃ nh "will go".`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 3: TÃ¬m lá»—i sai vÃ  sá»­a láº¡i cho Ä‘Ãºng',
        q: '<u>I think</u> <u>I</u> <u>will to teach</u> <u>here.</u>', options: ['Lá»—i: I think -> I thinks', 'Lá»—i: I -> Me', 'Lá»—i: will to teach -> will teach', 'Lá»—i: here -> there'], correct: 2,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a cÃ¢u:</span> TÃ´i nghÄ© tÃ´i sáº½ dáº¡y há»c á»Ÿ Ä‘Ã¢y.<br>
                  <span class="step">2. VÃ¬ sao "will to teach" lÃ  Lá»–I SAI?</span> Ráº¥t nhiá»u báº¡n há»c sinh hay nháº§m thÃªm "to" giá»¯a will vÃ  Ä‘á»™ng tá»«. Nhá»› ká»¹ cÃ´ng thá»©c lÃ : S + WILL + V (nguyÃªn máº«u khÃ´ng To).<br>
                  <span class="step">3. CÃ¡ch sá»­a:</span> Bá» chá»¯ "to" Ä‘i. Sá»­a thÃ nh "will teach".`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 3: TÃ¬m lá»—i sai vÃ  sá»­a láº¡i cho Ä‘Ãºng',
        q: '<u>Will</u> <u>they</u> <u>arrives</u> <u>here next week?</u>', options: ['Lá»—i: Will -> Do', 'Lá»—i: they -> them', 'Lá»—i: arrives -> arrive', 'Lá»—i: next week -> last week'], correct: 2,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a cÃ¢u:</span> Tuáº§n tá»›i há» sáº½ Ä‘áº¿n Ä‘Ã¢y pháº£i khÃ´ng?<br>
                  <span class="step">2. VÃ¬ sao "arrives" lÃ  Lá»–I SAI?</span> DÃ¹ trong cÃ¢u há»i cÃ³ Ä‘áº£o "Will" lÃªn Ä‘áº§u, thÃ¬ Ä‘á»™ng tá»« chÃ­nh Ä‘á»©ng sau chá»§ ngá»¯ váº«n PHáº¢I á»Ÿ dáº¡ng NguyÃªn máº«u khÃ´ng chia.<br>
                  <span class="step">3. CÃ¡ch sá»­a:</span> Tá»« "arrives" Ä‘ang bá»‹ thÃªm "s". Pháº£i bá» chá»¯ "s" Ä‘i -> sá»­a thÃ nh "arrive".`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 3: TÃ¬m lá»—i sai vÃ  sá»­a láº¡i cho Ä‘Ãºng',
        q: '<u>We</u> <u>won\'t doing</u> <u>some</u> <u>shopping tomorrow.</u>', options: ['Lá»—i: We -> Us', 'Lá»—i: won\'t doing -> won\'t do', 'Lá»—i: some -> any', 'Lá»—i: tomorrow -> yesterday'], correct: 1,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a cÃ¢u:</span> ChÃºng tÃ´i sáº½ khÃ´ng Ä‘i mua sáº¯m vÃ o ngÃ y mai.<br>
                  <span class="step">2. VÃ¬ sao "won't doing" lÃ  Lá»–I SAI?</span> "won't" = "will not". Sau "won't" Ä‘á»™ng tá»« khÃ´ng bao giá» Ä‘Æ°á»£c thÃªm Ä‘uÃ´i "-ing".<br>
                  <span class="step">3. CÃ¡ch sá»­a:</span> Bá» Ä‘uÃ´i "-ing" cá»§a tá»« "doing". Sá»­a thÃ nh dáº¡ng nguyÃªn máº«u lÃ  "won't do".`
    },
    {
        type: 'mcq', part: 'BÃ i táº­p 3: TÃ¬m lá»—i sai vÃ  sá»­a láº¡i cho Ä‘Ãºng',
        q: '<u>They</u> <u>will probably</u> <u>getting</u> <u>the job.</u>', options: ['Lá»—i: probably -> probable', 'Lá»—i: getting -> get', 'Lá»—i: They -> Their', 'Lá»—i: the job -> a jobs'], correct: 1,
        explain: `<span class="step">1. Dá»‹ch nghÄ©a cÃ¢u:</span> CÃ³ láº½ há» sáº½ nháº­n Ä‘Æ°á»£c cÃ´ng viá»‡c Ä‘Ã³.<br>
                  <span class="step">2. VÃ¬ sao "getting" lÃ  Lá»–I SAI?</span> Tráº¡ng tá»« "probably" cÃ³ thá»ƒ xen vÃ o giá»¯a "will" vÃ  Ä‘á»™ng tá»« chÃ­nh, NHÆ¯NG báº£n cháº¥t Ä‘á»™ng tá»« chÃ­nh váº«n Ä‘á»©ng sau "will" nÃªn váº«n PHáº¢I nguyÃªn máº«u.<br>
                  <span class="step">3. CÃ¡ch sá»­a:</span> Tá»« "getting" Ä‘ang thÃªm "-ing". Bá» "-ing" vÃ  gáº¥p Ä‘Ã´i chá»¯ t Ä‘i -> sá»­a thÃ nh nguyÃªn máº«u "get".`
    },

    // --- BÃ€I 4: Sáº®P Xáº¾P CÃ‚U (5 CÃ‚U) ---
    {
        type: 'reorder', part: 'BÃ i táº­p 4: Sáº¯p xáº¿p tá»« thÃ nh cÃ¢u hoÃ n chá»‰nh',
        words: ['tomorrow.', 'think', 'I', 'rain', 'it', 'will'],
        correctStr: "I think it will rain tomorrow.",
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i nghÄ© ngÃ y mai trá»i sáº½ mÆ°a.<br>
                  <span class="step">2. Cáº¥u trÃºc Ã¡p dá»¥ng:</span> DÃ¹ng cá»¥m "I think" (TÃ´i nghÄ©) Ä‘á»©ng Ä‘áº§u cÃ¢u Ä‘á»ƒ dá»± Ä‘oÃ¡n. Sau Ä‘Ã³ Ä‘áº¿n Má»‡nh Ä‘á» TÆ°Æ¡ng lai Ä‘Æ¡n: S (it) + will + V (rain) + tráº¡ng tá»« chá»‰ thá»i gian (tomorrow).<br>
                  <span class="step">3. Tráº­t tá»± Ä‘Ãºng:</span> I -> think -> it -> will -> rain -> tomorrow.`
    },
    {
        type: 'reorder', part: 'BÃ i táº­p 4: Sáº¯p xáº¿p tá»« thÃ nh cÃ¢u hoÃ n chá»‰nh',
        words: ['back', 'tonight.', 'She', 'be', 'will', 'at 6pm'],
        correctStr: "She will be back at 6pm tonight.",
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> CÃ´ áº¥y sáº½ trá»Ÿ vá» vÃ o lÃºc 6h tá»‘i nay.<br>
                  <span class="step">2. Cáº¥u trÃºc Ã¡p dá»¥ng:</span> S (She) + will + V (be back - trá»Ÿ láº¡i) + Tráº¡ng tá»« thá»i gian nhá» (at 6pm) + Tráº¡ng tá»« thá»i gian lá»›n (tonight).<br>
                  <span class="step">3. Tráº­t tá»± Ä‘Ãºng:</span> She -> will -> be -> back -> at 6pm -> tonight.`
    },
    {
        type: 'reorder', part: 'BÃ i táº­p 4: Sáº¯p xáº¿p tá»« thÃ nh cÃ¢u hoÃ n chá»‰nh',
        words: ['will', 'come', 'They', 'soon.', 'back'],
        correctStr: "They will come back soon.",
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Há» sáº½ sá»›m quay trá»Ÿ láº¡i.<br>
                  <span class="step">2. Cáº¥u trÃºc Ã¡p dá»¥ng:</span> S (They) + will + V nguyÃªn máº«u (come back - quay láº¡i) + Tráº¡ng tá»« (soon - sá»›m thÃ´i).<br>
                  <span class="step">3. Tráº­t tá»± Ä‘Ãºng:</span> They -> will -> come -> back -> soon.`
    },
    {
        type: 'reorder', part: 'BÃ i táº­p 4: Sáº¯p xáº¿p tá»« thÃ nh cÃ¢u hoÃ n chá»‰nh',
        words: ['the', 'sure', 'pass', 'I\'m', 'she', 'exam.', 'will'],
        correctStr: "I'm sure she will pass the exam.",
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> TÃ´i cháº¯c cháº¯n cÃ´ áº¥y sáº½ vÆ°á»£t qua ká»³ thi.<br>
                  <span class="step">2. Cáº¥u trÃºc Ã¡p dá»¥ng:</span> Cá»¥m thá»ƒ hiá»‡n niá»m tin "I'm sure" Ä‘á»©ng Ä‘áº§u. Tiáº¿p theo lÃ  má»‡nh Ä‘á» TÆ°Æ¡ng lai: S (she) + will + V (pass) + O (the exam).<br>
                  <span class="step">3. Tráº­t tá»± Ä‘Ãºng:</span> I'm -> sure -> she -> will -> pass -> the -> exam.`
    },
    {
        type: 'reorder', part: 'BÃ i táº­p 4: Sáº¯p xáº¿p tá»« thÃ nh cÃ¢u hoÃ n chá»‰nh',
        words: ['you', 'Will', 'to', 'Ha Noi', 'month?', 'go', 'next', 'city'],
        correctStr: "Will you go to Ha Noi city next month?",
        explain: `<span class="step">1. Dá»‹ch nghÄ©a:</span> Báº¡n sáº½ Ä‘i thÃ nh phá»‘ HÃ  Ná»™i vÃ o thÃ¡ng tá»›i chá»©?<br>
                  <span class="step">2. Cáº¥u trÃºc Ã¡p dá»¥ng:</span> CÃ¢u nghi váº¥n TÆ°Æ¡ng lai Ä‘Æ¡n: Will + S (you) + V (go) + to + Äá»‹a Ä‘iá»ƒm (Ha Noi city) + Tráº¡ng tá»« thá»i gian (next month).<br>
                  <span class="step">3. Tráº­t tá»± Ä‘Ãºng:</span> Will -> you -> go -> to -> Ha Noi -> city -> next -> month?`
    }
];

// ==========================================
// 2. AUDIO & GAMIFICATION EFFECTS
// ==========================================
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playTone(frequency, type, duration, vol=0.1) {
    if(audioCtx.state === 'suspended') audioCtx.resume();
    const oscillator = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();
    oscillator.type = type;
    oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
    gainNode.gain.setValueAtTime(vol, audioCtx.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
    oscillator.connect(gainNode);
    gainNode.connect(audioCtx.destination);
    oscillator.start();
    oscillator.stop(audioCtx.currentTime + duration);
}

// Ã‚m thanh "Ding" trong tráº»o khi Ä‘Ãºng
function playDing() {
    playTone(659.25, 'sine', 0.5, 0.2); // Ná»‘t E5
    setTimeout(() => playTone(880.00, 'sine', 0.8, 0.2), 100); // Ná»‘t A5
    createConfetti();
}

// Ã‚m thanh "TÃ©o tÃ¨o tÃ¨o" vui nhá»™n khi sai
function playBuzz() {
    playTone(300, 'sawtooth', 0.3, 0.1);
    setTimeout(() => playTone(250, 'sawtooth', 0.3, 0.1), 150);
    setTimeout(() => playTone(200, 'sawtooth', 0.4, 0.1), 300);
}

// Hiá»‡u á»©ng phÃ¡o giáº¥y
function createConfetti() {
    const colors = ['#00D26A', '#FDCB6E', '#FF4757', '#8854C0', '#00C9A7'];
    for(let i=0; i<30; i++) {
        let conf = document.createElement('div');
        conf.className = 'confetti';
        conf.style.left = Math.random() * 100 + 'vw';
        conf.style.top = -10 + 'px';
        conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        conf.style.animationDuration = (Math.random() * 2 + 1) + 's';
        document.body.appendChild(conf);
        setTimeout(() => conf.remove(), 3000);
    }
}

// Thuáº­t toÃ¡n Shuffle Ä‘Ã¡p Ã¡n
function shuffleArray(array) {
    let arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

// ==========================================
// 3. RENDER LÃ THUYáº¾T VÃ€ BÃ€I Táº¬P
// ==========================================
const container = document.getElementById('quiz-container');
let correctAnswersCount = 0;
const answeredQuestions = new Set();

function initQuiz() {
    quizData.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'quiz-card';
        card.id = `q-${index}`;
        
        const header = document.createElement('div');
        header.className = 'quiz-header';
        header.innerText = `CÃ¢u ${index + 1} - ${item.part}`;
        card.appendChild(header);

        // Render dá»±a trÃªn Type
        if(item.type === 'mcq') renderMCQ(card, item, index);
        else if(item.type === 'gap') renderGapFill(card, item, index);
        else if(item.type === 'reorder') renderReorder(card, item, index);

        // Khung giáº£i thÃ­ch (áº©n ban Ä‘áº§u)
        const explanation = document.createElement('div');
        explanation.className = 'explanation-box';
        explanation.id = `expl-${index}`;
        explanation.innerHTML = `<h4>ğŸ’¡ Giáº£i thÃ­ch chi tiáº¿t:</h4><p>${item.explain}</p>`;
        card.appendChild(explanation);

        container.appendChild(card);
    });
}

// --- RENDER Dáº NG MCQ & Lá»–I SAI ---
function renderMCQ(card, item, qIndex) {
    const question = document.createElement('div');
    question.className = 'question-text';
    question.innerHTML = item.q;
    card.appendChild(question);

    const grid = document.createElement('div');
    grid.className = 'options-grid';
    
    // Gáº¯n object ban Ä‘áº§u Ä‘á»ƒ track Ä‘Ã¡p Ã¡n Ä‘Ãºng sau khi shuffle
    let opts = item.options.map((opt, i) => ({ text: opt, isCorrect: i === item.correct }));
    opts = shuffleArray(opts);

    opts.forEach((optObj) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerHTML = optObj.text;
        btn.onclick = () => checkAnswer(btn, optObj.isCorrect, qIndex, grid);
        grid.appendChild(btn);
    });
    card.appendChild(grid);
}

// --- RENDER Dáº NG GAP FILL ---
function renderGapFill(card, item, qIndex) {
    const parts = item.text.split('[GAP]');
    const question = document.createElement('div');
    question.className = 'question-text';
    
    question.appendChild(document.createTextNode(parts[0]));
    
    const gapArea = document.createElement('div');
    gapArea.className = 'gap-fill-area';
    
    const gapBtn = document.createElement('div');
    gapBtn.className = 'gap-btn';
    gapBtn.innerText = 'Chá»n tá»«...';
    
    const popup = document.createElement('div');
    popup.className = 'gap-options';

    let opts = item.options.map((opt, i) => ({ text: opt, isCorrect: i === item.correct }));
    opts = shuffleArray(opts);

    opts.forEach((optObj) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = optObj.text;
        btn.style.padding = "10px";
        btn.onclick = (e) => {
            e.stopPropagation();
            popup.classList.remove('show');
            gapBtn.innerText = optObj.text;
            checkAnswer(gapBtn, optObj.isCorrect, qIndex, popup, gapBtn); // Disable popup sau khi chá»n
        };
        popup.appendChild(btn);
    });

    gapBtn.onclick = () => {
        if(!gapBtn.classList.contains('disabled')) popup.classList.toggle('show');
    };
    
    gapArea.appendChild(gapBtn);
    gapArea.appendChild(popup);
    question.appendChild(gapArea);
    question.appendChild(document.createTextNode(parts[1]));
    
    card.appendChild(question);
}

// --- RENDER Dáº NG REORDER ---
function renderReorder(card, item, qIndex) {
    const hint = document.createElement('div');
    hint.className = 'question-text';
    hint.innerText = "Báº¥m vÃ o cÃ¡c tá»« Ä‘á»ƒ ghÃ©p thÃ nh cÃ¢u hoÃ n chá»‰nh:";
    card.appendChild(hint);

    const answerBox = document.createElement('div');
    answerBox.className = 'answer-box';
    card.appendChild(answerBox);

    const wordBank = document.createElement('div');
    wordBank.className = 'word-bank';
    
    let shuffledWords = shuffleArray(item.words);
    shuffledWords.forEach(word => {
        const chip = document.createElement('div');
        chip.className = 'word-chip';
        chip.innerText = word;
        chip.onclick = () => {
            if(!chip.classList.contains('disabled')) {
                answerBox.appendChild(chip);
            }
        };
        wordBank.appendChild(chip);
    });
    card.appendChild(wordBank);

    const checkBtn = document.createElement('button');
    checkBtn.className = 'check-btn';
    checkBtn.innerText = 'Kiá»ƒm tra';
    checkBtn.onclick = () => {
        const currentAnswer = Array.from(answerBox.children).map(c => c.innerText).join(' ');
        const isCorrect = currentAnswer === item.correctStr;
        checkAnswer(checkBtn, isCorrect, qIndex, wordBank, checkBtn);
        // NgÄƒn báº¥m láº¡i tá»«
        Array.from(wordBank.children).forEach(c => c.classList.add('disabled'));
        Array.from(answerBox.children).forEach(c => c.classList.add('disabled'));
    };
    card.appendChild(checkBtn);
}

// ==========================================
// 4. LOGIC CHáº¤M ÄIá»‚M & HIá»‚N THá»Š GIáº¢I THÃCH
// ==========================================
function checkAnswer(clickedElement, isCorrect, qIndex, containerToDisable, extraElement=null) {
    // NgÄƒn cháº·n tráº£ lá»i láº¡i
    if(answeredQuestions.has(qIndex)) return;
    answeredQuestions.add(qIndex);

    // Disable táº¥t cáº£ button trong cÃ¢u há»i nÃ y
    if(containerToDisable.tagName === 'DIV') {
        const btns = containerToDisable.querySelectorAll('button');
        btns.forEach(b => b.disabled = true);
    }
    if(extraElement) extraElement.classList.add('disabled');

    // UI Feedback & Ã‚m thanh
    if (isCorrect) {
        clickedElement.classList.add('correct');
        playDing();
        correctAnswersCount++;
    } else {
        clickedElement.classList.add('wrong');
        clickedElement.classList.add('shake');
        playBuzz();
    }

    // HIá»‚N THá»Š GIáº¢I THÃCH NGAY Láº¬P Tá»¨C
    document.getElementById(`expl-${qIndex}`).style.display = 'block';
}

// ==========================================
// 5. Ná»˜P BÃ€I VÃ€ Tá»”NG Káº¾T
// ==========================================
function submitQuiz() {
    const modal = document.getElementById('scoreModal');
    const scoreText = document.getElementById('finalScore');
    const praiseText = document.getElementById('praiseText');

    scoreText.innerText = `${correctAnswersCount}/${quizData.length}`;
    
    let ratio = correctAnswersCount / quizData.length;
    let praise = "";
    if(ratio === 1) praise = "Tháº­t xuáº¥t sáº¯c! Äiá»ƒm tuyá»‡t Ä‘á»‘i! ğŸ†";
    else if(ratio >= 0.8) praise = "LÃ m tá»‘t láº¯m! Báº¡n giá»i quÃ¡! ğŸŒŸ";
    else if(ratio >= 0.5) praise = "Cá»‘ gáº¯ng lÃªn nhÃ©! Báº¡n Ä‘Ã£ lÃ m ráº¥t tá»‘t! ğŸ‘";
    else praise = "Äá»c láº¡i pháº§n giáº£i thÃ­ch Ä‘á»ƒ tiáº¿n bá»™ hÆ¡n nhÃ©! ğŸ’ª";

    praiseText.innerText = praise;
    modal.style.display = 'flex';
    createConfetti();
    playDing(); // PhÃ¡t Ã¢m thanh chiáº¿n tháº¯ng
}

// Khá»Ÿi táº¡o bÃ i thi
window.onload = initQuiz;

</script>
</body>
</html>