<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Practice - Ms. Mai An ULIS</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-color: #2c3e50;
            --shadow-color: rgba(0, 0, 0, 0.15);
            --btn-shadow: 0px 6px 0px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #e0eafc;
            background-image: 
                radial-gradient(#8854C0 1.5px, transparent 1.5px), 
                radial-gradient(#00C9A7 1.5px, #e0eafc 1.5px);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 50px;
        }

        /* HEADER */
        header {
            width: 100%;
            background: linear-gradient(135deg, var(--primary-purple), #a29bfe);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(136, 84, 192, 0.4);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom-left-radius: 25px;
            border-bottom-right-radius: 25px;
            margin-bottom: 30px;
        }

        h1 {
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 600;
        }

        /* CONTAINER */
        .container {
            width: 90%;
            max-width: 800px;
            margin: 0 auto;
        }

        /* QUESTION CARD */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 25px var(--shadow-color);
            border: 3px solid #fff;
            position: relative;
            transition: transform 0.3s ease;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .q-badge {
            background: var(--primary-teal);
            color: white;
            padding: 8px 15px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1.1rem;
            box-shadow: 0 4px 0 rgba(0, 168, 132, 0.5);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.5;
            color: #2d3436;
            margin-bottom: 25px;
        }

        /* OPTIONS GRID */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            .question-text {
                font-size: 1.1rem;
            }
        }

        /* OPTION BUTTON STYLE */
        .option-btn {
            background: white;
            border: 2px solid #dfe6e9;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 5px 0 #dfe6e9;
            text-align: left;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            border-color: var(--primary-purple);
            box-shadow: 0 8px 0 #d1c4e9;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #d1c4e9;
        }

        .option-label {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #f1f2f6;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 12px;
            font-weight: 800;
            color: #7f8fa6;
        }

        /* CORRECT / WRONG STATES */
        .option-btn.correct {
            background-color: var(--correct-green);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 5px 0 #00944a;
        }
        .option-btn.correct .option-label {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red);
            color: white;
            border-color: #e84118;
            box-shadow: 0 5px 0 #c23616;
            animation: shake 0.5s;
        }
        .option-btn.wrong .option-label {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.8;
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* EXPLANATION BOX */
        .explanation-box {
            margin-top: 25px;
            background: #fff8e1; /* Light yellow like a note */
            border: 2px dashed #ffb961;
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: popIn 0.4s ease-out;
        }
        
        .explanation-box.visible {
            display: block;
        }

        .explanation-title {
            color: #e67e22;
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .explanation-content {
            font-size: 1rem;
            line-height: 1.6;
            white-space: pre-line; /* Keeps line breaks from data */
            color: #4b4b4b;
        }

        .explanation-content strong {
            color: var(--primary-purple);
        }

        /* SCORE FOOTER */
        .score-footer {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 99;
            border: 3px solid var(--primary-teal);
        }
        
        .score-num {
            color: var(--primary-teal);
            font-size: 1.5rem;
        }

        /* BUTTONS */
        .submit-all-btn {
            display: block;
            margin: 40px auto;
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 6px 0 #6c4299;
            transition: transform 0.2s;
        }

        .submit-all-btn:hover {
            transform: scale(1.05) translateY(-3px);
        }
        
        .submit-all-btn:active {
            transform: scale(0.95) translateY(2px);
            box-shadow: 0 2px 0 #6c4299;
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 5px solid var(--primary-teal);
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .modal-title {
            font-size: 2rem;
            color: var(--primary-purple);
            margin-bottom: 10px;
        }

        .modal-score {
            font-size: 3rem;
            color: var(--primary-teal);
            font-weight: 900;
            margin: 20px 0;
        }

        .modal-btn {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 5px 0 #00997e;
        }

    </style>
</head>
<body>

<header>
    <h1 style="margin-bottom: 5px;">ENGLISH PRACTICE: VOCABULARY & GRAMMAR</h1>
    <div class="subtitle">Gi√°o vi√™n: Ms. Mai An ULIS üë©‚Äçüè´</div>
</header>

<div class="container" id="quiz-container">
    <!-- Questions will be injected here by JavaScript -->
</div>

<button class="submit-all-btn" onclick="finishQuiz()">N·ªôp B√†i & T·ªïng K·∫øt üèÜ</button>

<div class="score-footer">
    <span>ƒêi·ªÉm s·ªë:</span>
    <span class="score-num" id="current-score">0</span>
    <span>/ 30</span>
</div>

<!-- Modal Summary -->
<div class="modal-overlay" id="result-modal">
    <div class="modal-content">
        <div class="modal-title">Ch√∫c M·ª´ng! üéâ</div>
        <p>B·∫°n ƒë√£ ho√†n th√†nh b√†i thi.</p>
        <div class="modal-score" id="final-score">0/30</div>
        <p id="modal-feedback" style="margin-bottom: 20px; font-weight: 600; color: #555;"></p>
        <button class="modal-btn" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
    </div>
</div>

<script>
    // --- 1. QUIZ DATA ---
    const quizData = {
  "questions": [
    {
      "questionNumber": 1,
      "question": "She preferred a laptop to a desktop because the laptop was ____________.",
      "answerOptions": [
        { "text": "larger", "isCorrect": false },
        { "text": "portable", "isCorrect": true },
        { "text": "heavy", "isCorrect": false },
        { "text": "bigger", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. larger (adj): l·ªõn h∆°n.\n- B. portable (adj): c√≥ th·ªÉ mang theo, di ƒë·ªông.\n- C. heavy (adj): n·∫∑ng.\n- D. bigger (adj): to h∆°n.\n\n2. D·ªãch nghƒ©a: \"C√¥ ·∫•y th√≠ch m√°y t√≠nh x√°ch tay h∆°n m√°y t√≠nh ƒë·ªÉ b√†n v√¨ m√°y t√≠nh x√°ch tay c√≥ t√≠nh di ƒë·ªông.\"\n\n3. Gi·∫£i th√≠ch: Laptop ƒë∆∞·ª£c ∆∞a chu·ªông h∆°n desktop v√¨ t√≠nh ti·ªán l·ª£i, d·ªÖ di chuy·ªÉn (portable). C√°c ƒë√°p √°n A, C, D m√¥ t·∫£ ƒë·∫∑c ƒëi·ªÉm (to, n·∫∑ng) th∆∞·ªùng l√† nh∆∞·ª£c ƒëi·ªÉm ho·∫∑c kh√¥ng ph·∫£i l√Ω do ch√≠nh ƒë·ªÉ ch·ªçn laptop."
    },
    {
      "questionNumber": 2,
      "question": "___________ is a synthetic material derived from polymers that can be molded into various shapes.",
      "answerOptions": [
        { "text": "Paper", "isCorrect": false },
        { "text": "Plastic", "isCorrect": true },
        { "text": "Steel", "isCorrect": false },
        { "text": "Cardboard", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. Paper (n): gi·∫•y.\n- B. Plastic (n): nh·ª±a.\n- C. Steel (n): th√©p.\n- D. Cardboard (n): b√¨a c·ª©ng.\n\n2. D·ªãch nghƒ©a: \"Nh·ª±a l√† m·ªôt v·∫≠t li·ªáu t·ªïng h·ª£p c√≥ ngu·ªìn g·ªëc t·ª´ c√°c polyme c√≥ th·ªÉ ƒë∆∞·ª£c ƒë√∫c th√†nh nhi·ªÅu h√¨nh d·∫°ng kh√°c nhau.\"\n\n3. Gi·∫£i th√≠ch: ƒê·ªãnh nghƒ©a c·ªßa \"Plastic\" kh·ªõp ho√†n to√†n v·ªõi m√¥ t·∫£: v·∫≠t li·ªáu t·ªïng h·ª£p (synthetic), t·ª´ polymer, d·ªÖ t·∫°o h√¨nh (molded)."
    },
    {
      "questionNumber": 3,
      "question": "Tourists who can‚Äôt visit the museum in person can take a ____________ tour on its website.",
      "answerOptions": [
        { "text": "direct", "isCorrect": false },
        { "text": "physical", "isCorrect": false },
        { "text": "virtual", "isCorrect": true },
        { "text": "face-to-face", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. direct (adj): tr·ª±c ti·∫øp.\n- B. physical (adj): v·∫≠t l√Ω, th·ªÉ ch·∫•t.\n- C. virtual (adj): ·∫£o (tr√™n m·∫°ng).\n- D. face-to-face (adj): m·∫∑t ƒë·ªëi m·∫∑t.\n\n2. D·ªãch nghƒ©a: \"Du kh√°ch kh√¥ng th·ªÉ ƒë·∫øn thƒÉm b·∫£o t√†ng tr·ª±c ti·∫øp c√≥ th·ªÉ tham gia m·ªôt chuy·∫øn tham quan ·∫£o tr√™n trang web c·ªßa n√≥.\"\n\n3. Gi·∫£i th√≠ch: \"Virtual tour\" l√† chuy·∫øn tham quan qua m√†n h√¨nh/internet, ph√π h·ª£p cho ng∆∞·ªùi kh√¥ng ƒë·∫øn ƒë∆∞·ª£c t·∫≠n n∆°i."
    },
    {
      "questionNumber": 4,
      "question": "____________ bags are harmful for the environment, so people try to recycle them as much as possible.",
      "answerOptions": [
        { "text": "steel", "isCorrect": false },
        { "text": "Aluminium", "isCorrect": false },
        { "text": "Plastic", "isCorrect": true },
        { "text": "Iron", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. steel (n): th√©p.\n- B. Aluminium (n): nh√¥m.\n- C. Plastic (n): nh·ª±a.\n- D. Iron (n): s·∫Øt.\n\n2. D·ªãch nghƒ©a: \"T√∫i nh·ª±a c√≥ h·∫°i cho m√¥i tr∆∞·ªùng, v√¨ v·∫≠y m·ªçi ng∆∞·ªùi c·ªë g·∫Øng t√°i ch·∫ø ch√∫ng nhi·ªÅu nh·∫•t c√≥ th·ªÉ.\"\n\n3. Gi·∫£i th√≠ch: \"Plastic bags\" (t√∫i nilon/nh·ª±a) l√† c·ª•m t·ª´ ph·ªï bi·∫øn ch·ªâ lo·∫°i r√°c th·∫£i kh√≥ ph√¢n h·ªßy g√¢y h·∫°i m√¥i tr∆∞·ªùng."
    },
    {
      "questionNumber": 5,
      "question": "This _____________ music player can carry your music collection everywhere.",
      "answerOptions": [
        { "text": "portable", "isCorrect": true },
        { "text": "fixed", "isCorrect": false },
        { "text": "stable", "isCorrect": false },
        { "text": "changeable", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. portable (adj): di ƒë·ªông, d·ªÖ mang theo.\n- B. fixed (adj): c·ªë ƒë·ªãnh.\n- C. stable (adj): ·ªïn ƒë·ªãnh.\n- D. changeable (adj): c√≥ th·ªÉ thay ƒë·ªïi.\n\n2. D·ªãch nghƒ©a: \"Chi·∫øc m√°y nghe nh·∫°c di ƒë·ªông n√†y c√≥ th·ªÉ mang b·ªô s∆∞u t·∫≠p nh·∫°c c·ªßa b·∫°n ƒëi m·ªçi n∆°i.\"\n\n3. Gi·∫£i th√≠ch: T·ª´ kh√≥a \"carry... everywhere\" (mang ƒëi m·ªçi n∆°i) ƒë·ªìng nghƒ©a v·ªõi t√≠nh ch·∫•t \"portable\"."
    },
    {
      "questionNumber": 6,
      "question": "She used her ____________ to livestream the concert.",
      "answerOptions": [
        { "text": "e-reader", "isCorrect": false },
        { "text": "smartwatch", "isCorrect": false },
        { "text": "3D printer", "isCorrect": false },
        { "text": "smartphone", "isCorrect": true }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. e-reader (n): m√°y ƒë·ªçc s√°ch ƒëi·ªán t·ª≠.\n- B. smartwatch (n): ƒë·ªìng h·ªì th√¥ng minh.\n- C. 3D printer (n): m√°y in 3D.\n- D. smartphone (n): ƒëi·ªán tho·∫°i th√¥ng minh.\n\n2. D·ªãch nghƒ©a: \"C√¥ ·∫•y ƒë√£ s·ª≠ d·ª•ng ƒëi·ªán tho·∫°i th√¥ng minh c·ªßa m√¨nh ƒë·ªÉ ph√°t tr·ª±c ti·∫øp bu·ªïi h√≤a nh·∫°c.\"\n\n3. Gi·∫£i th√≠ch: Smartphone l√† thi·∫øt b·ªã ph·ªï bi·∫øn nh·∫•t c√≥ camera v√† k·∫øt n·ªëi m·∫°ng ƒë·ªÉ livestream."
    },
    {
      "questionNumber": 7,
      "question": "___________ is a strong and durable alloy made primarily from iron and carbon.",
      "answerOptions": [
        { "text": "Steel", "isCorrect": true },
        { "text": "Cardboard", "isCorrect": false },
        { "text": "Plastic", "isCorrect": false },
        { "text": "Paper", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. Steel (n): th√©p.\n- B. Cardboard (n): b√¨a c·ª©ng.\n- C. Plastic (n): nh·ª±a.\n- D. Paper (n): gi·∫•y.\n\n2. D·ªãch nghƒ©a: \"Th√©p l√† m·ªôt h·ª£p kim m·∫°nh v√† b·ªÅn ƒë∆∞·ª£c l√†m ch·ªß y·∫øu t·ª´ s·∫Øt v√† cacbon.\"\n\n3. Gi·∫£i th√≠ch: ƒê√¢y l√† ƒë·ªãnh nghƒ©a khoa h·ªçc c·ªßa \"Steel\" (h·ª£p kim c·ªßa s·∫Øt v√† carbon)."
    },
    {
      "questionNumber": 8,
      "question": "The electrical wires in the house are made of ___________.",
      "answerOptions": [
        { "text": "copper", "isCorrect": true },
        { "text": "plastic", "isCorrect": false },
        { "text": "paper", "isCorrect": false },
        { "text": "rubber", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. copper (n): ƒë·ªìng.\n- B. plastic (n): nh·ª±a.\n- C. paper (n): gi·∫•y.\n- D. rubber (n): cao su.\n\n2. D·ªãch nghƒ©a: \"C√°c d√¢y ƒëi·ªán trong nh√† ƒë∆∞·ª£c l√†m b·∫±ng ƒë·ªìng.\"\n\n3. Gi·∫£i th√≠ch: ƒê·ªìng (copper) l√† kim lo·∫°i d·∫´n ƒëi·ªán t·ªët nh·∫•t v√† ph·ªï bi·∫øn nh·∫•t ƒë·ªÉ l√†m l√µi d√¢y ƒëi·ªán. Nh·ª±a v√† cao su d√πng l√†m v·ªè c√°ch ƒëi·ªán, kh√¥ng ph·∫£i l√†m d√¢y d·∫´n ch√≠nh."
    },
    {
      "questionNumber": 9,
      "question": "___________ is a flexible material which people use to make tires, erasers, and waterproof items.",
      "answerOptions": [
        { "text": "Paper", "isCorrect": false },
        { "text": "Rubber", "isCorrect": true },
        { "text": "Plastic", "isCorrect": false },
        { "text": "Copper", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. Paper (n): gi·∫•y.\n- B. Rubber (n): cao su.\n- C. Plastic (n): nh·ª±a.\n- D. Copper (n): ƒë·ªìng.\n\n2. D·ªãch nghƒ©a: \"Cao su l√† m·ªôt v·∫≠t li·ªáu linh ho·∫°t m√† m·ªçi ng∆∞·ªùi s·ª≠ d·ª•ng ƒë·ªÉ l√†m l·ªëp xe, c·ª•c t·∫©y v√† c√°c v·∫≠t d·ª•ng ch·ªëng th·∫•m n∆∞·ªõc.\"\n\n3. Gi·∫£i th√≠ch: \"Rubber\" (cao su) c√≥ t√≠nh ƒë√†n h·ªìi (flexible), d√πng l√†m l·ªëp (tires) v√† t·∫©y (erasers)."
    },
    {
      "questionNumber": 10,
      "question": "Robotic vacuum cleaners are now easy to control and _____________",
      "answerOptions": [
        { "text": "place", "isCorrect": false },
        { "text": "buy", "isCorrect": false },
        { "text": "store", "isCorrect": false },
        { "text": "operate", "isCorrect": true }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. place (v): ƒë·∫∑t, ƒë·ªÉ.\n- B. buy (v): mua.\n- C. store (v): l∆∞u tr·ªØ.\n- D. operate (v): v·∫≠n h√†nh, s·ª≠ d·ª•ng.\n\n2. D·ªãch nghƒ©a: \"Robot h√∫t b·ª•i hi·ªán nay r·∫•t d·ªÖ ƒëi·ªÅu khi·ªÉn v√† v·∫≠n h√†nh.\"\n\n3. Gi·∫£i th√≠ch: C·ª•m t·ª´ \"easy to control and operate\" (d·ªÖ ƒëi·ªÅu khi·ªÉn v√† v·∫≠n h√†nh) b·ªï tr·ª£ nghƒ©a cho nhau v·ªÅ c√°ch d√πng thi·∫øt b·ªã."
    },
    {
      "questionNumber": 11,
      "question": "The _____________ of my smartphone is not working so I can‚Äôt draw or open any apps.",
      "answerOptions": [
        { "text": "case", "isCorrect": false },
        { "text": "touchscreen", "isCorrect": true },
        { "text": "battery", "isCorrect": false },
        { "text": "cardboard", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. case (n): ·ªëp l∆∞ng.\n- B. touchscreen (n): m√†n h√¨nh c·∫£m ·ª©ng.\n- C. battery (n): pin.\n- D. cardboard (n): b√¨a c·ª©ng.\n\n2. D·ªãch nghƒ©a: \"M√†n h√¨nh c·∫£m ·ª©ng c·ªßa ƒëi·ªán tho·∫°i t√¥i b·ªã h·ªèng n√™n t√¥i kh√¥ng th·ªÉ v·∫Ω hay m·ªü b·∫•t k·ª≥ ·ª©ng d·ª•ng n√†o.\"\n\n3. Gi·∫£i th√≠ch: Ch·ªâ c√≥ \"touchscreen\" (m√†n h√¨nh c·∫£m ·ª©ng) b·ªã h·ªèng m·ªõi khi·∫øn b·∫°n kh√¥ng th·ªÉ t∆∞∆°ng t√°c (draw, open apps) tr·ª±c ti·∫øp tr√™n m√†n h√¨nh."
    },
    {
      "questionNumber": 12,
      "question": "They reinforced the bridge with ____________ bars so it could support heavy loads.",
      "answerOptions": [
        { "text": "cardboard", "isCorrect": false },
        { "text": "steel", "isCorrect": true },
        { "text": "rubber", "isCorrect": false },
        { "text": "plastic", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. cardboard (n): b√¨a c·ª©ng.\n- B. steel (n): th√©p.\n- C. rubber (n): cao su.\n- D. plastic (n): nh·ª±a.\n\n2. D·ªãch nghƒ©a: \"H·ªç gia c·ªë c√¢y c·∫ßu b·∫±ng c√°c thanh th√©p ƒë·ªÉ n√≥ c√≥ th·ªÉ ch·ªãu ƒë∆∞·ª£c t·∫£i tr·ªçng n·∫∑ng.\"\n\n3. Gi·∫£i th√≠ch: Th√©p l√† v·∫≠t li·ªáu ch·ªãu l·ª±c t·ªët nh·∫•t trong c√°c ƒë√°p √°n, ph√π h·ª£p cho x√¢y d·ª±ng c·∫ßu ƒë∆∞·ªùng."
    },
    {
      "questionNumber": 13,
      "question": "We recycled the ___________ boxes after moving into our new house.",
      "answerOptions": [
        { "text": "rubber", "isCorrect": false },
        { "text": "steel", "isCorrect": false },
        { "text": "cardboard", "isCorrect": true },
        { "text": "copper", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. rubber (n): cao su.\n- B. steel (n): th√©p.\n- C. cardboard (n): b√¨a c·ª©ng.\n- D. copper (n): ƒë·ªìng.\n\n2. D·ªãch nghƒ©a: \"Ch√∫ng t√¥i ƒë√£ t√°i ch·∫ø c√°c th√πng b√¨a c·ª©ng sau khi chuy·ªÉn ƒë·∫øn nh√† m·ªõi.\"\n\n3. Gi·∫£i th√≠ch: \"Cardboard boxes\" (th√πng carton) l√† v·∫≠t d·ª•ng ti√™u chu·∫©n ƒë·ªÉ ƒë√≥ng g√≥i ƒë·ªì ƒë·∫°c khi chuy·ªÉn nh√†."
    },
    {
      "questionNumber": 14,
      "question": "The electronic ________ in Minh‚Äôs house are quite expensive.",
      "answerOptions": [
        { "text": "devices", "isCorrect": true },
        { "text": "items", "isCorrect": false },
        { "text": "equipment", "isCorrect": false },
        { "text": "machines", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. devices (n): thi·∫øt b·ªã (s·ªë nhi·ªÅu).\n- B. items (n): m√≥n ƒë·ªì.\n- C. equipment (n): trang thi·∫øt b·ªã (danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c).\n- D. machines (n): m√°y m√≥c.\n\n2. D·ªãch nghƒ©a: \"C√°c thi·∫øt b·ªã ƒëi·ªán t·ª≠ trong nh√† Minh kh√° ƒë·∫Øt ti·ªÅn.\"\n\n3. Gi·∫£i th√≠ch: C·ª•m t·ª´ \"electronic devices\" l√† collocations ph·ªï bi·∫øn nh·∫•t. Ngo√†i ra ƒë·ªông t·ª´ \"are\" (s·ªë nhi·ªÅu) y√™u c·∫ßu ch·ªß ng·ªØ s·ªë nhi·ªÅu."
    },
    {
      "questionNumber": 15,
      "question": "My mom covered potatoes with ____________ paper and put them in the oven for baking.",
      "answerOptions": [
        { "text": "cardboard", "isCorrect": false },
        { "text": "rubber", "isCorrect": false },
        { "text": "iron", "isCorrect": false },
        { "text": "aluminium", "isCorrect": true }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. cardboard (n): b√¨a c·ª©ng.\n- B. rubber (n): cao su.\n- C. iron (n): s·∫Øt.\n- D. aluminium (n): nh√¥m.\n\n2. D·ªãch nghƒ©a: \"M·∫π t√¥i b·ªçc khoai t√¢y b·∫±ng gi·∫•y b·∫°c (gi·∫•y nh√¥m) v√† cho v√†o l√≤ n∆∞·ªõng.\"\n\n3. Gi·∫£i th√≠ch: \"Aluminium paper\" (th∆∞·ªùng g·ªçi l√† Aluminium foil - gi·∫•y b·∫°c) d√πng ƒë·ªÉ b·ªçc th·ª±c ph·∫©m khi n∆∞·ªõng v√¨ ch·ªãu nhi·ªát v√† d·∫´n nhi·ªát t·ªët."
    },
    {
      "questionNumber": 16,
      "question": "Smart window shade is an excellent _____________ if you want to control the house temperature.",
      "answerOptions": [
        { "text": "opportunity", "isCorrect": false },
        { "text": "deal", "isCorrect": false },
        { "text": "option", "isCorrect": true },
        { "text": "chance", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. opportunity (n): c∆° h·ªôi.\n- B. deal (n): th·ªèa thu·∫≠n/m√≥n h·ªùi.\n- C. option (n): l·ª±a ch·ªçn.\n- D. chance (n): c∆° h·ªôi/v·∫≠n may.\n\n2. D·ªãch nghƒ©a: \"R√®m c·ª≠a th√¥ng minh l√† m·ªôt l·ª±a ch·ªçn tuy·ªát v·ªùi n·∫øu b·∫°n mu·ªën ki·ªÉm so√°t nhi·ªát ƒë·ªô trong nh√†.\"\n\n3. Gi·∫£i th√≠ch: \"Option\" (l·ª±a ch·ªçn/gi·∫£i ph√°p) l√† t·ª´ ph√π h·ª£p nh·∫•t khi ƒë∆∞a ra m·ªôt g·ª£i √Ω ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ (ki·ªÉm so√°t nhi·ªát ƒë·ªô)."
    },
    {
      "questionNumber": 17,
      "question": "My uncle has a plantation which grows ____________ trees.",
      "answerOptions": [
        { "text": "metal", "isCorrect": false },
        { "text": "plastic", "isCorrect": false },
        { "text": "rubber", "isCorrect": true },
        { "text": "iron", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. metal (n): kim lo·∫°i.\n- B. plastic (n): nh·ª±a.\n- C. rubber (n): cao su.\n- D. iron (n): s·∫Øt.\n\n2. D·ªãch nghƒ©a: \"Ch√∫ t√¥i c√≥ m·ªôt ƒë·ªìn ƒëi·ªÅn tr·ªìng c√¢y cao su.\"\n\n3. Gi·∫£i th√≠ch: \"Rubber trees\" (c√¢y cao su) l√† lo·∫°i c√¢y c√¥ng nghi·ªáp ph·ªï bi·∫øn ƒë·ªÉ l·∫•y m·ªß (latex) l√†m cao su."
    },
    {
      "questionNumber": 18,
      "question": "This small smartphone can keep you __________ through emails and social networking apps.",
      "answerOptions": [
        { "text": "private", "isCorrect": false },
        { "text": "connected", "isCorrect": true },
        { "text": "stylish", "isCorrect": false },
        { "text": "separated", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. private (adj): ri√™ng t∆∞.\n- B. connected (adj): ƒë∆∞·ª£c k·∫øt n·ªëi.\n- C. stylish (adj): s√†nh ƒëi·ªáu.\n- D. separated (adj): b·ªã t√°ch bi·ªát.\n\n2. D·ªãch nghƒ©a: \"Chi·∫øc ƒëi·ªán tho·∫°i th√¥ng minh nh·ªè n√†y c√≥ th·ªÉ gi·ªØ cho b·∫°n ƒë∆∞·ª£c k·∫øt n·ªëi th√¥ng qua email v√† c√°c ·ª©ng d·ª•ng m·∫°ng x√£ h·ªôi.\"\n\n3. Gi·∫£i th√≠ch: \"Keep connected\" (gi·ªØ k·∫øt n·ªëi/li√™n l·∫°c) l√† m·ª•c ƒë√≠ch ch√≠nh c·ªßa email v√† social apps."
    },
    {
      "questionNumber": 19,
      "question": "The sales assistant recommended my dad ____________ out the latest tablet‚Äôs pencil.",
      "answerOptions": [
        { "text": "try", "isCorrect": true },
        { "text": "tries", "isCorrect": false },
        { "text": "trying", "isCorrect": false },
        { "text": "tried", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. try (v - nguy√™n th·ªÉ).\n- B. tries (v - chia s/es).\n- C. trying (v - V-ing).\n- D. tried (v - qu√° kh·ª©).\n\n2. D·ªãch nghƒ©a: \"Ng∆∞·ªùi b√°n h√†ng khuy√™n b·ªë t√¥i n√™n th·ª≠ b√∫t c·∫£m ·ª©ng c·ªßa chi·∫øc m√°y t√≠nh b·∫£ng m·ªõi nh·∫•t.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c gi·∫£ ƒë·ªãnh c√°ch (Subjunctive Mood): Recommend + (that) + S + (should) + V_bare."
    },
    {
      "questionNumber": 20,
      "question": "My uncle suggested that I _____________ an e-reader to read more materials.",
      "answerOptions": [
        { "text": "will buy", "isCorrect": false },
        { "text": "should buy", "isCorrect": true },
        { "text": "bought", "isCorrect": false },
        { "text": "buys", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. will buy (t∆∞∆°ng lai ƒë∆°n).\n- B. should buy (n√™n mua - modal verb).\n- C. bought (qu√° kh·ª© ƒë∆°n).\n- D. buys (hi·ªán t·∫°i ƒë∆°n).\n\n2. D·ªãch nghƒ©a: \"Ch√∫ t√¥i g·ª£i √Ω r·∫±ng t√¥i n√™n mua m·ªôt chi·∫øc m√°y ƒë·ªçc s√°ch ƒë·ªÉ ƒë·ªçc th√™m t√†i li·ªáu.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Suggest + that + S + (should) + V_bare. ƒê√°p √°n B c√≥ \"should buy\" l√† ho√†n to√†n ch√≠nh x√°c."
    },
    {
      "questionNumber": 21,
      "question": "She wants _________ a smartwatch to monitor her heart rate while exercising.",
      "answerOptions": [
        { "text": "to got", "isCorrect": false },
        { "text": "to get", "isCorrect": true },
        { "text": "getting", "isCorrect": false },
        { "text": "gets", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. to got (sai ng·ªØ ph√°p).\n- B. to get (to V).\n- C. getting (V-ing).\n- D. gets (V-s).\n\n2. D·ªãch nghƒ©a: \"C√¥ ·∫•y mu·ªën c√≥ m·ªôt chi·∫øc ƒë·ªìng h·ªì th√¥ng minh ƒë·ªÉ theo d√µi nh·ªãp tim khi t·∫≠p th·ªÉ d·ª•c.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c \"want + to V\" (mu·ªën l√†m g√¨)."
    },
    {
      "questionNumber": 22,
      "question": "Kim advised _________ too much time on video games and social media.",
      "answerOptions": [
        { "text": "not spend", "isCorrect": false },
        { "text": "don't spend", "isCorrect": false },
        { "text": "not spending", "isCorrect": true },
        { "text": "isn't spending", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. not spend (not + V_bare).\n- B. don't spend (tr·ª£ ƒë·ªông t·ª´ + V).\n- C. not spending (not + V-ing).\n- D. isn't spending (hi·ªán t·∫°i ti·∫øp di·ªÖn).\n\n2. D·ªãch nghƒ©a: \"Kim khuy√™n kh√¥ng n√™n d√†nh qu√° nhi·ªÅu th·ªùi gian cho tr√≤ ch∆°i ƒëi·ªán t·ª≠ v√† m·∫°ng x√£ h·ªôi.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Advise + V-ing (khi kh√¥ng c√≥ t√¢n ng·ªØ ch·ªâ ng∆∞·ªùi). D·∫°ng ph·ªß ƒë·ªãnh l√† \"Advise + not + V-ing\"."
    },
    {
      "questionNumber": 23,
      "question": "Hoa advised that Minh ____________ in an online speaking class.",
      "answerOptions": [
        { "text": "would join", "isCorrect": false },
        { "text": "joins", "isCorrect": false },
        { "text": "join", "isCorrect": true },
        { "text": "will join", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. would join (t∆∞∆°ng lai trong qu√° kh·ª©).\n- B. joins (hi·ªán t·∫°i ƒë∆°n).\n- C. join (nguy√™n th·ªÉ).\n- D. will join (t∆∞∆°ng lai ƒë∆°n).\n\n2. D·ªãch nghƒ©a: \"Hoa khuy√™n Minh n√™n tham gia m·ªôt l·ªõp h·ªçc n√≥i tr·ª±c tuy·∫øn.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Advise + that + S + (should) + V_bare. \"Minh join\" (gi·ªØ nguy√™n th·ªÉ) l√† ƒë√°p √°n ƒë√∫ng."
    },
    {
      "questionNumber": 24,
      "question": "My classmates decided _________ a 3D printer to create models for their project.",
      "answerOptions": [
        { "text": "try", "isCorrect": false },
        { "text": "to try", "isCorrect": true },
        { "text": "trying", "isCorrect": false },
        { "text": "to trying", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. try (nguy√™n th·ªÉ).\n- B. to try (to V).\n- C. trying (V-ing).\n- D. to trying (to V-ing).\n\n2. D·ªãch nghƒ©a: \"C√°c b·∫°n c√πng l·ªõp c·ªßa t√¥i ƒë√£ quy·∫øt ƒë·ªãnh th·ª≠ m·ªôt m√°y in 3D ƒë·ªÉ t·∫°o m√¥ h√¨nh cho d·ª± √°n c·ªßa h·ªç.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c \"decide + to V\" (quy·∫øt ƒë·ªãnh l√†m g√¨)."
    },
    {
      "questionNumber": 25,
      "question": "The music teacher recommended Tom _________ in the school concert to showcase his talent.",
      "answerOptions": [
        { "text": "sang", "isCorrect": false },
        { "text": "sing", "isCorrect": true },
        { "text": "sings", "isCorrect": false },
        { "text": "sung", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. sang (qu√° kh·ª© ƒë∆°n).\n- B. sing (nguy√™n th·ªÉ).\n- C. sings (hi·ªán t·∫°i ƒë∆°n).\n- D. sung (qu√° kh·ª© ph√¢n t·ª´).\n\n2. D·ªãch nghƒ©a: \"Gi√°o vi√™n √¢m nh·∫°c ƒë·ªÅ ngh·ªã Tom h√°t trong bu·ªïi h√≤a nh·∫°c c·ªßa tr∆∞·ªùng ƒë·ªÉ th·ªÉ hi·ªán t√†i nƒÉng c·ªßa m√¨nh.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c Subjunctive: Recommended (that) Tom (should) sing. ƒê·ªông t·ª´ \"sing\" gi·ªØ nguy√™n th·ªÉ."
    },
    {
      "questionNumber": 26,
      "question": "The travel agent recommended _________ the beach during the summer for a relaxing vacation.",
      "answerOptions": [
        { "text": "to visiting", "isCorrect": false },
        { "text": "visiting", "isCorrect": true },
        { "text": "visits", "isCorrect": false },
        { "text": "visited", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. to visiting (to V-ing).\n- B. visiting (V-ing).\n- C. visits (V-s).\n- D. visited (V-ed).\n\n2. D·ªãch nghƒ©a: \"ƒê·∫°i l√Ω du l·ªãch khuy√™n n√™n gh√© thƒÉm b√£i bi·ªÉn v√†o m√πa h√® ƒë·ªÉ c√≥ m·ªôt k·ª≥ ngh·ªâ th∆∞ gi√£n.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Recommend + V-ing (khi kh√¥ng c√≥ t√¢n ng·ªØ ch·ªâ ng∆∞·ªùi)."
    },
    {
      "questionNumber": 27,
      "question": "It's so cold outside. We suggest __________the door and turn on the air conditioner.",
      "answerOptions": [
        { "text": "should close", "isCorrect": false },
        { "text": "close", "isCorrect": false },
        { "text": "closing", "isCorrect": true },
        { "text": "to close", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. should close (n√™n ƒë√≥ng).\n- B. close (ƒë√≥ng).\n- C. closing (ƒë√≥ng - V-ing).\n- D. to close (ƒë√≥ng - to V).\n\n2. D·ªãch nghƒ©a: \"Ngo√†i tr·ªùi l·∫°nh qu√°. Ch√∫ng t√¥i ƒë·ªÅ ngh·ªã ƒë√≥ng c·ª≠a v√† b·∫≠t m√°y ƒëi·ªÅu h√≤a.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Suggest + V-ing (ƒë·ªÅ ngh·ªã l√†m g√¨)."
    },
    {
      "questionNumber": 28,
      "question": "Mr Smith advises _________ regularly to improve skills and perform better in matches.",
      "answerOptions": [
        { "text": "practised", "isCorrect": false },
        { "text": "practise", "isCorrect": false },
        { "text": "practising", "isCorrect": true },
        { "text": "to practising", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. practised (qu√° kh·ª©).\n- B. practise (nguy√™n th·ªÉ).\n- C. practising (V-ing).\n- D. to practising (sai).\n\n2. D·ªãch nghƒ©a: \"√îng Smith khuy√™n n√™n luy·ªán t·∫≠p th∆∞·ªùng xuy√™n ƒë·ªÉ c·∫£i thi·ªán k·ªπ nƒÉng v√† thi ƒë·∫•u t·ªët h∆°n.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Advise + V-ing (khi kh√¥ng c√≥ t√¢n ng·ªØ ch·ªâ ng∆∞·ªùi)."
    },
    {
      "questionNumber": 29,
      "question": "My parents advised me that I should _________ more money for the future.",
      "answerOptions": [
        { "text": "to save", "isCorrect": false },
        { "text": "to saving", "isCorrect": false },
        { "text": "save", "isCorrect": true },
        { "text": "saving", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. to save (to V).\n- B. to saving (sai).\n- C. save (nguy√™n th·ªÉ).\n- D. saving (V-ing).\n\n2. D·ªãch nghƒ©a: \"B·ªë m·∫π t√¥i khuy√™n t√¥i r·∫±ng t√¥i n√™n ti·∫øt ki·ªám nhi·ªÅu ti·ªÅn h∆°n cho t∆∞∆°ng lai.\"\n\n3. Gi·∫£i th√≠ch: Should + V_bare (nguy√™n th·ªÉ)."
    },
    {
      "questionNumber": 30,
      "question": "Her parents suggest she __________in Medicine University to help the poor patients.",
      "answerOptions": [
        { "text": "studies", "isCorrect": false },
        { "text": "study", "isCorrect": true },
        { "text": "studied", "isCorrect": false },
        { "text": "to study", "isCorrect": false }
      ],
      "rationale": "1. Ph√¢n t√≠ch 4 ƒë√°p √°n:\n- A. studies (chia s·ªë √≠t).\n- B. study (nguy√™n th·ªÉ).\n- C. studied (qu√° kh·ª©).\n- D. to study (to V).\n\n2. D·ªãch nghƒ©a: \"B·ªë m·∫π c√¥ ·∫•y g·ª£i √Ω c√¥ ·∫•y h·ªçc tr∆∞·ªùng ƒê·∫°i h·ªçc Y ƒë·ªÉ gi√∫p ƒë·ª° nh·ªØng b·ªánh nh√¢n ngh√®o.\"\n\n3. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Suggest + (that) + S + (should) + V_bare."
    }
  ]
};

    // --- 2. GAME LOGIC ---
    let score = 0;
    const answeredSet = new Set();
    const quizContainer = document.getElementById('quiz-container');
    const scoreDisplay = document.getElementById('current-score');

    // Audio Context Setup for Sound Effects (No external files needed)
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    function playTone(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        
        if (type === 'correct') {
            // Ding sound (High pitch sine wave)
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(800, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.5);
        } else {
            // Buzz sound (Low pitch sawtooth)
            oscillator.type = 'sawtooth';
            oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
            oscillator.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.3);
        }
    }

    // Fire Confetti
    function triggerConfetti(element) {
        const rect = element.getBoundingClientRect();
        // Normalized coordinates
        const x = (rect.left + rect.width / 2) / window.innerWidth;
        const y = (rect.top + rect.height / 2) / window.innerHeight;

        confetti({
            particleCount: 50,
            spread: 70,
            origin: { x: x, y: y },
            colors: ['#00D26A', '#F1C40F', '#8854C0']
        });
    }

    // Render Quiz
    function renderQuiz() {
        quizData.questions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            
            // Highlight visuals for Q29, Q30 if needed (just CSS class hook)
            if(q.questionNumber >= 29) {
               // Optional: Add specific class if we wanted distinct styling
               // card.classList.add('special-visual'); 
            }

            // Header
            const header = document.createElement('div');
            header.className = 'question-header';
            header.innerHTML = `<div class="q-badge">Question ${q.questionNumber}</div>`;
            
            // Question Text
            const qText = document.createElement('div');
            qText.className = 'question-text';
            qText.innerText = q.question;

            // Options Container
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-grid';

            const labels = ['A', 'B', 'C', 'D'];
            q.answerOptions.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = `<span class="option-label">${labels[i]}</span> ${opt.text}`;
                btn.onclick = (e) => checkAnswer(q.questionNumber, i, opt.isCorrect, btn, explanationDiv);
                optionsDiv.appendChild(btn);
            });

            // Explanation Box (Hidden initially)
            const explanationDiv = document.createElement('div');
            explanationDiv.className = 'explanation-box';
            
            // Format Rationale: Replace newlines with <br> and bold key sections
            let formattedRationale = q.rationale
                .replace(/\n/g, '<br>')
                .replace(/(Ph√¢n t√≠ch 4 ƒë√°p √°n:)/g, '<strong>$1</strong>')
                .replace(/(D·ªãch nghƒ©a:)/g, '<strong>$1</strong>')
                .replace(/(Gi·∫£i th√≠ch:)/g, '<strong>$1</strong>');

            explanationDiv.innerHTML = `
                <div class="explanation-title">
                    <i class="fas fa-lightbulb"></i> C√¥ Mai An gi·∫£i th√≠ch:
                </div>
                <div class="explanation-content">${formattedRationale}</div>
            `;

            card.appendChild(header);
            card.appendChild(qText);
            card.appendChild(optionsDiv);
            card.appendChild(explanationDiv);
            quizContainer.appendChild(card);
        });
    }

    // Handle Answer Selection
    function checkAnswer(qNum, optIndex, isCorrect, btnElement, explanationElement) {
        if (answeredSet.has(qNum)) return; // Prevent re-answering
        answeredSet.add(qNum);

        const allBtns = btnElement.parentElement.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.disabled = true); // Disable all buttons in this card

        // Show explanation immediately
        explanationElement.classList.add('visible');

        if (isCorrect) {
            btnElement.classList.add('correct');
            playTone('correct');
            triggerConfetti(btnElement);
            score++;
            scoreDisplay.innerText = score;
        } else {
            btnElement.classList.add('wrong');
            playTone('wrong');
            // Highlight the correct answer automatically
            const correctBtnIndex = quizData.questions[qNum-1].answerOptions.findIndex(o => o.isCorrect);
            if (correctBtnIndex !== -1) {
                 allBtns[correctBtnIndex].classList.add('correct');
                 // Optional: slight transparency for the auto-highlighted one to distinguish
                 allBtns[correctBtnIndex].style.opacity = '0.7';
            }
        }
    }

    // Finish Quiz Modal
    function finishQuiz() {
        const modal = document.getElementById('result-modal');
        const finalScore = document.getElementById('final-score');
        const feedback = document.getElementById('modal-feedback');
        
        finalScore.innerText = `${score} / 30`;
        
        if (score === 30) {
            feedback.innerText = "Tuy·ªát ƒë·ªëi! Em l√† thi√™n t√†i ti·∫øng Anh! üåü";
            triggerConfetti(document.body);
        } else if (score >= 20) {
            feedback.innerText = "L√†m t·ªët l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! üí™";
        } else {
            feedback.innerText = "ƒê·ª´ng bu·ªìn, h√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ h·ªçc th√™m nh√©! üìö";
        }

        modal.style.display = 'flex';
        playTone('correct'); // Celebration sound
    }

    function closeModal() {
        document.getElementById('result-modal').style.display = 'none';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Initialize
    renderQuiz();

</script>

<!-- FontAwesome for Icons -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

</body>
</html>
