<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms Mai An ULIS - Past Simple & Continuous Mix</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #8854C0; /* T√≠m Pastel */
            --secondary-color: #00C9A7; /* Xanh Ng·ªçc */
            --correct-color: #00D26A; /* Xanh l√° */
            --wrong-color: #FF4757; /* ƒê·ªè cam */
            --bg-color: #F0F3F8;
            --card-bg: #FFFFFF;
            --text-color: #2F3542;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --btn-shadow: 0px 4px 0px;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#d1d8e0 15%, transparent 16%), radial-gradient(#d1d8e0 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: #fff;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 20px var(--shadow-color);
            border-bottom: 5px solid var(--primary-color);
        }

        h1 {
            color: var(--primary-color);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 2rem;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .subtitle {
            color: #747d8c;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        /* Quiz Card Styles */
        .quiz-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px var(--shadow-color);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .question-number {
            background: var(--secondary-color);
            color: white;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 15px;
            box-shadow: 0 3px 0 #009e82;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 25px;
            line-height: 1.5;
            color: #2f3542;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: #fff;
            border: 2px solid #dfe4ea;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: var(--btn-shadow) #dfe4ea;
            text-align: left;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-color);
            box-shadow: var(--btn-shadow) var(--primary-color);
            color: var(--primary-color);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0px 0px 0px;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-color);
            border-color: #00b85b;
            color: white;
            box-shadow: var(--btn-shadow) #00b85b;
        }

        .option-btn.wrong {
            background-color: var(--wrong-color);
            border-color: #e03b4b;
            color: white;
            box-shadow: var(--btn-shadow) #e03b4b;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #fff9c4; /* V√†ng nh·∫°t */
            border-left: 5px solid #fbc531;
            padding: 20px;
            border-radius: 10px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-header {
            font-weight: 800;
            color: #e1b12c;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-content {
            font-size: 1rem;
            line-height: 1.6;
            white-space: pre-line; /* Preserves line breaks */
            color: #333;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Footer */
        .footer-controls {
            text-align: center;
            margin-top: 40px;
            padding-bottom: 60px;
        }

        .submit-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 6px 0 #6c429c;
            transition: transform 0.2s;
            font-family: 'Quicksand', sans-serif;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #6c429c;
        }

        .submit-btn:active {
            transform: translateY(3px);
            box-shadow: 0 0 0;
        }

        /* Modal Score */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 40px;
            border-radius: 30px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 5px solid var(--primary-color);
            position: relative;
            animation: pop 0.4s ease-out;
        }

        .score-number {
            font-size: 4rem;
            font-weight: 900;
            color: var(--secondary-color);
            margin: 20px 0;
        }

        .close-btn {
            background: var(--wrong-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            box-shadow: 0 4px 0 #c43542;
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }
    </style>
</head>
<body>

    <header>
        <h1>Ms Mai An ULIS</h1>
        <div class="subtitle">üå∏ Luy·ªán t·∫≠p 2 ch·ªó tr·ªëng: Qu√° kh·ª© ƒë∆°n & Ti·∫øp di·ªÖn üå∏</div>
    </header>

    <div class="container" id="quiz-container">
        <!-- Quiz Cards will be injected here -->
    </div>

    <div class="footer-controls">
        <button class="submit-btn" onclick="showFinalScore()">N·ªòP B√ÄI & XEM ƒêI·ªÇM</button>
    </div>

    <div id="scoreModal" class="modal">
        <div class="modal-content">
            <h2 style="color: var(--primary-color); margin-top: 0;">K·∫øt Qu·∫£ C·ªßa Em</h2>
            <div id="praise-text" style="font-size: 1.2rem; color: #57606f;"></div>
            <div class="score-number" id="final-score">0/0</div>
            <button class="close-btn" onclick="closeModal()">L√†m l·∫°i / ƒê√≥ng</button>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <script>
        // --- DATA ---
        // D·ªØ li·ªáu ƒë∆∞·ª£c tr√≠ch xu·∫•t t·ª´ file past-mix-grade34-2blanks
        const quizData = {
          "questions": [
            {
              "questionNumber": 1,
              "question": "While I _____ (read) a book, my sister _____ (listen) to music.",
              "answerOptions": [
                {
                  "text": "was reading / was listening",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was reading / was listening: ƒëang ƒë·ªçc / ƒëang nghe (song song)<br>B. read / listened: ƒë√£ ƒë·ªçc / ƒë√£ nghe (k·ªÉ l·∫°i)<br>C. was reading / listened: ƒëang ƒë·ªçc / ƒë√£ nghe<br>D. read / was listening: ƒë√£ ƒë·ªçc / ƒëang nghe<br><br><b>Gi·∫£i th√≠ch:</b> C√≥ t·ª´ 'While' (Trong khi). ƒê√¢y l√† T√¨nh hu·ªëng 3: Hai ng∆∞·ªùi l√†m hai vi·ªác c√πng l√∫c. T·ªõ ƒë·ªçc s√°ch, em nghe nh·∫°c, kh√¥ng ai l√†m phi·ªÅn ai -> C·∫£ hai ƒë·ªÅu d√πng Qu√° kh·ª© ti·∫øp di·ªÖn.<br><br><b>D·ªãch c√¢u:</b> Trong khi t·ªõ ƒëang ƒë·ªçc s√°ch th√¨ em g√°i t·ªõ ƒëang nghe nh·∫°c.",
                  "isCorrect": true
                },
                {
                  "text": "read / listened",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was reading / listened",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "read / was listening",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 2,
              "question": "I _____ (sleep) when the phone _____ (ring).",
              "answerOptions": [
                {
                  "text": "was sleeping / rang",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was sleeping / rang: ƒëang ng·ªß / reo (ng·∫Øt qu√£ng)<br>B. slept / was ringing: ƒë√£ ng·ªß / ƒëang reo<br>C. was sleeping / was ringing: ƒëang ng·ªß / ƒëang reo<br>D. slept / rang: ƒë√£ ng·ªß / ƒë√£ reo<br><br><b>Gi·∫£i th√≠ch:</b> T√¨nh hu·ªëng 2: H√†nh ƒë·ªông d√†i g·∫∑p h√†nh ƒë·ªông ng·∫Øn. T·ªõ ƒëang ng·ªß (d√†i) -> Was sleeping. ƒêi·ªán tho·∫°i reo (ng·∫Øn, b·∫•t ng·ªù) -> Rang (qu√° kh·ª© c·ªßa ring).<br><br><b>D·ªãch c√¢u:</b> T·ªõ ƒëang ng·ªß th√¨ ƒëi·ªán tho·∫°i reo.",
                  "isCorrect": true
                },
                {
                  "text": "slept / was ringing",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was sleeping / was ringing",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "slept / rang",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 3,
              "question": "They _____ (play) football when it _____ (start) to rain.",
              "answerOptions": [
                {
                  "text": "were playing / started",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. were playing / started: ƒëang ch∆°i / b·∫Øt ƒë·∫ßu (m∆∞a)<br>B. played / was starting: ƒë√£ ch∆°i / ƒëang b·∫Øt ƒë·∫ßu<br>C. were playing / was starting: ƒëang ch∆°i / ƒëang b·∫Øt ƒë·∫ßu<br>D. played / started: ƒë√£ ch∆°i / b·∫Øt ƒë·∫ßu<br><br><b>Gi·∫£i th√≠ch:</b> Ch∆°i b√≥ng l√† h√†nh ƒë·ªông d√†i (ƒëang x·∫£y ra) -> Were playing. Tr·ªùi m∆∞a ·∫≠p t·ªõi (h√†nh ƒë·ªông ng·∫Øn) -> Started.<br><br><b>D·ªãch c√¢u:</b> H·ªç ƒëang ch∆°i b√≥ng ƒë√° th√¨ tr·ªùi b·∫Øt ƒë·∫ßu m∆∞a.",
                  "isCorrect": true
                },
                {
                  "text": "played / was starting",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "were playing / was starting",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "played / started",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 4,
              "question": "While Mom _____ (cook), Dad _____ (clean) the floor.",
              "answerOptions": [
                {
                  "text": "was cooking / was cleaning",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was cooking / was cleaning: ƒëang n·∫•u / ƒëang lau<br>B. cooked / cleaned: ƒë√£ n·∫•u / ƒë√£ lau<br>C. was cooking / cleaned: ƒëang n·∫•u / ƒë√£ lau<br>D. cooked / was cleaning: ƒë√£ n·∫•u / ƒëang lau<br><br><b>Gi·∫£i th√≠ch:</b> T√¨nh hu·ªëng 3 (Song song): M·∫π n·∫•u ƒÉn, B·ªë lau nh√†. C·∫£ hai c√πng l√†m vi·ªác chƒÉm ch·ªâ, kh√¥ng ai c·∫Øt ngang ai -> D√πng Was V-ing cho c·∫£ hai.<br><br><b>D·ªãch c√¢u:</b> Trong khi m·∫π ƒëang n·∫•u ƒÉn th√¨ b·ªë ƒëang lau nh√†.",
                  "isCorrect": true
                },
                {
                  "text": "cooked / cleaned",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was cooking / cleaned",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "cooked / was cleaning",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 5,
              "question": "We _____ (have) dinner when Dad _____ (come) home.",
              "answerOptions": [
                {
                  "text": "were having / came",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. were having / came: ƒëang ƒÉn / v·ªÅ (chen ngang)<br>B. had / came: ƒë√£ ƒÉn / v·ªÅ<br>C. were having / was coming: ƒëang ƒÉn / ƒëang v·ªÅ<br>D. had / was coming: ƒë√£ ƒÉn / ƒëang v·ªÅ<br><br><b>Gi·∫£i th√≠ch:</b> ƒÇn t·ªëi l√† vi·ªác l√¢u (H√†nh ƒë·ªông d√†i) -> Were having. B·ªë m·ªü c·ª≠a v√†o nh√† (H√†nh ƒë·ªông ng·∫Øn) -> Came.<br><br><b>D·ªãch c√¢u:</b> Ch√∫ng t·ªõ ƒëang ƒÉn t·ªëi th√¨ b·ªë v·ªÅ nh√†.",
                  "isCorrect": true
                },
                {
                  "text": "had / came",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "were having / was coming",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "had / was coming",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 6,
              "question": "_____ you _____ (study) at 8 p.m yesterday?",
              "answerOptions": [
                {
                  "text": "Were / studying",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. Were / studying: C√≥ ƒëang h·ªçc kh√¥ng<br>B. Did / study: ƒê√£ h·ªçc ph·∫£i kh√¥ng<br>C. Was / studying: C√≥ ƒëang h·ªçc kh√¥ng<br>D. Do / study: C√≥ h·ªçc kh√¥ng<br><br><b>Gi·∫£i th√≠ch:</b> C√≥ gi·ªù c·ª• th·ªÉ 'at 8 p.m yesterday' -> D√πng Qu√° kh·ª© ti·∫øp di·ªÖn. Ch·ªß ng·ªØ 'You' ƒëi v·ªõi 'Were'.<br><br><b>D·ªãch c√¢u:</b> B·∫°n c√≥ ƒëang h·ªçc b√†i l√∫c 8 gi·ªù t·ªëi qua kh√¥ng?",
                  "isCorrect": true
                },
                {
                  "text": "Did / study",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Was / studying",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Do / study",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 7,
              "question": "He _____ (walk) down the street when he _____ (see) a cat.",
              "answerOptions": [
                {
                  "text": "was walking / saw",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was walking / saw: ƒëang ƒëi / nh√¨n th·∫•y<br>B. walked / saw: ƒë√£ ƒëi / ƒë√£ th·∫•y<br>C. was walking / seen: ƒëang ƒëi / (sai ng·ªØ ph√°p)<br>D. walked / was seeing: ƒë√£ ƒëi / ƒëang th·∫•y<br><br><b>Gi·∫£i th√≠ch:</b> ƒêi b·ªô l√† h√†nh ƒë·ªông d√†i -> Was walking. Nh√¨n th·∫•y con m√®o (b·∫•t ch·ª£t) l√† h√†nh ƒë·ªông ng·∫Øn -> Saw (qu√° kh·ª© c·ªßa see).<br><br><b>D·ªãch c√¢u:</b> Anh ·∫•y ƒëang ƒëi b·ªô xu·ªëng ph·ªë th√¨ nh√¨n th·∫•y m·ªôt con m√®o.",
                  "isCorrect": true
                },
                {
                  "text": "walked / saw",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was walking / seen",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "walked / was seeing",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 8,
              "question": "While the teacher _____ (talk), the students _____ (listen).",
              "answerOptions": [
                {
                  "text": "was talking / were listening",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was talking / were listening: ƒëang n√≥i / ƒëang nghe<br>B. talked / listened: ƒë√£ n√≥i / ƒë√£ nghe<br>C. was talking / listened: ƒëang n√≥i / ƒë√£ nghe<br>D. talked / were listening: ƒë√£ n√≥i / ƒëang nghe<br><br><b>Gi·∫£i th√≠ch:</b> Song song: C√¥ gi·∫£ng b√†i, tr√≤ nghe gi·∫£ng. Teacher (s·ªë √≠t) -> was talking. Students (s·ªë nhi·ªÅu) -> were listening.<br><br><b>D·ªãch c√¢u:</b> Trong khi gi√°o vi√™n ƒëang n√≥i th√¨ h·ªçc sinh ƒëang l·∫Øng nghe.",
                  "isCorrect": true
                },
                {
                  "text": "talked / listened",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was talking / listened",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "talked / were listening",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 9,
              "question": "I _____ (break) my leg while I _____ (ski).",
              "answerOptions": [
                {
                  "text": "broke / was skiing",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. broke / was skiing: b·ªã g√£y / ƒëang tr∆∞·ª£t tuy·∫øt<br>B. was breaking / skied: ƒëang g√£y / ƒë√£ tr∆∞·ª£t<br>C. broke / skied: ƒë√£ g√£y / ƒë√£ tr∆∞·ª£t<br>D. break / was skiing: g√£y / ƒëang tr∆∞·ª£t<br><br><b>Gi·∫£i th√≠ch:</b> Tr∆∞·ª£t tuy·∫øt l√† h√†nh ƒë·ªông d√†i (ƒëang tr∆∞·ª£t bon bon) -> Was skiing. G√£y ch√¢n l√† h√†nh ƒë·ªông ng·∫Øn (R·∫Øc! X·∫£y ra 1 c√°i l√† xong) -> Broke. Ch√∫ √Ω: 'While' ƒë·ª©ng tr∆∞·ªõc h√†nh ƒë·ªông d√†i.<br><br><b>D·ªãch c√¢u:</b> T·ªõ b·ªã g√£y ch√¢n trong khi ƒëang tr∆∞·ª£t tuy·∫øt.",
                  "isCorrect": true
                },
                {
                  "text": "was breaking / skied",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "broke / skied",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "break / was skiing",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 10,
              "question": "She _____ (wash) the dishes when she _____ (drop) a plate.",
              "answerOptions": [
                {
                  "text": "was washing / dropped",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was washing / dropped: ƒëang r·ª≠a / l√†m r∆°i<br>B. washed / dropped: ƒë√£ r·ª≠a / l√†m r∆°i<br>C. was washing / was dropping: ƒëang r·ª≠a / ƒëang r∆°i<br>D. washed / was dropping: ƒë√£ r·ª≠a / ƒëang r∆°i<br><br><b>Gi·∫£i th√≠ch:</b> R·ª≠a b√°t l√† h√†nh ƒë·ªông d√†i -> Was washing. L√†m r∆°i ƒëƒ©a l√† tai n·∫°n b·∫•t ng·ªù (ng·∫Øn) -> Dropped.<br><br><b>D·ªãch c√¢u:</b> C√¥ ·∫•y ƒëang r·ª≠a b√°t th√¨ l√†m r∆°i m·ªôt c√°i ƒëƒ©a.",
                  "isCorrect": true
                },
                {
                  "text": "washed / dropped",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was washing / was dropping",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "washed / was dropping",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 11,
              "question": "Tom _____ (play) video games while Jerry _____ (read) comics.",
              "answerOptions": [
                {
                  "text": "was playing / was reading",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was playing / was reading: ƒëang ch∆°i / ƒëang ƒë·ªçc<br>B. played / read: ƒë√£ ch∆°i / ƒë√£ ƒë·ªçc<br>C. was playing / read: ƒëang ch∆°i / ƒë√£ ƒë·ªçc<br>D. played / was reading: ƒë√£ ch∆°i / ƒëang ƒë·ªçc<br><br><b>Gi·∫£i th√≠ch:</b> Song song: Tom ch∆°i game, Jerry ƒë·ªçc truy·ªán. C·∫£ hai ƒë·ªÅu d√πng Was + V-ing.<br><br><b>D·ªãch c√¢u:</b> Tom ƒëang ch∆°i ƒëi·ªán t·ª≠ trong khi Jerry ƒëang ƒë·ªçc truy·ªán tranh.",
                  "isCorrect": true
                },
                {
                  "text": "played / read",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was playing / read",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "played / was reading",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 12,
              "question": "What _____ you _____ (do) when I called you?",
              "answerOptions": [
                {
                  "text": "were / doing",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. were / doing: ƒëang l√†m (g√¨)<br>B. did / do: ƒë√£ l√†m (g√¨)<br>C. was / doing: ƒëang l√†m (g√¨)<br>D. do / do: l√†m (g√¨)<br><br><b>Gi·∫£i th√≠ch:</b> C√¢u h·ªèi v·ªÅ h√†nh ƒë·ªông ƒëang x·∫£y ra khi c√≥ ng∆∞·ªùi g·ªçi. You -> Were.<br><br><b>D·ªãch c√¢u:</b> B·∫°n ƒëang l√†m c√°i g√¨ khi t·ªõ g·ªçi v·∫≠y?",
                  "isCorrect": true
                },
                {
                  "text": "did / do",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was / doing",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "do / do",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 13,
              "question": "It _____ (not/rain) when we _____ (go) out.",
              "answerOptions": [
                {
                  "text": "wasn't raining / went",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. wasn't raining / went: kh√¥ng ƒëang m∆∞a / ƒë√£ ƒëi (ra ngo√†i)<br>B. didn't rain / went: kh√¥ng m∆∞a / ƒë√£ ƒëi<br>C. wasn't raining / go: kh√¥ng ƒëang m∆∞a / ƒëi<br>D. didn't rain / were going: kh√¥ng m∆∞a / ƒëang ƒëi<br><br><b>Gi·∫£i th√≠ch:</b> H√†nh ƒë·ªông m∆∞a l√† 'n·ªÅn' (tr·ªùi kh√¥ng ƒëang m∆∞a) -> Wasn't raining. H√†nh ƒë·ªông ƒëi ra ngo√†i l√† s·ª± ki·ªán ch√≠nh (ng·∫Øn) -> Went. L∆∞u √Ω: It -> Was.<br><br><b>D·ªãch c√¢u:</b> Tr·ªùi kh√¥ng ƒëang m∆∞a khi ch√∫ng t·ªõ ƒëi ra ngo√†i.",
                  "isCorrect": true
                },
                {
                  "text": "didn't rain / went",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "wasn't raining / go",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "didn't rain / were going",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 14,
              "question": "My dad _____ (sleep) on the sofa while I _____ (do) homework.",
              "answerOptions": [
                {
                  "text": "was sleeping / was doing",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was sleeping / was doing: ƒëang ng·ªß / ƒëang l√†m<br>B. slept / did: ƒë√£ ng·ªß / ƒë√£ l√†m<br>C. was sleeping / did: ƒëang ng·ªß / ƒë√£ l√†m<br>D. slept / was doing: ƒë√£ ng·ªß / ƒëang l√†m<br><br><b>Gi·∫£i th√≠ch:</b> Song song: B·ªë ng·ªß, con l√†m b√†i. B·ªë (s·ªë √≠t) -> Was sleeping. Con (s·ªë √≠t) -> Was doing.<br><br><b>D·ªãch c√¢u:</b> B·ªë t·ªõ ƒëang ng·ªß tr√™n gh·∫ø sofa trong khi t·ªõ ƒëang l√†m b√†i t·∫≠p.",
                  "isCorrect": true
                },
                {
                  "text": "slept / did",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was sleeping / did",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "slept / was doing",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 15,
              "question": "We _____ (sit) in the garden when we _____ (hear) a noise.",
              "answerOptions": [
                {
                  "text": "were sitting / heard",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. were sitting / heard: ƒëang ng·ªìi / nghe th·∫•y<br>B. sat / heard: ƒë√£ ng·ªìi / ƒë√£ nghe<br>C. were sitting / hear: ƒëang ng·ªìi / nghe<br>D. sat / were hearing: ƒë√£ ng·ªìi / ƒëang nghe<br><br><b>Gi·∫£i th√≠ch:</b> Ng·ªìi ch∆°i l√† h√†nh ƒë·ªông d√†i -> Were sitting. Nghe th·∫•y ti·∫øng ƒë·ªông (b·∫•t ng·ªù) l√† h√†nh ƒë·ªông ng·∫Øn -> Heard (qu√° kh·ª© c·ªßa hear).<br><br><b>D·ªãch c√¢u:</b> Ch√∫ng t·ªõ ƒëang ng·ªìi trong v∆∞·ªùn th√¨ nghe th·∫•y m·ªôt ti·∫øng ƒë·ªông.",
                  "isCorrect": true
                },
                {
                  "text": "sat / heard",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "were sitting / hear",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "sat / were hearing",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 16,
              "question": "I _____ (lose) my keys while I _____ (run) in the park.",
              "answerOptions": [
                {
                  "text": "lost / was running",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. lost / was running: l√†m m·∫•t / ƒëang ch·∫°y<br>B. was losing / ran: ƒëang m·∫•t / ƒë√£ ch·∫°y<br>C. lost / ran: ƒë√£ m·∫•t / ƒë√£ ch·∫°y<br>D. lose / was running: m·∫•t / ƒëang ch·∫°y<br><br><b>Gi·∫£i th√≠ch:</b> Ch·∫°y b·ªô l√† h√†nh ƒë·ªông d√†i (ƒëang x·∫£y ra) -> Was running. L√†m r∆°i ch√¨a kh√≥a (ng·∫Øn, x·∫£y ra c√°i v√®o) -> Lost (qu√° kh·ª© c·ªßa lose).<br><br><b>D·ªãch c√¢u:</b> T·ªõ l√†m m·∫•t ch√¨a kh√≥a trong khi ƒëang ch·∫°y b·ªô trong c√¥ng vi√™n.",
                  "isCorrect": true
                },
                {
                  "text": "was losing / ran",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "lost / ran",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "lose / was running",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 17,
              "question": "_____ they _____ (watch) TV at 9 p.m?",
              "answerOptions": [
                {
                  "text": "Were / watching",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. Were / watching: C√≥ ƒëang xem kh√¥ng<br>B. Did / watch: ƒê√£ xem ph·∫£i kh√¥ng<br>C. Was / watching: C√≥ ƒëang xem kh√¥ng<br>D. Do / watch: C√≥ xem kh√¥ng<br><br><b>Gi·∫£i th√≠ch:</b> Gi·ªù c·ª• th·ªÉ 9 p.m -> Qu√° kh·ª© ti·∫øp di·ªÖn. They (s·ªë nhi·ªÅu) -> Were.<br><br><b>D·ªãch c√¢u:</b> H·ªç c√≥ ƒëang xem TV l√∫c 9 gi·ªù t·ªëi kh√¥ng?",
                  "isCorrect": true
                },
                {
                  "text": "Did / watch",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Was / watching",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Do / watch",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 18,
              "question": "The electricity _____ (go) out while I _____ (cook).",
              "answerOptions": [
                {
                  "text": "went / was cooking",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. went / was cooking: t·∫Øt (m·∫•t ƒëi·ªán) / ƒëang n·∫•u<br>B. was going / cooked: ƒëang t·∫Øt / ƒë√£ n·∫•u<br>C. went / cooked: t·∫Øt / ƒë√£ n·∫•u<br>D. goes / was cooking: t·∫Øt / ƒëang n·∫•u<br><br><b>Gi·∫£i th√≠ch:</b> N·∫•u ƒÉn l√† h√†nh ƒë·ªông d√†i -> Was cooking. M·∫•t ƒëi·ªán (B·ª•p!) l√† h√†nh ƒë·ªông ng·∫Øn -> Went out (qu√° kh·ª© c·ªßa go out).<br><br><b>D·ªãch c√¢u:</b> ƒêi·ªán b·ªã m·∫•t trong khi t·ªõ ƒëang n·∫•u ƒÉn.",
                  "isCorrect": true
                },
                {
                  "text": "was going / cooked",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "went / cooked",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "goes / was cooking",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 19,
              "question": "She _____ (not/study) when I _____ (visit) her.",
              "answerOptions": [
                {
                  "text": "wasn't studying / visited",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. wasn't studying / visited: kh√¥ng ƒëang h·ªçc / ƒë√£ ƒë·∫øn thƒÉm<br>B. didn't study / visited: kh√¥ng h·ªçc / ƒë√£ ƒë·∫øn thƒÉm<br>C. wasn't studying / visit: kh√¥ng ƒëang h·ªçc / ƒë·∫øn thƒÉm<br>D. didn't study / was visiting: kh√¥ng h·ªçc / ƒëang ƒë·∫øn thƒÉm<br><br><b>Gi·∫£i th√≠ch:</b> L√∫c t·ªõ ƒë·∫øn thƒÉm (ng·∫Øn -> visited), c√¥ ·∫•y ƒëang l√†m g√¨ ƒë√≥ ch·ª© KH√îNG ph·∫£i ƒëang h·ªçc (h√†nh ƒë·ªông d√†i ·ªü th·ªÉ ph·ªß ƒë·ªãnh -> wasn't studying).<br><br><b>D·ªãch c√¢u:</b> C√¥ ·∫•y kh√¥ng ƒëang h·ªçc b√†i khi t·ªõ ƒë·∫øn thƒÉm c√¥ ·∫•y.",
                  "isCorrect": true
                },
                {
                  "text": "didn't study / visited",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "wasn't studying / visit",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "didn't study / was visiting",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 20,
              "question": "While we _____ (drive) to the zoo, the car _____ (stop).",
              "answerOptions": [
                {
                  "text": "were driving / stopped",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. were driving / stopped: ƒëang l√°i xe / d·ª´ng l·∫°i<br>B. drove / stopped: ƒë√£ l√°i / d·ª´ng l·∫°i<br>C. were driving / was stopping: ƒëang l√°i / ƒëang d·ª´ng<br>D. drove / was stopping: ƒë√£ l√°i / ƒëang d·ª´ng<br><br><b>Gi·∫£i th√≠ch:</b> L√°i xe l√† h√†nh ƒë·ªông d√†i -> Were driving. Xe h·ªèng/d·ª´ng l·∫°i (b·∫•t ng·ªù) l√† h√†nh ƒë·ªông ng·∫Øn -> Stopped.<br><br><b>D·ªãch c√¢u:</b> Trong khi ch√∫ng t·ªõ ƒëang l√°i xe ƒë·∫øn s·ªü th√∫ th√¨ xe d·ª´ng l·∫°i.",
                  "isCorrect": true
                },
                {
                  "text": "drove / stopped",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "were driving / was stopping",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "drove / was stopping",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 21,
              "question": "Who _____ you _____ (talk) to at 7 a.m?",
              "answerOptions": [
                {
                  "text": "were / talking",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. were / talking: ƒëang n√≥i chuy·ªán<br>B. did / talk: ƒë√£ n√≥i chuy·ªán<br>C. was / talking: ƒëang n√≥i chuy·ªán<br>D. do / talk: n√≥i chuy·ªán<br><br><b>Gi·∫£i th√≠ch:</b> Gi·ªù c·ª• th·ªÉ 7 a.m -> Qu√° kh·ª© ti·∫øp di·ªÖn. You -> Were.<br><br><b>D·ªãch c√¢u:</b> B·∫°n ƒëang n√≥i chuy·ªán v·ªõi ai l√∫c 7 gi·ªù s√°ng v·∫≠y?",
                  "isCorrect": true
                },
                {
                  "text": "did / talk",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was / talking",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "do / talk",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 22,
              "question": "While I _____ (brush) my teeth, my sister _____ (comb) her hair.",
              "answerOptions": [
                {
                  "text": "was brushing / was combing",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was brushing / was combing: ƒëang ƒë√°nh rƒÉng / ƒëang ch·∫£i t√≥c<br>B. brushed / combed: ƒë√£ ƒë√°nh rƒÉng / ƒë√£ ch·∫£i t√≥c<br>C. was brushing / combed: ƒëang ƒë√°nh rƒÉng / ƒë√£ ch·∫£i t√≥c<br>D. brushed / was combing: ƒë√£ ƒë√°nh rƒÉng / ƒëang ch·∫£i t√≥c<br><br><b>Gi·∫£i th√≠ch:</b> Song song: M·ªói ng∆∞·ªùi m·ªôt vi·ªác v·ªá sinh c√° nh√¢n bu·ªïi s√°ng. C·∫£ hai ƒë·ªÅu d√πng Was V-ing.<br><br><b>D·ªãch c√¢u:</b> Trong khi t·ªõ ƒëang ƒë√°nh rƒÉng th√¨ em t·ªõ ƒëang ch·∫£i t√≥c.",
                  "isCorrect": true
                },
                {
                  "text": "brushed / combed",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was brushing / combed",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "brushed / was combing",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 23,
              "question": "The birds _____ (sing) when I _____ (wake) up.",
              "answerOptions": [
                {
                  "text": "were singing / woke",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. were singing / woke: ƒëang h√≥t / th·ª©c d·∫≠y<br>B. sang / woke: ƒë√£ h√≥t / th·ª©c d·∫≠y<br>C. were singing / was waking: ƒëang h√≥t / ƒëang th·ª©c d·∫≠y<br>D. sang / was waking: ƒë√£ h√≥t / ƒëang th·ª©c d·∫≠y<br><br><b>Gi·∫£i th√≠ch:</b> Chim h√≥t l√† h√†nh ƒë·ªông d√†i (n·ªÅn c·∫£nh). T·ªõ th·ª©c d·∫≠y (m·ªü m·∫Øt) l√† h√†nh ƒë·ªông ng·∫Øn -> Woke up (qu√° kh·ª© c·ªßa wake).<br><br><b>D·ªãch c√¢u:</b> Nh·ªØng ch√∫ chim ƒëang h√≥t khi t·ªõ th·ª©c d·∫≠y.",
                  "isCorrect": true
                },
                {
                  "text": "sang / woke",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "were singing / was waking",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "sang / was waking",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 24,
              "question": "_____ you _____ (listen) when the teacher called your name?",
              "answerOptions": [
                {
                  "text": "Were / listening",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. Were / listening: C√≥ ƒëang nghe kh√¥ng<br>B. Did / listen: ƒê√£ nghe ph·∫£i kh√¥ng<br>C. Was / listening: C√≥ ƒëang nghe kh√¥ng<br>D. Do / listen: C√≥ nghe kh√¥ng<br><br><b>Gi·∫£i th√≠ch:</b> 'L√∫c c√¥ g·ªçi t√™n' l√† h√†nh ƒë·ªông ng·∫Øn chen ngang. H·ªèi: L√∫c ƒë√≥ con c√≥ ƒëang nghe gi·∫£ng (d√†i) kh√¥ng? You -> Were.<br><br><b>D·ªãch c√¢u:</b> Em c√≥ ƒëang nghe gi·∫£ng khi c√¥ g·ªçi t√™n em kh√¥ng?",
                  "isCorrect": true
                },
                {
                  "text": "Did / listen",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Was / listening",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Do / listen",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 25,
              "question": "My phone _____ (ring) while I _____ (have) a bath.",
              "answerOptions": [
                {
                  "text": "rang / was having",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. rang / was having: reo / ƒëang t·∫Øm<br>B. was ringing / had: ƒëang reo / ƒë√£ t·∫Øm<br>C. rang / had: ƒë√£ reo / ƒë√£ t·∫Øm<br>D. ring / was having: reo / ƒëang t·∫Øm<br><br><b>Gi·∫£i th√≠ch:</b> T·∫Øm l√† h√†nh ƒë·ªông d√†i (ƒëang x·∫£y ra) -> Was having. ƒêi·ªán tho·∫°i reo (chen ngang) -> Rang.<br><br><b>D·ªãch c√¢u:</b> ƒêi·ªán tho·∫°i c·ªßa t·ªõ reo trong khi t·ªõ ƒëang t·∫Øm.",
                  "isCorrect": true
                },
                {
                  "text": "was ringing / had",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "rang / had",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "ring / was having",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 26,
              "question": "We _____ (not/play) video games at 4 p.m.",
              "answerOptions": [
                {
                  "text": "weren't playing",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. weren't playing: kh√¥ng ƒëang ch∆°i<br>B. didn't play: kh√¥ng ch∆°i<br>C. wasn't playing: kh√¥ng ƒëang ch∆°i<br>D. don't play: kh√¥ng ch∆°i<br><br><b>Gi·∫£i th√≠ch:</b> Gi·ªù c·ª• th·ªÉ 4 p.m -> Qu√° kh·ª© ti·∫øp di·ªÖn. We (s·ªë nhi·ªÅu) -> Weren't playing.<br><br><b>D·ªãch c√¢u:</b> Ch√∫ng t·ªõ kh√¥ng ƒëang ch∆°i ƒëi·ªán t·ª≠ l√∫c 4 gi·ªù chi·ªÅu.",
                  "isCorrect": true
                },
                {
                  "text": "didn't play",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "wasn't playing",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "don't play",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 27,
              "question": "It _____ (start) to snow while we _____ (ski).",
              "answerOptions": [
                {
                  "text": "started / were skiing",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. started / were skiing: b·∫Øt ƒë·∫ßu / ƒëang tr∆∞·ª£t tuy·∫øt<br>B. was starting / skied: ƒëang b·∫Øt ƒë·∫ßu / ƒë√£ tr∆∞·ª£t<br>C. started / skied: b·∫Øt ƒë·∫ßu / ƒë√£ tr∆∞·ª£t<br>D. starts / was skiing: b·∫Øt ƒë·∫ßu / ƒëang tr∆∞·ª£t<br><br><b>Gi·∫£i th√≠ch:</b> Tr∆∞·ª£t tuy·∫øt l√† h√†nh ƒë·ªông d√†i -> Were skiing. Tuy·∫øt b·∫Øt ƒë·∫ßu r∆°i (s·ª± thay ƒë·ªïi th·ªùi ti·∫øt ·∫≠p ƒë·∫øn) -> Started.<br><br><b>D·ªãch c√¢u:</b> Tr·ªùi b·∫Øt ƒë·∫ßu c√≥ tuy·∫øt khi ch√∫ng t·ªõ ƒëang tr∆∞·ª£t tuy·∫øt.",
                  "isCorrect": true
                },
                {
                  "text": "was starting / skied",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "started / skied",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "starts / was skiing",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 28,
              "question": "_____ James _____ (visit) you yesterday afternoon?",
              "answerOptions": [
                {
                  "text": "Did / visit",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. Did / visit: ƒê√£ thƒÉm ph·∫£i kh√¥ng<br>B. Was / visiting: ƒê√£ ƒëang thƒÉm ph·∫£i kh√¥ng<br>C. Were / visiting: ƒê√£ ƒëang thƒÉm ph·∫£i kh√¥ng<br>D. Do / visit: C√≥ thƒÉm kh√¥ng<br><br><b>Gi·∫£i th√≠ch:</b> C√¢u n√†y c√≥ 'yesterday afternoon' nh∆∞ng KH√îNG c√≥ gi·ªù c·ª• th·ªÉ (nh∆∞ at 2 p.m). H√†nh ƒë·ªông 'thƒÉm' th∆∞·ªùng ƒë∆∞·ª£c xem l√† m·ªôt s·ª± ki·ªán ƒë√£ ho√†n t·∫•t trong qu√° kh·ª© -> D√πng Qu√° kh·ª© ƒë∆°n (Did visit) l√† t·ª± nhi√™n nh·∫•t. Tuy nhi√™n, n·∫øu mu·ªën nh·∫•n m·∫°nh 'su·ªët c·∫£ bu·ªïi chi·ªÅu qua anh ·∫•y c√≥ ƒëang ·ªü ƒë√≥ kh√¥ng' th√¨ d√πng ti·∫øp di·ªÖn. Nh∆∞ng v·ªõi ƒë·ªông t·ª´ 'visit' v√† tr·∫°ng t·ª´ chung chung, Qu√° kh·ª© ƒë∆°n ph·ªï bi·∫øn h∆°n. Trong b√†i t·∫≠p Mix, ta c·∫ßn ph√¢n bi·ªát: Gi·ªù c·ª• th·ªÉ -> Ti·∫øp di·ªÖn; Bu·ªïi chung chung -> ƒê∆°n.<br><br><b>D·ªãch c√¢u:</b> James c√≥ ƒë·∫øn thƒÉm b·∫°n chi·ªÅu h√¥m qua kh√¥ng?",
                  "isCorrect": true
                },
                {
                  "text": "Was / visiting",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Were / visiting",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "Do / visit",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 29,
              "question": "While I _____ (wait) for the bus, I _____ (see) my teacher.",
              "answerOptions": [
                {
                  "text": "was waiting / saw",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. was waiting / saw: ƒëang ch·ªù / nh√¨n th·∫•y<br>B. waited / saw: ƒë√£ ch·ªù / ƒë√£ th·∫•y<br>C. was waiting / was seeing: ƒëang ch·ªù / ƒëang th·∫•y<br>D. waited / was seeing: ƒë√£ ch·ªù / ƒëang th·∫•y<br><br><b>Gi·∫£i th√≠ch:</b> Ch·ªù xe bu√Ωt l√† h√†nh ƒë·ªông d√†i -> Was waiting. Nh√¨n th·∫•y c√¥ gi√°o (ng·∫Øn) -> Saw.<br><br><b>D·ªãch c√¢u:</b> Trong khi t·ªõ ƒëang ch·ªù xe bu√Ωt th√¨ t·ªõ nh√¨n th·∫•y gi√°o vi√™n c·ªßa t·ªõ.",
                  "isCorrect": true
                },
                {
                  "text": "waited / saw",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "was waiting / was seeing",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "waited / was seeing",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 30,
              "question": "We _____ (not/sleep) when the fire alarm _____ (go) off.",
              "answerOptions": [
                {
                  "text": "weren't sleeping / went",
                  "rationale": "<b>D·ªãch chi ti·∫øt:</b><br>A. weren't sleeping / went: kh√¥ng ƒëang ng·ªß / reo l√™n<br>B. didn't sleep / went: kh√¥ng ng·ªß / reo l√™n<br>C. weren't sleeping / was going: kh√¥ng ƒëang ng·ªß / ƒëang reo<br>D. didn't sleep / was going: kh√¥ng ng·ªß / ƒëang reo<br><br><b>Gi·∫£i th√≠ch:</b> T√¨nh hu·ªëng ph·ªß ƒë·ªãnh c·ªßa h√†nh ƒë·ªông d√†i: Ch√∫ng t·ªõ ƒëang KH√îNG ng·ªß (t·ª©c l√† ƒëang th·ª©c/l√†m g√¨ ƒë√≥) -> Weren't sleeping. Chu√¥ng b√°o ch√°y reo (ng·∫Øn) -> Went off.<br><br><b>D·ªãch c√¢u:</b> Ch√∫ng t·ªõ kh√¥ng ƒëang ng·ªß khi chu√¥ng b√°o ch√°y reo l√™n.",
                  "isCorrect": true
                },
                {
                  "text": "didn't sleep / went",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "weren't sleeping / was going",
                  "rationale": "",
                  "isCorrect": false
                },
                {
                  "text": "didn't sleep / was going",
                  "rationale": "",
                  "isCorrect": false
                }
              ]
            }
          ]
        };

        // Populate correct rationales to incorrect options if missing from JSON source for display purposes
        // Logic: The provided JSON has the detailed rationale on the 'correct' option. We need to show this regardless of what the user picks.
        quizData.questions.forEach(q => {
            const correctOpt = q.answerOptions.find(opt => opt.isCorrect);
            if(correctOpt) {
                const commonRationale = correctOpt.rationale;
                q.answerOptions.forEach(opt => {
                   if(!opt.rationale || opt.rationale.trim() === "") {
                       opt.rationale = commonRationale; // Fallback to show the correct explanation even if wrong answer selected
                   }
                });
            }
        });

        // --- AUDIO SYSTEM (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // Ding sound (High pitch sine wave)
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.5);
            } else {
                // Wrong sound (Low pitch sawtooth)
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- RENDER LOGIC ---
        let correctCount = 0;
        let answeredCount = 0;

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            
            quizData.questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.id = `q-card-${index}`;

                // Question Header
                const qNum = document.createElement('div');
                qNum.className = 'question-number';
                qNum.textContent = `C√¢u ${q.questionNumber}`;
                
                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.textContent = q.question.replace(/_____/g, "_______"); // Make blanks standardized

                // Options Grid
                const grid = document.createElement('div');
                grid.className = 'options-grid';

                q.answerOptions.forEach((opt, optIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerHTML = `${String.fromCharCode(65 + optIndex)}. ${opt.text}`;
                    btn.onclick = () => checkAnswer(index, optIndex, opt.isCorrect, btn);
                    grid.appendChild(btn);
                });

                // Explanation Box
                const expl = document.createElement('div');
                expl.className = 'explanation-box';
                expl.id = `expl-${index}`;
                
                // Get the rationale (usually attached to the correct answer in this dataset)
                const rationaleText = q.answerOptions.find(o => o.isCorrect)?.rationale || "ƒêang c·∫≠p nh·∫≠t gi·∫£i th√≠ch...";
                
                expl.innerHTML = `
                    <div class="explanation-header">
                        <span>üí°</span> Ms Mai An gi·∫£i th√≠ch:
                    </div>
                    <div class="explanation-content">${rationaleText}</div>
                `;

                card.appendChild(qNum);
                card.appendChild(qText);
                card.appendChild(grid);
                card.appendChild(expl);
                container.appendChild(card);
            });
            
            document.getElementById('final-score').textContent = `0/${quizData.questions.length}`;
        }

        // --- INTERACTION LOGIC ---
        function checkAnswer(qIndex, optIndex, isCorrect, btnElement) {
            const card = document.getElementById(`q-card-${qIndex}`);
            const buttons = card.querySelectorAll('.option-btn');
            const explBox = document.getElementById(`expl-${qIndex}`);

            // Prevent re-answering
            if (card.dataset.answered) return;
            card.dataset.answered = "true";
            answeredCount++;

            // Highlight Logic
            if (isCorrect) {
                btnElement.classList.add('correct');
                playSound('correct');
                correctCount++;
                triggerConfetti(btnElement);
            } else {
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight the correct one automatically
                buttons.forEach(b => {
                    // Find the button that corresponds to the correct answer
                    // We need to match the text or index. 
                    // Since we passed optIndex, we can find the correct data index.
                    const qData = quizData.questions[qIndex];
                    const btnText = b.innerText.substring(3); // Remove "A. "
                    const correctOptText = qData.answerOptions.find(o => o.isCorrect).text;
                    if(btnText === correctOptText) {
                        b.classList.add('correct');
                    }
                });
            }

            // Disable all buttons in this card
            buttons.forEach(b => b.disabled = true);

            // Show explanation
            explBox.style.display = 'block';
        }

        // --- MODAL & SCORE ---
        function showFinalScore() {
            const modal = document.getElementById('scoreModal');
            const scoreText = document.getElementById('final-score');
            const praiseText = document.getElementById('praise-text');
            const total = quizData.questions.length;

            scoreText.textContent = `${correctCount}/${total}`;

            const percentage = (correctCount / total) * 100;
            if (percentage === 100) {
                praiseText.textContent = "Xu·∫•t s·∫Øc! Em l√† thi√™n t√†i ng·ªØ ph√°p! üåü";
                fullScreenConfetti();
            } else if (percentage >= 80) {
                praiseText.textContent = "Gi·ªèi l·∫Øm! Em n·∫Øm r·∫•t ch·∫Øc b√†i! üéâ";
                fullScreenConfetti();
            } else if (percentage >= 50) {
                praiseText.textContent = "Kh√° t·ªët! C·ªë g·∫Øng luy·ªán th√™m m·ªôt ch√∫t n·ªØa nh√©! üí™";
            } else {
                praiseText.textContent = "ƒê·ª´ng bu·ªìn nh√©! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n! ‚ù§Ô∏è";
            }

            modal.style.display = 'block';
        }

        function closeModal() {
            // Reload page to reset or just close modal
             location.reload();
        }

        // --- CONFETTI EFFECTS (Simplified) ---
        // Mini confetti burst on button
        function triggerConfetti(element) {
            const rect = element.getBoundingClientRect();
            const center = {
                x: rect.left + rect.width / 2,
                y: rect.top + rect.height / 2
            };
            createParticles(center.x, center.y);
        }

        // Canvas Confetti Logic
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];

        function createParticles(x, y) {
            const colors = ['#ff4757', '#2ed573', '#ffa502', '#3742fa', '#8854C0'];
            for (let i = 0; i < 30; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 100,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 5 + 2
                });
            }
        }

        function fullScreenConfetti() {
            createParticles(window.innerWidth / 2, window.innerHeight / 2);
            setInterval(() => {
                createParticles(Math.random() * window.innerWidth, Math.random() * window.innerHeight / 2);
            }, 200);
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.2; // Gravity
                p.life--;
                p.size *= 0.95; // Shrink

                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                if (p.life <= 0) {
                    particles.splice(i, 1);
                    i--;
                }
            }
            requestAnimationFrame(animateConfetti);
        }
        
        // Start animation loop
        animateConfetti();

        // Handle resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Initialize
        renderQuiz();

    </script>
</body>
</html>
