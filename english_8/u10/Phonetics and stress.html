<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·∫Øc nghi·ªám Ng·ªØ √¢m & Tr·ªçng √¢m - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --success-green: #00D26A;
            --error-red: #FF4757;
            --bg-color: #F0F4F8;
            --card-bg: #FFFFFF;
            --text-main: #2C3E50;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #E0EAFC;
            background-image: repeating-linear-gradient(45deg, #E0EAFC 0px, #E0EAFC 20px, #CFDEF3 20px, #CFDEF3 40px);
            margin: 0;
            padding: 20px;
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header-container {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px 40px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 4px solid var(--primary-purple);
            max-width: 800px;
            width: 90%;
            position: relative;
            overflow: hidden;
        }

        .header-title {
            color: var(--primary-purple);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 2rem;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .header-subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-top: 5px;
            font-weight: 700;
        }

        .teacher-badge {
            display: inline-block;
            background: var(--primary-teal);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-top: 10px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* Quiz Container */
        .quiz-container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* Question Card */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.15);
            position: relative;
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }

        .question-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
        }

        .q-number {
            background: var(--primary-purple);
            color: white;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1.2rem;
            flex-shrink: 0;
            box-shadow: 0 4px 0 #6a3da1;
        }

        .q-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.5;
            color: #34495e;
        }

        .q-text u {
            text-decoration: none;
            border-bottom: 3px solid var(--primary-purple);
            padding-bottom: 2px;
            color: var(--primary-purple);
            font-weight: 800;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 3px solid #e0e0e0;
            padding: 15px 20px;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: #555;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px 0 #d0d0d0;
            text-align: left;
            position: relative;
            outline: none;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(5px);
            box-shadow: 0 0 0 #d0d0d0;
        }

        /* Correct/Wrong States */
        .option-btn.correct {
            background: var(--success-green);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 5px 0 #008f47;
        }

        .option-btn.wrong {
            background: var(--error-red);
            color: white;
            border-color: #e03e4d;
            box-shadow: 0 5px 0 #c23642;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 20px;
            background: #f0fdf4;
            border: 2px solid var(--success-green);
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-box.wrong-bg {
            background: #fff5f5;
            border-color: var(--error-red);
        }

        .exp-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 800;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .exp-header.correct-text { color: var(--success-green); }
        .exp-header.wrong-text { color: var(--error-red); }

        .exp-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #444;
            white-space: pre-wrap; /* Preserve newlines from JSON */
        }
        
        .exp-content b, .exp-content strong {
            color: var(--primary-purple);
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Footer / Submit */
        .footer-controls {
            margin-top: 40px;
            text-align: center;
            padding-bottom: 50px;
            width: 100%;
        }

        .btn-submit {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #009e82;
            transition: all 0.2s;
            font-family: 'Quicksand', sans-serif;
            text-transform: uppercase;
        }

        .btn-submit:hover {
            transform: scale(1.05);
            background: #00dcb7;
        }

        .btn-submit:active {
            transform: scale(0.95) translateY(8px);
            box-shadow: 0 0 0;
        }
        
        /* Score Popup */
        .score-popup {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .score-popup.active {
            visibility: visible;
            opacity: 1;
        }
        
        .score-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 8px solid var(--primary-purple);
            animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .score-big {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-purple);
            margin: 10px 0;
        }
        
        .score-msg {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 20px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .q-text { font-size: 1.1rem; }
            .header-title { font-size: 1.5rem; }
            .option-btn { font-size: 1rem; padding: 12px 15px; }
        }
    </style>
</head>
<body>

    <div class="header-container">
        <h1 class="header-title">Tr·∫Øc nghi·ªám Ng·ªØ √¢m & Tr·ªçng √¢m</h1>
        <div class="header-subtitle">Unit Communication</div>
        <div class="teacher-badge">üë©‚Äçüè´ Gi√°o vi√™n: Ms Mai An ULIS</div>
    </div>

    <div class="quiz-container" id="quiz-container">
        <!-- Questions will be injected here via JS -->
    </div>

    <div class="footer-controls">
        <button class="btn-submit" onclick="finishQuiz()">N·ªôp B√†i</button>
    </div>
    
    <div class="score-popup" id="score-popup">
        <div class="score-card">
            <h2 style="color: var(--primary-teal); margin:0;">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-big" id="final-score">0/20</div>
            <p class="score-msg" id="score-message">L√†m t·ªët l·∫Øm!</p>
            <button class="btn-submit" onclick="closePopup()">Xem l·∫°i b√†i</button>
        </div>
    </div>

    <!-- Audio Elements (Short Base64 Placeholders or simple beeps logic preferred for single file, 
         but here using HTML5 Audio with dummy src for structure, replaced by JS synth or reliable CDNs) -->
    <!-- Using reliable short sound effects from a CDN for gamification -->
    <audio id="sound-correct" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
    <audio id="sound-finish" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>

<script>
    // DATA SOURCE
    const quizData = {
      "questions": [
        {
          "questionNumber": 1,
          "question": "Choose the word whose underlined part (a) is pronounced differently: A. l<u>a</u>nguage B. cultur<u>a</u>l C. inter<u>a</u>ct D. l<u>a</u>ndline",
          "answerOptions": [
            { "text": "cultural", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'a'.\n- A. language /Ààl**√¶**≈ã…°w…™d í/ (n): ng√¥n ng·ªØ -> √Çm /√¶/\n- B. cultural /Ààk ålt É…ôr**…ô**l/ (adj): thu·ªôc vƒÉn h√≥a -> √Çm /…ô/ (√¢m l∆∞·ªõt/schwa)\n- C. interact /Àå…™nt…ôrÀà**√¶**kt/ (v): t∆∞∆°ng t√°c -> √Çm /√¶/\n- D. landline /Ààl**√¶**ndla…™n/ (n): ƒëi·ªán tho·∫°i c·ªë ƒë·ªãnh -> √Çm /√¶/\n=> ƒê√°p √°n B ph√°t √¢m l√† /…ô/, c√°c t·ª´ c√≤n l·∫°i l√† /√¶/.", "isCorrect": true },
            { "text": "language", "isCorrect": false },
            { "text": "interact", "isCorrect": false },
            { "text": "landline", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 2,
          "question": "Choose the word whose underlined part (i) is pronounced differently: A. multimed<u>i</u>a B. landl<u>i</u>ne C. v<u>i</u>deo D. commun<u>i</u>cate",
          "answerOptions": [
            { "text": "landline", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'i'.\n- A. multimedia /Àåm åltiÀàmiÀêd**i**…ô/ (n): ƒëa ph∆∞∆°ng ti·ªán -> √Çm /i/ ho·∫∑c /iÀê/\n- B. landline /Ààl√¶ndl**a…™**n/ (n): ƒëi·ªán tho·∫°i c·ªë ƒë·ªãnh -> √Çm /a…™/ (ai)\n- C. video /Ààv**…™**di…ô ä/ (n): video -> √Çm /…™/ (i ng·∫Øn)\n- D. communicate /k…ôÀàmjuÀên**…™**ke…™t/ (v): giao ti·∫øp -> √Çm /…™/ ho·∫∑c /…ô/\n=> ƒê√°p √°n B l√† √¢m ƒë√¥i /a…™/, kh√°c bi·ªát r√µ r·ªát nh·∫•t v·ªõi c√°c √¢m 'i' c√≤n l·∫°i.", "isCorrect": true },
            { "text": "multimedia", "isCorrect": false },
            { "text": "video", "isCorrect": false },
            { "text": "communicate", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 3,
          "question": "Choose the word whose underlined part (u) is pronounced differently: A. c<u>u</u>ltural B. m<u>u</u>sic C. f<u>u</u>el D. comm<u>u</u>nicative",
          "answerOptions": [
            { "text": "cultural", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'u'.\n- A. cultural /Ààk** å**lt É…ôr…ôl/ (adj): thu·ªôc vƒÉn h√≥a -> √Çm / å/ (√°)\n- B. music /Ààmj**uÀê**z…™k/ (n): √¢m nh·∫°c -> √Çm /juÀê/\n- C. fuel /Ààfj**uÀê**…ôl/ (n): nhi√™n li·ªáu -> √Çm /juÀê/\n- D. communicative /k…ôÀàmj**uÀê**n…™k…ôt…™v/ (adj): c·ªüi m·ªü, th√≠ch giao ti·∫øp -> √Çm /juÀê/\n=> ƒê√°p √°n A ph√°t √¢m l√† / å/, c√°c t·ª´ c√≤n l·∫°i l√† /juÀê/.", "isCorrect": true },
            { "text": "music", "isCorrect": false },
            { "text": "fuel", "isCorrect": false },
            { "text": "communicative", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 4,
          "question": "Choose the word whose underlined part (t) is pronounced differently: A. mul<u>t</u>imedia B. cul<u>t</u>ural C. cha<u>t</u> D. smar<u>t</u>",
          "answerOptions": [
            { "text": "cultural", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 't'.\n- A. multimedia /Àåm ål**t**i.../ (n): ƒëa ph∆∞∆°ng ti·ªán -> √Çm /t/\n- B. cultural /Ààk ål**t É**…ôr…ôl/ (adj): thu·ªôc vƒÉn h√≥a -> √Çm /t É/ (ch·ªù - do ƒë·ª©ng tr∆∞·ªõc u)\n- C. chat /t É√¶**t**/ (v): t√°n g·∫´u -> √Çm /t/\n- D. smart /sm…ëÀê**t**/ (adj): th√¥ng minh -> √Çm /t/\n=> ƒê√°p √°n B ph√°t √¢m l√† /t É/, c√°c t·ª´ c√≤n l·∫°i l√† /t/.", "isCorrect": true },
            { "text": "multimedia", "isCorrect": false },
            { "text": "chat", "isCorrect": false },
            { "text": "smart", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 5,
          "question": "Choose the word whose underlined part (y) is pronounced differently: A. c<u>y</u>ber B. t<u>y</u>phoon C. dr<u>y</u> D. funn<u>y</u>",
          "answerOptions": [
            { "text": "funny", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'y'.\n- A. cyber /Ààs**a…™**b…ôr/ (adj): thu·ªôc m·∫°ng/·∫£o -> √Çm /a…™/\n- B. typhoon /t**a…™**ÀàfuÀên/ (n): b√£o nhi·ªát ƒë·ªõi -> √Çm /a…™/\n- C. dry /dr**a…™**/ (adj): kh√¥ -> √Çm /a…™/\n- D. funny /Ààf ån**i**/ (adj): bu·ªìn c∆∞·ªùi -> √Çm /i/ (ho·∫∑c /i:/)\n=> ƒê√°p √°n D ph√°t √¢m l√† /i/, c√°c t·ª´ c√≤n l·∫°i l√† /a…™/.", "isCorrect": true },
            { "text": "cyber", "isCorrect": false },
            { "text": "typhoon", "isCorrect": false },
            { "text": "dry", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 6,
          "question": "Choose the word whose underlined part (o) is pronounced differently: A. c<u>o</u>nference B. n<u>o</u>nverbal C. c<u>o</u>ffee D. b<u>o</u>dy",
          "answerOptions": [
            { "text": "coffee", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'o'. (L∆∞u √Ω: ƒê√¢y l√† c√¢u h·ªèi kh√≥ do s·ª± kh√°c bi·ªát Anh-M·ªπ).\n- A. conference /Ààk**…í**nf…ôr…ôns/ (n): h·ªôi ngh·ªã -> √Çm /…í/ (o ng·∫Øn)\n- B. nonverbal /Àån**…í**nÀàv…úÀêbl/ (n): phi ng√¥n ng·ªØ -> √Çm /…í/\n- C. coffee /Ààk**…í**fi/ ho·∫∑c /Ààk**…îÀê**fi/ (n): c√† ph√™ -> Th∆∞·ªùng ƒë∆∞·ª£c d·∫°y l√† √¢m /…îÀê/ (o d√†i) ho·∫∑c /…í/ t√πy s√°ch.\n- D. body /Ààb**…í**di/ (n): c∆° th·ªÉ -> √Çm /…í/\n=> ƒê√°p √°n C l√† l·ª±a ch·ªçn kh·∫£ dƒ© nh·∫•t trong c√°c ƒë·ªÅ thi (kh√°c ƒë·ªô d√†i √¢m).", "isCorrect": true },
            { "text": "conference", "isCorrect": false },
            { "text": "nonverbal", "isCorrect": false },
            { "text": "body", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 7,
          "question": "Choose the word whose underlined part (e) is pronounced differently: A. tel<u>e</u>pathy B. conf<u>e</u>rence C. int<u>e</u>ract D. v<u>e</u>rbal",
          "answerOptions": [
            { "text": "verbal", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'e'.\n- A. telepathy /t…ôÀàl**e**p…ôŒ∏i/ (n): th·∫ßn giao c√°ch c·∫£m -> √Çm /e/\n- B. conference /Ààk…ínf**…ô**r…ôns/ (n): h·ªôi ngh·ªã -> √Çm /…ô/ (√¢m l∆∞·ªõt)\n- C. interact /Àå…™nt**…ô**rÀà√¶kt/ (v): t∆∞∆°ng t√°c -> √Çm /…ô/\n- D. verbal /Ààv**…úÀê**bl/ (adj): thu·ªôc l·ªùi n√≥i -> √Çm /…úÀê/ (∆° d√†i)\n=> ƒê√°p √°n D l√† √¢m /…úÀê/, kh√°c bi·ªát nh·∫•t.", "isCorrect": true },
            { "text": "telepathy", "isCorrect": false },
            { "text": "conference", "isCorrect": false },
            { "text": "interact", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 8,
          "question": "Choose the word whose underlined part (o) is pronounced differently: A. c<u>o</u>nference B. n<u>o</u>nverbal C. s<u>o</u>cial D. b<u>o</u>dy",
          "answerOptions": [
            { "text": "social", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'o'.\n- A. conference /Ààk**…í**nf…ôr…ôns/ (n): h·ªôi ngh·ªã -> √Çm /…í/ (o ng·∫Øn)\n- B. nonverbal /Àån**…í**nÀàv…úÀêbl/ (adj): phi ng√¥n ng·ªØ -> √Çm /…í/\n- C. social /Ààs**…ô ä** Él/ (adj): x√£ h·ªôi -> √Çm /…ô ä/ (√¢u)\n- D. body /Ààb**…í**di/ (n): c∆° th·ªÉ -> √Çm /…í/\n=> ƒê√°p √°n C ph√°t √¢m l√† /…ô ä/, c√°c t·ª´ c√≤n l·∫°i l√† /…í/.", "isCorrect": true },
            { "text": "conference", "isCorrect": false },
            { "text": "nonverbal", "isCorrect": false },
            { "text": "body", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 9,
          "question": "Choose the word whose underlined part (o) is pronounced differently: A. c<u>o</u>nference B. c<u>o</u>mputer C. c<u>o</u>nnection D. c<u>o</u>mmunicate",
          "answerOptions": [
            { "text": "conference", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'o'.\n- A. conference /Ààk**…í**nf…ôr…ôns/ (n): h·ªôi ngh·ªã -> √Çm /…í/ (nh·∫•n tr·ªçng √¢m)\n- B. computer /k**…ô**mÀàpjuÀêt…ôr/ (n): m√°y t√≠nh -> √Çm /…ô/ (√¢m l∆∞·ªõt)\n- C. connection /k**…ô**Àànek Én/ (n): s·ª± k·∫øt n·ªëi -> √Çm /…ô/\n- D. communicate /k**…ô**ÀàmjuÀên…™ke…™t/ (v): giao ti·∫øp -> √Çm /…ô/\n=> ƒê√°p √°n A ph√°t √¢m l√† /…í/, c√°c t·ª´ c√≤n l·∫°i l√† √¢m l∆∞·ªõt /…ô/.", "isCorrect": true },
            { "text": "computer", "isCorrect": false },
            { "text": "connection", "isCorrect": false },
            { "text": "communicate", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 10,
          "question": "Choose the word whose underlined part (a) is pronounced differently: A. g<u>a</u>me B. t<u>a</u>ble C. c<u>a</u>ll D. m<u>a</u>ke",
          "answerOptions": [
            { "text": "call", "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'a'.\n- A. game /…°**e…™**m/ (n): tr√≤ ch∆°i -> √Çm /e…™/\n- B. table /Ààt**e…™**bl/ (n): c√°i b√†n -> √Çm /e…™/\n- C. call /k**…îÀê**l/ (v/n): g·ªçi -> √Çm /…îÀê/ (o d√†i)\n- D. make /m**e…™**k/ (v): l√†m -> √Çm /e…™/\n=> ƒê√°p √°n C ph√°t √¢m l√† /…îÀê/, c√°c t·ª´ c√≤n l·∫°i l√† /e…™/.", "isCorrect": true },
            { "text": "game", "isCorrect": false },
            { "text": "table", "isCorrect": false },
            { "text": "make", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 11,
          "question": "Choose the word whose main stress is different: A. social B. video C. media D. trainee",
          "answerOptions": [
            { "text": "trainee", "rationale": "- A. social /Ààs…ô ä Él/ (adj): x√£ h·ªôi -> Tr·ªçng √¢m 1\n- B. video /Ààv…™di…ô ä/ (n): video -> Tr·ªçng √¢m 1\n- C. media /ÀàmiÀêdi…ô/ (n): truy·ªÅn th√¥ng -> Tr·ªçng √¢m 1\n- D. trainee /Àåtre…™ÀàniÀê/ (n): th·ª±c t·∫≠p sinh -> Tr·ªçng √¢m 2 (ƒëu√¥i -ee nh·∫≠n tr·ªçng √¢m)\n=> ƒê√°p √°n D kh√°c bi·ªát.", "isCorrect": true },
            { "text": "social", "isCorrect": false },
            { "text": "video", "isCorrect": false },
            { "text": "media", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 12,
          "question": "Choose the word whose main stress is different: A. Portuguese B. Chinese C. Vietnamese D. Japanese",
          "answerOptions": [
            { "text": "Chinese",
            "rationale": "C√°c t·ª´ ch·ªâ qu·ªëc t·ªãch k·∫øt th√∫c b·∫±ng -ese ƒë·ªÅu nh·∫•n tr·ªçng √¢m v√†o √¢m ti·∫øt cu·ªëi (-ese).\n- A. Por-tu-GUESE (3 √¢m ti·∫øt) -> Tr·ªçng √¢m 3\n- B. Chi-NESE (2 √¢m ti·∫øt) -> Tr·ªçng √¢m 2\n- C. Viet-na-MESE (3 √¢m ti·∫øt) -> Tr·ªçng √¢m 3\n- D. Ja-pa-NESE (3 √¢m ti·∫øt) -> Tr·ªçng √¢m 3\n=> ƒê√°p √°n B kh√°c bi·ªát v√¨ l√† t·ª´ 2 √¢m ti·∫øt, c√°c t·ª´ c√≤n l·∫°i 3 √¢m ti·∫øt tr·ªü l√™n.", "isCorrect": true },
            { "text": "Portuguese", "isCorrect": false },
            { "text": "Vietnamese", "isCorrect": false },
            { "text": "Japanese", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 13,
          "question": "Choose the word whose main stress is different: A. agree B. employee C. attendee D. committee",
          "answerOptions": [
            { "text": "committee", "rationale": "Quy t·∫Øc ƒëu√¥i -ee th∆∞·ªùng nh·∫≠n tr·ªçng √¢m, nh∆∞ng c√≥ ngo·∫°i l·ªá.\n- A. agree /…ôÀà…°riÀê/ -> Tr·ªçng √¢m 2\n- B. employee /…™mÀàpl…î…™iÀê/ -> Tr·ªçng √¢m 3 (ƒëu√¥i -ee)\n- C. attendee /Àå√¶t…ônÀàdiÀê/ -> Tr·ªçng √¢m 3 (ƒëu√¥i -ee)\n- D. committee /k…ôÀàm…™ti/ -> Tr·ªçng √¢m 2 (Ngo·∫°i l·ªá: kh√¥ng nh·∫•n -ee)\n=> ƒê√°p √°n D kh√°c bi·ªát.", "isCorrect": true },
            { "text": "agree", "isCorrect": false },
            { "text": "employee", "isCorrect": false },
            { "text": "attendee", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 14,
          "question": "Choose the word whose main stress is different: A. Lebanese B. refugee C. guarantee D. coffee",
          "answerOptions": [
            { "text": "coffee", "rationale": "- A. Lebanese /Àåleb…ôÀàniÀêz/ -> Tr·ªçng √¢m 3\n- B. refugee /ÀårefjuÀàd íiÀê/ -> Tr·ªçng √¢m 3\n- C. guarantee /Àå…°√¶r…ônÀàtiÀê/ -> Tr·ªçng √¢m 3\n- D. coffee /Ààk…ífi/ -> Tr·ªçng √¢m 1 (Ngo·∫°i l·ªá ƒëu√¥i -ee)\n=> ƒê√°p √°n D kh√°c bi·ªát.", "isCorrect": true },
            { "text": "Lebanese", "isCorrect": false },
            { "text": "refugee", "isCorrect": false },
            { "text": "guarantee", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 15,
          "question": "Choose the word whose main stress is different: A. equipment B. examine C. verbal D. trainee",
          "answerOptions": [
            { "text": "verbal", "rationale": "- A. equipment /…™Ààkw…™pm…ônt/ -> Tr·ªçng √¢m 2\n- B. examine /…™…°Ààz√¶m…™n/ -> Tr·ªçng √¢m 2\n- C. verbal /Ààv…úÀêbl/ -> Tr·ªçng √¢m 1\n- D. trainee /Àåtre…™ÀàniÀê/ -> Tr·ªçng √¢m 2\n=> ƒê√°p √°n C kh√°c bi·ªát (nh·∫•n √¢m 1).", "isCorrect": true },
            { "text": "equipment", "isCorrect": false },
            { "text": "examine", "isCorrect": false },
            { "text": "trainee", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 16,
          "question": "Choose the word whose main stress is different: A. talkative B. Vietnamese C. negative D. positive",
          "answerOptions": [
            { "text": "Vietnamese", "rationale": "- A. talkative /Ààt…îÀêk…ôt…™v/ -> Tr·ªçng √¢m 1\n- B. Vietnamese /Àåvjetn…ôÀàmiÀêz/ -> Tr·ªçng √¢m 3\n- C. negative /Ààne…°…ôt…™v/ -> Tr·ªçng √¢m 1\n- D. positive /Ààp…íz…ôt…™v/ -> Tr·ªçng √¢m 1\n=> ƒê√°p √°n B kh√°c bi·ªát.", "isCorrect": true },
            { "text": "talkative", "isCorrect": false },
            { "text": "negative", "isCorrect": false },
            { "text": "positive", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 17,
          "question": "Choose the word whose main stress is different: A. conference B. situation C. opportunity D. interact",
          "answerOptions": [
            { "text": "conference", "rationale": "- A. conference /Ààk…ínf…ôr…ôns/ -> Tr·ªçng √¢m 1\n- B. situation /Àås…™t ÉuÀàe…™ Én/ -> Tr·ªçng √¢m 3\n- C. opportunity /Àå…íp…ôÀàtjuÀên…ôti/ -> Tr·ªçng √¢m 3\n- D. interact /Àå…™nt…ôrÀà√¶kt/ -> Tr·ªçng √¢m 3\n=> ƒê√°p √°n A kh√°c bi·ªát.", "isCorrect": true },
            { "text": "situation", "isCorrect": false },
            { "text": "opportunity", "isCorrect": false },
            { "text": "interact", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 18,
          "question": "Choose the word whose main stress is different: A. cultural B. media C. Japanese D. difference",
          "answerOptions": [
            { "text": "Japanese", "rationale": "- A. cultural /Ààk ålt É…ôr…ôl/ -> Tr·ªçng √¢m 1\n- B. media /ÀàmiÀêdi…ô/ -> Tr·ªçng √¢m 1\n- C. Japanese /Àåd í√¶p…ôÀàniÀêz/ -> Tr·ªçng √¢m 3\n- D. difference /Ààd…™fr…ôns/ -> Tr·ªçng √¢m 1\n=> ƒê√°p √°n C kh√°c bi·ªát.", "isCorrect": true },
            { "text": "cultural", "isCorrect": false },
            { "text": "media", "isCorrect": false },
            { "text": "difference", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 19,
          "question": "Choose the word whose main stress is different: A. polite B. pen-friend C. shorthand D. breakdown",
          "answerOptions": [
            { "text": "polite", "rationale": "- A. polite /p…ôÀàla…™t/ -> Tr·ªçng √¢m 2\n- B. pen-friend (danh t·ª´ gh√©p) -> Tr·ªçng √¢m 1\n- C. shorthand (danh t·ª´ gh√©p) -> Tr·ªçng √¢m 1\n- D. breakdown (danh t·ª´ gh√©p) -> Tr·ªçng √¢m 1\n=> ƒê√°p √°n A kh√°c bi·ªát.", "isCorrect": true },
            { "text": "pen-friend", "isCorrect": false },
            { "text": "shorthand", "isCorrect": false },
            { "text": "breakdown", "isCorrect": false }
          ]
        },
        {
          "questionNumber": 20,
          "question": "Choose the word whose main stress is different: A. multimedia B. possibility C. telepathy D. interactive",
          "answerOptions": [
            { "text": "telepathy", "rationale": "- A. multimedia /Àåm åltiÀàmiÀêdi…ô/ -> Tr·ªçng √¢m 3\n- B. possibility /Àåp…ís…ôÀàb…™l…ôti/ -> Tr·ªçng √¢m 3\n- C. telepathy /t…ôÀàlep…ôŒ∏i/ -> Tr·ªçng √¢m 2\n- D. interactive /Àå…™nt…ôrÀà√¶kt…™v/ -> Tr·ªçng √¢m 3\n=> ƒê√°p √°n C kh√°c bi·ªát.", "isCorrect": true },
            { "text": "multimedia", "isCorrect": false },
            { "text": "possibility", "isCorrect": false },
            { "text": "interactive", "isCorrect": false }
          ]
        }
      ]
    };

    // LOGIC
    let score = 0;
    const totalQuestions = quizData.questions.length;
    let questionsAnswered = 0;

    function initQuiz() {
        const container = document.getElementById('quiz-container');
        
        quizData.questions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `q-card-${index}`;

            // Determine A, B, C, D text for display
            const labels = ['A', 'B', 'C', 'D'];
            
            // Format Explanation Text
            // Note: In the source data, the correct answer option holds the rationale text.
            const correctOption = q.answerOptions.find(opt => opt.isCorrect);
            const explanationText = correctOption ? correctOption.rationale : "Gi·∫£i th√≠ch ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t.";

            // Options HTML
            let optionsHTML = '<div class="options-grid">';
            q.answerOptions.forEach((opt, optIndex) => {
                // Ensure specific options match A, B, C, D order as per question text if possible, 
                // but here data is unstructured list. We map roughly. 
                // Wait, the data has options list. We should just display them.
                // However, the question text says "A. language B. cultural...". 
                // The answerOptions array contains objects with 'text'. 
                // We need to match the text to the label.
                
                // Let's rely on the text content to match visuals or just list them.
                // The provided JSON separates options cleanly.
                
                optionsHTML += `
                    <button class="option-btn" 
                        onclick="checkAnswer(${index}, ${optIndex}, this, ${opt.isCorrect})">
                        ${labels[optIndex]}. ${opt.text}
                    </button>
                `;
            });
            optionsHTML += '</div>';

            card.innerHTML = `
                <div class="question-header">
                    <div class="q-number">${q.questionNumber}</div>
                    <div class="q-text">${q.question}</div>
                </div>
                ${optionsHTML}
                <div class="explanation-box" id="exp-${index}">
                    <div class="exp-header" id="exp-header-${index}">
                        <!-- Icon and Text injected via JS -->
                    </div>
                    <div class="exp-content">
                        ${explanationText}
                    </div>
                </div>
            `;
            
            container.appendChild(card);
        });
    }

    function checkAnswer(qIndex, optIndex, btnElement, isCorrect) {
        // Prevent re-answering
        const card = document.getElementById(`q-card-${qIndex}`);
        if (card.classList.contains('answered')) return;
        
        card.classList.add('answered');
        questionsAnswered++;
        
        const allBtns = card.querySelectorAll('.option-btn');
        const expBox = document.getElementById(`exp-${qIndex}`);
        const expHeader = document.getElementById(`exp-header-${qIndex}`);
        
        // Disable all buttons
        allBtns.forEach(btn => btn.disabled = true);

        if (isCorrect) {
            score++;
            btnElement.classList.add('correct');
            playSound('correct');
            triggerConfetti(btnElement);
            
            expHeader.className = "exp-header correct-text";
            expHeader.innerHTML = "üéâ Ch√≠nh x√°c! C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:";
            expBox.classList.remove('wrong-bg');
        } else {
            btnElement.classList.add('wrong');
            playSound('wrong');
            
            // Highlight the correct one
            // We need to find which button was actually correct.
            // In init, we attached isCorrect to the onclick. We can check the data again or attribute.
            // Let's loop buttons and find the one that corresponds to correct answer in data
            // Or easier: pass index to this function.
            
            // Find correct index from data
            const correctOptIndex = quizData.questions[qIndex].answerOptions.findIndex(o => o.isCorrect);
            allBtns[correctOptIndex].classList.add('correct');

            expHeader.className = "exp-header wrong-text";
            expHeader.innerHTML = "‚ö†Ô∏è Ti·∫øc qu√°! Xem c√¥ Mai An gi·∫£i th√≠ch nh√©:";
            expBox.classList.add('wrong-bg');
        }

        // Show Explanation
        expBox.style.display = 'block';
    }

    function playSound(type) {
        const soundMap = {
            'correct': 'sound-correct',
            'wrong': 'sound-wrong',
            'finish': 'sound-finish'
        };
        const audio = document.getElementById(soundMap[type]);
        if(audio) {
            audio.currentTime = 0;
            audio.play().catch(e => console.log("Audio play blocked (needs user interaction first)"));
        }
    }

    function triggerConfetti(element) {
        const rect = element.getBoundingClientRect();
        // Normalize coordinates to 0-1 range for canvas-confetti
        const x = (rect.left + rect.width / 2) / window.innerWidth;
        const y = (rect.top + rect.height / 2) / window.innerHeight;

        confetti({
            particleCount: 60,
            spread: 70,
            origin: { x: x, y: y },
            colors: ['#8854C0', '#00C9A7', '#FF4757', '#F1C40F']
        });
    }

    function finishQuiz() {
        if (questionsAnswered < totalQuestions) {
            if(!confirm(`B·∫°n m·ªõi l√†m ${questionsAnswered}/${totalQuestions} c√¢u. B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i kh√¥ng?`)) {
                return;
            }
        }
        
        playSound('finish');
        confetti({
            particleCount: 150,
            spread: 100,
            origin: { y: 0.6 }
        });

        const scorePopup = document.getElementById('score-popup');
        const finalScoreEl = document.getElementById('final-score');
        const msgEl = document.getElementById('score-message');

        finalScoreEl.innerText = `${score}/${totalQuestions}`;
        
        const percentage = (score / totalQuestions) * 100;
        if (percentage === 100) msgEl.innerText = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i Ng·ªØ √¢m! üèÜ";
        else if (percentage >= 80) msgEl.innerText = "Gi·ªèi l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa l√† ho√†n h·∫£o! üåü";
        else if (percentage >= 50) msgEl.innerText = "Kh√° t·ªët! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ hi·ªÉu r√µ h∆°n nh√©. üí™";
        else msgEl.innerText = "ƒê·ª´ng bu·ªìn! H√£y √¥n t·∫≠p k·ªπ ph·∫ßn gi·∫£i th√≠ch c·ªßa c√¥ Mai An nh√©. üìö";

        scorePopup.classList.add('active');
    }

    function closePopup() {
        document.getElementById('score-popup').classList.remove('active');
        // Optional: Scroll to top or review mode
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Start
    window.onload = initQuiz;

</script>

</body>
</html>
