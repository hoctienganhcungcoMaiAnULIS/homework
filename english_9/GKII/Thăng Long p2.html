<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00C9A7;
            --secondary: #FDCB6E;
            --correct: #00D26A;
            --wrong: #FF4757;
            --text-dark: #2D3436;
            --bg-light: #ffffff;
            --shadow-color: rgba(0,0,0,0.15);
        }

        * {
            box-sizing: border-box;
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            padding: 0;
        }

        /* DYNAMIC THEME BACKGROUND */
        body {
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(-45deg, #8854C0, #FDCB6E, #00C9A7, #A8E6CF);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* SVG Pattern L∆° l·ª≠ng */
        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='150' height='150' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='40' font-size='30'%3Eüåç%3C/text%3E%3Ctext x='80' y='90' font-size='30'%3E‚úàÔ∏è%3C/text%3E%3Ctext x='40' y='140' font-size='25'%3Eüìñ%3C/text%3E%3C/svg%3E");
            opacity: 0.15;
            z-index: 0;
            animation: floatPattern 20s linear infinite;
        }

        @keyframes floatPattern {
            from { background-position: 0 0; }
            to { background-position: 300px 300px; }
        }

        /* HEADER & TIMER */
        .top-bar {
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 70px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            box-shadow: 0 4px 15px var(--shadow-color);
            padding: 0 20px;
        }

        .header-title {
            position: absolute;
            left: 20px;
            color: var(--primary);
            font-weight: 900;
            font-size: 1.2rem;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
            background: white;
            padding: 5px 20px;
            border-radius: 30px;
            border: 3px solid var(--secondary);
            box-shadow: 0 5px 0 var(--secondary);
        }

        .timer-text {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--text-dark);
        }

        .btn-timer {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #009b80;
            transition: 0.1s;
        }
        .btn-timer:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #009b80;
        }

        /* SPLIT SCREEN LAYOUT */
        .main-container {
            display: flex;
            height: calc(100vh - 70px);
            margin-top: 70px;
            position: relative;
            z-index: 1;
            padding: 20px;
            gap: 20px;
        }

        .pane {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            scroll-behavior: smooth;
        }

        /* SCROLLBAR CUSTOMIZATION */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: var(--secondary); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #e5b35c; }

        /* READING PASSAGE STYLES */
        .passage-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-dark);
            margin-bottom: 20px;
        }
        .passage-content u { text-decoration-color: var(--primary); text-decoration-thickness: 3px; }
        
        .btn-translate {
            display: block;
            background: #f0f0f0;
            color: #555;
            border: 2px dashed #ccc;
            padding: 10px 20px;
            border-radius: 15px;
            margin: 15px 0;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .btn-translate:hover {
            background: #e9ecef;
            border-color: var(--primary);
            color: var(--primary);
        }

        .translation-box {
            display: none;
            background: #fff8e1;
            border-left: 5px solid var(--secondary);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1rem;
            color: #444;
        }

        /* GLOSSARY TABLE */
        .glossary-wrapper {
            margin-top: 30px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid var(--primary);
        }
        .glossary-wrapper h3 {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th { background: #f8f9fa; }
        tr:last-child td { border-bottom: none; }

        /* EXERCISE STYLES (RIGHT PANE) */
        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            transition: 0.3s;
        }
        .question-card:hover { border-color: var(--secondary); }
        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn-option {
            background: white;
            border: 3px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-dark);
            cursor: pointer;
            text-align: left;
            box-shadow: 0 6px 0 #e0e0e0;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .btn-option:hover {
            transform: scale(1.02);
            border-color: var(--primary);
        }

        .btn-option:active {
            transform: translateY(6px);
            box-shadow: 0 0 0 #e0e0e0;
        }

        .btn-option.correct {
            background: var(--correct);
            border-color: var(--correct);
            color: white;
            box-shadow: 0 6px 0 #00ab56;
        }

        .btn-option.wrong {
            background: var(--wrong);
            border-color: var(--wrong);
            color: white;
            box-shadow: 0 6px 0 #d93846;
            animation: shake 0.4s;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* EXPLANATION BOX */
        .explanation-box {
            display: none;
            margin-top: 15px;
            background: #f8f9fa;
            border-left: 5px solid var(--primary);
            padding: 15px;
            border-radius: 10px;
            font-size: 1rem;
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .exp-title { font-weight: bold; color: var(--primary); margin-bottom: 5px; }

        /* SUBMIT & RESULT */
        .btn-submit {
            display: block;
            width: 100%;
            background: var(--secondary);
            color: var(--text-dark);
            font-size: 1.5rem;
            font-weight: 900;
            padding: 20px;
            border: none;
            border-radius: 20px;
            box-shadow: 0 8px 0 #e5b35c;
            cursor: pointer;
            margin-top: 30px;
            transition: 0.2s;
        }
        .btn-submit:active {
            transform: translateY(8px);
            box-shadow: 0 0 0 #e5b35c;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        .result-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .score-circle {
            width: 150px;
            height: 150px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            font-weight: 900;
            margin: 0 auto 20px;
            border: 10px solid #d1f5eb;
        }

        /* CONFETTI */
        .confetti {
            position: fixed;
            width: 10px; height: 10px;
            background-color: #f00;
            z-index: 999;
            animation: fall 3s linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="header-title">üë©‚Äçüè´ Ms Mai An ULIS</div>
        <div class="timer-container">
            <span class="timer-text" id="timer">10:00</span>
            <button class="btn-timer" id="btn-timer-control" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U</button>
        </div>
    </div>

    <div class="main-container">
        <div class="pane left-pane">
            <h2 style="color: var(--primary); margin-bottom: 20px;">üìñ Reading Passages</h2>

            <div class="passage-content">
                <strong>Part 1: Read the text and choose the correct word for each blank.</strong><br><br>
                Marian Krostina had an accident last year while experiencing parachuting, a kind of (19) ______ sport. Her friend told her (20) ______ it once in life and she crashed with 52 broken bones. A man found her in a forest near the parachuting area with a serious wound to her face. He immediately called an/a (21) ______ and told her that she (22) ______ fine. After that, she was given an operation and fortunately, she recovered quickly. She said that she had been between death and life (23) ______ while being stuck in the forest, and told the man that he (24) ______ the God to her.
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans1')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div id="trans1" class="translation-box">
                Marian Krostina ƒë√£ g·∫∑p tai n·∫°n v√†o nƒÉm ngo√°i khi ƒëang tr·∫£i nghi·ªám nh·∫£y d√π, m·ªôt lo·∫°i th·ªÉ thao m·∫°o hi·ªÉm. B·∫°n c√¥ ·∫•y b·∫£o c√¥ h√£y th·ª≠ n√≥ m·ªôt l·∫ßn trong ƒë·ªùi v√† c√¥ ·∫•y ƒë√£ r∆°i xu·ªëng, b·ªã g√£y 52 chi·∫øc x∆∞∆°ng. M·ªôt ng∆∞·ªùi ƒë√†n √¥ng t√¨m th·∫•y c√¥ trong m·ªôt khu r·ª´ng g·∫ßn khu v·ª±c nh·∫£y d√π v·ªõi m·ªôt v·∫øt th∆∞∆°ng nghi√™m tr·ªçng tr√™n m·∫∑t. Anh ta ngay l·∫≠p t·ª©c g·ªçi xe c·ª©u th∆∞∆°ng v√† b·∫£o c√¥ r·∫±ng c√¥ s·∫Ω ·ªïn th√¥i. Sau ƒë√≥, c√¥ ƒë√£ ƒë∆∞·ª£c ph·∫´u thu·∫≠t v√† may m·∫Øn thay, c√¥ h·ªìi ph·ª•c nhanh ch√≥ng. C√¥ n√≥i r·∫±ng m√¨nh ƒë√£ ·ªü ranh gi·ªõi gi·ªØa s·ª± s·ªëng v√† c√°i ch·∫øt trong 3 ng√†y khi b·ªã m·∫Øc k·∫πt trong r·ª´ng, v√† n√≥i v·ªõi ng∆∞·ªùi ƒë√†n √¥ng r·∫±ng anh ·∫•y ch√≠nh l√† Th∆∞·ª£ng ƒë·∫ø ƒë·ªëi v·ªõi c√¥.
            </div>
            
            <hr style="border: 1px dashed #ccc; margin: 30px 0;">

            <div class="passage-content">
                <strong>Part 2: English as a global language</strong><br><br>
                People often talk about English as a global language or lingua franca. With more than 350 million people around the world speaking English as a first language and more than 430 million speaking it as a second language, there are English speakers in most countries around the world. Why is English so popular, though? And why has it become a global language?
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans2')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div id="trans2" class="translation-box">
                M·ªçi ng∆∞·ªùi th∆∞·ªùng n√≥i v·ªÅ ti·∫øng Anh nh∆∞ m·ªôt ng√¥n ng·ªØ to√†n c·∫ßu hay ng√¥n ng·ªØ chung. V·ªõi h∆°n 350 tri·ªáu ng∆∞·ªùi tr√™n kh·∫Øp th·∫ø gi·ªõi n√≥i ti·∫øng Anh nh∆∞ ng√¥n ng·ªØ th·ª© nh·∫•t v√† h∆°n 430 tri·ªáu ng∆∞·ªùi n√≥i n√≥ nh∆∞ ng√¥n ng·ªØ th·ª© hai, c√≥ nh·ªØng ng∆∞·ªùi n√≥i ti·∫øng Anh ·ªü h·∫ßu h·∫øt c√°c qu·ªëc gia tr√™n th·∫ø gi·ªõi. Tuy nhi√™n, t·∫°i sao ti·∫øng Anh l·∫°i ph·ªï bi·∫øn ƒë·∫øn v·∫≠y? V√† t·∫°i sao n√≥ l·∫°i tr·ªü th√†nh m·ªôt ng√¥n ng·ªØ to√†n c·∫ßu?
            </div>

            <div class="passage-content">
                People often call English the international language of business, and it's increasingly true as international trade expands every year, bringing new countries into contact. Most multinational companies require a certain degree of English proficiency from potential employees so in order to get a position with a top company, more and more people are learning English.
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans3')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div id="trans3" class="translation-box">
                M·ªçi ng∆∞·ªùi th∆∞·ªùng g·ªçi ti·∫øng Anh l√† ng√¥n ng·ªØ kinh doanh qu·ªëc t·∫ø, v√† ƒëi·ªÅu ƒë√≥ ng√†y c√†ng ƒë√∫ng khi th∆∞∆°ng m·∫°i qu·ªëc t·∫ø m·ªü r·ªông m·ªói nƒÉm, mang c√°c qu·ªëc gia m·ªõi ƒë·∫øn v·ªõi nhau. H·∫ßu h·∫øt c√°c c√¥ng ty ƒëa qu·ªëc gia y√™u c·∫ßu m·ªôt m·ª©c ƒë·ªô th√†nh th·∫°o ti·∫øng Anh nh·∫•t ƒë·ªãnh t·ª´ c√°c nh√¢n vi√™n ti·ªÅm nƒÉng, v√¨ v·∫≠y ƒë·ªÉ c√≥ ƒë∆∞·ª£c m·ªôt v·ªã tr√≠ trong m·ªôt c√¥ng ty h√†ng ƒë·∫ßu, ng√†y c√†ng c√≥ nhi·ªÅu ng∆∞·ªùi h·ªçc ti·∫øng Anh.
            </div>

            <div class="passage-content">
                If your ambitions lie in science or medicine, you can't neglect English either. Much of the technical terminology is based on English words, and if you want to learn about the latest developments and discoveries from around the world, you'll read about them in journals and research reports published in English, no matter whether the scientists who wrote them are from China or Norway.
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans4')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div id="trans4" class="translation-box">
                N·∫øu tham v·ªçng c·ªßa b·∫°n n·∫±m ·ªü khoa h·ªçc ho·∫∑c y h·ªçc, b·∫°n c≈©ng kh√¥ng th·ªÉ ph·ªõt l·ªù ti·∫øng Anh. Ph·∫ßn l·ªõn thu·∫≠t ng·ªØ chuy√™n ng√†nh ƒë∆∞·ª£c d·ª±a tr√™n c√°c t·ª´ ti·∫øng Anh, v√† n·∫øu b·∫°n mu·ªën t√¨m hi·ªÉu v·ªÅ nh·ªØng s·ª± ph√°t tri·ªÉn v√† kh√°m ph√° m·ªõi nh·∫•t tr√™n to√†n th·∫ø gi·ªõi, b·∫°n s·∫Ω ƒë·ªçc v·ªÅ ch√∫ng trong c√°c t·∫°p ch√≠ v√† b√°o c√°o nghi√™n c·ª©u xu·∫•t b·∫£n b·∫±ng ti·∫øng Anh, b·∫•t k·ªÉ c√°c nh√† khoa h·ªçc vi·∫øt ra ch√∫ng ƒë·∫øn t·ª´ Trung Qu·ªëc hay Na Uy.
            </div>

            <div class="passage-content">
                If you want a career in travel, English is absolutely <u>essential</u>. As the international language of aviation, pilots and cabin crew all need to speak English. Even if you're not up in the air, speaking English accurately will ensure you are able to communicate with clients and suppliers all over the world.
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans5')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div id="trans5" class="translation-box">
                N·∫øu b·∫°n mu·ªën c√≥ m·ªôt s·ª± nghi·ªáp trong ng√†nh du l·ªãch, ti·∫øng Anh l√† ho√†n to√†n thi·∫øt y·∫øu. L√† ng√¥n ng·ªØ qu·ªëc t·∫ø c·ªßa ng√†nh h√†ng kh√¥ng, phi c√¥ng v√† phi h√†nh ƒëo√†n ƒë·ªÅu c·∫ßn n√≥i ti·∫øng Anh. Ngay c·∫£ khi b·∫°n kh√¥ng ·ªü tr√™n kh√¥ng trung, vi·ªác n√≥i ti·∫øng Anh ch√≠nh x√°c s·∫Ω ƒë·∫£m b·∫£o b·∫°n c√≥ th·ªÉ giao ti·∫øp v·ªõi kh√°ch h√†ng v√† nh√† cung c·∫•p tr√™n to√†n th·∫ø gi·ªõi.
            </div>

            <div class="passage-content">
                So, what's stopping you from learning this global language? With all the English resources available on the internet and so many other English speakers around the world to practice with, there's never been a better time to start learning English. Pick up a book, learn a few words, or even start a course today and take your first <u>steps</u> towards becoming one of nearly 800 million English speakers in the world.
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans6')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div id="trans6" class="translation-box">
                V·∫≠y, ƒëi·ªÅu g√¨ ƒëang ngƒÉn c·∫£n b·∫°n h·ªçc ng√¥n ng·ªØ to√†n c·∫ßu n√†y? V·ªõi t·∫•t c·∫£ c√°c t√†i nguy√™n ti·∫øng Anh c√≥ s·∫µn tr√™n internet v√† r·∫•t nhi·ªÅu ng∆∞·ªùi n√≥i ti·∫øng Anh kh√°c tr√™n th·∫ø gi·ªõi ƒë·ªÉ th·ª±c h√†nh c√πng, ch∆∞a bao gi·ªù l√† th·ªùi ƒëi·ªÉm t·ªët h∆°n ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc ti·∫øng Anh. H√£y c·∫ßm m·ªôt cu·ªën s√°ch l√™n, h·ªçc m·ªôt v√†i t·ª´, ho·∫∑c th·∫≠m ch√≠ b·∫Øt ƒë·∫ßu m·ªôt kh√≥a h·ªçc ngay h√¥m nay v√† th·ª±c hi·ªán nh·ªØng b∆∞·ªõc ƒëi ƒë·∫ßu ti√™n c·ªßa b·∫°n ƒë·ªÉ tr·ªü th√†nh m·ªôt trong g·∫ßn 800 tri·ªáu ng∆∞·ªùi n√≥i ti·∫øng Anh tr√™n th·∫ø gi·ªõi.
            </div>

            <hr style="border: 1px dashed #ccc; margin: 30px 0;">

            <div class="passage-content">
                <strong>Part 3: Tourism</strong><br><br>
                Tourism is one of the fastest-growing industries in the world, and it plays a significant role in the economies of many countries. It generates (37) _______. For some countries, tourism is the main source of income. Tourists travel for various reasons, such as leisure, business, or cultural exploration. (38) _______. Popular tourist destinations often include historical landmarks, natural wonders, and vibrant cities. However, tourism can also have negative impacts, such as environmental degradation and cultural disruption. Over-tourism is a growing concern (39) _______. Sustainable tourism practices aim to minimize these negative effects while maximizing the benefits. By promoting responsible tourism, we can ensure that future generations will be able to enjoy the world‚Äôs natural and cultural treasures. In conclusion, (40) _______.
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans7')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div id="trans7" class="translation-box">
                Du l·ªãch l√† m·ªôt trong nh·ªØng ng√†nh ph√°t tri·ªÉn nhanh nh·∫•t th·∫ø gi·ªõi, v√† n√≥ ƒë√≥ng m·ªôt vai tr√≤ quan tr·ªçng trong n·ªÅn kinh t·∫ø c·ªßa nhi·ªÅu qu·ªëc gia. N√≥ t·∫°o ra h√†ng t·ª∑ ƒë√¥ la doanh thu h√†ng nƒÉm. ƒê·ªëi v·ªõi m·ªôt s·ªë qu·ªëc gia, du l·ªãch l√† ngu·ªìn thu nh·∫≠p ch√≠nh. Kh√°ch du l·ªãch ƒëi l·∫°i v√¨ nhi·ªÅu l√Ω do kh√°c nhau, ch·∫≥ng h·∫°n nh∆∞ gi·∫£i tr√≠, kinh doanh ho·∫∑c kh√°m ph√° vƒÉn h√≥a. Du l·ªãch t·∫°o ra vi·ªác l√†m v√† c∆° h·ªôi cho c√°c c·ªông ƒë·ªìng ƒë·ªãa ph∆∞∆°ng. C√°c ƒëi·ªÉm ƒë·∫øn du l·ªãch n·ªïi ti·∫øng th∆∞·ªùng bao g·ªìm c√°c di t√≠ch l·ªãch s·ª≠, k·ª≥ quan thi√™n nhi√™n v√† c√°c th√†nh ph·ªë s√¥i ƒë·ªông. Tuy nhi√™n, du l·ªãch c≈©ng c√≥ th·ªÉ c√≥ nh·ªØng t√°c ƒë·ªông ti√™u c·ª±c, ch·∫≥ng h·∫°n nh∆∞ suy tho√°i m√¥i tr∆∞·ªùng v√† ph√° v·ª° vƒÉn h√≥a. Qu√° t·∫£i du l·ªãch l√† m·ªôt m·ªëi lo ng·∫°i ng√†y c√†ng tƒÉng ·ªü nhi·ªÅu ƒëi·ªÉm ƒë·∫øn ph·ªï bi·∫øn. C√°c ho·∫°t ƒë·ªông du l·ªãch b·ªÅn v·ªØng h∆∞·ªõng t·ªõi m·ª•c ti√™u gi·∫£m thi·ªÉu nh·ªØng t√°c ƒë·ªông ti√™u c·ª±c n√†y ƒë·ªìng th·ªùi t·ªëi ƒëa h√≥a l·ª£i √≠ch. B·∫±ng c√°ch th√∫c ƒë·∫©y du l·ªãch c√≥ tr√°ch nhi·ªám, ch√∫ng ta c√≥ th·ªÉ ƒë·∫£m b·∫£o r·∫±ng c√°c th·∫ø h·ªá t∆∞∆°ng lai s·∫Ω c√≥ th·ªÉ t·∫≠n h∆∞·ªüng nh·ªØng kho t√†ng vƒÉn h√≥a v√† thi√™n nhi√™n c·ªßa th·∫ø gi·ªõi. T√≥m l·∫°i, kh√°ch du l·ªãch ƒë√≥ng g√≥p v√†o n·ªÅn kinh t·∫ø to√†n c·∫ßu theo v√¥ s·ªë c√°ch.
            </div>

            <div class="glossary-wrapper">
                <h3>üìö Glossary (T·ª´ v·ª±ng h·ªçc thu·∫≠t B1-C2)</h3>
                <table>
                    <tr><th>Word</th><th>Part of speech</th><th>Meaning</th></tr>
                    <tr><td>extreme</td><td>adj</td><td>v√¥ c√πng, m·∫°o hi·ªÉm, kh·∫Øc nghi·ªát</td></tr>
                    <tr><td>wound</td><td>noun</td><td>v·∫øt th∆∞∆°ng</td></tr>
                    <tr><td>operation</td><td>noun</td><td>ca ph·∫´u thu·∫≠t / s·ª± v·∫≠n h√†nh</td></tr>
                    <tr><td>lingua franca</td><td>noun</td><td>ng√¥n ng·ªØ chung / ng√¥n ng·ªØ c·∫ßu n·ªëi</td></tr>
                    <tr><td>proficiency</td><td>noun</td><td>s·ª± th√†nh th·∫°o, t√†i gi·ªèi</td></tr>
                    <tr><td>multinational</td><td>adj</td><td>ƒëa qu·ªëc gia</td></tr>
                    <tr><td>terminology</td><td>noun</td><td>thu·∫≠t ng·ªØ chuy√™n ng√†nh</td></tr>
                    <tr><td>aviation</td><td>noun</td><td>ng√†nh h√†ng kh√¥ng</td></tr>
                    <tr><td>essential</td><td>adj</td><td>c·∫ßn thi·∫øt, thi·∫øt y·∫øu</td></tr>
                    <tr><td>degradation</td><td>noun</td><td>s·ª± suy tho√°i, s·ª± xu·ªëng c·∫•p</td></tr>
                    <tr><td>disruption</td><td>noun</td><td>s·ª± ph√° v·ª°, s·ª± gi√°n ƒëo·∫°n</td></tr>
                    <tr><td>sustainable</td><td>adj</td><td>b·ªÅn v·ªØng</td></tr>
                </table>
            </div>
        </div>

        <div class="pane right-pane">
            <h2 style="color: var(--primary); margin-bottom: 20px;">üéØ Exercises</h2>
            <div id="questions-container">
                </div>
            <button class="btn-submit" onclick="submitQuiz()">N·ªòP B√ÄI üèÜ</button>
        </div>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="result-card">
            <div class="score-circle" id="final-score">0/14</div>
            <h2 style="color: var(--primary); margin-bottom: 15px;" id="feedback-title">Tuy·ªát v·ªùi!</h2>
            <p style="font-size: 1.1rem; color: #555;" id="feedback-text">B·∫°n ƒë√£ ho√†n th√†nh xu·∫•t s·∫Øc b√†i ki·ªÉm tra!</p>
            <button class="btn-submit" style="margin-top: 20px;" onclick="closeModal()">Xem l·∫°i ƒë√°p √°n üîç</button>
        </div>
    </div>

    <script>
        // --- AUDIO SYSTEM (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        function triggerConfetti() {
            for(let i=0; i<40; i++) {
                let conf = document.createElement('div');
                conf.className = 'confetti';
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.top = -10 + 'px';
                conf.style.backgroundColor = ['#FF4757', '#00D26A', '#FDCB6E', '#8854C0', '#00C9A7'][Math.floor(Math.random()*5)];
                conf.style.animationDuration = (Math.random() * 2 + 1) + 's';
                document.body.appendChild(conf);
                setTimeout(()=>conf.remove(), 3000);
            }
        }

        // --- TIMER LOGIC ---
        let timeRemaining = 600; // 10 minutes
        let timerInterval;
        let isRunning = false;

        function updateTimerDisplay() {
            const min = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
            const sec = (timeRemaining % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${min}:${sec}`;
        }

        function toggleTimer() {
            const btn = document.getElementById('btn-timer-control');
            if (isRunning) {
                clearInterval(timerInterval);
                btn.innerText = "TI·∫æP T·ª§C";
                isRunning = false;
            } else {
                btn.innerText = "T·∫†M D·ª™NG";
                isRunning = true;
                timerInterval = setInterval(() => {
                    timeRemaining--;
                    updateTimerDisplay();
                    if (timeRemaining <= 0) {
                        clearInterval(timerInterval);
                        alert("ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                        btn.innerText = "H·∫æT GI·ªú";
                        btn.disabled = true;
                    }
                }, 1000);
            }
        }

        // --- TOGGLE TRANSLATION ---
        function toggleTranslation(id) {
            const box = document.getElementById(id);
            if (box.style.display === "block") {
                box.style.display = "none";
            } else {
                box.style.display = "block";
            }
        }

        // --- QUIZ DATA ---
        const quizData = [
            {
                qNum: 19, text: "parachuting, a kind of (19) ______ sport.",
                options: [
                    { text: "A. extreme", isCorrect: true },
                    { text: "B. gentle", isCorrect: false },
                    { text: "C. heavy", isCorrect: false },
                    { text: "D. water", isCorrect: false }
                ],
                exp: "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b><br>A. extreme (adj): m·∫°o hi·ªÉm, kh·∫Øc nghi·ªát.<br>B. gentle (adj): nh·∫π nh√†ng.<br>C. heavy (adj): n·∫∑ng.<br>D. water (n): n∆∞·ªõc.<br><b>2. D·ªãch nghƒ©a:</b> '...nh·∫£y d√π, m·ªôt m√¥n th·ªÉ thao m·∫°o hi·ªÉm.'<br><b>3. T·∫°i sao ch·ªçn A?</b> C·ª•m t·ª´ c·ªë ƒë·ªãnh 'extreme sport' nghƒ©a l√† m√¥n th·ªÉ thao m·∫°o hi·ªÉm. Nh·∫£y d√π (parachuting) kh√¥ng ph·∫£i th·ªÉ thao d∆∞·ªõi n∆∞·ªõc hay nh·∫π nh√†ng."
            },
            {
                qNum: 20, text: "Her friend told her (20) ______ it once in life",
                options: [
                    { text: "A. to try", isCorrect: true },
                    { text: "B. trying", isCorrect: false },
                    { text: "C. was trying", isCorrect: false },
                    { text: "D. tried", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn A?</b><br>C·∫•u tr√∫c ng·ªØ ph√°p: <b>tell sb TO DO sth</b> (b·∫£o ai ƒë√≥ l√†m g√¨).<br>D·ªãch: 'B·∫°n c√¥ ·∫•y b·∫£o c√¥ ·∫•y H√ÉY TH·ª¨ n√≥ m·ªôt l·∫ßn trong ƒë·ªùi'."
            },
            {
                qNum: 21, text: "He immediately called an/a (21) ______",
                options: [
                    { text: "A. car", isCorrect: false },
                    { text: "B. ambulance", isCorrect: true },
                    { text: "C. motorbike", isCorrect: false },
                    { text: "D. taxi", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn B?</b><br>D·ª±a v√†o ng·ªØ c·∫£nh: C√¥ g√°i b·ªã tai n·∫°n, g√£y 52 chi·∫øc x∆∞∆°ng v√† c√≥ v·∫øt th∆∞∆°ng nghi√™m tr·ªçng ·ªü m·∫∑t -> C·∫ßn g·ªçi 'xe c·ª©u th∆∞∆°ng' (ambulance).<br>C√°c t·ª´ kh√°c kh√¥ng ph√π h·ª£p: car (xe h∆°i), motorbike (xe m√°y), taxi (xe taxi)."
            },
            {
                qNum: 22, text: "and told her that she (22) ______ fine.",
                options: [
                    { text: "A. would to be", isCorrect: false },
                    { text: "B. would being", isCorrect: false },
                    { text: "C. be would", isCorrect: false },
                    { text: "D. would be", isCorrect: true }
                ],
                exp: "<b>T·∫°i sao ch·ªçn D?</b><br>ƒê√¢y l√† c√¢u t∆∞·ªùng thu·∫≠t (Reported Speech) trong qu√° kh·ª© ('told'). C√¢u tr·ª±c ti·∫øp c√≥ th·ªÉ l√†: 'You will be fine'. Khi l√πi th√¨, 'will be' bi·∫øn th√†nh 'would be'.<br>Sau 'would' c·ªông ƒë·ªông t·ª´ nguy√™n th·ªÉ kh√¥ng to -> 'would be'."
            },
            {
                qNum: 23, text: "she had been between death and life (23) ______",
                options: [
                    { text: "A. for three days", isCorrect: true },
                    { text: "B. days three for", isCorrect: false },
                    { text: "C. three days for", isCorrect: false },
                    { text: "D. for three day", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn A?</b><br>ƒê·ªÉ ch·ªâ m·ªôt kho·∫£ng th·ªùi gian (duration), ta d√πng gi·ªõi t·ª´ 'for' + kho·∫£ng th·ªùi gian. 'Three' l√† s·ªë nhi·ªÅu n√™n 'day' ph·∫£i th√™m 's' -> 'for three days'. (Trong 3 ng√†y)."
            },
            {
                qNum: 24, text: "told the man that he (24) ______ the God to her.",
                options: [
                    { text: "A. is", isCorrect: false },
                    { text: "B. are", isCorrect: false },
                    { text: "C. was", isCorrect: true },
                    { text: "D. would", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn C?</b><br>C√¢u t∆∞·ªùng thu·∫≠t v·ªõi ƒë·ªông t·ª´ gi·ªõi thi·ªáu ·ªü qu√° kh·ª© ('told'). Do ƒë√≥ m·ªánh ƒë·ªÅ sau ph·∫£i l√πi th√¨ v·ªÅ qu√° kh·ª©. Ng√¥i 'he' ƒëi v·ªõi to-be s·ªë √≠t ·ªü qu√° kh·ª© l√† 'was'.<br>D·ªãch: '...n√≥i v·ªõi ng∆∞·ªùi ƒë√†n √¥ng r·∫±ng anh ·∫•y ch√≠nh l√† Th∆∞·ª£ng ƒë·∫ø ƒë·ªëi v·ªõi c√¥ ·∫•y.'"
            },
            {
                qNum: 31, text: "Question 31: What is the main idea of the passage?",
                options: [
                    { text: "A. The history of the English language", isCorrect: false },
                    { text: "B. Why English is a global language and its importance in various fields.", isCorrect: true },
                    { text: "C. How many people speak English worldwide", isCorrect: false },
                    { text: "D. The challenges of learning English as a second language", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn B?</b><br>C√¢u ch·ªß ƒë·ªÅ n·∫±m ·ªü ƒëo·∫°n 1: 'Why is English so popular, though? And why has it become a global language?' C√°c ƒëo·∫°n sau gi·∫£i th√≠ch t·∫ßm quan tr·ªçng c·ªßa ti·∫øng Anh trong Kinh doanh (Business), Khoa h·ªçc/Y h·ªçc (Science/Medicine), v√† Du l·ªãch (Travel). Do ƒë√≥ B l√† √Ω ch√≠nh bao qu√°t nh·∫•t."
            },
            {
                qNum: 32, text: "Question 32: Why do more and more people are learning English?",
                options: [
                    { text: "A. Be hired by a top company", isCorrect: true },
                    { text: "B. Expand international trade", isCorrect: false },
                    { text: "C. Require a certain degree", isCorrect: false },
                    { text: "D. Make contact with foreigners.", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn A?</b><br>D·∫´n ch·ª©ng ƒëo·∫°n 2: '...so in order to get a position with a top company, more and more people are learning English.' (ƒê·ªÉ c√≥ ƒë∆∞·ª£c m·ªôt v·ªã tr√≠ trong m·ªôt c√¥ng ty h√†ng ƒë·∫ßu, ng√†y c√†ng c√≥ nhi·ªÅu ng∆∞·ªùi h·ªçc ti·∫øng Anh)."
            },
            {
                qNum: 33, text: "Question 33: The noun \"steps\" used in the phrase \"take your first steps\" means _______.",
                options: [
                    { text: "A. movements", isCorrect: false },
                    { text: "B. actions", isCorrect: true },
                    { text: "C. feet", isCorrect: false },
                    { text: "D. stages", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn B?</b><br>Trong c·ª•m idiom 'take steps', 'steps' kh√¥ng mang nghƒ©a ƒëen l√† b∆∞·ªõc ch√¢n (movements/feet), m√† c√≥ nghƒ©a l√† 'h√†nh ƒë·ªông' (actions) ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c ƒëi·ªÅu g√¨ ƒë√≥. D·ªãch: 'Th·ª±c hi·ªán nh·ªØng h√†nh ƒë·ªông/b∆∞·ªõc ƒë·∫ßu ti√™n ƒë·ªÉ tr·ªü th√†nh...'"
            },
            {
                qNum: 34, text: "Question 34: Which of the following statements is NOT TRUE in the passage?",
                options: [
                    { text: "A. Speaking English fluently is necessary even if you are on the ground staff", isCorrect: false },
                    { text: "B. You can learn English from online resources or other English speakers.", isCorrect: false },
                    { text: "C. It's better to take online English classes than physical classes.", isCorrect: true },
                    { text: "D. There are nearly 800 million English speakers, both as first and second language.", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn C?</b><br>B√†i ƒë·ªçc c√≥ nh·∫Øc ƒë·∫øn vi·ªác h·ªçc qua online resources (ƒëo·∫°n cu·ªëi), nh∆∞ng <b>KH√îNG H·ªÄ</b> so s√°nh r·∫±ng h·ªçc online t·ªët h∆°n h·ªçc tr·ª±c ti·∫øp (physical classes). Th√¥ng tin n√†y kh√¥ng c√≥/sai so v·ªõi b√†i ƒë·ªçc (Not Given/False)."
            },
            {
                qNum: 35, text: "Question 35: Why is English important if you want to pursue a medical career?",
                options: [
                    { text: "A. Because all journals of the world are published in English", isCorrect: false },
                    { text: "B. Because most medical research reports are written by English scientists", isCorrect: false },
                    { text: "C. Because medicine conferences are often held in English", isCorrect: false },
                    { text: "D. Because many medical terms are English.", isCorrect: true }
                ],
                exp: "<b>T·∫°i sao ch·ªçn D?</b><br>D·∫´n ch·ª©ng ƒëo·∫°n 3: 'Much of the technical terminology is based on English words...' (Ph·∫ßn l·ªõn thu·∫≠t ng·ªØ chuy√™n ng√†nh ƒë∆∞·ª£c d·ª±a tr√™n c√°c t·ª´ ti·∫øng Anh).<br>A sai v√¨ b√†i n√≥i 'you'll read about them in journals... published in English', kh√¥ng ph·∫£i 't·∫•t c·∫£' (all). B sai v√¨ khoa h·ªçc gia c√≥ th·ªÉ t·ª´ 'China or Norway'."
            },
            {
                qNum: 36, text: "Question 36: The word \"essential\" is OPPOSITE in meaning to _______.",
                options: [
                    { text: "A. important", isCorrect: false },
                    { text: "B. vital", isCorrect: false },
                    { text: "C. crucial", isCorrect: false },
                    { text: "D. worthless", isCorrect: true }
                ],
                exp: "<b>T·∫°i sao ch·ªçn D?</b><br>ƒê·ªÅ b√†i y√™u c·∫ßu t√¨m t·ª´ <b>TR√ÅI NGHƒ®A (OPPOSITE)</b>.<br>'Essential' (adj) nghƒ©a l√† v√¥ c√πng quan tr·ªçng, thi·∫øt y·∫øu. Tr√°i nghƒ©a v·ªõi n√≥ l√† 'worthless' (v√¥ gi√° tr·ªã, kh√¥ng c√≥ √≠ch l·ª£i g√¨). C√°c t·ª´ important, vital, crucial ƒë·ªÅu l√† t·ª´ ƒë·ªìng nghƒ©a."
            },
            {
                qNum: 37, text: "Question 37: It generates (37) _______.",
                options: [
                    { text: "A. tourists contribute to the global economy in numerous ways.", isCorrect: false },
                    { text: "B. billions of dollars in revenue annually.", isCorrect: true },
                    { text: "C. Tourism creates jobs and opportunities for local communities.", isCorrect: false },
                    { text: "D. in many popular destinations.", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn B?</b><br>C√¢u tr∆∞·ªõc nh·∫Øc ƒë·∫øn 'economies' (n·ªÅn kinh t·∫ø). ƒê·ªông t·ª´ 'generate' (t·∫°o ra) c·∫ßn m·ªôt t√¢n ng·ªØ ch·ªâ ti·ªÅn b·∫°c/thu nh·∫≠p ph√≠a sau. R√°p B v√†o: 'It generates billions of dollars in revenue annually' (N√≥ t·∫°o ra h√†ng t·ª∑ ƒë√¥ la doanh thu m·ªói nƒÉm) -> Ho√†n to√†n h·ª£p l√Ω ng·ªØ ph√°p v√† logic."
            },
            {
                qNum: 38, text: "Question 38: Tourists travel for various reasons, such as leisure, business, or cultural exploration. (38) _______.",
                options: [
                    { text: "A. tourists contribute to the global economy in numerous ways.", isCorrect: false },
                    { text: "B. billions of dollars in revenue annually.", isCorrect: false },
                    { text: "C. Tourism creates jobs and opportunities for local communities.", isCorrect: true },
                    { text: "D. in many popular destinations.", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn C?</b><br>M·∫°ch vƒÉn ƒëang li·ªát k√™ c√°c l·ª£i √≠ch t√≠ch c·ª±c c·ªßa du l·ªãch ƒë·ªëi v·ªõi n·ªÅn kinh t·∫ø v√† x√£ h·ªôi. C√¢u C b·ªï sung √Ω nghƒ©a c·ª±c k·ª≥ ph√π h·ª£p: 'Du l·ªãch t·∫°o ra vi·ªác l√†m v√† c∆° h·ªôi cho c·ªông ƒë·ªìng ƒë·ªãa ph∆∞∆°ng'."
            },
            {
                qNum: 39, text: "Question 39: Over-tourism is a growing concern (39) _______.",
                options: [
                    { text: "A. tourists contribute to the global economy in numerous ways.", isCorrect: false },
                    { text: "B. billions of dollars in revenue annually.", isCorrect: false },
                    { text: "C. Tourism creates jobs and opportunities for local communities.", isCorrect: false },
                    { text: "D. in many popular destinations.", isCorrect: true }
                ],
                exp: "<b>T·∫°i sao ch·ªçn D?</b><br>M·ªëi lo ng·∫°i v·ªÅ s·ª± qu√° t·∫£i du l·ªãch (Over-tourism) th∆∞·ªùng di·ªÖn ra ·ªü ƒë√¢u? ƒê√≥ ch√≠nh l√† '·ªü nhi·ªÅu ƒëi·ªÉm ƒë·∫øn ph·ªï bi·∫øn' (in many popular destinations). C·∫•u tr√∫c gi·ªõi t·ª´ gh√©p v√†o t·∫°o th√†nh c√¢u ho√†n ch·ªânh h·ª£p logic."
            },
            {
                qNum: 40, text: "Question 40: In conclusion, (40) _______.",
                options: [
                    { text: "A. tourists contribute to the global economy in numerous ways.", isCorrect: true },
                    { text: "B. billions of dollars in revenue annually.", isCorrect: false },
                    { text: "C. Tourism creates jobs and opportunities for local communities.", isCorrect: false },
                    { text: "D. in many popular destinations.", isCorrect: false }
                ],
                exp: "<b>T·∫°i sao ch·ªçn A?</b><br>'In conclusion' (T√≥m l·∫°i) d√πng ƒë·ªÉ t·ªïng k·∫øt l·∫°i √Ω ch√≠nh c·ªßa c·∫£ ƒëo·∫°n. √ù A: 'kh√°ch du l·ªãch ƒë√≥ng g√≥p v√†o n·ªÅn kinh t·∫ø to√†n c·∫ßu theo v√¥ s·ªë c√°ch' ch√≠nh l√† c√¢u t·ªïng k·∫øt bao qu√°t nh·∫•t cho c·∫£ l·ª£i √≠ch t√†i ch√≠nh v√† vi·ªác l√†m ƒë√£ ƒë·ªÅ c·∫≠p ·ªü tr√™n."
            }
        ];

        let score = 0;
        let answeredQuestions = 0;
        const totalQuestions = quizData.length;

        // --- RENDER & SHUFFLE ---
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderQuiz() {
            const container = document.getElementById('questions-container');
            quizData.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `card-${index}`;
                
                let html = `<div class="question-text">${q.text}</div>`;
                html += `<div class="options-grid" id="grid-${index}">`;
                
                // Shuffle options specifically for this question instance
                let shuffledOptions = shuffle([...q.options]);
                
                shuffledOptions.forEach((opt, optIndex) => {
                    html += `<button class="btn-option" onclick="handleAnswer(${index}, ${opt.isCorrect}, this)">${opt.text}</button>`;
                });
                
                html += `</div>`;
                html += `<div class="explanation-box" id="exp-${index}">
                            <div class="exp-title">üåü GI·∫¢I TH√çCH CHI TI·∫æT:</div>
                            ${q.exp}
                         </div>`;
                
                card.innerHTML = html;
                container.appendChild(card);
            });
        }

        // --- HANDLE INTERACTION ---
        function handleAnswer(qIndex, isCorrect, btnElement) {
            // Disable all buttons in this grid
            const grid = document.getElementById(`grid-${qIndex}`);
            const buttons = grid.querySelectorAll('.btn-option');
            
            // Check if already answered
            if(grid.dataset.answered) return;
            grid.dataset.answered = "true";
            
            answeredQuestions++;

            buttons.forEach(btn => {
                btn.style.pointerEvents = 'none'; // disable click
            });

            if(isCorrect) {
                btnElement.classList.add('correct');
                playSound('correct');
                triggerConfetti();
                score++;
            } else {
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight correct answer
                buttons.forEach(btn => {
                    if(btn.innerText.includes(quizData[qIndex].options.find(o => o.isCorrect).text)) {
                        btn.style.border = "3px solid var(--correct)";
                        btn.style.color = "var(--correct)";
                    }
                });
            }

            // Show explanation
            document.getElementById(`exp-${qIndex}`).style.display = 'block';
        }

        function submitQuiz() {
            if(answeredQuestions < totalQuestions) {
                if(!confirm('B·∫°n ch∆∞a ho√†n th√†nh t·∫•t c·∫£ c√¢u h·ªèi. B·∫°n c√≥ ch·∫Øc mu·ªën n·ªôp b√†i kh√¥ng?')) return;
            }
            
            clearInterval(timerInterval);
            
            const modal = document.getElementById('result-modal');
            const scoreDisplay = document.getElementById('final-score');
            const title = document.getElementById('feedback-title');
            const text = document.getElementById('feedback-text');
            
            scoreDisplay.innerText = `${score}/${totalQuestions}`;
            
            let percentage = score / totalQuestions;
            if (percentage === 1) {
                title.innerText = "Thi√™n t√†i üß†‚ú®!";
                title.style.color = "#00D26A";
                text.innerText = "B·∫°n ƒë·∫°t ƒëi·ªÉm tuy·ªát ƒë·ªëi. Kh√¥ng c√≥ g√¨ l√†m kh√≥ ƒë∆∞·ª£c b·∫°n c·∫£!";
                triggerConfetti();
                setTimeout(triggerConfetti, 500);
            } else if (percentage >= 0.7) {
                title.innerText = "L√†m t·ªët l·∫Øm üëè!";
                title.style.color = "var(--primary)";
                text.innerText = "Ki·∫øn th·ª©c c·ªßa b·∫°n r·∫•t v·ªØng. C·ªë g·∫Øng th√™m ch√∫t n·ªØa ƒë·ªÉ ƒë·∫°t ƒëi·ªÉm t·ªëi ƒëa nha!";
                triggerConfetti();
            } else if (percentage >= 0.5) {
                title.innerText = "T·ªët! Nh∆∞ng c·∫ßn c·ªë g·∫Øng h∆°n üí™";
                title.style.color = "var(--secondary)";
                text.innerText = "B·∫°n ƒë√£ hi·ªÉu b√†i c∆° b·∫£n, h√£y ƒë·ªçc k·ªπ ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt ƒë·ªÉ c·∫£i thi·ªán nh√©.";
            } else {
                title.innerText = "C·ªë l√™n nh√© ü•∫!";
                title.style.color = "var(--wrong)";
                text.innerText = "ƒê·ª´ng n·∫£n ch√≠! H√£y xem l·∫°i b·∫£ng t·ª´ v·ª±ng v√† gi·∫£i th√≠ch chi ti·∫øt, b·∫°n s·∫Ω l√†m t·ªët h∆°n ·ªü l·∫ßn sau.";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('result-modal').style.display = 'none';
        }

        // Initialize
        renderQuiz();
    </script>
</body>
</html>
