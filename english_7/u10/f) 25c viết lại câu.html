<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·∫Øp x·∫øp & Vi·∫øt c√¢u ch·ªß ƒë·ªÅ NƒÉng l∆∞·ª£ng - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #8854C0; /* T√≠m h·ªìng nh·∫°t */
            --secondary-color: #00C9A7; /* Xanh ng·ªçc */
            --correct-color: #00D26A; /* Xanh l√° */
            --wrong-color: #FF4757; /* ƒê·ªè cam */
            --bg-color: #f0f3f8;
            --card-bg: #ffffff;
            --text-color: #2f3542;
            --shadow-color: rgba(0, 0, 0, 0.15);
            --btn-shadow: 0px 6px 0px;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#e1e1e1 10%, transparent 10%), radial-gradient(#e1e1e1 10%, transparent 10%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 900px;
            position: relative;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: #fff;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px var(--shadow-color);
            border-bottom: 5px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        h1 {
            font-family: 'Quicksand', sans-serif;
            color: var(--primary-color);
            font-size: 2.2rem;
            margin: 0;
            text-transform: uppercase;
            font-weight: 800;
            text-shadow: 2px 2px 0px #eee;
        }

        .subtitle {
            color: #7f8fa6;
            font-size: 1.1rem;
            margin-top: 5px;
            font-weight: 700;
        }

        .teacher-badge {
            display: inline-block;
            background: var(--secondary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-top: 10px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* Question Card Styles */
        .quiz-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(136, 84, 192, 0.1);
            border: 2px solid #eee;
            transition: transform 0.3s ease;
            position: relative;
        }

        .quiz-card:hover {
            transform: translateY(-5px);
        }

        .question-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .question-number {
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.2rem;
            margin-right: 15px;
            flex-shrink: 0;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2f3542;
            line-height: 1.5;
            flex-grow: 1;
        }

        .question-text span.highlight {
            color: var(--primary-color);
            background: #f3e5f5;
            padding: 2px 8px;
            border-radius: 6px;
        }

        /* Options Styles */
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-btn {
            background: #f7f9fc;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.05rem;
            color: #57606f;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            box-shadow: 0 4px 0 #e1e8ed;
            outline: none;
            display: flex;
            align-items: flex-start;
        }

        .option-btn .label {
            font-weight: 800;
            margin-right: 10px;
            min-width: 25px;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #d1d8dd;
            background: white;
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #d1d8dd;
        }

        /* Correct/Wrong States */
        .option-btn.correct {
            background-color: #d1fae5;
            border-color: var(--correct-color);
            color: #065f46;
            box-shadow: 0 4px 0 #34d399;
        }
        
        .option-btn.correct::after {
            content: '‚úî';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--correct-color);
        }

        .option-btn.wrong {
            background-color: #ffe5e7;
            border-color: var(--wrong-color);
            color: #9b1c1c;
            box-shadow: 0 4px 0 #ff7675;
            animation: shake 0.5s;
        }

        .option-btn.wrong::after {
            content: '‚úò';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--wrong-color);
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #fff8e1;
            border: 2px dashed #ffc107;
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-box.show {
            display: block;
        }

        .explanation-header {
            font-weight: 800;
            color: #d35400;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        .explanation-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #2d3436;
            white-space: pre-line; /* Respect new lines from text */
        }
        
        .explanation-content strong {
            color: var(--primary-color);
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Submit Button */
        .submit-container {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 60px;
        }

        .submit-btn {
            background: var(--primary-color);
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            padding: 15px 50px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #5f2a9e;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 0 #5f2a9e;
            background: #9b59b6;
        }

        .submit-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #5f2a9e;
        }

        /* Result Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .result-modal {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: zoomIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-top: 10px solid var(--secondary-color);
        }

        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 20px 0;
            text-shadow: 3px 3px 0px #eee;
        }

        .message-display {
            font-size: 1.5rem;
            color: #555;
            margin-bottom: 30px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
        }

        .close-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 0 #009688;
        }
        
        .close-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #009688;
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <header>
            <div class="teacher-badge">Gi√°o vi√™n: Ms Mai An ULIS</div>
            <h1>S·∫Øp x·∫øp & Vi·∫øt c√¢u</h1>
            <div class="subtitle">Ch·ªß ƒë·ªÅ: NƒÉng l∆∞·ª£ng (Energy) - 25 C√¢u h·ªèi</div>
        </header>

        <div id="quiz-container">
            <!-- Questions will be injected here via JavaScript -->
        </div>

        <div class="submit-container">
            <button class="submit-btn" onclick="submitQuiz()">N·ªôp b√†i</button>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="modal-overlay" id="resultModal">
        <div class="result-modal">
            <h2 style="color: var(--secondary-color); margin: 0;">K·∫æT QU·∫¢ C·ª¶A EM</h2>
            <div class="score-display" id="finalScore">0/25</div>
            <div class="message-display" id="resultMessage">L√†m t·ªët l·∫Øm!</div>
            <button class="close-btn" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

    <script>
        // --- QUIZ DATA ---
        const quizData = [
            {
                "id": 1,
                "question": "Exercise 1. Q1: is/ renewable/ Hydro power/ a/ of/ source/ because/ energy/ it/ from/ water/ comes",
                "options": [
                    { "text": "Hydro power is a renewable source of energy because it comes from water.", "correct": true },
                    { "text": "Hydro power is a source of renewable energy because it comes from water.", "correct": false },
                    { "text": "Hydro power comes from water because it is a renewable source of energy.", "correct": false },
                    { "text": "Hydro power is a renewable energy of source because it comes from water.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Hydro power (n): Th·ªßy ƒëi·ªán.\n- renewable source of energy (np): ngu·ªìn nƒÉng l∆∞·ª£ng t√°i t·∫°o.\n- comes from (vp): ƒë·∫øn t·ª´/xu·∫•t ph√°t t·ª´.\n\n2. D·ªãch nghƒ©a: Th·ªßy ƒëi·ªán l√† m·ªôt ngu·ªìn nƒÉng l∆∞·ª£ng t√°i t·∫°o b·ªüi v√¨ n√≥ ƒë·∫øn t·ª´ n∆∞·ªõc.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Ch·ªß ng·ªØ 1: 'Hydro power' + ƒë·ªông t·ª´ 'is' + c·ª•m danh t·ª´ 'a renewable source of energy'.\n- Li√™n t·ª´ 'because' n·ªëi hai m·ªánh ƒë·ªÅ.\n- M·ªánh ƒë·ªÅ 2: Ch·ªß ng·ªØ 'it' + ƒë·ªông t·ª´ 'comes from' + t√¢n ng·ªØ 'water'."
            },
            {
                "id": 2,
                "question": "Exercise 1. Q2: non-renewable/ fuels/ Fossil/ sources/ energy/ are",
                "options": [
                    { "text": "Fossil fuels are non-renewable energy sources.", "correct": true },
                    { "text": "Fossil fuels are energy sources non-renewable.", "correct": false },
                    { "text": "Energy sources are non-renewable fossil fuels.", "correct": false },
                    { "text": "Non-renewable fuels are fossil energy sources.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Fossil fuels (n): Nhi√™n li·ªáu h√≥a th·∫°ch.\n- non-renewable (adj): kh√¥ng t√°i t·∫°o.\n- energy sources (n): ngu·ªìn nƒÉng l∆∞·ª£ng.\n\n2. D·ªãch nghƒ©a: Nhi√™n li·ªáu h√≥a th·∫°ch l√† c√°c ngu·ªìn nƒÉng l∆∞·ª£ng kh√¥ng th·ªÉ t√°i t·∫°o.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Ch·ªß ng·ªØ: 'Fossil fuels' (s·ªë nhi·ªÅu).\n- ƒê·ªông t·ª´: 'are'.\n- B·ªï ng·ªØ: C·ª•m danh t·ª´ 'non-renewable energy sources' (T√≠nh t·ª´ 'non-renewable' ƒë·ª©ng tr∆∞·ªõc danh t·ª´ gh√©p 'energy sources')."
            },
            {
                "id": 3,
                "question": "Exercise 1. Q3: are/ We/ looking for/ sources of energy/ cheap, / clean/ and effective",
                "options": [
                    { "text": "We are looking for cheap, clean and effective sources of energy.", "correct": true },
                    { "text": "We are looking for sources of energy cheap, clean and effective.", "correct": false },
                    { "text": "We are looking for effective, clean and cheap sources of energy.", "correct": false },
                    { "text": "We are looking for sources of cheap, clean and effective energy.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- looking for (vp): t√¨m ki·∫øm.\n- cheap, clean and effective (adj): r·∫ª, s·∫°ch v√† hi·ªáu qu·∫£.\n- sources of energy (n): ngu·ªìn nƒÉng l∆∞·ª£ng.\n\n2. D·ªãch nghƒ©a: Ch√∫ng t√¥i ƒëang t√¨m ki·∫øm c√°c ngu·ªìn nƒÉng l∆∞·ª£ng r·∫ª, s·∫°ch v√† hi·ªáu qu·∫£.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Ch·ªß ng·ªØ 'We' + 'are looking for'.\n- Sau ƒë√≥ l√† c·ª•m t√¢n ng·ªØ: Chu·ªói t√≠nh t·ª´ 'cheap, clean and effective' b·ªï nghƒ©a cho danh t·ª´ 'sources of energy'."
            },
            {
                "id": 4,
                "question": "Exercise 1. Q4: will/ We/ solar energy/use/ solve/ to/ the problem/ of energy shortage",
                "options": [
                    { "text": "We will use solar energy to solve the problem of energy shortage.", "correct": true },
                    { "text": "We will solve the problem of energy shortage to use solar energy.", "correct": false },
                    { "text": "We will use the problem of energy shortage to solve solar energy.", "correct": false },
                    { "text": "We will use solar energy of the problem to solve energy shortage.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- solar energy (n): nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi.\n- solve (v): gi·∫£i quy·∫øt.\n- energy shortage (n): s·ª± thi·∫øu h·ª•t nƒÉng l∆∞·ª£ng.\n\n2. D·ªãch nghƒ©a: Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ thi·∫øu h·ª•t nƒÉng l∆∞·ª£ng.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C·∫•u tr√∫c: S + will use + O (solar energy) + to V (m·ª•c ƒë√≠ch) + O.\n- 'the problem of energy shortage' l√† c·ª•m danh t·ª´ c·ªë ƒë·ªãnh."
            },
            {
                "id": 5,
                "question": "Exercise 1. Q5: will/ They/ a/ build/ hydro power station/ next year/ in/ area/ this",
                "options": [
                    { "text": "They will build a hydro power station in this area next year.", "correct": true },
                    { "text": "They will build a hydro power station next year in this area.", "correct": false },
                    { "text": "They will build a station hydro power in this area next year.", "correct": false },
                    { "text": "They will build this hydro power station in a area next year.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- build (v): x√¢y d·ª±ng.\n- hydro power station (n): tr·∫°m th·ªßy ƒëi·ªán.\n- in this area (adv): ·ªü khu v·ª±c n√†y.\n- next year (adv): nƒÉm sau.\n\n2. D·ªãch nghƒ©a: H·ªç s·∫Ω x√¢y m·ªôt tr·∫°m th·ªßy ƒëi·ªán ·ªü khu v·ª±c n√†y v√†o nƒÉm sau.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Tr·∫≠t t·ª± tr·∫°ng t·ª´: N∆°i ch·ªën (in this area) ƒë·ª©ng tr∆∞·ªõc Th·ªùi gian (next year)."
            },
            {
                "id": 6,
                "question": "Exercise 1. Q6: about / She / is / types / talking / of/ energy sources / renewable/.",
                "options": [
                    { "text": "She is talking about types of renewable energy sources.", "correct": true },
                    { "text": "She is talking about renewable types of energy sources.", "correct": false },
                    { "text": "She is talking about renewable energy sources of types.", "correct": false },
                    { "text": "She is about talking types of renewable energy sources.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- talking about (v): n√≥i v·ªÅ.\n- types of (n): c√°c lo·∫°i.\n- renewable energy sources (n): c√°c ngu·ªìn nƒÉng l∆∞·ª£ng t√°i t·∫°o.\n\n2. D·ªãch nghƒ©a: C√¥ ·∫•y ƒëang n√≥i v·ªÅ c√°c lo·∫°i ngu·ªìn nƒÉng l∆∞·ª£ng t√°i t·∫°o.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C·∫•u tr√∫c ti·∫øp di·ªÖn: S + is talking + about + O.\n- C·ª•m danh t·ª´: types of + (adj) renewable + (n) energy sources."
            },
            {
                "id": 7,
                "question": "Exercise 1. Q7: project / they / doing / Are / a/ protecting / on / environment /?",
                "options": [
                    { "text": "Are they doing a project on protecting environment?", "correct": true },
                    { "text": "Are they doing a protecting project on environment?", "correct": false },
                    { "text": "Are they protecting a project on doing environment?", "correct": false },
                    { "text": "Doing they are a project on protecting environment?", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- doing a project (vp): l√†m m·ªôt d·ª± √°n.\n- on (prep): v·ªÅ (ch·ªß ƒë·ªÅ g√¨).\n- protecting environment (np): b·∫£o v·ªá m√¥i tr∆∞·ªùng.\n\n2. D·ªãch nghƒ©a: C√≥ ph·∫£i h·ªç ƒëang l√†m m·ªôt d·ª± √°n v·ªÅ b·∫£o v·ªá m√¥i tr∆∞·ªùng kh√¥ng?\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C√¢u h·ªèi Yes/No th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn: Are + S + V-ing...?\n- C·∫•u tr√∫c: project on + V-ing (d·ª± √°n v·ªÅ vi·ªác g√¨)."
            },
            {
                "id": 8,
                "question": "Exercise 1. Q8: Does / wind / come / from / wind energy /?",
                "options": [
                    { "text": "Does wind energy come from wind?", "correct": true },
                    { "text": "Does wind come from wind energy?", "correct": false },
                    { "text": "Does come wind form wind energy?", "correct": false },
                    { "text": "Does wind energy from come wind?", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- wind energy (n): nƒÉng l∆∞·ª£ng gi√≥.\n- come from (v): ƒë·∫øn t·ª´.\n- wind (n): gi√≥.\n\n2. D·ªãch nghƒ©a: C√≥ ph·∫£i nƒÉng l∆∞·ª£ng gi√≥ ƒë·∫øn t·ª´ gi√≥ kh√¥ng?\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C√¢u h·ªèi hi·ªán t·∫°i ƒë∆°n: Does + S (wind energy) + V (come) + from + O (wind)?"
            },
            {
                "id": 9,
                "question": "Exercise 1. Q9: going out / He / turns off / always / the lights / before /.",
                "options": [
                    { "text": "He always turns off the lights before going out.", "correct": true },
                    { "text": "He turns always off the lights before going out.", "correct": false },
                    { "text": "He always turns off the lights going out before.", "correct": false },
                    { "text": "Before going out he always turns off the lights.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- always (adv): lu√¥n lu√¥n.\n- turns off (v): t·∫Øt.\n- before going out: tr∆∞·ªõc khi ra ngo√†i.\n\n2. D·ªãch nghƒ©a: Anh ·∫•y lu√¥n t·∫Øt ƒë√®n tr∆∞·ªõc khi ra ngo√†i.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Tr·∫°ng t·ª´ t·∫ßn su·∫•t 'always' ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ th∆∞·ªùng 'turns off'.\n- 'Before' + V-ing (going out)."
            },
            {
                "id": 10,
                "question": "Exercise 1. Q10: hydro energy / The / is / teacher / right now / teaching / about/ us/.",
                "options": [
                    { "text": "The teacher is teaching us about hydro energy right now.", "correct": true },
                    { "text": "The teacher is teaching about hydro energy us right now.", "correct": false },
                    { "text": "Right now the teacher is teaching us about hydro energy.", "correct": false },
                    { "text": "The teacher is teaching us about right now hydro energy.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- teacher (n): gi√°o vi√™n.\n- teaching us (vp): d·∫°y ch√∫ng t√¥i.\n- about (prep): v·ªÅ.\n- right now (adv): ngay l√∫c n√†y.\n\n2. D·ªãch nghƒ©a: Gi√°o vi√™n ƒëang d·∫°y ch√∫ng t√¥i v·ªÅ nƒÉng l∆∞·ª£ng th·ªßy ƒëi·ªán ngay l√∫c n√†y.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C·∫•u tr√∫c: S (The teacher) + is teaching + O (us) + about + O (hydro energy) + Time (right now)."
            },
            {
                "id": 11,
                "question": "Exercise 1. Q11: often / My father / water / other / uses / for / recycled / purposes.",
                "options": [
                    { "text": "My father often uses recycled water for other purposes.", "correct": true },
                    { "text": "My father uses often recycled water for other purposes.", "correct": false },
                    { "text": "My father often uses water recycled for other purposes.", "correct": false },
                    { "text": "My father often uses other water for recycled purposes.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- often (adv): th∆∞·ªùng.\n- recycled water (n): n∆∞·ªõc t√°i ch·∫ø.\n- other purposes (n): c√°c m·ª•c ƒë√≠ch kh√°c.\n\n2. D·ªãch nghƒ©a: B·ªë t√¥i th∆∞·ªùng s·ª≠ d·ª•ng n∆∞·ªõc t√°i ch·∫ø cho c√°c m·ª•c ƒë√≠ch kh√°c.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- S (My father) + adv (often) + V (uses) + O (recycled water) + prep (for) + O (other purposes)."
            },
            {
                "id": 12,
                "question": "Exercise 1. Q12: use / Do / you / in / energy / your house? / solar",
                "options": [
                    { "text": "Do you use solar energy in your house?", "correct": true },
                    { "text": "Do you use energy solar in your house?", "correct": false },
                    { "text": "Do you in your house use solar energy?", "correct": false },
                    { "text": "Do solar energy use you in your house?", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- solar energy (n): nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi.\n- in your house (adv): trong nh√† b·∫°n.\n\n2. D·ªãch nghƒ©a: B·∫°n c√≥ s·ª≠ d·ª•ng nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi trong nh√† b·∫°n kh√¥ng?\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\nC√¢u h·ªèi Yes/No hi·ªán t·∫°i ƒë∆°n: Do + S (you) + V (use) + O (solar energy) + Place?"
            },
            {
                "id": 13,
                "question": "Exercise 1. Q13: save / natural resources / You / reduce landfill / by / can / and / recycling.",
                "options": [
                    { "text": "You can save natural resources and reduce landfill by recycling.", "correct": true },
                    { "text": "You can reduce natural resources and save landfill by recycling.", "correct": false },
                    { "text": "You can save landfill and reduce natural resources by recycling.", "correct": false },
                    { "text": "You can by recycling save natural resources and reduce landfill.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- save natural resources: ti·∫øt ki·ªám t√†i nguy√™n thi√™n nhi√™n.\n- reduce landfill: gi·∫£m r√°c th·∫£i b√£i ch√¥n l·∫•p.\n- by recycling: b·∫±ng c√°ch t√°i ch·∫ø.\n\n2. D·ªãch nghƒ©a: B·∫°n c√≥ th·ªÉ ti·∫øt ki·ªám t√†i nguy√™n thi√™n nhi√™n v√† gi·∫£m r√°c th·∫£i b·∫±ng c√°ch t√°i ch·∫ø.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Modal verb 'can' + V (save... and reduce...).\n- C·ª•m 'by recycling' ch·ªâ ph∆∞∆°ng th·ª©c h√†nh ƒë·ªông."
            },
            {
                "id": 14,
                "question": "Exercise 1. Q14: water / Wind, / will be / and sun / the energy / of / the future.",
                "options": [
                    { "text": "Wind, water and sun will be the energy of the future.", "correct": true },
                    { "text": "The energy of the future will be wind, water and sun.", "correct": false },
                    { "text": "Wind, water and sun will be the future of the energy.", "correct": false },
                    { "text": "Wind, sun and water will be the energy of the future.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Wind, water and sun: Gi√≥, n∆∞·ªõc v√† m·∫∑t tr·ªùi.\n- energy of the future: nƒÉng l∆∞·ª£ng c·ªßa t∆∞∆°ng lai.\n\n2. D·ªãch nghƒ©a: Gi√≥, n∆∞·ªõc v√† m·∫∑t tr·ªùi s·∫Ω l√† nƒÉng l∆∞·ª£ng c·ªßa t∆∞∆°ng lai.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Ch·ªß ng·ªØ li·ªát k√™ 3 danh t·ª´.\n- ƒê·ªông t·ª´ 'will be'.\n- B·ªï ng·ªØ 'the energy of the future'."
            },
            {
                "id": 15,
                "question": "Exercise 1. Q15: your house / generates C02. / Heating / with coal / gas / or",
                "options": [
                    { "text": "Heating your house with coal or gas generates CO2.", "correct": true },
                    { "text": "Heating your house with gas or coal generates CO2.", "correct": false },
                    { "text": "Heating your house generates CO2 with coal or gas.", "correct": false },
                    { "text": "With coal or gas heating your house generates CO2.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Heating your house (Gerund phrase - Ch·ªß ng·ªØ): Vi·ªác s∆∞·ªüi ·∫•m nh√† b·∫°n.\n- with coal or gas: b·∫±ng than ho·∫∑c kh√≠ ƒë·ªët.\n- generates (v): t·∫°o ra/sinh ra.\n\n2. D·ªãch nghƒ©a: Vi·ªác s∆∞·ªüi ·∫•m nh√† b·∫°n b·∫±ng than ho·∫∑c kh√≠ ƒë·ªët sinh ra kh√≠ CO2.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Ch·ªß ng·ªØ l√† danh ƒë·ªông t·ª´ 'Heating...' -> ƒê·ªông t·ª´ chia s·ªë √≠t 'generates'."
            },
            {
                "id": 16,
                "question": "Exercise 2. Q1: I / think / people / should / turn / biomass / for energy.",
                "options": [
                    { "text": "I think people should turn to biomass for energy.", "correct": true },
                    { "text": "I think people should turn biomass for energy.", "correct": false },
                    { "text": "I think people should turning to biomass for energy.", "correct": false },
                    { "text": "I think people should to turn biomass for energy.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- turn to (phrasal verb): chuy·ªÉn sang d√πng/nh·ªù c·∫≠y v√†o.\n- biomass (n): nƒÉng l∆∞·ª£ng sinh kh·ªëi.\n\n2. D·ªãch nghƒ©a: T√¥i nghƒ© m·ªçi ng∆∞·ªùi n√™n chuy·ªÉn sang d√πng nƒÉng l∆∞·ª£ng sinh kh·ªëi.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C·∫•u tr√∫c: 'turn to something' (chuy·ªÉn sang c√°i g√¨). C·∫ßn th√™m gi·ªõi t·ª´ 'to'."
            },
            {
                "id": 17,
                "question": "Exercise 2. Q2: This type / energy / renewable / and abundant.",
                "options": [
                    { "text": "This type of energy is renewable and abundant.", "correct": true },
                    { "text": "This type energy is renewable and abundant.", "correct": false },
                    { "text": "This type of energy renewable and abundant.", "correct": false },
                    { "text": "This type of energy are renewable and abundant.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- type of energy (n): lo·∫°i nƒÉng l∆∞·ª£ng.\n- is (v): l√†.\n- abundant (adj): d·ªìi d√†o.\n\n2. D·ªãch nghƒ©a: Lo·∫°i nƒÉng l∆∞·ª£ng n√†y th√¨ c√≥ th·ªÉ t√°i t·∫°o v√† d·ªìi d√†o.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Th√™m gi·ªõi t·ª´ 'of' v√†o c·ª•m 'type of energy'.\n- Th√™m ƒë·ªông t·ª´ to be 'is' ƒë·ªÉ n·ªëi ch·ªß ng·ªØ v·ªõi t√≠nh t·ª´."
            },
            {
                "id": 18,
                "question": "Exercise 2. Q3: We / can / use / crop / garbage / manure / as / source of / biomass.",
                "options": [
                    { "text": "We can use crop, garbage and manure as a source of biomass.", "correct": true },
                    { "text": "We can use crop garbage manure as source of biomass.", "correct": false },
                    { "text": "We can using crop, garbage and manure as a source of biomass.", "correct": false },
                    { "text": "We can use crop, garbage and manure as sources of biomass.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- crop (n): v·ª• m√πa (ph·∫ø ph·∫©m n√¥ng nghi·ªáp).\n- manure (n): ph√¢n b√≥n (ƒë·ªông v·∫≠t).\n- as a source of: nh∆∞ m·ªôt ngu·ªìn.\n\n2. D·ªãch nghƒ©a: Ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng ph·∫ø ph·∫©m m√πa v·ª•, r√°c th·∫£i v√† ph√¢n ƒë·ªông v·∫≠t nh∆∞ m·ªôt ngu·ªìn nƒÉng l∆∞·ª£ng sinh kh·ªëi.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Th√™m d·∫•u ph·∫©y v√† t·ª´ n·ªëi 'and' khi li·ªát k√™.\n- Th√™m m·∫°o t·ª´ 'a' tr∆∞·ªõc 'source'."
            },
            {
                "id": 19,
                "question": "Exercise 2. Q4: These / source / available / everywhere / the world / so / it / easy / produce / biomass energy.",
                "options": [
                    { "text": "These sources are available everywhere in the world, so it is easy to produce biomass energy.", "correct": true },
                    { "text": "These source is available everywhere on the world, so it is easy produce biomass energy.", "correct": false },
                    { "text": "These sources are available everywhere in the world, so it easy to produce biomass energy.", "correct": false },
                    { "text": "This source is available everywhere in the world, so it is easy produce biomass energy.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- These sources (n pl): Nh·ªØng ngu·ªìn n√†y.\n- in the world: tr√™n th·∫ø gi·ªõi.\n- easy to produce: d·ªÖ d√†ng ƒë·ªÉ s·∫£n xu·∫•t.\n\n2. D·ªãch nghƒ©a: Nh·ªØng ngu·ªìn n√†y c√≥ s·∫µn ·ªü m·ªçi n∆°i tr√™n th·∫ø gi·ªõi, v√¨ v·∫≠y r·∫•t d·ªÖ ƒë·ªÉ s·∫£n xu·∫•t nƒÉng l∆∞·ª£ng sinh kh·ªëi.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- 'These' ƒëi v·ªõi danh t·ª´ s·ªë nhi·ªÅu -> 'sources'.\n- Th√™m to be 'are' cho ch·ªß ng·ªØ s·ªë nhi·ªÅu.\n- Th√™m gi·ªõi t·ª´ 'in'.\n- C·∫•u tr√∫c gi·∫£ ƒë·ªãnh: it is + adj + to V."
            },
            {
                "id": 20,
                "question": "Exercise 2. Q5: In this way / you / reduce / landfill / and / turn / waste / energy.",
                "options": [
                    { "text": "In this way, you can reduce landfill and turn waste into energy.", "correct": true },
                    { "text": "In this way, you reduce landfill and turn waste energy.", "correct": false },
                    { "text": "In this way, you reduce landfill and turn waste to energy.", "correct": false },
                    { "text": "In this way, you to reduce landfill and turn waste into energy.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- turn waste into energy: bi·∫øn r√°c th√†nh nƒÉng l∆∞·ª£ng.\n- can (modal v): c√≥ th·ªÉ (th√™m v√†o cho t·ª± nhi√™n).\n\n2. D·ªãch nghƒ©a: Theo c√°ch n√†y, b·∫°n c√≥ th·ªÉ gi·∫£m r√°c th·∫£i b√£i ch√¥n l·∫•p v√† bi·∫øn r√°c th√†nh nƒÉng l∆∞·ª£ng.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Th√™m 'can' (ho·∫∑c d√πng hi·ªán t·∫°i ƒë∆°n 'reduce' c≈©ng ƒë∆∞·ª£c, nh∆∞ng 'can' hay h∆°n).\n- Quan tr·ªçng nh·∫•t: C·∫•u tr√∫c 'turn sth INTO sth' (bi·∫øn c√°i g√¨ th√†nh c√°i g√¨)."
            },
            {
                "id": 21,
                "question": "Exercise 2. Q6: Moreover / biomass energy / cheap / and / cost / much less / coal / or oil.",
                "options": [
                    { "text": "Moreover, biomass energy is cheap and costs much less than coal or oil.", "correct": true },
                    { "text": "Moreover, biomass energy is cheap and cost much less coal or oil.", "correct": false },
                    { "text": "Moreover, biomass energy cheap and costs much less than coal or oil.", "correct": false },
                    { "text": "Moreover, biomass energy is cheap and costs much less as coal or oil.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- is cheap (v): r·∫ª.\n- costs (v): t·ªën k√©m (chia s·ªë √≠t).\n- much less than (adv): √≠t h∆°n nhi·ªÅu so v·ªõi.\n\n2. D·ªãch nghƒ©a: H∆°n n·ªØa, nƒÉng l∆∞·ª£ng sinh kh·ªëi th√¨ r·∫ª v√† t·ªën √≠t chi ph√≠ h∆°n nhi·ªÅu so v·ªõi than ho·∫∑c d·∫ßu.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Th√™m 'is'.\n- Chia ƒë·ªông t·ª´ 'costs' (s·ªë √≠t).\n- So s√°nh h∆°n 'less' ƒëi v·ªõi 'than'."
            },
            {
                "id": 22,
                "question": "Exercise 2. Q7: You / can spend / less / light / or heat / your house / by / use biomass.",
                "options": [
                    { "text": "You can spend less on lighting or heating your house by using biomass.", "correct": true },
                    { "text": "You can spend less light or heat your house by using biomass.", "correct": false },
                    { "text": "You can spend less to light or heat your house by use biomass.", "correct": false },
                    { "text": "You can spend less on light or heat your house by using biomass.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- spend money on V-ing: chi ti·ªÅn v√†o vi·ªác g√¨.\n- lighting / heating (Gerund): vi·ªác th·∫Øp s√°ng/s∆∞·ªüi ·∫•m.\n- by using (prep + V-ing): b·∫±ng c√°ch s·ª≠ d·ª•ng.\n\n2. D·ªãch nghƒ©a: B·∫°n c√≥ th·ªÉ chi √≠t ti·ªÅn h∆°n cho vi·ªác th·∫Øp s√°ng ho·∫∑c s∆∞·ªüi ·∫•m nh√† b·∫±ng c√°ch s·ª≠ d·ª•ng sinh kh·ªëi.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C·∫•u tr√∫c 'spend... on...'.\n- Chuy·ªÉn light/heat th√†nh V-ing (lighting/heating) ho·∫∑c danh t·ª´.\n- Sau gi·ªõi t·ª´ 'by' ph·∫£i l√† V-ing (using)."
            },
            {
                "id": 23,
                "question": "Exercise 2. Q8: John / use / low energy light bulbs / save electricity /.",
                "options": [
                    { "text": "John uses low energy light bulbs to save electricity.", "correct": true },
                    { "text": "John use low energy light bulbs to save electricity.", "correct": false },
                    { "text": "John uses low energy light bulbs save electricity.", "correct": false },
                    { "text": "John uses low energy light bulbs for save electricity.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- uses (v): s·ª≠ d·ª•ng (chia s·ªë √≠t).\n- low energy light bulbs (n): b√≥ng ƒë√®n ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng.\n- to save (v): ƒë·ªÉ ti·∫øt ki·ªám (m·ª•c ƒë√≠ch).\n\n2. D·ªãch nghƒ©a: John s·ª≠ d·ª•ng b√≥ng ƒë√®n ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng ƒë·ªÉ ti·∫øt ki·ªám ƒëi·ªán.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Chia ƒë·ªông t·ª´ 'uses' (John l√† ng√¥i th·ª© 3 s·ªë √≠t).\n- Th√™m 'to' ch·ªâ m·ª•c ƒë√≠ch."
            },
            {
                "id": 24,
                "question": "Exercise 2. Q9: She / not swim / the swimming pool / at the moment /.",
                "options": [
                    { "text": "She is not swimming in the swimming pool at the moment.", "correct": true },
                    { "text": "She does not swim in the swimming pool at the moment.", "correct": false },
                    { "text": "She not swimming in the swimming pool at the moment.", "correct": false },
                    { "text": "She is not swimming the swimming pool at the moment.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- is not swimming (v): ƒëang kh√¥ng b∆°i.\n- in the swimming pool: trong h·ªì b∆°i.\n- at the moment: ngay l√∫c n√†y.\n\n2. D·ªãch nghƒ©a: C√¥ ·∫•y ƒëang kh√¥ng b∆°i trong h·ªì b∆°i ngay l√∫c n√†y.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- D·∫•u hi·ªáu 'at the moment' -> Hi·ªán t·∫°i ti·∫øp di·ªÖn.\n- Th√™m gi·ªõi t·ª´ 'in'."
            },
            {
                "id": 25,
                "question": "Exercise 2. Q10: Scientists / look for / a new energy source/ replace coal / now.",
                "options": [
                    { "text": "Scientists are looking for a new energy source to replace coal now.", "correct": true },
                    { "text": "Scientists look for a new energy source to replace coal now.", "correct": false },
                    { "text": "Scientists are looking for a new energy source replace coal now.", "correct": false },
                    { "text": "Scientists is looking for a new energy source to replace coal now.", "correct": false }
                ],
                "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- are looking for (v): ƒëang t√¨m ki·∫øm.\n- to replace (v): ƒë·ªÉ thay th·∫ø.\n- now (adv): b√¢y gi·ªù.\n\n2. D·ªãch nghƒ©a: C√°c nh√† khoa h·ªçc ƒëang t√¨m ki·∫øm m·ªôt ngu·ªìn nƒÉng l∆∞·ª£ng m·ªõi ƒë·ªÉ thay th·∫ø than ƒë√° ngay b√¢y gi·ªù.\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- D·∫•u hi·ªáu 'now' -> Hi·ªán t·∫°i ti·∫øp di·ªÖn (Scientists s·ªë nhi·ªÅu -> are looking).\n- Th√™m 'to' ch·ªâ m·ª•c ƒë√≠ch (ƒë·ªÉ thay th·∫ø)."
            }
        ];

        // --- AUDIO ENGINE ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            if (type === 'correct') {
                // Ding sound (High pitch sine wave sequence)
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.5);
            } else {
                // Buzz sound (Low pitch sawtooth)
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- CONFETTI ENGINE ---
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: Math.random() * 6 - 3,
                    vy: Math.random() * 4 + 2,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                    rotation: Math.random() * 360,
                    scale: Math.random() * 0.5 + 0.5
                });
            }
        }

        function updateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, index) => {
                p.x += p.vx;
                p.y += p.vy;
                p.rotation += 2;
                
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-5 * p.scale, -5 * p.scale, 10 * p.scale, 10 * p.scale);
                ctx.restore();

                if (p.y > canvas.height) particles.splice(index, 1);
            });
            if (particles.length > 0) requestAnimationFrame(updateConfetti);
        }

        function fireConfetti() {
            createConfetti();
            updateConfetti();
        }

        // --- QUIZ LOGIC ---
        let score = 0;
        const totalQuestions = quizData.length;
        const userAnswers = new Array(totalQuestions).fill(null);

        function initQuiz() {
            const container = document.getElementById('quiz-container');
            
            quizData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.id = `card-${index}`;

                // Create options HTML
                const optionsHtml = item.options.map((opt, optIndex) => `
                    <button class="option-btn" 
                            onclick="checkAnswer(${index}, ${optIndex}, ${opt.correct}, this)">
                        <span class="label">${String.fromCharCode(65 + optIndex)}.</span>
                        ${opt.text}
                    </button>
                `).join('');

                card.innerHTML = `
                    <div class="question-header">
                        <div class="question-number">${index + 1}</div>
                        <div class="question-text">${item.question}</div>
                    </div>
                    <div class="options-grid" id="options-${index}">
                        ${optionsHtml}
                    </div>
                    <div class="explanation-box" id="explanation-${index}">
                        <div class="explanation-header">üìö Gi·∫£i th√≠ch chi ti·∫øt:</div>
                        <div class="explanation-content">${item.explanation}</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function checkAnswer(questionIndex, optIndex, isCorrect, btnElement) {
            // Prevent changing answer if already answered (optional, currently allowing retries for learning but highlighting first attempt logic usually locks)
            // Requirement: "Ngay khi h·ªçc sinh ch·ªçn ƒë√°p √°n... hi·ªán ra khung gi·∫£i th√≠ch".
            
            const optionsContainer = document.getElementById(`options-${questionIndex}`);
            const buttons = optionsContainer.getElementsByClassName('option-btn');
            
            // Disable all buttons in this question to prevent multi-guessing for scoring purpose
            // But for learning, seeing the right answer is important.
            // Let's mark the clicked one.
            
            // If this question is already answered/locked, do nothing
            if (userAnswers[questionIndex] !== null) return;
            
            userAnswers[questionIndex] = isCorrect;
            
            if (isCorrect) {
                btnElement.classList.add('correct');
                playSound('correct');
                fireConfetti();
                score++;
            } else {
                btnElement.classList.add('wrong');
                playSound('wrong');
                
                // Highlight the correct answer automatically if wrong
                Array.from(buttons).forEach((btn, idx) => {
                    if (quizData[questionIndex].options[idx].correct) {
                        setTimeout(() => btn.classList.add('correct'), 600); // Small delay
                    }
                });
            }

            // Lock buttons style
            Array.from(buttons).forEach(btn => {
                btn.disabled = true;
                btn.style.cursor = 'default';
            });

            // Show explanation
            const expBox = document.getElementById(`explanation-${questionIndex}`);
            expBox.classList.add('show');
        }

        function submitQuiz() {
            const unanswered = userAnswers.filter(a => a === null).length;
            if (unanswered > 0) {
                const confirmSubmit = confirm(`Em c√≤n ${unanswered} c√¢u ch∆∞a l√†m. Em c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i kh√¥ng?`);
                if (!confirmSubmit) return;
            }

            const finalScore = userAnswers.filter(a => a === true).length;
            document.getElementById('finalScore').innerText = `${finalScore}/${totalQuestions}`;
            
            let msg = "";
            if (finalScore === totalQuestions) msg = "Xu·∫•t s·∫Øc! Em l√† thi√™n t√†i ng·ªØ ph√°p! üåü";
            else if (finalScore >= totalQuestions * 0.8) msg = "R·∫•t t·ªët! C·ªë g·∫Øng th√™m ch√∫t n·ªØa l√† ho√†n h·∫£o! üéâ";
            else if (finalScore >= totalQuestions * 0.5) msg = "Kh√° t·ªët, nh∆∞ng c·∫ßn √¥n l·∫°i ph·∫ßn gi·∫£i th√≠ch nh√©! üí™";
            else msg = "ƒê·ª´ng bu·ªìn, h√£y xem k·ªπ ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n nh√©! üìö";
            
            document.getElementById('resultMessage').innerText = msg;
            document.getElementById('resultModal').style.display = 'flex';
            
            // Play winning sound if score is good
            if (finalScore > 0) playSound('correct');
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // Start
        initQuiz();

    </script>
</body>
</html>
