<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Difficult Student - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            /* Theme: School Conflict & Resolution (Purple/Yellow/White) */
            --primary-color: #6C5CE7; /* Teacher Purple */
            --secondary-color: #00B894; /* Green Board */
            --accent-color: #FDCB6E; /* Highlight Yellow */
            --text-dark: #2D3436;
            --text-gray: #636e72;
            --correct-color: #00D26A;
            --wrong-color: #FF4757;
            --bg-tint: #F0F3F4;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Nunito', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            color: var(--text-dark);
            background-color: var(--bg-tint);
            /* Auto-generated SVG Background */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Cdefs%3E%3CradialGradient id='g' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' stop-color='%23A29BFE' stop-opacity='0.2'/%3E%3Cstop offset='100%25' stop-color='%23DFE6E9' stop-opacity='0'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23g)'/%3E%3Ctext x='15%25' y='15%25' font-size='60' opacity='0.1'%3Eüè´%3C/text%3E%3Ctext x='85%25' y='20%25' font-size='60' opacity='0.1'%3Eüò§%3C/text%3E%3Ctext x='20%25' y='80%25' font-size='60' opacity='0.1'%3Eüë©‚Äçüè´%3C/text%3E%3Ctext x='80%25' y='80%25' font-size='60' opacity='0.1'%3Eü§ù%3C/text%3E%3C/svg%3E");
            background-size: cover;
            display: flex;
            flex-direction: column;
        }

        /* --- Header --- */
        header {
            background: white;
            padding: 10px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
            flex-shrink: 0;
            border-bottom: 3px solid var(--primary-color);
        }

        .teacher-brand {
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .teacher-brand span {
            background: var(--accent-color);
            color: var(--text-dark);
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 0.8rem;
        }

        .timer-container {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--primary-color);
            background: #F0EFFF;
            padding: 5px 20px;
            border-radius: 20px;
            border: 2px solid var(--primary-color);
            cursor: pointer;
            transition: 0.3s;
        }
        .timer-container:hover { transform: scale(1.05); }

        /* --- Main Layout --- */
        .main-container {
            display: flex;
            flex: 1;
            height: calc(100vh - 60px);
            overflow: hidden;
            position: relative;
        }

        .panel {
            flex: 1;
            height: 100%;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }
        
        /* Custom Scrollbar */
        .panel::-webkit-scrollbar { width: 8px; }
        .panel::-webkit-scrollbar-track { background: #f1f1f1; }
        .panel::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 10px; }

        /* --- Left Panel: Reading --- */
        #reading-panel {
            background: rgba(255, 255, 255, 0.9);
            border-right: 2px solid #ddd;
            padding-bottom: 60px;
        }

        .story-title {
            color: var(--text-dark);
            font-family: 'Quicksand', sans-serif;
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 3px solid var(--accent-color);
            display: inline-block;
            width: 100%;
        }

        .passage-part {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            line-height: 1.9;
            font-size: 1.05rem;
            position: relative;
            border-left: 5px solid var(--primary-color);
        }
        
        .passage-part h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
            text-transform: uppercase;
            font-weight: 800;
        }

        .blank-placeholder {
            display: inline-block;
            min-width: 30px;
            border-bottom: 2px dashed var(--text-gray);
            color: var(--primary-color);
            font-weight: bold;
            padding: 0 5px;
        }

        .trans-btn {
            background: #dfe6e9;
            color: var(--text-dark);
            border: none;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.85rem;
            margin-top: 10px;
            font-weight: 700;
            transition: 0.2s;
        }
        .trans-btn:hover { background: var(--text-dark); color: white; }

        .trans-content {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #FFF8E1; /* Light yellow paper */
            border-radius: 10px;
            font-style: italic;
            color: #555;
            animation: fadeIn 0.4s;
        }

        /* --- Glossary --- */
        .glossary-section {
            margin-top: 30px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .glossary-header {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            font-weight: bold;
            text-align: center;
        }
        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1px;
            background: #eee;
        }
        .glossary-item {
            background: white;
            padding: 10px 15px;
            font-size: 0.9rem;
        }
        .g-word { font-weight: 800; color: var(--primary-color); }
        .g-mean { color: #555; display: block; margin-top: 2px; }

        /* --- Right Panel: Exercises --- */
        #exercise-panel {
            background: rgba(240, 239, 255, 0.5);
            padding-bottom: 120px; /* Space for submit button */
        }

        .quiz-title {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 25px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.1);
            transition: transform 0.2s;
        }
        .question-card:hover { transform: translateY(-3px); }

        .q-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: 700;
            color: var(--text-gray);
        }

        .q-text {
            font-size: 1.1rem;
            margin-bottom: 20px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .opt-btn {
            background: white;
            border: 2px solid #dfe6e9;
            padding: 12px 15px;
            border-radius: 12px;
            text-align: left;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            transition: 0.2s;
            position: relative;
        }
        .opt-btn:hover:not(.disabled) {
            border-color: var(--primary-color);
            background: #F0EFFF;
        }
        
        /* States */
        .opt-btn.correct { background: var(--correct-color); color: white; border-color: var(--correct-color); }
        .opt-btn.wrong { background: var(--wrong-color); color: white; border-color: var(--wrong-color); animation: shake 0.4s; }
        .opt-btn.disabled { pointer-events: none; opacity: 0.7; }

        .explanation {
            margin-top: 15px;
            background: #EDFDF4;
            border: 1px solid var(--correct-color);
            padding: 15px;
            border-radius: 10px;
            display: none;
            font-size: 0.95rem;
            animation: slideDown 0.3s;
        }
        .explanation.show { display: block; }

        .teacher-note {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }
        .teacher-avatar {
            min-width: 35px;
            height: 35px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .submit-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: calc(50% - 40px); /* Half screen width minus padding */
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(108, 92, 231, 0.4);
            transition: 0.3s;
            z-index: 99;
        }
        .submit-btn:hover { transform: scale(1.02); filter: brightness(1.1); }

        /* Modal */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center; align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        .modal-box {
            background: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            animation: zoomIn 0.4s;
            border: 5px solid var(--accent-color);
        }

        /* Animations */
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }
        @keyframes slideDown { from {opacity: 0; transform: translateY(-10px);} to {opacity: 1; transform: translateY(0);} }
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
        @keyframes zoomIn { from {transform: scale(0.5); opacity: 0;} to {transform: scale(1); opacity: 1;} }

        /* Responsive */
        @media (max-width: 768px) {
            .main-container { flex-direction: column; height: auto; }
            .panel { height: auto; overflow: visible; padding-bottom: 20px; }
            #reading-panel { border-right: none; border-bottom: 2px solid #ddd; }
            .submit-btn { position: static; width: 100%; margin-top: 20px; }
            body { overflow-y: auto; height: auto; }
        }
    </style>
</head>
<body>

    <header>
        <div class="teacher-brand">
            Ms Mai An ULIS <span>Master Teacher</span>
        </div>
        <div class="timer-container" onclick="toggleTimer()">
            <span>‚è±</span> <span id="timer">15:00</span>
        </div>
    </header>

    <div class="main-container">
        <div id="reading-panel" class="panel">
            <h1 class="story-title">The Difficult Student</h1>
            
            <div class="passage-part">
                <h3>Part 1: The Problem</h3>
                <p>"As a teacher, (1)__________ to see a student failing, not because of ability, but because of behavior. I have a student, Tom, who would frequently (2)__________ in class whenever he didn't get his way, screaming and shouting. His behavior was completely (3)__________; it disrupted the whole class. At first, I made (4)__________ that he was just seeking attention, or perhaps he was dealing with (5)__________ at home who didn't care. However, I didn't want to judge too quickly. But truthfully, (6)__________ in the classroom was getting worse every day."</p>
                <button class="trans-btn" onclick="toggleTrans('trans1')">üìñ D·ªãch nghƒ©a</button>
                <div id="trans1" class="trans-content">
                    "L√† m·ªôt gi√°o vi√™n, <b>t√¥i r·∫•t ƒëau l√≤ng (it pains me)</b> khi th·∫•y m·ªôt h·ªçc sinh tr∆∞·ª£t d√†i, kh√¥ng ph·∫£i v√¨ nƒÉng l·ª±c, m√† v√¨ h√†nh vi. T√¥i c√≥ m·ªôt h·ªçc sinh, Tom, ng∆∞·ªùi th∆∞·ªùng xuy√™n <b>n·ªïi c∆°n tam b√†nh (throw a tantrum)</b> trong l·ªõp b·∫•t c·ª© khi n√†o em kh√¥ng v·ª´a √Ω, la h√©t v√† qu√°t th√°o. H√†nh vi c·ªßa em ho√†n to√†n <b>kh√¥ng th·ªÉ b√†o ch·ªØa ƒë∆∞·ª£c (unjustifiable)</b>; n√≥ l√†m gi√°n ƒëo·∫°n c·∫£ l·ªõp. L√∫c ƒë·∫ßu, t√¥i ƒë√£ <b>ƒëo√°n m√≤ (a wild guess)</b> r·∫±ng em ch·ªâ ƒëang t√¨m ki·∫øm s·ª± ch√∫ √Ω, ho·∫∑c c√≥ l·∫Ω em ƒëang ph·∫£i ƒë·ªëi m·∫∑t v·ªõi <b>cha m·∫π b·ªè b√™ (negligent parents)</b> ·ªü nh√†... Nh∆∞ng th√†nh th·∫≠t m√† n√≥i, <b>t√¨nh h√¨nh (the state of affairs)</b> trong l·ªõp h·ªçc ng√†y c√†ng t·ªìi t·ªá h∆°n."
                </div>
            </div>

            <div class="passage-part">
                <h3>Part 2: The Confrontation</h3>
                <p>"I decided to call a (7)__________. When his parents arrived, they were defensive. They seemed to think I was (8)__________ teaching and blamed me for Tom's grades. It felt like they came to (9)__________ rather than solve the problem. They argued that their son was perfect and that I was the problem. To (10)__________ without getting angry, I had to stay very calm. I needed to (11)__________ their false belief that I was picking on their son. I told them: 'Children often (12)__________ the behavior they see at home. If we want to (13)__________ discipline in Tom, we must model it first.'"</p>
                <button class="trans-btn" onclick="toggleTrans('trans2')">üìñ D·ªãch nghƒ©a</button>
                <div id="trans2" class="trans-content">
                    "T√¥i quy·∫øt ƒë·ªãnh g·ªçi m·ªôt <b>cu·ªôc h·ªçp ph·ª• huynh (parent-teacher conference)</b>... H·ªç d∆∞·ªùng nh∆∞ nghƒ© r·∫±ng t√¥i <b>k√©m nƒÉng l·ª±c (incompetent)</b> trong gi·∫£ng d·∫°y... C·∫£m gi√°c nh∆∞ h·ªç ƒë·∫øn ƒë·ªÉ <b>tr·∫£ ƒë≈©a/thanh to√°n n·ª£ n·∫ßn (settle the score)</b> h∆°n l√† gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ. ƒê·ªÉ <b>d√†n x·∫øp cu·ªôc tranh lu·∫≠n (settle an argument)</b> m√† kh√¥ng n·ªïi n√≥ng, t√¥i ph·∫£i r·∫•t b√¨nh tƒ©nh. T√¥i c·∫ßn <b>xua tan (dispel)</b> ni·ªÅm tin sai l·ªách c·ªßa h·ªç... T√¥i n√≥i: 'Tr·∫ª em th∆∞·ªùng <b>ph·∫£n chi·∫øu (mirror)</b> h√†nh vi m√† ch√∫ng th·∫•y ·ªü nh√†. N·∫øu ch√∫ng ta mu·ªën <b>th·∫•m nhu·∫ßn (instill)</b> k·ª∑ lu·∫≠t cho Tom, ch√∫ng ta ph·∫£i l√†m g∆∞∆°ng tr∆∞·ªõc.'"
                </div>
            </div>

            <div class="passage-part">
                <h3>Part 3: Finding a Solution</h3>
                <p>"I realized that arguing wouldn't help. Instead of fighting, I was (14)__________ and looking for a solution. I suggested we take (15)__________ immediately. We sat down and (16)__________ for Tom's behavior moving forward. I told them, 'The relationship between us is still (17)__________. If you want to (18)__________ my (19)__________, you need to work with me, not against me.' I admitted that teaching is a (20)__________: you lose personal time, but you gain the joy of helping kids. However, parents must also (21)__________ raising their children."</p>
                <button class="trans-btn" onclick="toggleTrans('trans3')">üìñ D·ªãch nghƒ©a</button>
                <div id="trans3" class="trans-content">
                    "...Thay v√¨ chi·∫øn ƒë·∫•u, t√¥i ƒë√£ <b>ch·∫•p nh·∫≠n kh·ªßng ho·∫£ng (embracing the crisis)</b> v√† t√¨m gi·∫£i ph√°p. T√¥i ƒë·ªÅ ngh·ªã ch√∫ng ta th·ª±c hi·ªán <b>c√°c h√†nh ƒë·ªông ch·ªß ƒë·ªông (proactive actions)</b> ngay l·∫≠p t·ª©c. Ch√∫ng t√¥i ng·ªìi xu·ªëng v√† <b>ƒë·∫∑t ra m·ªôt s·ªë quy t·∫Øc c∆° b·∫£n (set out some ground rules)</b>... 'M·ªëi quan h·ªá gi·ªØa ch√∫ng ta v·∫´n <b>c√≥ th·ªÉ c·ª©u v√£n ƒë∆∞·ª£c (salvageable)</b>. N·∫øu √¥ng b√† mu·ªën <b>gi√†nh l·∫•y (earn)</b> <b>l√≤ng tin (trust)</b> c·ªßa t√¥i, √¥ng b√† c·∫ßn h·ª£p t√°c v·ªõi t√¥i...'. T√¥i th·ª´a nh·∫≠n d·∫°y h·ªçc l√† m·ªôt <b>s·ª± ƒë√°nh ƒë·ªïi (trade-off)</b>... Tuy nhi√™n, cha m·∫π c≈©ng ph·∫£i <b>c√≥ nƒÉng l·ª±c/th√†nh th·∫°o (be competent in)</b> vi·ªác nu√¥i d·∫°y con c√°i."
                </div>
            </div>

            <div class="passage-part">
                <h3>Part 4: Resolution</h3>
                <p>"Tom eventually realized he was wrong and tried to (22)__________ for his bad behavior by studying harder. (23)__________, the conflict brought us closer. It showed me that even when people come from different backgrounds‚Äîpeople come to this international school from (24)__________‚Äîrespect is the universal language. Now, I can confidently say I (25)__________ handling difficult parents!"</p>
                <button class="trans-btn" onclick="toggleTrans('trans4')">üìñ D·ªãch nghƒ©a</button>
                <div id="trans4" class="trans-content">
                    "Tom cu·ªëi c√πng c≈©ng nh·∫≠n ra m√¨nh sai v√† c·ªë g·∫Øng <b>chu·ªôc l·ªói (atone)</b>... <b>V·ªÅ m·∫∑t t√≠ch c·ª±c (On the bright side)</b>, xung ƒë·ªôt ƒë√£ ƒë∆∞a ch√∫ng t√¥i l·∫°i g·∫ßn nhau h∆°n. N√≥ cho t√¥i th·∫•y r·∫±ng ngay c·∫£ khi m·ªçi ng∆∞·ªùi ƒë·∫øn t·ª´ nh·ªØng n·ªÅn t·∫£ng kh√°c nhau‚Äîm·ªçi ng∆∞·ªùi ƒë·∫øn ng√¥i tr∆∞·ªùng qu·ªëc t·∫ø n√†y t·ª´ <b>kh·∫Øp b·ªën ph∆∞∆°ng tr·ªùi (all four corners of the world)</b>... Gi·ªù ƒë√¢y, t√¥i c√≥ th·ªÉ t·ª± tin n√≥i r·∫±ng t√¥i <b>th√†nh th·∫°o (be competent in - am competent in)</b> vi·ªác x·ª≠ l√Ω c√°c ph·ª• huynh kh√≥ t√≠nh!"
                </div>
            </div>

            <div class="glossary-section">
                <div class="glossary-header">üìö GLOSSARY (T·ª´ V·ª±ng C·∫ßn Nh·ªõ)</div>
                <div class="glossary-grid" id="glossary-container">
                    </div>
            </div>
        </div>

        <div id="exercise-panel" class="panel">
            <h2 class="quiz-title">üìù B√ÄI T·∫¨P ƒêI·ªÄN T·ª™</h2>
            <div id="quiz-container">
                </div>
        </div>
        
        <button class="submit-btn" onclick="finishQuiz()">üèÜ N·ªòP B√ÄI & XEM ƒêI·ªÇM</button>
    </div>

    <div id="result-modal" class="modal">
        <div class="modal-box">
            <h2 style="color:var(--primary-color)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div style="font-size: 3.5rem; font-weight: 800; margin: 20px 0; color: var(--secondary-color);" id="score-text">0/25</div>
            <p id="feedback-msg" style="margin-bottom: 20px;">H√£y c·ªë g·∫Øng h∆°n nh√©!</p>
            <button onclick="document.getElementById('result-modal').style.display='none'" style="padding:10px 20px; background:var(--text-dark); color:white; border:none; border-radius:10px; cursor:pointer;">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

    <script>
        // --- 1. D·ªÆ LI·ªÜU ---
        const vocabList = [
            "unjustifiable", "salvageable", "settle the score", "mirror", "all four corners of the world", 
            "incompetent", "dispel", "proactive actions", "embracing the crisis", "a wild guess", 
            "throw a tantrum", "negligent parents", "earn trust", "On the bright side", "settle an argument", 
            "instill", "the state of affairs", "atone", "a trade-off", "parent-teacher conference", 
            "set out some ground rules", "It pains me", "be competent in"
        ];

        // ƒê√°p √°n v√† gi·∫£i th√≠ch chi ti·∫øt
        const questions = [
            { id: 1, text: "It pains me", explain: "C·ª•m 'It pains me' (T√¥i r·∫•t ƒëau l√≤ng) d√πng ƒë·ªÉ di·ªÖn t·∫£ c·∫£m x√∫c bu·ªìn phi·ªÅn c·ªßa gi√°o vi√™n khi th·∫•y h·ªçc sinh th·∫•t b·∫°i." },
            { id: 2, text: "throw a tantrum", explain: "'Throw a tantrum' l√† c·ª•m t·ª´ c·ªë ƒë·ªãnh ch·ªâ vi·ªác ƒÉn v·∫°, n·ªïi c∆°n tam b√†nh (la h√©t, g√†o kh√≥c) th∆∞·ªùng th·∫•y ·ªü tr·∫ª em." },
            { id: 3, text: "unjustifiable", explain: "H√†nh vi la h√©t trong l·ªõp l√† 'unjustifiable' (kh√¥ng th·ªÉ b√†o ch·ªØa/ch·∫•p nh·∫≠n ƒë∆∞·ª£c)." },
            { id: 4, text: "a wild guess", explain: "'Make a wild guess' l√† ƒëo√°n m√≤, ƒëo√°n ƒë·∫°i m√† kh√¥ng c√≥ nhi·ªÅu b·∫±ng ch·ª©ng." },
            { id: 5, text: "negligent parents", explain: "Gi√°o vi√™n nghi ng·ªù h·ªçc sinh b·ªã 'negligent parents' (cha m·∫π b·ªè b√™/t·∫Øc tr√°ch) n√™n m·ªõi c∆∞ x·ª≠ t·ªá ƒë·ªÉ t√¨m s·ª± ch√∫ √Ω." },
            { id: 6, text: "the state of affairs", explain: "'The state of affairs' ch·ªâ t√¨nh h√¨nh/t√¨nh tr·∫°ng chung c·ªßa s·ª± vi·ªác (·ªü ƒë√¢y l√† t√¨nh tr·∫°ng l·ªõp h·ªçc)." },
            { id: 7, text: "parent-teacher conference", explain: "ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ h·ªçc sinh, gi√°o vi√™n g·ªçi 'parent-teacher conference' (cu·ªôc h·ªçp ph·ª• huynh)." },
            { id: 8, text: "incompetent", explain: "Ph·ª• huynh nghƒ© gi√°o vi√™n 'incompetent' (k√©m nƒÉng l·ª±c, b·∫•t t√†i) n√™n con h·ªç m·ªõi ƒëi·ªÉm th·∫•p." },
            { id: 9, text: "settle the score", explain: "'Settle the score' nghƒ©a l√† tr·∫£ ƒë≈©a ho·∫∑c thanh to√°n n·ª£ n·∫ßn (nghƒ©a b√≥ng). Ph·ª• huynh ƒë·∫øn v·ªõi th√°i ƒë·ªô th√π ƒë·ªãch." },
            { id: 10, text: "settle an argument", explain: "Kh√°c v·ªõi c√¢u tr√™n, ·ªü ƒë√¢y 'settle an argument' l√† d√†n x·∫øp, gi·∫£i quy·∫øt cu·ªôc tranh c√£i m·ªôt c√°ch √™m ƒë·∫πp." },
            { id: 11, text: "dispel", explain: "'Dispel' (xua tan) th∆∞·ªùng ƒëi v·ªõi belief/rumor/myth. Gi√°o vi√™n mu·ªën xua tan ni·ªÅm tin sai l·ªách c·ªßa ph·ª• huynh." },
            { id: 12, text: "mirror", explain: "ƒê·ªông t·ª´ 'mirror' nghƒ©a l√† ph·∫£n chi·∫øu/b·∫Øt ch∆∞·ªõc y h·ªát. Tr·∫ª em th∆∞·ªùng b·∫Øt ch∆∞·ªõc h√†nh vi c·ªßa cha m·∫π." },
            { id: 13, text: "instill", explain: "'Instill discipline' l√† th·∫•m nhu·∫ßn/r√®n gi≈©a k·ª∑ lu·∫≠t v√†o ƒë·∫ßu ai ƒë√≥ m·ªôt c√°ch t·ª´ t·ª´." },
            { id: 14, text: "embracing the crisis", explain: "Thay v√¨ tr·ªën tr√°nh, gi√°o vi√™n 'embracing the crisis' (ch·∫•p nh·∫≠n v√† ƒë·ªëi m·∫∑t v·ªõi kh·ªßng ho·∫£ng) ƒë·ªÉ t√¨m gi·∫£i ph√°p." },
            { id: 15, text: "proactive actions", explain: "'Take proactive actions' l√† th·ª±c hi·ªán c√°c h√†nh ƒë·ªông ch·ªß ƒë·ªông, ƒëi tr∆∞·ªõc m·ªôt b∆∞·ªõc ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ." },
            { id: 16, text: "set out some ground rules", explain: "'Set out ground rules' l√† thi·∫øt l·∫≠p c√°c quy t·∫Øc c∆° b·∫£n/n·ªÅn t·∫£ng ngay t·ª´ ƒë·∫ßu." },
            { id: 17, text: "salvageable", explain: "M·ªëi quan h·ªá ch∆∞a h·ªèng h·∫≥n, n√≥ v·∫´n 'salvageable' (c√≥ th·ªÉ c·ª©u v√£n ƒë∆∞·ª£c)." },
            { id: 18, text: "earn", explain: "ƒê√¢y l√† ph·∫ßn ƒë·∫ßu c·ªßa c·ª•m 'earn trust' (gi√†nh l·∫•y l√≤ng tin). T√°ch ra theo y√™u c·∫ßu ƒë·ªÅ b√†i." },
            { id: 19, text: "trust", explain: "Ph·∫ßn sau c·ªßa c·ª•m 'earn trust'. 'Earn my trust' = Gi√†nh l·∫•y l√≤ng tin c·ªßa t√¥i." },
            { id: 20, text: "a trade-off", explain: "'A trade-off' l√† s·ª± ƒë√°nh ƒë·ªïi. M·∫•t th·ªùi gian c√° nh√¢n nh∆∞ng ƒë∆∞·ª£c ni·ªÅm vui gi√∫p ƒë·ª° tr·∫ª." },
            { id: 21, text: "be competent in", explain: "Cha m·∫π c≈©ng c·∫ßn 'be competent in' (c√≥ nƒÉng l·ª±c/th√†nh th·∫°o) trong vi·ªác nu√¥i d·∫°y con. L∆∞u √Ω: ƒê·ªÅ b√†i cho ph√©p d√πng t·ª´ n√†y 2 l·∫ßn." },
            { id: 22, text: "atone", explain: "'Atone for' l√† chu·ªôc l·ªói. Tom c·ªë g·∫Øng h·ªçc chƒÉm ƒë·ªÉ chu·ªôc l·ªói cho h√†nh vi x·∫•u." },
            { id: 23, text: "On the bright side", explain: "'On the bright side' (V·ªÅ m·∫∑t t√≠ch c·ª±c/nh√¨n theo h∆∞·ªõng t·ªët), d√πng ƒë·ªÉ chuy·ªÉn sang √Ω t·ªët sau chu·ªói s·ª± ki·ªán x·∫•u." },
            { id: 24, text: "all four corners of the world", explain: "Tr∆∞·ªùng qu·ªëc t·∫ø c√≥ h·ªçc sinh ƒë·∫øn t·ª´ 'all four corners of the world' (b·ªën ph∆∞∆°ng tr·ªùi/kh·∫Øp th·∫ø gi·ªõi)." },
            { id: 25, text: "be competent in", explain: "Gi√°o vi√™n t·ª± tin m√¨nh 'am competent in' (th√†nh th·∫°o) vi·ªác x·ª≠ l√Ω ph·ª• huynh kh√≥ t√≠nh. (D√πng d·∫°ng g·ªëc theo list)." }
        ];

        // --- 2. LOGIC GAME ---
        
        // T·∫°o Glossary t·ª± ƒë·ªông
        const glossaryContainer = document.getElementById('glossary-container');
        vocabList.sort().forEach(word => {
            const div = document.createElement('div');
            div.className = 'glossary-item';
            div.innerHTML = `<span class="g-word">${word}</span>`;
            glossaryContainer.appendChild(div);
        });

        // T·∫°o C√¢u h·ªèi
        const quizContainer = document.getElementById('quiz-container');
        
        questions.forEach((q, index) => {
            // T·∫°o danh s√°ch l·ª±a ch·ªçn (1 ƒë√∫ng + 3 sai ng·∫´u nhi√™n)
            let options = [];
            // V·ªõi c√¢u 18, 19 (t√°ch t·ª´), ta ph·∫£i x·ª≠ l√Ω ƒë·∫∑c bi·ªát m·ªôt ch√∫t ƒë·ªÉ t·∫°o nhi·ªÖu h·ª£p l√Ω
            let distractors = vocabList.filter(v => v !== q.text && v !== "earn trust"); // Lo·∫°i b·ªè ƒë√°p √°n ƒë√∫ng
            distractors = distractors.sort(() => 0.5 - Math.random()).slice(0, 3);
            
            // N·∫øu l√† c√¢u 18 (earn) ho·∫∑c 19 (trust), th√™m t·ª´ nhi·ªÖu th·ªß c√¥ng cho kh√≥ h∆°n n·∫øu mu·ªën, 
            // nh∆∞ng ·ªü ƒë√¢y ta l·∫•y t·ª´ list g·ªëc ƒë·ªÉ ƒë√∫ng format.
            // L∆∞u √Ω: List g·ªëc ch·ªâ c√≥ "earn trust". 
            // N·∫øu ƒë√°p √°n l√† "earn", ta hi·ªÉn th·ªã "earn". N·∫øu "trust", hi·ªÉn th·ªã "trust".
            // C√°c l·ª±a ch·ªçn sai s·∫Ω l·∫•y nguy√™n c·ª•m t·ª´ list.
            
            options = [q.text, ...distractors];
            options.sort(() => 0.5 - Math.random());

            // HTML
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `q-card-${index}`;
            card.innerHTML = `
                <div class="q-header">
                    <span>C√¢u h·ªèi ${q.id}</span>
                    <div class="teacher-avatar">Ms</div>
                </div>
                <div class="q-text">ƒêi·ªÅn v√†o ch·ªó tr·ªëng (${q.id}): "..."</div>
                <div class="options-container">
                    ${options.map(opt => `
                        <button class="opt-btn" onclick="checkAnswer(this, '${escapeHtml(opt)}', '${escapeHtml(q.text)}', ${index})">
                            ${opt}
                        </button>
                    `).join('')}
                </div>
                <div class="explanation" id="explain-${index}">
                    <div class="teacher-note">
                        <div class="teacher-avatar">Ms</div>
                        <div>
                            <strong>Ms Mai An gi·∫£i th√≠ch:</strong><br>
                            ƒê√°p √°n: <span style="color:var(--correct-color); font-weight:bold">${q.text}</span>
                            <br>${q.explain}
                        </div>
                    </div>
                </div>
            `;
            quizContainer.appendChild(card);
        });

        // --- 3. CH·ª®C NƒÇNG ---
        let score = 0;
        let answered = 0;

        // √Çm thanh (Web Audio API)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(isCorrect) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            if (isCorrect) {
                osc.type = 'sine'; // Ding
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.5);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
                
                // Ph√°o gi·∫•y
                confetti({
                    particleCount: 80, spread: 60, origin: { y: 0.6 },
                    colors: ['#00D26A', '#FDCB6E', '#6C5CE7']
                });
            } else {
                osc.type = 'sawtooth'; // Buzz
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        function checkAnswer(btn, selected, correct, idx) {
            const card = document.getElementById(`q-card-${idx}`);
            if (card.classList.contains('answered')) return; // Ch·∫∑n click l·∫°i
            
            card.classList.add('answered');
            answered++;
            document.getElementById(`explain-${idx}`).classList.add('show');
            
            const btns = card.querySelectorAll('.opt-btn');
            
            if (selected === correct) {
                btn.classList.add('correct');
                score++;
                playSound(true);
            } else {
                btn.classList.add('wrong');
                playSound(false);
                // Hi·ªán ƒë√°p √°n ƒë√∫ng
                btns.forEach(b => {
                    if (b.innerText.trim() === correct) b.classList.add('correct');
                });
            }
            
            // Disable t·∫•t c·∫£ n√∫t trong c√¢u n√†y
            btns.forEach(b => b.classList.add('disabled'));
        }

        function finishQuiz() {
            const modal = document.getElementById('result-modal');
            const scoreText = document.getElementById('score-text');
            const feedback = document.getElementById('feedback-msg');
            
            scoreText.innerText = `${score}/${questions.length}`;
            
            if (score === questions.length) feedback.innerText = "üåü XU·∫§T S·∫ÆC! B·∫°n l√† thi√™n t√†i gi·∫£i quy·∫øt xung ƒë·ªôt!";
            else if (score >= 20) feedback.innerText = "üëè R·∫•t t·ªët! B·∫°n hi·ªÉu r·∫•t s√¢u s·∫Øc b√†i ƒë·ªçc.";
            else if (score >= 12) feedback.innerText = "üí™ Kh√° ·ªïn! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ hi·ªÉu r√µ h∆°n.";
            else feedback.innerText = "üòÖ C·∫ßn c·ªë g·∫Øng h∆°n! ƒê·ª´ng qu√™n ƒë·ªçc k·ªπ Glossary nh√©.";
            
            modal.style.display = 'flex';
            playSound(true);
        }

        function toggleTrans(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }
        
        // Timer
        let timeLeft = 900; // 15 mins
        let timerRunning = false;
        let timerInterval;

        function toggleTimer() {
            if (timerRunning) {
                clearInterval(timerInterval);
                timerRunning = false;
                document.getElementById('timer').style.color = 'var(--primary-color)';
            } else {
                timerRunning = true;
                document.getElementById('timer').style.color = '#e74c3c';
                timerInterval = setInterval(() => {
                    timeLeft--;
                    let m = Math.floor(timeLeft / 60);
                    let s = timeLeft % 60;
                    document.getElementById('timer').innerText = `${m}:${s<10?'0':''}${s}`;
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert("H·∫øt gi·ªù l√†m b√†i!");
                    }
                }, 1000);
            }
        }

        function escapeHtml(text) {
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // Auto start
        // window.onload = toggleTimer; // Optional
    </script>
</body>
</html>