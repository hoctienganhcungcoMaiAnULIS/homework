<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Gamified Quiz - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0;
            --secondary: #FDCB6E;
            --accent: #00C9A7;
            --correct: #00D26A;
            --wrong: #FF4757;
            --text-dark: #2d3436;
            --bg-light: #f9f9f9;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Nunito', sans-serif;
            color: var(--text-dark);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background: linear-gradient(-45deg, #8854C0, #FDCB6E, #00C9A7, #FF9A9E);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Auto-generated Dynamic Pattern */
        .bg-pattern {
            position: fixed; top: 0; left: 0; width: 100%; height: 200%;
            background-image: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Ctext x='20' y='50' font-size='30'%3E%F0%9F%8F%A0%3C/text%3E%3Ctext x='80' y='100' font-size='30'%3E%F0%9F%A4%AF%3C/text%3E%3Ctext x='30' y='140' font-size='30'%3E%F0%9F%92%B8%3C/text%3E%3C/svg%3E");
            opacity: 0.15; z-index: -1; pointer-events: none;
            animation: floatUp 40s linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0); }
            100% { transform: translateY(-50%); }
        }

        /* Top Bar */
        .top-bar {
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .teacher-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 14px;
            font-weight: 700;
            color: var(--primary);
            background: rgba(136, 84, 192, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        #timer { font-size: 24px; font-weight: 800; color: var(--wrong); width: 80px; text-align: center; }
        .btn-control {
            background: var(--primary); color: white; border: none; padding: 10px 20px;
            font-family: 'Quicksand', sans-serif; font-weight: 700; font-size: 14px;
            border-radius: 12px; cursor: pointer;
            box-shadow: 0 4px 0 #5f3a8c; transition: all 0.1s;
        }
        .btn-control:active { transform: translateY(4px); box-shadow: 0 0 0 #5f3a8c; }

        /* Split Screen Content */
        .main-container {
            display: flex; flex: 1; padding: 20px; gap: 20px; overflow: hidden;
        }

        .pane {
            flex: 1; background: rgba(255, 255, 255, 0.95);
            border-radius: 25px; padding: 30px; overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .pane::-webkit-scrollbar { width: 8px; }
        .pane::-webkit-scrollbar-thumb { background: #ccc; border-radius: 10px; }

        /* Left Pane - Reading */
        .reading-text { font-size: 18px; line-height: 1.8; margin-bottom: 20px; }
        .reading-title { color: var(--primary); font-size: 22px; font-weight: 800; margin-top: 20px; margin-bottom: 10px; }
        .word-bank { background: #eee; padding: 15px; border-radius: 15px; font-weight: bold; color: #555; margin-bottom: 15px; font-size: 14px; }
        .blank-space { font-weight: bold; color: var(--primary); }
        
        .btn-translate {
            background: #ffeaa7; color: #d63031; border: none; padding: 8px 15px;
            border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 14px;
            box-shadow: 0 4px 0 #fdcb6e; margin-bottom: 20px; display: inline-flex; align-items: center; gap: 5px;
        }
        .btn-translate:active { transform: translateY(4px); box-shadow: none; }
        .translation-box {
            display: none; background: #fff3cd; border-left: 4px solid #ffc107;
            padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 16px; color: #555;
        }

        .glossary-table { width: 100%; border-collapse: collapse; margin-top: 30px; }
        .glossary-table th { background: var(--primary); color: white; padding: 10px; text-align: left; border-radius: 8px 8px 0 0; }
        .glossary-table td { padding: 10px; border-bottom: 1px solid #ddd; }
        .glossary-table tr:last-child td { border-bottom: none; }

        /* Right Pane - Quiz */
        .question-card {
            background: white; border: 2px solid #e5e5e5; border-radius: 20px;
            padding: 25px; margin-bottom: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .question-text { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #2d3436; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-btn {
            background: white; border: 2px solid #e5e5e5; border-radius: 16px;
            padding: 15px; font-size: 16px; font-family: 'Nunito', sans-serif; font-weight: 700;
            color: #2d3436; cursor: pointer; text-align: left;
            box-shadow: 0 6px 0 #e5e5e5; transition: all 0.1s ease;
            display: flex; align-items: center; gap: 10px;
        }
        .option-btn:hover { transform: scale(1.02); }
        .option-btn:active { transform: translateY(6px); box-shadow: 0 0 0 #e5e5e5; }
        
        .option-btn.correct { background: var(--correct); border-color: #00b359; box-shadow: 0 6px 0 #00b359; color: white; }
        .option-btn.wrong { background: var(--wrong); border-color: #d63031; box-shadow: 0 6px 0 #d63031; color: white; animation: shake 0.4s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }

        .explanation-box {
            display: none; margin-top: 20px; padding: 20px;
            background: #f1f8ff; border-left: 5px solid #0984e3; border-radius: 10px; font-size: 15px; line-height: 1.6;
        }
        .explanation-box h4 { color: #0984e3; margin-bottom: 10px; }
        .exp-vocab { white-space: pre-line; margin-bottom: 10px; font-family: 'Quicksand', sans-serif;}
        .exp-trans { font-style: italic; color: #555; margin-bottom: 10px; }

        .submit-btn {
            display: block; width: 100%; background: var(--accent); color: white;
            font-size: 20px; font-weight: 800; padding: 20px; border: none; border-radius: 20px;
            cursor: pointer; box-shadow: 0 8px 0 #00a88a; margin-top: 30px; transition: 0.1s;
        }
        .submit-btn:active { transform: translateY(8px); box-shadow: 0 0 0 #00a88a; }

        /* Modal Result */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 100; justify-content: center; align-items: center;
        }
        .modal-content {
            background: white; padding: 40px; border-radius: 30px; text-align: center;
            width: 400px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); animation: popUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popUp { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .score-text { font-size: 48px; font-weight: 800; color: var(--primary); margin: 20px 0; }
        .msg-text { font-size: 20px; color: #555; margin-bottom: 30px; }
        .close-btn {
            background: var(--wrong); color: white; border: none; padding: 12px 30px; border-radius: 15px;
            font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 5px 0 #d63031;
        }

        /* Confetti piece */
        .confetti { position: fixed; top: -10px; width: 12px; height: 12px; z-index: 999; animation: fall 2s linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }

    </style>
</head>
<body>

    <div class="bg-pattern"></div>

    <div class="top-bar">
        <div class="teacher-title">üë©‚Äçüè´ Ms Mai An ULIS</div>
        <div class="timer-container">
            <div id="timer">10:00</div>
            <button class="btn-control" id="start-btn" onclick="startTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
        </div>
    </div>

    <div class="main-container">
        <div class="pane left-pane">
            <h2>üß© ƒê·ªÄ B√ÄI: ƒêI·ªÄN T·ª™ V√ÄO CH·ªñ TR·ªêNG (FILL-IN-THE-BLANKS)</h2>
            <p>H√£y ch·ªçn t·ª´ th√≠ch h·ª£p trong h·ªôp t·ª´ v·ª±ng (Word Bank) ƒë·ªÉ ƒëi·ªÅn v√†o ch·ªó tr·ªëng.</p>

            <div class="reading-title">Ph·∫ßn 1: T√≠nh c√°ch v√† L·ªëi s·ªëng h·ªón lo·∫°n</div>
            <div class="word-bank">Word Bank 1: wild child | extroversion | dingy | slobby | firecracker | predispositions | sociopath</div>
            <div class="reading-text">
                "I‚Äôd like to talk about my former roommate, Alex. I met him during my second year of university. At first, I was drawn to his extreme <span class="blank-space">(1) .........</span>. He was the ultimate <span class="blank-space">(2) .........</span>, always the life of the party and a real <span class="blank-space">(3) .........</span> who kept everyone entertained. However, living with him was a nightmare. Our apartment was already a bit <span class="blank-space">(4) .........</span>, but his <span class="blank-space">(5) .........</span> habits made it worse. Honestly, looking back, I think he had some dangerous psychological <span class="blank-space">(6) .........</span>. He lacked empathy and acted almost like a <span class="blank-space">(7) .........</span>."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans1')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans1">
                "T√¥i mu·ªën k·ªÉ v·ªÅ ng∆∞·ªùi b·∫°n c√πng ph√≤ng c≈© c·ªßa m√¨nh, Alex. T√¥i g·∫∑p anh ·∫•y v√†o nƒÉm th·ª© hai ƒë·∫°i h·ªçc. Ban ƒë·∫ßu, t√¥i b·ªã thu h√∫t b·ªüi s·ª± h∆∞·ªõng ngo·∫°i t·ªôt ƒë·ªô c·ªßa anh ·∫•y. Anh ·∫•y l√† m·ªôt ƒë·ª©a tr·∫ª hoang d√£ ƒë√∫ng nghƒ©a, lu√¥n l√† linh h·ªìn c·ªßa b·ªØa ti·ªác v√† l√† m·ªôt ng√≤i n·ªï th·ª±c s·ª± gi·ªØ cho m·ªçi ng∆∞·ªùi lu√¥n vui v·∫ª. Tuy nhi√™n, s·ªëng v·ªõi anh ta l√† m·ªôt c∆°n √°c m·ªông. CƒÉn h·ªô c·ªßa ch√∫ng t√¥i v·ªën ƒë√£ h∆°i x·ªân m√†u/t·ªìi t√†n, nh∆∞ng th√≥i quen l√¥i th√¥i c·ªßa anh ta l√†m m·ªçi th·ª© t·ªá h∆°n. Th√†nh th·∫≠t m√† n√≥i, nh√¨n l·∫°i, t√¥i nghƒ© anh ta c√≥ m·ªôt s·ªë khuynh h∆∞·ªõng t√¢m l√Ω nguy hi·ªÉm. Anh ta thi·∫øu s·ª± ƒë·ªìng c·∫£m v√† h√†nh ƒë·ªông g·∫ßn nh∆∞ m·ªôt k·∫ª r·ªëi lo·∫°n nh√¢n c√°ch."
            </div>

            <div class="reading-title">Ph·∫ßn 2: ƒê·ªùi s·ªëng c√° nh√¢n v√† Th√≥i quen ƒÉn u·ªëng</div>
            <div class="word-bank">Word Bank 2: promiscuous | sexually transmitted disease | infatuation | undying passion | go through | food alternatives | food desert</div>
            <div class="reading-text">
                "His personal life was a mess. He was incredibly <span class="blank-space">(8) .........</span>, bringing different people home every week. He would develop a sudden <span class="blank-space">(9) .........</span> with someone, claiming it was his <span class="blank-space">(10) .........</span>, but then dump them days later. I literally had to warn him about the risks of catching a <span class="blank-space">(11) .........</span>, but he ignored me. On top of that, his diet was awful. Our neighborhood was basically a <span class="blank-space">(12) .........</span> with no fresh groceries. Instead of looking for healthy <span class="blank-space">(13) .........</span>, he would just <span class="blank-space">(14) .........</span> mountains of junk food every single day."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans2')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans2">
                "ƒê·ªùi s·ªëng c√° nh√¢n c·ªßa anh ta l√† m·ªôt m·ªõ h·ªón ƒë·ªôn. Anh ta v√¥ c√πng lƒÉng nhƒÉng, ƒë∆∞a nh·ªØng ng∆∞·ªùi kh√°c nhau v·ªÅ nh√† m·ªói tu·∫ßn. Anh ta s·∫Ω n·∫£y sinh s·ª± say n·∫Øng ƒë·ªôt ng·ªôt v·ªõi ai ƒë√≥, cho r·∫±ng ƒë√≥ l√† ni·ªÅm ƒëam m√™ b·∫•t di·ªát c·ªßa m√¨nh, nh∆∞ng r·ªìi l·∫°i ƒë√° h·ªç v√†i ng√†y sau ƒë√≥. T√¥i th·ª±c s·ª± ƒë√£ ph·∫£i c·∫£nh b√°o anh ta v·ªÅ nguy c∆° m·∫Øc b·ªánh l√¢y truy·ªÅn qua ƒë∆∞·ªùng t√¨nh d·ª•c, nh∆∞ng anh ta ph·ªõt l·ªù. Th√™m v√†o ƒë√≥, ch·∫ø ƒë·ªô ƒÉn u·ªëng c·ªßa anh ta r·∫•t t·ªìi t·ªá. Khu ph·ªë c·ªßa ch√∫ng t√¥i c∆° b·∫£n l√† m·ªôt 'sa m·∫°c th·ª±c ph·∫©m' kh√¥ng c√≥ th·ª±c ph·∫©m t∆∞∆°i s·ªëng. Thay v√¨ t√¨m ki·∫øm c√°c l·ª±a ch·ªçn th·ª±c ph·∫©m thay th·∫ø l√†nh m·∫°nh, anh ta ch·ªâ ng·ªën h√†ng n√∫i ƒë·ªì ƒÉn v·∫∑t m·ªói ng√†y."
            </div>

            <div class="reading-title">Ph·∫ßn 3: Ti·ªÅn b·∫°c v√† C·∫£m x√∫c c·ªßa t√¥i</div>
            <div class="word-bank">Word Bank 3: short of | freeloader | freeloading | off and on | scammer | loaded | rolling in the dough | go on a shopping spree | upfront payment | pay upfront | money makes the world round | cover my daily spending</div>
            <div class="reading-text">
                "His financial situation was the craziest part. Most days, he was completely broke and <span class="blank-space">(15) .........</span> cash. He was such a <span class="blank-space">(16) .........</span>. Because of his constant <span class="blank-space">(17) .........</span> on me for rent and groceries, I barely had enough money left to <span class="blank-space">(18) .........</span>. But then, <span class="blank-space">(19) .........</span>, he would suddenly be absolutely <span class="blank-space">(20) .........</span>. He‚Äôd be <span class="blank-space">(21) .........</span> and would immediately <span class="blank-space">(22) .........</span> to buy designer clothes. His motto was literally '<span class="blank-space">(23) .........</span>'. I later discovered he was actually a <span class="blank-space">(24) .........</span> online. He would trick people into making an <span class="blank-space">(25) .........</span> for fake products, forcing them to <span class="blank-space">(26) .........</span>, and then disappear."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans3')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans3">
                "T√¨nh h√¨nh t√†i ch√≠nh c·ªßa anh ta l√† ph·∫ßn ƒëi√™n r·ªì nh·∫•t. H·∫ßu h·∫øt c√°c ng√†y, anh ta ho√†n to√†n nh·∫µn t√∫i v√† thi·∫øu ti·ªÅn m·∫∑t. Anh ta ƒë√∫ng l√† m·ªôt k·∫ª ƒÉn b√°m. V√¨ s·ª± ƒÉn b√°m li√™n t·ª•c c·ªßa anh ta ƒë·ªëi v·ªõi t√¥i v·ªÅ ti·ªÅn thu√™ nh√† v√† t·∫°p h√≥a, t√¥i h·∫ßu nh∆∞ kh√¥ng c√≤n ƒë·ªß ti·ªÅn ƒë·ªÉ trang tr·∫£i chi ti√™u h√†ng ng√†y. Nh∆∞ng sau ƒë√≥, th·ªânh tho·∫£ng, anh ta ƒë·ªôt nhi√™n tr·ªü n√™n c·ª±c k·ª≥ gi√†u c√≥. Anh ta r·ªßng r·ªânh ti·ªÅn b·∫°c v√† s·∫Ω ngay l·∫≠p t·ª©c ƒëi mua s·∫Øm ƒëi√™n cu·ªìng qu·∫ßn √°o h√†ng hi·ªáu. Ph∆∞∆°ng ch√¢m c·ªßa anh ta th·ª±c s·ª± l√† 'c√≥ ti·ªÅn mua ti√™n c≈©ng ƒë∆∞·ª£c'. Sau n√†y t√¥i ph√°t hi·ªán ra anh ta th·ª±c ch·∫•t l√† m·ªôt k·∫ª l·ª´a ƒë·∫£o tr√™n m·∫°ng. Anh ta s·∫Ω l·ª´a ng∆∞·ªùi ta tr·∫£ ti·ªÅn tr∆∞·ªõc cho c√°c s·∫£n ph·∫©m gi·∫£, √©p h·ªç ph·∫£i thanh to√°n tr∆∞·ªõc r·ªìi bi·∫øn m·∫•t."
            </div>

            <div class="reading-title">Ph·∫ßn 4: K·∫øt c·ª•c</div>
            <div class="word-bank">Word Bank 4: bang my head on the wall | petrified of | toss and turn | as of late | feel bad | pure conscience | repent</div>
            <div class="reading-text">
                "Dealing with his chaos made me want to <span class="blank-space">(27) .........</span>. I was often <span class="blank-space">(28) .........</span> the legal trouble he might bring to our door, which made me <span class="blank-space">(29) .........</span> in bed every night. <span class="blank-space">(30) .........</span>, I‚Äôve moved out and cut all ties with him. Sometimes I <span class="blank-space">(31) .........</span> for abandoning him, but I know I have a <span class="blank-space">(32) .........</span>. I tried my best to help him realize his mistakes and <span class="blank-space">(33) .........</span>, but some people just refuse to change."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans4')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans4">
                "Gi·∫£i quy·∫øt s·ª± h·ªón lo·∫°n c·ªßa anh ta l√†m t√¥i mu·ªën ƒë·∫≠p ƒë·∫ßu v√†o t∆∞·ªùng. T√¥i th∆∞·ªùng xuy√™n khi·∫øp s·ª£ tr∆∞·ªõc nh·ªØng r·∫Øc r·ªëi ph√°p l√Ω m√† anh ta c√≥ th·ªÉ mang ƒë·∫øn nh√† ch√∫ng t√¥i, ƒëi·ªÅu ƒë√≥ l√†m t√¥i tr·∫±n tr·ªçc tr√™n gi∆∞·ªùng m·ªói ƒë√™m. G·∫ßn ƒë√¢y, t√¥i ƒë√£ d·ªçn ra ngo√†i v√† c·∫Øt ƒë·ª©t m·ªçi quan h·ªá v·ªõi anh ta. ƒê√¥i khi t√¥i c·∫£m th·∫•y t·ªìi t·ªá v√¨ ƒë√£ b·ªè r∆°i anh ta, nh∆∞ng t√¥i bi·∫øt m√¨nh c√≥ m·ªôt l∆∞∆°ng t√¢m trong s·∫°ch. T√¥i ƒë√£ c·ªë h·∫øt s·ª©c ƒë·ªÉ gi√∫p anh ta nh·∫≠n ra sai l·∫ßm v√† ƒÉn nƒÉn, nh∆∞ng m·ªôt s·ªë ng∆∞·ªùi ch·ªâ ƒë∆°n gi·∫£n l√† t·ª´ ch·ªëi thay ƒë·ªïi."
            </div>

            <h3 style="margin-top: 30px; color: var(--primary);">üìö Glossary (T·ª´ v·ª±ng h·ªçc thu·∫≠t B1-C2)</h3>
            <table class="glossary-table">
                <tr><th>Vocabulary</th><th>POS</th><th>Meaning (Vietnamese)</th></tr>
                <tr><td>Extroversion</td><td>Noun (n)</td><td>S·ª± h∆∞·ªõng ngo·∫°i, t√≠nh c·ªüi m·ªü</td></tr>
                <tr><td>Predisposition</td><td>Noun (n)</td><td>Khuynh h∆∞·ªõng, t·ªë ch·∫•t b·∫©m sinh</td></tr>
                <tr><td>Sociopath</td><td>Noun (n)</td><td>K·∫ª r·ªëi lo·∫°n nh√¢n c√°ch, ch·ªëng ƒë·ªëi x√£ h·ªôi</td></tr>
                <tr><td>Promiscuous</td><td>Adj</td><td>LƒÉng nhƒÉng, b·ª´a b√£i (t√¨nh d·ª•c)</td></tr>
                <tr><td>Infatuation</td><td>Noun (n)</td><td>S·ª± say m√™, cu·ªìng d·∫°i nh·∫•t th·ªùi</td></tr>
                <tr><td>Freeloader</td><td>Noun (n)</td><td>K·∫ª ƒÉn b√°m, k·∫ª ch·ª±c ch·ªù h∆∞·ªüng l·ª£i</td></tr>
                <tr><td>Petrified</td><td>Adj</td><td>C·ª±c k·ª≥ khi·∫øp s·ª£, s·ªØng s·ªù</td></tr>
                <tr><td>Repent</td><td>Verb (v)</td><td>ƒÇn nƒÉn, h·ªëi l·ªói</td></tr>
                <tr><td>Conscience</td><td>Noun (n)</td><td>L∆∞∆°ng t√¢m</td></tr>
                <tr><td>Scammer</td><td>Noun (n)</td><td>K·∫ª l·ª´a ƒë·∫£o (ƒë·∫∑c bi·ªát tr√™n m·∫°ng)</td></tr>
            </table>
        </div>

        <div class="pane right-pane">
            <h2 style="color: var(--primary); margin-bottom: 20px;">üéÆ TR·∫ÆC NGHI·ªÜM T∆Ø∆†NG T√ÅC</h2>
            <div id="quiz-container"></div>
            <button class="submit-btn" onclick="submitQuiz()">N·ªòP B√ÄI T·ªîNG K·∫æT üèÜ</button>
        </div>
    </div>

    <div class="modal-overlay" id="resultModal">
        <div class="modal-content">
            <h2>üéâ HO√ÄN TH√ÄNH B√ÄI TEST üéâ</h2>
            <div class="score-text" id="finalScore">0/33</div>
            <div class="msg-text" id="feedbackMsg">L√†m t·ªët l·∫Øm!</div>
            <button class="close-btn" onclick="closeModal()">Xem l·∫°i ƒë√°p √°n</button>
        </div>
    </div>

<script>
    // --- AUDIO SYSTEM (Web Audio API) ---
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    function playCorrect() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode); gainNode.connect(audioCtx.destination);
        osc.type = 'sine';
        osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
        osc.frequency.setValueAtTime(659.25, audioCtx.currentTime + 0.1); // E5
        gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.05);
        gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3);
        osc.start(); osc.stop(audioCtx.currentTime + 0.3);
    }

    function playWrong() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode); gainNode.connect(audioCtx.destination);
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(300, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.4);
        gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.1);
        gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.4);
        osc.start(); osc.stop(audioCtx.currentTime + 0.4);
    }

    // --- EFFECTS ---
    function triggerConfetti() {
        const colors = ['#FF4757', '#00D26A', '#FDCB6E', '#00C9A7', '#8854C0'];
        for(let i=0; i<40; i++) {
            let conf = document.createElement('div');
            conf.className = 'confetti';
            conf.style.left = Math.random() * 100 + 'vw';
            conf.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
            conf.style.animationDuration = (Math.random() * 1 + 1.5) + 's';
            document.body.appendChild(conf);
            setTimeout(() => conf.remove(), 3000);
        }
    }

    // --- TIMER SYSTEM ---
    let time = 600; // 10 minutes
    let timerInterval;
    let isRunning = false;

    function startTimer() {
        const btn = document.getElementById('start-btn');
        if(!isRunning) {
            isRunning = true;
            btn.innerText = "T·∫†M D·ª™NG";
            btn.style.background = "#FF4757";
            btn.style.boxShadow = "0 4px 0 #d63031";
            timerInterval = setInterval(() => {
                time--;
                let m = Math.floor(time / 60);
                let s = time % 60;
                document.getElementById('timer').innerText = `${m}:${s<10?'0':''}${s}`;
                if(time <= 0) {
                    clearInterval(timerInterval);
                    alert("‚è∞ ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                }
            }, 1000);
        } else {
            isRunning = false;
            clearInterval(timerInterval);
            btn.innerText = "TI·∫æP T·ª§C";
            btn.style.background = "var(--primary)";
            btn.style.boxShadow = "0 4px 0 #5f3a8c";
        }
    }

    function toggleTranslation(id) {
        let el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    // --- QUIZ DATA & LOGIC ---
    // ƒê·ªÉ t·ªëi ∆∞u m√£ code, t√¥i t·∫°o h√†m sinh 33 c√¢u h·ªèi d·ª±a v√†o ƒë√°p √°n chu·∫©n, k·∫øt h·ª£p t·ª± ƒë·ªông x√°o tr·ªôn.
    const rawData = [
        { q: "At first, I was drawn to his extreme (1) _________.", a: "extroversion", f: ["wild child", "dingy", "sociopath"], 
          trans: "Ban ƒë·∫ßu, t√¥i b·ªã thu h√∫t b·ªüi s·ª± h∆∞·ªõng ngo·∫°i t·ªôt ƒë·ªô c·ªßa anh ·∫•y.", r: "D·ª±a v√†o 'drawn to' v√† ng·ªØ c·∫£nh sau ƒë√≥ 'always the life of the party', 'extroversion' (s·ª± h∆∞·ªõng ngo·∫°i) l√† ph√π h·ª£p nh·∫•t." },
        { q: "He was the ultimate (2) _________...", a: "wild child", f: ["slobby", "predispositions", "extroversion"], trans: "Anh ·∫•y l√† m·ªôt ƒë·ª©a tr·∫ª hoang d√£ ƒë√∫ng nghƒ©a...", r: "C·ª•m t·ª´ 'ultimate wild child' ch·ªâ m·ªôt ng∆∞·ªùi v√¥ c√πng n·ªïi lo·∫°n v√† ph√≥ng kho√°ng." },
        { q: "...always the life of the party and a real (3) _________ who kept everyone entertained.", a: "firecracker", f: ["sociopath", "dingy", "freeloader"], trans: "...lu√¥n l√† linh h·ªìn c·ªßa b·ªØa ti·ªác v√† l√† m·ªôt ng√≤i n·ªï th·ª±c s·ª± gi·ªØ cho m·ªçi ng∆∞·ªùi vui v·∫ª.", r: "'firecracker' (ng√≤i n·ªï/ng∆∞·ªùi s√¥i n·ªïi) h·ª£p v·ªõi 'kept everyone entertained'." },
        { q: "Our apartment was already a bit (4) _________,", a: "dingy", f: ["loaded", "promiscuous", "slobby"], trans: "CƒÉn h·ªô c·ªßa ch√∫ng t√¥i v·ªën ƒë√£ h∆°i x·ªân m√†u/t·ªìi t√†n,", r: "'dingy' (x·ªân m√†u, b·∫©n th·ªâu) l√† t√≠nh t·ª´ m√¥ t·∫£ cƒÉn h·ªô." },
        { q: "but his (5) _________ habits made it worse.", a: "slobby", f: ["wild child", "dingy", "freeloading"], trans: "nh∆∞ng th√≥i quen l√¥i th√¥i c·ªßa anh ta l√†m m·ªçi th·ª© t·ªá h∆°n.", r: "Tr∆∞·ªõc danh t·ª´ 'habits', c·∫ßn m·ªôt t√≠nh t·ª´ mi√™u t·∫£ th√≥i quen x·∫•u: 'slobby' (l√¥i th√¥i)." },
        { q: "Honestly, looking back, I think he had some dangerous psychological (6) _________.", a: "predispositions", f: ["infatuation", "extroversion", "scammer"], trans: "Th√†nh th·∫≠t m√† n√≥i, nh√¨n l·∫°i, t√¥i nghƒ© anh ta c√≥ m·ªôt s·ªë khuynh h∆∞·ªõng t√¢m l√Ω nguy hi·ªÉm.", r: "'psychological predispositions' (khuynh h∆∞·ªõng t√¢m l√Ω) ƒëi li·ªÅn v·ªõi nhau th√†nh m·ªôt c·ª•m." },
        { q: "He lacked empathy and acted almost like a (7) _________.", a: "sociopath", f: ["firecracker", "scammer", "freeloader"], trans: "Anh ta thi·∫øu s·ª± ƒë·ªìng c·∫£m v√† h√†nh ƒë·ªông g·∫ßn nh∆∞ m·ªôt k·∫ª r·ªëi lo·∫°n nh√¢n c√°ch.", r: "Vi·ªác 'lacked empathy' (thi·∫øu ƒë·ªìng c·∫£m) l√† bi·ªÉu hi·ªán c·ªßa 'sociopath'." },
        { q: "He was incredibly (8) _________, bringing different people home every week.", a: "promiscuous", f: ["loaded", "petrified of", "short of"], trans: "Anh ta v√¥ c√πng lƒÉng nhƒÉng, ƒë∆∞a nh·ªØng ng∆∞·ªùi kh√°c nhau v·ªÅ nh√† m·ªói tu·∫ßn.", r: "H√†nh ƒë·ªông d·∫´n nhi·ªÅu ng∆∞·ªùi l·∫° v·ªÅ nh√† ch·ªâ t√≠nh 'promiscuous' (lƒÉng nhƒÉng, b·ª´a b√£i)." },
        { q: "He would develop a sudden (9) _________ with someone,", a: "infatuation", f: ["undying passion", "food desert", "freeloading"], trans: "Anh ta s·∫Ω n·∫£y sinh s·ª± say n·∫Øng/cu·ªìng d·∫°i ƒë·ªôt ng·ªôt v·ªõi ai ƒë√≥,", r: "'develop an infatuation' (ph√°t tri·ªÉn s·ª± si m√™) ƒëi li·ªÅn v·ªõi gi·ªõi t·ª´ 'with'." },
        { q: "claiming it was his (10) _________, but then dump them days later.", a: "undying passion", f: ["extroversion", "food alternatives", "upfront payment"], trans: "cho r·∫±ng ƒë√≥ l√† ni·ªÅm ƒëam m√™ b·∫•t di·ªát c·ªßa m√¨nh, nh∆∞ng r·ªìi l·∫°i ƒë√° h·ªç...", r: "S·ª± ƒë·ªëi l·∫≠p gi·ªØa vi·ªác g·ªçi ƒë√≥ l√† 'undying passion' (ƒëam m√™ b·∫•t di·ªát) v√† vi·ªác ƒë√° h·ªç ngay sau ƒë√≥." },
        { q: "I literally had to warn him about the risks of catching a (11) _________,", a: "sexually transmitted disease", f: ["food desert", "wild child", "scammer"], trans: "T√¥i th·ª±c s·ª± ƒë√£ c·∫£nh b√°o anh ta v·ªÅ nguy c∆° m·∫Øc b·ªánh l√¢y truy·ªÅn qua ƒë∆∞·ªùng t√¨nh d·ª•c,", r: "H·∫≠u qu·∫£ c·ªßa vi·ªác lƒÉng nhƒÉng l√† nguy c∆° m·∫Øc STD." },
        { q: "Our neighborhood was basically a (12) _________ with no fresh groceries.", a: "food desert", f: ["shopping spree", "dingy", "wild child"], trans: "Khu ph·ªë c·ªßa ch√∫ng t√¥i c∆° b·∫£n l√† m·ªôt 'sa m·∫°c th·ª±c ph·∫©m' kh√¥ng c√≥ th·ª±c ph·∫©m t∆∞∆°i s·ªëng.", r: "'Food desert' l√† thu·∫≠t ng·ªØ ch·ªâ khu v·ª±c kh√¥ng c√≥ ƒë·ªì ƒÉn t∆∞∆°i s·ªëng/t·ªët l√†nh." },
        { q: "Instead of looking for healthy (13) _________,", a: "food alternatives", f: ["predispositions", "freeloaders", "scammers"], trans: "Thay v√¨ t√¨m ki·∫øm c√°c l·ª±a ch·ªçn th·ª±c ph·∫©m thay th·∫ø l√†nh m·∫°nh,", r: "'Healthy food alternatives' l√† s·ª± l·ª±a ch·ªçn th·ª©c ƒÉn thay th·∫ø t·ªët cho s·ª©c kh·ªèe." },
        { q: "he would just (14) _________ mountains of junk food every single day.", a: "go through", f: ["toss and turn", "feel bad", "repent"], trans: "anh ta ch·ªâ ng·ªën/ti√™u th·ª• h√†ng n√∫i ƒë·ªì ƒÉn v·∫∑t m·ªói ng√†y.", r: "Phrasal verb 'go through' ·ªü ƒë√¢y mang nghƒ©a ti√™u th·ª• m·ªôt l∆∞·ª£ng l·ªõn." },
        { q: "Most days, he was completely broke and (15) _________ cash.", a: "short of", f: ["petrified of", "loaded", "freeloading"], trans: "H·∫ßu h·∫øt c√°c ng√†y, anh ta ho√†n to√†n nh·∫µn t√∫i v√† thi·∫øu ti·ªÅn m·∫∑t.", r: "C·ª•m 'short of cash' (thi·∫øu th·ªën ti·ªÅn m·∫∑t) song h√†nh v·ªõi 'broke'." },
        { q: "He was such a (16) _________.", a: "freeloader", f: ["scammer", "wild child", "sociopath"], trans: "Anh ta ƒë√∫ng l√† m·ªôt k·∫ª ƒÉn b√°m.", r: "D·ª±a v√†o c√¢u sau (d·ª±a d·∫´m tr·∫£ ti·ªÅn nh√†), anh ta l√† 'freeloader'." },
        { q: "Because of his constant (17) _________ on me for rent and groceries,", a: "freeloading", f: ["infatuation", "extroversion", "predispositions"], trans: "V√¨ s·ª± ƒÉn b√°m li√™n t·ª•c c·ªßa anh ta ƒë·ªëi v·ªõi t√¥i...", r: "C·∫ßn m·ªôt danh t·ª´ (V-ing) sau 'constant' -> 'freeloading'." },
        { q: "I barely had enough money left to (18) _________.", a: "cover my daily spending", f: ["go on a shopping spree", "bang my head on the wall", "pay upfront"], trans: "T√¥i h·∫ßu nh∆∞ kh√¥ng c√≤n ƒë·ªß ti·ªÅn ƒë·ªÉ trang tr·∫£i chi ti√™u h√†ng ng√†y.", r: "'cover spending' (trang tr·∫£i chi ti√™u) h·ª£p l√Ω nh·∫•t." },
        { q: "But then, (19) _________, he would suddenly be absolutely...", a: "off and on", f: ["as of late", "short of", "loaded"], trans: "Nh∆∞ng sau ƒë√≥, th·ªânh tho·∫£ng, anh ta ƒë·ªôt nhi√™n...", r: "'off and on' mang nghƒ©a th·ªânh tho·∫£ng, kh√¥ng th∆∞·ªùng xuy√™n." },
        { q: "...he would suddenly be absolutely (20) _________.", a: "loaded", f: ["dingy", "promiscuous", "petrified of"], trans: "...anh ta ƒë·ªôt nhi√™n tr·ªü n√™n c·ª±c k·ª≥ gi√†u c√≥.", r: "'loaded' l√† l√≥ng (slang) nghƒ©a l√† r·∫•t nhi·ªÅu ti·ªÅn." },
        { q: "He‚Äôd be (21) _________", a: "rolling in the dough", f: ["tossing and turning", "freeloading", "feeling bad"], trans: "Anh ta r·ªßng r·ªânh ti·ªÅn b·∫°c", r: "Idiom 'rolling in the dough' (lƒÉn trong b·ªôt) nghƒ©a l√† r·∫•t gi√†u/nhi·ªÅu ti·ªÅn." },
        { q: "and would immediately (22) _________ to buy designer clothes.", a: "go on a shopping spree", f: ["cover my daily spending", "pay upfront", "bang my head on the wall"], trans: "v√† s·∫Ω ngay l·∫≠p t·ª©c ƒëi mua s·∫Øm ƒëi√™n cu·ªìng qu·∫ßn √°o h√†ng hi·ªáu.", r: "C·ª•m 'go on a shopping spree' (mua s·∫Øm th·∫£ ga)." },
        { q: "His motto was literally '(23) _________'.", a: "money makes the world round", f: ["pure conscience", "undying passion", "food alternatives"], trans: "Ph∆∞∆°ng ch√¢m c·ªßa anh ta th·ª±c s·ª± l√† 'c√≥ ti·ªÅn mua ti√™n c≈©ng ƒë∆∞·ª£c' (ti·ªÅn l√†m th·∫ø gi·ªõi quay).", r: "M·ªôt c√¢u t·ª•c ng·ªØ v·ªÅ quy·ªÅn l·ª±c c·ªßa ƒë·ªìng ti·ªÅn." },
        { q: "I later discovered he was actually a (24) _________ online.", a: "scammer", f: ["freeloader", "sociopath", "wild child"], trans: "Sau n√†y t√¥i ph√°t hi·ªán ra anh ta th·ª±c ch·∫•t l√† m·ªôt k·∫ª l·ª´a ƒë·∫£o tr√™n m·∫°ng.", r: "L·ª´a b√°n h√†ng gi·∫£ (fake products) th√¨ ph·∫£i l√† 'scammer'." },
        { q: "He would trick people into making an (25) _________ for fake products,", a: "upfront payment", f: ["infatuation", "undying passion", "extroversion"], trans: "Anh ta s·∫Ω l·ª´a ng∆∞·ªùi ta thanh to√°n m·ªôt kho·∫£n ti·ªÅn tr∆∞·ªõc cho c√°c s·∫£n ph·∫©m gi·∫£,", r: "'upfront payment' l√† danh t·ª´ ch·ªâ kho·∫£n thanh to√°n tr∆∞·ªõc." },
        { q: "forcing them to (26) _________, and then disappear.", a: "pay upfront", f: ["repent", "toss and turn", "feel bad"], trans: "√©p h·ªç ph·∫£i thanh to√°n tr∆∞·ªõc r·ªìi bi·∫øn m·∫•t.", r: "C·∫•u tr√∫c force sb to V -> c·∫ßn ƒë·ªông t·ª´ 'pay upfront'." },
        { q: "Dealing with his chaos made me want to (27) _________.", a: "bang my head on the wall", f: ["go on a shopping spree", "cover my daily spending", "pay upfront"], trans: "Gi·∫£i quy·∫øt s·ª± h·ªón lo·∫°n c·ªßa anh ta l√†m t√¥i mu·ªën ƒë·∫≠p ƒë·∫ßu v√†o t∆∞·ªùng.", r: "Idiom th·ªÉ hi·ªán s·ª± th·∫•t v·ªçng, b·∫•t l·ª±c t·ªôt ƒë·ªô." },
        { q: "I was often (28) _________ the legal trouble he might bring...", a: "petrified of", f: ["short of", "loaded", "promiscuous"], trans: "T√¥i th∆∞·ªùng xuy√™n khi·∫øp s·ª£ tr∆∞·ªõc nh·ªØng r·∫Øc r·ªëi ph√°p l√Ω...", r: "'petrified of' (s·ª£ ch·∫øt khi·∫øp) ƒëi v·ªõi gi·ªõi t·ª´ of." },
        { q: "which made me (29) _________ in bed every night.", a: "toss and turn", f: ["repent", "go through", "feel bad"], trans: "ƒëi·ªÅu ƒë√≥ l√†m t√¥i tr·∫±n tr·ªçc tr√™n gi∆∞·ªùng m·ªói ƒë√™m.", r: "Idiom 'toss and turn' nghƒ©a l√† tr·∫±n tr·ªçc kh√¥ng ng·ªß ƒë∆∞·ª£c." },
        { q: "(30) _________, I‚Äôve moved out and cut all ties with him.", a: "As of late", f: ["Off and on", "Short of", "Loaded"], trans: "D·∫°o g·∫ßn ƒë√¢y, t√¥i ƒë√£ d·ªçn ra ngo√†i v√† c·∫Øt ƒë·ª©t m·ªçi quan h·ªá v·ªõi anh ta.", r: "'As of late' (g·∫ßn ƒë√¢y) ƒë√≥ng vai tr√≤ tr·∫°ng ng·ªØ th·ªùi gian." },
        { q: "Sometimes I (31) _________ for abandoning him,", a: "feel bad", f: ["toss and turn", "repent", "bang my head on the wall"], trans: "ƒê√¥i khi t√¥i c·∫£m th·∫•y t·ªìi t·ªá v√¨ ƒë√£ b·ªè r∆°i anh ta,", r: "C·∫£m x√∫c h·ªëi h·∫≠n nh·∫π: 'feel bad'." },
        { q: "but I know I have a (32) _________.", a: "pure conscience", f: ["undying passion", "food desert", "infatuation"], trans: "nh∆∞ng t√¥i bi·∫øt m√¨nh c√≥ m·ªôt l∆∞∆°ng t√¢m trong s·∫°ch.", r: "C·ª•m 'pure/clear conscience' (l∆∞∆°ng t√¢m trong s·∫°ch)." },
        { q: "I tried my best to help him realize his mistakes and (33) _________...", a: "repent", f: ["freeload", "pay upfront", "go through"], trans: "T√¥i ƒë√£ c·ªë h·∫øt s·ª©c ƒë·ªÉ gi√∫p anh ta nh·∫≠n ra sai l·∫ßm v√† ƒÉn nƒÉn...", r: "'repent' l√† ƒë·ªông t·ª´ nghƒ©a l√† ƒÉn nƒÉn, h·ªëi l·ªói." }
    ];

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    let userAnswers = {}; // track score

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        rawData.forEach((item, index) => {
            let qNum = index + 1;
            let options = [item.a, ...item.f];
            options = shuffleArray(options); // T·ª± ƒë·ªông tr·ªôn ƒë√°p √°n

            let card = document.createElement('div');
            card.className = 'question-card';
            card.id = `qcard-${qNum}`;
            
            let html = `<div class="question-text">C√¢u ${qNum}: ${item.q.replace(`(${qNum}) _________`, `<span style="color:var(--primary)">(${qNum}) .........</span>`)}</div>
                        <div class="options-grid">`;
            
            let labels = ['A', 'B', 'C', 'D'];
            options.forEach((opt, i) => {
                html += `<button class="option-btn" onclick="checkAnswer(${qNum}, this, '${opt}', '${item.a}')">
                            <b>${labels[i]}.</b> ${opt}
                         </button>`;
            });

            html += `</div>
                     <div class="explanation-box" id="exp-${qNum}">
                        <h4>üìò GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
                        <div class="exp-trans"><b>D·ªãch c√¢u:</b> "${item.trans}"</div>
                        <div class="exp-vocab"><b>T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b><br>${item.r}</div>
                     </div>`;
            card.innerHTML = html;
            container.appendChild(card);
        });
    }

    function checkAnswer(qNum, btn, selected, correct) {
        // N·∫øu ƒë√£ tr·∫£ l·ªùi r·ªìi th√¨ b·ªè qua
        if(userAnswers[qNum] !== undefined) return; 

        let buttons = btn.parentElement.querySelectorAll('.option-btn');
        
        if(selected === correct) {
            btn.classList.add('correct');
            playCorrect();
            triggerConfetti();
            userAnswers[qNum] = 1;
        } else {
            btn.classList.add('wrong');
            playWrong();
            userAnswers[qNum] = 0;
            // Hi·ªÉn th·ªã ngay ƒë√°p √°n ƒë√∫ng
            buttons.forEach(b => {
                if(b.innerText.includes(correct)) {
                    b.classList.add('correct');
                }
            });
        }
        
        // Disable buttons after click
        buttons.forEach(b => b.style.pointerEvents = 'none');

        // Show explanation
        document.getElementById(`exp-${qNum}`).style.display = 'block';
        
        // Update reading pane instantly
        let blanks = document.querySelectorAll('.blank-space');
        if(blanks[qNum-1]) {
            blanks[qNum-1].innerText = `(${qNum}) ${correct}`;
            blanks[qNum-1].style.color = (selected === correct) ? 'var(--correct)' : 'var(--wrong)';
        }
    }

    function submitQuiz() {
        let totalAnswered = Object.keys(userAnswers).length;
        if(totalAnswered < rawData.length) {
            let c = confirm(`B·∫°n m·ªõi l√†m ${totalAnswered}/${rawData.length} c√¢u. B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i?`);
            if(!c) return;
        }

        clearInterval(timerInterval); // Stop timer

        let score = 0;
        for(let key in userAnswers) { score += userAnswers[key]; }
        
        document.getElementById('finalScore').innerText = `${score}/${rawData.length}`;
        let msg = "";
        let pct = score / rawData.length;
        if(pct === 1) msg = "Tuy·ªát ƒë·ªânh! C·∫•p ƒë·ªô Thi√™n t√†i (Genius Level) üåü";
        else if(pct >= 0.8) msg = "L√†m t·ªët l·∫Øm! Ki·∫øn th·ª©c c·ªßa b·∫°n r·∫•t v·ªØng! üî•";
        else if(pct >= 0.5) msg = "C·ªë l√™n nh√©! H√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n! üí™";
        else msg = "ƒê·ª´ng n·∫£n ch√≠! H·ªçc t·ª´ v·ª±ng l√† m·ªôt qu√° tr√¨nh d√†i! üê¢";

        document.getElementById('feedbackMsg').innerText = msg;
        document.getElementById('resultModal').style.display = 'flex';
        triggerConfetti();
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

    // Initialize
    window.onload = renderQuiz;
</script>

</body>
</html>