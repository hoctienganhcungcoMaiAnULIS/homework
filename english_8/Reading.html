<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÃ i Kiá»ƒm Tra Tiáº¿ng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F3F9;
            --card-bg: #FFFFFF;
            --text-color: #2D3436;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(var(--primary-purple) 1px, transparent 1px), radial-gradient(var(--primary-teal) 1px, transparent 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-color);
            padding-bottom: 80px; /* Space for sticky footer */
        }

        /* --- Header --- */
        header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 5px solid var(--primary-teal);
        }

        h1 {
            font-size: 1.5rem;
            color: var(--primary-purple);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .teacher-name {
            font-size: 0.9rem;
            color: #636e72;
            font-weight: 600;
        }

        /* --- Container --- */
        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* --- Reading Passage Box --- */
        .reading-passage {
            background: #fff;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
            box-shadow: 0 8px 0 #dfe6e9;
            position: relative;
        }

        .reading-title {
            background: var(--primary-purple);
            color: white;
            padding: 8px 20px;
            border-radius: 15px;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 15px;
            box-shadow: 0 4px 0 #5e3a8c;
        }

        .passage-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #2d3436;
            text-align: justify;
        }

        /* --- Glossary Table --- */
        .glossary-box {
            margin-top: 20px;
            background: #E8F0FE;
            border-radius: 15px;
            padding: 15px;
            border-left: 5px solid var(--primary-teal);
        }

        .glossary-title {
            font-weight: 800;
            color: var(--primary-purple);
            margin-bottom: 10px;
            display: block;
        }

        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .glossary-table th {
            text-align: left;
            padding: 8px;
            color: var(--primary-teal);
            border-bottom: 2px solid #cbd5e0;
        }

        .glossary-table td {
            padding: 8px;
            border-bottom: 1px solid #e2e8f0;
        }

        .tag-type {
            background: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
            color: #636e72;
            border: 1px solid #cbd5e0;
        }

        /* --- Question Card --- */
        .question-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }

        .question-card:hover {
            transform: translateY(-3px);
        }

        .q-number {
            color: var(--primary-teal);
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: block;
        }

        .q-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        /* --- T/F Options --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn-option {
            background: white;
            border: 2px solid #dfe6e9;
            border-radius: 15px;
            padding: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            color: #636e72;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 #dfe6e9;
            text-align: center;
            outline: none;
        }

        .btn-option:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #dfe6e9;
        }

        .btn-option:hover {
            transform: scale(1.02);
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .btn-option.selected-true {
            background-color: var(--correct-green);
            color: white;
            border-color: var(--correct-green);
            box-shadow: 0 5px 0 #008f47;
        }

        .btn-option.selected-false {
            background-color: var(--wrong-red);
            color: white;
            border-color: var(--wrong-red);
            box-shadow: 0 5px 0 #c41e3a;
        }

        /* --- Written Answer Area --- */
        .written-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #dfe6e9;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            margin-bottom: 15px;
            resize: vertical;
        }
        
        .written-input:focus {
            outline: none;
            border-color: var(--primary-purple);
        }

        .btn-check-written {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 0 #00967d;
        }
        
        .btn-check-written:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* --- Feedback & Explanation --- */
        .feedback-area {
            display: none; /* Hidden by default */
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid var(--primary-purple);
            animation: fadeIn 0.5s ease;
        }

        .explanation-title {
            font-weight: 800;
            color: var(--primary-purple);
            display: block;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        .exp-step {
            margin-bottom: 8px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .exp-quote {
            background: #fff3cd;
            padding: 2px 5px;
            border-radius: 4px;
            font-style: italic;
        }

        /* --- Sticky Footer --- */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            z-index: 900;
        }

        .btn-submit {
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 6px 0 #5e3a8c;
            transition: transform 0.2s;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
        }
        
        .btn-submit:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .shake-element {
            animation: shake 0.4s ease-in-out;
        }

        /* Modal Results */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes pop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-display {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary-purple);
            margin: 20px 0;
        }

        .modal-btn {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 10px;
        }

        .unanswered {
            border: 2px solid #fdcb6e !important;
            background-color: #fffaf0;
        }

        .correct-answer-text {
            color: var(--correct-green);
            font-weight: bold;
        }
        .wrong-answer-text {
            color: var(--wrong-red);
            font-weight: bold;
        }

    </style>
</head>
<body>

<header>
    <h1>BÃ i Kiá»ƒm Tra - Unit: Environment</h1>
    <div class="teacher-name">GiÃ¡o viÃªn: Ms Mai An ULIS</div>
</header>

<div class="container">

    <div class="reading-passage">
        <div class="reading-title">Reading Passage 1: Air Pollution</div>
        <div class="passage-text">
            Air pollution is a serious problem in many cities. Motor vehicles, factories and other sources create so much air pollution that it may hang in the air like dirty fog. Air pollution threatens the health of the people who live in cities. City wastes cause water pollution when they are poured into the waterways. These wastes kill fish and make some areas unfit for swimming. In addition, many large cities have difficulties in disposing of their garbage. The amount of garbage grows each year, but places to put it are quickly filling up. Citizens, governments, industries, scientists, and business people must work together in different ways to gradually reduce pollution. For example, most cities have introduced recycling programmes.
        </div>
        <div class="glossary-box">
            <span class="glossary-title">ğŸ“š Glossary (Tá»« vá»±ng há»c thuáº­t)</span>
            <table class="glossary-table">
                <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                <tr><td><b>Dispose of</b></td><td><span class="tag-type">v</span></td><td>Loáº¡i bá», vá»©t bá»</td></tr>
                <tr><td><b>Gradually</b></td><td><span class="tag-type">adv</span></td><td>Dáº§n dáº§n, tá»« tá»«</td></tr>
                <tr><td><b>Waterway</b></td><td><span class="tag-type">n</span></td><td>ÄÆ°á»ng thá»§y (sÃ´ng, kÃªnh)</td></tr>
            </table>
        </div>
    </div>

    <div class="question-group" id="p1-group">
        <div class="question-card" id="q1">
            <span class="q-number">Question 1</span>
            <div class="q-text">Motor vehicles and factories are among some sources of air pollution.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q1', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q1', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Xe cÆ¡ giá»›i vÃ  nhÃ  mÃ¡y lÃ  má»™t trong sá»‘ nhá»¯ng nguá»“n gÃ¢y Ã´ nhiá»…m khÃ´ng khÃ­.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c liá»‡t kÃª rÃµ rÃ ng cÃ¡c nguá»“n gÃ¢y Ã´ nhiá»…m.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Motor vehicles, factories and other sources create so much air pollution..." (Xe cÆ¡ giá»›i, nhÃ  mÃ¡y vÃ  cÃ¡c nguá»“n khÃ¡c táº¡o ra ráº¥t nhiá»u Ã´ nhiá»…m khÃ´ng khÃ­...).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>

        <div class="question-card" id="q2">
            <span class="q-number">Question 2</span>
            <div class="q-text">Air pollution doesn't endanger people's health in some cities.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q2', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q2', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Ã” nhiá»…m khÃ´ng khÃ­ khÃ´ng gÃ¢y nguy hiá»ƒm cho sá»©c khá»e con ngÆ°á»i á»Ÿ má»™t sá»‘ thÃ nh phá»‘.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> CÃ¢u há»i nÃ³i "khÃ´ng gÃ¢y nguy hiá»ƒm" (doesn't endanger), nhÆ°ng bÃ i Ä‘á»c kháº³ng Ä‘á»‹nh ngÆ°á»£c láº¡i.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Air pollution threatens the health of the people who live in cities." (Ã” nhiá»…m khÃ´ng khÃ­ Ä‘e dá»a sá»©c khá»e cá»§a nhá»¯ng ngÆ°á»i sá»‘ng á»Ÿ thÃ nh phá»‘).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">FALSE</span></div>
            </div>
        </div>

        <div class="question-card" id="q3">
            <span class="q-number">Question 3</span>
            <div class="q-text">Air pollution is the only problem of the environment mentioned in this passage.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q3', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q3', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Ã” nhiá»…m khÃ´ng khÃ­ lÃ  váº¥n Ä‘á» mÃ´i trÆ°á»ng duy nháº¥t Ä‘Æ°á»£c Ä‘á» cáº­p trong Ä‘oáº¡n vÄƒn nÃ y.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c cÃ³ nháº¯c Ä‘áº¿n cáº£ "Water pollution" (Ã´ nhiá»…m nÆ°á»›c) do rÃ¡c tháº£i thÃ nh phá»‘.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "City wastes cause water pollution..." (Cháº¥t tháº£i thÃ nh phá»‘ gÃ¢y ra Ã´ nhiá»…m nÆ°á»›c...).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">FALSE</span></div>
            </div>
        </div>

        <div class="question-card" id="q4">
            <span class="q-number">Question 4</span>
            <div class="q-text">Garbage disposal is a problem in many large cities.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q4', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q4', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Viá»‡c xá»­ lÃ½ rÃ¡c tháº£i lÃ  má»™t váº¥n Ä‘á» á»Ÿ nhiá»u thÃ nh phá»‘ lá»›n.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> ThÃ´ng tin hoÃ n toÃ n trÃ¹ng khá»›p vá»›i bÃ i Ä‘á»c.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "...many large cities have difficulties in disposing of their garbage." (...nhiá»u thÃ nh phá»‘ lá»›n gáº·p khÃ³ khÄƒn trong viá»‡c xá»­ lÃ½ rÃ¡c tháº£i cá»§a há»).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>

        <div class="question-card" id="q5">
            <span class="q-number">Question 5</span>
            <div class="q-text">Everyone must cooperate to reduce pollution.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q5', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q5', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Má»i ngÆ°á»i pháº£i há»£p tÃ¡c Ä‘á»ƒ giáº£m thiá»ƒu Ã´ nhiá»…m.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c liá»‡t kÃª hÃ ng loáº¡t Ä‘á»‘i tÆ°á»£ng (cÃ´ng dÃ¢n, chÃ­nh phá»§, doanh nghiá»‡p...) pháº£i lÃ m viá»‡c cÃ¹ng nhau.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Citizens, governments, industries... must work together..." (CÃ´ng dÃ¢n, chÃ­nh phá»§, cÃ¡c ngÃ nh cÃ´ng nghiá»‡p... pháº£i lÃ m viá»‡c cÃ¹ng nhau...).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>
    </div>

    <div class="reading-passage">
        <div class="reading-title">Reading Passage 2: Types of Pollution</div>
        <div class="passage-text">
            Environmental pollution is one of the impacts of human activities on the Earth. There are four types of pollution, namely, air pollution, soil pollution, water pollution and noise pollution.<br><br>
            Most of the air pollution results from the burning of fossil fuels, motor vehicles, factories, aircraft and rockets. This can cause acid rain which damages water, soil, and plants. Air pollution also contributes to the greenhouse effect.<br><br>
            Soil pollution is a result of dumping plastic or other waste in the ground and the overuse of chemicals in growing crops. The long-term effects of soil pollution are contaminated vegetation and the decrease of soil fertility.<br><br>
            Water pollution is a result of dumping pollutants such as oil and other chemicals in rivers, which makes the water unclean or contaminated. Rubbish blockages in rivers can also cause pollution.<br><br>
            The effects of water pollution include the destruction of rivers, lakes and the pollution of groundwater, surface water and seawater.<br><br>
            Noise pollution is caused by loud and annoying sounds of motor vehicles, railway, aircraft and jet engines, factory machinery and musical instruments. It can cause stress and psychological and health problems for humans such as increased heart rate and hearing damage.<br><br>
            Environmental pollution is becoming an increasingly serious problem or threat that needs to be taken care of as soon as possible, not only for the sake of the environment, but also for the people that live in it.
        </div>
        <div class="glossary-box">
            <span class="glossary-title">ğŸ“š Glossary (Tá»« vá»±ng há»c thuáº­t)</span>
            <table class="glossary-table">
                <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                <tr><td><b>Contaminated</b></td><td><span class="tag-type">adj</span></td><td>Bá»‹ nhiá»…m báº©n, Ã´ nhiá»…m</td></tr>
                <tr><td><b>Fertility</b></td><td><span class="tag-type">n</span></td><td>Äá»™ mÃ u má»¡ (cá»§a Ä‘áº¥t)</td></tr>
                <tr><td><b>Psychological</b></td><td><span class="tag-type">adj</span></td><td>Thuá»™c vá» tÃ¢m lÃ½</td></tr>
            </table>
        </div>
    </div>

    <div class="question-group" id="p2-group">
        <div class="question-card" id="q6">
            <span class="q-number">Question 6</span>
            <div class="q-text">Environmental pollution results from natural disasters.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q6', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q6', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Ã” nhiá»…m mÃ´i trÆ°á»ng lÃ  káº¿t quáº£ cá»§a thiÃªn tai.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c ngay cÃ¢u Ä‘áº§u tiÃªn Ä‘Ã£ kháº³ng Ä‘á»‹nh nguyÃªn nhÃ¢n lÃ  do con ngÆ°á»i.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Environmental pollution is one of the impacts of human activities on the Earth." (Ã” nhiá»…m mÃ´i trÆ°á»ng lÃ  má»™t trong nhá»¯ng tÃ¡c Ä‘á»™ng cá»§a cÃ¡c hoáº¡t Ä‘á»™ng con ngÆ°á»i...).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">FALSE</span></div>
            </div>
        </div>

        <div class="question-card" id="q7">
            <span class="q-number">Question 7</span>
            <div class="q-text">The greenhouse effect is a result of water pollution.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q7', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q7', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Hiá»‡u á»©ng nhÃ  kÃ­nh lÃ  káº¿t quáº£ cá»§a Ã´ nhiá»…m nÆ°á»›c.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c nÃ³i hiá»‡u á»©ng nhÃ  kÃ­nh liÃªn quan Ä‘áº¿n Ã´ nhiá»…m khÃ´ng khÃ­ (Air pollution).</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Air pollution also contributes to the greenhouse effect." (Ã” nhiá»…m khÃ´ng khÃ­ cÅ©ng gÃ³p pháº§n gÃ¢y ra hiá»‡u á»©ng nhÃ  kÃ­nh).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">FALSE</span></div>
            </div>
        </div>

        <div class="question-card" id="q8">
            <span class="q-number">Question 8</span>
            <div class="q-text">Water pollutants such as oil and other chemicals and rubbish blockages in river make contaminated.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q8', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q8', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> CÃ¡c cháº¥t gÃ¢y Ã´ nhiá»…m nÆ°á»›c nhÆ° dáº§u, hÃ³a cháº¥t vÃ  rÃ¡c tháº£i gÃ¢y táº¯c ngháº½n sÃ´ng ngÃ²i lÃ m nÆ°á»›c bá»‹ Ã´ nhiá»…m.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> CÃ¢u nÃ y tÃ³m táº¯t Ä‘Ãºng ná»™i dung pháº§n Water pollution.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "...dumping pollutants such as oil and other chemicals... Rubbish blockages in rivers can also cause pollution."</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>

        <div class="question-card" id="q9">
            <span class="q-number">Question 9</span>
            <div class="q-text">Noise pollution can increase heart rate and damage hearing.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q9', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q9', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Ã” nhiá»…m tiáº¿ng á»“n cÃ³ thá»ƒ lÃ m tÄƒng nhá»‹p tim vÃ  gÃ¢y háº¡i thÃ­nh giÃ¡c.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> ThÃ´ng tin chÃ­nh xÃ¡c.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "It can cause... increased heart rate and hearing damage."</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>

        <div class="question-card" id="q10">
            <span class="q-number">Question 10</span>
            <div class="q-text">Environmental pollution needs to be taken care to protect the environment and the people that live in it.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q10', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q10', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Ã” nhiá»…m mÃ´i trÆ°á»ng cáº§n Ä‘Æ°á»£c quan tÃ¢m Ä‘á»ƒ báº£o vá»‡ mÃ´i trÆ°á»ng vÃ  nhá»¯ng ngÆ°á»i sá»‘ng trong Ä‘Ã³.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> ÄÃ¢y lÃ  cÃ¢u káº¿t luáº­n cá»§a bÃ i Ä‘á»c.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "...needs to be taken care of... not only for the sake of the environment, but also for the people..."</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>
    </div>

    <div class="reading-passage">
        <div class="reading-title">Reading Passage 3: Switch to Green</div>
        <div class="passage-text">
            In Australia it is now illegal to use traditional light bulbs. The whole country is changing to low energy bulbs for their lights. This will reduce the amount of energy that each home uses and will obviously be better for the environment. And Australia is not the only country doing this. Will your country be next?<br><br>
            So, what are the advantages and disadvantages of using the new low energy bulbs? Of course, the main advantage is for the environment. If all houses in Viet Nam used these bulbs, the effects on the environment would be the same as taking three quarters of a million cars off the road. Cost is another advantage. If we changed all the bulbs in our houses, we could cut our energy bills by fifty percent.<br><br>
            There are a few disadvantages, however. The light that these bulbs give is not exactly the same as light from traditional bulbs. It's colder and whiter. Some people don't like it very much. Also, the light doesn't come on immediately. After switching on the light, you have to wait a short time. Another disadvantage for some people is that at the moment you can't make these bulbs give a stronger or weaker light by using a special switch. But scientists say this will soon be possible.<br><br>
            But if we can help the environment by using these bulbs, are the disadvantages really such a problem?
        </div>
        <div class="glossary-box">
            <span class="glossary-title">ğŸ“š Glossary (Tá»« vá»±ng há»c thuáº­t)</span>
            <table class="glossary-table">
                <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                <tr><td><b>Illegal</b></td><td><span class="tag-type">adj</span></td><td>Báº¥t há»£p phÃ¡p, pháº¡m luáº­t</td></tr>
                <tr><td><b>Immediately</b></td><td><span class="tag-type">adv</span></td><td>Ngay láº­p tá»©c</td></tr>
                <tr><td><b>Advantage</b></td><td><span class="tag-type">n</span></td><td>Lá»£i Ã­ch, Æ°u Ä‘iá»ƒm</td></tr>
            </table>
        </div>
    </div>

    <div class="question-group" id="p3-group">
        <div class="question-card" id="q11">
            <span class="q-number">Question 11</span>
            <div class="q-text">In Australia you can choose which bulbs to use.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q11', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q11', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> á» Ãšc báº¡n cÃ³ thá»ƒ chá»n loáº¡i bÃ³ng Ä‘Ã¨n Ä‘á»ƒ sá»­ dá»¥ng.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> Báº¡n khÃ´ng Ä‘Æ°á»£c chá»n vÃ¬ dÃ¹ng bÃ³ng Ä‘Ã¨n truyá»n thá»‘ng lÃ  pháº¡m luáº­t.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "In Australia it is now illegal to use traditional light bulbs." (á» Ãšc hiá»‡n nay viá»‡c sá»­ dá»¥ng bÃ³ng Ä‘Ã¨n truyá»n thá»‘ng lÃ  báº¥t há»£p phÃ¡p).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">FALSE</span></div>
            </div>
        </div>

        <div class="question-card" id="q12">
            <span class="q-number">Question 12</span>
            <div class="q-text">It's expensive to use low energy bulbs.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q12', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q12', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Sá»­ dá»¥ng bÃ³ng Ä‘Ã¨n tiáº¿t kiá»‡m nÄƒng lÆ°á»£ng thÃ¬ Ä‘áº¯t Ä‘á».</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c nÃ³i ráº±ng nÃ³ giÃºp giáº£m hÃ³a Ä‘Æ¡n tiá»n Ä‘iá»‡n.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Cost is another advantage... we could cut our energy bills by fifty percent." (Chi phÃ­ lÃ  má»™t lá»£i Ã­ch khÃ¡c... chÃºng ta cÃ³ thá»ƒ cáº¯t giáº£m hÃ³a Ä‘Æ¡n nÄƒng lÆ°á»£ng tá»›i 50%).</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">FALSE</span></div>
            </div>
        </div>

        <div class="question-card" id="q13">
            <span class="q-number">Question 13</span>
            <div class="q-text">It takes longer for the light to come on.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q13', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q13', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Máº¥t nhiá»u thá»i gian hÆ¡n Ä‘á»ƒ Ä‘Ã¨n sÃ¡ng lÃªn.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> ÄÃ¨n khÃ´ng sÃ¡ng ngay láº­p tá»©c mÃ  pháº£i Ä‘á»£i má»™t chÃºt.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Also, the light doesn't come on immediately. After switching on the light, you have to wait a short time."</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>

        <div class="question-card" id="q14">
            <span class="q-number">Question 14</span>
            <div class="q-text">The light from these bulbs is quite weak.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q14', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q14', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Ãnh sÃ¡ng tá»« nhá»¯ng bÃ³ng Ä‘Ã¨n nÃ y khÃ¡ yáº¿u.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c chá»‰ nÃ³i Ã¡nh sÃ¡ng "láº¡nh hÆ¡n vÃ  tráº¯ng hÆ¡n" (colder and whiter) vÃ  hiá»‡n táº¡i khÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘á»™ sÃ¡ng (make... stronger or weaker), chá»© khÃ´ng kháº³ng Ä‘á»‹nh Ã¡nh sÃ¡ng cá»§a nÃ³ "yáº¿u" (weak). Viá»‡c khÃ´ng Ä‘iá»u chá»‰nh Ä‘Æ°á»£c khÃ´ng Ä‘á»“ng nghÄ©a vá»›i yáº¿u.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "It's colder and whiter."</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">FALSE</span></div>
            </div>
        </div>

        <div class="question-card" id="q15">
            <span class="q-number">Question 15</span>
            <div class="q-text">The light from traditional bulbs is different.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkTF('q15', true, this)">TRUE</button>
                <button class="btn-option" onclick="checkTF('q15', false, this)">FALSE</button>
            </div>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u:</b> Ãnh sÃ¡ng tá»« bÃ³ng Ä‘Ã¨n truyá»n thá»‘ng thÃ¬ khÃ¡c biá»‡t.</div>
                <div class="exp-step">ğŸ” <b>PhÃ¢n tÃ­ch:</b> BÃ i Ä‘á»c xÃ¡c nháº­n sá»± khÃ¡c biá»‡t nÃ y.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "The light that these bulbs give is not exactly the same as light from traditional bulbs."</div>
                <div class="exp-step">ğŸ’¡ <b>ÄÃ¡p Ã¡n:</b> <span class="correct-answer-text">TRUE</span></div>
            </div>
        </div>
    </div>

    <div class="reading-passage">
        <div class="reading-title">Exercise 4: Pollution Comprehension</div>
        <div class="passage-text">
            Nowadays, one of the biggest problems facing the world is pollution. It has many effects on our daily lives that something must be done. There are three major types of pollution: air pollution, land pollution and water pollution. They are mainly caused by human activities.<br><br>
            Air pollution is the result of human activity where chemicals and other dangerous materials are released into the air. This happens through the release of carbon monoxide gas from exhaust pipes of motor vehicles. Other gases such as sulphur oxides are released from the burning of coal and oil. High air pollution levels can cause damage to the environment. It also brings discomfort to humans and other living organisms. In the long term, air pollution can cause serious breathing problems, lung cancer and heart disease.<br><br>
            Land pollution is the destruction of the earth's land surfaces. It is often caused by human activity such as careless disposal of wastes, over-mining of minerals and wrong use of land for planting. All these will affect our health in the long run. They will lead to all kinds of diseases such as cancer, heart disease and breathing problems. Land pollution also causes natural disasters such as flash floods and landslides.<br><br>
            Water pollution is the contamination of lakes, caused by human activities. It can be harmful to organisms and plants which live in the water. Some known causes of water pollution are factory wastes or leaking underground tanks. These can be chemical substances that are toxic. The polluted water can cause cholera, typhoid fever and the disappearance of biodiversity and aquatic ecosystems.
        </div>
        <div class="glossary-box">
            <span class="glossary-title">ğŸ“š Glossary (Tá»« vá»±ng há»c thuáº­t)</span>
            <table class="glossary-table">
                <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                <tr><td><b>Carbon monoxide</b></td><td><span class="tag-type">n</span></td><td>KhÃ­ CO (Ä‘á»™c)</td></tr>
                <tr><td><b>Organism</b></td><td><span class="tag-type">n</span></td><td>Sinh váº­t sá»‘ng</td></tr>
                <tr><td><b>Biodiversity</b></td><td><span class="tag-type">n</span></td><td>Äa dáº¡ng sinh há»c</td></tr>
                <tr><td><b>Aquatic</b></td><td><span class="tag-type">adj</span></td><td>Thuá»™c vá» nÆ°á»›c (thá»§y sinh)</td></tr>
                <tr><td><b>Cholera</b></td><td><span class="tag-type">n</span></td><td>Bá»‡nh táº£</td></tr>
            </table>
        </div>
    </div>

    <div class="question-group" id="ex4-group">
        <div class="question-card" id="wq1">
            <span class="q-number">Question 1</span>
            <div class="q-text">What are the three major types of pollution mentioned in the text?</div>
            <textarea class="written-input" rows="3" placeholder="Type your answer here..."></textarea>
            <button class="btn-check-written" onclick="checkWritten('wq1', 'The three major types of pollution are air pollution, land pollution and water pollution.')">Check Answer</button>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u há»i:</b> Ba loáº¡i Ã´ nhiá»…m chÃ­nh Ä‘Æ°á»£c Ä‘á» cáº­p trong vÄƒn báº£n lÃ  gÃ¬?</div>
                <div class="exp-step">ğŸ’¡ <b>Gá»£i Ã½ tráº£ lá»i:</b> The three major types of pollution are air pollution, land pollution and water pollution.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "There are three major types of pollution: air pollution, land pollution and water pollution."</div>
            </div>
        </div>

        <div class="question-card" id="wq2">
            <span class="q-number">Question 2</span>
            <div class="q-text">How is air pollution primarily caused?</div>
            <textarea class="written-input" rows="3" placeholder="Type your answer here..."></textarea>
            <button class="btn-check-written" onclick="checkWritten('wq2', 'It is primarily caused by human activity where chemicals and other dangerous materials are released into the air (from motor vehicles, burning coal and oil).')">Check Answer</button>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u há»i:</b> Ã” nhiá»…m khÃ´ng khÃ­ chá»§ yáº¿u do Ä‘Ã¢u?</div>
                <div class="exp-step">ğŸ’¡ <b>Gá»£i Ã½ tráº£ lá»i:</b> It is primarily caused by human activity where chemicals and other dangerous materials are released into the air.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "Air pollution is the result of human activity where chemicals and other dangerous materials are released into the air."</div>
            </div>
        </div>

        <div class="question-card" id="wq3">
            <span class="q-number">Question 3</span>
            <div class="q-text">What are some long-term health effects of air pollution?</div>
            <textarea class="written-input" rows="3" placeholder="Type your answer here..."></textarea>
            <button class="btn-check-written" onclick="checkWritten('wq3', 'It can cause serious breathing problems, lung cancer and heart disease.')">Check Answer</button>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u há»i:</b> Má»™t sá»‘ áº£nh hÆ°á»Ÿng sá»©c khá»e lÃ¢u dÃ i cá»§a Ã´ nhiá»…m khÃ´ng khÃ­ lÃ  gÃ¬?</div>
                <div class="exp-step">ğŸ’¡ <b>Gá»£i Ã½ tráº£ lá»i:</b> In the long term, it can cause serious breathing problems, lung cancer and heart disease.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "In the long term, air pollution can cause serious breathing problems, lung cancer and heart disease."</div>
            </div>
        </div>

        <div class="question-card" id="wq4">
            <span class="q-number">Question 4</span>
            <div class="q-text">What are some causes of land pollution mentioned in the text?</div>
            <textarea class="written-input" rows="3" placeholder="Type your answer here..."></textarea>
            <button class="btn-check-written" onclick="checkWritten('wq4', 'Some causes are careless disposal of wastes, over-mining of minerals and wrong use of land for planting.')">Check Answer</button>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u há»i:</b> Má»™t sá»‘ nguyÃªn nhÃ¢n gÃ¢y Ã´ nhiá»…m Ä‘áº¥t Ä‘Æ°á»£c Ä‘á» cáº­p lÃ  gÃ¬?</div>
                <div class="exp-step">ğŸ’¡ <b>Gá»£i Ã½ tráº£ lá»i:</b> Careless disposal of wastes, over-mining of minerals and wrong use of land for planting.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "...caused by human activity such as careless disposal of wastes, over-mining of minerals and wrong use of land for planting."</div>
            </div>
        </div>

        <div class="question-card" id="wq5">
            <span class="q-number">Question 5</span>
            <div class="q-text">What are some consequences of water pollution?</div>
            <textarea class="written-input" rows="3" placeholder="Type your answer here..."></textarea>
            <button class="btn-check-written" onclick="checkWritten('wq5', 'It can cause cholera, typhoid fever and the disappearance of biodiversity and aquatic ecosystems.')">Check Answer</button>
            <div class="feedback-area">
                <span class="explanation-title">âœ¨ GIáº¢I THÃCH CHI TIáº¾T (MS MAI AN):</span>
                <div class="exp-step">ğŸ‡¬ğŸ‡§ <b>Dá»‹ch cÃ¢u há»i:</b> Má»™t sá»‘ háº­u quáº£ cá»§a Ã´ nhiá»…m nÆ°á»›c lÃ  gÃ¬?</div>
                <div class="exp-step">ğŸ’¡ <b>Gá»£i Ã½ tráº£ lá»i:</b> The polluted water can cause cholera, typhoid fever and the disappearance of biodiversity and aquatic ecosystems.</div>
                <div class="exp-step">ğŸ“– <b>Dáº«n chá»©ng:</b> "The polluted water can cause cholera, typhoid fever and the disappearance of biodiversity and aquatic ecosystems."</div>
            </div>
        </div>
    </div>

</div>

<div class="sticky-footer">
    <button class="btn-submit" onclick="submitExam()">Ná»˜P BÃ€I (SUBMIT)</button>
</div>

<div class="modal" id="resultModal">
    <div class="modal-content">
        <h2>Káº¾T QUáº¢ Cá»¦A Báº N</h2>
        <div class="score-display" id="finalScore">0/15</div>
        <p id="motivationalText">HÃ£y cá»‘ gáº¯ng hÆ¡n nhÃ©!</p>
        <button class="modal-btn" onclick="closeModal()">Xem láº¡i bÃ i lÃ m</button>
    </div>
</div>

<script>
    // Audio Context Setup for Sounds
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            // Ding sound (high pitch, short)
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        } else if (type === 'wrong') {
            // Buzz sound (sawtooth, low pitch)
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.2);
            gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // Confetti Logic
    function fireConfetti(element) {
        const rect = element.getBoundingClientRect();
        const center = {
            x: rect.left + rect.width / 2,
            y: rect.top + rect.height / 2
        };
        // Simple visual feedback instead of heavy library
        // We will create small divs and animate them
        for(let i=0; i<20; i++) {
            createParticle(center.x, center.y);
        }
    }

    function createParticle(x, y) {
        const particle = document.createElement('div');
        document.body.appendChild(particle);
        const size = Math.random() * 8 + 4;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.background = `hsl(${Math.random() * 360}, 70%, 50%)`;
        particle.style.position = 'fixed';
        particle.style.left = `${x}px`;
        particle.style.top = `${y}px`;
        particle.style.pointerEvents = 'none';
        particle.style.borderRadius = '50%';
        particle.style.zIndex = '9999';

        const destX = (Math.random() - 0.5) * 200;
        const destY = (Math.random() - 0.5) * 200 - 50;
        
        const animation = particle.animate([
            { transform: `translate(0, 0) scale(1)`, opacity: 1 },
            { transform: `translate(${destX}px, ${destY}px) scale(0)`, opacity: 0 }
        ], {
            duration: 1000 + Math.random() * 500,
            easing: 'cubic-bezier(0, .9, .57, 1)',
            delay: Math.random() * 100
        });

        animation.onfinish = () => particle.remove();
    }

    // Game Logic
    let score = 0;
    const totalTFQuestions = 15; // 3 passages * 5 questions
    const answeredTF = new Set();
    const answeredWritten = new Set();

    function checkTF(questionId, isTrue, btnElement) {
        if (answeredTF.has(questionId)) return; // Prevent re-answering
        answeredTF.add(questionId);

        const card = document.getElementById(questionId);
        const feedback = card.querySelector('.feedback-area');
        
        // Define correct answers map
        const correctAnswers = {
            'q1': true, 'q2': false, 'q3': false, 'q4': true, 'q5': true,
            'q6': false, 'q7': false, 'q8': true, 'q9': true, 'q10': true,
            'q11': false, 'q12': false, 'q13': true, 'q14': false, 'q15': true
        };

        const isCorrect = correctAnswers[questionId] === isTrue;

        if (isCorrect) {
            btnElement.classList.add('selected-true');
            score++;
            playSound('correct');
            fireConfetti(btnElement);
        } else {
            btnElement.classList.add('selected-false');
            playSound('wrong');
            // Find and highlight correct button
            const btns = card.querySelectorAll('.btn-option');
            btns.forEach(b => {
                if ((correctAnswers[questionId] && b.innerText === 'TRUE') || 
                    (!correctAnswers[questionId] && b.innerText === 'FALSE')) {
                    b.classList.add('selected-true'); // Show which was correct
                    b.style.opacity = '0.7';
                }
            });
            card.classList.add('shake-element');
            setTimeout(() => card.classList.remove('shake-element'), 500);
        }

        // Disable buttons
        const allBtns = card.querySelectorAll('.btn-option');
        allBtns.forEach(btn => btn.disabled = true);

        // Show Feedback
        feedback.style.display = 'block';
        card.classList.remove('unanswered');
    }

    function checkWritten(questionId) {
        if (answeredWritten.has(questionId)) return;
        answeredWritten.add(questionId);

        const card = document.getElementById(questionId);
        const feedback = card.querySelector('.feedback-area');
        const input = card.querySelector('.written-input');
        const btn = card.querySelector('.btn-check-written');

        if (input.value.trim().length === 0) {
            alert("HÃ£y viáº¿t cÃ¢u tráº£ lá»i trÆ°á»›c khi kiá»ƒm tra nhÃ©!");
            answeredWritten.delete(questionId);
            return;
        }

        btn.innerText = "ÄÃ£ kiá»ƒm tra (Checked)";
        btn.style.background = "#b2bec3";
        btn.disabled = true;
        input.disabled = true;
        
        playSound('correct'); // Encouragement sound
        feedback.style.display = 'block';
        card.classList.remove('unanswered');
    }

    function submitExam() {
        // Check for unanswered questions
        let unansweredCount = 0;
        
        // Check T/F
        for (let i = 1; i <= 15; i++) {
            if (!answeredTF.has('q' + i)) {
                document.getElementById('q' + i).classList.add('unanswered');
                unansweredCount++;
            }
        }

        // Check Written
        for (let i = 1; i <= 5; i++) {
            if (!answeredWritten.has('wq' + i)) {
                document.getElementById('wq' + i).classList.add('unanswered');
                unansweredCount++;
            }
        }

        if (unansweredCount > 0) {
            alert(`Báº¡n cÃ²n ${unansweredCount} cÃ¢u chÆ°a lÃ m (Ä‘Æ°á»£c tÃ´ viá»n vÃ ng). HÃ£y hoÃ n thÃ nh nhÃ©!`);
            // Scroll to first unanswered
            const first = document.querySelector('.unanswered');
            if(first) first.scrollIntoView({behavior: 'smooth', block: 'center'});
            return;
        }

        // Calculate and Show Score (Only T/F counts towards auto-score)
        const modal = document.getElementById('resultModal');
        const scoreDisplay = document.getElementById('finalScore');
        const motivation = document.getElementById('motivationalText');

        scoreDisplay.innerText = `${score}/${totalTFQuestions}`;
        
        if (score === totalTFQuestions) {
            motivation.innerText = "Xuáº¥t sáº¯c! Báº¡n lÃ  thiÃªn tÃ i tiáº¿ng Anh! ğŸ†";
            playSound('correct');
        } else if (score >= 10) {
            motivation.innerText = "LÃ m tá»‘t láº¯m! Cá»‘ gáº¯ng thÃªm chÃºt ná»¯a nhÃ©! ğŸŒŸ";
        } else {
            motivation.innerText = "Äá»«ng buá»“n, hÃ£y xem láº¡i pháº§n giáº£i thÃ­ch Ä‘á»ƒ tiáº¿n bá»™ hÆ¡n! ğŸ’ª";
        }

        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

</script>

</body>
</html>