<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms Mai An ULIS - Wildlife Presenter</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Safari & Wildlife Palette */
            --primary: #16a085;      /* Jungle Green */
            --secondary: #d35400;    /* Safari Orange */
            --accent: #f39c12;       /* Sun Yellow */
            --correct: #27ae60;      /* Emerald */
            --wrong: #c0392b;        /* Deep Red */
            --text-dark: #2c3e50;
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
        }

        /* 1. ANIMATED GRADIENT BACKGROUND */
        body {
            overflow: hidden;
            color: var(--text-dark);
            background: linear-gradient(-45deg, #16A085, #F4D03F, #E67E22, #27AE60);
            background-size: 400% 400%;
            animation: smoothGradient 20s ease infinite;
            height: 100vh;
            position: relative;
        }

        @keyframes smoothGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 2. FLOATING SVG PATTERN LAYER */
        .pattern-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Wildlife Emojis: Lion, Chimpanzee, Leaf, Camera */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='250'%3E%3Ctext x='30' y='60' font-size='45'%3Eü¶Å%3C/text%3E%3Ctext x='150' y='120' font-size='40'%3Eüêí%3C/text%3E%3Ctext x='40' y='210' font-size='45'%3Eüåø%3C/text%3E%3Ctext x='180' y='230' font-size='35'%3Eüé•%3C/text%3E%3C/svg%3E");
            opacity: 0.25;
            pointer-events: none;
            z-index: 1;
            animation: floatSVG 40s linear infinite;
        }

        @keyframes floatSVG {
            from { background-position: 0 0; }
            to { background-position: 500px 500px; }
        }

        /* HEADER / CONTROL BAR */
        header {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 6px 20px rgba(22, 160, 133, 0.2);
            border-bottom: 5px solid var(--secondary);
        }

        .header-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn-action {
            padding: 12px 25px;
            border: none;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 rgba(0,0,0,0.15);
        }

        .btn-start { background-color: var(--accent); color: #8e44ad; }
        .btn-start:active { transform: translateY(6px); box-shadow: none; }

        #timer-display {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
            background: #e8f8f5;
            padding: 5px 20px;
            border-radius: 15px;
            border: 3px dashed var(--primary);
            min-width: 120px;
            text-align: center;
        }

        /* SPLIT SCREEN LAYOUT */
        .main-container {
            display: flex;
            height: calc(100vh - 85px);
            position: relative;
            z-index: 5;
        }

        .panel {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
        }

        .left-panel {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-right: 4px dashed var(--primary);
        }

        /* READING CONTENT */
        .passage-title {
            font-size: 2.8rem;
            color: var(--primary);
            margin-bottom: 5px;
            text-align: center;
            font-weight: 900;
            text-shadow: 2px 2px 0px white;
        }
        
        .sub-title {
            text-align: center;
            color: var(--secondary);
            font-style: italic;
            margin-bottom: 25px;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .paragraph-card {
            background: white;
            padding: 25px;
            border-radius: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 15px rgba(0,0,0,0.05);
            border-left: 6px solid var(--secondary);
            font-size: 1.2rem;
            line-height: 1.7;
        }

        .btn-translate {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1rem;
            margin-top: 15px;
            cursor: pointer;
            box-shadow: 0 5px 0 #0e6655;
            transition: 0.2s;
        }
        .btn-translate:active { transform: translateY(5px); box-shadow: none; }

        .translation-text {
            display: none;
            margin-top: 20px;
            padding: 15px 20px;
            background: #fef5e7;
            border-radius: 10px;
            font-size: 1.15rem;
            color: var(--secondary);
            font-weight: 700;
            border: 2px dashed var(--accent);
        }

        /* GLOSSARY */
        .glossary-wrapper {
            background: white;
            border-radius: 25px;
            padding: 25px;
            margin-top: 40px;
            border: 4px solid var(--primary);
            box-shadow: 0 10px 0 rgba(22, 160, 133, 0.2);
        }
        .glossary-title {
            color: var(--primary);
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 900;
        }
        table { width: 100%; border-collapse: collapse; font-size: 1.1rem; }
        th, td { padding: 15px; text-align: left; border-bottom: 2px dashed #bdc3c7; }
        th { background: var(--primary); color: white; border-radius: 10px; font-size: 1.2rem;}
        tr:hover td { background: #e8f8f5; font-weight: 700; color: var(--primary); cursor: pointer; }

        /* QUIZ CARDS */
        .question-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 12px 0 rgba(0,0,0,0.08);
            border: 4px solid #fff;
            transition: all 0.3s;
        }
        .question-card:hover { transform: translateY(-5px); border-color: var(--primary); }

        .question-text {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--text-dark);
            margin-bottom: 25px;
        }

        .options-grid { display: flex; flex-direction: column; gap: 15px; }

        .option-btn {
            width: 100%;
            background: #f4f6f7;
            border: 3px solid #bdc3c7;
            padding: 18px 25px;
            border-radius: 18px;
            font-size: 1.25rem;
            font-weight: 800;
            color: #2c3e50;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 #bdc3c7;
            display: flex;
            align-items: center;
        }
        
        .option-btn:hover:not(:disabled) {
            transform: scale(1.02);
            background: white;
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: 0 6px 0 var(--primary);
        }

        .option-btn:active:not(:disabled) { transform: translateY(6px); box-shadow: none; }
        .option-btn.correct { background: var(--correct); border-color: #1e8449; color: white; box-shadow: 0 6px 0 #1e8449; }
        .option-btn.wrong { background: var(--wrong); border-color: #922b21; color: white; box-shadow: 0 6px 0 #922b21; animation: shake 0.4s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-2deg); }
            75% { transform: translateX(10px) rotate(2deg); }
        }

        /* DETAILED EXPLANATION BOX */
        .explanation-box {
            display: none;
            margin-top: 25px;
            padding: 20px;
            background: #fdf2e9;
            border: 4px dashed var(--secondary);
            border-radius: 15px;
            animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }
        .explanation-box h4 { color: #d35400; margin-bottom: 15px; font-size: 1.3rem; font-weight: 900; }
        .explanation-box p { margin-bottom: 10px; font-size: 1.15rem; line-height: 1.6; color: #2c3e50;}
        .explanation-box .highlight { background: var(--accent); color: #2c3e50; padding: 2px 8px; border-radius: 5px; font-weight: bold; }

        /* SUBMIT BUTTON */
        .btn-submit {
            display: block; width: 100%;
            background: var(--primary); color: white;
            font-size: 1.8rem; font-weight: 900;
            padding: 25px; border: none; border-radius: 25px;
            cursor: pointer; box-shadow: 0 10px 0 #0e6655;
            margin-top: 30px; transition: all 0.2s;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .btn-submit:hover { transform: scale(1.02); }
        .btn-submit:active { transform: translateY(10px); box-shadow: none; }

        /* MODAL POPUP */
        #result-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 100; justify-content: center; align-items: center; backdrop-filter: blur(8px);
        }
        .modal-content {
            background: white; padding: 50px; border-radius: 40px; text-align: center;
            max-width: 550px; width: 90%; border: 8px solid var(--accent);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes popIn { 0% { transform: scale(0.3) rotate(-10deg); opacity: 0; } 100% { transform: scale(1) rotate(0); opacity: 1; } }
        
        .score-circle {
            width: 180px; height: 180px; background: var(--primary); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 4.5rem; font-weight: 900; color: white; margin: 0 auto 25px;
            border: 10px solid var(--accent); box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar { width: 14px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 20px; border: 3px solid white; }
        ::-webkit-scrollbar-thumb:hover { background: #0e6655; }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
    </style>
</head>
<body>

    <div class="pattern-overlay"></div>
    <canvas id="confetti-canvas"></canvas>

    <header>
        <div class="header-title">üåç Ms Mai An ULIS | Safari Reading Challenge</div>
        <div class="timer-container">
            <div id="timer-display">10:00</div>
            <button class="btn-action btn-start" id="btn-timer" onclick="toggleTimer()">‚ñ∂ B·∫ÆT ƒê·∫¶U KH√ÅM PH√Å</button>
        </div>
    </header>

    <div class="main-container">
        <div class="panel left-panel">
            <h1 class="passage-title">Rebecca Miles</h1>
            <p class="sub-title">Wildlife Presenter</p>

            <div class="paragraph-card">
                <p>Rebecca Miles has always loved animals. When she was a child, she liked watching documentaries, TV programmes about real people and events. She also enjoyed going to the local zoo with her grandparents. Her father was an environmentalist, someone who works to protect the natural world, and she and her mother often went on trips with him, travelling to Africa and other parts of the world.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Rebecca Miles lu√¥n y√™u ƒë·ªông v·∫≠t. Khi c√≤n nh·ªè, c√¥ ·∫•y th√≠ch xem c√°c b·ªô phim t√†i li·ªáu, c√°c ch∆∞∆°ng tr√¨nh truy·ªÅn h√¨nh v·ªÅ nh·ªØng con ng∆∞·ªùi v√† s·ª± ki·ªán c√≥ th·∫≠t. C√¥ c≈©ng th√≠ch ƒë·∫øn s·ªü th√∫ ƒë·ªãa ph∆∞∆°ng c√πng v·ªõi √¥ng b√† c·ªßa m√¨nh. Cha c√¥ l√† m·ªôt nh√† m√¥i tr∆∞·ªùng h·ªçc, ng∆∞·ªùi l√†m vi·ªác ƒë·ªÉ b·∫£o v·ªá th·∫ø gi·ªõi t·ª± nhi√™n, v√† c√¥ c√πng m·∫π th∆∞·ªùng xuy√™n ƒëi du l·ªãch v·ªõi √¥ng, ƒë·∫øn Ch√¢u Phi v√† c√°c khu v·ª±c kh√°c tr√™n th·∫ø gi·ªõi.</div>
            </div>

            <div class="paragraph-card">
                <p>Rebecca studied zoology at university and began her career at a wildlife centre in Zambia. She worked with chimpanzees and studied how they live. She was also interested in learning more about big cats like mountain lions. She made her first TV programme when she was 27. It was a documentary about tigers.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Rebecca h·ªçc ng√†nh ƒë·ªông v·∫≠t h·ªçc ·ªü tr∆∞·ªùng ƒë·∫°i h·ªçc v√† b·∫Øt ƒë·∫ßu s·ª± nghi·ªáp t·∫°i m·ªôt trung t√¢m ƒë·ªông v·∫≠t hoang d√£ ·ªü Zambia. C√¥ l√†m vi·ªác v·ªõi tinh tinh v√† nghi√™n c·ª©u c√°ch ch√∫ng sinh s·ªëng. C√¥ c≈©ng quan t√¢m ƒë·∫øn vi·ªác t√¨m hi·ªÉu th√™m v·ªÅ c√°c lo√†i m√®o l·ªõn nh∆∞ s∆∞ t·ª≠ ƒë√° (b√°o s∆∞ t·ª≠). C√¥ th·ª±c hi·ªán ch∆∞∆°ng tr√¨nh truy·ªÅn h√¨nh ƒë·∫ßu ti√™n c·ªßa m√¨nh nƒÉm 27 tu·ªïi. ƒê√≥ l√† m·ªôt b·ªô phim t√†i li·ªáu v·ªÅ lo√†i h·ªï.</div>
            </div>

            <div class="paragraph-card">
                <p>While she was in Asia, filming the documentary, she met her future husband, Ray. He was one of the cameramen on the programme. They quickly realized that they shared the same interests and cared about animals in danger. Now Rebecca and Ray work together on many different projects.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Trong khi ·ªü Ch√¢u √Å ƒë·ªÉ quay phim t√†i li·ªáu, c√¥ ƒë√£ g·∫∑p ng∆∞·ªùi ch·ªìng t∆∞∆°ng lai c·ªßa m√¨nh, Ray. Anh l√† m·ªôt trong nh·ªØng ng∆∞·ªùi quay phim c·ªßa ch∆∞∆°ng tr√¨nh. H·ªç nhanh ch√≥ng nh·∫≠n ra r·∫±ng c·∫£ hai c√≥ chung s·ªü th√≠ch v√† c√πng quan t√¢m ƒë·∫øn c√°c lo√†i ƒë·ªông v·∫≠t ƒëang g·∫∑p nguy hi·ªÉm. Gi·ªù ƒë√¢y, Rebecca v√† Ray c√πng nhau l√†m vi·ªác trong nhi·ªÅu d·ª± √°n kh√°c nhau.</div>
            </div>

            <div class="paragraph-card">
                <p>Apart from Zambia, Rebecca has travelled and worked all over Africa and Asia, and she and Ray are now planning to take their very first trip to South America to study mountain lions in the Andes. They would like to show where the mountain lions live and what they eat. They‚Äôre interested in giving people information about the mountain lions and how to protect them.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Ngo√†i Zambia, Rebecca ƒë√£ ƒëi du l·ªãch v√† l√†m vi·ªác tr√™n kh·∫Øp Ch√¢u Phi v√† Ch√¢u √Å, v√† hi·ªán c√¥ c√πng Ray ƒëang l√™n k·∫ø ho·∫°ch cho chuy·∫øn ƒëi ƒë·∫ßu ti√™n c·ªßa h·ªç ƒë·∫øn Nam M·ªπ ƒë·ªÉ nghi√™n c·ª©u s∆∞ t·ª≠ ƒë√° tr√™n d√£y Andes. H·ªç mu·ªën cho m·ªçi ng∆∞·ªùi th·∫•y n∆°i s∆∞ t·ª≠ ƒë√° sinh s·ªëng v√† nh·ªØng g√¨ ch√∫ng ƒÉn. H·ªç quan t√¢m ƒë·∫øn vi·ªác cung c·∫•p th√¥ng tin cho m·ªçi ng∆∞·ªùi v·ªÅ s∆∞ t·ª≠ ƒë√° v√† c√°ch ƒë·ªÉ b·∫£o v·ªá ch√∫ng.</div>
            </div>

            <div class="paragraph-card">
                <p>Rebecca would like to write a book about her work and her life one day. She wants to make people think about the world they live in and all the amazing animals that are in danger. She‚Äôd like to show us that we can help even if we never travel to the places where those animals live.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">M·ªôt ng√†y n√†o ƒë√≥, Rebecca mu·ªën vi·∫øt m·ªôt cu·ªën s√°ch v·ªÅ c√¥ng vi·ªác v√† cu·ªôc ƒë·ªùi c·ªßa m√¨nh. C√¥ mu·ªën khi·∫øn m·ªçi ng∆∞·ªùi suy nghƒ© v·ªÅ th·∫ø gi·ªõi h·ªç ƒëang s·ªëng v√† t·∫•t c·∫£ nh·ªØng lo√†i ƒë·ªông v·∫≠t tuy·ªát v·ªùi ƒëang g·∫∑p nguy hi·ªÉm. C√¥ mu·ªën cho ch√∫ng ta th·∫•y r·∫±ng ch√∫ng ta c√≥ th·ªÉ gi√∫p ƒë·ª° ngay c·∫£ khi kh√¥ng bao gi·ªù ƒëi ƒë·∫øn nh·ªØng n∆°i m√† c√°c lo√†i ƒë·ªông v·∫≠t ƒë√≥ sinh s·ªëng.</div>
            </div>

            <div class="glossary-wrapper">
                <h3 class="glossary-title">üêæ Wildlife Vocabulary (B1-B2)</h3>
                <table>
                    <thead><tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a Ti·∫øng Vi·ªát</th></tr></thead>
                    <tbody>
                        <tr><td>1. Documentary</td><td>Noun</td><td>Phim t√†i li·ªáu</td></tr>
                        <tr><td>2. Environmentalist</td><td>Noun</td><td>Nh√† m√¥i tr∆∞·ªùng h·ªçc</td></tr>
                        <tr><td>3. Protect</td><td>Verb</td><td>B·∫£o v·ªá, g√¨n gi·ªØ</td></tr>
                        <tr><td>4. Zoology</td><td>Noun</td><td>ƒê·ªông v·∫≠t h·ªçc</td></tr>
                        <tr><td>5. Career</td><td>Noun</td><td>S·ª± nghi·ªáp</td></tr>
                        <tr><td>6. Chimpanzee</td><td>Noun</td><td>Tinh tinh (lo√†i v∆∞·ª£n l·ªõn)</td></tr>
                        <tr><td>7. Realize</td><td>Verb</td><td>Nh·∫≠n ra, hi·ªÉu r√µ</td></tr>
                        <tr><td>8. In danger</td><td>Phrase</td><td>G·∫∑p nguy hi·ªÉm (nguy c∆° tuy·ªát ch·ªßng)</td></tr>
                        <tr><td>9. Information</td><td>Noun</td><td>Th√¥ng tin</td></tr>
                        <tr><td>10. Author</td><td>Noun</td><td>T√°c gi·∫£ / Nh√† vƒÉn (T·ª´ ƒë·ªìng nghƒ©a)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel right-panel">
            <div id="quiz-container"></div>
            <button class="btn-submit" onclick="submitQuiz()">üöÄ CH·ªêT ƒê√ÅP √ÅN! üöÄ</button>
        </div>
    </div>

    <div id="result-modal">
        <div class="modal-content">
            <h2 style="color: var(--primary); font-size: 2.5rem; margin-bottom: 20px;">K·∫æT QU·∫¢ KH√ÅM PH√Å</h2>
            <div class="score-circle" id="final-score">0/5</div>
            <h3 id="feedback-msg" style="color: #2c3e50; margin-bottom: 20px; font-size: 1.6rem; line-height: 1.5;"></h3>
            <button class="btn-action btn-start" onclick="location.reload()" style="width: 100%; font-size: 1.3rem; padding: 18px; border-radius: 15px;">üîÑ B·∫ÆT ƒê·∫¶U CHUY·∫æN ƒêI M·ªöI</button>
        </div>
    </div>

    <script>
        // --- 1. D·ªÆ LI·ªÜU ƒê·ªÄ B√ÄI & GI·∫¢I TH√çCH CHI TI·∫æT ---
        const quizData = [
            {
                id: 1, 
                question: "1. As a child, Rebecca went to Africa",
                options: [
                    {text: "with her grandparents.", isCorrect: false, label: "A"},
                    {text: "with her parents.", isCorrect: true, label: "B"},
                    {text: "only with her mother.", isCorrect: false, label: "C"}
                ],
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Khi c√≤n nh·ªè, Rebecca ƒë·∫øn Ch√¢u Phi...</p>
                <p><strong>T·∫°i sao ch·ªçn ƒë√°p √°n ƒë√∫ng:</strong> Trong ƒëo·∫°n 1, b√†i ƒë·ªçc vi·∫øt: <span class="highlight">"Her father was an environmentalist... and she and her mother often went on trips with him, travelling to Africa..."</span> (Cha c√¥ l√† m·ªôt nh√† m√¥i tr∆∞·ªùng h·ªçc... c√¥ v√† m·∫π th∆∞·ªùng ƒëi c√πng √¥ng ·∫•y ƒë·∫øn Ch√¢u Phi). Vi·ªác ƒëi c√πng c·∫£ cha v√† m·∫π ch√≠nh l√† "with her parents".</p>
                <p><em>T·∫°i sao c√°c ƒë√°p √°n kh√°c sai?</em> C√¥ ·∫•y ƒëi c√πng √¥ng b√† ƒë·∫øn s·ªü th√∫ ƒë·ªãa ph∆∞∆°ng (local zoo) ch·ª© kh√¥ng ph·∫£i Ch√¢u Phi. V√† c√¥ ·∫•y kh√¥ng ƒëi "ch·ªâ v·ªõi m·∫π" (only with her mother) m√† ƒëi c√πng c·∫£ cha.</p>`
            },
            {
                id: 2, 
                question: "2. Rebecca met Ray",
                options: [
                    {text: "when she was working in Africa.", isCorrect: false, label: "A"},
                    {text: "when they were working in Asia.", isCorrect: true, label: "B"},
                    {text: "when he was presenting a documentary.", isCorrect: false, label: "C"}
                ],
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Rebecca g·∫∑p Ray...</p>
                <p><strong>T·∫°i sao ch·ªçn ƒë√°p √°n ƒë√∫ng:</strong> ƒêo·∫°n 3 n√™u r√µ: <span class="highlight">"While she was in Asia, filming the documentary, she met her future husband, Ray. He was one of the cameramen..."</span> (Trong khi c√¥ ƒëang ·ªü Ch√¢u √Å quay phim t√†i li·ªáu, c√¥ g·∫∑p ch·ªìng t∆∞∆°ng lai... Anh l√† ng∆∞·ªùi quay phim). ƒêi·ªÅu n√†y ch·ª©ng t·ªè c·∫£ hai ƒë·ªÅu ƒëang l√†m vi·ªác ·ªü Ch√¢u √Å.</p>`
            },
            {
                id: 3, 
                question: "3. Rebecca and Ray",
                options: [
                    {text: "have not been to South America.", isCorrect: true, label: "A"},
                    {text: "have been to Africa and Asia together.", isCorrect: false, label: "B"},
                    {text: "have worked in Zambia.", isCorrect: false, label: "C"}
                ],
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Rebecca v√† Ray...</p>
                <p><strong>T·∫°i sao ch·ªçn ƒë√°p √°n ƒë√∫ng:</strong> ·ªû ƒëo·∫°n 4, b√†i c√≥ c√¢u: <span class="highlight">"...she and Ray are now planning to take their very first trip to South America..."</span> (...hi·ªán c√¥ v√† Ray ƒëang l√™n k·∫ø ho·∫°ch cho chuy·∫øn ƒëi ƒë·∫ßu ti√™n ƒë·∫øn Nam M·ªπ). V√¨ ƒë√¢y l√† "chuy·∫øn ƒëi ƒë·∫ßu ti√™n" (very first trip) n√™n tr∆∞·ªõc ƒë√¢y h·ªç ch∆∞a t·ª´ng ƒë·∫øn ƒë√≥ (have not been to South America).</p>`
            },
            {
                id: 4, 
                question: "4. In the Andes, Rebecca wants to teach people",
                options: [
                    {text: "how to give food to the mountain lions.", isCorrect: false, label: "A"},
                    {text: "how to live next to the mountain lions.", isCorrect: false, label: "B"},
                    {text: "that the mountain lions need our help.", isCorrect: true, label: "C"}
                ],
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> ·ªû d√£y Andes, Rebecca mu·ªën d·∫°y cho m·ªçi ng∆∞·ªùi...</p>
                <p><strong>T·∫°i sao ch·ªçn ƒë√°p √°n ƒë√∫ng:</strong> ƒêo·∫°n 4 ti·∫øt l·ªô m·ª•c ti√™u c·ªßa h·ªç: <span class="highlight">"They‚Äôre interested in giving people information about the mountain lions and how to protect them."</span> (H·ªç quan t√¢m ƒë·∫øn vi·ªác cung c·∫•p th√¥ng tin... v√† C√ÅCH ƒê·ªÇ B·∫¢O V·ªÜ CH√öNG). Vi·ªác c·∫ßn ƒë∆∞·ª£c "b·∫£o v·ªá" ƒë·ªìng nghƒ©a v·ªõi vi·ªác ch√∫ng "c·∫ßn s·ª± gi√∫p ƒë·ª° c·ªßa ch√∫ng ta" (need our help).</p>`
            },
            {
                id: 5, 
                question: "5. One of Rebecca‚Äôs aims is",
                options: [
                    {text: "to think about dangerous animals.", isCorrect: false, label: "A"},
                    {text: "to become an author.", isCorrect: true, label: "B"},
                    {text: "to make people travel more.", isCorrect: false, label: "C"}
                ],
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> M·ªôt trong nh·ªØng m·ª•c ti√™u c·ªßa Rebecca l√†...</p>
                <p><strong>T·∫°i sao ch·ªçn ƒë√°p √°n ƒë√∫ng:</strong> ·ªû ƒëo·∫°n cu·ªëi, Rebecca chia s·∫ª: <span class="highlight">"Rebecca would like to write a book about her work and her life one day."</span> (M·ªôt ng√†y n√†o ƒë√≥, Rebecca mu·ªën vi·∫øt m·ªôt cu·ªën s√°ch...). Vi·ªác khao kh√°t vi·∫øt m·ªôt cu·ªën s√°ch ho√†n to√†n ƒë·ªìng nghƒ©a v·ªõi m·ª•c ti√™u "tr·ªü th√†nh m·ªôt t√°c gi·∫£" (become an author).</p>`
            }
        ];

        let score = 0;
        let answeredQuestions = new Set();

        // Thu·∫≠t to√°n x√°o tr·ªôn m·∫£ng ƒë·ªÉ ch·ªëng ƒëo√°n l·ª•i v·ªã tr√≠
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- 2. RENDER GIAO DI·ªÜN C√ÇU H·ªéI ---
        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            quizData.forEach((q, index) => {
                const shuffledOptions = shuffleArray([...q.options]);

                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `<div class="question-text">${q.question}</div>`;

                const optionsGrid = document.createElement('div');
                optionsGrid.className = 'options-grid';

                shuffledOptions.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt.text;
                    btn.onclick = () => handleAnswer(btn, opt.isCorrect, index, q.explanation, optionsGrid, q.options.find(o => o.isCorrect).text);
                    optionsGrid.appendChild(btn);
                });
                card.appendChild(optionsGrid);

                // H·ªôp gi·∫£i th√≠ch (Lu√¥n hi·ªán ra sau khi click ch·ªçn ƒë√°p √°n)
                const explBox = document.createElement('div');
                explBox.className = 'explanation-box';
                explBox.id = `expl-${index}`;
                explBox.innerHTML = `<h4>üí° Ph√¢n t√≠ch c·∫∑n k·∫Ω:</h4>` + q.explanation;
                card.appendChild(explBox);

                container.appendChild(card);
            });
        }

        // --- 3. H·ªÜ TH·ªêNG √ÇM THANH WEB AUDIO API ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;

        function playSound(type) {
            if (!audioCtx) audioCtx = new AudioContext();
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
                osc.frequency.exponentialRampToValueAtTime(1046.50, audioCtx.currentTime + 0.15); // C6
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                osc.start(); osc.stop(audioCtx.currentTime + 0.4);
            } else {
                osc.type = 'sawtooth'; // √Çm b√°o l·ªói (T√©o t√®o t√®o)
                osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(120, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.4, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- 4. X·ª¨ L√ù L∆Ø·ª¢T CH∆†I (T·ª∞ ƒê·ªòNG HI·ªÜN GI·∫¢I TH√çCH) ---
        function handleAnswer(btn, isCorrect, qIndex, explanationHTML, grid, correctText) {
            if (answeredQuestions.has(qIndex)) return; 
            answeredQuestions.add(qIndex);

            const allBtns = grid.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true); 

            // B·∫¨T B·∫¢NG GI·∫¢I TH√çCH NGAY L·∫¨P T·ª®C ƒê·ªÇ H·ªåC SINH ƒê·ªåC
            document.getElementById(`expl-${qIndex}`).style.display = 'block';

            if (isCorrect) {
                btn.classList.add('correct');
                playSound('correct');
                fireConfetti();
                score++;
            } else {
                btn.classList.add('wrong');
                playSound('wrong');
                // Auto highlight ƒë√°p √°n ƒë√∫ng ƒë·ªÉ h·ªçc sinh bi·∫øt
                allBtns.forEach(b => {
                    if (b.innerText === correctText) {
                        b.classList.add('correct');
                        b.style.opacity = '0.7';
                    }
                });
            }
        }

        // --- 5. B·ªò ƒê·∫æM TH·ªúI GIAN ---
        let timerInterval;
        let timeLeft = 600; // 10 ph√∫t
        let isRunning = false;

        function toggleTimer() {
            const btn = document.getElementById('btn-timer');
            if (isRunning) {
                clearInterval(timerInterval);
                btn.innerText = "‚ñ∂ TI·∫æP T·ª§C KH√ÅM PH√Å";
                btn.style.backgroundColor = "#f39c12";
            } else {
                btn.innerText = "‚è∏ D·ª™NG T·∫†M NGH·ªà";
                btn.style.backgroundColor = "#c0392b"; // ƒê·ªè m·∫≠n
                btn.style.color = "white";
                timerInterval = setInterval(() => {
                    timeLeft--;
                    let m = Math.floor(timeLeft / 60);
                    let s = timeLeft % 60;
                    document.getElementById('timer-display').innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert("‚è∞ ƒê√£ h·∫øt gi·ªù! H√£y ƒë·∫©y nhanh t·ªëc ƒë·ªô ƒë·ªçc (scanning) ƒë·ªÉ b·∫Øt k·ªãp th·ªùi gian nh√©!");
                    }
                }, 1000);
            }
            isRunning = !isRunning;
        }

        // N√∫t d·ªãch thu·∫≠t b·∫≠t t·∫Øt
        function toggleTranslation(btn) {
            const div = btn.nextElementSibling;
            const isHidden = getComputedStyle(div).display === 'none';
            div.style.display = isHidden ? 'block' : 'none';
            btn.innerHTML = isHidden ? 'üôà ·∫®N B·∫¢N D·ªäCH' : 'üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶';
        }

        // --- 6. T·ªîNG K·∫æT N·ªòP B√ÄI ---
        function submitQuiz() {
            if (answeredQuestions.size < quizData.length) {
                if(!confirm("Chuy·∫øn ƒëi ch∆∞a ho√†n t·∫•t, b·∫°n v·∫´n c√≤n c√¢u h·ªèi b·ªè ng·ªè. B·∫°n ch·∫Øc ch·∫Øn mu·ªën d·ª´ng l·∫°i ch·ª©?")) return;
            }
            clearInterval(timerInterval);
            
            const modal = document.getElementById('result-modal');
            document.getElementById('final-score').innerText = `${score}/5`;
            
            const msgObj = document.getElementById('feedback-msg');
            if (score === 5) {
                msgObj.innerText = "üèÜ TUY·ªÜT V·ªúI! K·ª∏ NƒÇNG ƒê·ªåC HI·ªÇU C·ª¶A B·∫†N S·∫ÆC B√âN NH∆Ø M·∫ÆT ƒê·∫†I B√ÄNG!";
                for(let i=0; i<4; i++) setTimeout(fireConfetti, i*300);
            } else if (score >= 3) {
                msgObj.innerText = "‚ú® L√ÄM T·ªêT L·∫ÆM! Nh·ªõ ƒë·ªçc l·∫°i c√°c h·ªôp ph√¢n t√≠ch c·∫∑n k·∫Ω m√†u cam ƒë·ªÉ xem m√¨nh sai ·ªü ƒë√¢u nh√©.";
                fireConfetti();
            } else {
                msgObj.innerText = "üí™ ƒê·ª™NG N·∫¢N L√íNG! Hoang d√£ lu√¥n nhi·ªÅu b·∫´y, h√£y c·∫©n th·∫≠n qu√©t th√¥ng tin v√† h·ªçc thu·ªôc b·∫£ng t·ª´ v·ª±ng nh√©!";
            }
            modal.style.display = 'flex';
        }

        // --- 7. HI·ªÜU ·ª®NG PH√ÅO GI·∫§Y CONFETTI ---
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];
        const colors = ['#16a085', '#f39c12', '#d35400', '#27ae60'];

        function fireConfetti() {
            for(let i=0; i<80; i++) {
                particles.push({
                    x: canvas.width / 2, y: canvas.height / 2 + 100,
                    r: Math.random() * 8 + 4,
                    dx: (Math.random() - 0.5) * 20, dy: Math.random() * -20 - 5,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    tilt: Math.random() * 10 - 10, tiltAngleInc: (Math.random() * 0.07) + 0.05, tiltAngle: 0
                });
            }
            requestAnimationFrame(animateConfetti);
        }

        function animateConfetti() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach((p, i) => {
                p.tiltAngle += p.tiltAngleInc;
                p.y += (Math.cos(p.tiltAngle) + 1 + p.r / 2) / 2;
                p.x += Math.sin(p.tiltAngle) * 2;
                p.dy += 0.3; p.y += p.dy;
                ctx.beginPath(); ctx.lineWidth = p.r; ctx.strokeStyle = p.color;
                ctx.moveTo(p.x + p.tilt + p.r, p.y); ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r); ctx.stroke();
                if (p.y > canvas.height) particles.splice(i,1);
            });
            if(particles.length > 0) requestAnimationFrame(animateConfetti);
        }

        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
        window.onload = renderQuiz;
    </script>
</body>
</html>