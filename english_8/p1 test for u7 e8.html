<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Unit 7 - Environmental Protection | Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0; /* Hồng tím pastel */
            --secondary: #00C9A7; /* Xanh ngọc */
            --correct: #00D26A; /* Xanh lá */
            --wrong: #FF4757; /* Đỏ cam */
            --bg: #F0F3F8;
            --card-bg: #FFFFFF;
            --text: #2C3E50;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(#8854c020 2px, transparent 2px);
            background-size: 20px 20px;
            color: var(--text);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* Space for footer */
        }

        /* HEADER */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        header h1 {
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        header p {
            margin: 5px 0 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* CARD STYLES */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05), 0 10px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            position: relative;
            border: 2px solid transparent;
        }

        .question-card:hover {
            transform: translateY(-5px);
        }

        .q-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .q-number {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: 800;
            font-size: 0.9rem;
        }

        .q-text {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .phonetic-u {
            text-decoration: underline;
            text-decoration-thickness: 3px;
            text-decoration-color: var(--primary);
            color: var(--primary);
        }

        /* OPTIONS GRID */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        /* BUTTON STYLES */
        .option-btn {
            background: white;
            border: 2px solid #E0E0E0;
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            box-shadow: 0 4px 0 #E0E0E0;
            text-align: left;
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #E0E0E0;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--secondary);
            background-color: #f0fdfa;
        }

        /* STATE CLASSES */
        .option-btn.correct {
            background-color: var(--correct);
            color: white;
            border-color: #00A653;
            box-shadow: 0 4px 0 #00A653;
        }

        .option-btn.wrong {
            background-color: var(--wrong);
            color: white;
            border-color: #D63031;
            box-shadow: 0 4px 0 #D63031;
            animation: shake 0.5s;
        }

        /* TEXT INPUT STYLES */
        .input-wrapper {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .text-answer {
            flex: 1;
            padding: 15px;
            border: 2px solid #E0E0E0;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            outline: none;
            box-shadow: 0 4px 0 #E0E0E0;
        }

        .text-answer:focus {
            border-color: var(--primary);
        }

        .check-btn {
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 0 25px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 4px 0 #009e82;
            transition: all 0.2s;
        }
        
        .check-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* EXPLANATION BOX */
        .explanation {
            display: none; /* Hidden by default */
            margin-top: 20px;
            background: #F8F9FA;
            border-left: 5px solid var(--secondary);
            padding: 15px;
            border-radius: 0 10px 10px 0;
            font-size: 0.95rem;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .exp-title {
            font-weight: 800;
            color: var(--secondary);
            text-transform: uppercase;
            font-size: 0.8rem;
            margin-bottom: 5px;
            display: block;
        }

        .exp-detail p {
            margin: 5px 0;
        }
        
        .exp-trans {
            color: #636e72;
            font-style: italic;
            margin-bottom: 8px;
            display: block;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 5px;
        }

        /* STICKY FOOTER */
        .footer-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .submit-all-btn {
            background: var(--primary);
            color: white;
            font-size: 1.2rem;
            padding: 12px 40px;
            border-radius: 50px;
            border: none;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 5px 0 #6c4298, 0 10px 20px rgba(136, 84, 192, 0.4);
            transition: all 0.2s;
        }
        
        .submit-all-btn:hover {
            transform: scale(1.05);
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-5deg); }
            50% { transform: translateX(5px) rotate(5deg); }
            75% { transform: translateX(-5px) rotate(-5deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* POPUP */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal {
            background: white;
            padding: 30px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: zoomIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .modal h2 {
            color: var(--primary);
            font-size: 2rem;
            margin: 0 0 10px;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            background: var(--secondary);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            color: white;
            font-size: 2.5rem;
            font-weight: 800;
            border: 5px solid white;
            box-shadow: 0 0 0 5px var(--secondary);
        }

        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* SECTION HEADERS */
        .section-header {
            text-align: center;
            margin: 40px 0 20px;
            color: var(--primary);
            text-transform: uppercase;
            border-bottom: 2px dashed #ddd;
            padding-bottom: 10px;
        }

        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        .glossary-table th {
            background: var(--secondary);
            color: white;
            padding: 8px;
            text-align: left;
            border-radius: 5px 5px 0 0;
        }
        .glossary-table td {
            border: 1px solid #eee;
            padding: 8px;
        }
        
        /* CONFETTI CANVAS */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }
    </style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<header>
    <h1>TEST FOR UNIT 7</h1>
    <p>Environmental Protection | Giáo viên: Ms. Mai An (Thạc sỹ TESOL)</p>
</header>

<div class="container">

    <h2 class="section-header">I. Phonetics - Pronunciation</h2>
    <p style="text-align: center; color: #666; font-size: 0.9rem; margin-bottom: 20px;">Chọn từ có phần gạch chân phát âm khác với các từ còn lại</p>

    <div class="question-card" id="q1">
        <div class="q-header"><span class="q-number">Câu 1</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp1')">A. rel<u class="phonetic-u">ea</u>se</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp1')">B. <u class="phonetic-u">ea</u>rth</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp1')">C. b<u class="phonetic-u">ea</u>ch</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp1')">D. gr<u class="phonetic-u">ee</u>n</button>
        </div>
        <div class="explanation" id="exp1">
            <span class="exp-title">GIẢI THÍCH CHI TIẾT TỪ CÔ MAI AN:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: B</strong></p>
                <p><strong>Phân tích phiên âm:</strong></p>
                <ul style="list-style: none; padding-left: 0;">
                    <li>A. release /rɪˈliːs/ (âm /iː/)</li>
                    <li>B. earth /ɜːθ/ (âm /ɜː/) - Khác biệt</li>
                    <li>C. beach /biːtʃ/ (âm /iː/)</li>
                    <li>D. green /ɡriːn/ (âm /iː/)</li>
                </ul>
                <p><em>Mẹo nhớ: 'ea' thường đọc là /i:/ nhưng trong 'earth', 'learn', 'heard' lại đọc là /ɜ:/.</em></p>
            </div>
        </div>
    </div>

    <div class="question-card" id="q2">
        <div class="q-header"><span class="q-number">Câu 2</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp2')">A. hab<u class="phonetic-u">i</u>tat</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp2')">B. env<u class="phonetic-u">i</u>ronment</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp2')">C. w<u class="phonetic-u">i</u>ldlife</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp2')">D. d<u class="phonetic-u">i</u>verse</button>
        </div>
        <div class="explanation" id="exp2">
            <span class="exp-title">GIẢI THÍCH CHI TIẾT TỪ CÔ MAI AN:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: A</strong></p>
                <p><strong>Phân tích phiên âm:</strong></p>
                <ul style="list-style: none; padding-left: 0;">
                    <li>A. habitat /ˈhæb.ɪ.tæt/ (âm /ɪ/) - Môi trường sống</li>
                    <li>B. environment /ɪnˈvaɪ.rən.mənt/ (âm /aɪ/)</li>
                    <li>C. wildlife /ˈwaɪld.laɪf/ (âm /aɪ/)</li>
                    <li>D. diverse /daɪˈvɜːs/ (âm /aɪ/)</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="question-card" id="q3">
        <div class="q-header"><span class="q-number">Câu 3</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp3')">A. e<u class="phonetic-u">c</u>osystem</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp3')">B. <u class="phonetic-u">c</u>arbon</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp3')">C. <u class="phonetic-u">c</u>oral</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp3')">D. spe<u class="phonetic-u">c</u>ies</button>
        </div>
        <div class="explanation" id="exp3">
            <span class="exp-title">GIẢI THÍCH CHI TIẾT:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: D</strong></p>
                <p><strong>Phân tích:</strong></p>
                <ul style="list-style: none; padding-left: 0;">
                    <li>A. ecosystem /ˈiː.kəʊˌsɪs.təm/ (âm /k/)</li>
                    <li>B. carbon /ˈkɑː.bən/ (âm /k/)</li>
                    <li>C. coral /ˈkɒr.əl/ (âm /k/)</li>
                    <li>D. species /ˈspiː.ʃiːz/ (âm /ʃ/) - Khác biệt</li>
                </ul>
                <p><em>Lưu ý: 'species' có thể đọc là /ʃ/ hoặc /s/ nhưng trong bài thi thường đối lập với /k/.</em></p>
            </div>
        </div>
    </div>

    <div class="question-card" id="q4">
        <div class="q-header"><span class="q-number">Câu 4</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp4')">A. poison<u class="phonetic-u">ed</u></button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp4')">B. di<u class="phonetic-u">ed</u></button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp4')">C. dump<u class="phonetic-u">ed</u></button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp4')">D. caus<u class="phonetic-u">ed</u></button>
        </div>
        <div class="explanation" id="exp4">
            <span class="exp-title">QUY TẮC ĐUÔI -ED:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: C</strong></p>
                <p><strong>Giải thích:</strong></p>
                <ul>
                    <li>C. dumped /dʌmpt/ (âm /t/ vì kết thúc bằng /p/ - vô thanh).</li>
                    <li>Các từ còn lại: poisoned /d/, died /d/, caused /d/ (kết thúc bằng âm hữu thanh).</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="question-card" id="q5">
        <div class="q-header"><span class="q-number">Câu 5</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp5')">A. abs<u class="phonetic-u">o</u>rb</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp5')">B. pr<u class="phonetic-u">o</u>tection</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp5')">C. c<u class="phonetic-u">o</u>ntinue</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp5')">D. pr<u class="phonetic-u">o</u>vide</button>
        </div>
        <div class="explanation" id="exp5">
            <span class="exp-title">PHIÊN ÂM NGUYÊN ÂM O:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: A</strong></p>
                <ul>
                    <li>A. absorb /əbˈzɔːb/ (âm /ɔː/ - o dài)</li>
                    <li>B. protection /prəˈtek.ʃən/ (âm /ə/ - schwa)</li>
                    <li>C. continue /kənˈtɪn.juː/ (âm /ə/)</li>
                    <li>D. provide /prəˈvaɪd/ (âm /ə/)</li>
                </ul>
            </div>
        </div>
    </div>

    <h2 class="section-header">II. Stress Pattern</h2>
    <p style="text-align: center; color: #666; font-size: 0.9rem;">Chọn từ có trọng âm chính đặt ở vị trí khác</p>

    <div class="question-card" id="q_stress1">
        <div class="q-header"><span class="q-number">Câu 1</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_s1')">A. environment</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_s1')">B. ecosystem</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_s1')">C. renewable</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_s1')">D. participate</button>
        </div>
        <div class="explanation" id="exp_s1">
            <span class="exp-title">QUY TẮC TRỌNG ÂM:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: B</strong></p>
                <ul>
                    <li>B. ecosystem /ˈiː.kəʊˌsɪs.təm/ (nhấn âm 1).</li>
                    <li>A. environment (âm 2), C. renewable (âm 2), D. participate (âm 2).</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="question-card" id="q_stress2">
        <div class="q-header"><span class="q-number">Câu 2</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_s2')">A. endangered</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_s2')">B. dioxide</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_s2')">C. pollution</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_s2')">D. volunteer</button>
        </div>
        <div class="explanation" id="exp_s2">
            <span class="exp-title">GIẢI THÍCH:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: D</strong></p>
                <ul>
                    <li>D. volunteer /ˌvɒl.ənˈtɪər/ (nhấn âm 3 - đuôi eer thường nhận trọng âm).</li>
                    <li>Các từ còn lại nhấn âm 2: en-DAN-gered, di-OX-ide, pol-LU-tion.</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="question-card" id="q_stress3">
        <div class="q-header"><span class="q-number">Câu 3</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s3')">A. pollute</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s3')">B. poison</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s3')">C. damage</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s3')">D. litter</button>
        </div>
        <div class="explanation" id="exp_s3">
            <span class="exp-title">GIẢI THÍCH:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: A</strong></p>
                <ul>
                    <li>A. pollute /pəˈluːt/ (động từ 2 âm tiết thường nhấn âm 2).</li>
                    <li>Các từ còn lại là Danh từ/Động từ nhấn âm 1: POI-son, DAM-age, LIT-ter.</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="question-card" id="q_stress4">
        <div class="q-header"><span class="q-number">Câu 4</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s4')">A. device</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s4')">B. species</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s4')">C. problem</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_s4')">D. product</button>
        </div>
        <div class="explanation" id="exp_s4">
            <span class="exp-title">GIẢI THÍCH:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: A</strong></p>
                <ul>
                    <li>A. device /dɪˈvaɪs/ (nhấn âm 2).</li>
                    <li>B, C, D nhấn âm 1 (SPE-cies, PROB-lem, PROD-uct).</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="question-card" id="q_stress5">
        <div class="q-header"><span class="q-number">Câu 5</span></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_s5')">A. natural</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_s5')">B. valuable</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_s5')">C. conservation</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_s5')">D. national</button>
        </div>
        <div class="explanation" id="exp_s5">
            <span class="exp-title">GIẢI THÍCH:</span>
            <div class="exp-detail">
                <p><strong>Đáp án đúng: C</strong></p>
                <ul>
                    <li>C. conservation /ˌkɒn.səˈveɪ.ʃən/ (nhấn âm 3 - trước đuôi -tion).</li>
                    <li>A, B, D nhấn âm 1 (NAT-u-ral, VAL-u-a-ble, NA-tion-al).</li>
                </ul>
            </div>
        </div>
    </div>

    <h2 class="section-header">III. Complete Sentence</h2>
    <p style="text-align: center; color: #666; font-size: 0.9rem;">Điền từ thích hợp vào chỗ trống (Ký tự đầu đã cho sẵn)</p>

    <div class="question-card">
        <div class="q-text">1. The fish have died because the river water is heavily <strong>p</strong>_________.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt1" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt1', 'polluted', 'exp_txt1')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt1">
            <span class="exp-trans">Dịch: Cá chết vì nước sông bị ô nhiễm nặng.</span>
            <p><strong>Đáp án: Polluted (adj)</strong></p>
            <p>Giải thích: Sau 'is' và trạng từ 'heavily' cần một tính từ. 'Polluted' nghĩa là bị ô nhiễm.</p>
        </div>
    </div>

    <div class="question-card">
        <div class="q-text">2. The national park helps reserve many <strong>s</strong>_________.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt2" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt2', 'species', 'exp_txt2')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt2">
            <span class="exp-trans">Dịch: Vườn quốc gia giúp bảo tồn nhiều loài.</span>
            <p><strong>Đáp án: Species (n)</strong></p>
            <p>Giải thích: 'Species' là danh từ chỉ các loài sinh vật. Lưu ý từ này luôn có 's' ở cuối.</p>
        </div>
    </div>

    <div class="question-card">
        <div class="q-text">3. Using public transport is a great way to <strong>p</strong>_________ the environment.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt3" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt3', 'protect', 'exp_txt3')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt3">
            <span class="exp-trans">Dịch: Dùng phương tiện công cộng là cách tuyệt vời để bảo vệ môi trường.</span>
            <p><strong>Đáp án: Protect (v)</strong></p>
            <p>Giải thích: Cấu trúc 'way to + Verb' (cách để làm gì). Collocation: Protect the environment.</p>
        </div>
    </div>

    <div class="question-card">
        <div class="q-text">4. Water pollution is damaging the marine <strong>e</strong>_________ of the Persian Gulf.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt4" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt4', 'ecosystem', 'exp_txt4')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt4">
            <span class="exp-trans">Dịch: Ô nhiễm nước đang phá hủy hệ sinh thái biển...</span>
            <p><strong>Đáp án: Ecosystem (n)</strong></p>
            <p>Giải thích: 'Marine ecosystem' = Hệ sinh thái biển.</p>
        </div>
    </div>

    <div class="question-card">
        <div class="q-text">5. Earth Day is celebrated to raise public <strong>a</strong>_________ about the environmental issues.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt5" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt5', 'awareness', 'exp_txt5')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt5">
            <span class="exp-trans">Dịch: Ngày Trái Đất được tổ chức để nâng cao nhận thức cộng đồng...</span>
            <p><strong>Đáp án: Awareness (n)</strong></p>
            <p>Giải thích: Cụm từ cố định (Collocation): Raise awareness about/of sth (Nâng cao nhận thức).</p>
        </div>
    </div>

    <div class="question-card">
        <div class="q-text">6. The local authority will take action against resorts dumping <strong>w</strong>_________ into the ocean.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt6" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt6', 'waste', 'exp_txt6')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt6">
            <span class="exp-trans">Dịch: Chính quyền sẽ xử lý các khu nghỉ dưỡng xả rác thải xuống biển.</span>
            <p><strong>Đáp án: Waste (n)</strong></p>
            <p>Giải thích: 'Dumping waste' = Xả rác thải.</p>
        </div>
    </div>

    <div class="question-card">
        <div class="q-text">7. To reduce your carbon <strong>f</strong>_________ you should reduce the amount of energy you use.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt7" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt7', 'footprint', 'exp_txt7')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt7">
            <span class="exp-trans">Dịch: Để giảm dấu chân carbon, bạn nên giảm lượng năng lượng sử dụng.</span>
            <p><strong>Đáp án: Footprint (n)</strong></p>
            <p>Giải thích: Thuật ngữ 'Carbon footprint' (Dấu chân Carbon - lượng khí thải CO2 do một cá nhân tạo ra).</p>
        </div>
    </div>

    <div class="question-card">
        <div class="q-text">8. People are working to help save <strong>e</strong>_________ animals from extinction.</div>
        <div class="input-wrapper">
            <input type="text" class="text-answer" id="txt8" placeholder="Nhập từ cần điền...">
            <button class="check-btn" onclick="checkText('txt8', 'endangered', 'exp_txt8')">CHECK</button>
        </div>
        <div class="explanation" id="exp_txt8">
            <span class="exp-trans">Dịch: Mọi người đang nỗ lực cứu các loài động vật có nguy cơ tuyệt chủng...</span>
            <p><strong>Đáp án: Endangered (adj)</strong></p>
            <p>Giải thích: 'Endangered animals' = Động vật bị đe dọa/có nguy cơ tuyệt chủng.</p>
        </div>
    </div>

    <h2 class="section-header">IV. Multiple Choice</h2>
    <p style="text-align: center; color: #666; font-size: 0.9rem;">Chọn đáp án đúng nhất a, b, c hoặc d</p>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 1</span></div>
        <div class="q-text">Everyone can save the environment by turning ______ devices when they're not using them.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m1')">A. on</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m1')">B. up</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m1')">C. off</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m1')">D. down</button>
        </div>
        <div class="explanation" id="exp_m1">
            <span class="exp-trans">Dịch: Mọi người có thể bảo vệ môi trường bằng cách TẮT thiết bị khi không dùng.</span>
            <div class="exp-detail">
                <p><strong>Đáp án: C. off</strong></p>
                <p>Giải thích: 'Turn off' = Tắt. (Turn on = Bật, Turn up = Vặn to, Turn down = Vặn nhỏ/Từ chối).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 2</span></div>
        <div class="q-text">Light pollution has a wide range of negative effects ______ human health.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m2')">A. on</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m2')">B. of</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m2')">C. for</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m2')">D. to</button>
        </div>
        <div class="explanation" id="exp_m2">
            <span class="exp-trans">Dịch: Ô nhiễm ánh sáng có nhiều tác động tiêu cực LÊN sức khỏe con người.</span>
            <div class="exp-detail">
                <p><strong>Đáp án: A. on</strong></p>
                <p>Giải thích: Cấu trúc 'Effect/Impact/Influence ON something' (Tác động lên cái gì).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 3</span></div>
        <div class="q-text">The city is trying to replace the use of ______ products in food service.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m3')">A. using-single</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m3')">B. single-using</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m3')">C. use-single</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m3')">D. single-use</button>
        </div>
        <div class="explanation" id="exp_m3">
            <span class="exp-trans">Dịch: Thành phố đang cố gắng thay thế việc sử dụng các sản phẩm DÙNG MỘT LẦN.</span>
            <div class="exp-detail">
                <p><strong>Đáp án: D. single-use</strong></p>
                <p>Giải thích: Tính từ ghép 'Single-use' nghĩa là dùng một lần rồi bỏ (ví dụ: single-use plastic).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 4</span></div>
        <div class="q-text">Vast amounts of carbon dioxide release into the atmosphere ______ humans burn fossil fuels for energy.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m4')">A. until</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m4')">B. before</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m4')">C. as soon as</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m4')">D. when</button>
        </div>
        <div class="explanation" id="exp_m4">
            <span class="exp-trans">Dịch: Lượng lớn CO2 thải ra khí quyển KHI con người đốt nhiên liệu hóa thạch.</span>
            <div class="exp-detail">
                <p><strong>Đáp án: D. when</strong></p>
                <p>Giải thích: Mệnh đề chỉ thời gian/nguyên nhân. 'When' (khi) phù hợp nhất về nghĩa. 'Until' (cho đến khi), 'Before' (trước khi) không hợp lý.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 5</span></div>
        <div class="q-text">If rubbish is non-biodegradable, it ______ forever.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m5')">A. exists</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m5')">B. will exist</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m5')">C. won't exist</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m5')">D. doesn't exist</button>
        </div>
        <div class="explanation" id="exp_m5">
            <span class="exp-trans">Dịch: Nếu rác thải không phân hủy sinh học, nó SẼ TỒN TẠI mãi mãi.</span>
            <div class="exp-detail">
                <p><strong>Đáp án: B. will exist</strong></p>
                <p>Giải thích: Câu điều kiện loại 1 (Hiện thực ở tương lai). Mệnh đề If (hiện tại đơn) -> Mệnh đề chính (Tương lai đơn: Will + V).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 6</span></div>
        <div class="q-text">The goal of wildlife ______ is to ensure the survival of some endangered species.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m6')">A. mission</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m6')">B. destruction</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m6')">C. conservation</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_m6')">D. management</button>
        </div>
        <div class="explanation" id="exp_m6">
            <span class="exp-trans">Dịch: Mục tiêu của BẢO TỒN động vật hoang dã là đảm bảo sự sống còn...</span>
            <div class="exp-detail">
                <p><strong>Đáp án: C. conservation</strong></p>
                <p>Giải thích: 'Wildlife conservation' = Bảo tồn động vật hoang dã. (Destruction = sự phá hủy - sai nghĩa).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 7</span></div>
        <div class="q-text">______ plastic waste is discarded improperly, it can harm the environment and biodiversity.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m7')">A. If</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m7')">B. Unless</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m7')">C. While</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m7')">D. Although</button>
        </div>
        <div class="explanation" id="exp_m7">
            <span class="exp-trans">Dịch: NẾU rác thải nhựa bị vứt bừa bãi, nó có thể gây hại...</span>
            <div class="exp-detail">
                <p><strong>Đáp án: A. If</strong></p>
                <p>Giải thích: Đây là câu điều kiện diễn tả nguyên nhân - kết quả. 'Unless' = Nếu không (sai nghĩa), 'Although' = Mặc dù (sai nghĩa).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 8</span></div>
        <div class="q-text">People should stop ______ trees because they produce oxygen while they absorb carbon dioxide.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m8')">A. turning on</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m8')">B. taking off</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m8')">C. picking up</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_m8')">D. cutting down</button>
        </div>
        <div class="explanation" id="exp_m8">
            <span class="exp-trans">Dịch: Mọi người nên ngừng CHẶT cây vì chúng tạo ra oxy...</span>
            <div class="exp-detail">
                <p><strong>Đáp án: D. cutting down</strong></p>
                <p>Giải thích: 'Cut down trees' = Chặt cây. (Turn on = Bật, Take off = Cất cánh/Cởi, Pick up = Nhặt).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 9</span></div>
        <div class="q-text">______ can we help save our environment?</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m9')">A. What</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m9')">B. How</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m9')">C. Why</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_m9')">D. How much</button>
        </div>
        <div class="explanation" id="exp_m9">
            <span class="exp-trans">Dịch: Chúng ta có thể giúp cứu môi trường NHƯ THẾ NÀO/BẰNG CÁCH NÀO?</span>
            <div class="exp-detail">
                <p><strong>Đáp án: B. How</strong></p>
                <p>Giải thích: Hỏi về cách thức (method/manner). 'What' phải là 'What can we do...'. Ở đây cấu trúc là 'How can we help...'.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 10</span></div>
        <div class="q-text">If we care about plastic waste, ______?</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m10')">A. why won't we stop drinking bottled water</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m10')">B. we would use reusable shopping bags</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m10')">C. we will throw away plastic water bottles</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_m10')">D. why don't we buy plastic bags</button>
        </div>
        <div class="explanation" id="exp_m10">
            <span class="exp-trans">Dịch: Nếu chúng ta quan tâm đến rác thải nhựa, tại sao chúng ta sẽ không ngừng uống nước đóng chai?</span>
            <div class="exp-detail">
                <p><strong>Đáp án: A</strong></p>
                <p>Giải thích:</p>
                <ul>
                    <li>Mệnh đề If hiện tại (care) -> Câu loại 1.</li>
                    <li>Đáp án B dùng 'would' (Loại 2) -> Sai ngữ pháp.</li>
                    <li>Đáp án C "chúng ta sẽ vứt chai nhựa đi" -> Sai về nghĩa (không bảo vệ môi trường).</li>
                    <li>Đáp án D "tại sao chúng ta không mua túi nhựa" -> Sai về nghĩa.</li>
                    <li>Đáp án A hợp lý nhất về ngữ pháp và ý nghĩa kêu gọi hành động.</li>
                </ul>
            </div>
        </div>
    </div>

    <h2 class="section-header">V. Error Identification</h2>
    <p style="text-align: center; color: #666; font-size: 0.9rem;">Chọn phần gạch chân cần sửa lỗi</p>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 1</span></div>
        <div class="q-text">We must do something to save our planet <u>as soon as</u> (A) it is <u>too late</u> (B).</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e1')">A. as soon as</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e1')">B. too late</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e1')">C. must do</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e1')">D. something</button>
        </div>
        <div class="explanation" id="exp_e1">
            <div class="exp-detail">
                <p><strong>Lỗi sai: A. as soon as</strong></p>
                <p><strong>Sửa thành: before</strong></p>
                <p>Giải thích: Nghĩa của câu là "Chúng ta phải hành động... TRƯỚC KHI quá muộn". 'As soon as' (ngay khi) không hợp lý.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 2</span></div>
        <div class="q-text">One of the things all of us can do to protect and improve our environment <u>is recycle</u> (D).</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e2')">A. One of</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e2')">B. can do</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e2')">C. improve</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e2')">D. is recycle</button>
        </div>
        <div class="explanation" id="exp_e2">
            <div class="exp-detail">
                <p><strong>Lỗi sai: D. is recycle</strong></p>
                <p><strong>Sửa thành: is to recycle / is recycling</strong></p>
                <p>Giải thích: Sau động từ to be, để chỉ hành động/mục đích, ta dùng V-ing hoặc To-V. "One of the things... is to recycle".</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 3</span></div>
        <div class="q-text">Humans can even die if they <u>will drink</u> (C) contaminated water.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e3')">A. Humans</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e3')">B. even</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e3')">C. will drink</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e3')">D. contaminated</button>
        </div>
        <div class="explanation" id="exp_e3">
            <div class="exp-detail">
                <p><strong>Lỗi sai: C. will drink</strong></p>
                <p><strong>Sửa thành: drink</strong></p>
                <p>Giải thích: Trong mệnh đề IF của câu điều kiện loại 1, ta dùng thì Hiện tại đơn, không dùng 'will'.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 4</span></div>
        <div class="q-text">They can't release the koala back into the wild before its injury <u>will heal</u> (D).</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e4')">A. release</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e4')">B. into</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e4')">C. wild</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e4')">D. will heal</button>
        </div>
        <div class="explanation" id="exp_e4">
            <div class="exp-detail">
                <p><strong>Lỗi sai: D. will heal</strong></p>
                <p><strong>Sửa thành: heals</strong></p>
                <p>Giải thích: Trong mệnh đề chỉ thời gian (bắt đầu bằng Before, When, Until...), ta dùng hiện tại đơn để chỉ tương lai, không dùng 'will'.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 5</span></div>
        <div class="q-text">They believe that water pollution is the <u>large</u> (C) cause of death and disease in the world.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e5')">A. believe</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e5')">B. pollution</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e5')">C. large</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e5')">D. disease</button>
        </div>
        <div class="explanation" id="exp_e5">
            <div class="exp-detail">
                <p><strong>Lỗi sai: C. large</strong></p>
                <p><strong>Sửa thành: leading / major / biggest</strong></p>
                <p>Giải thích: Collocation (kết hợp từ): Người ta dùng 'leading cause' (nguyên nhân hàng đầu) hoặc 'major cause', ít khi dùng 'large cause'.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 6</span></div>
        <div class="q-text">Due to eating plastic waste, the California condor is now an <u>endangering</u> (C) bird species.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e6')">A. Due to</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e6')">B. eating</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e6')">C. endangering</button>
            <button class="option-btn" onclick="checkMCQ(this, 'C', 'exp_e6')">D. species</button>
        </div>
        <div class="explanation" id="exp_e6">
            <div class="exp-detail">
                <p><strong>Lỗi sai: C. endangering</strong></p>
                <p><strong>Sửa thành: endangered</strong></p>
                <p>Giải thích: 'Endangered' (bị đe dọa) là tính từ dùng cho loài vật có nguy cơ tuyệt chủng. 'Endangering' là hành động gây nguy hiểm.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 7</span></div>
        <div class="q-text">We <u>won't save</u> (A) the environment if we stop using so much energy.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e7')">A. won't save</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e7')">B. if</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e7')">C. stop</button>
            <button class="option-btn" onclick="checkMCQ(this, 'A', 'exp_e7')">D. so much</button>
        </div>
        <div class="explanation" id="exp_e7">
            <div class="exp-detail">
                <p><strong>Lỗi sai: A. won't save</strong></p>
                <p><strong>Sửa thành: will save</strong></p>
                <p>Giải thích: Về nghĩa: Nếu chúng ta ngừng sử dụng quá nhiều năng lượng, chúng ta SẼ cứu được môi trường. Dùng phủ định 'won't' là sai logic.</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 8</span></div>
        <div class="q-text">One in six species is at risk of extinction <u>because</u> (D) climate change.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e8')">A. One in six</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e8')">B. at risk</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e8')">C. extinction</button>
            <button class="option-btn" onclick="checkMCQ(this, 'D', 'exp_e8')">D. because</button>
        </div>
        <div class="explanation" id="exp_e8">
            <div class="exp-detail">
                <p><strong>Lỗi sai: D. because</strong></p>
                <p><strong>Sửa thành: because of</strong></p>
                <p>Giải thích: 'Climate change' là một cụm danh từ. Trước danh từ ta dùng 'Because of'. 'Because' + Mệnh đề (S + V).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 9</span></div>
        <div class="q-text">The national park is <u>home of</u> (B) many valuable kinds of woods and medicinal plants.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e9')">A. national</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e9')">B. home of</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e9')">C. valuable</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e9')">D. kinds</button>
        </div>
        <div class="explanation" id="exp_e9">
            <div class="exp-detail">
                <p><strong>Lỗi sai: B. home of</strong></p>
                <p><strong>Sửa thành: home to</strong></p>
                <p>Giải thích: Cấu trúc cố định: 'Be home to something' (Là nơi cư trú/sinh sống của cái gì).</p>
            </div>
        </div>
    </div>

    <div class="question-card">
        <div class="q-header"><span class="q-number">Câu 10</span></div>
        <div class="q-text">Toxic substances are <u>noison</u> (B) substances that can cause health effects.</div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e10')">A. Toxic</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e10')">B. noison</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e10')">C. cause</button>
            <button class="option-btn" onclick="checkMCQ(this, 'B', 'exp_e10')">D. effects</button>
        </div>
        <div class="explanation" id="exp_e10">
            <div class="exp-detail">
                <p><strong>Lỗi sai: B. noison</strong></p>
                <p><strong>Sửa thành: poisonous</strong></p>
                <p>Giải thích: 'Noison' không có nghĩa. Ta cần tính từ 'Poisonous' (có độc) để bổ nghĩa cho danh từ 'substances'.</p>
            </div>
        </div>
    </div>

    <h2 class="section-header">Academic Vocabulary Review</h2>
    <div class="question-card">
        <table class="glossary-table">
            <thead>
                <tr>
                    <th>Word (Từ vựng)</th>
                    <th>Type (Loại từ)</th>
                    <th>Meaning (Nghĩa tiếng Việt)</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Biodiversity</td><td>noun</td><td>Đa dạng sinh học</td></tr>
                <tr><td>Ecosystem</td><td>noun</td><td>Hệ sinh thái</td></tr>
                <tr><td>Contaminated</td><td>adj</td><td>Bị ô nhiễm/nhiễm bẩn</td></tr>
                <tr><td>Carbon footprint</td><td>noun</td><td>Dấu chân carbon (Lượng khí thải)</td></tr>
                <tr><td>Non-biodegradable</td><td>adj</td><td>Không phân hủy sinh học</td></tr>
                <tr><td>Conservation</td><td>noun</td><td>Sự bảo tồn</td></tr>
                <tr><td>Endangered species</td><td>noun phr</td><td>Các loài có nguy cơ tuyệt chủng</td></tr>
                <tr><td>Fossil fuels</td><td>noun</td><td>Nhiên liệu hóa thạch</td></tr>
            </tbody>
        </table>
    </div>

</div>

<div class="footer-bar">
    <button class="submit-all-btn" onclick="finishQuiz()">NỘP BÀI (SUBMIT)</button>
</div>

<div class="modal-overlay" id="resultModal">
    <div class="modal">
        <h2>KẾT QUẢ</h2>
        <div class="score-circle" id="scoreDisplay">0/33</div>
        <p id="resultMessage" style="font-size: 1.1rem; color: #555;"></p>
        <button class="submit-all-btn" onclick="closeModal()">Xem lại bài</button>
    </div>
</div>

<script>
    // Audio Data URIs (Beep sounds)
    const audioCorrect = new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU"); // Short placeholder, replaced logic below with oscillator for no-dependency
    
    // Web Audio API for sound effects (No external files needed)
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(500, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.3);
            fireConfetti();
        } else {
            oscillator.type = 'sawtooth';
            oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.2);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.3);
        }
    }

    // Logic Variables
    let totalQuestions = 33; // 5 pronunciation + 5 stress + 8 fill + 10 mcq + 5 error (Wait, source has 10 error) -> Total 38?
    // Count from HTML:
    // I: 5, II: 5, III: 8, IV: 10, V: 10. Total = 38.
    
    let userScore = 0;
    let attempted = 0;

    // Check MCQ function
    function checkMCQ(btn, correctOption, expId) {
        const parent = btn.parentElement;
        const allBtns = parent.querySelectorAll('.option-btn');
        
        // Disable all buttons in this question
        allBtns.forEach(b => b.disabled = true);
        
        const userChoice = btn.innerText.charAt(0); // Get A, B, C, D
        
        if (userChoice === correctOption) {
            btn.classList.add('correct');
            playSound('correct');
            userScore++;
        } else {
            btn.classList.add('wrong');
            playSound('wrong');
            // Highlight correct one
            allBtns.forEach(b => {
                if(b.innerText.charAt(0) === correctOption) b.classList.add('correct');
            });
        }
        
        attempted++;
        // Show explanation
        document.getElementById(expId).classList.add('show');
    }

    // Check Text function
    function checkText(inputId, correctWord, expId) {
        const input = document.getElementById(inputId);
        const btn = input.nextElementSibling;
        const userVal = input.value.trim().toLowerCase();
        
        input.disabled = true;
        btn.disabled = true;
        
        if (userVal === correctWord.toLowerCase()) {
            input.style.borderColor = '#00D26A';
            input.style.backgroundColor = '#e6fffa';
            playSound('correct');
            userScore++;
        } else {
            input.style.borderColor = '#FF4757';
            input.style.backgroundColor = '#ffe0e3';
            playSound('wrong');
        }
        
        attempted++;
        document.getElementById(expId).classList.add('show');
    }

    // Submit All
    function finishQuiz() {
        const modal = document.getElementById('resultModal');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const msg = document.getElementById('resultMessage');
        
        // Force show all explanations if not answered
        const cards = document.querySelectorAll('.question-card');
        let actualScore = 0;
        
        // Count correct classes
        const corrects = document.querySelectorAll('.option-btn.correct');
        const correctInputs = document.querySelectorAll('input[style*="rgb(0, 210, 106)"]'); // check border green color roughly
        
        // More robust score counting needed because userScore is global
        // Just use the global tracker
        
        scoreDisplay.innerText = `${userScore}/38`;
        
        if (userScore >= 30) {
            msg.innerText = "Xuất sắc! Cô Mai An rất tự hào về em!";
            fireConfetti();
        } else if (userScore >= 20) {
            msg.innerText = "Làm tốt lắm! Cố gắng ôn thêm từ vựng nhé.";
        } else {
            msg.innerText = "Đừng nản nhé! Hãy xem kỹ phần giải thích chi tiết.";
        }
        
        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

    // Confetti Logic
    const canvas = document.getElementById("confetti-canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let confetti = [];
    const colors = ['#8854C0', '#00C9A7', '#FF4757', '#FFD166'];

    function fireConfetti() {
        for (let i = 0; i < 100; i++) {
            confetti.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 5 + 5,
                speed: Math.random() * 5 + 2,
                angle: Math.random() * 360
            });
        }
        animateConfetti();
    }

    function animateConfetti() {
        if (confetti.length === 0) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        confetti.forEach((c, index) => {
            c.y += c.speed;
            c.angle += 2;
            ctx.save();
            ctx.translate(c.x, c.y);
            ctx.rotate(c.angle * Math.PI / 180);
            ctx.fillStyle = c.color;
            ctx.fillRect(-c.size / 2, -c.size / 2, c.size, c.size);
            ctx.restore();
            
            if (c.y > canvas.height) confetti.splice(index, 1);
        });
        
        requestAnimationFrame(animateConfetti);
    }
</script>
</body>
</html>