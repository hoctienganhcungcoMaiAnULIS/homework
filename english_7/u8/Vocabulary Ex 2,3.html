<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms Mai An ULIS - B√†i t·∫≠p Vocabulary & Grammar L·ªõp 7</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary: #8854C0; /* T√≠m h·ªìng ch·ªß ƒë·∫°o */
            --secondary: #00C9A7; /* Xanh ng·ªçc */
            --accent: #FF9F43; /* Cam nh·∫°t */
            --correct: #00D26A; /* Xanh l√° ƒë√∫ng */
            --wrong: #FF4757; /* ƒê·ªè sai */
            --text-dark: #2f3542;
            --text-light: #ffffff;
            --bg-pattern: #f0f2f5;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #e5e5f7;
            background-image:  repeating-linear-gradient(45deg, #f1f3f9 25%, transparent 25%, transparent 75%, #f1f3f9 75%, #f1f3f9), repeating-linear-gradient(45deg, #f1f3f9 25%, #e5e5f7 25%, #e5e5f7 75%, #f1f3f9 75%, #f1f3f9);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(136, 84, 192, 0.2);
            overflow: hidden;
            margin-bottom: 50px;
            border: 4px solid #fff;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), #a29bfe);
            padding: 20px;
            text-align: center;
            color: white;
            position: relative;
            border-bottom: 5px solid rgba(0,0,0,0.1);
        }

        header h1 {
            font-family: 'Quicksand', sans-serif;
            font-size: 1.8rem;
            font-weight: 800;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        .badge-teacher {
            background: #fff;
            color: var(--primary);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            display: inline-block;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* Score Board */
        .score-board {
            display: flex;
            justify-content: space-between;
            padding: 15px 30px;
            background: #fff;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-dark);
            border-bottom: 2px dashed #eee;
        }

        .score-item span {
            color: var(--primary);
            font-size: 1.3rem;
        }

        /* Question Card */
        .quiz-content {
            padding: 30px;
        }

        .question-card {
            margin-bottom: 30px;
            display: none; /* Hidden by default, shown via JS */
            animation: slideIn 0.5s ease;
        }

        .question-card.active {
            display: block;
        }

        .question-number {
            color: var(--secondary);
            font-weight: 800;
            text-transform: uppercase;
            font-size: 0.9rem;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.5;
            color: #2c3e50;
            margin-bottom: 25px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid var(--secondary);
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-bottom: 6px solid #e0e0e0; /* 3D effect */
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            position: relative;
            outline: none;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--secondary);
            background-color: #f0fffc;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct);
            border-color: #00b85c;
            border-bottom-color: #008f47;
            color: white;
        }

        .option-btn.wrong {
            background-color: var(--wrong);
            border-color: #ff2e40;
            border-bottom-color: #d61c2d;
            color: white;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #fff;
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden initially */
            animation: fadeIn 0.5s ease;
            position: relative;
        }
        
        .explanation-box::before {
            content: "‚ú® Gi·∫£i th√≠ch c·ªßa c√¥ Mai An:";
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--primary);
            color: white;
            padding: 2px 12px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .exp-section {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px dashed #eee;
        }
        
        .exp-section:last-child {
            border-bottom: none;
        }

        .exp-label {
            font-weight: 800;
            color: var(--primary);
            display: inline-block;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .exp-content {
            color: #57606f;
            line-height: 1.6;
        }

        .highlight-text {
            color: var(--secondary);
            font-weight: 700;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .next-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-bottom: 5px solid #6c429c;
            padding: 12px 30px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            display: none;
        }

        .next-btn:hover {
            transform: translateY(-2px);
        }
        
        .next-btn:active {
            transform: translateY(3px);
            border-bottom-width: 2px;
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        /* Summary Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 5px solid var(--secondary);
            animation: zoomIn 0.3s;
        }

        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .final-score {
            font-size: 3rem;
            color: var(--primary);
            font-weight: 800;
            margin: 20px 0;
        }

        .reload-btn {
            background: var(--secondary);
            color: white;
            border: none;
            border-bottom: 5px solid #009e82;
            padding: 15px 40px;
            border-radius: 15px;
            font-weight: 800;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .reload-btn:hover {
            filter: brightness(1.1);
        }

    </style>
</head>
<body>

    <div class="container">
        <header>
            <div class="badge-teacher">Gi√°o vi√™n: Ms Mai An (ULIS)</div>
            <h1>B√ÄI T·∫¨P T∆Ø∆†NG T√ÅC L·ªöP 7</h1>
            <p>Chuy√™n ƒë·ªÅ: Vocabulary & Grammar - Ex 2 & 3</p>
        </header>

        <div class="score-board">
            <div class="score-item">C√¢u: <span id="current-q">1</span>/<span id="total-q">16</span></div>
            <div class="score-item">ƒêi·ªÉm: <span id="score">0</span></div>
        </div>

        <div class="quiz-content" id="quiz-container">
            <!-- Questions will be injected here via JS -->
        </div>
    </div>

    <!-- Summary Modal -->
    <div id="summary-modal" class="modal">
        <div class="modal-content">
            <h2>K·∫øt qu·∫£ b√†i l√†m</h2>
            <div class="final-score" id="final-score-display">10/16</div>
            <p id="feedback-text">B·∫°n l√†m t·ªët l·∫Øm!</p>
            <br>
            <button class="reload-btn" onclick="location.reload()">L√†m l·∫°i b√†i <i class="fas fa-redo"></i></button>
        </div>
    </div>

    <script>
        // --- SOUND EFFECTS (Web Audio API for Single File Reliability) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            if (type === 'correct') {
                // High pitch "Ding"
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else if (type === 'wrong') {
                // Low pitch "Buzz"
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- DATA FROM USER ---
        const quizData = [
            {
                q: 1,
                text: "The film was so ________. I went home before it ended.",
                options: ["dull", "comedy", "confusing", "violent"],
                correct: 0,
                hint: "Phim ch√°n ƒë·∫øn m·ª©c ph·∫£i ƒëi v·ªÅ s·ªõm. T√¨m t·ª´ ƒë·ªìng nghƒ©a v·ªõi 'boring'.",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">B·ªô phim qu√° <b>t·∫ª nh·∫°t</b>. T√¥i ƒë√£ v·ªÅ nh√† tr∆∞·ªõc khi n√≥ k·∫øt th√∫c.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>dull</b> (adj): t·∫ª nh·∫°t, bu·ªìn t·∫ª (ƒê·ªìng nghƒ©a v·ªõi boring)<br>
                        B. <b>comedy</b> (n): phim h√†i<br>
                        C. <b>confusing</b> (adj): g√¢y kh√≥ hi·ªÉu<br>
                        D. <b>violent</b> (adj): b·∫°o l·ª±c
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">Ng∆∞·ªùi n√≥i ƒë√£ b·ªè v·ªÅ tr∆∞·ªõc khi phim k·∫øt th√∫c ("went home before it ended"), ch·ª©ng t·ªè b·ªô phim ƒë√≥ kh√¥ng hay ho·∫∑c r·∫•t ch√°n. "Dull" l√† t·ª´ ph√π h·ª£p nh·∫•t.</span>
                    </div>
                `
            },
            {
                q: 2,
                text: "My sister likes this ________ because it makes her laugh a lot.",
                options: ["dull", "comedy", "violent", "director"],
                correct: 1,
                hint: "Lo·∫°i phim n√†o khi·∫øn kh√°n gi·∫£ c∆∞·ªùi (laugh)?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">Ch·ªã g√°i t√¥i th√≠ch <b>phim h√†i</b> n√†y v√¨ n√≥ l√†m ch·ªã ·∫•y c∆∞·ªùi r·∫•t nhi·ªÅu.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>dull</b> (adj): t·∫ª nh·∫°t<br>
                        B. <b>comedy</b> (n): phim h√†i<br>
                        C. <b>violent</b> (adj): b·∫°o l·ª±c<br>
                        D. <b>director</b> (n): ƒë·∫°o di·ªÖn
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">C·ª•m t·ª´ kh√≥a l√† "makes her laugh" (l√†m c√¥ ·∫•y c∆∞·ªùi). Th·ªÉ lo·∫°i phim g√¢y c∆∞·ªùi l√† phim h√†i (comedy).</span>
                    </div>
                `
            },
            {
                q: 3,
                text: "He doesn‚Äôt like the fights in the film. It‚Äôs too ________.",
                options: ["violent", "actress", "confusing", "dull"],
                correct: 0,
                hint: "Phim c√≥ nhi·ªÅu c·∫£nh ƒë√°nh nhau (fights) th√¨ ƒë∆∞·ª£c g·ªçi l√† phim g√¨?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">Anh ·∫•y kh√¥ng th√≠ch c√°c c·∫£nh ƒë√°nh nhau trong phim. N√≥ qu√° <b>b·∫°o l·ª±c</b>.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>violent</b> (adj): b·∫°o l·ª±c<br>
                        B. <b>actress</b> (n): n·ªØ di·ªÖn vi√™n<br>
                        C. <b>confusing</b> (adj): kh√≥ hi·ªÉu<br>
                        D. <b>dull</b> (adj): t·∫ª nh·∫°t
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">C√¢u tr∆∞·ªõc nh·∫Øc ƒë·∫øn "fights" (c√°c c·∫£nh ƒë√°nh nhau). T√≠nh t·ª´ m√¥ t·∫£ s·ª± ƒë√°nh nhau l√† "violent" (b·∫°o l·ª±c).</span>
                    </div>
                `
            },
            {
                q: 4,
                text: "The problem is so ________. I can‚Äôt understand.",
                options: ["confusing", "dull", "comedy", "violent"],
                correct: 0,
                hint: "N·∫øu b·∫°n 'can't understand' (kh√¥ng hi·ªÉu), th√¨ v·∫•n ƒë·ªÅ ƒë√≥ r·∫•t...?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">V·∫•n ƒë·ªÅ n√†y th·∫≠t <b>kh√≥ hi·ªÉu</b>. T√¥i kh√¥ng th·ªÉ hi·ªÉu n·ªïi.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>confusing</b> (adj): g√¢y b·ªëi r·ªëi, kh√≥ hi·ªÉu<br>
                        B. <b>dull</b> (adj): t·∫ª nh·∫°t<br>
                        C. <b>comedy</b> (n): h√†i k·ªãch<br>
                        D. <b>violent</b> (adj): b·∫°o l·ª±c
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">T·ª´ kh√≥a l√† "can't understand" (kh√¥ng th·ªÉ hi·ªÉu). ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† v·∫•n ƒë·ªÅ ƒë√≥ r·∫•t "confusing".</span>
                    </div>
                `
            },
            {
                q: 5,
                text: "Christ Columbus is the ________ of Harry Potter and the Sorcerer‚Äôs Stone.",
                options: ["director", "actress", "comedy", "actor"],
                correct: 0,
                hint: "Ng∆∞·ªùi ch·ªâ ƒë·∫°o th·ª±c hi·ªán b·ªô phim g·ªçi l√† g√¨?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">Christ Columbus l√† <b>ƒë·∫°o di·ªÖn</b> c·ªßa phim Harry Potter v√† H√≤n ƒë√° Ph√π th·ªßy.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>director</b> (n): ƒë·∫°o di·ªÖn<br>
                        B. <b>actress</b> (n): n·ªØ di·ªÖn vi√™n<br>
                        C. <b>comedy</b> (n): h√†i k·ªãch<br>
                        D. <b>actor</b> (n): nam di·ªÖn vi√™n
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">Christ Columbus l√† ng∆∞·ªùi ch·ªâ ƒë·∫°o s·∫£n xu·∫•t (ƒë·∫°o di·ªÖn) b·ªô phim n√†y. √îng kh√¥ng ph·∫£i di·ªÖn vi√™n trong phim.</span>
                    </div>
                `
            },
            {
                q: 6,
                text: "Thuy Ngan is a main ________ of the 'G·∫°o N·∫øp, G·∫°o T·∫ª' film.",
                options: ["actress", "director", "dull", "actor"],
                correct: 0,
                hint: "Th√∫y Ng√¢n l√† con g√°i. T·ª´ n√†o ch·ªâ 'n·ªØ di·ªÖn vi√™n'?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">Th√∫y Ng√¢n l√† m·ªôt <b>n·ªØ di·ªÖn vi√™n</b> ch√≠nh c·ªßa phim 'G·∫°o N·∫øp, G·∫°o T·∫ª'.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>actress</b> (n): n·ªØ di·ªÖn vi√™n<br>
                        B. <b>director</b> (n): ƒë·∫°o di·ªÖn<br>
                        C. <b>dull</b> (adj): t·∫ª nh·∫°t<br>
                        D. <b>actor</b> (n): nam di·ªÖn vi√™n (th∆∞·ªùng d√πng cho nam)
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">Th√∫y Ng√¢n l√† t√™n n·ªØ, c√¥ ·∫•y ƒë√≥ng vai trong phim n√™n d√πng t·ª´ "actress".</span>
                    </div>
                `
            },
            {
                q: 7,
                text: "Brad Pitt is an American ________ and film producer.",
                options: ["actor", "actress", "director", "singer"],
                correct: 0,
                hint: "Brad Pitt l√† ƒë√†n √¥ng. Ch·ªçn t·ª´ ch·ªâ di·ªÖn vi√™n nam.",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">Brad Pitt l√† m·ªôt <b>nam di·ªÖn vi√™n</b> v√† nh√† s·∫£n xu·∫•t phim ng∆∞·ªùi M·ªπ.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>actor</b> (n): nam di·ªÖn vi√™n<br>
                        B. <b>actress</b> (n): n·ªØ di·ªÖn vi√™n<br>
                        C. <b>director</b> (n): ƒë·∫°o di·ªÖn<br>
                        D. <b>singer</b> (n): ca sƒ©
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">Brad Pitt l√† nam gi·ªõi v√† l√† t√†i t·ª≠ ƒëi·ªán ·∫£nh n·ªïi ti·∫øng n√™n d√πng "actor".</span>
                    </div>
                `
            },
            {
                q: 8,
                text: "I like science fiction films because they‚Äôre ________.",
                options: ["gripping", "boring", "dull", "terrible"],
                correct: 0,
                hint: "V√¨ 'th√≠ch' (like) n√™n phim ph·∫£i hay. Ch·ªçn t·ª´ ƒë·ªìng nghƒ©a v·ªõi 'h·∫•p d·∫´n'.",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">T√¥i th√≠ch phim khoa h·ªçc vi·ªÖn t∆∞·ªüng v√¨ ch√∫ng r·∫•t <b>l√¥i cu·ªën/h·∫•p d·∫´n</b>.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>gripping</b> (adj): h·∫•p d·∫´n, l√¥i cu·ªën<br>
                        B. <b>boring</b> (adj): nh√†m ch√°n<br>
                        C. <b>dull</b> (adj): t·∫ª nh·∫°t<br>
                        D. <b>terrible</b> (adj): t·ªìi t·ªá
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">V√¨ ng∆∞·ªùi n√≥i "like" (th√≠ch) n√™n c·∫ßn m·ªôt t√≠nh t·ª´ mang nghƒ©a t√≠ch c·ª±c. "Gripping" nghƒ©a l√† phim hay ƒë·∫øn m·ª©c thu h√∫t s·ª± ch√∫ √Ω ho√†n to√†n. C√°c ƒë√°p √°n c√≤n l·∫°i ƒë·ªÅu mang nghƒ©a ti√™u c·ª±c.</span>
                    </div>
                `
            },
            {
                q: 9,
                text: "The end of the film was so ________. I cried a lot.",
                options: ["moving", "interesting", "funny", "boring"],
                correct: 0,
                hint: "B·∫°n kh√≥c (cried) v√¨ phim ch·∫°m ƒë·∫øn tr√°i tim. Ch·ªçn t·ª´ nghƒ©a l√† 'c·∫£m ƒë·ªông'.",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">K·∫øt th√∫c c·ªßa b·ªô phim qu√° <b>c·∫£m ƒë·ªông</b>. T√¥i ƒë√£ kh√≥c r·∫•t nhi·ªÅu.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>moving</b> (adj): c·∫£m ƒë·ªông<br>
                        B. <b>interesting</b> (adj): th√∫ v·ªã<br>
                        C. <b>funny</b> (adj): bu·ªìn c∆∞·ªùi<br>
                        D. <b>boring</b> (adj): nh√†m ch√°n
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">H√†nh ƒë·ªông "cried a lot" (kh√≥c r·∫•t nhi·ªÅu) cho th·∫•y b·ªô phim ch·∫°m ƒë·∫øn c·∫£m x√∫c s√¢u s·∫Øc -> ch·ªçn "moving".</span>
                    </div>
                `
            },
            {
                q: 10,
                text: "We saw a ________ of Marilyn Monroe on his wall.",
                options: ["poster", "wizard", "scene", "cinema"],
                correct: 0,
                hint: "Th·ª© g√¨ c√≥ h√¨nh di·ªÖn vi√™n v√† ƒë∆∞·ª£c treo tr√™n t∆∞·ªùng (wall)?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">Ch√∫ng t√¥i ƒë√£ th·∫•y m·ªôt <b>t·∫•m √°p ph√≠ch</b> c·ªßa Marilyn Monroe tr√™n t∆∞·ªùng c·ªßa anh ·∫•y.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>poster</b> (n): t·∫•m √°p ph√≠ch/tranh ·∫£nh kh·ªï l·ªõn<br>
                        B. <b>wizard</b> (n): ph√π th·ªßy<br>
                        C. <b>scene</b> (n): c·∫£nh phim<br>
                        D. <b>cinema</b> (n): r·∫°p phim
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">Poster l√† v·∫≠t th·ªÉ c√≥ in h√¨nh ng∆∞·ªùi n·ªïi ti·∫øng v√† c√≥ th·ªÉ treo tr√™n t∆∞·ªùng ("on his wall").</span>
                    </div>
                `
            },
            {
                q: 11,
                text: "She dislikes ________ films. They are frightening.",
                options: ["horror", "romantic", "comedy", "documentary"],
                correct: 0,
                hint: "Lo·∫°i phim n√†o g√¢y s·ª£ h√£i (frightening)?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">C√¥ ·∫•y kh√¥ng th√≠ch phim <b>kinh d·ªã</b>. Ch√∫ng r·∫•t ƒë√°ng s·ª£.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>horror</b> (n): kinh d·ªã<br>
                        B. <b>romantic</b> (adj): l√£ng m·∫°n<br>
                        C. <b>comedy</b> (n): h√†i k·ªãch<br>
                        D. <b>documentary</b> (n): phim t√†i li·ªáu
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">T·ª´ kh√≥a "frightening" (ƒë√°ng s·ª£) l√† ƒë·∫∑c ƒëi·ªÉm nh·∫≠n d·∫°ng ch√≠nh c·ªßa phim kinh d·ªã (horror films).</span>
                    </div>
                `
            },
            {
                q: 12,
                text: "Kate Winslet is a famous actress. She ________ in the film 'Titanic'.",
                options: ["stars", "reviews", "watches", "makes"],
                correct: 0,
                hint: "Di·ªÖn vi√™n ch√≠nh th√¨ l√†m h√†nh ƒë·ªông g√¨ trong phim? (ƒê·ªông t·ª´ b·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ s).",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">Kate Winslet l√† m·ªôt n·ªØ di·ªÖn vi√™n n·ªïi ti·∫øng. C√¥ ·∫•y <b>ƒë√≥ng vai ch√≠nh</b> trong phim Titanic.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>stars</b> (v): ƒë√≥ng vai ch√≠nh<br>
                        B. <b>reviews</b> (v): ph√™ b√¨nh/ƒë√°nh gi√°<br>
                        C. <b>watches</b> (v): xem<br>
                        D. <b>makes</b> (v): l√†m/s·∫£n xu·∫•t
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">Ch·ªß ng·ªØ l√† "Actress" (di·ªÖn vi√™n), h√†nh ƒë·ªông ph√π h·ª£p nh·∫•t l√† "stars" (ƒë√≥ng vai ch√≠nh). ƒê·∫°o di·ªÖn m·ªõi "makes" phim, nh√† ph√™ b√¨nh m·ªõi "reviews".</span>
                    </div>
                `
            },
            {
                q: 13,
                text: "The film attracted millions of ________ every week.",
                options: ["viewers", "scenes", "actors", "cameras"],
                correct: 0,
                hint: "Ai l√† ng∆∞·ªùi xem phim?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">B·ªô phim thu h√∫t h√†ng tri·ªáu <b>l∆∞·ª£t ng∆∞·ªùi xem</b> m·ªói tu·∫ßn.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>viewers</b> (n): ng∆∞·ªùi xem (qua m√†n h√¨nh)<br>
                        B. <b>scenes</b> (n): c·∫£nh phim<br>
                        C. <b>actors</b> (n): di·ªÖn vi√™n<br>
                        D. <b>cameras</b> (n): m√°y quay
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">M·ªôt b·ªô phim ƒë∆∞·ª£c chi·∫øu th√¨ s·∫Ω thu h√∫t ng∆∞·ªùi xem. "Millions of viewers" l√† c·ª•m t·ª´ k·∫øt h·ª£p (collocation) ph·ªï bi·∫øn.</span>
                    </div>
                `
            },
            {
                q: 14,
                text: "She lectures to thousands of ________ all over the world.",
                options: ["audiences", "cartoons", "cinemas", "films"],
                correct: 0,
                hint: "Ng∆∞·ªùi ng·ªìi nghe di·ªÖn thuy·∫øt/xem bi·ªÉu di·ªÖn g·ªçi l√† g√¨?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">C√¥ ·∫•y thuy·∫øt tr√¨nh tr∆∞·ªõc h√†ng ng√†n <b>kh√°n gi·∫£/th√≠nh gi·∫£</b> tr√™n kh·∫Øp th·∫ø gi·ªõi.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>audiences</b> (n): kh√°n gi·∫£, th√≠nh gi·∫£ (ng∆∞·ªùi nghe tr·ª±c ti·∫øp)<br>
                        B. <b>cartoons</b> (n): phim ho·∫°t h√¨nh<br>
                        C. <b>cinemas</b> (n): r·∫°p phim<br>
                        D. <b>films</b> (n): phim
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">ƒê·ªông t·ª´ "lectures" (gi·∫£ng b√†i/thuy·∫øt tr√¨nh) c·∫ßn ƒë·ªëi t∆∞·ª£ng l·∫Øng nghe l√† con ng∆∞·ªùi -> audiences.</span>
                    </div>
                `
            },
            {
                q: 15,
                text: "It is a ________ film. I have seen it many times.",
                options: ["must-see", "content", "boring", "bad"],
                correct: 0,
                hint: "Phim hay ƒë·∫øn m·ª©c xem ƒëi xem l·∫°i nhi·ªÅu l·∫ßn. N√≥ l√† m·ªôt b·ªô phim...?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">ƒê√≥ l√† m·ªôt b·ªô phim <b>nh·∫•t ƒë·ªãnh ph·∫£i xem</b>. T√¥i ƒë√£ xem n√≥ r·∫•t nhi·ªÅu l·∫ßn.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>must-see</b> (adj): ƒë√°ng xem, ph·∫£i xem<br>
                        B. <b>content</b> (n): n·ªôi dung<br>
                        C. <b>boring</b> (adj): nh√†m ch√°n<br>
                        D. <b>bad</b> (adj): t·ªìi
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">"Seen it many times" (xem nhi·ªÅu l·∫ßn) ch·ª©ng t·ªè phim r·∫•t hay v√† l√¥i cu·ªën. T√≠nh t·ª´ gh√©p "must-see" l√† ph√π h·ª£p nh·∫•t.</span>
                    </div>
                `
            },
            {
                q: 16,
                text: "James Cameron is the ________ of the famous film 'Titanic'.",
                options: ["director", "leading role", "actor", "writer"],
                correct: 0,
                hint: "James Cameron l√† ng∆∞·ªùi ch·ªâ ƒë·∫°o l√†m phim. √îng ·∫•y l√†...?",
                explanation: `
                    <div class="exp-section">
                        <span class="exp-label">D·ªãch c√¢u:</span> 
                        <span class="exp-content">James Cameron l√† <b>ƒë·∫°o di·ªÖn</b> c·ªßa b·ªô phim n·ªïi ti·∫øng Titanic.</span>
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">Ph√¢n t√≠ch t·ª´ v·ª±ng:</span><br>
                        A. <b>director</b> (n): ƒë·∫°o di·ªÖn<br>
                        B. <b>leading role</b> (n): vai ch√≠nh<br>
                        C. <b>actor</b> (n): di·ªÖn vi√™n<br>
                        D. <b>writer</b> (n): nh√† vƒÉn
                    </div>
                    <div class="exp-section">
                        <span class="exp-label">T·∫°i sao ƒê√öNG?</span>
                        <span class="exp-content">James Cameron l√† ng∆∞·ªùi ch·ªâ ƒë·∫°o th·ª±c hi·ªán (ƒë·∫°o di·ªÖn) b·ªô phim bom t·∫•n Titanic.</span>
                    </div>
                `
            }
        ];

        // --- RENDER LOGIC ---
        const quizContainer = document.getElementById('quiz-container');
        const totalQSpan = document.getElementById('total-q');
        const currentQSpan = document.getElementById('current-q');
        const scoreSpan = document.getElementById('score');
        
        let currentQuestionIndex = 0;
        let score = 0;

        // Shuffle Options for Randomness while keeping correct answer tracked
        // Note: For this specific fixed content, I'm rendering as per input for simplicity in mapping explanations, 
        // but the code allows for shuffling if we wanted to expand.

        function initQuiz() {
            totalQSpan.textContent = quizData.length;
            renderQuestion(currentQuestionIndex);
        }

        function renderQuestion(index) {
            // Hide all questions
            const allCards = document.querySelectorAll('.question-card');
            allCards.forEach(card => card.classList.remove('active'));

            // If card exists, show it. If not, create it.
            let card = document.getElementById(`q-card-${index}`);
            
            if (!card) {
                card = createQuestionCard(quizData[index], index);
                quizContainer.appendChild(card);
            }
            
            // Allow reflow then add class for animation
            setTimeout(() => card.classList.add('active'), 10);
            currentQSpan.textContent = index + 1;
        }

        function createQuestionCard(data, index) {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `q-card-${index}`;

            const qNum = document.createElement('div');
            qNum.className = 'question-number';
            qNum.innerHTML = `<i class="fas fa-question-circle"></i> C√¢u h·ªèi ${index + 1}`;

            const qText = document.createElement('div');
            qText.className = 'question-text';
            qText.innerHTML = data.text; // Allows HTML like <u> or <b> if needed

            const optionsGrid = document.createElement('div');
            optionsGrid.className = 'options-grid';

            data.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = `${String.fromCharCode(65 + i)}. ${opt}`;
                btn.onclick = () => handleAnswer(btn, i, data, index);
                optionsGrid.appendChild(btn);
            });

            // Explanation Section
            const expBox = document.createElement('div');
            expBox.className = 'explanation-box';
            expBox.innerHTML = data.explanation;

            // Next Button
            const nextBtnContainer = document.createElement('div');
            nextBtnContainer.className = 'nav-buttons';
            
            const nextBtn = document.createElement('button');
            nextBtn.className = 'next-btn';
            nextBtn.innerHTML = index === quizData.length - 1 ? 'N·ªôp b√†i & Xem ƒëi·ªÉm <i class="fas fa-flag-checkered"></i>' : 'C√¢u ti·∫øp theo <i class="fas fa-arrow-right"></i>';
            nextBtn.onclick = () => {
                if (index === quizData.length - 1) {
                    showFinalSummary();
                } else {
                    currentQuestionIndex++;
                    renderQuestion(currentQuestionIndex);
                }
            };
            nextBtnContainer.appendChild(nextBtn);

            card.appendChild(qNum);
            card.appendChild(qText);
            card.appendChild(optionsGrid);
            card.appendChild(expBox);
            card.appendChild(nextBtnContainer);

            return card;
        }

        function handleAnswer(btn, choiceIndex, data, qIndex) {
            const card = document.getElementById(`q-card-${qIndex}`);
            const buttons = card.querySelectorAll('.option-btn');
            const expBox = card.querySelector('.explanation-box');
            const nextBtn = card.querySelector('.next-btn');

            // Disable all buttons
            buttons.forEach(b => b.disabled = true);

            if (choiceIndex === data.correct) {
                // Correct
                btn.classList.add('correct');
                playSound('correct');
                score += 1;
                scoreSpan.textContent = score;
                // Confetti effect
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            } else {
                // Wrong
                btn.classList.add('wrong');
                playSound('wrong');
                // Highlight correct answer
                buttons[data.correct].classList.add('correct');
            }

            // Show explanation
            expBox.style.display = 'block';
            nextBtn.style.display = 'block';
        }

        function showFinalSummary() {
            const modal = document.getElementById('summary-modal');
            const scoreDisplay = document.getElementById('final-score-display');
            const feedback = document.getElementById('feedback-text');

            scoreDisplay.textContent = `${score}/${quizData.length}`;

            const percentage = (score / quizData.length) * 100;
            if (percentage === 100) {
                feedback.textContent = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i ti·∫øng Anh! üåüüèÜ";
                playSound('correct');
                confetti({ particleCount: 200, spread: 100 });
            } else if (percentage >= 80) {
                feedback.textContent = "Gi·ªèi l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa l√† ho√†n h·∫£o! üí™";
            } else if (percentage >= 50) {
                feedback.textContent = "Kh√° t·ªët, nh∆∞ng h√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch k·ªπ h∆°n nh√©! üìö";
            } else {
                feedback.textContent = "ƒê·ª´ng bu·ªìn, h√£y l√†m l·∫°i ƒë·ªÉ √¥n t·∫≠p ki·∫øn th·ª©c nh√©! üå±";
            }

            modal.style.display = 'flex';
        }

        // Initialize the app
        window.onload = initQuiz;

    </script>
</body>
</html>
