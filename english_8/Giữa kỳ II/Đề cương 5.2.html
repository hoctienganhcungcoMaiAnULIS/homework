<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        /* ================= COLOR PALETTE & DYNAMIC THEME ================= */
        :root {
            /* Theme: Storms & Environment (Xanh d∆∞∆°ng ƒë·∫≠m v√† Xanh ng·ªçc) */
            --primary-color: #1E3A8A; /* Dark Blue - Storm */
            --secondary-color: #10B981; /* Emerald Green - Nature */
            --correct-color: #00D26A;
            --wrong-color: #FF4757;
            --bg-light: #F0FDF4;
            --text-main: #333333;
            --card-bg: #FFFFFF;
        }

        /* SVG Background Theme: B√£o (Tornado/Hurricane) & Tr√°i ƒê·∫•t */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Nunito', sans-serif;
            color: var(--text-main);
            background: radial-gradient(circle at center, rgba(30, 58, 138, 0.05), rgba(16, 185, 129, 0.15)), 
                        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" opacity="0.1"><text x="20" y="50" font-size="40">üå™Ô∏è</text><text x="80" y="110" font-size="40">üåç</text><text x="10" y="140" font-size="30">üåßÔ∏è</text></svg>');
            background-attachment: fixed;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ================= TOP CONTROL BAR ================= */
        .top-bar {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }
        
        .teacher-title {
            font-size: 1.2rem;
            font-weight: 800;
            margin: 0;
            color: #FCD34D; /* Yellow highlight */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .timer-display {
            font-size: 1.5rem;
            font-weight: 900;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 10px;
            letter-spacing: 2px;
        }

        .btn-3d {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 800;
            font-family: 'Nunito', sans-serif;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 5px 0 #047857;
            transition: all 0.1s ease;
            text-transform: uppercase;
        }

        .btn-3d:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #047857;
        }

        .btn-3d:hover {
            transform: scale(1.05);
            box-shadow: 0 7px 0 #047857;
        }

        /* ================= SPLIT SCREEN LAYOUT ================= */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            padding: 20px;
            gap: 20px;
        }

        .left-panel, .right-panel {
            flex: 1;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 2px solid #E5E7EB;
        }

        /* T√πy ch·ªânh thanh cu·ªôn (Scrollbar) */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* ================= LEFT PANEL: READING ================= */
        .passage-content {
            font-size: 1.15rem;
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: justify;
        }

        .passage-title {
            color: var(--primary-color);
            font-size: 1.3rem;
            font-weight: 800;
            border-bottom: 3px dashed var(--secondary-color);
            padding-bottom: 10px;
            margin-top: 30px;
        }
        .passage-title:first-child { margin-top: 0; }

        .btn-translate {
            background-color: #8B5CF6;
            box-shadow: 0 5px 0 #5B21B6;
            margin-bottom: 20px;
            width: 100%;
        }
        .btn-translate:active { box-shadow: 0 0 0 #5B21B6; }
        .btn-translate:hover { box-shadow: 0 7px 0 #5B21B6; }

        .translation-box {
            display: none;
            background-color: #F3F4F6;
            padding: 15px;
            border-left: 5px solid #8B5CF6;
            border-radius: 0 10px 10px 0;
            margin-bottom: 20px;
            font-style: italic;
        }

        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .glossary-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 12px;
            text-align: left;
        }
        .glossary-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #E5E7EB;
        }
        .glossary-table tr:last-child td { border-bottom: none; }
        .glossary-table tr:hover { background-color: #F9FAFB; }

        /* ================= RIGHT PANEL: EXERCISES ================= */
        .question-card {
            background: var(--card-bg);
            border: 2px solid #E5E7EB;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.03);
            transition: all 0.3s ease;
        }
        
        .question-card:hover { border-color: var(--secondary-color); }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .option-btn {
            background-color: white;
            border: 2px solid #E5E7EB;
            border-radius: 15px;
            padding: 12px 20px;
            font-size: 1.1rem;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            text-align: left;
            cursor: pointer;
            box-shadow: 0 4px 0 #E5E7EB;
            transition: all 0.15s ease;
            position: relative;
            overflow: hidden;
        }

        .option-btn:hover:not(:disabled) {
            transform: scale(1.02);
            border-color: #9CA3AF;
            box-shadow: 0 6px 0 #9CA3AF;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: 0 0 0 transparent;
        }

        .option-btn.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: #00A653;
            box-shadow: 0 4px 0 #00A653;
        }

        .option-btn.wrong {
            background-color: var(--wrong-color);
            color: white;
            border-color: #D63031;
            box-shadow: 0 4px 0 #D63031;
        }

        .option-btn:disabled { cursor: not-allowed; }

        /* Animation: Shake */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-8px); }
            100% { transform: translateX(0); }
        }
        .shake { animation: shake 0.4s ease-in-out; }

        /* Explanation Box */
        .explanation-box {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: #FFFBEB;
            border-left: 5px solid #F59E0B;
            border-radius: 10px;
            font-size: 1.05rem;
            line-height: 1.6;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .btn-submit {
            width: 100%;
            background-color: #EF4444;
            box-shadow: 0 6px 0 #B91C1C;
            font-size: 1.3rem;
            padding: 15px;
            margin-top: 20px;
        }
        .btn-submit:hover { box-shadow: 0 8px 0 #B91C1C; }
        .btn-submit:active { box-shadow: 0 0 0 #B91C1C; }

        /* ================= CONFETTI & MODAL ================= */
        .confetti {
            position: fixed;
            top: -10px;
            width: 10px;
            height: 10px;
            z-index: 9999;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-display {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-color);
            margin: 20px 0;
            text-shadow: 2px 2px 0px #FCD34D;
        }
        
        /* Blur overlay before start */
        #quiz-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(8px);
            z-index: 50;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <h1 class="teacher-title">üë©‚Äçüè´ Ms Mai An ULIS</h1>
        <div class="timer-container">
            <div class="timer-display" id="timer">10:00</div>
            <button class="btn-3d" id="btn-start" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú L√ÄM B√ÄI</button>
        </div>
    </div>

    <div class="main-container">
        <div class="left-panel">
            
            <h2 class="passage-title">üìñ Reading Passage 1: Storms in America</h2>
            <div class="passage-content">
                Two of the most dangerous storms which affect America are hurricanes and tornadoes. They are very much feared by anyone who may live in the path of their destruction. Every year homes are destroyed by their fury and often lives are lost. Most people who live near the coast are forced to evacuate their homes and to move to safer areas until the storm passes. Floods are caused along the coasts by both the heavy rain and a storm tide that is considerably above normal water level. The high winds, coastal flooding and heavy rains associated with a hurricane cause enormous damage. Hurricanes usually develop between July and October. Once they hit land they carry tremendous power with driving rain and wind.<br><br>
                Tornadoes are violent low-pressured storms. These storms occur most often during the summer months and are noticeable by their strong wind and lack of rain. The sky turns black as dust is sucked up into the air. Tornadoes are capable of lifting quite heavy objects from the ground. They can pick up trees and cars right into the air and even uplift heavier objects such as homes and railway cars.<br><br>
                Both hurricanes and tornadoes cause millions of dollars worth of damage to life and property every year. Today they can be predicted more easily than in the past, but they cannot be stopped or ignored.
            </div>

            <button class="btn-3d btn-translate" onclick="toggleTranslation('trans1')">üåç XEM B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
            <div id="trans1" class="translation-box">
                Hai trong s·ªë nh·ªØng c∆°n b√£o nguy hi·ªÉm nh·∫•t ·∫£nh h∆∞·ªüng ƒë·∫øn n∆∞·ªõc M·ªπ l√† b√£o l·ªëc xo√°y (hurricanes) v√† v√≤i r·ªìng (tornadoes). Ch√∫ng l√† n·ªói khi·∫øp s·ª£ ƒë·ªëi v·ªõi b·∫•t k·ª≥ ai s·ªëng tr√™n ƒë∆∞·ªùng ƒëi t√†n ph√° c·ªßa ch√∫ng. H√†ng nƒÉm, nhi·ªÅu ng√¥i nh√† b·ªã ph√° h·ªßy b·ªüi s·ª± gi·∫≠n d·ªØ c·ªßa ch√∫ng v√† th∆∞·ªùng xuy√™n c√≥ thi·ªát h·∫°i v·ªÅ nh√¢n m·∫°ng. H·∫ßu h·∫øt nh·ªØng ng∆∞·ªùi s·ªëng g·∫ßn b·ªù bi·ªÉn b·ªã bu·ªôc ph·∫£i s∆° t√°n kh·ªèi nh√† v√† di chuy·ªÉn ƒë·∫øn c√°c khu v·ª±c an to√†n h∆°n cho ƒë·∫øn khi b√£o ƒëi qua. L≈© l·ª•t d·ªçc theo b·ªù bi·ªÉn ƒë∆∞·ª£c g√¢y ra b·ªüi c·∫£ m∆∞a l·ªõn v√† th·ªßy tri·ªÅu d√¢ng cao do b√£o cao h∆°n ƒë√°ng k·ªÉ so v·ªõi m·ª±c n∆∞·ªõc b√¨nh th∆∞·ªùng. Gi√≥ l·ªõn, ng·∫≠p l·ª•t ven bi·ªÉn v√† m∆∞a l·ªõn li√™n quan ƒë·∫øn b√£o g√¢y ra thi·ªát h·∫°i kh·ªïng l·ªì. B√£o (hurricanes) th∆∞·ªùng ph√°t tri·ªÉn trong kho·∫£ng t·ª´ th√°ng B·∫£y ƒë·∫øn th√°ng M∆∞·ªùi. M·ªôt khi ƒë·ªï b·ªô v√†o ƒë·∫•t li·ªÅn, ch√∫ng mang theo s·ª©c m·∫°nh kh·ªßng khi·∫øp v·ªõi m∆∞a l·ªõn v√† gi√≥ gi·∫≠t.<br><br>
                V√≤i r·ªìng l√† nh·ªØng c∆°n b√£o √°p th·∫•p b·∫°o l·ª±c. Nh·ªØng c∆°n b√£o n√†y x·∫£y ra th∆∞·ªùng xuy√™n nh·∫•t v√†o c√°c th√°ng m√πa h√® v√† d·ªÖ nh·∫≠n bi·∫øt b·ªüi gi√≥ m·∫°nh v√† kh√¥ng c√≥ m∆∞a. B·∫ßu tr·ªùi chuy·ªÉn sang m√†u ƒëen khi b·ª•i b·ªã h√∫t l√™n kh√¥ng trung. V√≤i r·ªìng c√≥ kh·∫£ nƒÉng nh·∫•c b·ªïng nh·ªØng v·∫≠t th·ªÉ kh√° n·∫∑ng kh·ªèi m·∫∑t ƒë·∫•t. Ch√∫ng c√≥ th·ªÉ cu·ªën c√¢y c·ªëi v√† √¥ t√¥ th·∫≥ng l√™n kh√¥ng trung v√† th·∫≠m ch√≠ nh·∫•c b·ªïng c·∫£ nh·ªØng v·∫≠t th·ªÉ n·∫∑ng h∆°n nh∆∞ nh√† c·ª≠a v√† toa t√†u h·ªèa.<br><br>
                C·∫£ b√£o v√† v√≤i r·ªìng ƒë·ªÅu g√¢y ra thi·ªát h·∫°i h√†ng tri·ªáu ƒë√¥ la v·ªÅ t√≠nh m·∫°ng v√† t√†i s·∫£n m·ªói nƒÉm. Ng√†y nay, ch√∫ng c√≥ th·ªÉ ƒë∆∞·ª£c d·ª± b√°o d·ªÖ d√†ng h∆°n so v·ªõi qu√° kh·ª©, nh∆∞ng ch√∫ng kh√¥ng th·ªÉ b·ªã ngƒÉn ch·∫∑n ho·∫∑c ph·ªõt l·ªù.
            </div>

            <table class="glossary-table">
                <thead>
                    <tr><th>Vocabulary (B1-C2)</th><th>Part of Speech</th><th>Vietnamese Meaning</th></tr>
                </thead>
                <tbody>
                    <tr><td>1. Hurricane</td><td>Noun (n)</td><td>B√£o nhi·ªát ƒë·ªõi, l·ªëc xo√°y (tr√™n bi·ªÉn)</td></tr>
                    <tr><td>2. Tornado</td><td>Noun (n)</td><td>V√≤i r·ªìng, l·ªëc xo√°y (tr√™n c·∫°n)</td></tr>
                    <tr><td>3. Destruction</td><td>Noun (n)</td><td>S·ª± t√†n ph√°, s·ª± ph√° h·ªßy</td></tr>
                    <tr><td>4. Evacuate</td><td>Verb (v)</td><td>S∆° t√°n, t·∫£n c∆∞</td></tr>
                    <tr><td>5. Considerably</td><td>Adverb (adv)</td><td>ƒê√°ng k·ªÉ, l·ªõn lao</td></tr>
                    <tr><td>6. Enormous</td><td>Adjective (adj)</td><td>To l·ªõn, kh·ªïng l·ªì</td></tr>
                    <tr><td>7. Tremendous</td><td>Adjective (adj)</td><td>Kh·ªßng khi·∫øp, d·ªØ d·ªôi, to l·ªõn</td></tr>
                    <tr><td>8. Violent</td><td>Adjective (adj)</td><td>M√£nh li·ªát, b·∫°o l·ª±c, hung d·ªØ</td></tr>
                    <tr><td>9. Noticeable</td><td>Adjective (adj)</td><td>ƒê√°ng ch√∫ √Ω, d·ªÖ nh·∫≠n bi·∫øt</td></tr>
                    <tr><td>10. Predict</td><td>Verb (v)</td><td>D·ª± ƒëo√°n, d·ª± b√°o</td></tr>
                </tbody>
            </table>

            <hr style="border: 1px solid #E5E7EB; margin: 40px 0;">

            <h2 class="passage-title">üìñ Reading Passage 2: Global Warming</h2>
            <div class="passage-content">
                One of the most important reasons for global warming is air (26) __________. More and more factories are being built in different countries. By burning oil, coal, gasoline, even natural gas, they add more carbon dioxide to the (27) __________. Cars also influence the atmosphere badly (28) __________ burning many liters of oil and releasing (29) __________ gases into the air. As a result, the ozone layer of our Earth is being destroyed.<br><br>
                All these activities unfavourably change the Earth‚Äôs heat balance. A lot of rivers and lakes dry up, the forests start burning, the glaciers melt, people and animals start to faint. And these are not all the outcomes of global (30) _________. Nature becomes really angry with us. We need to be more attentive and caring to it if we want to save our planet.
            </div>

            <button class="btn-3d btn-translate" onclick="toggleTranslation('trans2')">üåç XEM B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
            <div id="trans2" class="translation-box">
                M·ªôt trong nh·ªØng l√Ω do quan tr·ªçng nh·∫•t g√¢y ra s·ª± n√≥ng l√™n to√†n c·∫ßu l√† s·ª± √¥ nhi·ªÖm kh√¥ng kh√≠ (air pollution). Ng√†y c√†ng c√≥ nhi·ªÅu nh√† m√°y ƒë∆∞·ª£c x√¢y d·ª±ng ·ªü c√°c qu·ªëc gia kh√°c nhau. B·∫±ng c√°ch ƒë·ªët d·∫ßu, than ƒë√°, xƒÉng, th·∫≠m ch√≠ c·∫£ kh√≠ t·ª± nhi√™n, ch√∫ng th·∫£i th√™m kh√≠ carbon dioxide v√†o b·∫ßu kh√≠ quy·ªÉn (atmosphere). √î t√¥ c≈©ng ·∫£nh h∆∞·ªüng x·∫•u ƒë·∫øn b·∫ßu kh√≠ quy·ªÉn b·∫±ng (by) c√°ch ƒë·ªët h√†ng l√≠t d·∫ßu v√† th·∫£i ra c√°c kh√≠ ƒë·ªôc h·∫°i (harmful) v√†o kh√¥ng kh√≠. K·∫øt qu·∫£ l√†, t·∫ßng ozone c·ªßa Tr√°i ƒê·∫•t ch√∫ng ta ƒëang b·ªã ph√° h·ªßy.<br><br>
                T·∫•t c·∫£ c√°c ho·∫°t ƒë·ªông n√†y thay ƒë·ªïi tr·∫°ng th√°i c√¢n b·∫±ng nhi·ªát c·ªßa Tr√°i ƒë·∫•t m·ªôt c√°ch b·∫•t l·ª£i. R·∫•t nhi·ªÅu s√¥ng h·ªì c·∫°n ki·ªát, r·ª´ng b·∫Øt ƒë·∫ßu b·ªëc ch√°y, s√¥ng bƒÉng tan ch·∫£y, con ng∆∞·ªùi v√† ƒë·ªông v·∫≠t b·∫Øt ƒë·∫ßu ng·∫•t x·ªâu. V√† ƒë√¢y ch∆∞a ph·∫£i l√† t·∫•t c·∫£ nh·ªØng h·∫≠u qu·∫£ c·ªßa s·ª± n√≥ng l√™n (warming) to√†n c·∫ßu. Thi√™n nhi√™n th·ª±c s·ª± tr·ªü n√™n t·ª©c gi·∫≠n v·ªõi ch√∫ng ta. Ch√∫ng ta c·∫ßn ph·∫£i ch√∫ √Ω v√† quan t√¢m ƒë·∫øn n√≥ nhi·ªÅu h∆°n n·∫øu ch√∫ng ta mu·ªën c·ª©u l·∫•y h√†nh tinh c·ªßa m√¨nh.
            </div>

            <table class="glossary-table">
                <thead>
                    <tr><th>Vocabulary (B1-C2)</th><th>Part of Speech</th><th>Vietnamese Meaning</th></tr>
                </thead>
                <tbody>
                    <tr><td>1. Global warming</td><td>Noun phrase</td><td>S·ª± n√≥ng l√™n to√†n c·∫ßu</td></tr>
                    <tr><td>2. Pollution</td><td>Noun (n)</td><td>S·ª± √¥ nhi·ªÖm</td></tr>
                    <tr><td>3. Atmosphere</td><td>Noun (n)</td><td>B·∫ßu kh√≠ quy·ªÉn</td></tr>
                    <tr><td>4. Influence</td><td>Verb/Noun</td><td>·∫¢nh h∆∞·ªüng, t√°c ƒë·ªông</td></tr>
                    <tr><td>5. Release</td><td>Verb (v)</td><td>Th·∫£i ra, gi·∫£i ph√≥ng</td></tr>
                    <tr><td>6. Destroy</td><td>Verb (v)</td><td>Ph√° h·ªßy, ti√™u h·ªßy</td></tr>
                    <tr><td>7. Unfavourably</td><td>Adverb (adv)</td><td>M·ªôt c√°ch b·∫•t l·ª£i, kh√¥ng thu·∫≠n l·ª£i</td></tr>
                    <tr><td>8. Glacier</td><td>Noun (n)</td><td>S√¥ng bƒÉng</td></tr>
                    <tr><td>9. Outcome</td><td>Noun (n)</td><td>H·∫≠u qu·∫£, k·∫øt qu·∫£</td></tr>
                    <tr><td>10. Attentive</td><td>Adjective (adj)</td><td>Ch√∫ √Ω, l∆∞u t√¢m, √¢n c·∫ßn</td></tr>
                </tbody>
            </table>

        </div>

        <div class="right-panel" style="position: relative;">
            <div id="quiz-overlay">
                <h3 style="color: var(--primary-color); text-align: center; font-size: 1.5rem;">Vui l√≤ng b·∫•m <br> B·∫ÆT ƒê·∫¶U T√çNH GI·ªú<br>ƒë·ªÉ l√†m b√†i nh√©! üëá</h3>
            </div>
            <div id="quiz-container">
                </div>
            <button class="btn-3d btn-submit" id="btn-submit" onclick="submitQuiz()" style="display: none;">üéâ N·ªòP B√ÄI C·ª¶A T·ªö üéâ</button>
        </div>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2 style="font-size: 2rem; color: var(--primary-color);">K·∫æT QU·∫¢ B√ÄI L√ÄM</h2>
            <div class="score-display" id="score-text">0/10</div>
            <h3 id="feedback-text" style="font-size: 1.5rem; margin-bottom: 30px;"></h3>
            <p style="color: #6B7280; margin-bottom: 20px;">L∆∞u √Ω: ƒê·ª´ng qu√™n ƒë·ªçc k·ªπ ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt ·ªü c√°c c√¢u sai ƒë·ªÉ r√∫t kinh nghi·ªám nh√©!</p>
            <button class="btn-3d" onclick="closeModal()">XEM L·∫†I B√ÄI GI·∫¢I ƒê√ÅP</button>
        </div>
    </div>

    <script>
        /* ================= D·ªÆ LI·ªÜU B√ÄI T·∫¨P V√Ä L·ªúI GI·∫¢I CHI TI·∫æT ================= */
        const questionsData = [
            {
                id: 21,
                text: "Question 21. What are two of the most dangerous storms which affect America?",
                options: [
                    { text: "Thunderstorms and hurricanes.", correct: false },
                    { text: "Hurricanes and tornadoes.", correct: true },
                    { text: "Hurricanes and typhoons.", correct: false },
                    { text: "Typhoons and thunderstorms.", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. D·ªãch nghƒ©a c√¢u h·ªèi:</strong> Hai trong s·ªë nh·ªØng c∆°n b√£o nguy hi·ªÉm nh·∫•t ·∫£nh h∆∞·ªüng ƒë·∫øn n∆∞·ªõc M·ªπ l√† g√¨?<br>
                    <strong>2. D·ªãch c√°c ƒë√°p √°n:</strong><br>
                    A. B√£o s·∫•m s√©t v√† l·ªëc xo√°y tr√™n bi·ªÉn (hurricanes).<br>
                    B. L·ªëc xo√°y tr√™n bi·ªÉn (hurricanes) v√† v√≤i r·ªìng (tornadoes).<br>
                    C. L·ªëc xo√°y tr√™n bi·ªÉn (hurricanes) v√† b√£o nhi·ªát ƒë·ªõi (typhoons).<br>
                    D. B√£o nhi·ªát ƒë·ªõi v√† b√£o s·∫•m s√©t.<br>
                    <strong>3. T·∫°i sao ch·ªçn B?</strong><br>
                    D·ª±a v√†o d·∫´n ch·ª©ng ngay c√¢u ƒë·∫ßu ti√™n c·ªßa b√†i ƒë·ªçc: <em>"Two of the most dangerous storms which affect America are <strong>hurricanes and tornadoes</strong>."</em> (Hai trong s·ªë nh·ªØng c∆°n b√£o nguy hi·ªÉm nh·∫•t ·∫£nh h∆∞·ªüng ƒë·∫øn n∆∞·ªõc M·ªπ l√† l·ªëc xo√°y (hurricanes) v√† v√≤i r·ªìng (tornadoes)). Do ƒë√≥, ƒë√°p √°n ƒë√∫ng l√† B.
                `
            },
            {
                id: 22,
                text: "Question 22. Which of the following is TRUE about tornadoes and hurricanes?",
                options: [
                    { text: "They are easier to control today than in the past.", correct: false },
                    { text: "They can be predicted more easily today than in the past.", correct: true },
                    { text: "They cannot be predicted today with greater accuracy.", correct: false },
                    { text: "They cannot be predicted with accuracy.", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. D·ªãch nghƒ©a c√¢u h·ªèi:</strong> ƒêi·ªÅu n√†o sau ƒë√¢y l√† ƒê√öNG v·ªÅ v√≤i r·ªìng v√† b√£o?<br>
                    <strong>2. T·∫°i sao ch·ªçn B?</strong><br>
                    D·ª±a v√†o c√¢u cu·ªëi c√πng c·ªßa ƒëo·∫°n 3: <em>"Today they can be predicted more easily than in the past, but they cannot be stopped or ignored."</em> (Ng√†y nay ch√∫ng c√≥ th·ªÉ ƒë∆∞·ª£c <strong>d·ª± b√°o d·ªÖ d√†ng h∆°n so v·ªõi qu√° kh·ª©</strong>, nh∆∞ng ch√∫ng kh√¥ng th·ªÉ b·ªã ngƒÉn ch·∫∑n ho·∫∑c ph·ªõt l·ªù).<br>
                    <strong>3. Ph√¢n t√≠ch c√°c ƒë√°p √°n sai:</strong><br>
                    - Lo·∫°i A (D·ªÖ ki·ªÉm so√°t/ngƒÉn ch·∫∑n h∆°n): B√†i ƒë·ªçc n√≥i "cannot be stopped" (kh√¥ng th·ªÉ ngƒÉn ch·∫∑n).<br>
                    - Lo·∫°i C, D (Kh√¥ng th·ªÉ d·ª± b√°o ch√≠nh x√°c): Sai s·ª± th·∫≠t v√¨ ƒëo·∫°n vƒÉn kh·∫≥ng ƒë·ªãnh "can be predicted more easily" (c√≥ th·ªÉ d·ª± b√°o d·ªÖ h∆°n).
                `
            },
            {
                id: 23,
                text: "Question 23. What does the word ‚ÄúThey‚Äù refer to?",
                options: [
                    { text: "Hurricanes", correct: false },
                    { text: "Tornadoes", correct: true },
                    { text: "Storms", correct: false },
                    { text: "Heavy objects", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. D·ªãch nghƒ©a c√¢u h·ªèi:</strong> T·ª´ "They" √°m ch·ªâ ƒëi·ªÅu g√¨?<br>
                    <strong>2. T·∫°i sao ch·ªçn B?</strong><br>
                    D·ª±a v√†o ƒëo·∫°n vƒÉn th·ª© 2, ta x√©t c√¢u ngay tr∆∞·ªõc t·ª´ "They": <em>"<strong>Tornadoes</strong> are capable of lifting quite heavy objects from the ground. <strong>They</strong> can pick up trees and cars right into the air..."</em> (<strong>V√≤i r·ªìng</strong> c√≥ kh·∫£ nƒÉng nh·∫•c b·ªïng nh·ªØng v·∫≠t th·ªÉ kh√° n·∫∑ng t·ª´ m·∫∑t ƒë·∫•t. <strong>Ch√∫ng</strong> c√≥ th·ªÉ cu·ªën c√¢y c·ªëi v√† √¥ t√¥ th·∫≥ng l√™n kh√¥ng trung...).<br>
                    ƒê·∫°i t·ª´ "They" thay th·∫ø cho ch·ªß ng·ªØ s·ªë nhi·ªÅu ·ªü c√¢u tr∆∞·ªõc ƒë√≥, ch√≠nh l√† "Tornadoes" (v√≤i r·ªìng).
                `
            },
            {
                id: 24,
                text: "Question 24. What is the major similarity between a hurricane and a tornado?",
                options: [
                    { text: "They can cause great damage to life and property.", correct: true },
                    { text: "They have either wind or speed.", correct: false },
                    { text: "They cover only a small area.", correct: false },
                    { text: "They are not accompanied by rain.", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. D·ªãch nghƒ©a c√¢u h·ªèi:</strong> ƒêi·ªÉm gi·ªëng nhau ch√≠nh gi·ªØa hurricane (b√£o) v√† tornado (v√≤i r·ªìng) l√† g√¨?<br>
                    <strong>2. T·∫°i sao ch·ªçn A?</strong><br>
                    D·ª±a v√†o c√¢u ƒë·∫ßu ti√™n c·ªßa ƒëo·∫°n 3: <em>"<strong>Both</strong> hurricanes and tornadoes <strong>cause millions of dollars worth of damage to life and property</strong> every year."</em> (<strong>C·∫£</strong> b√£o v√† v√≤i r·ªìng <strong>ƒë·ªÅu g√¢y ra thi·ªát h·∫°i h√†ng tri·ªáu ƒë√¥ la v·ªÅ t√≠nh m·∫°ng v√† t√†i s·∫£n</strong> m·ªói nƒÉm). <br>
                    ƒê√¢y ch√≠nh l√† s·ª± t√†n ph√° l·ªõn (great damage) m√† c·∫£ hai ƒë·ªÅu g√¢y ra -> ƒê√°p √°n A ch√≠nh x√°c.<br>
                    <strong>3. Ph√¢n t√≠ch c√°c ƒë√°p √°n sai:</strong><br>
                    - D: Sai v√¨ "tornadoes lack of rain" (v√≤i r·ªìng kh√¥ng c√≥ m∆∞a), nh∆∞ng "hurricanes carry driving rain" (b√£o th√¨ c√≥ m∆∞a l·ªõn). Ch√∫ng kh√¥ng gi·ªëng nhau ·ªü ƒëi·ªÉm n√†y.
                `
            },
            {
                id: 25,
                text: "Question 25. When do hurricanes usually develop?",
                options: [
                    { text: "Between July and October.", correct: true },
                    { text: "July and August only.", correct: false },
                    { text: "All year round.", correct: false },
                    { text: "From the seventh to the ninth month.", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. D·ªãch nghƒ©a c√¢u h·ªèi:</strong> C√°c c∆°n b√£o (hurricanes) th∆∞·ªùng ph√°t tri·ªÉn khi n√†o?<br>
                    <strong>2. T·∫°i sao ch·ªçn A?</strong><br>
                    D·∫´n ch·ª©ng n·∫±m r√µ r√†ng ·ªü ƒëo·∫°n 1, c√¢u √°p ch√≥t: <em>"Hurricanes usually develop <strong>between July and October</strong>."</em> (B√£o th∆∞·ªùng ph√°t tri·ªÉn trong kho·∫£ng t·ª´ th√°ng B·∫£y ƒë·∫øn th√°ng M∆∞·ªùi).<br>
                    Th√¥ng tin ƒë∆∞·ª£c n√™u tr·ª±c ti·∫øp (explicit info), kh√¥ng c·∫ßn suy lu·∫≠n -> Khoanh ngay A!
                `
            },
            {
                id: 26,
                text: "Question 26. One of the most important reasons for global warming is air (26) __________.",
                options: [
                    { text: "polluted", correct: false },
                    { text: "pollute", correct: false },
                    { text: "pollution", correct: true },
                    { text: "polluting", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. Ph√¢n t√≠ch ng·ªØ ph√°p / t·ª´ v·ª±ng:</strong><br>
                    - V·ªã tr√≠ c·∫ßn ƒëi·ªÅn ƒë·ª©ng sau danh t·ª´ "air" ƒë·ªÉ t·∫°o th√†nh m·ªôt c·ª•m danh t·ª´ gh√©p.<br>
                    - Ta c√≥ c·ª•m t·ª´ c·ªë ƒë·ªãnh: <strong>Air pollution</strong> (n): S·ª± √¥ nhi·ªÖm kh√¥ng kh√≠.<br>
                    - C√°c ƒë√°p √°n: <br>
                      A. polluted (adj/V-ed): b·ªã √¥ nhi·ªÖm<br>
                      B. pollute (v): l√†m √¥ nhi·ªÖm<br>
                      C. pollution (n): s·ª± √¥ nhi·ªÖm -> <strong>ƒê√öNG</strong><br>
                      D. polluting (V-ing)<br>
                    <strong>2. D·ªãch nghƒ©a:</strong> M·ªôt trong nh·ªØng l√Ω do quan tr·ªçng nh·∫•t c·ªßa s·ª± n√≥ng l√™n to√†n c·∫ßu l√† √¥ nhi·ªÖm kh√¥ng kh√≠.
                `
            },
            {
                id: 27,
                text: "Question 27. By burning oil, coal, gasoline, even natural gas, they add more carbon dioxide to the (27) __________.",
                options: [
                    { text: "atmosphere", correct: true },
                    { text: "coal", correct: false },
                    { text: "gasoline", correct: false },
                    { text: "oil", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. Ph√¢n t√≠ch t·ª´ v·ª±ng d·ª±a v√†o ng·ªØ c·∫£nh:</strong><br>
                    - C√¢u ph√≠a tr∆∞·ªõc ƒë·ªÅ c·∫≠p ƒë·∫øn vi·ªác "burning oil, coal, gasoline" (ƒë·ªët d·∫ßu, than, xƒÉng).<br>
                    - Vi·ªác ƒë·ªët nhi√™n li·ªáu h√≥a th·∫°ch s·∫Ω th·∫£i kh√≠ CO2 (carbon dioxide) v√†o ƒë√¢u?<br>
                    - ƒê√°p √°n logic duy nh·∫•t l√† <strong>atmosphere</strong> (b·∫ßu kh√≠ quy·ªÉn).<br>
                    <strong>2. D·ªãch nghƒ©a c√¢u:</strong> B·∫±ng c√°ch ƒë·ªët d·∫ßu, than, xƒÉng, th·∫≠m ch√≠ c·∫£ kh√≠ thi√™n nhi√™n, ch√∫ng th·∫£i th√™m kh√≠ carbon dioxide v√†o <strong>b·∫ßu kh√≠ quy·ªÉn</strong>.
                `
            },
            {
                id: 28,
                text: "Question 28. Cars also influence the atmosphere badly (28) __________ burning many liters of oil...",
                options: [
                    { text: "with", correct: false },
                    { text: "to", correct: false },
                    { text: "by", correct: true },
                    { text: "towards", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. Ph√¢n t√≠ch ng·ªØ ph√°p (Gi·ªõi t·ª´):</strong><br>
                    - Ta th·∫•y ph√≠a sau ch·ªó tr·ªëng l√† V-ing "burning".<br>
                    - ƒê·ªÉ ch·ªâ <strong>ph∆∞∆°ng th·ª©c / c√°ch th·ª©c</strong> l√†m m·ªôt vi·ªác g√¨ ƒë√≥, ta d√πng c·∫•u tr√∫c: <strong>by + V-ing</strong> (b·∫±ng c√°ch l√†m g√¨).<br>
                    - <em>V√≠ d·ª•: You can improve your English <strong>by reading</strong> books.</em><br>
                    <strong>2. D·ªãch nghƒ©a c√¢u:</strong> √î t√¥ c≈©ng ·∫£nh h∆∞·ªüng x·∫•u ƒë·∫øn b·∫ßu kh√≠ quy·ªÉn <strong>b·∫±ng c√°ch</strong> ƒë·ªët nhi·ªÅu l√≠t d·∫ßu...
                `
            },
            {
                id: 29,
                text: "Question 29. ...and releasing (29) __________ gases into the air.",
                options: [
                    { text: "harmful", correct: true },
                    { text: "good", correct: false },
                    { text: "useful", correct: false },
                    { text: "delicious", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. Ph√¢n t√≠ch ng·ªØ nghƒ©a:</strong><br>
                    - H√†nh ƒë·ªông "releasing gases" (th·∫£i kh√≠) t·ª´ vi·ªác ƒë·ªët d·∫ßu (ƒë·ªÅ c·∫≠p ·ªü c√¢u tr∆∞·ªõc) mang t√≠nh ti√™u c·ª±c.<br>
                    - Ph√¢n t√≠ch 4 t√≠nh t·ª´ b·ªï nghƒ©a cho "gases" (ch·∫•t kh√≠):<br>
                      A. harmful (adj): ƒë·ªôc h·∫°i, c√≥ h·∫°i -> <strong>ƒê√öNG ng·ªØ c·∫£nh</strong>.<br>
                      B. good (adj): t·ªët.<br>
                      C. useful (adj): h·ªØu √≠ch.<br>
                      D. delicious (adj): ngon mi·ªáng (d√πng cho ƒë·ªì ƒÉn).<br>
                    <strong>2. D·ªãch nghƒ©a c√¢u:</strong> ...v√† th·∫£i c√°c lo·∫°i kh√≠ <strong>ƒë·ªôc h·∫°i</strong> v√†o kh√¥ng kh√≠.
                `
            },
            {
                id: 30,
                text: "Question 30. And these are not all the outcomes of global (30) _________.",
                options: [
                    { text: "warming", correct: true },
                    { text: "raining", correct: false },
                    { text: "damage", correct: false },
                    { text: "destroyment", correct: false }
                ],
                explanation: `
                    <strong>PH·∫¶N GI·∫¢I TH√çCH CHI TI·∫æT:</strong><br>
                    <strong>1. Ph√¢n t√≠ch t·ª´ v·ª±ng (Collocation - C·ª•m t·ª´ c·ªë ƒë·ªãnh):</strong><br>
                    - Ch·ªß ƒë·ªÅ c·ªßa ƒëo·∫°n 2 (ƒë∆∞·ª£c nh·∫Øc ngay c√¢u ƒë·∫ßu ti√™n) l√† "Global warming".<br>
                    - Ta c√≥ c·ª•m danh t·ª´ c·ªë ƒë·ªãnh: <strong>Global warming</strong> (S·ª± n√≥ng l√™n to√†n c·∫ßu).<br>
                    - C√°c t·ª´ kh√°c gh√©p v√†o kh√¥ng c√≥ nghƒ©a h·ª£p l√Ω: global raining (m∆∞a to√†n c·∫ßu - kh√¥ng t·ªìn t·∫°i), global damage (thi·ªát h·∫°i to√†n c·∫ßu - kh√¥ng s√°t nghƒ©a ch·ªß ƒë·ªÅ b√†i vi·∫øt).<br>
                    <strong>2. D·ªãch nghƒ©a c√¢u:</strong> V√† ƒë√¢y ch∆∞a ph·∫£i l√† t·∫•t c·∫£ nh·ªØng h·∫≠u qu·∫£ c·ªßa s·ª± <strong>n√≥ng l√™n</strong> to√†n c·∫ßu.
                `
            }
        ];

        /* ================= GAME LOGIC & STATE ================= */
        let score = 0;
        let totalQuestions = questionsData.length;
        let answeredQuestions = 0;
        let isStarted = false;
        let timerInterval;
        let timeLeft = 600; // 10 minutes in seconds

        // Web Audio API context
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;

        // X√°o tr·ªôn m·∫£ng (Fisher-Yates Shuffle algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // T·∫°o √¢m thanh b·∫±ng Web Audio API
        function initAudio() {
            if (!audioCtx) audioCtx = new AudioContext();
        }

        function playSound(type) {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            if (type === 'correct') {
                // Ti·∫øng 'Ding' leng keng vui tai
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else {
                // Ti·∫øng 'T√©o t√®o t√®o' rung l·∫Øc
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(300, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(150, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        function shootConfetti() {
            const colors = ['#00D26A', '#FCD34D', '#8B5CF6', '#EF4444', '#3B82F6'];
            for (let i = 0; i < 50; i++) {
                let conf = document.createElement('div');
                conf.className = 'confetti';
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                conf.style.animationDuration = (Math.random() * 2 + 1) + 's';
                document.body.appendChild(conf);
                setTimeout(() => conf.remove(), 3000);
            }
        }

        function toggleTranslation(id) {
            const el = document.getElementById(id);
            if (el.style.display === "block") {
                el.style.display = "none";
            } else {
                el.style.display = "block";
            }
        }

        function renderQuestions() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = ''; // Clear old

            questionsData.forEach((q, index) => {
                // T·∫°o Card
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `card-${index}`;

                // Ti√™u ƒë·ªÅ c√¢u h·ªèi
                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.innerHTML = q.text;
                card.appendChild(qText);

                // Grid ch·ª©a l·ª±a ch·ªçn
                const optionsGrid = document.createElement('div');
                optionsGrid.className = 'options-grid';
                
                // Tr·ªôn l·ª±a ch·ªçn tr∆∞·ªõc khi hi·ªÉn th·ªã
                const shuffledOptions = shuffleArray([...q.options]);

                // C√°c k√Ω t·ª± A, B, C, D
                const labels = ['A', 'B', 'C', 'D'];

                shuffledOptions.forEach((opt, optIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerHTML = `<strong>${labels[optIndex]}.</strong> ${opt.text}`;
                    
                    btn.onclick = () => handleAnswerSelect(btn, opt, q, index, optionsGrid, card);
                    optionsGrid.appendChild(btn);
                });

                card.appendChild(optionsGrid);

                // Ph·∫ßn gi·∫£i th√≠ch (·∫©n ƒëi)
                const expBox = document.createElement('div');
                expBox.className = 'explanation-box';
                expBox.id = `exp-${index}`;
                expBox.innerHTML = q.explanation;
                card.appendChild(expBox);

                container.appendChild(card);
            });
        }

        function handleAnswerSelect(clickedBtn, selectedOption, questionObj, qIndex, gridElement, cardElement) {
            if (!isStarted) return; // Kh√¥ng cho l√†m n·∫øu ch∆∞a b·∫•m b·∫Øt ƒë·∫ßu

            // V√¥ hi·ªáu h√≥a t·∫•t c·∫£ n√∫t trong c√¢u n√†y
            const buttons = gridElement.querySelectorAll('button');
            buttons.forEach(b => b.disabled = true);

            answeredQuestions++;

            // T√¨m n√∫t ch·ª©a ƒë√°p √°n ƒë√∫ng (ƒë·ªÉ hi·ªÉn th·ªã d√π ch·ªçn sai)
            let correctBtn = null;

            if (selectedOption.correct) {
                // Tr·∫£ l·ªùi ƒê√öNG
                clickedBtn.classList.add('correct');
                playSound('correct');
                shootConfetti();
                score++;
            } else {
                // Tr·∫£ l·ªùi SAI
                clickedBtn.classList.add('wrong');
                clickedBtn.classList.add('shake');
                playSound('wrong');

                // T√¨m v√† highlight ƒë√°p √°n ƒë√∫ng lu√¥n
                buttons.forEach(b => {
                    // Ki·ªÉm tra xem text c·ªßa button n√†y c√≥ ch·ª©a text c·ªßa option ƒë√∫ng kh√¥ng (b·ªè qua A, B, C, D prefix)
                    const correctOpt = questionObj.options.find(o => o.correct);
                    if (b.innerHTML.includes(correctOpt.text)) {
                        b.classList.add('correct');
                    }
                });
            }

            // Hi·ªán gi·∫£i th√≠ch chi ti·∫øt
            const expBox = document.getElementById(`exp-${qIndex}`);
            expBox.style.display = 'block';

            // Hi·ªán n√∫t Submit n·∫øu l√†m xong h·∫øt
            if (answeredQuestions === totalQuestions) {
                document.getElementById('btn-submit').style.display = 'block';
            }
        }

        function formatTime(seconds) {
            const m = Math.floor(seconds / 60).toString().padStart(2, '0');
            const s = (seconds % 60).toString().padStart(2, '0');
            return `${m}:${s}`;
        }

        function startQuiz() {
            const btn = document.getElementById('btn-start');
            
            // Kh·ªüi t·∫°o AudioContext (y√™u c·∫ßu user interaction)
            initAudio();

            if (!isStarted) {
                // B·∫Øt ƒë·∫ßu
                isStarted = true;
                document.getElementById('quiz-overlay').style.display = 'none';
                btn.innerHTML = "‚è∏ T·∫†M D·ª™NG";
                btn.style.backgroundColor = "#F59E0B";
                btn.style.boxShadow = "0 5px 0 #D97706";
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    document.getElementById('timer').innerText = formatTime(timeLeft);
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        document.getElementById('timer').innerText = "00:00";
                        alert("‚è∞ ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m n·ªët ph·∫ßn c√≤n l·∫°i, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong t·ªëi ƒëa 10 ph√∫t th√¥i nha.");
                    }
                }, 1000);
            } else {
                // T·∫°m d·ª´ng
                isStarted = false;
                clearInterval(timerInterval);
                document.getElementById('quiz-overlay').style.display = 'flex';
                document.getElementById('quiz-overlay').innerHTML = '<h3 style="color: var(--primary-color); text-align: center; font-size: 1.5rem;">ƒêang t·∫°m d·ª´ng... ‚è∏<br>B·∫•m TI·∫æP T·ª§C ƒë·ªÉ l√†m b√†i ti·∫øp nh√©!</h3>';
                btn.innerHTML = "‚ñ∂ TI·∫æP T·ª§C";
                btn.style.backgroundColor = "var(--secondary-color)";
                btn.style.boxShadow = "0 5px 0 #047857";
            }
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            document.getElementById('score-text').innerText = `${score} / ${totalQuestions}`;
            
            let feedback = "";
            if (score === totalQuestions) {
                feedback = "üåü THI√äN T√ÄI! B·∫°n ƒë√£ l√†m ƒë√∫ng ho√†n to√†n. Qu√° xu·∫•t s·∫Øc! üåü";
                shootConfetti(); shootConfetti(); shootConfetti();
            } else if (score >= 7) {
                feedback = "üî• L√ÄM T·ªêT L·∫ÆM! K·ªπ nƒÉng ƒë·ªçc hi·ªÉu c·ªßa b·∫°n r·∫•t ch·∫Øc ch·∫Øn! üî•";
                shootConfetti();
            } else if (score >= 4) {
                feedback = "üí™ C·ªê L√äN NH√â! B·∫°n ƒë√£ n·∫Øm ƒë∆∞·ª£c √Ω c∆° b·∫£n, h√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n. üí™";
            } else {
                feedback = "üìö ƒê·ª™NG N·∫¢N CH√ç! H√£y xem k·ªπ l·∫°i ph·∫ßn t·ª´ v·ª±ng v√† l·ªùi gi·∫£i chi ti·∫øt b√™n d∆∞·ªõi nh√©! üìö";
            }
            
            document.getElementById('feedback-text').innerText = feedback;
            document.getElementById('result-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('result-modal').style.display = 'none';
            // Scroll to top of right panel so user can review
            document.querySelector('.right-panel').scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Init App
        window.onload = () => {
            renderQuestions();
        };

    </script>
</body>
</html>