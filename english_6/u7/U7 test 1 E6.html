<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 7: Television - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0; /* Hồng tím */
            --secondary: #00C9A7; /* Xanh ngọc */
            --correct: #00D26A; /* Xanh lá */
            --wrong: #FF4757; /* Đỏ cam */
            --bg: #F0F3F8;
            --card-bg: #FFFFFF;
            --text: #2C3E50;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(#8854c022 2px, transparent 2px), radial-gradient(#00c9a722 2px, transparent 2px);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            color: var(--text);
            margin: 0;
            padding: 20px;
            padding-bottom: 100px; /* Space for sticky footer */
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.2);
            border-bottom: 5px solid var(--primary);
        }

        h1 {
            color: var(--primary);
            font-weight: 800;
            margin: 0;
            font-size: 2rem;
            text-transform: uppercase;
        }

        h2 {
            color: var(--secondary);
            font-family: 'Quicksand', sans-serif;
            margin-top: 5px;
            font-size: 1.2rem;
        }

        /* CARD STYLE */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05), 0 15px 20px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            transition: transform 0.3s;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .question-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 15px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .reading-passage {
            background: #f8f9fa;
            border-left: 5px solid var(--secondary);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            font-family: 'Quicksand', sans-serif;
            line-height: 1.6;
        }

        /* OPTIONS */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            position: relative;
            box-shadow: 0 4px 0 #d0d0d0;
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #d0d0d0;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--secondary);
            background-color: #f0fffc;
            transform: scale(1.02);
        }

        .option-btn.selected {
            border-color: var(--primary);
            background-color: #f3e5f5;
        }

        .option-btn.correct {
            background-color: var(--correct) !important;
            color: white !important;
            border-color: #00b85c !important;
            box-shadow: 0 4px 0 #008f47 !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong) !important;
            color: white !important;
            border-color: #e04050 !important;
            box-shadow: 0 4px 0 #b33340 !important;
            animation: shake 0.5s;
        }

        /* EXPLANATION */
        .explanation {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #fff8e1;
            border-radius: 15px;
            border: 2px dashed #ffe082;
        }

        .explanation h4 {
            margin-top: 0;
            color: #f57f17;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-step {
            margin-bottom: 10px;
        }

        .explanation-step strong {
            color: var(--primary);
        }

        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .glossary-table th {
            background: var(--secondary);
            color: white;
            padding: 10px;
            text-align: left;
        }

        .glossary-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
        }

        /* CHECK BUTTON PER QUESTION */
        .check-btn-mini {
            margin-top: 15px;
            background: var(--secondary);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 0 #00967d;
            transition: all 0.2s;
            display: inline-block;
        }

        .check-btn-mini:hover {
            filter: brightness(1.1);
        }

        .check-btn-mini:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* FOOTER */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            text-align: center;
            z-index: 100;
            display: flex;
            justify-content: center;
            gap: 20px;
            align-items: center;
        }

        .submit-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 6px 0 #5e3a85;
            transition: all 0.2s;
        }

        .submit-btn:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        /* CONFETTI CSS */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes pop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-display {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
        }
        
        /* Traffic Sign SVG container */
        .sign-svg {
            display: block;
            margin: 0 auto 20px auto;
            max-width: 150px;
            height: auto;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Unit 7: Television</h1>
        <h2>Giáo viên: Ms Mai An ULIS - Test 01</h2>
    </header>

    <div id="quiz-container">
        </div>
</div>

<div class="sticky-footer">
    <div id="progress-text" style="font-weight: bold; color: var(--primary);">0/40 Hoàn thành</div>
    <button class="submit-btn" onclick="submitQuiz()">NỘP BÀI</button>
</div>

<div id="result-modal" class="modal">
    <div class="modal-content">
        <h2>Kết quả bài làm</h2>
        <div class="score-display" id="final-score">0/40</div>
        <p id="teacher-comment">Cố gắng lên nhé!</p>
        <button class="submit-btn" onclick="closeModal()">Xem lại chi tiết</button>
    </div>
</div>

<script>
    // --- DỮ LIỆU ĐỀ BÀI VÀ GIẢI THÍCH ---
    const quizData = [
        // PRONUNCIATION
        {
            id: 1,
            type: "phonetics",
            question: "Choose the word whose underlined part differs from the other three in pronunciation.",
            options: [
                { text: "<u>th</u>ief", value: "A" },
                { text: "<u>th</u>at", value: "B" },
                { text: "<u>th</u>in", value: "C" },
                { text: "nor<u>th</u>", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Chọn từ có phần gạch chân phát âm khác.",
                options: "A. thief /θiːf/ (kẻ trộm); B. that /ðæt/ (cái đó); C. thin /θɪn/ (mỏng); D. north /nɔːθ/ (phía bắc)",
                correct: "Đáp án B phát âm là /ð/ (âm hữu thanh, rung cổ họng).",
                wrong: "Các đáp án A, C, D đều phát âm là /θ/ (âm vô thanh, đặt lưỡi giữa răng thổi hơi)."
            }
        },
        {
            id: 2,
            type: "phonetics",
            question: "Choose the word whose underlined part differs from the other three in pronunciation.",
            options: [
                { text: "<u>th</u>ousand", value: "A" },
                { text: "<u>th</u>irsty", value: "B" },
                { text: "wi<u>th</u>", value: "C" },
                { text: "<u>th</u>eatre", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Chọn từ có phần gạch chân phát âm khác.",
                options: "A. thousand /θ/ (ngàn); B. thirsty /θ/ (khát); C. with /ð/ (với - thông dụng là /ð/ dù đôi khi đọc /θ/); D. theatre /θ/ (nhà hát)",
                correct: "Đáp án C 'with' thường được phát âm tận cùng là /ð/ (hữu thanh).",
                wrong: "Các từ còn lại đều bắt đầu bằng âm /θ/ (vô thanh)."
            }
        },
        // STRESS
        {
            id: 3,
            type: "stress",
            question: "Choose the word with different primary stress.",
            options: [
                { text: "clever", value: "A" },
                { text: "comedy", value: "B" },
                { text: "educate", value: "C" },
                { text: "compete", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Chọn từ có trọng âm khác.",
                options: "A. CLEver (âm 1); B. COmedy (âm 1); C. EduCATE (âm 1); D. comPETE (âm 2)",
                correct: "Đáp án D trọng âm rơi vào âm tiết thứ 2.",
                wrong: "Các từ còn lại trọng âm rơi vào âm tiết thứ 1."
            }
        },
        {
            id: 4,
            type: "stress",
            question: "Choose the word with different primary stress.",
            options: [
                { text: "exciting", value: "A" },
                { text: "entertain", value: "B" },
                { text: "romantic", value: "C" },
                { text: "fantastic", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Chọn từ có trọng âm khác.",
                options: "A. exCIting (âm 2); B. enterTAIN (âm 3); C. roMANtic (âm 2); D. fanTAStic (âm 2)",
                correct: "Đáp án B trọng âm rơi vào âm tiết thứ 3.",
                wrong: "Các từ còn lại trọng âm rơi vào âm tiết thứ 2."
            }
        },
        // GRAMMAR & VOCAB
        {
            id: 5,
            type: "grammar",
            question: "Do you watch Smile, the popular __________ for children?",
            options: [
                { text: "Show", value: "A" },
                { text: "channel", value: "B" },
                { text: "television", value: "C" },
                { text: "comedian", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Bạn có xem Smile, chương trình nổi tiếng cho trẻ em không?",
                options: "A. Show: Chương trình biểu diễn; B. Channel: Kênh; C. Television: Ti vi; D. Comedian: Diễn viên hài",
                correct: "Cụm từ 'TV show' (chương trình truyền hình) phù hợp với ngữ cảnh tên riêng 'Smile'.",
                wrong: "'Channel' là kênh (như VTV3), 'Television' là thiết bị hoặc ngành, 'Comedian' là người."
            }
        },
        {
            id: 6,
            type: "grammar",
            question: "Which _____ do you prefer: Jerry or Tom?",
            options: [
                { text: "Sport", value: "A" },
                { text: "film", value: "B" },
                { text: "character", value: "C" },
                { text: "game", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Bạn thích nhân vật nào hơn: Jerry hay Tom?",
                options: "A. Thể thao; B. Phim; C. Nhân vật; D. Trò chơi",
                correct: "Jerry và Tom là tên của hai nhân vật hoạt hình (characters).",
                wrong: "Jerry và Tom không phải là tên môn thể thao hay trò chơi."
            }
        },
        {
            id: 7,
            type: "grammar",
            question: "I love ________ like Happy Feet and Coco.",
            options: [
                { text: "Sport", value: "A" },
                { text: "Television", value: "B" },
                { text: "programmes", value: "C" }, // Adjusted based on prompt context usually implying films/programmes
                { text: "channel", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Tôi thích các chương trình/phim như Happy Feet và Coco.",
                options: "A. Thể thao; B. Truyền hình; C. Chương trình (bao gồm cả phim chiếu TV); D. Kênh",
                correct: "Happy Feet và Coco là tên phim, trong ngữ cảnh TV unit, 'programmes' là từ bao quát nhất chỉ các nội dung chiếu.",
                wrong: "Không phải thể thao hay tên kênh."
            }
        },
        {
            id: 8,
            type: "grammar",
            question: "According to the weather _______, there will be rain.",
            options: [
                { text: "Match", value: "A" },
                { text: "event", value: "B" },
                { text: "forecast", value: "C" },
                { text: "schedule", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Theo dự báo thời tiết, trời sẽ mưa.",
                options: "A. Trận đấu; B. Sự kiện; C. Dự báo; D. Lịch trình",
                correct: "Collocation (Cụm từ cố định): 'Weather forecast' nghĩa là dự báo thời tiết.",
                wrong: "Các từ khác không đi với 'weather' để tạo nghĩa phù hợp."
            }
        },
        {
            id: 9,
            type: "grammar",
            question: "_______ much are these shoes ? – They are eighty thousand dongs.",
            options: [
                { text: "What", value: "A" },
                { text: "Who", value: "B" },
                { text: "When", value: "C" },
                { text: "How", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Đôi giày này giá bao nhiêu?",
                options: "A. Cái gì; B. Ai; C. Khi nào; D. Như thế nào",
                correct: "Cấu trúc hỏi giá tiền: 'How much + to be + S?'.",
                wrong: "'What much' sai ngữ pháp."
            }
        },
        {
            id: 10,
            type: "grammar",
            question: "______ Mai and Lan are interested in listening to music.",
            options: [
                { text: "Because", value: "A" },
                { text: "Both", value: "B" },
                { text: "Neither", value: "C" },
                { text: "So", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Cả Mai và Lan đều thích nghe nhạc.",
                options: "A. Bởi vì; B. Cả hai; C. Không ai trong hai; D. Vì vậy",
                correct: "Cấu trúc 'Both ... and ...' (Cả ... và ...). Động từ 'are' số nhiều phù hợp.",
                wrong: "'Neither' đi với 'nor'. 'Because/So' là liên từ nối câu, không đứng đầu cụm danh từ làm chủ ngữ theo cách này."
            }
        },
        {
            id: 11,
            type: "grammar",
            question: "The book is _____ the adventure of three close friends.",
            options: [
                { text: "On", value: "A" },
                { text: "from", value: "B" },
                { text: "at", value: "C" },
                { text: "about", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Cuốn sách nói về cuộc phiêu lưu của ba người bạn thân.",
                options: "A. Trên; B. Từ; C. Tại; D. Về",
                correct: "Dùng 'about' để chỉ nội dung của sách, phim, câu chuyện.",
                wrong: "Các giới từ khác không chỉ nội dung."
            }
        },
        {
            id: 12,
            type: "grammar",
            question: "Tom: “ What kind of film do you prefer?” – Linda: “ _______”",
            options: [
                { text: "I don’t watch TV", value: "A" },
                { text: "I love Tom – the cat", value: "B" },
                { text: "Horror", value: "C" },
                { text: "Oh, watch TV is very interesting", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Tom: 'Bạn thích thể loại phim nào?'",
                options: "A. Tôi không xem TV; B. Tôi thích mèo Tom; C. Phim kinh dị; D. Ồ, xem TV thú vị lắm",
                correct: "Câu hỏi về 'kind of film' (thể loại) nên câu trả lời phải là một thể loại phim (Horror).",
                wrong: "Các câu khác trả lời sai trọng tâm câu hỏi."
            }
        },
        // GAP FILL 13-16
        {
            id: 13,
            type: "gapfill",
            question: "<b>NEW TV SHOW RELEASE!</b><br>We are delighted to announce that the highly anticipated show 'MIND QUEST' (13) ______ premiering at 7PM this Friday.",
            options: [
                { text: "is", value: "A" },
                { text: "are", value: "B" },
                { text: "am", value: "C" },
                { text: "be", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Chương trình 'MIND QUEST' (13) ___ ra mắt lúc 7h tối thứ Sáu.",
                options: "A. is; B. are; C. am; D. be",
                correct: "Chủ ngữ 'show MIND QUEST' là số ít -> dùng 'is'. Cấu trúc thì hiện tại tiếp diễn diễn tả lịch trình tương lai.",
                wrong: "Sai chia động từ."
            }
        },
        {
            id: 14,
            type: "gapfill",
            question: "...This show challenges contestants to solve tricky puzzles (14) ______ answer general knowledge questions.",
            options: [
                { text: "so", value: "A" },
                { text: "but", value: "B" },
                { text: "and", value: "C" },
                { text: "or", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "...giải các câu đố mẹo (14) VÀ trả lời câu hỏi kiến thức chung.",
                options: "A. vì vậy; B. nhưng; C. và; D. hoặc",
                correct: "Hai hành động 'solve' và 'answer' bổ sung cho nhau -> dùng 'and'.",
                wrong: "Không có sự đối lập (but) hay lựa chọn loại trừ (or)."
            }
        },
        {
            id: 15,
            type: "gapfill",
            question: "...The rewards are very (15) ______.",
            options: [
                { text: "entertainment", value: "A" },
                { text: "entertained", value: "B" },
                { text: "exciting", value: "C" },
                { text: "valuable", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Phần thưởng rất (15) có giá trị.",
                options: "A. sự giải trí; B. được giải trí; C. hào hứng; D. có giá trị",
                correct: "Nói về phần thưởng (rewards) thì tính từ 'valuable' (có giá trị) là phù hợp nhất.",
                wrong: "Exciting dùng cho tính chất cuộc chơi hơn là giá trị phần thưởng."
            }
        },
        {
            id: 16,
            type: "gapfill",
            question: "...Don't (16) ____ to tune in!",
            options: [
                { text: "forget", value: "A" },
                { text: "forgetful", value: "B" },
                { text: "forgetting", value: "C" },
                { text: "to forget", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Đừng quên đón xem!",
                options: "A. quên (V); B. hay quên (adj); C. đang quên; D. để quên",
                correct: "Sau trợ động từ 'Don't' là động từ nguyên thể.",
                wrong: "Sai từ loại hoặc dạng từ."
            }
        },
        // SORTING 17
        {
            id: 17,
            type: "grammar",
            question: "Rearrange the sentences:<br>a. They are all interesting.<br>b. One of them is Who Wants To Be a Millionaire?<br>c. In my free time, I often watch TV programmes with my family.<br>d. There are many programmes on different channels.",
            options: [
                { text: "a-b-c-d", value: "A" },
                { text: "c-b-a-d", value: "B" },
                { text: "c-a-b-d", value: "C" },
                { text: "c-d-a-b", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Sắp xếp đoạn văn hợp lý.",
                options: "Các trật tự sắp xếp.",
                correct: "(c) Giới thiệu thói quen xem TV -> (d) Giới thiệu có nhiều kênh -> (a) Nhận xét chung là thú vị -> (b) Kể tên cụ thể một chương trình.",
                wrong: "Các trật tự khác không theo logic: Tổng quát -> Cụ thể."
            }
        },
        {
            id: 18,
            type: "grammar",
            question: "Choose the sentence that can end the text (in Question 17) most suitably.",
            options: [
                { text: "I spend 3 hour a day watching TV.", value: "A" },
                { text: "Watching TV too much harms to our eyes.", value: "B" },
                { text: "Different channels are on different time.", value: "C" },
                { text: "Watching these programmes help us relax", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Câu kết nào phù hợp nhất?",
                options: "A. Tôi xem 3 tiếng/ngày; B. Xem nhiều hại mắt; C. Kênh khác nhau chiếu giờ khác nhau; D. Xem chương trình giúp thư giãn.",
                correct: "Đoạn văn đang nói về sở thích và sự thú vị (interesting), nên một câu kết tích cực về lợi ích (relax) là phù hợp nhất.",
                wrong: "Câu B tiêu cực, câu A và C không mang tính kết luận cảm xúc."
            }
        },
        // READING GAP FILL 19-24
        {
            id: 19,
            type: "gapfill",
            readingText: `TV program is a program of entertainment or enlightenment telecast by (19) _____. Television is (20) _____ wonderful invention of modem science. It has bought the world closer to us. The most popular TV programs (21) ____ songs, dances, dramas, films, games, and sports, etc. Many people like these programs (22) ____ they are highly (23) ______. But I like the programs on Discovery Channel because they are entertaining, (24) ____ and informative.`,
            glossary: [
                { word: "Enlightenment", type: "n", meaning: "Sự khai sáng/Giáo dục" },
                { word: "Telecast", type: "v", meaning: "Phát sóng" },
                { word: "Invention", type: "n", meaning: "Phát minh" },
                { word: "Informative", type: "adj", meaning: "Nhiều thông tin bổ ích" }
            ],
            question: "Question 19: ...telecast by (19) _____.",
            options: [
                { text: "programmes", value: "A" },
                { text: "television", value: "B" },
                { text: "animals", value: "C" },
                { text: "shows", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "...được phát sóng bởi truyền hình.",
                options: "A. chương trình; B. truyền hình; C. động vật; D. show diễn",
                correct: "'Telecast by television' (phát sóng bởi đài truyền hình/hệ thống truyền hình).",
                wrong: "Chương trình không thể được phát sóng bởi 'chương trình' hay 'động vật'."
            }
        },
        {
            id: 20,
            type: "gapfill",
            question: "Question 20: Television is (20) _____ wonderful invention...",
            options: [
                { text: "a", value: "A" },
                { text: "an", value: "B" },
                { text: "the", value: "C" },
                { text: "X (no article)", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Tivi là MỘT phát minh tuyệt vời...",
                options: "Mạo từ a, an, the, rỗng",
                correct: "Dùng 'a' trước danh từ đếm được số ít bắt đầu bằng phụ âm 'wonderful'. Chỉ một trong những phát minh.",
                wrong: "'An' dùng trước nguyên âm. 'The' dùng khi xác định (nhưng ở đây đang giới thiệu chung)."
            }
        },
        {
            id: 21,
            type: "gapfill",
            question: "Question 21: The most popular TV programs (21) ____ songs, dances...",
            options: [
                { text: "aren’t", value: "A" },
                { text: "am", value: "B" },
                { text: "is", value: "C" },
                { text: "are", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Các chương trình phổ biến nhất LÀ ca nhạc, nhảy múa...",
                options: "Động từ to be",
                correct: "Chủ ngữ 'programs' số nhiều -> dùng 'are'.",
                wrong: "'Is' dùng cho số ít."
            }
        },
        {
            id: 22,
            type: "gapfill",
            question: "Question 22: Many people like these programs (22) ____ they are highly...",
            options: [
                { text: "because", value: "A" },
                { text: "so", value: "B" },
                { text: "but", value: "C" },
                { text: "or", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Nhiều người thích... BỞI VÌ chúng...",
                options: "A. bởi vì; B. nên; C. nhưng; D. hoặc",
                correct: "Mệnh đề sau giải thích lý do (they are highly...) nên dùng 'because'.",
                wrong: "'So' chỉ kết quả, 'But' chỉ đối lập."
            }
        },
        {
            id: 23,
            type: "gapfill",
            question: "Question 23: ...because they are highly (23) ______.",
            options: [
                { text: "entertaining", value: "A" },
                { text: "shocking", value: "B" },
                { text: "terrible", value: "C" },
                { text: "awful", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "...bởi vì chúng có tính giải trí cao.",
                options: "A. giải trí; B. gây sốc; C. tồi tệ; D. kinh khủng",
                correct: "Người ta 'thích' (like) thì lý do phải tích cực -> entertaining.",
                wrong: "Các từ còn lại mang nghĩa tiêu cực."
            }
        },
        {
            id: 24,
            type: "gapfill",
            question: "Question 24: ...they are entertaining, (24) ____ and informative.",
            options: [
                { text: "educative", value: "A" },
                { text: "education", value: "B" },
                { text: "educate", value: "C" },
                { text: "educatively", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "...chúng mang tính giải trí, giáo dục và nhiều thông tin.",
                options: "A. có tính giáo dục (adj); B. nền giáo dục (n); C. giáo dục (v); D. một cách giáo dục (adv)",
                correct: "Cần một tính từ (adj) để song song với 'entertaining' và 'informative'.",
                wrong: "Sai từ loại."
            }
        },
        // REWRITE 25-28
        {
            id: 25,
            type: "grammar",
            question: "My sister can swim well. She can’t play badminton. (Combine sentences)",
            options: [
                { text: "My sister can swim well, but she can play badminton.", value: "A" },
                { text: "My sister can swim well, but she can’t play badminton.", value: "B" },
                { text: "My sister can swim well and she can’t play badminton.", value: "C" },
                { text: "My sister can swim well, she can’t play badminton.", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Chị tôi bơi giỏi. Chị ấy không biết chơi cầu lông.",
                options: "Các câu ghép.",
                correct: "Hai mệnh đề đối lập (giỏi cái này, không biết cái kia) -> Dùng liên từ 'but'. Giữ nguyên phủ định 'can't'.",
                wrong: "Câu A sai nghĩa (bỏ can't). Câu C dùng 'and' không hay bằng 'but'. Câu D thiếu liên từ (comma splice)."
            }
        },
        {
            id: 26,
            type: "grammar",
            question: "I have a lot of homework. I can’t enjoy the programme. (Combine sentences)",
            options: [
                { text: "I have a lot of homework, so I can’t enjoy the programme.", value: "A" },
                { text: "I have a lot of homework, I can’t enjoy the programme.", value: "B" },
                { text: "I have a lot of homework, but I can’t enjoy the programme.", value: "C" },
                { text: "I have a lot of homework because I can’t enjoy the programme.", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Tôi có nhiều bài tập. Tôi không thể xem chương trình.",
                options: "Các câu ghép.",
                correct: "Mối quan hệ Nguyên nhân - Kết quả -> Dùng 'so' (vì vậy).",
                wrong: "Câu B thiếu liên từ. Câu C dùng 'but' sai logic. Câu D dùng 'because' sai logic (Ngược nhân quả)."
            }
        },
        {
            id: 27,
            type: "grammar",
            question: "Make sentence: Why/ you/ want to check/ the TV schedule?",
            options: [
                { text: "Why did you wanted to check the TV schedule?", value: "A" },
                { text: "Why do you want to check the TV schedule?", value: "B" },
                { text: "Why you want to check the TV schedule?", value: "C" },
                { text: "Why are you wanting to check the TV schedule?", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Tại sao bạn muốn kiểm tra lịch phát sóng?",
                options: "Các câu hỏi.",
                correct: "Câu hỏi thì hiện tại đơn với động từ thường 'want' -> Mượn trợ động từ 'do'.",
                wrong: "Câu A sai 'did wanted' (dư ed). Câu C thiếu trợ động từ. Câu D dùng tiếp diễn với 'want' (động từ chỉ trạng thái thường không chia tiếp diễn)."
            }
        },
        {
            id: 28,
            type: "grammar",
            question: "Make sentence: Which/ cartoon/ be/ funnier,/ Doraemon or Pokemon?",
            options: [
                { text: "Which cartoon is funnier, Doraemon or Pokemon?", value: "A" },
                { text: "Which is the cartoon funnier, Doraemon or Pokemon?", value: "B" },
                { text: "Which cartoon funnier, Doraemon or Pokemon?", value: "C" },
                { text: "Which cartoon be funnier, Doraemon or Pokemon?", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Phim hoạt hình nào buồn cười hơn, Doraemon hay Pokemon?",
                options: "Các câu so sánh.",
                correct: "Cấu trúc: Which + N + is + adj-er...?",
                wrong: "Câu B sai trật tự từ. Câu C thiếu 'is'. Câu D chưa chia động từ 'be'."
            }
        },
        // SIGNS 29-30
        {
            id: 29,
            type: "sign",
            question: "What is the meaning of the sign below?",
            imageSVG: `<svg class="sign-svg" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" stroke="#cc0000" stroke-width="10" fill="white" />
                <path d="M45,25 Q55,25 55,35 L55,45 L65,45 L65,75 L55,75 L55,55 L45,55 L45,75 L35,75 L35,35 Q35,25 45,25" fill="black" />
                <circle cx="50" cy="30" r="5" fill="black" />
                <line x1="20" y1="20" x2="80" y2="80" stroke="#cc0000" stroke-width="8" />
            </svg>`,
            options: [
                { text: "You can walk here.", value: "A" },
                { text: "You can not walk here.", value: "B" },
                { text: "You can not ride a bike.", value: "C" },
                { text: "You can go alone here.", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Biển báo này nghĩa là gì?",
                options: "A. Được đi bộ; B. Không được đi bộ; C. Không được đi xe đạp; D. Được đi một mình.",
                correct: "Biển cấm (vòng tròn đỏ gạch chéo) hình người đi bộ -> Cấm đi bộ.",
                wrong: ""
            }
        },
        {
            id: 30,
            type: "sign",
            question: "What is the meaning of the sign below?",
            imageSVG: `<svg class="sign-svg" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" stroke="#cc0000" stroke-width="10" fill="white" />
                <path d="M30,60 L70,60 L70,50 L30,50 Z" fill="black" />
                <circle cx="35" cy="65" r="10" fill="black" />
                <circle cx="65" cy="65" r="10" fill="black" />
                <line x1="20" y1="20" x2="80" y2="80" stroke="#cc0000" stroke-width="8" />
            </svg>`,
            options: [
                { text: "You can’t ride motorbikes here.", value: "A" },
                { text: "You can ride motorbikes here.", value: "B" },
                { text: "You can fix motorbikes here.", value: "C" },
                { text: "You can buy motorbikes here.", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Biển báo này nghĩa là gì?",
                options: "A. Không được đi xe máy; B. Được đi xe máy; C. Sửa xe máy; D. Mua xe máy.",
                correct: "Biển cấm (vòng tròn đỏ gạch chéo) hình xe máy -> Cấm xe máy.",
                wrong: ""
            }
        },
        // READING COMPREHENSION 31-36
        {
            id: 31,
            type: "reading",
            readingText: `Television is an important invention of the 20th century. It has been so popular that we can’t imagine what life would be like if there were no television. Television is a major means of communication and entertainment. It brings pictures and sound from around the world into millions of homes. Through television, viewers can see and learn about people, places and things in distant lands. Television widens our knowledge by introducing new ideas which may lead us to new hobbies and recreations. In addition to the news, television provides us with a variety of programs that can satisfy every taste. Most people now seem to like spending their evenings watching television than to go out.`,
            glossary: [
                { word: "Means of communication", type: "n phr", meaning: "Phương tiện giao tiếp" },
                { word: "Distant", type: "adj", meaning: "Xa xôi" },
                { word: "Recreation", type: "n", meaning: "Sự giải trí/Tiêu khiển" },
                { word: "Variety", type: "n", meaning: "Sự đa dạng" },
                { word: "Satisfy", type: "v", meaning: "Làm thỏa mãn" }
            ],
            question: "Question 31. What is the main idea of the passage?",
            options: [
                { text: "Most people like watching TV than going out.", value: "A" },
                { text: "People have more new hobbies and recreations.", value: "B" },
                { text: "Every one can be satisfied every taste.", value: "C" },
                { text: "The importance of television.", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Ý chính của đoạn văn là gì?",
                options: "A. Thích xem TV hơn đi chơi; B. Có nhiều sở thích mới; C. Ai cũng được thỏa mãn; D. Tầm quan trọng của TV.",
                correct: "Câu đầu tiên 'Television is an important invention...' bao quát toàn bài.",
                wrong: "Các ý còn lại chỉ là chi tiết nhỏ hỗ trợ cho ý chính."
            }
        },
        {
            id: 32,
            type: "reading",
            question: "Question 32. Which of the followings is NOT one of benefits of television?",
            options: [
                { text: "Entertainment", value: "A" },
                { text: "Communication", value: "B" },
                { text: "Going out", value: "C" },
                { text: "Education", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Điều nào KHÔNG phải lợi ích của TV?",
                options: "A. Giải trí; B. Giao tiếp; C. Đi chơi; D. Giáo dục (học hỏi)",
                correct: "Bài đọc nói người ta xem TV *hơn là* đi ra ngoài (Most people now seem to like spending their evenings watching television than to go out).",
                wrong: "A, B, D đều được nhắc đến trong bài."
            }
        },
        {
            id: 33,
            type: "reading",
            question: "Question 33. Which of the followings is NOT TRUE according to the passage?",
            options: [
                { text: "Television is an important means of communication.", value: "A" },
                { text: "Television provides us with a variety or programs.", value: "B" },
                { text: "Most people don’t like watching TV in the evening.", value: "C" },
                { text: "People can learn many things through TV.", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Điều nào KHÔNG ĐÚNG theo bài đọc?",
                options: "C. Hầu hết mọi người không thích xem TV buổi tối.",
                correct: "Bài đọc nói: 'Most people now seem to like spending their evenings watching television...' (Hầu hết mọi người thích xem TV buổi tối). -> Câu C nói ngược lại.",
                wrong: "A, B, D đều đúng với thông tin trong bài."
            }
        },
        {
            id: 34,
            type: "reading",
            question: "Question 34. The word 'important' is CLOSEST in meaning to ___________.",
            options: [
                { text: "Interesting", value: "A" },
                { text: "entertaining", value: "B" },
                { text: "essential", value: "C" },
                { text: "educational", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Từ 'important' (quan trọng) gần nghĩa nhất với?",
                options: "A. Thú vị; B. Giải trí; C. Thiết yếu; D. Giáo dục",
                correct: "Important = Essential (Quan trọng/Thiết yếu).",
                wrong: ""
            }
        },
        {
            id: 35,
            type: "reading",
            question: "Question 35. The word 'distant' is OPPOSITE in meaning to _____________.",
            options: [
                { text: "Remote", value: "A" },
                { text: "far", value: "B" },
                { text: "near", value: "C" },
                { text: "rural", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Từ 'distant' (xa xôi) trái nghĩa với?",
                options: "A. Hẻo lánh; B. Xa; C. Gần; D. Nông thôn",
                correct: "Distant (Xa) >< Near (Gần).",
                wrong: "Remote và Far là từ đồng nghĩa."
            }
        },
        {
            id: 36,
            type: "reading",
            question: "Question 36. What is ONE way television benefits viewers?",
            options: [
                { text: "It only entertains people without providing knowledge.", value: "A" },
                { text: "It helps people learn about distant places and new ideas.", value: "B" },
                { text: "It makes people go out more often", value: "C" },
                { text: "It has no impact on people’s lives.", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Một cách TV mang lại lợi ích là gì?",
                options: "A. Chỉ giải trí không kiến thức; B. Giúp học về nơi xa và ý tưởng mới; C. Làm người ta đi chơi nhiều hơn; D. Không tác động gì.",
                correct: "Dẫn chứng: 'viewers can see and learn about people, places... in distant lands'.",
                wrong: ""
            }
        },
        // GAP FILL SENTENCE MATCHING 37-40
        {
            id: 37,
            type: "gapfill_match",
            readingText: `Bob the Builder is a British television program for children. (37) ______. It was first broadcast on 13th January 1999. It is developed by Hit Entertainment for BBC Television.<br><br>The show is about the life of a builder named Bob, (38) _______. Bob has a wife named Wendy and a cat named Pilchard. The slogan of the show is “Can we fix it? Yes, we can!”.<br><br>There are albums of songs from Bob the Builder. Out of these songs, (39) ______, “Can We Fix It” and “Mambo”. (40) _____. He also has some video games which are based on and created by Bob the builder.`,
            glossary: [
                { word: "Broadcast", type: "v", meaning: "Phát sóng" },
                { word: "Vehicle", type: "n", meaning: "Xe cộ" },
                { word: "Album", type: "n", meaning: "Album nhạc" }
            ],
            question: "Question 37. Choose the phrase for blank (37)",
            options: [
                { text: "A. It is broadcast on the BBC and around the world.", value: "A" },
                { text: "B. and his talking vehicles who help him fix things", value: "B" },
                { text: "C. There is also number 81 hit 'Big Fish Little Fish'", value: "C" },
                { text: "D. there are 2 number 1 hits", value: "D" }
            ],
            correct: "A",
            explanation: {
                translate: "Điền vào chỗ trống 37.",
                options: "Các câu lựa chọn A, B, C, D.",
                correct: "Vị trí này cần một câu giới thiệu chung về chương trình trước khi nói về ngày phát sóng đầu tiên. Câu A nói về việc phát sóng trên BBC là phù hợp nhất.",
                wrong: ""
            }
        },
        {
            id: 38,
            type: "gapfill_match",
            question: "Question 38. Choose the phrase for blank (38)",
            options: [
                { text: "A. It is broadcast on the BBC and around the world.", value: "A" },
                { text: "B. and his talking vehicles who help him fix things", value: "B" },
                { text: "C. There is also number 81 hit 'Big Fish Little Fish'", value: "C" },
                { text: "D. there are 2 number 1 hits", value: "D" }
            ],
            correct: "B",
            explanation: {
                translate: "Chương trình nói về cuộc đời thợ xây Bob, (38)...",
                correct: "Cần một mệnh đề bổ sung cho 'Bob'. Đáp án B 'và những chiếc xe biết nói...' mô tả nhân vật trong phim.",
                wrong: ""
            }
        },
        {
            id: 39,
            type: "gapfill_match",
            question: "Question 39. Choose the phrase for blank (39)",
            options: [
                { text: "A. It is broadcast on the BBC and around the world.", value: "A" },
                { text: "B. and his talking vehicles who help him fix things", value: "B" },
                { text: "C. There is also number 81 hit 'Big Fish Little Fish'", value: "C" },
                { text: "D. there are 2 number 1 hits", value: "D" }
            ],
            correct: "D",
            explanation: {
                translate: "Trong số những bài hát này, (39)...",
                correct: "Sau đó liệt kê 2 bài hát ('Can We Fix It' và 'Mambo'). Vậy đáp án D 'có 2 bài hit số 1' là lời dẫn phù hợp.",
                wrong: ""
            }
        },
        {
            id: 40,
            type: "gapfill_match",
            question: "Question 40. Choose the phrase for blank (40)",
            options: [
                { text: "A. It is broadcast on the BBC and around the world.", value: "A" },
                { text: "B. and his talking vehicles who help him fix things", value: "B" },
                { text: "C. There is also number 81 hit 'Big Fish Little Fish'", value: "C" },
                { text: "D. there are 2 number 1 hits", value: "D" }
            ],
            correct: "C",
            explanation: {
                translate: "Điền vào chỗ trống 40.",
                correct: "Đang liệt kê các bài hát hit. Đáp án C nhắc đến một bài hit khác 'Big Fish Little Fish' là mảnh ghép cuối cùng.",
                wrong: ""
            }
        }
    ];

    // --- LOGIC XỬ LÝ ---
    
    let userAnswers = {};
    let isSubmitted = false;

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        let html = '';

        quizData.forEach((q, index) => {
            let readingContent = '';
            if (q.readingText) {
                let glossaryHtml = '';
                if (q.glossary) {
                    glossaryHtml = `
                        <table class="glossary-table">
                            <thead><tr><th>Từ vựng</th><th>Loại từ</th><th>Nghĩa</th></tr></thead>
                            <tbody>
                                ${q.glossary.map(w => `<tr><td><b>${w.word}</b></td><td>${w.type}</td><td>${w.meaning}</td></tr>`).join('')}
                            </tbody>
                        </table>
                    `;
                }
                
                // Chỉ hiển thị bài đọc một lần nếu các câu hỏi liên tiếp cùng bài đọc (Logic đơn giản hóa: Hiển thị lại cho mỗi câu để dễ theo dõi trên mobile)
                readingContent = `
                    <div class="reading-passage">
                        ${q.readingText}
                        ${glossaryHtml}
                    </div>
                `;
            }

            let imageHtml = '';
            if (q.imageSVG) {
                imageHtml = q.imageSVG;
            }

            html += `
                <div class="card" id="card-${q.id}">
                    <div class="question-badge">Câu ${q.id}</div>
                    ${readingContent}
                    <div class="question-text">${imageHtml}${q.question}</div>
                    
                    <div class="options-grid">
                        ${q.options.map(opt => `
                            <button class="option-btn" onclick="selectOption(${q.id}, '${opt.value}', this)">
                                ${opt.value}. ${opt.text}
                            </button>
                        `).join('')}
                    </div>

                    <button class="check-btn-mini" id="check-${q.id}" onclick="checkSingleQuestion(${q.id})" style="display:none;">Kiểm tra ngay</button>

                    <div class="explanation" id="explain-${q.id}">
                        <h4><span style="font-size:1.5rem">💡</span> Giải thích chi tiết của cô Mai An:</h4>
                        <div class="explanation-step"><strong>Dịch câu hỏi:</strong> ${q.explanation.translate}</div>
                        <div class="explanation-step"><strong>Phân tích đáp án:</strong> ${q.explanation.options}</div>
                        <div class="explanation-step"><strong>Tại sao ĐÚNG:</strong> ${q.explanation.correct}</div>
                        <div class="explanation-step"><strong>Tại sao SAI:</strong> ${q.explanation.wrong}</div>
                    </div>
                </div>
            `;
        });

        container.innerHTML = html;
        updateProgress();
    }

    function selectOption(qId, value, btnElement) {
        if (isSubmitted) return; // Không cho chọn lại nếu đã nộp bài tổng
        
        // Check if this specific question is already checked
        const card = document.getElementById(`card-${qId}`);
        if (card.classList.contains('checked')) return;

        userAnswers[qId] = value;
        
        // UI Update
        const buttons = document.querySelectorAll(`#card-${qId} .option-btn`);
        buttons.forEach(b => b.classList.remove('selected'));
        btnElement.classList.add('selected');

        // Show "Check" button for this question
        document.getElementById(`check-${qId}`).style.display = 'inline-block';
        
        updateProgress();
    }

    function checkSingleQuestion(qId) {
        const question = quizData.find(q => q.id === qId);
        const selectedVal = userAnswers[qId];
        const card = document.getElementById(`card-${qId}`);
        const buttons = card.querySelectorAll('.option-btn');
        const explanation = document.getElementById(`explain-${qId}`);
        const checkBtn = document.getElementById(`check-${qId}`);

        if (!selectedVal) return;

        card.classList.add('checked');
        checkBtn.style.display = 'none'; // Hide check button after checking

        buttons.forEach(btn => {
            // Remove onClick
            btn.classList.add('disabled');
            const btnVal = btn.innerText.split('.')[0].trim(); // Extract A, B, C, D
            
            if (btnVal === question.correct) {
                btn.classList.add('correct');
            }
            if (btnVal === selectedVal && selectedVal !== question.correct) {
                btn.classList.add('wrong');
            }
        });

        // Show explanation
        explanation.style.display = 'block';

        // Effects
        if (selectedVal === question.correct) {
            triggerConfetti(card);
            // Có thể thêm âm thanh Ding
        } else {
            // Có thể thêm âm thanh Buzz
        }
    }

    function updateProgress() {
        const answeredCount = Object.keys(userAnswers).length;
        document.getElementById('progress-text').innerText = `${answeredCount}/${quizData.length} Hoàn thành`;
    }

    function submitQuiz() {
        if (confirm('Bạn có chắc chắn muốn nộp bài không?')) {
            isSubmitted = true;
            let score = 0;

            quizData.forEach(q => {
                // Tự động check hết các câu chưa check
                const card = document.getElementById(`card-${q.id}`);
                if (!card.classList.contains('checked')) {
                    // Nếu người dùng đã chọn nhưng chưa bấm Check
                    if (userAnswers[q.id]) {
                        checkSingleQuestion(q.id);
                    } else {
                        // Nếu chưa chọn gì cả -> Hiện đáp án đúng
                        const buttons = card.querySelectorAll('.option-btn');
                        buttons.forEach(btn => {
                            btn.classList.add('disabled');
                            if (btn.innerText.split('.')[0].trim() === q.correct) {
                                btn.classList.add('correct'); // Highlight đáp án đúng
                                btn.style.opacity = '0.7';
                            }
                        });
                        document.getElementById(`explain-${q.id}`).style.display = 'block';
                    }
                }

                // Tính điểm
                if (userAnswers[q.id] === q.correct) {
                    score++;
                }
            });

            // Show Modal
            document.getElementById('final-score').innerText = `${score}/${quizData.length}`;
            const comment = document.getElementById('teacher-comment');
            if (score === quizData.length) comment.innerText = "Xuất sắc! Cô Mai An rất tự hào về em! 🌟";
            else if (score >= 30) comment.innerText = "Làm tốt lắm! Cố gắng thêm chút nữa là hoàn hảo! 💪";
            else comment.innerText = "Cần ôn tập thêm nhé. Hãy xem kỹ phần giải thích bên dưới! 📚";
            
            document.getElementById('result-modal').style.display = 'flex';
            
            // Ẩn nút nộp bài
            document.querySelector('.submit-btn').style.display = 'none';
        }
    }

    function closeModal() {
        document.getElementById('result-modal').style.display = 'none';
        // Cuộn lên đầu
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function triggerConfetti(element) {
        for (let i = 0; i < 30; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.top = '-10px';
            confetti.style.backgroundColor = ['#ff0', '#f00', '#0f0', '#00f'][Math.floor(Math.random() * 4)];
            confetti.style.animationDuration = Math.random() * 2 + 1 + 's';
            element.appendChild(confetti);
            setTimeout(() => confetti.remove(), 3000);
        }
    }

    // Init
    renderQuiz();

</script>
</body>
</html>