<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra - Ms Mai An ULIS</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F3F9;
            --card-shadow: 0 8px 0 rgba(0,0,0,0.1);
            --btn-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #E3E3F3;
            background-image: radial-gradient(#8854C0 1px, transparent 1px), radial-gradient(#8854C0 1px, transparent 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* HEADER */
        header {
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border-bottom: 5px solid var(--primary-pink);
        }

        header h1 {
            margin: 0;
            color: var(--primary-pink);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
        }

        header p {
            margin: 5px 0 0;
            color: #666;
            font-size: 0.9rem;
        }

        /* CARD STYLE */
        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid #eee;
            position: relative;
        }

        .section-title {
            background: var(--primary-teal);
            color: white;
            display: inline-block;
            padding: 8px 20px;
            border-radius: 15px;
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 15px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* READING PASSAGE */
        .reading-box {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid var(--primary-pink);
            font-size: 1.05rem;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #444;
            text-align: justify;
        }

        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9rem;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .glossary-table th {
            background-color: var(--primary-pink);
            color: white;
            padding: 10px;
            text-align: left;
        }

        .glossary-table td {
            background-color: white;
            border-bottom: 1px solid #eee;
            padding: 10px;
            color: #555;
        }
        
        .glossary-table tr:nth-child(even) td {
            background-color: #fcfcfc;
        }

        .glossary-title {
            font-weight: 800;
            color: var(--primary-pink);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* QUESTIONS */
        .question-block {
            margin-bottom: 30px;
            border-top: 2px dashed #eee;
            padding-top: 20px;
        }

        .q-text {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .q-num {
            color: var(--primary-pink);
            font-weight: 900;
            margin-right: 5px;
        }

        /* OPTIONS BUTTONS */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .options-grid.tf-grid { /* True/False grid */
            grid-template-columns: 1fr 1fr;
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-bottom: 5px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            color: #555;
            cursor: pointer;
            transition: all 0.1s ease;
            text-align: left;
            position: relative;
        }

        .option-btn:hover:not(.disabled) {
            transform: scale(1.02);
            border-color: var(--primary-pink);
            color: var(--primary-pink);
        }

        .option-btn:active:not(.disabled) {
            transform: translateY(4px);
            border-bottom-width: 0px;
            margin-top: 5px; /* offset the border */
        }

        /* STATES */
        .option-btn.correct {
            background-color: var(--correct-green);
            color: white;
            border-color: #00a855;
            border-bottom-color: #008f48;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red);
            color: white;
            border-color: #d63030;
            border-bottom-color: #b02121;
            animation: shake 0.5s;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* EXPLANATION BOX */
        .explanation {
            display: none; /* Hidden by default */
            margin-top: 15px;
            background: #fff8e1;
            border: 2px solid #ffd54f;
            border-radius: 10px;
            padding: 15px;
            font-size: 0.95rem;
            position: relative;
        }
        
        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        .teacher-avatar {
            font-weight: 800;
            color: #f57f17;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .exp-section {
            margin-bottom: 8px;
        }
        .exp-label {
            font-weight: 700;
            color: #333;
            text-decoration: underline;
        }

        /* SUBMIT BUTTON */
        .submit-area {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 60px;
        }

        .btn-submit {
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            border-bottom: 6px solid #6a3a9c;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 10px 20px rgba(136, 84, 192, 0.3);
        }

        .btn-submit:hover {
            transform: scale(1.05);
        }

        .btn-submit:active {
            transform: translateY(6px);
            border-bottom-width: 0;
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-5deg); }
            50% { transform: translateX(5px) rotate(5deg); }
            75% { transform: translateX(-5px) rotate(-5deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            header h1 { font-size: 1.4rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Ms Mai An ULIS</h1>
        <p>Expert English Teacher & Web Developer</p>
        <div style="margin-top: 5px; font-weight: bold; color: var(--primary-teal);">
            <i class="fas fa-star"></i> Reading & Vocabulary Mastery <i class="fas fa-star"></i>
        </div>
    </header>

    <div class="card">
        <div class="section-title"><i class="fas fa-leaf"></i> Read & Decide: True or False</div>
        
        <div class="reading-box">
            In Australia it is now illegal to use traditional light bulbs. The whole country is changing to low energy bulbs for their lights. This will reduce the amount of energy that each home uses and will obviously be better for the environment. And Australia is not the only country doing this. Will your country be next?<br><br>
            So, what are the advantages and disadvantages of using the new low energy bulbs? Of course, the main advantage is for the environment. If all houses in Viet Nam used these bulbs, the effects on the environment would be the same as taking three quarters of a million cars off the road. Cost is another advantage. If we changed all the bulbs in our houses, we could cut our energy bills by fifty percent.<br><br>
            There are a few disadvantages, however. The light that these bulbs give is not exactly the same as light from traditional bulbs. It's colder and whiter. Some people don't like it very much. Also, the light doesn't come on immediately. After switching on the light, you have to wait a short time. Another disadvantage for some people is that at the moment you can't make these bulbs give a stronger or weaker light by using a special switch. But scientists say this will soon be possible.<br><br>
            But if we can help the environment by using these bulbs, are the disadvantages really such a problem?
        </div>

        <div class="glossary-title"><i class="fas fa-book-open"></i> B·∫£ng T·ª´ V·ª±ng "X·ªãn X√≤" (C1-C2)</div>
        <table class="glossary-table">
            <thead>
                <tr>
                    <th>Word (T·ª´ v·ª±ng)</th>
                    <th>Type (Lo·∫°i t·ª´)</th>
                    <th>Meaning (Nghƒ©a ti·∫øng Vi·ªát)</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Illegal</td><td>(adj)</td><td>B·∫•t h·ª£p ph√°p, tr√°i lu·∫≠t</td></tr>
                <tr><td>Low energy bulb</td><td>(n phrase)</td><td>B√≥ng ƒë√®n ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng</td></tr>
                <tr><td>Traditional</td><td>(adj)</td><td>Truy·ªÅn th·ªëng (b√≥ng ƒë√®n s·ª£i ƒë·ªët c≈©)</td></tr>
                <tr><td>Advantage</td><td>(n)</td><td>L·ª£i √≠ch, ∆∞u ƒëi·ªÉm</td></tr>
                <tr><td>Disadvantage</td><td>(n)</td><td>B·∫•t l·ª£i, nh∆∞·ª£c ƒëi·ªÉm</td></tr>
                <tr><td>Immediately</td><td>(adv)</td><td>Ngay l·∫≠p t·ª©c</td></tr>
                <tr><td>Reduce</td><td>(v)</td><td>Gi·∫£m b·ªõt</td></tr>
            </tbody>
        </table>

        <div id="quiz-part1"></div>
    </div>

    <div class="card">
        <div class="section-title"><i class="fas fa-smog"></i> Read & Multiple Choice</div>
        
        <div class="reading-box">
            Nowadays, one of the biggest problems facing the world is pollution. It has many effects on our daily lives that something must be done. There are three major types of pollution: air pollution, land pollution and water pollution. They are mainly caused by human activities.<br><br>
            Air pollution is the result of human activity where chemicals and other dangerous materials are released into the air. This happens through the release of carbon monoxide gas from exhaust pipes of motor vehicles. Other gases such as sulphur oxides are released from the burning of coal and oil. High air pollution levels can cause damage to the environment. It also brings discomfort to humans and other living organisms. In the long term, air pollution can cause serious breathing problems, lung cancer and heart disease.<br><br>
            Land pollution is the destruction of the earth's land surfaces. It is often caused by human activity such as careless disposal of wastes, over-mining of minerals and wrong use of land for planting. All these will affect our health in the long run. They will lead to all kinds of diseases such as cancer, heart disease and breathing problems. Land pollution also causes natural disasters such as flash floods and landslides.<br><br>
            Water pollution is the contamination of lakes, caused by human activities. It can be harmful to organisms and plants which live in the water. Some known causes of water pollution are factory wastes or leaking underground tanks. These can be chemical substances that are toxic. The polluted water can cause cholera, typhoid fever and the disappearance of biodiversity and aquatic ecosystems.
        </div>

        <div class="glossary-title"><i class="fas fa-book-open"></i> B·∫£ng T·ª´ V·ª±ng "X·ªãn X√≤" (Academic)</div>
        <table class="glossary-table">
            <thead>
                <tr>
                    <th>Word (T·ª´ v·ª±ng)</th>
                    <th>Type (Lo·∫°i t·ª´)</th>
                    <th>Meaning (Nghƒ©a ti·∫øng Vi·ªát)</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Contamination</td><td>(n)</td><td>S·ª± √¥ nhi·ªÖm (Academic word for pollution)</td></tr>
                <tr><td>Biodiversity</td><td>(n)</td><td>ƒêa d·∫°ng sinh h·ªçc</td></tr>
                <tr><td>Aquatic ecosystem</td><td>(n phrase)</td><td>H·ªá sinh th√°i d∆∞·ªõi n∆∞·ªõc</td></tr>
                <tr><td>Disposal</td><td>(n)</td><td>S·ª± v·ª©t b·ªè, th·∫£i b·ªè (r√°c th·∫£i)</td></tr>
                <tr><td>Exhaust pipe</td><td>(n)</td><td>·ªêng x·∫£ (kh√≥i xe)</td></tr>
                <tr><td>Organism</td><td>(n)</td><td>Sinh v·∫≠t s·ªëng</td></tr>
                <tr><td>Destruction</td><td>(n)</td><td>S·ª± ph√° h·ªßy</td></tr>
                <tr><td>Toxic</td><td>(adj)</td><td>ƒê·ªôc h·∫°i</td></tr>
            </tbody>
        </table>

        <div id="quiz-part2"></div>
    </div>

    <div class="submit-area">
        <button class="btn-submit" onclick="finishQuiz()">N·ªòP B√ÄI & XEM ƒêI·ªÇM <i class="fas fa-paper-plane"></i></button>
    </div>

</div>

<script>
    // AUDIO ENGINE (Web Audio API - No external files needed)
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            // Ding sound (High pitch sine wave)
            osc.type = 'sine';
            osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
            osc.frequency.exponentialRampToValueAtTime(1046.5, audioCtx.currentTime + 0.1); // C6
            gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } else {
            // Wrong sound (Low pitch saw wave)
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // DATA FOR QUIZ
    const questionsPart1 = [
        {
            id: 1,
            text: "In Australia you can choose which bulbs to use.",
            options: [
                { id: 'T', text: 'True', meaning: 'ƒê√∫ng' },
                { id: 'F', text: 'False', meaning: 'Sai' }
            ],
            correct: 'F',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> "·ªû √öc b·∫°n c√≥ th·ªÉ ch·ªçn lo·∫°i b√≥ng ƒë√®n n√†o ƒë·ªÉ s·ª≠ d·ª•ng."</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao SAI (False)?</span> Trong b√†i ƒë·ªçc d√≤ng ƒë·∫ßu ti√™n c√≥ vi·∫øt: "In Australia it is now <b>illegal to use traditional light bulbs</b>" (·ªû √öc hi·ªán nay vi·ªác s·ª≠ d·ª•ng b√≥ng ƒë√®n truy·ªÅn th·ªëng l√† b·∫•t h·ª£p ph√°p).<br>=> Nghƒ©a l√† b·∫°n KH√îNG ƒë∆∞·ª£c ch·ªçn d√πng b√≥ng ƒë√®n c≈© n·ªØa, b·∫Øt bu·ªôc ph·∫£i ƒë·ªïi.</div>
                <div class="exp-section">C√¥ Mai An nh·∫Øc: "Illegal" l√† t·ª´ kh√≥a quan tr·ªçng nh√©!</div>
            `
        },
        {
            id: 2,
            text: "It's expensive to use low energy bulbs.",
            options: [
                { id: 'T', text: 'True', meaning: 'ƒê√∫ng' },
                { id: 'F', text: 'False', meaning: 'Sai' }
            ],
            correct: 'F',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> "S·ª≠ d·ª•ng b√≥ng ƒë√®n ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng th√¨ ƒë·∫Øt ƒë·ªè."</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao SAI (False)?</span> B√†i ƒë·ªçc n√≥i v·ªÅ l·ª£i √≠ch chi ph√≠: "If we changed all the bulbs... we could <b>cut our energy bills by fifty percent</b>" (gi·∫£m h√≥a ƒë∆°n nƒÉng l∆∞·ª£ng xu·ªëng 50%). <br>=> Ti·∫øt ki·ªám ti·ªÅn ch·ª© kh√¥ng h·ªÅ ƒë·∫Øt!</div>
            `
        },
        {
            id: 3,
            text: "It takes longer for the light to come on.",
            options: [
                { id: 'T', text: 'True', meaning: 'ƒê√∫ng' },
                { id: 'F', text: 'False', meaning: 'Sai' }
            ],
            correct: 'T',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> "M·∫•t nhi·ªÅu th·ªùi gian h∆°n ƒë·ªÉ ƒë√®n s√°ng l√™n."</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao ƒê√öNG (True)?</span> D·∫´n ch·ª©ng: "the light doesn't come on immediately. After switching on the light, <b>you have to wait a short time</b>" (ƒë√®n kh√¥ng s√°ng ngay l·∫≠p t·ª©c... ph·∫£i ƒë·ª£i m·ªôt ch√∫t).</div>
            `
        },
        {
            id: 4,
            text: "The light from these bulbs is quite weak.",
            options: [
                { id: 'T', text: 'True', meaning: 'ƒê√∫ng' },
                { id: 'F', text: 'False', meaning: 'Sai' }
            ],
            correct: 'F',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> "√Ånh s√°ng t·ª´ nh·ªØng b√≥ng ƒë√®n n√†y kh√° y·∫øu."</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao SAI (False)?</span> B√†i ƒë·ªçc ch·ªâ m√¥ t·∫£ √°nh s√°ng l√†: "<b>colder and whiter</b>" (l·∫°nh h∆°n v√† tr·∫Øng h∆°n), ch·ª© KH√îNG n√≥i l√† y·∫øu (weak). <br>B√†i c≈©ng n√≥i hi·ªán t·∫°i ch∆∞a ch·ªânh ƒë∆∞·ª£c ƒë·ªô m·∫°nh y·∫øu (stronger or weaker), nh∆∞ng kh√¥ng kh·∫≥ng ƒë·ªãnh m·∫∑c ƒë·ªãnh l√† n√≥ y·∫øu.</div>
            `
        },
        {
            id: 5,
            text: "The light from traditional bulbs is different.",
            options: [
                { id: 'T', text: 'True', meaning: 'ƒê√∫ng' },
                { id: 'F', text: 'False', meaning: 'Sai' }
            ],
            correct: 'T',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> "√Ånh s√°ng t·ª´ b√≥ng ƒë√®n truy·ªÅn th·ªëng th√¨ kh√°c bi·ªát."</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao ƒê√öNG (True)?</span> D·∫´n ch·ª©ng r√µ r√†ng: "The light that these bulbs give is <b>not exactly the same as light from traditional bulbs</b>".</div>
            `
        }
    ];

    const questionsPart2 = [
        {
            id: 6,
            text: "What are the three major types of pollution mentioned in the text?",
            options: [
                { id: 'A', text: 'Air, Land, and Water pollution', vocab: '(n) Kh√¥ng kh√≠, ƒê·∫•t, N∆∞·ªõc' },
                { id: 'B', text: 'Noise, Light, and Air pollution', vocab: '(n) Ti·∫øng ·ªìn, √Ånh s√°ng' },
                { id: 'C', text: 'Water, Soil, and Plastic pollution', vocab: '(n) Nh·ª±a' },
                { id: 'D', text: 'Industrial, Urban, and Rural pollution', vocab: '(adj) C√¥ng nghi·ªáp, ƒê√¥ th·ªã' }
            ],
            correct: 'A',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> Ba lo·∫°i √¥ nhi·ªÖm ch√≠nh ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p trong b√†i l√† g√¨?</div>
                <div class="exp-section"><span class="exp-label">Ph√¢n t√≠ch:</span>
                A. √î nhi·ªÖm kh√¥ng kh√≠, ƒë·∫•t, n∆∞·ªõc.<br>
                B. √î nhi·ªÖm ti·∫øng ·ªìn, √°nh s√°ng, kh√¥ng kh√≠.<br>
                C. √î nhi·ªÖm n∆∞·ªõc, ƒë·∫•t tr·ªìng, r√°c th·∫£i nh·ª±a.<br>
                D. √î nhi·ªÖm c√¥ng nghi·ªáp, ƒë√¥ th·ªã, n√¥ng th√¥n.</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao ch·ªçn A?</span> D·∫´n ch·ª©ng ngay ƒëo·∫°n 1: "There are three major types of pollution: <b>air pollution, land pollution and water pollution</b>."</div>
            `
        },
        {
            id: 7,
            text: "How is air pollution primarily caused according to the text?",
            options: [
                { id: 'A', text: 'By natural disasters like volcanoes', vocab: 'Th·∫£m h·ªça thi√™n nhi√™n' },
                { id: 'B', text: 'By animals breathing', vocab: 'ƒê·ªông v·∫≠t h√¥ h·∫•p' },
                { id: 'C', text: 'By human activity releasing chemicals and exhaust gases', vocab: 'Ho·∫°t ƒë·ªông con ng∆∞·ªùi, h√≥a ch·∫•t' },
                { id: 'D', text: 'By planting too many trees', vocab: 'Tr·ªìng qu√° nhi·ªÅu c√¢y' }
            ],
            correct: 'C',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> Theo b√†i ƒë·ªçc, √¥ nhi·ªÖm kh√¥ng kh√≠ ch·ªß y·∫øu do ƒë√¢u?</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao ch·ªçn C?</span> D·∫´n ch·ª©ng ƒëo·∫°n 2: "Air pollution is the result of <b>human activity</b> where chemicals... are released... release of carbon monoxide gas from exhaust pipes". (Do ho·∫°t ƒë·ªông con ng∆∞·ªùi th·∫£i h√≥a ch·∫•t v√† kh√≠ th·∫£i).</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao sai?</span> A, B, D kh√¥ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn l√† nguy√™n nh√¢n ch√≠nh trong b√†i.</div>
            `
        },
        {
            id: 8,
            text: "What are some long-term health effects of air pollution?",
            options: [
                { id: 'A', text: 'Headache and fever', vocab: 'ƒêau ƒë·∫ßu, s·ªët' },
                { id: 'B', text: 'Breathing problems, lung cancer and heart disease', vocab: 'V·∫•n ƒë·ªÅ h√¥ h·∫•p, ung th∆∞ ph·ªïi, tim m·∫°ch' },
                { id: 'C', text: 'Stomach ache and flu', vocab: 'ƒêau b·ª•ng, c√∫m' },
                { id: 'D', text: 'Blindness and deafness', vocab: 'M√π v√† ƒëi·∫øc' }
            ],
            correct: 'B',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> Nh·ªØng ·∫£nh h∆∞·ªüng s·ª©c kh·ªèe l√¢u d√†i c·ªßa √¥ nhi·ªÖm kh√¥ng kh√≠ l√† g√¨?</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao ch·ªçn B?</span> D·∫´n ch·ª©ng cu·ªëi ƒëo·∫°n 2: "In the long term, air pollution can cause <b>serious breathing problems, lung cancer and heart disease</b>."</div>
            `
        },
        {
            id: 9,
            text: "What are mentioned as causes of land pollution?",
            options: [
                { id: 'A', text: 'Heavy rain and wind', vocab: 'M∆∞a l·ªõn v√† gi√≥' },
                { id: 'B', text: 'Careless disposal of wastes and over-mining', vocab: 'V·ª©t r√°c b·ª´a b√£i, khai th√°c kho√°ng s·∫£n qu√° m·ª©c' },
                { id: 'C', text: 'Building too many houses', vocab: 'X√¢y qu√° nhi·ªÅu nh√†' },
                { id: 'D', text: 'Using solar energy', vocab: 'D√πng nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi' }
            ],
            correct: 'B',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> Nguy√™n nh√¢n n√†o g√¢y √¥ nhi·ªÖm ƒë·∫•t ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p?</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao ch·ªçn B?</span> D·∫´n ch·ª©ng ƒëo·∫°n 3: "caused by human activity such as <b>careless disposal of wastes, over-mining of minerals</b>..." (v·ª©t r√°c b·ª´a b√£i, khai th√°c qu√° m·ª©c).</div>
            `
        },
        {
            id: 10,
            text: "What are some consequences of water pollution?",
            options: [
                { id: 'A', text: 'Cholera, typhoid fever and loss of biodiversity', vocab: 'D·ªãch t·∫£, th∆∞∆°ng h√†n, m·∫•t ƒëa d·∫°ng sinh h·ªçc' },
                { id: 'B', text: 'More fish and cleaner water', vocab: 'Nhi·ªÅu c√° h∆°n, n∆∞·ªõc s·∫°ch h∆°n' },
                { id: 'C', text: 'Increase in tourism', vocab: 'TƒÉng tr∆∞·ªüng du l·ªãch' },
                { id: 'D', text: 'Better aquatic ecosystems', vocab: 'H·ªá sinh th√°i t·ªët h∆°n' }
            ],
            correct: 'A',
            explanation: `
                <div class="exp-section"><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> M·ªôt s·ªë h·∫≠u qu·∫£ c·ªßa √¥ nhi·ªÖm n∆∞·ªõc l√† g√¨?</div>
                <div class="exp-section"><span class="exp-label">Ph√¢n t√≠ch:</span>
                A. D·ªãch t·∫£ (Cholera), s·ªët th∆∞∆°ng h√†n (Typhoid fever)... => Ti√™u c·ª±c, ƒë√∫ng b√†i.<br>
                B, C, D ƒë·ªÅu mang nghƒ©a t√≠ch c·ª±c => Sai ng·ªØ c·∫£nh.</div>
                <div class="exp-section"><span class="exp-label">T·∫°i sao ch·ªçn A?</span> D·∫´n ch·ª©ng c√¢u cu·ªëi c√πng: "The polluted water can cause <b>cholera, typhoid fever and the disappearance of biodiversity</b>..."</div>
            `
        }
    ];

    let score = 0;
    const totalQuestions = questionsPart1.length + questionsPart2.length;

    // RENDER FUNCTIONS
    function renderQuiz() {
        const container1 = document.getElementById('quiz-part1');
        const container2 = document.getElementById('quiz-part2');

        // Render Part 1
        questionsPart1.forEach((q, index) => {
            container1.innerHTML += createQuestionHTML(q, index + 1, 'tf-grid');
        });

        // Render Part 2
        questionsPart2.forEach((q, index) => {
            container2.innerHTML += createQuestionHTML(q, index + 6, '');
        });
    }

    function createQuestionHTML(q, num, gridClass) {
        let optionsHTML = '';
        q.options.forEach(opt => {
            let label = opt.id;
            // Add vocabulary annotation if exists
            let vocabText = opt.vocab ? `<br><small style="color:#888; font-style:italic; font-size:0.85em">${opt.vocab}</small>` : '';
            
            optionsHTML += `
                <button class="option-btn" onclick="checkAnswer(this, ${q.id}, '${opt.id}')">
                    <span style="font-weight:800; color:var(--primary-pink)">${label}.</span> ${opt.text}
                    ${vocabText}
                </button>
            `;
        });

        return `
            <div class="question-block" id="q-block-${q.id}">
                <div class="q-text"><span class="q-num">Q${num}:</span> ${q.text}</div>
                <div class="options-grid ${gridClass}" id="opt-container-${q.id}">
                    ${optionsHTML}
                </div>
                <div class="explanation" id="exp-${q.id}">
                    <div class="teacher-avatar"><i class="fas fa-chalkboard-teacher"></i> C√¥ Mai An gi·∫£i th√≠ch:</div>
                    ${q.explanation}
                </div>
            </div>
        `;
    }

    // CHECK LOGIC
    function checkAnswer(btn, qId, choice) {
        const container = document.getElementById(`opt-container-${qId}`);
        const buttons = container.getElementsByClassName('option-btn');
        const expBox = document.getElementById(`exp-${qId}`);
        
        // Disable all buttons in this question
        for(let b of buttons) {
            b.classList.add('disabled');
        }

        // Find data
        const allQuestions = [...questionsPart1, ...questionsPart2];
        const qData = allQuestions.find(q => q.id === qId);

        if(choice === qData.correct) {
            // CORRECT
            btn.classList.add('correct');
            playSound('correct');
            score++;
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
            btn.innerHTML += ` <i class="fas fa-check-circle"></i>`;
        } else {
            // WRONG
            btn.classList.add('wrong');
            playSound('wrong');
            btn.innerHTML += ` <i class="fas fa-times-circle"></i>`;
            
            // Highlight the correct one
            for(let b of buttons) {
                if(b.textContent.includes(`${qData.correct}.`) || b.innerHTML.includes(`${qData.correct}.`)) {
                    b.style.borderColor = 'var(--correct-green)';
                    b.style.backgroundColor = '#e8f5e9';
                    b.style.color = 'var(--correct-green)';
                }
            }
        }

        // Show Explanation
        expBox.classList.add('show');
    }

    // FINISH
    function finishQuiz() {
        const percentage = Math.round((score / totalQuestions) * 100);
        let msg = "";
        
        if(percentage === 100) msg = "Xu·∫•t s·∫Øc! ƒê·ªânh c·ªßa ch√≥p! üèÜ";
        else if(percentage >= 80) msg = "R·∫•t gi·ªèi! C·ªë th√™m x√≠u n·ªØa l√† 10/10 r·ªìi! üåü";
        else if(percentage >= 50) msg = "Kh√° t·ªët! Em nh·ªõ xem k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch nh√©! üí™";
        else msg = "C·ªë l√™n! ƒê·ª´ng n·∫£n, ƒë·ªçc k·ªπ gi·∫£i th√≠ch c·ªßa c√¥ Mai An l√† hi·ªÉu ngay! üî•";

        alert(`K·∫æT QU·∫¢ C·ª¶A B·∫†N:\n\nS·ªë c√¢u ƒë√∫ng: ${score}/${totalQuestions}\nƒêi·ªÉm s·ªë: ${percentage}/100\n\n${msg}`);
    }

    // Initialize
    renderQuiz();

</script>

</body>
</html>