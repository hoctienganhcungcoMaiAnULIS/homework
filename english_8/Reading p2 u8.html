<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ti·∫øng Anh (Part 2) - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #8854C0; /* T√≠m h·ªìng ch·ªß ƒë·∫°o */
            --primary-light: #a67dd6;
            --secondary: #00C9A7; /* Xanh ng·ªçc */
            --secondary-dark: #009e82;
            --correct: #00D26A; /* Xanh l√° - ƒê√∫ng */
            --wrong: #FF4757; /* ƒê·ªè cam - Sai */
            --bg-color: #f0f3f8;
            --text-color: #2c3e50;
            --card-bg: #ffffff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(var(--primary) 1px, transparent 1px), radial-gradient(var(--secondary) 1px, var(--bg-color) 1px);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            color: var(--text-color);
            padding-bottom: 120px; /* Ch·ª´a ch·ªó cho n√∫t n·ªôp b√†i */
        }

        /* --- Header --- */
        header {
            background: #fff;
            padding: 15px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 5px solid var(--secondary);
        }

        .teacher-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .teacher-avatar {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
        }

        /* --- Layout --- */
        .container {
            max-width: 900px;
            margin: 30px auto;
            padding: 0 15px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 25px;
            box-shadow: 0 10px 0 rgba(0,0,0,0.05);
            padding: 35px;
            margin-bottom: 50px;
            border: 2px solid #eef0f5;
            transition: transform 0.3s ease;
        }

        .card h2 {
            color: var(--primary);
            font-family: 'Quicksand', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 25px;
            border-bottom: 3px dashed #e0e0e0;
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- Reading Passage --- */
        .reading-passage {
            background-color: #f8f9ff;
            border-left: 6px solid var(--secondary);
            padding: 25px;
            border-radius: 12px;
            line-height: 1.8;
            font-size: 1.05rem;
            margin-bottom: 30px;
            color: #444;
            white-space: pre-line;
            text-align: justify;
        }

        /* --- Glossary Table --- */
        .glossary-box {
            margin: 25px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }
        
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .glossary-table thead {
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            color: white;
        }

        .glossary-table th {
            padding: 15px;
            text-align: left;
            font-family: 'Quicksand', sans-serif;
        }

        .glossary-table td {
            background-color: #fff;
            border-bottom: 1px solid #f0f0f0;
            padding: 12px 15px;
            color: #555;
            vertical-align: top;
        }

        .glossary-table tr:hover td {
            background-color: #fafafa;
        }

        .tag-level {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.75rem;
            font-weight: bold;
            color: white;
            margin-right: 5px;
        }
        .tag-c1 { background-color: #ff9f43; } /* Cam */
        .tag-c2 { background-color: #ee5253; } /* ƒê·ªè */
        .tag-b2 { background-color: #0abde3; } /* Xanh d∆∞∆°ng */

        /* --- Questions --- */
        .question-block {
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .question-text {
            font-weight: 700;
            font-size: 1.15rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        /* --- Options Grid --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        /* True/False specific grid */
        .tf-grid {
            grid-template-columns: 1fr 1fr;
        }

        @media (max-width: 650px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            padding: 18px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            color: #555;
            cursor: pointer;
            text-align: left;
            position: relative;
            box-shadow: 0 4px 0 #dcdcdc;
            transition: all 0.1s ease;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--secondary);
            background-color: #f0fffc;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 0 0 #ccc;
        }

        .option-btn.selected {
            border-color: var(--primary);
            background-color: #f3e5f5;
            box-shadow: 0 4px 0 var(--primary);
            color: var(--primary);
            font-weight: 800;
        }

        /* --- Checking States --- */
        .option-btn.correct {
            background-color: var(--correct) !important;
            color: white !important;
            border-color: #00a855 !important;
            box-shadow: 0 4px 0 #00a855 !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong) !important;
            color: white !important;
            border-color: #d6303e !important;
            box-shadow: 0 4px 0 #d6303e !important;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-6px); }
            50% { transform: translateX(6px); }
            75% { transform: translateX(-6px); }
            100% { transform: translateX(0); }
        }

        /* --- Check Button --- */
        .check-btn-wrapper {
            margin-top: 20px;
        }

        .check-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 800;
            border-radius: 50px;
            box-shadow: 0 5px 0 var(--secondary-dark);
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .check-btn:hover:not(:disabled) {
            filter: brightness(1.1);
            transform: translateY(-2px);
        }

        .check-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: none;
        }

        .check-btn:disabled {
            background: #cbd5e0;
            box-shadow: none;
            cursor: default;
        }

        /* --- Explanation Box --- */
        .explanation-box {
            display: none;
            margin-top: 25px;
            background: #fff;
            border: 2px solid var(--primary);
            border-radius: 16px;
            padding: 25px;
            position: relative;
            animation: slideIn 0.5s ease;
        }

        .explanation-box::before {
            content: "üí° GI·∫¢I TH√çCH CHI TI·∫æT";
            position: absolute;
            top: -14px;
            left: 20px;
            background: var(--primary);
            color: white;
            padding: 2px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 800;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .exp-section {
            margin-bottom: 10px;
        }

        .exp-label {
            font-weight: 800;
            color: var(--primary);
            margin-right: 5px;
        }

        .exp-wrong-label {
            font-weight: 800;
            color: var(--wrong);
            margin-right: 5px;
        }
        
        .translation-text {
            font-style: italic;
            color: #666;
            margin-bottom: 10px;
            display: block;
        }

        /* --- Footer & Submit --- */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            z-index: 999;
            border-top: 1px solid #eee;
        }

        .submit-all-btn {
            background: var(--primary);
            color: white;
            font-size: 1.3rem;
            font-weight: 900;
            padding: 15px 60px;
            border: none;
            border-radius: 60px;
            box-shadow: 0 8px 0 #6c429c;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-all-btn:hover {
            transform: scale(1.05) translateY(-3px);
        }
        
        .submit-all-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #6c429c;
        }

        /* --- Modal --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(44, 62, 80, 0.8);
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: #fff;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            border: 5px solid var(--secondary);
            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); opacity: 1; }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }

        .score-display {
            font-size: 3.5rem;
            font-weight: 900;
            color: var(--primary);
            margin: 20px 0;
            text-shadow: 3px 3px 0 #eee;
        }

        .close-modal {
            background: var(--secondary);
            color: white;
            padding: 12px 35px;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 5px 0 var(--secondary-dark);
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            margin-top: 15px;
        }
        
        .close-modal:hover { transform: translateY(-2px); }

        u { text-decoration: underline; text-decoration-thickness: 3px; text-decoration-color: var(--secondary); text-underline-offset: 3px; }

    </style>
</head>
<body>

    <header>
        <div class="teacher-badge">
            <div class="teacher-avatar">M</div>
            <span>Ms Mai An - ULIS</span>
        </div>
        <div style="font-weight: 700; color: #777;">Reading Comprehension Test (Part 2)</div>
    </header>

    <div class="container">
        
        <div class="card" id="card-ex1">
            <h2>üõçÔ∏è Exercise 1: Sara's Online Shopping</h2>
            
            <div class="reading-passage">
                ÔÇÇ <strong>Online shopping</strong><br><br>
                My name is Sara, and I love shopping online. I prefer mobile phone apps, but sometimes I use my computer. The phone is more convenient for me, and I can even do my shopping from bed.<br><br>
                I love shopping so much that I buy everything I need at home. I get food, electronics, books, and even large pieces of furniture like my sofa and bookshelves all online! But I still prefer getting clothes from a store so I can try them on to be sure they fit me fine.<br><br>
                Yesterday, I bought a birthday present for my mother, and it arrived today! That saves me a lot of time. I am a very busy person, and I am a little forgetful too. If I think of something I need, then it is wonderful that I can buy it that moment.<br><br>
                My friends aren‚Äôt as comfortable with buying things online as I am because they think that it can be dangerous. Of course, bad things sometimes happen, but I am very careful with all of my personal details. I think the biggest fear that people have with using their credit cards online is that someone will steal their number. It is important to be sure that the web page is secure. You can see this if the address has got an ‚Äús‚Äù in it, like https://. That ‚Äús‚Äù means it is safe.<br><br>
                People should not be afraid of shopping online. I think it will be the only way we will do our shopping in the future!
            </div>

            <div class="glossary-box">
                <table class="glossary-table">
                    <thead>
                        <tr>
                            <th colspan="3">üìö T·ª´ v·ª±ng "G·ªëi ƒê·∫ßu Gi∆∞·ªùng" (Glossary)</th>
                        </tr>
                        <tr>
                            <th width="30%">Word / Phrase</th>
                            <th width="15%">Type</th>
                            <th>Meaning & Context</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><b>Convenient</b></td>
                            <td>(adj)</td>
                            <td><span class="tag-level tag-b2">B2</span>Ti·ªán l·ª£i, thu·∫≠n ti·ªán</td>
                        </tr>
                        <tr>
                            <td><b>Personal details</b></td>
                            <td>(NP)</td>
                            <td>Th√¥ng tin c√° nh√¢n (t√™n, ƒë·ªãa ch·ªâ, s·ªë th·∫ª...)</td>
                        </tr>
                        <tr>
                            <td><b>Secure</b></td>
                            <td>(adj)</td>
                            <td><span class="tag-level tag-b2">B2</span>B·∫£o m·∫≠t, an to√†n (= Safe)</td>
                        </tr>
                        <tr>
                            <td><b>Steal</b></td>
                            <td>(v)</td>
                            <td>ƒê√°nh c·∫Øp, l·∫•y tr·ªôm</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div id="questions-ex1"></div>
        </div>

        <div class="card" id="card-ex3">
            <h2>üè¢ Exercise 3: Merriwether Mall (True or False)</h2>
            
            <div class="reading-passage">
                Gatesbridge‚Äôs new Merriwether Mall is opening this September. With an area of 320,000 square metres, the Merriwether Mall will be the biggest mall in the south west. It‚Äôs located close to the motorway, has its own bus station and 2,000 car parking spaces, so it is convenient for everyone.<br><br>
                The mall has five areas, all under cover. The largest, Main Street, is a shopping area on three floors. Here, you‚Äôll find all the major chain stores and department stores. You can buy fashion items and all the famous brand names.<br><br>
                Situated on two levels, the market square is where you can find traditional market stalls. On the lower floor, there are food stalls, including a butcher‚Äôs, baker‚Äôs, a fishmonger‚Äôs, greengrocer‚Äôs and delicatessen. On the upper floor, you will find stalls selling hardware and haberdashery.
            </div>

            <div class="glossary-box">
                <table class="glossary-table">
                    <thead>
                        <tr>
                            <th colspan="3">üåü T·ª´ v·ª±ng Ch·ªß ƒë·ªÅ Mua s·∫Øm Cao c·∫•p</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><b>Chain stores</b></td>
                            <td>(NP)</td>
                            <td>Chu·ªói c·ª≠a h√†ng (KFC, Zara, H&M...)</td>
                        </tr>
                        <tr>
                            <td><b>Delicatessen</b></td>
                            <td>(n)</td>
                            <td><span class="tag-level tag-c2">C2</span>C·ª≠a h√†ng ƒë·ªì ƒÉn ngon/ƒë·∫∑c s·∫£n (th∆∞·ªùng g·ªçi t·∫Øt l√† Deli)</td>
                        </tr>
                        <tr>
                            <td><b>Haberdashery</b></td>
                            <td>(n)</td>
                            <td><span class="tag-level tag-c2">C2</span>C·ª≠a h√†ng b√°n kim ch·ªâ, ph·ª• li·ªáu may m·∫∑c</td>
                        </tr>
                         <tr>
                            <td><b>Fishmonger</b></td>
                            <td>(n)</td>
                            <td>Ng∆∞·ªùi b√°n c√° / C·ª≠a h√†ng c√°</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div id="questions-ex3"></div>
        </div>

        <div class="card" id="card-ex4">
            <h2>üõí Exercise 4: Shopping Habits (Converted to Multiple Choice)</h2>
            <p style="margin-bottom: 20px; color: #666; font-style: italic;">*B√†i t·∫≠p n√†y ƒë√£ ƒë∆∞·ª£c Ms Mai An chuy·ªÉn t·ª´ d·∫°ng c√¢u h·ªèi m·ªü sang tr·∫Øc nghi·ªám ƒë·ªÉ c√°c em d·ªÖ √¥n t·∫≠p h∆°n nh√©!</p>

            <div class="reading-passage">
                Shopping is a necessary part of life which very few people can avoid. Some people go shopping more regularly than other people to browse products in shops even when they do not have much money. This is known as window shopping and allows people to plan ahead and save for the things they want to buy in the future or wait for the items to drop in price. Some people spend a lot of time looking for bargains while others do not think of the price and are happy to spend a lot.<br><br>
                Some people believe that the more expensive the item, the better the quality, but this is not always true. It is sensible to buy items which are affordable, but some people use a credit card or borrow money from the bank so that they can buy the items they really want rather than wait for it.<br><br>
                Sometimes shopping can be stressful when choosing a gift to buy for other people for a special occasion. It is common to buy a gift voucher so that a friend or loved one can go shopping themselves at their own convenience. Shopping online is often popular with people who have a busy lifestyle. People are able to order their necessary and luxury items from the comfort of their own home, or even on the move. Delivery is usually free and items are often cheaper than in shops on the high street. The only real problem is that the item description and quality may be more different than what they hoped for. This could mean the customer may become disappointed with the item they receive and will need to return it at their own cost. People who go to shops to do their shopping often use self-service payment machines. This usually saves time as the shopper does not need to join a long queue. However, it can be frustrating when the machine has a problem and the sales assistant is not always available to help.
            </div>

            <div class="glossary-box">
                <table class="glossary-table">
                    <thead>
                        <tr>
                            <th colspan="3">üî• T·ª´ v·ª±ng ƒÇn ƒëi·ªÉm (Glossary)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><b>Window shopping</b></td>
                            <td>(NP)</td>
                            <td>ƒêi xem h√†ng cho vui (ch·ª© kh√¥ng mua)</td>
                        </tr>
                        <tr>
                            <td><b>Bargain</b></td>
                            <td>(n)</td>
                            <td><span class="tag-level tag-b2">B2</span>M√≥n h·ªùi / M·∫∑c c·∫£</td>
                        </tr>
                        <tr>
                            <td><b>Affordable</b></td>
                            <td>(adj)</td>
                            <td>Gi√° c·∫£ ph·∫£i chƒÉng (v·ª´a t√∫i ti·ªÅn)</td>
                        </tr>
                        <tr>
                            <td><b>Gift voucher</b></td>
                            <td>(NP)</td>
                            <td>Phi·∫øu qu√† t·∫∑ng</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div id="questions-ex4"></div>
        </div>

    </div>

    <div class="sticky-footer">
        <button class="submit-all-btn" onclick="submitExam()">N·ªòP B√ÄI (SUBMIT)</button>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 style="color:var(--text-color)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-display" id="scoreValue">0/0</div>
            <p id="feedbackText" style="color:#777; font-size: 1.1rem; margin-bottom: 20px;">B·∫°n ch∆∞a l√†m b√†i!</p>
            <button class="close-modal" onclick="closeModal()">Xem chi ti·∫øt l·ªùi gi·∫£i</button>
        </div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(150, audioCtx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }
    </script>

    <script>
        const examData = {
            "ex1": [
                {
                    id: "ex1-q1",
                    text: "1. What is Sara‚Äôs favourite way of shopping?",
                    options: [
                        { t: "A. On her computer.", m: "Tr√™n m√°y t√≠nh c·ªßa c√¥ ·∫•y." },
                        { t: "B. On her phone.", m: "Tr√™n ƒëi·ªán tho·∫°i c·ªßa c√¥ ·∫•y." },
                        { t: "C. In a shop.", m: "T·∫°i c·ª≠a h√†ng." },
                        { t: "D. In an open-air market.", m: "T·∫°i ch·ª£ tr·ªùi." }
                    ],
                    correct: 1, // B
                    explanation: {
                        trans: "D·ªãch c√¢u h·ªèi: C√°ch mua s·∫Øm y√™u th√≠ch c·ªßa Sara l√† g√¨?",
                        whyRight: "D·∫´n ch·ª©ng trong b√†i: <i>'I prefer mobile phone apps... The phone is more convenient for me'</i> (T√¥i th√≠ch c√°c ·ª©ng d·ª•ng ƒëi·ªán tho·∫°i h∆°n... ƒêi·ªán tho·∫°i ti·ªán l·ª£i h∆°n cho t√¥i).",
                        whyWrong: "C√¥ ·∫•y c√≥ d√πng m√°y t√≠nh (computer) nh∆∞ng 'prefer phone'. C√¥ ·∫•y ch·ªâ ƒë·∫øn c·ª≠a h√†ng ƒë·ªÉ mua qu·∫ßn √°o ch·ª© kh√¥ng ph·∫£i c√°ch y√™u th√≠ch nh·∫•t cho m·ªçi th·ª©."
                    }
                },
                {
                    id: "ex1-q2",
                    text: "2. What doesn‚Äôt Sara buy online?",
                    options: [
                        { t: "A. Books", m: "S√°ch" },
                        { t: "B. Clothes", m: "Qu·∫ßn √°o" },
                        { t: "C. Furniture", m: "N·ªôi th·∫•t" },
                        { t: "D. Electronics", m: "ƒê·ªì ƒëi·ªán t·ª≠" }
                    ],
                    correct: 1, // B
                    explanation: {
                        trans: "D·ªãch c√¢u h·ªèi: Sara KH√îNG mua g√¨ tr·ª±c tuy·∫øn?",
                        whyRight: "D·∫´n ch·ª©ng: <i>'But I still prefer getting clothes from a store so I can try them on...'</i> (Nh∆∞ng t√¥i v·∫´n th√≠ch mua qu·∫ßn √°o ·ªü c·ª≠a h√†ng ƒë·ªÉ c√≥ th·ªÉ th·ª≠).",
                        whyWrong: "C√¥ ·∫•y n√≥i r√µ ƒë√£ mua <i>'food, electronics, books, and even large pieces of furniture'</i> online."
                    }
                },
                {
                    id: "ex1-q3",
                    text: "3. Why does Sara think online shopping is very convenient?",
                    options: [
                        { t: "A. It‚Äôs cheap.", m: "N√≥ r·∫ª." },
                        { t: "B. It‚Äôs slow.", m: "N√≥ ch·∫≠m." },
                        { t: "C. It‚Äôs fast.", m: "N√≥ nhanh." },
                        { t: "D. It‚Äôs beautiful.", m: "N√≥ ƒë·∫πp." }
                    ],
                    correct: 2, // C
                    explanation: {
                        trans: "D·ªãch c√¢u h·ªèi: T·∫°i sao Sara nghƒ© mua s·∫Øm tr·ª±c tuy·∫øn r·∫•t ti·ªán l·ª£i?",
                        whyRight: "D·∫´n ch·ª©ng: <i>'That saves me a lot of time... buy it that moment'</i> (N√≥ ti·∫øt ki·ªám cho t√¥i r·∫•t nhi·ªÅu th·ªùi gian... mua ngay l√∫c ƒë√≥). Ti·∫øt ki·ªám th·ªùi gian ƒë·ªìng nghƒ©a v·ªõi Nhanh (Fast).",
                        whyWrong: "B√†i ƒë·ªçc kh√¥ng nh·∫•n m·∫°nh v√†o y·∫øu t·ªë gi√° r·∫ª (cheap) hay ƒë·∫πp (beautiful) khi n√≥i v·ªÅ s·ª± ti·ªán l·ª£i."
                    }
                },
                {
                    id: "ex1-q4",
                    text: "4. What does ‚Äústeal‚Äù mean in paragraph 4?",
                    options: [
                        { t: "A. To shop online.", m: "Mua s·∫Øm tr·ª±c tuy·∫øn." },
                        { t: "B. To make public.", m: "C√¥ng khai." },
                        { t: "C. To use something that is not yours.", m: "S·ª≠ d·ª•ng c√°i g√¨ ƒë√≥ kh√¥ng ph·∫£i c·ªßa b·∫°n." },
                        { t: "D. To take without permission.", m: "L·∫•y m√† kh√¥ng ƒë∆∞·ª£c ph√©p." }
                    ],
                    correct: 3, // D
                    explanation: {
                        trans: "D·ªãch c√¢u h·ªèi: T·ª´ 'steal' trong ƒëo·∫°n 4 nghƒ©a l√† g√¨?",
                        whyRight: "ƒê·ªãnh nghƒ©a: <b>Steal</b> (Tr·ªôm c·∫Øp) = To take something without permission (L·∫•y m√† kh√¥ng xin ph√©p).",
                        whyWrong: "C√°c ƒë√°p √°n kh√°c kh√¥ng di·ªÖn t·∫£ ƒë√∫ng h√†nh ƒë·ªông tr·ªôm c·∫Øp."
                    }
                },
                {
                    id: "ex1-q5",
                    text: "5. Sara thinks that shopping online ______.",
                    options: [
                        { t: "A. is complex", m: "ph·ª©c t·∫°p" },
                        { t: "B. is often dangerous", m: "th∆∞·ªùng nguy hi·ªÉm" },
                        { t: "C. is always safe", m: "lu√¥n lu√¥n an to√†n" },
                        { t: "D. is safe if you are careful", m: "an to√†n n·∫øu b·∫°n c·∫©n th·∫≠n" }
                    ],
                    correct: 3, // D
                    explanation: {
                        trans: "D·ªãch c√¢u h·ªèi: Sara nghƒ© r·∫±ng mua s·∫Øm tr·ª±c tuy·∫øn...",
                        whyRight: "D·∫´n ch·ª©ng: <i>'Of course, bad things sometimes happen, but I am very careful... safe if the address has got an ‚Äús‚Äù'</i> (Dƒ© nhi√™n chuy·ªán x·∫•u ƒë√¥i khi x·∫£y ra, nh∆∞ng t√¥i r·∫•t c·∫©n th·∫≠n... an to√†n n·∫øu ƒë·ªãa ch·ªâ c√≥ ch·ªØ 's').",
                        whyWrong: "C√¥ ·∫•y kh√¥ng nghƒ© l√† 'always safe' (lu√¥n an to√†n) m√† c√≥ ƒëi·ªÅu ki·ªán (ph·∫£i c·∫©n th·∫≠n, xem ƒë·ªãa ch·ªâ web)."
                    }
                },
                {
                    id: "ex1-q6",
                    text: "6. Sara thinks that in the future ______.",
                    options: [
                        { t: "A. everybody will only shop online.", m: "m·ªçi ng∆∞·ªùi s·∫Ω ch·ªâ mua s·∫Øm tr·ª±c tuy·∫øn." },
                        { t: "B. Nobody will shop online.", m: "Kh√¥ng ai s·∫Ω mua s·∫Øm tr·ª±c tuy·∫øn." },
                        { t: "C. only shopping will be safer.", m: "ch·ªâ mua s·∫Øm s·∫Ω an to√†n h∆°n." },
                        { t: "D. a lot of people will shop online.", m: "r·∫•t nhi·ªÅu ng∆∞·ªùi s·∫Ω mua s·∫Øm tr·ª±c tuy·∫øn." }
                    ],
                    correct: 0, // A
                    explanation: {
                        trans: "D·ªãch c√¢u h·ªèi: Sara nghƒ© r·∫±ng trong t∆∞∆°ng lai...",
                        whyRight: "D·∫´n ch·ª©ng: <i>'I think it will be the <u>only way</u> we will do our shopping in the future!'</i> (T√¥i nghƒ© ƒë√≥ s·∫Ω l√† c√°ch DUY NH·∫§T ch√∫ng ta mua s·∫Øm trong t∆∞∆°ng lai). Only way = Everybody will only shop online.",
                        whyWrong: "ƒê√°p √°n D ƒë√∫ng v·ªÅ xu h∆∞·ªõng nh∆∞ng ch∆∞a ƒë·ªß m·∫°nh so v·ªõi √Ω 'only way' (c√°ch duy nh·∫•t) c·ªßa Sara."
                    }
                }
            ],
            "ex3": [
                {
                    id: "ex3-q1",
                    text: "1. The area of Merriwether Mall is 320,000 square metres.",
                    options: [
                        { t: "TRUE (ƒê√∫ng)", m: "" },
                        { t: "FALSE (Sai)", m: "" }
                    ],
                    correct: 0, // True
                    explanation: {
                        trans: "D·ªãch: Di·ªán t√≠ch c·ªßa Merriwether Mall l√† 320,000 m√©t vu√¥ng.",
                        whyRight: "D·∫´n ch·ª©ng: <i>'With an area of 320,000 square metres...'</i> -> Th√¥ng tin ho√†n to√†n tr√πng kh·ªõp.",
                        whyWrong: "Kh√¥ng c√≥ th√¥ng tin sai."
                    }
                },
                {
                    id: "ex3-q2",
                    text: "2. The Merriwether Mall is far from the motorway.",
                    options: [
                        { t: "TRUE (ƒê√∫ng)", m: "" },
                        { t: "FALSE (Sai)", m: "" }
                    ],
                    correct: 1, // False
                    explanation: {
                        trans: "D·ªãch: Merriwether Mall ·ªü XA ƒë∆∞·ªùng cao t·ªëc.",
                        whyRight: "C√¢u n√†y SAI v√¨ b√†i ƒë·ªçc n√≥i: <i>'It‚Äôs located <u>close to</u> the motorway'</i> (N√≥ n·∫±m G·∫¶N ƒë∆∞·ªùng cao t·ªëc).",
                        whyWrong: "Far from >< Close to."
                    }
                },
                {
                    id: "ex3-q3",
                    text: "3. The Merriwether Mall doesn‚Äôt have any bus stations.",
                    options: [
                        { t: "TRUE (ƒê√∫ng)", m: "" },
                        { t: "FALSE (Sai)", m: "" }
                    ],
                    correct: 1, // False
                    explanation: {
                        trans: "D·ªãch: Mall kh√¥ng c√≥ b·∫øn xe bu√Ωt n√†o.",
                        whyRight: "C√¢u n√†y SAI v√¨ b√†i ƒë·ªçc n√≥i: <i>'has its own bus station'</i> (c√≥ b·∫øn xe bu√Ωt ri√™ng c·ªßa n√≥).",
                        whyWrong: "Th√¥ng tin tr√°i ng∆∞·ª£c ho√†n to√†n."
                    }
                },
                {
                    id: "ex3-q4",
                    text: "4. Main Street is not the largest shopping area of the mall.",
                    options: [
                        { t: "TRUE (ƒê√∫ng)", m: "" },
                        { t: "FALSE (Sai)", m: "" }
                    ],
                    correct: 1, // False
                    explanation: {
                        trans: "D·ªãch: Main Street kh√¥ng ph·∫£i l√† khu mua s·∫Øm l·ªõn nh·∫•t.",
                        whyRight: "C√¢u n√†y SAI v√¨ b√†i ƒë·ªçc n√≥i: <i>'The largest, Main Street...'</i> (Khu l·ªõn nh·∫•t, Main Street...).",
                        whyWrong: "Kh·∫≥ng ƒë·ªãnh trong b√†i l√† 'largest'."
                    }
                },
                {
                    id: "ex3-q5",
                    text: "5. The traditional market stalls are on three floors.",
                    options: [
                        { t: "TRUE (ƒê√∫ng)", m: "" },
                        { t: "FALSE (Sai)", m: "" }
                    ],
                    correct: 1, // False
                    explanation: {
                        trans: "D·ªãch: C√°c qu·∫ßy ch·ª£ truy·ªÅn th·ªëng n·∫±m tr√™n 3 t·∫ßng.",
                        whyRight: "C√¢u n√†y SAI v√¨ b√†i ƒë·ªçc n√≥i: <i>'Situated on <u>two levels</u>, the market square is where you can find traditional market stalls.'</i> (N·∫±m tr√™n HAI t·∫ßng).",
                        whyWrong: "Three floors (3 t·∫ßng) l√† th√¥ng tin c·ªßa khu Main Street, kh√¥ng ph·∫£i Market Square."
                    }
                },
                {
                    id: "ex3-q6",
                    text: "6. The food stalls are on the lower floor of the market square.",
                    options: [
                        { t: "TRUE (ƒê√∫ng)", m: "" },
                        { t: "FALSE (Sai)", m: "" }
                    ],
                    correct: 0, // True
                    explanation: {
                        trans: "D·ªãch: C√°c qu·∫ßy ƒë·ªì ƒÉn n·∫±m ·ªü t·∫ßng d∆∞·ªõi c·ªßa khu ch·ª£.",
                        whyRight: "D·∫´n ch·ª©ng: <i>'On the lower floor, there are food stalls...'</i> (·ªû t·∫ßng d∆∞·ªõi, c√≥ c√°c qu·∫ßy th·ª±c ph·∫©m...).",
                        whyWrong: "Th√¥ng tin ch√≠nh x√°c."
                    }
                }
            ],
            "ex4": [
                {
                    id: "ex4-q1",
                    text: "1. Does shopping play an important role in life?",
                    options: [
                        { t: "A. No, it is totally avoidable.", m: "Kh√¥ng, ho√†n to√†n c√≥ th·ªÉ tr√°nh ƒë∆∞·ª£c." },
                        { t: "B. Yes, it is a necessary part of life.", m: "C√≥, n√≥ l√† m·ªôt ph·∫ßn t·∫•t y·∫øu c·ªßa cu·ªôc s·ªëng." },
                        { t: "C. Only for rich people.", m: "Ch·ªâ quan tr·ªçng v·ªõi ng∆∞·ªùi gi√†u." },
                        { t: "D. Only for women.", m: "Ch·ªâ quan tr·ªçng v·ªõi ph·ª• n·ªØ." }
                    ],
                    correct: 1, // B
                    explanation: {
                        trans: "D·ªãch: Mua s·∫Øm c√≥ ƒë√≥ng vai tr√≤ quan tr·ªçng trong cu·ªôc s·ªëng kh√¥ng?",
                        whyRight: "D·∫´n ch·ª©ng c√¢u ƒë·∫ßu ti√™n: <i>'Shopping is a necessary part of life which very few people can avoid.'</i> (Mua s·∫Øm l√† m·ªôt ph·∫ßn t·∫•t y·∫øu c·ªßa cu·ªôc s·ªëng...).",
                        whyWrong: "ƒê√°p √°n A sai v√¨ b√†i n√≥i 'very few people can avoid'. C v√† D kh√¥ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn."
                    }
                },
                {
                    id: "ex4-q2",
                    text: "2. What is the advantage of window shopping?",
                    options: [
                        { t: "A. To buy cheap things immediately.", m: "Mua ƒë·ªì r·∫ª ngay l·∫≠p t·ª©c." },
                        { t: "B. To show off money.", m: "ƒê·ªÉ khoe ti·ªÅn." },
                        { t: "C. To plan ahead and save for future purchases.", m: "ƒê·ªÉ l√™n k·∫ø ho·∫°ch v√† ti·∫øt ki·ªám cho vi·ªác mua sau n√†y." },
                        { t: "D. To waste time.", m: "ƒê·ªÉ gi·∫øt th·ªùi gian." }
                    ],
                    correct: 2, // C
                    explanation: {
                        trans: "D·ªãch: L·ª£i √≠ch c·ªßa 'window shopping' (ƒëi ng·∫Øm ƒë·ªì) l√† g√¨?",
                        whyRight: "D·∫´n ch·ª©ng: <i>'...allows people to plan ahead and save for the things they want to buy in the future...'</i> (cho ph√©p m·ªçi ng∆∞·ªùi l√™n k·∫ø ho·∫°ch tr∆∞·ªõc v√† ti·∫øt ki·ªám...).",
                        whyWrong: "Window shopping l√† ng·∫Øm ch·ª© kh√¥ng mua ngay (A sai). M·ª•c ƒë√≠ch l√† ti·∫øt ki·ªám ch·ª© kh√¥ng ph·∫£i khoe khoang (B sai)."
                    }
                },
                {
                    id: "ex4-q3",
                    text: "3. Is it common to buy a gift voucher?",
                    options: [
                        { t: "A. No, it is very rare.", m: "Kh√¥ng, n√≥ r·∫•t hi·∫øm." },
                        { t: "B. Yes, especially for special occasions.", m: "C√≥, ƒë·∫∑c bi·ªát l√† cho c√°c d·ªãp ƒë·∫∑c bi·ªát." },
                        { t: "C. Only online.", m: "Ch·ªâ mua online th√¥i." },
                        { t: "D. No, people hate vouchers.", m: "Kh√¥ng, m·ªçi ng∆∞·ªùi gh√©t phi·∫øu qu√† t·∫∑ng." }
                    ],
                    correct: 1, // B
                    explanation: {
                        trans: "D·ªãch: Vi·ªác mua phi·∫øu qu√† t·∫∑ng c√≥ ph·ªï bi·∫øn kh√¥ng?",
                        whyRight: "D·∫´n ch·ª©ng: <i>'It is common to buy a gift voucher so that a friend... can go shopping themselves'</i>. Common = Ph·ªï bi·∫øn.",
                        whyWrong: "Rare (hi·∫øm) tr√°i nghƒ©a v·ªõi Common."
                    }
                },
                {
                    id: "ex4-q4",
                    text: "4. Who is shopping online often popular with?",
                    options: [
                        { t: "A. People who have no money.", m: "Ng∆∞·ªùi kh√¥ng c√≥ ti·ªÅn." },
                        { t: "B. People who like crowded places.", m: "Ng∆∞·ªùi th√≠ch n∆°i ƒë√¥ng ƒë√∫c." },
                        { t: "C. Elderly people.", m: "Ng∆∞·ªùi gi√†." },
                        { t: "D. People who have a busy lifestyle.", m: "Ng∆∞·ªùi c√≥ l·ªëi s·ªëng b·∫≠n r·ªôn." }
                    ],
                    correct: 3, // D
                    explanation: {
                        trans: "D·ªãch: Mua s·∫Øm tr·ª±c tuy·∫øn th∆∞·ªùng ph·ªï bi·∫øn v·ªõi ai?",
                        whyRight: "D·∫´n ch·ª©ng: <i>'Shopping online is often popular with people who have a busy lifestyle.'</i> (Mua s·∫Øm online th∆∞·ªùng ph·ªï bi·∫øn v·ªõi ng∆∞·ªùi c√≥ l·ªëi s·ªëng b·∫≠n r·ªôn).",
                        whyWrong: "B√†i ƒë·ªçc ch·ªâ ƒë√≠ch danh nh√≥m 'busy lifestyle'."
                    }
                },
                {
                    id: "ex4-q5",
                    text: "5. What do people who go to shops to do their shopping often use?",
                    options: [
                        { t: "A. Cash only.", m: "Ch·ªâ d√πng ti·ªÅn m·∫∑t." },
                        { t: "B. Sales assistants all the time.", m: "Lu√¥n d√πng nh√¢n vi√™n b√°n h√†ng." },
                        { t: "C. Self-service payment machines.", m: "M√°y thanh to√°n t·ª± ƒë·ªông." },
                        { t: "D. Their phones.", m: "ƒêi·ªán tho·∫°i c·ªßa h·ªç." }
                    ],
                    correct: 2, // C
                    explanation: {
                        trans: "D·ªãch: Nh·ªØng ng∆∞·ªùi ƒëi ƒë·∫øn c·ª≠a h√†ng mua s·∫Øm th∆∞·ªùng s·ª≠ d·ª•ng c√°i g√¨?",
                        whyRight: "D·∫´n ch·ª©ng ƒëo·∫°n cu·ªëi: <i>'People who go to shops... often use self-service payment machines.'</i>",
                        whyWrong: "B√†i ƒë·ªçc nh·∫Øc ƒë·∫øn vi·ªác d√πng m√°y t·ª± ƒë·ªông ƒë·ªÉ ti·∫øt ki·ªám th·ªùi gian, tr√°nh x·∫øp h√†ng."
                    }
                }
            ]
        };

        // RENDER FUNCTION
        function renderQuestions() {
            for (const [key, questions] of Object.entries(examData)) {
                const container = document.getElementById(`questions-${key}`);
                
                questions.forEach((q, index) => {
                    const block = document.createElement('div');
                    block.className = 'question-block';
                    block.id = q.id;
                    
                    let html = `<div class="question-text">${q.text}</div>`;
                    html += `<div class="options-grid ${q.options.length === 2 ? 'tf-grid' : ''}">`;
                    
                    q.options.forEach((opt, idx) => {
                        html += `
                        <button class="option-btn" onclick="handleSelect('${q.id}', ${idx})">
                            ${opt.t}
                            ${opt.m ? `<br><small style="color:#888; font-size:0.9em">(${opt.m})</small>` : ''}
                        </button>`;
                    });

                    html += `</div>`;
                    
                    // Button Check
                    html += `
                    <div class="check-btn-wrapper">
                        <button class="check-btn" id="btn-${q.id}" onclick="checkAnswer('${key}', ${index}, '${q.id}')">
                            Ki·ªÉm tra & Xem gi·∫£i th√≠ch
                        </button>
                    </div>`;

                    // Explanation
                    html += `
                    <div class="explanation-box" id="exp-${q.id}">
                        <div class="translation-text">üìù ${q.explanation.trans}</div>
                        <div class="exp-section">
                            <span class="exp-label">‚úÖ T·∫†I SAO ƒê√öNG?</span>
                            <span>${q.explanation.whyRight}</span>
                        </div>
                        <div class="exp-section">
                            <span class="exp-wrong-label">‚ùå T·∫†I SAO SAI?</span>
                            <span>${q.explanation.whyWrong}</span>
                        </div>
                    </div>`;

                    block.innerHTML = html;
                    container.appendChild(block);
                });
            }
        }

        // STATE MANAGEMENT
        const userState = {}; // { questionId: selectedIndex }
        const checkedState = {}; // { questionId: true }

        function handleSelect(qId, optionIdx) {
            if (checkedState[qId]) return; // Lock if checked

            userState[qId] = optionIdx;
            
            // UI Update
            const parent = document.getElementById(qId);
            const btns = parent.querySelectorAll('.option-btn');
            btns.forEach((btn, idx) => {
                if (idx === optionIdx) btn.classList.add('selected');
                else btn.classList.remove('selected');
            });
        }

        function checkAnswer(examKey, qIndex, qId) {
            if (userState[qId] === undefined) {
                alert("B·∫°n ∆°i, h√£y ch·ªçn m·ªôt ƒë√°p √°n tr∆∞·ªõc nh√©!");
                return;
            }

            const correctIdx = examData[examKey][qIndex].correct;
            const selectedIdx = userState[qId];
            const parent = document.getElementById(qId);
            const btns = parent.querySelectorAll('.option-btn');
            const expBox = document.getElementById(`exp-${qId}`);
            const checkBtn = document.getElementById(`btn-${qId}`);

            checkedState[qId] = true;
            checkBtn.disabled = true;
            checkBtn.innerText = "ƒê√£ ki·ªÉm tra";

            btns[selectedIdx].classList.remove('selected');

            if (selectedIdx === correctIdx) {
                btns[selectedIdx].classList.add('correct');
                playSound('correct');
                fireConfetti(checkBtn);
            } else {
                btns[selectedIdx].classList.add('wrong');
                btns[correctIdx].classList.add('correct'); // Show correct answer
                playSound('wrong');
            }

            expBox.style.display = 'block';
        }

        function fireConfetti(element) {
            const rect = element.getBoundingClientRect();
            const x = (rect.left + rect.width / 2) / window.innerWidth;
            const y = (rect.top + rect.height / 2) / window.innerHeight;
            
            confetti({
                particleCount: 60,
                spread: 60,
                origin: { x, y },
                colors: ['#8854C0', '#00C9A7', '#FFeb3b']
            });
        }

        function submitExam() {
            let total = 0;
            let correct = 0;
            let unansweredCount = 0;

            for (const key in examData) {
                examData[key].forEach((q, index) => {
                    total++;
                    const uAns = userState[q.id];
                    
                    // Auto check if not checked yet but answered
                    if (!checkedState[q.id] && uAns !== undefined) {
                        checkAnswer(key, index, q.id);
                    }

                    if (uAns === q.correct) correct++;
                    
                    // Handle completely unanswered
                    if (uAns === undefined) {
                        unansweredCount++;
                        const parent = document.getElementById(q.id);
                        parent.style.border = "2px solid #FFCC00";
                        // Auto show explanation for learning
                        document.getElementById(`exp-${q.id}`).style.display = 'block';
                        document.getElementById(`btn-${q.id}`).disabled = true;
                        
                        // Show correct answer visually
                        const btns = parent.querySelectorAll('.option-btn');
                        btns[q.correct].classList.add('correct');
                    }
                });
            }

            const modal = document.getElementById('resultModal');
            const scoreText = document.getElementById('scoreValue');
            const feedback = document.getElementById('feedbackText');

            scoreText.innerText = `${correct}/${total}`;
            
            if (correct === total) {
                feedback.innerText = "üåü Xu·∫•t s·∫Øc! B·∫°n ƒë√∫ng 100%! Ms Mai An r·∫•t t·ª± h√†o!";
                confetti({ particleCount: 200, spread: 120, origin: { y: 0.6 } });
            } else if (correct > total * 0.7) {
                feedback.innerText = "üí™ L√†m t·ªët l·∫Øm! Ch·ªâ sai m·ªôt ch√∫t x√≠u th√¥i.";
            } else {
                feedback.innerText = "üìö C·∫ßn c·ªë g·∫Øng h∆°n! H√£y xem k·ªπ ph·∫ßn gi·∫£i th√≠ch nh√©.";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // Click outside to close modal
        window.onclick = function(e) {
            if (e.target == document.getElementById('resultModal')) {
                closeModal();
            }
        }

        // Init
        renderQuestions();

    </script>
</body>
</html>