<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Grammar Quiz - Ms Mai An ULIS</title>
    <style>
        :root {
            --primary-color: #0056b3; /* Xanh dương đậm theo yêu cầu */
            --bg-color: #fff0f5; /* Hồng nhạt Lavender Blush */
            --card-bg: #ffffff;
            --text-color: #333333;
            --success-color: #28a745;
            --error-color: #dc3545;
            --warning-color: #ffc107;
            --border-radius: 12px;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 80px; /* Space for sticky footer */
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-color), #004494);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .teacher-name {
            font-size: 0.9rem;
            opacity: 0.9;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        h1 {
            font-size: 1.5rem;
            margin-top: 5px;
        }

        /* Container */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* Sections */
        .section-header {
            background-color: #e3f2fd;
            color: var(--primary-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin: 25px 0 15px 0;
            font-weight: bold;
            border-left: 5px solid var(--primary-color);
        }

        /* Question Card */
        .question-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.2s;
            position: relative;
        }

        .question-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: block;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 15px;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        @media (min-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option-label:hover {
            background-color: #f8f9fa;
            border-color: #cbd3da;
        }

        .option-input {
            display: none;
        }

        .option-circle {
            width: 20px;
            height: 20px;
            border: 2px solid #adb5bd;
            border-radius: 50%;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .option-circle::after {
            content: '';
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .option-input:checked + .option-circle {
            border-color: var(--primary-color);
        }

        .option-input:checked + .option-circle::after {
            opacity: 1;
        }

        .option-input:checked ~ .option-text {
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Styling for Correct/Incorrect States */
        .option-label.correct {
            border-color: var(--success-color);
            background-color: #d4edda;
            color: #155724;
        }

        .option-label.wrong {
            border-color: var(--error-color);
            background-color: #f8d7da;
            color: #721c24;
        }

        .option-label.correct .option-circle {
            border-color: var(--success-color);
            background-color: var(--success-color);
        }
        .option-label.correct .option-circle::after {
            background-color: white;
            opacity: 1;
        }

        .option-label.wrong .option-circle {
            border-color: var(--error-color);
        }

        /* Buttons */
        .btn-check {
            margin-top: 15px;
            padding: 8px 16px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: background 0.2s;
        }

        .btn-check:hover {
            background-color: #004494;
        }
        
        .btn-check:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 15px;
            padding: 15px;
            background-color: #f1f8ff;
            border-left: 4px solid var(--primary-color);
            border-radius: 4px;
            font-size: 0.95rem;
            display: none; /* Hidden by default */
            animation: slideDown 0.3s ease-out;
        }

        .explanation-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        .rationale-content {
            white-space: pre-wrap; /* Respect line breaks */
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Sticky Footer */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 999;
        }

        .submit-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(40, 167, 69, 0.3);
            transition: transform 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            background-color: #218838;
        }

        .progress-info {
            font-weight: 600;
            color: var(--text-color);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 90%;
            width: 400px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: zoomIn 0.3s;
        }

        @keyframes zoomIn {
            from {transform: scale(0.8); opacity: 0;}
            to {transform: scale(1); opacity: 1;}
        }

        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 5px solid var(--primary-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 0 auto 20px auto;
        }

        .close-modal {
            margin-top: 20px;
            padding: 10px 20px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Unanswered Warning styling */
        .card-unanswered {
            border: 2px solid var(--warning-color);
        }
        
        .card-correct {
            border-left: 5px solid var(--success-color);
        }
        
        .card-wrong {
            border-left: 5px solid var(--error-color);
        }

    </style>
</head>
<body>

    <header>
        <div class="teacher-name">Giáo viên: Ms Mai An ULIS</div>
        <h1>TRẮC NGHIỆM SO/SUCH & TỪ NỐI</h1>
    </header>

    <div class="container" id="quiz-container">
        <!-- Content will be injected here via JS -->
    </div>

    <div class="sticky-footer">
        <div class="progress-info" id="progress-info">Đã làm: 0/0</div>
        <button class="submit-btn" onclick="submitQuiz()">NỘP BÀI</button>
    </div>

    <!-- Modal Result -->
    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2>KẾT QUẢ</h2>
            <div class="score-circle" id="score-display">0</div>
            <p id="result-message">Bạn đã hoàn thành bài kiểm tra!</p>
            <button class="close-modal" onclick="closeModal()">Xem chi tiết</button>
        </div>
    </div>

<script>
    // DATA FROM USER
    const quizData = {
  "questions": [
    {
      "questionNumber": 1,
      "question": "Exercise 2 - Q1: This pizza is ______ delicious that we want to order another one right away to satisfy our craving.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá/đến nỗi (đi với Tính từ/Trạng từ).\n- B. such: quá/đến nỗi (đi với Danh từ).\n- C. too: quá (thường đi với to V).\n- D. very: rất (không đi với that).\n\n2. Dịch nghĩa: 'Cái bánh pizza này ngon đến nỗi chúng tôi muốn gọi thêm cái nữa ngay lập tức để thỏa mãn cơn thèm.'\n\n3. Giải thích: 'delicious' là Tính từ (Adjective) đứng sau động từ tobe 'is' -> Dùng cấu trúc 'S + be + SO + Adj + THAT...'.", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Such phải đi với danh từ (ví dụ: such a delicious pizza).", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too... to, không dùng Too... that.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Very không đi với mệnh đề kết quả 'that...'.", "isCorrect": false }
      ],
      "hint": "Đi với Tính từ đứng một mình (delicious) -> So."
    },
    {
      "questionNumber": 2,
      "question": "Exercise 2 - Q2: Mr Toan gave ______ an inspiring speech that it motivated everyone in the room to pursue their dreams.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá/như vậy.\n\n2. Dịch nghĩa: 'Thầy Toàn đã có một bài phát biểu truyền cảm hứng đến mức nó thúc đẩy mọi người trong phòng theo đuổi ước mơ.'\n\n3. Giải thích: 'an inspiring speech' là một Cụm danh từ (Article + Adj + Noun) -> Dùng cấu trúc 'SUCH + (a/an) + Adj + Noun + THAT'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đứng trước mạo từ 'an'. (Trừ cấu trúc đặc biệt: So inspiring a speech - nhưng ở đây trật tự từ là 'an inspiring speech').", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (an inspiring speech) -> Such."
    },
    {
      "questionNumber": 3,
      "question": "Exercise 2 - Q3: Angelina Jolie wore ______ an elegant dress that all eyes were drawn to her as soon as she entered the room.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng So trước cụm danh từ 'an elegant dress'.", "isCorrect": false },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n- B. such: quá/đến nỗi.\n- C. too: quá.\n- D. enough: đủ.\n\n2. Dịch nghĩa: 'Angelina Jolie mặc một chiếc váy thanh lịch đến nỗi mọi ánh mắt đều đổ dồn về cô ấy ngay khi cô bước vào phòng.'\n\n3. Giải thích: 'an elegant dress' là Cụm danh từ -> Dùng cấu trúc 'Such + (a/an) + Adj + Noun + That'.", "isCorrect": true },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false },
        { "text": "enough", "rationale": "1. Phân tích từ vựng:\n- D. enough: đủ.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (an elegant dress) -> Such."
    },
    {
      "questionNumber": 4,
      "question": "Exercise 2 - Q4: Nghia has ______ remarkable patience that he can handle even the most difficult situations calmly.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá/đến nỗi.\n\n2. Dịch nghĩa: 'Nghĩa có sự kiên nhẫn đáng nể đến mức anh ấy có thể xử lý bình tĩnh ngay cả những tình huống khó khăn nhất.'\n\n3. Giải thích: 'remarkable patience' là Cụm danh từ (Adj + Noun không đếm được) -> Dùng cấu trúc 'SUCH + Adj + Noun + THAT'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đi trực tiếp với danh từ.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (remarkable patience) -> Such."
    },
    {
      "questionNumber": 5,
      "question": "Exercise 2 - Q5: That history book was ______ interesting that my sister couldn't put it down until she finished it.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá/đến nỗi.\n- B. such: quá.\n- C. too: quá.\n- D. very: rất.\n\n2. Dịch nghĩa: 'Cuốn sách lịch sử đó thú vị đến nỗi chị tôi không thể đặt nó xuống cho đến khi đọc xong.'\n\n3. Giải thích: 'interesting' là Tính từ đứng sau động từ tobe 'was' -> Dùng cấu trúc 'So + Adj + That'.", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Such đi với danh từ.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too... to.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Very không đi với that clause.", "isCorrect": false }
      ],
      "hint": "Đi với Tính từ (interesting) -> So."
    },
    {
      "questionNumber": 6,
      "question": "Exercise 2 - Q6: Kim is ______ a talented artist that her paintings mesmerise everyone who sees them.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá/đến nỗi.\n\n2. Dịch nghĩa: 'Kim là một nghệ sĩ tài năng đến mức những bức tranh của cô ấy mê hoặc tất cả những ai nhìn thấy.'\n\n3. Giải thích: 'a talented artist' là Cụm danh từ -> Dùng cấu trúc 'Such + (a/an) + Adj + Noun + That'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đứng trước mạo từ 'a' theo trật tự này.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "enough", "rationale": "1. Phân tích từ vựng:\n- D. enough: đủ.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (a talented artist) -> Such."
    },
    {
      "questionNumber": 7,
      "question": "Exercise 2 - Q7: The final test was ______ difficult that most of the students struggled to finish it on time.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n- B. such: quá.\n- C. too: quá.\n- D. very: rất.\n\n2. Dịch nghĩa: 'Bài kiểm tra cuối kỳ khó đến nỗi hầu hết học sinh đều chật vật để hoàn thành đúng giờ.'\n\n3. Giải thích: 'difficult' là Tính từ -> Dùng cấu trúc 'So + Adj + That'.", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Such đi với danh từ.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too... to.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Very không đi với that clause.", "isCorrect": false }
      ],
      "hint": "Đi với Tính từ (difficult) -> So."
    },
    {
      "questionNumber": 8,
      "question": "Exercise 2 - Q8: My mother possesses ______ boundless energy that she can work tirelessly for hours.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá/đến nỗi.\n\n2. Dịch nghĩa: 'Mẹ tôi sở hữu nguồn năng lượng dồi dào đến mức bà có thể làm việc không biết mệt mỏi trong nhiều giờ.'\n\n3. Giải thích: 'boundless energy' là Cụm danh từ (Adj + Noun không đếm được) -> Dùng 'Such + Adj + Noun + That'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đi trực tiếp với danh từ.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "enough", "rationale": "1. Phân tích từ vựng:\n- D. enough: đủ.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (boundless energy) -> Such."
    },
    {
      "questionNumber": 9,
      "question": "Exercise 3 - Q1: The sun shone __________________ brightly that she had to put on her glasses.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n- B. such: quá.\n- C. too: quá.\n- D. enough: đủ.\n\n2. Dịch nghĩa: 'Mặt trời chiếu sáng chói chang đến nỗi cô ấy phải đeo kính vào.'\n\n3. Giải thích: 'brightly' là Trạng từ (Adverb) -> Dùng cấu trúc 'So + Adv + That'.", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Such đi với danh từ.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too... to.", "isCorrect": false },
        { "text": "enough", "rationale": "1. Phân tích từ vựng:\n- D. enough: đủ.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Enough đứng sau trạng từ.", "isCorrect": false }
      ],
      "hint": "Đi với Trạng từ (brightly) -> So."
    },
    {
      "questionNumber": 10,
      "question": "Exercise 3 - Q2: There were __________________ few students registered that the class was cancelled.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n- B. such: quá.\n- C. too: quá.\n- D. very: rất.\n\n2. Dịch nghĩa: 'Có quá ít sinh viên đăng ký đến nỗi lớp học đã bị hủy.'\n\n3. Giải thích: Quy tắc đặc biệt: Dùng 'So' đi với các lượng từ 'few, many, much, little' (So few students...).", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng 'such few'.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too few students TO (không phải that).", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Very few students, nhưng không đi với that clause ở sau.", "isCorrect": false }
      ],
      "hint": "Đi với lượng từ 'few' -> So few..."
    },
    {
      "questionNumber": 11,
      "question": "Exercise 3 - Q3: We had __________________ wonderful memories of that place that we decided to return.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: 'Chúng tôi có những kỷ niệm tuyệt vời về nơi đó đến nỗi chúng tôi quyết định quay lại.'\n\n3. Giải thích: 'wonderful memories' là Cụm danh từ (Adj + Noun số nhiều) -> Dùng 'Such + Adj + Noun + That'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đi trực tiếp với danh từ số nhiều.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false },
        { "text": "enough", "rationale": "1. Phân tích từ vựng:\n- D. enough: đủ.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (wonderful memories) -> Such."
    },
    {
      "questionNumber": 12,
      "question": "Exercise 3 - Q4: The weather was __________________ nice that we decided to go out for a picnic.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: 'Thời tiết đẹp đến nỗi chúng tôi quyết định đi dã ngoại.'\n\n3. Giải thích: 'nice' là Tính từ -> Dùng cấu trúc 'So + Adj + That'.", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Such đi với danh từ.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too... to.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không đi với that clause.", "isCorrect": false }
      ],
      "hint": "Đi với Tính từ (nice) -> So."
    },
    {
      "questionNumber": 13,
      "question": "Exercise 3 - Q5: The book looked __________________ interesting that we decided to read it.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: 'Cuốn sách trông thú vị đến nỗi chúng tôi quyết định đọc nó.'\n\n3. Giải thích: 'interesting' là Tính từ -> Dùng cấu trúc 'So + Adj + That'.", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Such đi với danh từ.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too... to.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không đi với that clause.", "isCorrect": false }
      ],
      "hint": "Đi với Tính từ (interesting) -> So."
    },
    {
      "questionNumber": 14,
      "question": "Exercise 3 - Q6: Tom is __________________ a short boy that he can’t play volleyball.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: 'Tom là một cậu bé thấp đến nỗi cậu ấy không thể chơi bóng chuyền.'\n\n3. Giải thích: 'a short boy' là Cụm danh từ -> Dùng cấu trúc 'Such + (a/an) + Adj + Noun + That'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đứng trước 'a short boy'.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false },
        { "text": "enough", "rationale": "1. Phân tích từ vựng:\n- D. enough: đủ.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (a short boy) -> Such."
    },
    {
      "questionNumber": 15,
      "question": "Exercise 3 - Q7: There were __________________ many people on the bus that we decided to walk.",
      "answerOptions": [
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: 'Có quá nhiều người trên xe buýt đến nỗi chúng tôi quyết định đi bộ.'\n\n3. Giải thích: Quy tắc đặc biệt: Dùng 'So' đi với lượng từ 'many' (So many people...).", "isCorrect": true },
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng 'such many'.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Too many... to.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không đi với that.", "isCorrect": false }
      ],
      "hint": "Đi với lượng từ 'many' -> So many..."
    },
    {
      "questionNumber": 16,
      "question": "Exercise 3 - Q8: The benefit was __________________ a great success that the promoters decided to repeat it.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: 'Buổi gây quỹ là một thành công lớn đến nỗi các nhà tổ chức quyết định lặp lại nó.'\n\n3. Giải thích: 'a great success' là Cụm danh từ -> Dùng cấu trúc 'Such + (a/an) + Adj + Noun + That'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đứng trước 'a great success'.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (a great success) -> Such."
    },
    {
      "questionNumber": 17,
      "question": "Exercise 3 - Q9: Tom was __________________ a tall man that he could almost touch the ceiling.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: 'Tom là một người đàn ông cao đến nỗi anh ấy gần như có thể chạm trần nhà.'\n\n3. Giải thích: 'a tall man' là Cụm danh từ -> Dùng 'Such'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: So không đứng trước 'a tall man'.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false },
        { "text": "quite", "rationale": "1. Phân tích từ vựng:\n- D. quite: khá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không đi với that clause chỉ kết quả.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (a tall man) -> Such."
    },
    {
      "questionNumber": 18,
      "question": "Exercise 3 - Q10: It was __________________ a dark room that we couldn't see anything.",
      "answerOptions": [
        { "text": "such", "rationale": "1. Phân tích từ vựng:\n- B. such: quá.\n\n2. Dịch nghĩa: 'Đó là một căn phòng tối đến nỗi chúng tôi không thể thấy gì.'\n\n3. Giải thích: 'a dark room' là Cụm danh từ -> Dùng 'Such'.", "isCorrect": true },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- A. so: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false },
        { "text": "too", "rationale": "1. Phân tích từ vựng:\n- C. too: quá.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false },
        { "text": "very", "rationale": "1. Phân tích từ vựng:\n- D. very: rất.\n\n2. Dịch nghĩa: Sai cấu trúc.\n\n3. Giải thích: Không dùng.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (a dark room) -> Such."
    },
    {
      "questionNumber": 19,
      "question": "Exercise 4 - Q1: I lost my keys __________________ I found them in my blue handbag.",
      "answerOptions": [
        { "text": "but", "rationale": "1. Phân tích từ vựng:\n- A. but: nhưng (nối 2 mệnh đề trong cùng một câu).\n- B. although: mặc dù.\n- C. however: tuy nhiên (thường đứng đầu câu hoặc sau dấu chấm phẩy).\n- D. so: vì vậy.\n\n2. Dịch nghĩa: 'Tôi làm mất chìa khóa nhưng tôi đã tìm thấy chúng trong túi xách màu xanh.'\n\n3. Giải thích: Diễn tả sự tương phản nối tiếp nhau trong cùng một câu -> Dùng 'but'.", "isCorrect": true },
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- B. although: mặc dù.\n\n2. Dịch nghĩa: 'Tôi làm mất chìa khóa mặc dù tôi tìm thấy...'\n\n3. Giải thích: Sai logic.", "isCorrect": false },
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- C. however: tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: 'However' cần dấu câu mạnh hơn (như ; hoặc .).", "isCorrect": false },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- D. so: vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Mất chìa khóa không dẫn đến kết quả tìm thấy.", "isCorrect": false }
      ],
      "hint": "Liên từ chỉ sự tương phản, đứng giữa câu (nhưng)."
    },
    {
      "questionNumber": 20,
      "question": "Exercise 4 - Q2: __________________ she is seven years old, she is playing the piano.",
      "answerOptions": [
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- A. Although: Mặc dù.\n- B. But: Nhưng.\n- C. However: Tuy nhiên.\n- D. So: Vì vậy.\n\n2. Dịch nghĩa: 'Mặc dù cô bé mới 7 tuổi, cô bé đang chơi piano.'\n\n3. Giải thích: Đứng đầu câu, chỉ sự nhượng bộ (Tuổi nhỏ >< Làm được việc khó) -> Dùng 'Although'.", "isCorrect": true },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- B. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: But không đứng đầu câu trong văn phong chuẩn.", "isCorrect": false },
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- C. However: Tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: However phải có dấu phẩy đi sau.", "isCorrect": false },
        { "text": "So", "rationale": "1. Phân tích từ vựng:\n- D. So: Vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Không hợp nghĩa.", "isCorrect": false }
      ],
      "hint": "Liên từ chỉ sự nhượng bộ, đứng đầu câu (Mặc dù)."
    },
    {
      "questionNumber": 21,
      "question": "Exercise 4 - Q3: We don’t like camping __________________ we love fishing.",
      "answerOptions": [
        { "text": "but", "rationale": "1. Phân tích từ vựng:\n- A. but: nhưng.\n\n2. Dịch nghĩa: 'Chúng tôi không thích cắm trại nhưng chúng tôi thích câu cá.'\n\n3. Giải thích: Hai vế đối lập (Không thích >< Thích) trong cùng một câu -> Dùng 'but'.", "isCorrect": true },
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- B. although: mặc dù.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: 'Chúng tôi không thích cắm trại mặc dù thích câu cá' -> Nghe không xuôi.", "isCorrect": false },
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- C. however: tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu câu phù hợp.", "isCorrect": false },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- D. so: vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Không phải quan hệ kết quả.", "isCorrect": false }
      ],
      "hint": "Liên từ chỉ sự tương phản (nhưng)."
    },
    {
      "questionNumber": 22,
      "question": "Exercise 4 - Q4: I didn’t tell my father anything about the accident. __________________, she looked very anxious.",
      "answerOptions": [
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- A. However: Tuy nhiên.\n- B. Although: Mặc dù.\n- C. But: Nhưng.\n- D. So: Vì vậy.\n\n2. Dịch nghĩa: 'Tôi không nói với cha tôi gì về tai nạn. Tuy nhiên, cô ấy (có lẽ đề nhầm 'he' thành 'she' hoặc nói về người mẹ?) trông rất lo lắng.'\n\n3. Giải thích: Đứng đầu câu sau dấu chấm, có dấu phẩy đi sau -> Dùng trạng từ liên kết 'However'.", "isCorrect": true },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- B. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Although không đứng độc lập rồi phẩy.", "isCorrect": false },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- C. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: But không đứng đầu câu rồi phẩy.", "isCorrect": false },
        { "text": "So", "rationale": "1. Phân tích từ vựng:\n- D. So: Vì vậy.\n\n2. Dịch nghĩa: Sai ngữ pháp/logic.\n\n3. Giải thích: So không đứng đầu câu rồi phẩy như thế này (thường không có phẩy).", "isCorrect": false }
      ],
      "hint": "Từ nối đứng đầu câu, sau dấu chấm, trước dấu phẩy (Tuy nhiên)."
    },
    {
      "questionNumber": 23,
      "question": "Exercise 4 - Q5: __________________ my brother is seven years old, he doesn’t want to go to school.",
      "answerOptions": [
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- A. Although: Mặc dù.\n\n2. Dịch nghĩa: 'Mặc dù em trai tôi 7 tuổi, nó không muốn đi học.'\n\n3. Giải thích: Đứng đầu câu, chỉ sự nhượng bộ (7 tuổi là tuổi đi học >< Không muốn đi).", "isCorrect": true },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- B. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng đầu câu.", "isCorrect": false },
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- C. However: Tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu phẩy.", "isCorrect": false },
        { "text": "So", "rationale": "1. Phân tích từ vựng:\n- D. So: Vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Không hợp nghĩa.", "isCorrect": false }
      ],
      "hint": "Liên từ chỉ sự nhượng bộ (Mặc dù)."
    },
    {
      "questionNumber": 24,
      "question": "Exercise 4 - Q6: I don’t know how to play chess. __________________, I really want to learn it.",
      "answerOptions": [
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- A. However: Tuy nhiên.\n\n2. Dịch nghĩa: 'Tôi không biết chơi cờ. Tuy nhiên, tôi rất muốn học.'\n\n3. Giải thích: Đứng đầu câu sau dấu chấm, có dấu phẩy -> Dùng 'However'.", "isCorrect": true },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- B. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không dùng Although độc lập.", "isCorrect": false },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- C. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không dùng But đầu câu rồi phẩy.", "isCorrect": false },
        { "text": "So", "rationale": "1. Phân tích từ vựng:\n- D. So: Vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Không hợp lý.", "isCorrect": false }
      ],
      "hint": "Từ nối đứng đầu câu, có dấu phẩy (Tuy nhiên)."
    },
    {
      "questionNumber": 25,
      "question": "Exercise 4 - Q7: Hakan drank two cups of coffee __________________ he drank a cup of coffee before.",
      "answerOptions": [
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- A. although: mặc dù.\n\n2. Dịch nghĩa: 'Hakan đã uống hai tách cà phê mặc dù anh ấy đã uống một tách trước đó.'\n\n3. Giải thích: Chỉ sự tương phản (Uống thêm >< Đã uống rồi).", "isCorrect": true },
        { "text": "but", "rationale": "1. Phân tích từ vựng:\n- B. but: nhưng.\n\n2. Dịch nghĩa: Hơi lủng củng.\n\n3. Giải thích: 'Although' hợp lý hơn để nhấn mạnh sự nhượng bộ của hành động.", "isCorrect": false },
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- C. however: tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu câu.", "isCorrect": false },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- D. so: vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Đã uống rồi nên uống thêm -> Không hợp lý.", "isCorrect": false }
      ],
      "hint": "Liên từ chỉ sự nhượng bộ (Mặc dù)."
    },
    {
      "questionNumber": 26,
      "question": "Exercise 4 - Q8: Tony reads books __________________ he doesn’t read newspapers.",
      "answerOptions": [
        { "text": "but", "rationale": "1. Phân tích từ vựng:\n- A. but: nhưng.\n\n2. Dịch nghĩa: 'Tony đọc sách nhưng anh ấy không đọc báo.'\n\n3. Giải thích: Hai vế đối lập (Đọc sách >< Không đọc báo) trong cùng câu -> Dùng 'but'.", "isCorrect": true },
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- B. although: mặc dù.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: 'Tony đọc sách mặc dù anh ấy không đọc báo' -> Nghe không tự nhiên.", "isCorrect": false },
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- C. however: tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu câu.", "isCorrect": false },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- D. so: vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Không liên quan kết quả.", "isCorrect": false }
      ],
      "hint": "Liên từ chỉ sự tương phản (nhưng)."
    },
    {
      "questionNumber": 27,
      "question": "Exercise 4 - Q9: I have studied hard for the exam. __________________, I failed the exam.",
      "answerOptions": [
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- A. However: Tuy nhiên.\n\n2. Dịch nghĩa: 'Tôi đã học chăm chỉ cho kỳ thi. Tuy nhiên, tôi đã trượt.'\n\n3. Giải thích: Đứng đầu câu sau dấu chấm, có dấu phẩy, chỉ sự tương phản mạnh.", "isCorrect": true },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- B. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng đầu câu rồi phẩy.", "isCorrect": false },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- C. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng độc lập.", "isCorrect": false },
        { "text": "So", "rationale": "1. Phân tích từ vựng:\n- D. So: Vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Học chăm thì không nên trượt.", "isCorrect": false }
      ],
      "hint": "Từ nối đứng đầu câu, có dấu phẩy (Tuy nhiên)."
    },
    {
      "questionNumber": 28,
      "question": "Exercise 4 - Q10: Jack visited us yesterday __________________ he didn’t stay with us.",
      "answerOptions": [
        { "text": "but", "rationale": "1. Phân tích từ vựng:\n- A. but: nhưng.\n\n2. Dịch nghĩa: 'Jack đến thăm chúng tôi hôm qua nhưng anh ấy không ở lại với chúng tôi.'\n\n3. Giải thích: Hai hành động tương phản (Đến thăm >< Không ở lại) -> Dùng 'but'.", "isCorrect": true },
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- B. although: mặc dù.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: 'Jack đến thăm mặc dù không ở lại' -> Không xuôi.", "isCorrect": false },
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- C. however: tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu câu.", "isCorrect": false },
        { "text": "so", "rationale": "1. Phân tích từ vựng:\n- D. so: vì vậy.\n\n2. Dịch nghĩa: Sai logic.\n\n3. Giải thích: Không hợp.", "isCorrect": false }
      ],
      "hint": "Liên từ chỉ sự tương phản (nhưng)."
    },
    {
      "questionNumber": 29,
      "question": "Exercise 5 - Q1: ________________________________ it rained a lot, we enjoyed our holiday.",
      "answerOptions": [
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- A. Although: Mặc dù (+ Mệnh đề).\n- B. In spite of: Mặc dù (+ Noun).\n- C. However: Tuy nhiên.\n- D. Despite: Mặc dù (+ Noun).\n\n2. Dịch nghĩa: 'Mặc dù trời mưa nhiều, chúng tôi vẫn tận hưởng kỳ nghỉ.'\n\n3. Giải thích: 'it rained a lot' là Mệnh đề (S + V) -> Dùng 'Although'.", "isCorrect": true },
        { "text": "In spite of", "rationale": "1. Phân tích từ vựng:\n- B. In spite of: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với mệnh đề.", "isCorrect": false },
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- C. However: Tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu câu.", "isCorrect": false },
        { "text": "Despite", "rationale": "1. Phân tích từ vựng:\n- D. Despite: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với mệnh đề.", "isCorrect": false }
      ],
      "hint": "Đi với Mệnh đề (it rained a lot) -> Although."
    },
    {
      "questionNumber": 30,
      "question": "Exercise 5 - Q2: ________________________________ all my careful plans, a lot of things went wrong.",
      "answerOptions": [
        { "text": "In spite of", "rationale": "1. Phân tích từ vựng:\n- A. In spite of: Mặc dù (+ Noun).\n- B. Although: Mặc dù (+ Clause).\n- C. However: Tuy nhiên.\n- D. But: Nhưng.\n\n2. Dịch nghĩa: 'Mặc dù tất cả các kế hoạch cẩn thận của tôi, rất nhiều thứ đã đi sai hướng.'\n\n3. Giải thích: 'all my careful plans' là Cụm danh từ -> Dùng 'In spite of' (hoặc Despite).", "isCorrect": true },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- B. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với cụm danh từ.", "isCorrect": false },
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- C. However: Tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- D. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng đầu câu.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (all my careful plans) -> In spite of/Despite."
    },
    {
      "questionNumber": 31,
      "question": "Exercise 5 - Q3: Most people still prefer to travel by plane ________________________________ airfares increased greatly.",
      "answerOptions": [
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- A. although: mặc dù (+ Clause).\n- B. despite: mặc dù (+ Noun).\n- C. however: tuy nhiên.\n- D. in spite of: mặc dù (+ Noun).\n\n2. Dịch nghĩa: 'Hầu hết mọi người vẫn thích đi máy bay mặc dù giá vé tăng mạnh.'\n\n3. Giải thích: 'airfares increased greatly' là Mệnh đề (S + V) -> Dùng 'although'.", "isCorrect": true },
        { "text": "despite", "rationale": "1. Phân tích từ vựng:\n- B. despite: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với mệnh đề.", "isCorrect": false },
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- C. however: tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu câu.", "isCorrect": false },
        { "text": "in spite of", "rationale": "1. Phân tích từ vựng:\n- D. in spite of: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với mệnh đề.", "isCorrect": false }
      ],
      "hint": "Đi với Mệnh đề (airfares increased...) -> Although."
    },
    {
      "questionNumber": 32,
      "question": "Exercise 5 - Q4: He was exhausted. ________________________________, he pushed through and finished the marathon.",
      "answerOptions": [
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- A. However: Tuy nhiên.\n- B. Although: Mặc dù.\n- C. Despite: Mặc dù.\n- D. In spite of: Mặc dù.\n\n2. Dịch nghĩa: 'Anh ấy đã kiệt sức. Tuy nhiên, anh ấy vẫn cố gắng và hoàn thành cuộc đua marathon.'\n\n3. Giải thích: Đứng đầu câu sau dấu chấm, có dấu phẩy -> Dùng trạng từ liên kết 'However'.", "isCorrect": true },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- B. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng độc lập.", "isCorrect": false },
        { "text": "Despite", "rationale": "1. Phân tích từ vựng:\n- C. Despite: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Cần danh từ theo sau.", "isCorrect": false },
        { "text": "In spite of", "rationale": "1. Phân tích từ vựng:\n- D. In spite of: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Cần danh từ theo sau.", "isCorrect": false }
      ],
      "hint": "Từ nối đứng đầu câu, sau dấu chấm, trước dấu phẩy (Tuy nhiên)."
    },
    {
      "questionNumber": 33,
      "question": "Exercise 5 - Q5: ________________________________ being very tired, we carried on walking.",
      "answerOptions": [
        { "text": "In spite of", "rationale": "1. Phân tích từ vựng:\n- A. In spite of: Mặc dù.\n- B. Although: Mặc dù.\n- C. However: Tuy nhiên.\n- D. But: Nhưng.\n\n2. Dịch nghĩa: 'Mặc dù rất mệt, chúng tôi vẫn tiếp tục đi bộ.'\n\n3. Giải thích: 'being very tired' là V-ing phrase -> Dùng 'In spite of' (hoặc Despite).", "isCorrect": true },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- B. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Although + Clause (S+V).", "isCorrect": false },
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- C. However: Tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- D. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng đầu câu.", "isCorrect": false }
      ],
      "hint": "Đi với V-ing (being...) -> In spite of/Despite."
    },
    {
      "questionNumber": 34,
      "question": "Exercise 5 - Q6: The heating was full on; ________________________________, this house was still cold.",
      "answerOptions": [
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- A. however: tuy nhiên.\n- B. although: mặc dù.\n- C. despite: mặc dù.\n- D. but: nhưng.\n\n2. Dịch nghĩa: 'Lò sưởi đã bật hết cỡ; tuy nhiên, ngôi nhà này vẫn lạnh.'\n\n3. Giải thích: Đứng sau dấu chấm phẩy (;), trước dấu phẩy (,) -> Dùng trạng từ liên kết 'however'.", "isCorrect": true },
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- B. although: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không dùng cấu trúc này.", "isCorrect": false },
        { "text": "despite", "rationale": "1. Phân tích từ vựng:\n- C. despite: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Cần danh từ.", "isCorrect": false },
        { "text": "but", "rationale": "1. Phân tích từ vựng:\n- D. but: nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không dùng sau dấu chấm phẩy rồi phẩy.", "isCorrect": false }
      ],
      "hint": "Dấu hiệu: ; ____, (Tuy nhiên)."
    },
    {
      "questionNumber": 35,
      "question": "Exercise 5 - Q7: Marconi decided to give up going to the gym ________________________________ I advised him not to.",
      "answerOptions": [
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- A. although: mặc dù.\n- B. despite: mặc dù.\n- C. in spite of: mặc dù.\n- D. however: tuy nhiên.\n\n2. Dịch nghĩa: 'Marconi quyết định bỏ tập gym mặc dù tôi đã khuyên anh ấy không nên.'\n\n3. Giải thích: 'I advised him not to' là Mệnh đề (S + V) -> Dùng 'although'.", "isCorrect": true },
        { "text": "despite", "rationale": "1. Phân tích từ vựng:\n- B. despite: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với mệnh đề.", "isCorrect": false },
        { "text": "in spite of", "rationale": "1. Phân tích từ vựng:\n- C. in spite of: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với mệnh đề.", "isCorrect": false },
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- D. however: tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Thiếu dấu câu.", "isCorrect": false }
      ],
      "hint": "Đi với Mệnh đề (I advised...) -> Although."
    },
    {
      "questionNumber": 36,
      "question": "Exercise 5 - Q8: ________________________________ the heavy rain, the baseball game was not cancelled.",
      "answerOptions": [
        { "text": "Despite", "rationale": "1. Phân tích từ vựng:\n- A. Despite: Mặc dù.\n- B. Although: Mặc dù.\n- C. However: Tuy nhiên.\n- D. But: Nhưng.\n\n2. Dịch nghĩa: 'Mặc dù trời mưa to, trận bóng chày không bị hủy.'\n\n3. Giải thích: 'the heavy rain' là Cụm danh từ -> Dùng 'Despite' (hoặc In spite of).", "isCorrect": true },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- B. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với cụm danh từ.", "isCorrect": false },
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- C. However: Tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- D. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng đầu câu.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (the heavy rain) -> Despite/In spite of."
    },
    {
      "questionNumber": 37,
      "question": "Exercise 5 - Q9: The weather forecast predicted rain; ________________________________, it turned out to be a sunny day.",
      "answerOptions": [
        { "text": "however", "rationale": "1. Phân tích từ vựng:\n- A. however: tuy nhiên.\n- B. although: mặc dù.\n- C. despite: mặc dù.\n- D. but: nhưng.\n\n2. Dịch nghĩa: 'Dự báo thời tiết báo mưa; tuy nhiên, hóa ra lại là một ngày nắng.'\n\n3. Giải thích: Đứng sau dấu chấm phẩy (;), trước dấu phẩy (,) -> Dùng trạng từ liên kết 'however'.", "isCorrect": true },
        { "text": "although", "rationale": "1. Phân tích từ vựng:\n- B. although: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không dùng cấu trúc này.", "isCorrect": false },
        { "text": "despite", "rationale": "1. Phân tích từ vựng:\n- C. despite: mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Cần danh từ.", "isCorrect": false },
        { "text": "but", "rationale": "1. Phân tích từ vựng:\n- D. but: nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không dùng sau dấu chấm phẩy rồi phẩy.", "isCorrect": false }
      ],
      "hint": "Dấu hiệu: ; ____, (Tuy nhiên)."
    },
    {
      "questionNumber": 38,
      "question": "Exercise 5 - Q10: ________________________________ the pills that are available, many people still have trouble sleeping.",
      "answerOptions": [
        { "text": "Despite", "rationale": "1. Phân tích từ vựng:\n- A. Despite: Mặc dù.\n- B. Although: Mặc dù.\n- C. However: Tuy nhiên.\n- D. But: Nhưng.\n\n2. Dịch nghĩa: 'Mặc dù có các loại thuốc có sẵn, nhiều người vẫn gặp khó khăn khi ngủ.'\n\n3. Giải thích: 'the pills that are available' là Cụm danh từ (Noun + mệnh đề quan hệ) -> Dùng 'Despite' (hoặc In spite of).", "isCorrect": true },
        { "text": "Although", "rationale": "1. Phân tích từ vựng:\n- B. Although: Mặc dù.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đi với cụm danh từ.", "isCorrect": false },
        { "text": "However", "rationale": "1. Phân tích từ vựng:\n- C. However: Tuy nhiên.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không phù hợp.", "isCorrect": false },
        { "text": "But", "rationale": "1. Phân tích từ vựng:\n- D. But: Nhưng.\n\n2. Dịch nghĩa: Sai ngữ pháp.\n\n3. Giải thích: Không đứng đầu câu.", "isCorrect": false }
      ],
      "hint": "Đi với Cụm danh từ (the pills...) -> Despite/In spite of."
    }
  ]
};

    let totalAnswered = 0;
    const totalQuestions = quizData.questions.length;
    let currentSection = "";

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        let html = '';

        quizData.questions.forEach((q, index) => {
            // Section logic based on question text (e.g., "Exercise 2 - Q1")
            const match = q.question.match(/(Exercise \d+)/);
            if (match && match[0] !== currentSection) {
                currentSection = match[0];
                html += `<div class="section-header">${currentSection}</div>`;
            }

            // Clean question text (remove prefix for display inside card if desired, but here we keep full text for clarity)
            const cleanQuestionText = q.question.replace(/^Exercise \d+ - Q\d+: /, '');
            const questionLabel = q.question.split(':')[0]; // "Exercise 2 - Q1"

            html += `
                <div class="question-card" id="card-${index}">
                    <span class="question-number">Câu ${index + 1} (${questionLabel})</span>
                    <div class="question-text">${cleanQuestionText}</div>
                    
                    <div class="options-grid">
                        ${q.answerOptions.map((opt, optIndex) => `
                            <label class="option-label" id="label-${index}-${optIndex}">
                                <input type="radio" name="q${index}" class="option-input" value="${optIndex}" onclick="selectOption(${index})">
                                <div class="option-circle"></div>
                                <span class="option-text">${opt.text}</span>
                            </label>
                        `).join('')}
                    </div>

                    <button class="btn-check" id="btn-check-${index}" onclick="checkQuestion(${index})" disabled>Kiểm tra</button>

                    <div class="explanation-box" id="explain-${index}">
                        <div class="explanation-title">Giải thích chi tiết:</div>
                        <div class="rationale-content" id="rationale-${index}"></div>
                    </div>
                </div>
            `;
        });

        container.innerHTML = html;
        updateProgress();
    }

    function selectOption(qIndex) {
        // Enable Check button
        document.getElementById(`btn-check-${qIndex}`).disabled = false;
        
        // Remove warning style if exists
        document.getElementById(`card-${qIndex}`).classList.remove('card-unanswered');
        
        // Logic to track "answered" count for progress bar (simplified)
    }

    function checkQuestion(qIndex) {
        const selectedInput = document.querySelector(`input[name="q${qIndex}"]:checked`);
        if (!selectedInput) return;

        const selectedOptIndex = parseInt(selectedInput.value);
        const questionData = quizData.questions[qIndex];
        const correctOptIndex = questionData.answerOptions.findIndex(opt => opt.isCorrect);
        
        // Disable all inputs and button
        const inputs = document.getElementsByName(`q${qIndex}`);
        inputs.forEach(input => input.disabled = true);
        document.getElementById(`btn-check-${qIndex}`).disabled = true;

        // Visual Feedback
        const card = document.getElementById(`card-${qIndex}`);
        const selectedLabel = document.getElementById(`label-${qIndex}-${selectedOptIndex}`);
        const correctLabel = document.getElementById(`label-${qIndex}-${correctOptIndex}`);

        if (selectedOptIndex === correctOptIndex) {
            // Correct
            selectedLabel.classList.add('correct');
            card.classList.add('card-correct');
        } else {
            // Wrong
            selectedLabel.classList.add('wrong');
            correctLabel.classList.add('correct'); // Show correct answer
            card.classList.add('card-wrong');
        }

        // Show Explanation
        const explainBox = document.getElementById(`explain-${qIndex}`);
        const rationaleDiv = document.getElementById(`rationale-${qIndex}`);
        
        // Format rationale text (add bolding for headers)
        let formattedRationale = questionData.answerOptions[correctOptIndex].rationale;
        
        rationaleDiv.textContent = formattedRationale;
        explainBox.style.display = "block";
        
        totalAnswered++;
        updateProgress();
    }

    function updateProgress() {
        document.getElementById('progress-info').textContent = `Đã hoàn thành: ${document.querySelectorAll('.btn-check:disabled').length}/${totalQuestions}`;
    }

    function submitQuiz() {
        let score = 0;
        let unansweredCount = 0;
        let firstUnansweredIndex = -1;

        quizData.questions.forEach((q, index) => {
            const selectedInput = document.querySelector(`input[name="q${index}"]:checked`);
            const btnCheck = document.getElementById(`btn-check-${index}`);

            // Case 1: Already checked (User clicked "Kiểm tra")
            if (btnCheck.disabled) {
                // Determine correctness from UI class state logic or re-eval
                const correctOptIndex = q.answerOptions.findIndex(opt => opt.isCorrect);
                const userVal = parseInt(document.querySelector(`input[name="q${index}"]:checked`)?.value);
                if (userVal === correctOptIndex) score++;
            } 
            // Case 2: Selected but NOT checked yet
            else if (selectedInput) {
                checkQuestion(index); // Auto check
                // Re-evaluate score after checking
                const correctOptIndex = q.answerOptions.findIndex(opt => opt.isCorrect);
                if (parseInt(selectedInput.value) === correctOptIndex) score++;
            }
            // Case 3: Not answered
            else {
                document.getElementById(`card-${index}`).classList.add('card-unanswered');
                unansweredCount++;
                if (firstUnansweredIndex === -1) firstUnansweredIndex = index;
                
                // Show correct answer anyway (Force finish)
                const correctOptIndex = q.answerOptions.findIndex(opt => opt.isCorrect);
                const correctLabel = document.getElementById(`label-${index}-${correctOptIndex}`);
                correctLabel.classList.add('correct');
                
                // Show Explanation
                const explainBox = document.getElementById(`explain-${index}`);
                document.getElementById(`rationale-${index}`).textContent = q.answerOptions[correctOptIndex].rationale;
                explainBox.style.display = "block";
                
                // Disable inputs
                const inputs = document.getElementsByName(`q${index}`);
                inputs.forEach(input => input.disabled = true);
                document.getElementById(`btn-check-${index}`).disabled = true;
            }
        });

        // Scroll to first unanswered if any
        if (firstUnansweredIndex !== -1) {
            document.getElementById(`card-${firstUnansweredIndex}`).scrollIntoView({behavior: 'smooth', block: 'center'});
        }

        // Show Result Modal
        const modal = document.getElementById('result-modal');
        const scoreDisplay = document.getElementById('score-display');
        const msg = document.getElementById('result-message');
        
        scoreDisplay.textContent = `${score}/${totalQuestions}`;
        
        if (score === totalQuestions) {
            msg.textContent = "Xuất sắc! Bạn đã làm đúng tất cả!";
            msg.style.color = "var(--success-color)";
        } else if (score > totalQuestions * 0.7) {
            msg.textContent = "Làm tốt lắm! Cố gắng phát huy nhé.";
            msg.style.color = "var(--primary-color)";
        } else {
            msg.textContent = "Hãy xem lại phần giải thích để hiểu rõ hơn nhé.";
            msg.style.color = "var(--error-color)";
        }
        
        modal.style.display = 'flex';
        updateProgress();
    }

    function closeModal() {
        document.getElementById('result-modal').style.display = 'none';
    }

    // Initialize
    window.onload = renderQuiz;

</script>

</body>
</html>
