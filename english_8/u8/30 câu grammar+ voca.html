<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 3: Shopping & Services Vocabulary - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8854C0; /* Tím Pastel */
            --primary-dark: #6c429c;
            --secondary: #00C9A7; /* Xanh ngọc */
            --secondary-dark: #009e82;
            --success: #00D26A; /* Xanh lá */
            --success-dark: #00a855;
            --error: #FF4757; /* Đỏ cam */
            --error-dark: #d6303e;
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-main: #2f3542;
            --text-light: #57606f;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* Ngăn bôi đen để giống app */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#d1d8e0 20%, transparent 20%),
                              radial-gradient(#d1d8e0 20%, transparent 20%);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
            margin: 0;
            padding: 20px;
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 15px 30px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 2px solid #eee;
            width: 100%;
            max-width: 800px;
            position: relative;
            z-index: 10;
        }

        h1 {
            margin: 0;
            color: var(--primary);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .teacher-name {
            font-size: 1rem;
            color: var(--text-light);
            margin-top: 5px;
            font-weight: 600;
        }

        .teacher-name i {
            color: var(--secondary);
        }

        /* PROGRESS BAR */
        .progress-container {
            width: 100%;
            max-width: 800px;
            background-color: #dfe4ea;
            border-radius: 15px;
            margin-bottom: 30px;
            height: 20px;
            overflow: hidden;
            border: 2px solid #ced6e0;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 15px;
            box-shadow: inset 0 -4px 0 rgba(0,0,0,0.1);
        }

        /* QUIZ CONTAINER */
        #quiz-container {
            width: 100%;
            max-width: 800px;
            padding-bottom: 60px;
        }

        .question-card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 0 #dfe4ea, 0 10px 20px rgba(0,0,0,0.1);
            border: 2px solid #f1f2f6;
            position: relative;
            transition: all 0.3s ease;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .q-number {
            background: var(--primary);
            color: white;
            padding: 8px 15px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 0.9rem;
            box-shadow: 0 4px 0 var(--primary-dark);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.6;
            color: var(--text-main);
            margin-bottom: 25px;
        }

        .question-text u {
            text-decoration: none;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 2px;
        }

        .hint-text {
            font-size: 0.9rem;
            color: var(--text-light);
            background: #fff3cd;
            padding: 10px 15px;
            border-radius: 10px;
            border-left: 5px solid #ffc107;
            margin-bottom: 20px;
            display: inline-block;
        }

        /* OPTIONS GRID */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            .question-text {
                font-size: 1.1rem;
            }
        }

        /* 3D BUTTONS */
        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-main);
            cursor: pointer;
            position: relative;
            box-shadow: 0 6px 0 #dcdcdc;
            transition: all 0.1s;
            text-align: left;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 0 #dcdcdc;
            border-color: var(--primary);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(6px);
            box-shadow: 0 0 0 #dcdcdc;
        }

        .option-marker {
            width: 30px;
            height: 30px;
            background: #f1f2f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: 800;
            color: var(--text-light);
            flex-shrink: 0;
        }

        /* STATES */
        .option-btn.correct {
            background: var(--success);
            color: white;
            border-color: var(--success-dark);
            box-shadow: 0 6px 0 var(--success-dark);
            transform: translateY(0);
        }
        .option-btn.correct .option-marker {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn.wrong {
            background: var(--error);
            color: white;
            border-color: var(--error-dark);
            box-shadow: 0 6px 0 var(--error-dark);
            opacity: 0.8;
        }
        .option-btn.wrong .option-marker {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn:disabled {
            cursor: default;
        }
        
        .option-btn:disabled:not(.correct):not(.wrong) {
            opacity: 0.5;
            box-shadow: none;
            transform: translateY(6px);
        }

        /* EXPLANATION BOX */
        .explanation-box {
            margin-top: 25px;
            background: #f8f9fa;
            border: 2px solid var(--secondary);
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.3s ease-out;
            position: relative;
            overflow: hidden;
        }
        
        .explanation-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--secondary);
        }

        .explanation-header {
            font-weight: 800;
            color: var(--secondary-dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-content {
            font-size: 1rem;
            line-height: 1.6;
            white-space: pre-line; /* Respect new lines from JSON */
            color: #2d3436;
        }

        .explanation-content p {
            margin: 5px 0;
        }
        
        /* Highlighting keywords in explanation */
        .highlight-vocab {
            color: #d63031;
            font-weight: 700;
            background: #ffeaa7;
            padding: 0 4px;
            border-radius: 4px;
        }

        /* ANIMATIONS */
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-2deg); }
            50% { transform: translateX(10px) rotate(2deg); }
            75% { transform: translateX(-10px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        .shake {
            animation: shake 0.4s ease-in-out;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pop {
            animation: pop 0.3s ease-in-out;
        }

        /* FOOTER & SUBMIT */
        .submit-container {
            text-align: center;
            margin-top: 20px;
        }

        .submit-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            font-weight: 700;
            box-shadow: 0 6px 0 var(--primary-dark);
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 var(--primary-dark);
            background: #9b59b6;
        }
        
        .submit-btn:active {
            transform: translateY(3px);
            box-shadow: 0 0 0;
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 0 rgba(0,0,0,0.1);
            border: 4px solid var(--primary);
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .score-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
            text-shadow: 3px 3px 0px #eee;
        }

        .feedback-text {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--text-main);
            font-weight: 700;
        }
        
        /* CONFETTI CANVAS */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

    </style>
</head>
<body>

    <header>
        <h1>Exercise 3: Shopping & Services</h1>
        <div class="teacher-name"><i class="fas fa-chalkboard-teacher"></i> Giáo viên: Ms Mai An ULIS</div>
    </header>

    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div id="quiz-container">
        <!-- Questions will be injected here by JS -->
    </div>

    <div class="submit-container">
        <button class="submit-btn" onclick="finishQuiz()">Nộp Bài <i class="fas fa-paper-plane"></i></button>
    </div>

    <!-- RESULT MODAL -->
    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2 style="color: var(--secondary); margin: 0;">KẾT QUẢ</h2>
            <div class="score-display" id="final-score">0/30</div>
            <div class="feedback-text" id="feedback-message">Làm tốt lắm!</div>
            <button class="submit-btn" onclick="location.reload()" style="font-size: 1rem; padding: 10px 30px; background: var(--secondary); box-shadow: 0 5px 0 var(--secondary-dark);">Làm lại</button>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

<script>
    // --- AUDIO SYSTEM (Web Audio API) ---
    // Tạo âm thanh mà không cần file ngoài để đảm bảo tính "Single File"
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            // Ding sound (High pitch sine wave, fading out)
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } else {
            // Buzz sound (Low pitch sawtooth, short)
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // --- DATA ---
    const quizData = {
  "questions": [
    {
      "questionNumber": 1,
      "question": "Some people go to the _______ for entertainment.",
      "answerOptions": [
        {
          "text": "shopping centres",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. shopping centres (n): trung tâm thương mại\n- B. fixed price (n phrase): giá cố định\n- C. shopping list (n phrase): danh sách mua sắm\n- D. convenience store (n phrase): cửa hàng tiện lợi\n\n2. Giải thích: Để \"entertainment\" (giải trí) thì mọi người thường đến trung tâm thương mại lớn có rạp phim, khu vui chơi.\n\n3. Dịch câu: Một số người đi đến các trung tâm thương mại để giải trí.",
          "isCorrect": true
        },
        {
          "text": "fixed price",
          "rationale": "❌ Chưa chính xác. \"Fixed price\" (n) là \"giá niêm yết/cố định\", không phải là địa điểm để đi đến.",
          "isCorrect": false
        },
        {
          "text": "shopping list",
          "rationale": "❌ Chưa chính xác. \"Shopping list\" (n) là \"danh sách đồ cần mua\", không phải địa điểm.",
          "isCorrect": false
        },
        {
          "text": "convenience store",
          "rationale": "❌ Chưa chính xác. \"Convenience store\" (n) là \"cửa hàng tiện lợi\" (như Circle K, 7-Eleven), thường chỉ để mua nhanh chứ ít khi dùng cho mục đích \"giải trí\" như shopping centres.",
          "isCorrect": false
        }
      ],
      "hint": "Nơi này thường rất lớn, có nhiều cửa hàng và khu vui chơi bên trong."
    },
    {
      "questionNumber": 2,
      "question": "The shop owner treats his _______ with a lot of respects.",
      "answerOptions": [
        {
          "text": "item",
          "rationale": "❌ Chưa chính xác. \"Item\" (n) là \"món hàng\", vật vô tri.",
          "isCorrect": false
        },
        {
          "text": "market",
          "rationale": "❌ Chưa chính xác. \"Market\" (n) là \"chợ\".",
          "isCorrect": false
        },
        {
          "text": "fair",
          "rationale": "❌ Chưa chính xác. \"Fair\" (n) là \"hội chợ\".",
          "isCorrect": false
        },
        {
          "text": "customers",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. item (n): món hàng\n- B. market (n): chợ\n- C. fair (n): hội chợ\n- D. customers (n): khách hàng\n\n2. Giải thích: Chủ cửa hàng cần đối xử tôn trọng với con người, ở đây là \"khách hàng\".\n\n3. Dịch câu: Chủ cửa hàng đối xử với khách hàng của mình bằng sự tôn trọng lớn.",
          "isCorrect": true
        }
      ],
      "hint": "Đây là những người đến mua hàng tại shop."
    },
    {
      "questionNumber": 3,
      "question": "She spends too much time and money shopping. She is a _______.",
      "answerOptions": [
        {
          "text": "shopaholic",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. shopaholic (n): người nghiện mua sắm\n- B. dollar store (n): cửa hàng đồng giá\n- C. overshopping (v/n): việc mua sắm quá đà\n- D. price tag (n): mác giá\n\n2. Giải thích: Câu mô tả người tiêu quá nhiều tiền và thời gian mua sắm -> Shopaholic.\n\n3. Dịch câu: Cô ấy dành quá nhiều thời gian và tiền bạc để mua sắm. Cô ấy là một tín đồ mua sắm.",
          "isCorrect": true
        },
        {
          "text": "dollar store",
          "rationale": "❌ Chưa chính xác. Đây là danh từ chỉ địa điểm (cửa hàng giá rẻ), không chỉ người.",
          "isCorrect": false
        },
        {
          "text": "overshopping",
          "rationale": "❌ Chưa chính xác. Đây là hành động hoặc sự việc, cấu trúc \"She is a...\" cần danh từ chỉ người.",
          "isCorrect": false
        },
        {
          "text": "price tag",
          "rationale": "❌ Chưa chính xác. \"Price tag\" là vật (mác giá).",
          "isCorrect": false
        }
      ],
      "hint": "Từ này dùng để chỉ người 'nghiện' mua sắm."
    },
    {
      "questionNumber": 4,
      "question": "These sports clothes are _______. They are 50% off.",
      "answerOptions": [
        {
          "text": "try on clothes",
          "rationale": "❌ Chưa chính xác. \"Try on\" (v) là động từ thử đồ.",
          "isCorrect": false
        },
        {
          "text": "hang out",
          "rationale": "❌ Chưa chính xác. \"Hang out\" (v) là đi chơi.",
          "isCorrect": false
        },
        {
          "text": "on sale",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. try on (v phrase): thử đồ\n- B. hang out (v phrase): đi chơi\n- C. on sale (idiom): đang giảm giá\n- D. online shop (n): cửa hàng trực tuyến\n\n2. Giải thích: \"50% off\" nghĩa là giảm giá một nửa, tương ứng với \"on sale\".\n\n3. Dịch câu: Những bộ đồ thể thao này đang giảm giá. Chúng được giảm 50%.",
          "isCorrect": true
        },
        {
          "text": "online shop",
          "rationale": "❌ Chưa chính xác. Không phù hợp ngữ cảnh giảm 50% bằng \"on sale\".",
          "isCorrect": false
        }
      ],
      "hint": "Cụm từ này nghĩa là hàng đang được bán với giá thấp hơn bình thường."
    },
    {
      "questionNumber": 5,
      "question": "He thinks that there's nothing worth buying at a _______.",
      "answerOptions": [
        {
          "text": "convenience",
          "rationale": "❌ Chưa chính xác. \"Convenience\" (n) là sự tiện lợi (trừu tượng). Muốn chỉ nơi chốn phải là \"convenience store\".",
          "isCorrect": false
        },
        {
          "text": "dollar store",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. convenience (n): sự tiện lợi\n- B. dollar store (n): cửa hàng đồng giá (giá rẻ)\n- C. goods (n): hàng hóa\n- D. customer (n): khách hàng\n\n2. Giải thích: Cần một danh từ chỉ địa điểm mua sắm sau \"at a\". \"Dollar store\" là phù hợp nhất.\n\n3. Dịch câu: Anh ấy nghĩ rằng chẳng có gì đáng mua ở một cửa hàng đồng giá cả.",
          "isCorrect": true
        },
        {
          "text": "goods",
          "rationale": "❌ Chưa chính xác. \"Goods\" là danh từ số nhiều, không đi sau mạo từ \"a\".",
          "isCorrect": false
        },
        {
          "text": "customer",
          "rationale": "❌ Chưa chính xác. Không thể mua đồ \"tại một khách hàng\".",
          "isCorrect": false
        }
      ],
      "hint": "Đây là tên một loại cửa hàng bán đồ giá rẻ (thường là 1 đô la)."
    },
    {
      "questionNumber": 6,
      "question": "There are a lot of _______ fruit and vegetables at a farmer's market.",
      "answerOptions": [
        {
          "text": "home-made",
          "rationale": "❌ Chưa chính xác. \"Home-made\" (adj) thường dùng cho đồ ăn đã qua chế biến (bánh, mứt...), còn rau quả tươi thì dùng từ khác.",
          "isCorrect": false
        },
        {
          "text": "outdoor",
          "rationale": "❌ Chưa chính xác. \"Outdoor\" (adj) là ngoài trời, không dùng để chỉ nguồn gốc rau quả.",
          "isCorrect": false
        },
        {
          "text": "home-grown",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. home-made (adj): nhà làm (chế biến)\n- B. outdoor (adj): ngoài trời\n- C. home-grown (adj): nhà trồng (cây cối)\n- D. offline (adj): ngoại tuyến\n\n2. Giải thích: Với trái cây (fruit) và rau củ (vegetables), ta dùng \"home-grown\" để chỉ việc tự trồng trọt.\n\n3. Dịch câu: Có rất nhiều trái cây và rau củ nhà trồng tại chợ nông sản.",
          "isCorrect": true
        },
        {
          "text": "offline",
          "rationale": "❌ Chưa chính xác. \"Offline\" liên quan đến mạng internet.",
          "isCorrect": false
        }
      ],
      "hint": "Từ này dùng cho cây cối, rau củ được trồng tại vườn nhà."
    },
    {
      "questionNumber": 7,
      "question": "How much is it? I can’t find the _______.",
      "answerOptions": [
        {
          "text": "during sales",
          "rationale": "❌ Chưa chính xác. Cụm từ này nghĩa là \"trong đợt giảm giá\".",
          "isCorrect": false
        },
        {
          "text": "online shop",
          "rationale": "❌ Chưa chính xác. Đang cầm đồ hỏi giá thì không tìm \"online shop\".",
          "isCorrect": false
        },
        {
          "text": "discount shop",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "price tag",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. during sales (phrase): trong đợt giảm giá\n- B. online shop (n): cửa hàng trực tuyến\n- C. discount shop (n): cửa hàng giảm giá\n- D. price tag (n): mác giá/thẻ giá\n\n2. Giải thích: Hỏi giá tiền (How much) thì cần nhìn vào \"mác giá\".\n\n3. Dịch câu: Cái này bao nhiêu tiền vậy? Tôi không tìm thấy mác giá.",
          "isCorrect": true
        }
      ],
      "hint": "Đây là mảnh giấy nhỏ gắn trên sản phẩm ghi giá tiền."
    },
    {
      "questionNumber": 8,
      "question": "The shop sells only fresh local _______.",
      "answerOptions": [
        {
          "text": "produce",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. produce (n): nông sản\n- B. access (n): sự tiếp cận\n- C. bargain (n): món hời\n- D. sale (n): đợt bán hàng\n\n2. Giải thích: \"Fresh local produce\" là cụm từ phổ biến nghĩa là nông sản tươi sống của địa phương.\n\n3. Dịch câu: Cửa hàng chỉ bán nông sản tươi của địa phương.",
          "isCorrect": true
        },
        {
          "text": "access",
          "rationale": "❌ Chưa chính xác. Sai nghĩa.",
          "isCorrect": false
        },
        {
          "text": "bargain",
          "rationale": "❌ Chưa chính xác. Sai nghĩa.",
          "isCorrect": false
        },
        {
          "text": "sale",
          "rationale": "❌ Chưa chính xác. Sai nghĩa.",
          "isCorrect": false
        }
      ],
      "hint": "Danh từ này chỉ chung các sản phẩm nông nghiệp như rau, củ, quả."
    },
    {
      "questionNumber": 9,
      "question": "The _______ chain announced that it was cutting the cost of all its fresh and frozen meat.",
      "answerOptions": [
        {
          "text": "item",
          "rationale": "❌ Chưa chính xác. Item là món hàng.",
          "isCorrect": false
        },
        {
          "text": "shopper",
          "rationale": "❌ Chưa chính xác. Shopper là người mua.",
          "isCorrect": false
        },
        {
          "text": "supermarket",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. item (n): món hàng\n- B. shopper (n): người mua sắm\n- C. supermarket (n): siêu thị\n- D. fair (n): hội chợ\n\n2. Giải thích: \"Supermarket chain\" (chuỗi siêu thị) là tổ chức kinh doanh thực phẩm quy mô lớn.\n\n3. Dịch câu: Chuỗi siêu thị thông báo rằng họ đang cắt giảm chi phí cho tất cả các loại thịt tươi và đông lạnh.",
          "isCorrect": true
        },
        {
          "text": "fair",
          "rationale": "❌ Chưa chính xác. Fair là hội chợ.",
          "isCorrect": false
        }
      ],
      "hint": "Nơi bán thịt tươi và đông lạnh quy mô lớn, thường có nhiều chi nhánh (chain)."
    },
    {
      "questionNumber": 10,
      "question": "The children were dressed in Halloween _______.",
      "answerOptions": [
        {
          "text": "costumes",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. costumes (n): trang phục hóa trang\n- B. farmers (n): nông dân\n- C. markets (n): chợ\n- D. prices (n): giá cả\n\n2. Giải thích: Vào dịp Halloween thì trẻ em mặc \"hóa trang\".\n\n3. Dịch câu: Lũ trẻ đã mặc trang phục Halloween.",
          "isCorrect": true
        },
        {
          "text": "farmers",
          "rationale": "❌ Chưa chính xác. Sai nghĩa.",
          "isCorrect": false
        },
        {
          "text": "markets",
          "rationale": "❌ Chưa chính xác. Sai nghĩa.",
          "isCorrect": false
        },
        {
          "text": "prices",
          "rationale": "❌ Chưa chính xác. Sai nghĩa.",
          "isCorrect": false
        }
      ],
      "hint": "Quần áo đặc biệt dùng để đóng giả nhân vật."
    },
    {
      "questionNumber": 11,
      "question": "The _______ of the painting was kept secret.",
      "answerOptions": [
        {
          "text": "customer",
          "rationale": "❌ Chưa chính xác. Trong giao dịch tranh ảnh, người ta dùng Buyer (người mua) hoặc Seller (người bán).",
          "isCorrect": false
        },
        {
          "text": "doctor",
          "rationale": "❌ Chưa chính xác. Không liên quan.",
          "isCorrect": false
        },
        {
          "text": "seller",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. customer (n): khách hàng\n- B. doctor (n): bác sĩ\n- C. seller (n): người bán\n- D. teacher (n): giáo viên\n\n2. Giải thích: Trong các cuộc mua bán tranh nghệ thuật, danh tính \"người bán\" (seller) thường được giữ kín.\n\n3. Dịch câu: Danh tính người bán bức tranh đã được giữ bí mật.",
          "isCorrect": true
        },
        {
          "text": "teacher",
          "rationale": "❌ Chưa chính xác. Không liên quan.",
          "isCorrect": false
        }
      ],
      "hint": "Người sở hữu bức tranh và muốn bán nó đi."
    },
    {
      "questionNumber": 12,
      "question": "All our fruit comes from the farmers’ _______.",
      "answerOptions": [
        {
          "text": "clothes",
          "rationale": "❌ Chưa chính xác. Clothes là quần áo.",
          "isCorrect": false
        },
        {
          "text": "buyer",
          "rationale": "❌ Chưa chính xác. Buyer là người mua.",
          "isCorrect": false
        },
        {
          "text": "dollar store",
          "rationale": "❌ Chưa chính xác. Không ai gọi là \"farmers' dollar store\".",
          "isCorrect": false
        },
        {
          "text": "market",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. clothes (n): quần áo\n- B. buyer (n): người mua\n- C. dollar store (n): cửa hàng đồng giá\n- D. market (n): chợ\n\n2. Giải thích: Cụm từ \"farmers' market\" nghĩa là chợ nông sản.\n\n3. Dịch câu: Tất cả trái cây của chúng tôi đều đến từ chợ nông sản.",
          "isCorrect": true
        }
      ],
      "hint": "Đây là nơi nông dân trực tiếp mang hàng hóa ra bán."
    },
    {
      "questionNumber": 13,
      "question": "Most _______ stores are located on busy street corners or at gas stations.",
      "answerOptions": [
        {
          "text": "goods",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "difference",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "convenience",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. goods (n): hàng hóa\n- B. difference (n): sự khác biệt\n- C. convenience (n): sự tiện lợi\n- D. range (n): phạm vi\n\n2. Giải thích: \"Convenience stores\" (cửa hàng tiện lợi) thường mở ở cây xăng hoặc góc phố.\n\n3. Dịch câu: Hầu hết các cửa hàng tiện lợi đều nằm ở các góc phố sầm uất hoặc tại các trạm xăng.",
          "isCorrect": true
        },
        {
          "text": "range",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Loại cửa hàng mở cửa muộn hoặc 24/7, bán đồ thiết yếu."
    },
    {
      "questionNumber": 14,
      "question": "She used to be an absolute _______ until she had a baby.",
      "answerOptions": [
        {
          "text": "supermarket",
          "rationale": "❌ Chưa chính xác. Người không thể là \"supermarket\".",
          "isCorrect": false
        },
        {
          "text": "bargain",
          "rationale": "❌ Chưa chính xác. Bargain là món hời.",
          "isCorrect": false
        },
        {
          "text": "buyer",
          "rationale": "❌ Chưa chính xác. Từ này quá chung chung.",
          "isCorrect": false
        },
        {
          "text": "shopaholic",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. supermarket (n): siêu thị\n- B. bargain (n): món hời\n- C. buyer (n): người mua\n- D. shopaholic (n): người nghiện mua sắm\n\n2. Giải thích: \"Absolute shopaholic\" nhấn mạnh mức độ nghiện mua sắm.\n\n3. Dịch câu: Cô ấy từng là một tín đồ mua sắm thực thụ cho đến khi cô ấy có em bé.",
          "isCorrect": true
        }
      ],
      "hint": "Người rất mê mua sắm."
    },
    {
      "questionNumber": 15,
      "question": "A _______ shop is a shop that sells unusual or special products.",
      "answerOptions": [
        {
          "text": "speciality",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. speciality (n/adj): đặc sản/chuyên doanh\n- B. costumer (n): người làm trang phục (khác với customer)\n- C. price tag (n): mác giá\n- D. market (n): chợ\n\n2. Giải thích: Cửa hàng bán đồ đặc biệt gọi là \"speciality shop\" (cửa hàng chuyên doanh).\n\n3. Dịch câu: Cửa hàng chuyên doanh là cửa hàng bán các sản phẩm độc lạ hoặc đặc biệt.",
          "isCorrect": true
        },
        {
          "text": "costumer",
          "rationale": "❌ Chưa chính xác. Từ này nghĩa là thợ may trang phục.",
          "isCorrect": false
        },
        {
          "text": "price tag",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "market",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Từ này có nghĩa là 'đặc sản' hoặc 'chuyên môn'."
    },
    {
      "questionNumber": 16,
      "question": "They sell a wide _______ of skin-care products.",
      "answerOptions": [
        {
          "text": "price",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "convenience",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "sale",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "range",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. price (n): giá\n- B. convenience (n): sự tiện lợi\n- C. sale (n): việc bán hàng\n- D. range (n): phạm vi/chủng loại\n\n2. Giải thích: Cụm từ \"a wide range of\" nghĩa là \"nhiều loại đa dạng\".\n\n3. Dịch câu: Họ bán rất nhiều chủng loại sản phẩm chăm sóc da đa dạng.",
          "isCorrect": true
        }
      ],
      "hint": "Cụm từ 'a wide ... of' nghĩa là sự đa dạng."
    },
    {
      "questionNumber": 17,
      "question": "Click on this link to visit our _______ bookstore.",
      "answerOptions": [
        {
          "text": "large",
          "rationale": "❌ Chưa chính xác. Không hợp với hành động \"click link\".",
          "isCorrect": false
        },
        {
          "text": "offline",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "online",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. large (adj): rộng lớn\n- B. offline (adj): ngoại tuyến\n- C. online (adj): trực tuyến\n- D. narrow (adj): hẹp\n\n2. Giải thích: Bấm vào đường link thì sẽ dẫn đến cửa hàng \"trực tuyến\".\n\n3. Dịch câu: Hãy nhấp vào đường link này để ghé thăm hiệu sách trực tuyến của chúng tôi.",
          "isCorrect": true
        },
        {
          "text": "narrow",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Hiệu sách trên mạng internet."
    },
    {
      "questionNumber": 18,
      "question": "We had lunch at a(n) _______ café in the city square.",
      "answerOptions": [
        {
          "text": "open-air",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. open-air (adj): ngoài trời/lộ thiên\n- B. farmers’ market (n): chợ nông sản\n- C. price tag (n): mác giá\n- D. dollar store (n): cửa hàng giá rẻ\n\n2. Giải thích: \"Open-air café\" là quán cà phê không gian mở, phù hợp với vị trí quảng trường.\n\n3. Dịch câu: Chúng tôi đã ăn trưa tại một quán cà phê ngoài trời ở quảng trường thành phố.",
          "isCorrect": true
        },
        {
          "text": "farmers’ market",
          "rationale": "❌ Chưa chính xác. Cấu trúc câu đang cần tính từ bổ nghĩa cho \"café\".",
          "isCorrect": false
        },
        {
          "text": "price tag",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "dollar store",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Quán này không ở trong nhà kín mà ở không gian thoáng đãng."
    },
    {
      "questionNumber": 19,
      "question": "The family sells their _______ vegetables at the local market.",
      "answerOptions": [
        {
          "text": "home-grown",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. home-grown (adj): nhà trồng\n- B. outdoor (adj): ngoài trời\n- C. home-made (adj): nhà làm (thủ công/nấu nướng)\n- D. offline (adj): ngoại tuyến\n\n2. Giải thích: Rau củ (vegetables) thì dùng \"home-grown\".\n\n3. Dịch câu: Gia đình bán các loại rau củ nhà trồng được tại chợ địa phương.",
          "isCorrect": true
        },
        {
          "text": "outdoor",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "home-made",
          "rationale": "❌ Chưa chính xác. Dùng cho món ăn đã nấu.",
          "isCorrect": false
        },
        {
          "text": "offline",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Rau củ được trồng tại vườn nhà."
    },
    {
      "questionNumber": 20,
      "question": "A bike is a very _______ way of getting around.",
      "answerOptions": [
        {
          "text": "popular",
          "rationale": "❌ Chưa chính xác. Dù xe đạp phổ biến, nhưng trong ngữ cảnh so sánh phương tiện, sự \"tiện lợi\" (convenient) thường được nhấn mạnh hơn.",
          "isCorrect": false
        },
        {
          "text": "convenient",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. popular (adj): phổ biến\n- B. convenient (adj): tiện lợi/thuận tiện\n- C. attractive (adj): hấp dẫn\n- D. online (adj): trực tuyến\n\n2. Giải thích: Xe đạp tiện lợi vì dễ di chuyển, dễ đỗ xe.\n\n3. Dịch câu: Xe đạp là một cách di chuyển rất thuận tiện.",
          "isCorrect": true
        },
        {
          "text": "attractive",
          "rationale": "❌ Chưa chính xác. Ít dùng để mô tả phương tiện theo cách này.",
          "isCorrect": false
        },
        {
          "text": "online",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Tính từ chỉ sự thuận tiện, dễ dàng."
    },
    {
      "questionNumber": 21,
      "question": "Farmers’ markets are a traditional way of selling home-grown fruits and _______ products effectively.",
      "answerOptions": [
        {
          "text": "home-grown",
          "rationale": "❌ Chưa chính xác. Bị lặp từ (đã có ở trước).",
          "isCorrect": false
        },
        {
          "text": "homeless",
          "rationale": "❌ Chưa chính xác. Nghĩa là vô gia cư.",
          "isCorrect": false
        },
        {
          "text": "home-made",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. home-grown (adj): nhà trồng\n- B. homeless (adj): vô gia cư\n- C. home-made (adj): nhà làm (thủ công)\n- D. homesick (adj): nhớ nhà\n\n2. Giải thích: Ngoài trái cây \"nhà trồng\", chợ nông sản còn bán các sản phẩm \"nhà làm\" (mứt, bánh...).\n\n3. Dịch câu: Chợ nông sản là phương thức truyền thống để bán trái cây nhà trồng và các sản phẩm nhà làm một cách hiệu quả.",
          "isCorrect": true
        },
        {
          "text": "homesick",
          "rationale": "❌ Chưa chính xác. Nghĩa là nhớ nhà.",
          "isCorrect": false
        }
      ],
      "hint": "Sản phẩm được làm thủ công tại gia đình (như mứt, bánh)."
    },
    {
      "questionNumber": 22,
      "question": "These _______ prices give farmers a good life.",
      "answerOptions": [
        {
          "text": "wandered",
          "rationale": "❌ Chưa chính xác. Nghĩa là đi lang thang.",
          "isCorrect": false
        },
        {
          "text": "discounted",
          "rationale": "❌ Chưa chính xác. Giá giảm (discounted) thì nông dân sẽ ít lãi, khó có \"good life\".",
          "isCorrect": false
        },
        {
          "text": "fixed",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. wandered (v): đi lang thang\n- B. discounted (adj): giảm giá\n- C. fixed (adj): cố định/ổn định\n- D. attracted (v): thu hút\n\n2. Giải thích: \"Fixed prices\" (giá cố định/ổn định) giúp nông dân đảm bảo thu nhập, tránh bị ép giá.\n\n3. Dịch câu: Những mức giá cố định này mang lại cho người nông dân một cuộc sống tốt đẹp.",
          "isCorrect": true
        },
        {
          "text": "attracted",
          "rationale": "❌ Chưa chính xác. Sai nghĩa.",
          "isCorrect": false
        }
      ],
      "hint": "Giá cả ổn định, không bị thay đổi thất thường."
    },
    {
      "questionNumber": 23,
      "question": "Drivers should park in a(n) _______ area to prevent theft at night.",
      "answerOptions": [
        {
          "text": "well-lit",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. well-lit (adj): được chiếu sáng tốt\n- B. home-grown (adj): nhà trồng\n- C. convenient (adj): tiện lợi\n- D. online (adj): trực tuyến\n\n2. Giải thích: Để tránh trộm cắp (prevent theft) vào ban đêm, cần đỗ xe nơi có nhiều ánh sáng.\n\n3. Dịch câu: Các tài xế nên đỗ xe ở khu vực đủ ánh sáng để phòng ngừa trộm cắp vào ban đêm.",
          "isCorrect": true
        },
        {
          "text": "home-grown",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "convenient",
          "rationale": "❌ Chưa chính xác. Tiện lợi không nhất thiết ngăn được trộm.",
          "isCorrect": false
        },
        {
          "text": "online",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Khu vực có nhiều đèn chiếu sáng."
    },
    {
      "questionNumber": 24,
      "question": "All the parks in our city are open _______.",
      "answerOptions": [
        {
          "text": "year-round",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. year-round (adv/adj): quanh năm\n- B. home-grown (adj): nhà trồng\n- C. decisive (adj): quyết đoán\n- D. home-made (adj): nhà làm\n\n2. Giải thích: Công viên mở cửa \"quanh năm\".\n\n3. Dịch câu: Tất cả các công viên trong thành phố của chúng tôi đều mở cửa quanh năm.",
          "isCorrect": true
        },
        {
          "text": "home-grown",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "decisive",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "home-made",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Mở cửa suốt cả năm, không nghỉ."
    },
    {
      "questionNumber": 25,
      "question": "The store has changed its image in an effort to win back _______ customers.",
      "answerOptions": [
        {
          "text": "strict",
          "rationale": "❌ Chưa chính xác. Strict là nghiêm khắc.",
          "isCorrect": false
        },
        {
          "text": "happy",
          "rationale": "❌ Chưa chính xác. Khách đang vui (happy) thì không cần phải \"win back\" (giành lại).",
          "isCorrect": false
        },
        {
          "text": "humble",
          "rationale": "❌ Chưa chính xác. Humble là khiêm tốn.",
          "isCorrect": false
        },
        {
          "text": "unhappy",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. strict (adj): nghiêm khắc\n- B. happy (adj): vui vẻ\n- C. humble (adj): khiêm tốn\n- D. unhappy (adj): không hài lòng/buồn phiền\n\n2. Giải thích: Phải giành lại (win back) những khách hàng đã \"không hài lòng\" trước đó.\n\n3. Dịch câu: Cửa hàng đã thay đổi hình ảnh của mình trong nỗ lực giành lại những khách hàng không hài lòng.",
          "isCorrect": true
        }
      ],
      "hint": "Những khách hàng đã phật lòng hoặc bỏ đi."
    },
    {
      "questionNumber": 26,
      "question": "They are offering a(n) _______ gift with each product we buy.",
      "answerOptions": [
        {
          "text": "expensive",
          "rationale": "❌ Chưa chính xác. Hiếm khi tặng quà đắt tiền (expensive) cho mỗi sản phẩm mua.",
          "isCorrect": false
        },
        {
          "text": "cheap",
          "rationale": "❌ Chưa chính xác. Trong quảng cáo, người ta ít dùng từ \"cheap gift\" (quà rẻ tiền) vì nghe tiêu cực.",
          "isCorrect": false
        },
        {
          "text": "unhappy",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "free",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. expensive (adj): đắt đỏ\n- B. cheap (adj): rẻ tiền\n- C. unhappy (adj): không vui\n- D. free (adj): miễn phí\n\n2. Giải thích: \"Free gift\" (quà tặng miễn phí) là chiêu thức bán hàng phổ biến.\n\n3. Dịch câu: Họ đang tặng một món quà miễn phí với mỗi sản phẩm chúng tôi mua.",
          "isCorrect": true
        }
      ],
      "hint": "Quà tặng không tính tiền."
    },
    {
      "questionNumber": 27,
      "question": "I prefer to do my ____________ at shopping malls.",
      "answerOptions": [
        {
          "text": "shopper",
          "rationale": "❌ Chưa chính xác. Shopper là người mua.",
          "isCorrect": false
        },
        {
          "text": "shops",
          "rationale": "❌ Chưa chính xác. Động từ shops (chia s/es).",
          "isCorrect": false
        },
        {
          "text": "shopping",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. shopper (n): người mua sắm\n- B. shops (n/v): cửa hàng/mua sắm\n- C. shopping (n/v): việc mua sắm\n- D. shop (n/v): cửa hàng/mua sắm\n\n2. Giải thích: Cấu trúc \"do the shopping\" hoặc \"do my shopping\" (đi mua sắm).\n\n3. Dịch câu: Tôi thích đi mua sắm tại các trung tâm thương mại hơn.",
          "isCorrect": true
        },
        {
          "text": "shop",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Cụm từ 'do my ...' nghĩa là đi mua sắm."
    },
    {
      "questionNumber": 28,
      "question": "In our group, most people spend most of their money ____________ clothes.",
      "answerOptions": [
        {
          "text": "of",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "at",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "in",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "on",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. of (prep): của\n- B. at (prep): tại\n- C. in (prep): trong\n- D. on (prep): trên/vào\n\n2. Giải thích: Cấu trúc \"spend money ON something\" (tiêu tiền vào việc gì).\n\n3. Dịch câu: Trong nhóm của chúng tôi, hầu hết mọi người tiêu phần lớn tiền của họ vào quần áo.",
          "isCorrect": true
        }
      ],
      "hint": "Giới từ đi với 'spend money'."
    },
    {
      "questionNumber": 29,
      "question": "She should call the shipping company to complain ____________ the problem.",
      "answerOptions": [
        {
          "text": "to",
          "rationale": "❌ Chưa chính xác. Complain TO someone (phàn nàn VỚI ai), nhưng ở đây là phàn nàn VỀ vấn đề.",
          "isCorrect": false
        },
        {
          "text": "about",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. to (prep): tới\n- B. about (prep): về\n- C. on (prep): trên\n- D. with (prep): với\n\n2. Giải thích: Cấu trúc \"complain ABOUT something\" (phàn nàn về điều gì).\n\n3. Dịch câu: Cô ấy nên gọi cho công ty vận chuyển để phàn nàn về vấn đề đó.",
          "isCorrect": true
        },
        {
          "text": "on",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        },
        {
          "text": "with",
          "rationale": "❌ Chưa chính xác.",
          "isCorrect": false
        }
      ],
      "hint": "Giới từ đi với 'complain' khi nói về nguyên nhân phàn nàn."
    },
    {
      "questionNumber": 30,
      "question": "What do you like about shopping at a ____________ store?",
      "answerOptions": [
        {
          "text": "inconvenient",
          "rationale": "❌ Chưa chính xác. Nghĩa là bất tiện.",
          "isCorrect": false
        },
        {
          "text": "convenience",
          "rationale": "✅ Chính xác!\n\n1. Phân tích từ vựng:\n- A. inconvenient (adj): bất tiện\n- B. convenience (n): sự tiện lợi\n- C. convenient (adj): tiện lợi\n- D. conveniently (adv): một cách tiện lợi\n\n2. Giải thích: Cụm danh từ ghép \"convenience store\" (cửa hàng tiện lợi). Dù \"convenient\" là tính từ nhưng tên loại cửa hàng này là \"convenience store\".\n\n3. Dịch câu: Bạn thích điều gì khi mua sắm tại một cửa hàng tiện lợi?",
          "isCorrect": true
        },
        {
          "text": "convenient",
          "rationale": "❌ Chưa chính xác. Rất dễ nhầm, nhưng tên gọi đúng là \"convenience store\" (danh từ ghép), không phải \"convenient store\".",
          "isCorrect": false
        },
        {
          "text": "conveniently",
          "rationale": "❌ Chưa chính xác. Trạng từ.",
          "isCorrect": false
        }
      ],
      "hint": "Tên loại cửa hàng này là danh từ ghép: ... store."
    }
  ]
};

    // --- GAME LOGIC ---
    let currentScore = 0;
    const totalQuestions = quizData.questions.length;
    const answeredState = new Array(totalQuestions).fill(false);

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        
        quizData.questions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `q-card-${index}`;

            const optionLetters = ['A', 'B', 'C', 'D'];
            
            // Generate Options HTML
            let optionsHtml = '';
            q.answerOptions.forEach((opt, optIndex) => {
                optionsHtml += `
                    <button class="option-btn" 
                            id="btn-${index}-${optIndex}"
                            onclick="checkAnswer(${index}, ${optIndex}, ${opt.isCorrect})">
                        <div class="option-marker">${optionLetters[optIndex]}</div>
                        ${opt.text}
                    </button>
                `;
            });

            card.innerHTML = `
                <div class="question-header">
                    <span class="q-number">Câu ${q.questionNumber}/${totalQuestions}</span>
                </div>
                <div class="question-text">${q.question}</div>
                ${q.hint ? `<div class="hint-text"><i class="fas fa-lightbulb"></i> Gợi ý: ${q.hint}</div>` : ''}
                
                <div class="options-grid">
                    ${optionsHtml}
                </div>

                <div class="explanation-box" id="explanation-${index}">
                    <div class="explanation-header">
                        <i class="fas fa-chalkboard-teacher"></i> Cô Mai An giải thích:
                    </div>
                    <div class="explanation-content" id="explanation-content-${index}"></div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    function checkAnswer(qIndex, optIndex, isCorrect) {
        if (answeredState[qIndex]) return; // Prevent re-answering
        answeredState[qIndex] = true;

        const selectedBtn = document.getElementById(`btn-${qIndex}-${optIndex}`);
        const card = document.getElementById(`q-card-${qIndex}`);
        const explanationBox = document.getElementById(`explanation-${qIndex}`);
        const explanationContent = document.getElementById(`explanation-content-${qIndex}`);
        
        // Disable all buttons in this question
        const allBtns = card.querySelectorAll('.option-btn');
        allBtns.forEach(btn => btn.disabled = true);

        // --- NEW LOGIC FOR DETAILED EXPLANATION ON WRONG ANSWERS ---
        
        // 1. Get the correct option to extract the full deep-dive explanation
        const correctOption = quizData.questions[qIndex].answerOptions.find(o => o.isCorrect);
        const fullExplanation = correctOption.rationale;

        // 2. Get the specific rationale for the clicked option (Why is THIS specific option wrong?)
        const specificRationale = quizData.questions[qIndex].answerOptions[optIndex].rationale;

        let finalExplanationHTML = '';

        if (isCorrect) {
            // Correct answer: Use the full explanation as is
            finalExplanationHTML = formatRationale(specificRationale);
            
            // UI Feedback
            selectedBtn.classList.add('correct');
            selectedBtn.querySelector('.option-marker').innerHTML = '<i class="fas fa-check"></i>';
            playSound('correct');
            card.classList.add('pop');
            fireConfetti(selectedBtn); 
            currentScore++;

        } else {
            // Wrong answer: 
            // 1. Show specific error message.
            // 2. Append the detailed analysis from the correct answer (stripping the "✅ Chính xác!" part).
            
            // Remove "✅ Chính xác!" from the beginning of the full explanation to avoid confusion
            let generalPart = fullExplanation.replace(/✅ Chính xác![\s\n]*/, '');
            
            // Combine them with a separator
            finalExplanationHTML = formatRationale(specificRationale + '\n\n<div style="border-top: 1px dashed #ccc; margin: 15px 0; padding-top:10px;"><strong>🔍 Phân tích chi tiết 4 đáp án:</strong>\n\n' + generalPart + '</div>');
            
            // UI Feedback
            selectedBtn.classList.add('wrong');
            selectedBtn.querySelector('.option-marker').innerHTML = '<i class="fas fa-times"></i>';
            playSound('wrong');
            card.classList.add('shake');
            
            // Highlight the correct answer
            quizData.questions[qIndex].answerOptions.forEach((opt, i) => {
                if (opt.isCorrect) {
                    const correctBtn = document.getElementById(`btn-${qIndex}-${i}`);
                    correctBtn.classList.add('correct');
                    correctBtn.querySelector('.option-marker').innerHTML = '<i class="fas fa-check"></i>';
                }
            });
        }

        // Render explanation
        explanationContent.innerHTML = finalExplanationHTML;
        explanationBox.style.display = 'block';
        updateProgress();
    }

    function formatRationale(text) {
        // Find text patterns to bold or style
        // 1. Headers like "1. Phân tích...", "2. Giải thích..."
        let formatted = text.replace(/(\d\.\s+[\p{L}\s]+:)/gu, '<strong>$1</strong>');
        
        // Highlight correct/incorrect icons
        formatted = formatted.replace('✅ Chính xác!', '<span style="color:var(--success); font-weight:800; font-size:1.1rem">✅ Chính xác!</span>');
        formatted = formatted.replace('❌ Chưa chính xác.', '<span style="color:var(--error); font-weight:800; font-size:1.1rem">❌ Chưa chính xác.</span>');
        
        return formatted;
    }

    function updateProgress() {
        const answeredCount = answeredState.filter(Boolean).length;
        const percentage = (answeredCount / totalQuestions) * 100;
        document.getElementById('progress-bar').style.width = `${percentage}%`;
    }

    function finishQuiz() {
        const answeredCount = answeredState.filter(Boolean).length;
        if (answeredCount < totalQuestions) {
            if(!confirm(`Bạn mới làm ${answeredCount}/${totalQuestions} câu. Bạn có chắc muốn nộp bài không?`)) {
                return;
            }
        }

        const modal = document.getElementById('result-modal');
        const scoreDisplay = document.getElementById('final-score');
        const feedback = document.getElementById('feedback-message');

        scoreDisplay.innerText = `${currentScore}/${totalQuestions}`;
        
        const percentage = (currentScore / totalQuestions) * 100;
        if (percentage === 100) {
            feedback.innerText = "Xuất sắc! Bạn là thiên tài từ vựng! 🏆";
            launchMegaConfetti();
        } else if (percentage >= 80) {
            feedback.innerText = "Giỏi quá! Chỉ sai một xíu thôi! 🌟";
        } else if (percentage >= 50) {
            feedback.innerText = "Khá tốt! Cố gắng luyện tập thêm nhé! 💪";
        } else {
            feedback.innerText = "Đừng buồn! Hãy xem lại giải thích và thử lại nhé! 📚";
        }

        modal.style.display = 'flex';
        playSound('correct');
    }

    // --- CONFETTI SYSTEM ---
    // Simple confetti implementation
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];

    function fireConfetti(element) {
        const rect = element.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;

        for (let i = 0; i < 30; i++) {
            particles.push({
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 10,
                vy: (Math.random() - 0.5) * 10 - 5,
                color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                size: Math.random() * 8 + 4,
                life: 100
            });
        }
    }

    function launchMegaConfetti() {
        const x = window.innerWidth / 2;
        const y = window.innerHeight / 2;
        for (let i = 0; i < 200; i++) {
            particles.push({
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 20,
                vy: (Math.random() - 0.5) * 20 - 10,
                color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                size: Math.random() * 10 + 5,
                life: 150
            });
        }
    }

    function animateConfetti() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        for (let i = 0; i < particles.length; i++) {
            const p = particles[i];
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fill();

            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.5; // Gravity
            p.life--;
            p.size *= 0.96;

            if (p.life <= 0 || p.size < 0.5) {
                particles.splice(i, 1);
                i--;
            }
        }
        requestAnimationFrame(animateConfetti);
    }

    // Handle Resize
    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    // Start
    renderQuiz();
    animateConfetti();

</script>
</body>
</html>
