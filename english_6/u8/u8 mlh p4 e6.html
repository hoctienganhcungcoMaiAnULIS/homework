<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F3F9;
            --card-bg: #FFFFFF;
            --text-dark: #2C3E50;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#8854c0 0.5px, transparent 0.5px), radial-gradient(#8854c0 0.5px, #f0f3f9 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            margin: 0;
            padding: 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, var(--primary-pink), var(--primary-teal));
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            color: white;
            position: relative;
            overflow: hidden;
        }

        header h1 {
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
        }

        header h2 {
            margin: 5px 0 0;
            font-size: 2rem;
            font-weight: 800;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        /* CARD STYLE */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05), 0 15px 20px rgba(0,0,0,0.1);
            border: 2px solid #EEE;
            position: relative;
            transition: transform 0.2s;
        }

        .section-title {
            background: var(--primary-pink);
            color: white;
            display: inline-block;
            padding: 8px 20px;
            border-radius: 15px;
            font-weight: 700;
            margin-bottom: 20px;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        /* OPTIONS (MULTIPLE CHOICE) */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn-option {
            background: white;
            border: 2px solid #E0E0E0;
            padding: 15px;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            position: relative;
            box-shadow: 0 5px 0 #E0E0E0;
        }

        .btn-option:hover {
            transform: scale(1.02);
            border-color: var(--primary-teal);
        }

        .btn-option:active {
            transform: translateY(5px);
            box-shadow: none;
        }

        .btn-option.correct {
            background-color: var(--correct-green);
            color: white;
            border-color: #00b359;
            box-shadow: 0 5px 0 #00b359;
        }

        .btn-option.wrong {
            background-color: var(--wrong-red);
            color: white;
            border-color: #d63030;
            box-shadow: 0 5px 0 #d63030;
            animation: shake 0.5s;
        }

        /* EXPLANATION BOX */
        .explanation {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #F8F9FA;
            border-left: 5px solid var(--primary-pink);
            border-radius: 10px;
            animation: slideDown 0.3s ease-out;
        }

        .explanation h4 {
            margin-top: 0;
            color: var(--primary-pink);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation p {
            margin: 5px 0;
            line-height: 1.5;
        }

        .expl-detail {
            font-size: 0.95rem;
            color: #555;
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid #EEE;
        }

        .badge-correct { color: var(--correct-green); font-weight: bold; }
        .badge-wrong { color: var(--wrong-red); font-weight: bold; }

        /* GAP FILL STYLES */
        .passage-text {
            font-size: 1.1rem;
            line-height: 2;
            text-align: justify;
        }

        .gap-fill-input {
            display: inline-block;
            min-width: 80px;
            padding: 5px 10px;
            margin: 0 5px;
            border: 2px dashed var(--primary-teal);
            border-radius: 10px;
            background: #E0F7FA;
            color: var(--primary-teal);
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            transition: 0.2s;
        }

        .gap-fill-input:hover {
            transform: scale(1.1);
            background: #B2EBF2;
        }

        .gap-fill-input.filled-correct {
            background: var(--correct-green);
            color: white;
            border-style: solid;
        }

        .gap-fill-input.filled-wrong {
            background: var(--wrong-red);
            color: white;
            border-style: solid;
        }

        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.95rem;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .glossary-table th {
            background: var(--primary-pink);
            color: white;
            padding: 12px;
            text-align: left;
        }

        .glossary-table td {
            padding: 12px;
            border-bottom: 1px solid #EEE;
            background: white;
        }

        /* SENTENCE REORDERING */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background: #F0F3F9;
            border-radius: 15px;
        }

        .word-chip {
            background: white;
            border: 2px solid var(--primary-pink);
            color: var(--primary-pink);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(136, 84, 192, 0.2);
            transition: 0.2s;
        }

        .word-chip:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        .sentence-drop-zone {
            min-height: 60px;
            border: 2px dashed #CCC;
            border-radius: 15px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            background: white;
            margin-bottom: 10px;
        }

        /* INPUT FIELD FOR TRANSFORMATION */
        .writing-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #DDD;
            border-radius: 15px;
            font-family: 'Nunito';
            font-size: 1rem;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        
        .writing-input:focus {
            outline: none;
            border-color: var(--primary-pink);
        }

        .btn-check {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 0 #00967D;
            transition: 0.2s;
        }
        
        .btn-check:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* MODAL FOR GAP FILL */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            animation: popIn 0.3s;
        }

        .modal-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            .options-grid { grid-template-columns: 1fr; }
        }
        
        /* FOOTER SCORE */
        #footer-score {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-pink);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }
    </style>
</head>
<body>

    <header>
        <h1>Gi√°o vi√™n: Ms. Mai An ULIS</h1>
        <h2>ENGLISH INTERACTIVE TEST</h2>
        <p>H·ªçc m√† ch∆°i - Ch∆°i m√† h·ªçc!</p>
    </header>

    <div class="container">

        <div class="card">
            <div class="section-title">VI. Transformation (Negative & Interrogative)</div>
            <p><strong>Y√™u c·∫ßu:</strong> Chuy·ªÉn c√°c c√¢u sau sang th·ªÉ Ph·ªß ƒë·ªãnh (-) v√† Nghi v·∫•n (?).</p>
            
            <div class="question-block" id="wr-q1">
                <p class="question-text">1. They were in Rio last summer.</p>
                <input type="text" class="writing-input" id="input-neg-1" placeholder="Type Negative (-) sentence...">
                <input type="text" class="writing-input" id="input-int-1" placeholder="Type Interrogative (?) sentence...">
                <button class="btn-check" onclick="checkWriting(1, 'They were not in Rio last summer', 'Were they in Rio last summer')">Ki·ªÉm tra</button>
                
                <div class="explanation" id="expl-wr-1">
                    <h4><span class="icon">üë©‚Äçüè´</span> Ms. Mai An gi·∫£i th√≠ch:</h4>
                    <div class="expl-detail">
                        <p><strong>Nghƒ©a:</strong> H·ªç ƒë√£ ·ªü Rio v√†o m√πa h√® nƒÉm ngo√°i.</p>
                        <p><strong>T·∫°i sao:</strong> ƒê·ªông t·ª´ ch√≠nh l√† <em>"were"</em> (qu√° kh·ª© c·ªßa to be).</p>
                        <ul>
                            <li><strong>(-) Ph·ªß ƒë·ªãnh:</strong> Th√™m "not" sau "were" &rarr; <em>were not</em> (ho·∫∑c <em>weren't</em>).</li>
                            <li><strong>(?) Nghi v·∫•n:</strong> ƒê·∫£o "Were" l√™n ƒë·∫ßu c√¢u.</li>
                        </ul>
                        <p><strong>ƒê√°p √°n ƒë√∫ng:</strong><br>
                        (-) They were not (weren't) in Rio last summer.<br>
                        (?) Were they in Rio last summer?</p>
                    </div>
                </div>
            </div>

            <hr style="margin: 20px 0; border: 0; border-top: 2px dashed #EEE;">

            <div class="question-block" id="wr-q2">
                <p class="question-text">2. We did our exercise this morning.</p>
                <input type="text" class="writing-input" id="input-neg-2" placeholder="Type Negative (-) sentence...">
                <input type="text" class="writing-input" id="input-int-2" placeholder="Type Interrogative (?) sentence...">
                <button class="btn-check" onclick="checkWriting(2, 'We did not do our exercise this morning', 'Did we do our exercise this morning')">Ki·ªÉm tra</button>
                
                <div class="explanation" id="expl-wr-2">
                    <h4><span class="icon">üë©‚Äçüè´</span> Ms. Mai An gi·∫£i th√≠ch:</h4>
                    <div class="expl-detail">
                        <p><strong>Nghƒ©a:</strong> Ch√∫ng t√¥i ƒë√£ l√†m b√†i t·∫≠p s√°ng nay.</p>
                        <p><strong>L∆∞u √Ω quan tr·ªçng:</strong> ·ªû ƒë√¢y <em>"did"</em> l√† ƒë·ªông t·ª´ th∆∞·ªùng (l√†m), kh√¥ng ph·∫£i tr·ª£ ƒë·ªông t·ª´.</p>
                        <ul>
                            <li><strong>(-) Ph·ªß ƒë·ªãnh:</strong> M∆∞·ª£n tr·ª£ ƒë·ªông t·ª´ "did not", ƒë·ªông t·ª´ ch√≠nh v·ªÅ nguy√™n th·ªÉ "do" &rarr; <em>did not do</em>.</li>
                            <li><strong>(?) Nghi v·∫•n:</strong> M∆∞·ª£n "Did" ƒë·∫£o l√™n ƒë·∫ßu, ƒë·ªông t·ª´ ch√≠nh v·ªÅ "do".</li>
                        </ul>
                        <p><strong>ƒê√°p √°n ƒë√∫ng:</strong><br>
                        (-) We did not (didn't) do our exercise this morning.<br>
                        (?) Did we do our exercise this morning?</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-title">I. Gap Fill: Basketball</div>
            <p><strong>Guide:</strong> Click v√†o c√°c √¥ tr·ªëng m√†u xanh ƒë·ªÉ ch·ªçn t·ª´ ƒë√∫ng.</p>
            
            <div class="word-bank" style="justify-content: center; background: #FFF8E1;">
                <span class="word-chip">score</span>
                <span class="word-chip">without</span>
                <span class="word-chip">sport</span>
                <span class="word-chip">each</span>
                <span class="word-chip">play</span>
                <span class="word-chip">game</span>
                <span class="word-chip">positions</span>
                <span class="word-chip">boring</span>
            </div>

            <div class="passage-text">
                Basketball is a pretty cheap <span class="gap-fill-input" onclick="openGapModal(1, 'sport')">(1)___</span> to play in terms of equipment. So long as you have shoes and clothes and a ball, you can play. You can play with 1 hoop or 2, but it is way more [fun] have knee braces, expensive shoes, and some fancy jerseys if you want, but you can play <span class="gap-fill-input" onclick="openGapModal(3, 'without')">(3)___</span> them if you want. Basketball is a <span class="gap-fill-input" onclick="openGapModal(4, 'game')">(4)___</span> of 5-on-5. There are 5 different <span class="gap-fill-input" onclick="openGapModal(5, 'positions')">(5)___</span>: point guard, shooting guard, center, small forward, and power forward. Unlike some other sports, all players can <span class="gap-fill-input" onclick="openGapModal(6, 'score')">(6)___</span> points, and there is NO goalkeeper. There isn‚Äôt a <span class="gap-fill-input" onclick="openGapModal(7, 'boring')">(7)___</span> position to play! Basketball has 4 quarters. For pro games, quarters are 15 minutes. Teams switch directions of play after <span class="gap-fill-input" onclick="openGapModal(8, 'each')">(8)___</span> quarter.
            </div>

            <div class="explanation" id="expl-gapfill-all" style="display: block; margin-top: 30px;">
                <h4><span class="icon">üìö</span> T·ª™ V·ª∞NG QUAN TR·ªåNG (GLOSSARY)</h4>
                <table class="glossary-table">
                    <thead>
                        <tr>
                            <th>Word (T·ª´ v·ª±ng)</th>
                            <th>Type (Lo·∫°i t·ª´)</th>
                            <th>Meaning (Nghƒ©a ti·∫øng Vi·ªát)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Equipment</td><td>Noun</td><td>Thi·∫øt b·ªã, d·ª•ng c·ª•</td></tr>
                        <tr><td>Hoop</td><td>Noun</td><td>C√°i r·ªï (b√≥ng r·ªï)</td></tr>
                        <tr><td>Jersey</td><td>Noun</td><td>√Åo thi ƒë·∫•u</td></tr>
                        <tr><td>Position</td><td>Noun</td><td>V·ªã tr√≠</td></tr>
                        <tr><td>Point guard</td><td>Noun</td><td>H·∫≠u v·ªá d·∫´n b√≥ng</td></tr>
                        <tr><td>Quarter</td><td>Noun</td><td>Hi·ªáp ƒë·∫•u (1/4 tr·∫≠n)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <div class="section-title">II. Reading Comprehension</div>
            <div style="background: #E8F5E9; padding: 20px; border-radius: 10px; margin-bottom: 20px; font-style: italic; border-left: 4px solid var(--correct-green);">
                <p><strong>Marie:</strong> We might go to the football match next Saturday, Cristina.<br>
                <strong>Cristina:</strong> Football? You must be joking. I can‚Äôt stand it.<br>
                <strong>Mark:</strong> No? Why not?<br>
                <strong>Cristina:</strong> Twenty two men of two teams run after a ball, trying to kick it into a net... and thousands of people shouting and screaming like madmen every time it‚Äôs a goal or not. Is this a game?<br>
                <strong>Mark:</strong> I see... you prefer things like hopscotch, hide-and-seek, blind man‚Äôs buff...<br>
                <strong>Cristina:</strong> Don‚Äôt tease me, Mark. I‚Äôm not a child anymore and there are much better sports than football.<br>
                <strong>Mark:</strong> Really?<br>
                <strong>Cristina:</strong> Yes, take volleyball, for example. It‚Äôs so exciting, the two teams try to keep the ball in motion without letting it touch the ground. No foul play, no violence.<br>
                <strong>Mark:</strong> Yes, maybe you‚Äôre right I like volleyball too. For me all ball games are great!<br>
                <strong>Cristina:</strong> Not only ball games, Mark. Don‚Äôt you like badminton, cards, chess, even darts...and things like that?<br>
                <strong>Mark:</strong> Er...of course I do.</p>
            </div>

             <div style="margin-bottom: 20px;">
                <table class="glossary-table">
                    <thead>
                        <tr><th colspan="3">üìù B·∫£ng T·ª´ V·ª±ng B·ªï Tr·ª£</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Can't stand (sth)</td><td>Phrase</td><td>Kh√¥ng th·ªÉ ch·ªãu ƒë·ª±ng/R·∫•t gh√©t</td></tr>
                        <tr><td>Scream</td><td>Verb</td><td>La h√©t</td></tr>
                        <tr><td>Hopscotch</td><td>Noun</td><td>Tr√≤ ch∆°i nh·∫£y l√≤ c√≤</td></tr>
                        <tr><td>Blind man‚Äôs buff</td><td>Noun</td><td>Tr√≤ b·ªãt m·∫Øt b·∫Øt d√™</td></tr>
                        <tr><td>Tease</td><td>Verb</td><td>Tr√™u ch·ªçc</td></tr>
                        <tr><td>Foul play</td><td>Noun</td><td>Ch∆°i x·∫•u/Ph·∫°m lu·∫≠t</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="question-block" id="mc-q1">
                <p class="question-text">1. What are Cristina and Mark talking about?</p>
                <div class="options-grid">
                    <button class="btn-option" onclick="checkMC(this, 'A', 'A', 'expl-mc-1')">A. Football</button>
                    <button class="btn-option" onclick="checkMC(this, 'B', 'A', 'expl-mc-1')">B. Volleyball</button>
                    <button class="btn-option" onclick="checkMC(this, 'C', 'A', 'expl-mc-1')">C. Ball games</button>
                    <button class="btn-option" onclick="checkMC(this, 'D', 'A', 'expl-mc-1')">D. Games</button>
                </div>
                <div class="explanation" id="expl-mc-1">
                    <h4><span class="icon">üí°</span> Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                    <div class="expl-detail">
                        <p><strong>D·ªãch c√¢u h·ªèi:</strong> Cristina v√† Mark ƒëang n√≥i v·ªÅ ch·ªß ƒë·ªÅ g√¨?</p>
                        <p><strong>ƒê√°p √°n ƒë√∫ng: A. Football (B√≥ng ƒë√°).</strong><br>
                        <em>T·∫°i sao:</em> Cu·ªôc h·ªôi tho·∫°i b·∫Øt ƒë·∫ßu b·∫±ng l·ªùi m·ªùi ƒëi xem b√≥ng ƒë√°, v√† ph·∫ßn l·ªõn n·ªôi dung l√† tranh lu·∫≠n v·ªÅ vi·ªác Cristina gh√©t b√≥ng ƒë√° nh∆∞ th·∫ø n√†o ("Football? You must be joking..."). D√π h·ªç c√≥ nh·∫Øc ƒë·∫øn c√°c m√¥n kh√°c, nh∆∞ng "Football" l√† ch·ªß ƒë·ªÅ ch√≠nh g√¢y ra cu·ªôc tranh lu·∫≠n.</p>
                        <p><em>T·∫°i sao sai:</em> B, C, D l√† nh·ªØng m√¥n ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn sau ƒë√≥ ƒë·ªÉ so s√°nh, kh√¥ng ph·∫£i ch·ªß ƒë·ªÅ xuy√™n su·ªët t·ª´ ƒë·∫ßu.</p>
                    </div>
                </div>
            </div>
            
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

            <div class="question-block" id="mc-q2">
                <p class="question-text">2. How many football players are there in each team?</p>
                <div class="options-grid">
                    <button class="btn-option" onclick="checkMC(this, 'A', 'A', 'expl-mc-2')">A. 11</button>
                    <button class="btn-option" onclick="checkMC(this, 'B', 'A', 'expl-mc-2')">B. 12</button>
                    <button class="btn-option" onclick="checkMC(this, 'C', 'A', 'expl-mc-2')">C. 20</button>
                    <button class="btn-option" onclick="checkMC(this, 'D', 'A', 'expl-mc-2')">D. 22</button>
                </div>
                <div class="explanation" id="expl-mc-2">
                    <h4><span class="icon">üí°</span> Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                    <div class="expl-detail">
                        <p><strong>D·ªãch c√¢u h·ªèi:</strong> C√≥ bao nhi√™u c·∫ßu th·ªß trong <u>m·ªói</u> ƒë·ªôi b√≥ng?</p>
                        <p><strong>ƒê√°p √°n ƒë√∫ng: A. 11.</strong><br>
                        <em>D·∫´n ch·ª©ng:</em> Cristina n√≥i: "Twenty two men of two teams..." (22 ng∆∞·ªùi c·ªßa 2 ƒë·ªôi).<br>
                        &rarr; M·ªôt ƒë·ªôi s·∫Ω c√≥: 22 chia 2 = 11 ng∆∞·ªùi.</p>
                    </div>
                </div>
            </div>

            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

            <div class="question-block" id="mc-q3">
                <p class="question-text">3. Why does Mark mention children‚Äôs games like hopscotch?</p>
                <div class="options-grid">
                    <button class="btn-option" onclick="checkMC(this, 'A', 'C', 'expl-mc-3')">A. Because Cristina likes these games.</button>
                    <button class="btn-option" onclick="checkMC(this, 'B', 'C', 'expl-mc-3')">B. Because Cristina is a child.</button>
                    <button class="btn-option" onclick="checkMC(this, 'C', 'C', 'expl-mc-3')">C. Because he wants to tease Cristina.</button>
                    <button class="btn-option" onclick="checkMC(this, 'D', 'C', 'expl-mc-3')">D. Because he wants Cristina to play these games.</button>
                </div>
                <div class="explanation" id="expl-mc-3">
                    <h4><span class="icon">üí°</span> Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                    <div class="expl-detail">
                        <p><strong>D·ªãch c√¢u h·ªèi:</strong> T·∫°i sao Mark nh·∫Øc ƒë·∫øn c√°c tr√≤ ch∆°i tr·∫ª con nh∆∞ nh·∫£y l√≤ c√≤?</p>
                        <p><strong>ƒê√°p √°n ƒë√∫ng: C. V√¨ c·∫≠u ·∫•y mu·ªën tr√™u Cristina.</strong><br>
                        <em>D·∫´n ch·ª©ng:</em> Ngay sau c√¢u n√≥i c·ªßa Mark, Cristina ƒë√°p: "Don‚Äôt tease me, Mark." (ƒê·ª´ng c√≥ tr√™u t·ªõ, Mark). Mark li·ªát k√™ c√°c tr√≤ ch∆°i tr·∫ª con ƒë·ªÉ ch√¢m ch·ªçc vi·ªác Cristina kh√¥ng th√≠ch m√¥n th·ªÉ thao m·∫°nh b·∫°o nh∆∞ b√≥ng ƒë√°.</p>
                    </div>
                </div>
            </div>

             <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

            <div class="question-block" id="mc-q4">
                <p class="question-text">4. What kind of sports and games does Cristina NOT refer?</p>
                <div class="options-grid">
                    <button class="btn-option" onclick="checkMC(this, 'A', 'B', 'expl-mc-4')">A. Chess</button>
                    <button class="btn-option" onclick="checkMC(this, 'B', 'B', 'expl-mc-4')">B. Baseball</button>
                    <button class="btn-option" onclick="checkMC(this, 'C', 'B', 'expl-mc-4')">C. Badminton</button>
                    <button class="btn-option" onclick="checkMC(this, 'D', 'B', 'expl-mc-4')">D. Darts</button>
                </div>
                <div class="explanation" id="expl-mc-4">
                    <h4><span class="icon">üí°</span> Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                    <div class="expl-detail">
                        <p><strong>D·ªãch c√¢u h·ªèi:</strong> Cristina KH√îNG ƒë·ªÅ c·∫≠p ƒë·∫øn m√¥n n√†o?</p>
                        <p><strong>ƒê√°p √°n ƒë√∫ng: B. Baseball (B√≥ng ch√†y).</strong><br>
                        <em>T·∫°i sao:</em><br>
                        - Cristina nh·∫Øc ƒë·∫øn: Football, Volleyball.<br>
                        - Mark nh·∫Øc ƒë·∫øn: Badminton, Cards, Chess, Darts.<br>
                        - Kh√¥ng ai nh·∫Øc ƒë·∫øn <strong>Baseball</strong> trong ƒëo·∫°n h·ªôi tho·∫°i c·∫£.</p>
                    </div>
                </div>
            </div>

            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

             <div class="question-block" id="mc-q5">
                <p class="question-text">5. Cristina thinks football is an exciting game.</p>
                <div class="options-grid">
                    <button class="btn-option" onclick="checkMC(this, 'A', 'B', 'expl-mc-5')">A. True</button>
                    <button class="btn-option" onclick="checkMC(this, 'B', 'B', 'expl-mc-5')">B. False</button>
                    <button class="btn-option" onclick="checkMC(this, 'C', 'B', 'expl-mc-5')">C. No information</button>
                </div>
                <div class="explanation" id="expl-mc-5">
                    <h4><span class="icon">üí°</span> Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                    <div class="expl-detail">
                        <p><strong>C√¢u h·ªèi:</strong> Cristina nghƒ© b√≥ng ƒë√° l√† m·ªôt tr√≤ ch∆°i th√∫ v·ªã?</p>
                        <p><strong>ƒê√°p √°n ƒë√∫ng: B. False (Sai).</strong><br>
                        <em>D·∫´n ch·ª©ng:</em> Cristina n√≥i: "I can‚Äôt stand it" (T·ªõ kh√¥ng ch·ªãu n·ªïi n√≥) v√† so s√°nh kh√°n gi·∫£ nh∆∞ "madmen" (ng∆∞·ªùi ƒëi√™n). C√¥ ·∫•y gh√©t b√≥ng ƒë√°.</p>
                    </div>
                </div>
            </div>

            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

             <div class="question-block" id="mc-q6">
                <p class="question-text">6. Mark likes all ball games.</p>
                <div class="options-grid">
                    <button class="btn-option" onclick="checkMC(this, 'A', 'A', 'expl-mc-6')">A. True</button>
                    <button class="btn-option" onclick="checkMC(this, 'B', 'A', 'expl-mc-6')">B. False</button>
                    <button class="btn-option" onclick="checkMC(this, 'C', 'A', 'expl-mc-6')">C. No information</button>
                </div>
                <div class="explanation" id="expl-mc-6">
                    <h4><span class="icon">üí°</span> Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                    <div class="expl-detail">
                        <p><strong>C√¢u h·ªèi:</strong> Mark th√≠ch t·∫•t c·∫£ c√°c tr√≤ ch∆°i v·ªõi b√≥ng?</p>
                        <p><strong>ƒê√°p √°n ƒë√∫ng: A. True (ƒê√∫ng).</strong><br>
                        <em>D·∫´n ch·ª©ng:</em> Mark n√≥i nguy√™n vƒÉn: "For me all ball games are great!" (V·ªõi t·ªõ, t·∫•t c·∫£ c√°c tr√≤ ch∆°i v·ªõi b√≥ng ƒë·ªÅu tuy·ªát!).</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-title">E. WRITING (Sentence Reordering)</div>
            <p><strong>Y√™u c·∫ßu:</strong> Click v√†o c√°c t·ª´ b√™n d∆∞·ªõi theo ƒë√∫ng th·ª© t·ª± ƒë·ªÉ t·∫°o th√†nh c√¢u ho√†n ch·ªânh.</p>
            
            <div class="question-block">
                <p class="question-text">1. our/ important/ an/ sports and games/ in/ play/ lives/ part.</p>
                <div class="sentence-drop-zone" id="zone-reo-1"></div>
                <div class="word-bank" id="bank-reo-1">
                    </div>
                <div style="text-align: right;">
                     <button class="btn-check" onclick="checkReorder(1, 'Sports and games play an important part in our lives.')">Ki·ªÉm tra</button>
                     <button class="btn-check" style="background:#999;" onclick="resetReorder(1, ['our', 'important', 'an', 'Sports and games', 'in', 'play', 'lives', 'part'])">L√†m l·∫°i</button>
                </div>
                <div class="explanation" id="expl-reo-1">
                    <div class="expl-detail">
                        <p><strong>ƒê√°p √°n:</strong> Sports and games play an important part in our lives.<br>
                        (Th·ªÉ thao v√† tr√≤ ch∆°i ƒë√≥ng m·ªôt vai tr√≤ quan tr·ªçng trong cu·ªôc s·ªëng c·ªßa ch√∫ng ta)</p>
                        <p><strong>C·∫•u tr√∫c:</strong> play an important part in sth (ƒë√≥ng vai tr√≤ quan tr·ªçng trong vi·ªác g√¨).</p>
                    </div>
                </div>
            </div>

            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

             <div class="question-block">
                <p class="question-text">2. players/ how/ match/ there/ in/ many/ are/ football/ a?</p>
                <div class="sentence-drop-zone" id="zone-reo-2"></div>
                <div class="word-bank" id="bank-reo-2"></div>
                <div style="text-align: right;">
                     <button class="btn-check" onclick="checkReorder(2, 'How many players are there in a football match?')">Ki·ªÉm tra</button>
                     <button class="btn-check" style="background:#999;" onclick="resetReorder(2, ['players', 'How', 'match', 'there', 'in', 'many', 'are', 'football', 'a?'])">L√†m l·∫°i</button>
                </div>
                 <div class="explanation" id="expl-reo-2">
                    <div class="expl-detail">
                        <p><strong>ƒê√°p √°n:</strong> How many players are there in a football match?<br>
                        (C√≥ bao nhi√™u c·∫ßu th·ªß trong m·ªôt tr·∫≠n b√≥ng ƒë√°?)</p>
                        <p><strong>C·∫•u tr√∫c:</strong> How many + N(s·ªë nhi·ªÅu) + are there + place?</p>
                    </div>
                </div>
            </div>

            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

            <div class="question-block">
                <p class="question-text">3. by/ she/ to keep/ every day/ tries/ fit/ jogging.</p>
                <div class="sentence-drop-zone" id="zone-reo-3"></div>
                <div class="word-bank" id="bank-reo-3"></div>
                <div style="text-align: right;">
                     <button class="btn-check" onclick="checkReorder(3, 'She tries to keep fit by jogging every day.')">Ki·ªÉm tra</button>
                     <button class="btn-check" style="background:#999;" onclick="resetReorder(3, ['by', 'She', 'to keep', 'every day', 'tries', 'fit', 'jogging'])">L√†m l·∫°i</button>
                </div>
                 <div class="explanation" id="expl-reo-3">
                    <div class="expl-detail">
                        <p><strong>ƒê√°p √°n:</strong> She tries to keep fit by jogging every day.<br>
                        (C√¥ ·∫•y c·ªë g·∫Øng gi·ªØ d√°ng b·∫±ng c√°ch ch·∫°y b·ªô m·ªói ng√†y.)</p>
                        <p><strong>C·∫•u tr√∫c:</strong> try to V (c·ªë g·∫Øng l√†m g√¨); by + V-ing (b·∫±ng c√°ch l√†m g√¨).</p>
                    </div>
                </div>
            </div>

            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

            <div class="question-block">
                <p class="question-text">4. yesterday/ who/ play/ football/ you/ did/ with?</p>
                <div class="sentence-drop-zone" id="zone-reo-4"></div>
                <div class="word-bank" id="bank-reo-4"></div>
                <div style="text-align: right;">
                     <button class="btn-check" onclick="checkReorder(4, 'Who did you play football with yesterday?')">Ki·ªÉm tra</button>
                     <button class="btn-check" style="background:#999;" onclick="resetReorder(4, ['yesterday', 'Who', 'play', 'football', 'you', 'did', 'with?'])">L√†m l·∫°i</button>
                </div>
                 <div class="explanation" id="expl-reo-4">
                    <div class="expl-detail">
                        <p><strong>ƒê√°p √°n:</strong> Who did you play football with yesterday?<br>
                        (B·∫°n ƒë√£ ch∆°i b√≥ng ƒë√° v·ªõi ai h√¥m qua?)</p>
                        <p><strong>C·∫•u tr√∫c:</strong> Who + did + S + V + with...?</p>
                    </div>
                </div>
            </div>
            
             <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

             <div class="question-block">
                <p class="question-text">5. sports/ building/ physical strength/ necessary/ are/ for.</p>
                <div class="sentence-drop-zone" id="zone-reo-5"></div>
                <div class="word-bank" id="bank-reo-5"></div>
                <div style="text-align: right;">
                     <button class="btn-check" onclick="checkReorder(5, 'Sports are necessary for building physical strength.')">Ki·ªÉm tra</button>
                     <button class="btn-check" style="background:#999;" onclick="resetReorder(5, ['sports', 'building', 'physical strength', 'necessary', 'are', 'for'])">L√†m l·∫°i</button>
                </div>
                 <div class="explanation" id="expl-reo-5">
                    <div class="expl-detail">
                        <p><strong>ƒê√°p √°n:</strong> Sports are necessary for building physical strength.<br>
                        (Th·ªÉ thao l√† c·∫ßn thi·∫øt ƒë·ªÉ x√¢y d·ª±ng th·ªÉ l·ª±c.)</p>
                    </div>
                </div>
            </div>

        </div>

        <div class="card">
            <div class="section-title">VI. Transformation (Continued)</div>
            <p><strong>Y√™u c·∫ßu:</strong> Vi·∫øt l·∫°i c√¢u Ph·ªß ƒë·ªãnh (-) v√† Nghi v·∫•n (?).</p>

            <div class="question-block">
                <p class="question-text">3. My parents came to visit me last July.</p>
                <input type="text" class="writing-input" id="input-neg-3" placeholder="(-) Sentence...">
                <input type="text" class="writing-input" id="input-int-3" placeholder="(?) Sentence...">
                <button class="btn-check" onclick="checkWriting(3, 'My parents did not come to visit me last July', 'Did my parents come to visit me last July')">Ki·ªÉm tra</button>
                <div class="explanation" id="expl-wr-3">
                    <div class="expl-detail">
                        <p><strong>ƒê√°p √°n:</strong><br>(-) My parents didn't come to visit me last July.<br>(?) Did my parents come to visit me last July?</p>
                        <p><strong>Gi·∫£i th√≠ch:</strong> Came (V-ed) -> M∆∞·ª£n Did, tr·∫£ v·ªÅ Come (nguy√™n th·ªÉ).</p>
                    </div>
                </div>
            </div>
             <hr style="margin: 20px 0; border: 0; border-top: 2px dashed #EEE;">
             
             <div class="question-block">
                <p class="question-text">4. The hotel was very expensive.</p>
                <input type="text" class="writing-input" id="input-neg-4" placeholder="(-) Sentence...">
                <input type="text" class="writing-input" id="input-int-4" placeholder="(?) Sentence...">
                <button class="btn-check" onclick="checkWriting(4, 'The hotel was not very expensive', 'Was the hotel very expensive')">Ki·ªÉm tra</button>
                <div class="explanation" id="expl-wr-4">
                    <div class="expl-detail">
                        <p><strong>ƒê√°p √°n:</strong><br>(-) The hotel was not very expensive.<br>(?) Was the hotel very expensive?</p>
                        <p><strong>Gi·∫£i th√≠ch:</strong> ƒê·ªông t·ª´ 'was' -> Th√™m not/ƒê·∫£o l√™n ƒë·∫ßu. Kh√¥ng m∆∞·ª£n Did.</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="footer-score">
        <span>üèÜ ƒêi·ªÉm s·ªë: </span><span id="score-display">0</span>
    </div>

    <div class="modal-overlay" id="gapModal" onclick="closeModal(event)">
        <div class="modal-content">
            <h3>Ch·ªçn t·ª´ th√≠ch h·ª£p:</h3>
            <div class="modal-options" id="modalOptions">
                </div>
        </div>
    </div>

    <script>
        // --- GLOBAL STATE ---
        let score = 0;
        let currentGapId = null;

        // --- SOUND EFFECTS (Simulated visual for single file stability) ---
        function playSound(type) {
            // Placeholder for audio - In single file context, we focus on Visual Feedback
            // Confetti implies success sound, Shake implies fail sound.
        }

        function triggerConfetti() {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
        }

        // --- GAP FILL LOGIC ---
        const gapAnswers = {
            1: "sport",
            3: "without",
            4: "game",
            5: "positions",
            6: "score",
            7: "boring",
            8: "each"
        };
        const allGapWords = ["score", "without", "sport", "each", "play", "game", "positions", "boring"];

        function openGapModal(id, correctWord) {
            currentGapId = id;
            const modal = document.getElementById('gapModal');
            const optionsContainer = document.getElementById('modalOptions');
            optionsContainer.innerHTML = '';
            
            allGapWords.forEach(word => {
                const btn = document.createElement('button');
                btn.className = 'word-chip';
                btn.innerText = word;
                btn.onclick = () => selectGapWord(word, correctWord);
                optionsContainer.appendChild(btn);
            });

            modal.style.display = 'flex';
        }

        function closeModal(e) {
            if(e.target.id === 'gapModal') {
                document.getElementById('gapModal').style.display = 'none';
            }
        }

        function selectGapWord(selectedWord, correctWord) {
            const gapElement = document.querySelector(`.gap-fill-input[onclick*="openGapModal(${currentGapId}"]`);
            gapElement.innerText = selectedWord;
            
            if (selectedWord === correctWord) {
                gapElement.classList.remove('filled-wrong');
                gapElement.classList.add('filled-correct');
                triggerConfetti();
                // Show explanations/glossary when user starts answering
                document.getElementById('expl-gapfill-all').style.display = 'block';
            } else {
                gapElement.classList.remove('filled-correct');
                gapElement.classList.add('filled-wrong');
            }
            document.getElementById('gapModal').style.display = 'none';
        }

        // --- MULTIPLE CHOICE LOGIC ---
        function checkMC(btn, selected, correct, explId) {
            const parent = btn.parentNode;
            const buttons = parent.getElementsByClassName('btn-option');
            
            // Disable all buttons in this group
            for (let b of buttons) {
                b.disabled = true;
                if (b.innerText.startsWith(correct)) {
                    b.classList.add('correct');
                }
            }

            if (selected === correct) {
                triggerConfetti();
                score += 10;
                updateScore();
            } else {
                btn.classList.add('wrong');
            }

            // Show explanation
            document.getElementById(explId).style.display = 'block';
        }

        // --- WRITING LOGIC (Transformation) ---
        function checkWriting(id, correctNeg, correctInt) {
            const userNeg = document.getElementById(`input-neg-${id}`).value.trim();
            const userInt = document.getElementById(`input-int-${id}`).value.trim();
            const expl = document.getElementById(`expl-wr-${id}`);

            // Simple normalization (remove extra spaces, case insensitive for comparison logic mostly)
            // But strict for user learning. We show result regardless.
            
            expl.style.display = 'block';
            
            // Visual feedback on inputs
            const negInput = document.getElementById(`input-neg-${id}`);
            const intInput = document.getElementById(`input-int-${id}`);
            
            // Check logic (Loose equality for user friendliness)
            const isNegCorrect = normalize(userNeg) === normalize(correctNeg) || normalize(userNeg) === normalize(correctNeg.replace('did not', "didn't").replace('was not', "wasn't").replace('were not', "weren't"));
            const isIntCorrect = normalize(userInt) === normalize(correctInt) || normalize(userInt) + "?" === normalize(correctInt);

            if(isNegCorrect) { negInput.style.borderColor = 'var(--correct-green)'; negInput.style.backgroundColor = '#E8F5E9'; }
            else { negInput.style.borderColor = 'var(--wrong-red)'; }

            if(isIntCorrect) { intInput.style.borderColor = 'var(--correct-green)'; intInput.style.backgroundColor = '#E8F5E9'; }
            else { intInput.style.borderColor = 'var(--wrong-red)'; }
            
            if(isNegCorrect && isIntCorrect) triggerConfetti();
        }

        function normalize(str) {
            return str.toLowerCase().replace(/[.,?]/g, '').replace(/\s+/g, ' ').trim();
        }

        // --- SENTENCE REORDERING LOGIC ---
        const reorderData = {
            1: ['Sports and games', 'play', 'an', 'important', 'part', 'in', 'our', 'lives'],
            2: ['How', 'many', 'players', 'are', 'there', 'in', 'a', 'football', 'match?'],
            3: ['She', 'tries', 'to keep', 'fit', 'by', 'jogging', 'every day'],
            4: ['Who', 'did', 'you', 'play', 'football', 'with', 'yesterday?'],
            5: ['Sports', 'are', 'necessary', 'for', 'building', 'physical strength']
        };

        const reorderScrambled = {
            1: ['our', 'important', 'an', 'Sports and games', 'in', 'play', 'lives', 'part'],
            2: ['players', 'How', 'match', 'there', 'in', 'many', 'are', 'football', 'a?'],
            3: ['by', 'She', 'to keep', 'every day', 'tries', 'fit', 'jogging'],
            4: ['yesterday', 'Who', 'play', 'football', 'you', 'did', 'with?'],
            5: ['sports', 'building', 'physical strength', 'necessary', 'are', 'for']
        };

        // Initialize Reordering Sections
        function initReorder(id) {
            resetReorder(id, reorderScrambled[id]);
        }

        function resetReorder(id, words) {
            const bank = document.getElementById(`bank-reo-${id}`);
            const zone = document.getElementById(`zone-reo-${id}`);
            bank.innerHTML = '';
            zone.innerHTML = '';
            
            words.forEach(word => {
                const span = document.createElement('span');
                span.className = 'word-chip';
                span.innerText = word;
                span.onclick = function() {
                    // Move to other container
                    if (this.parentNode === bank) {
                        zone.appendChild(this);
                    } else {
                        bank.appendChild(this);
                    }
                };
                bank.appendChild(span);
            });
            
            document.getElementById(`expl-reo-${id}`).style.display = 'none';
        }

        function checkReorder(id, fullSentence) {
            const zone = document.getElementById(`zone-reo-${id}`);
            const userWords = Array.from(zone.children).map(c => c.innerText).join(' ');
            
            const isCorrect = normalize(userWords) === normalize(fullSentence);
            
            if(isCorrect) {
                zone.style.borderColor = 'var(--correct-green)';
                zone.style.backgroundColor = '#E8F5E9';
                triggerConfetti();
            } else {
                zone.style.borderColor = 'var(--wrong-red)';
                zone.style.backgroundColor = '#FFEBEE';
                zone.animate([
                    { transform: 'translateX(0)' },
                    { transform: 'translateX(-10px)' },
                    { transform: 'translateX(10px)' },
                    { transform: 'translateX(0)' }
                ], { duration: 500 });
            }
            document.getElementById(`expl-reo-${id}`).style.display = 'block';
        }

        function updateScore() {
            document.getElementById('score-display').innerText = score;
        }

        // Initialize everything on load
        window.onload = function() {
            [1, 2, 3, 4, 5].forEach(id => initReorder(id));
        };

    </script>
</body>
</html>