<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Challenge - Ms Mai An ULIS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-pastel: #fdf2f8; /* Pinkish white */
            --card-bg: #ffffff;
            --text-color: #4a4a4a;
        }

        * {
            box-sizing: border-box;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-pink) #f0f0f0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-pastel);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 183, 178, 0.4) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(166, 228, 208, 0.4) 0%, transparent 20%),
                url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><text x="10" y="30" font-size="20">üå∏</text><text x="60" y="80" font-size="20">üê±</text></svg>');
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: var(--text-color);
        }

        /* --- Header & Timer --- */
        header {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            z-index: 100;
            backdrop-filter: blur(5px);
            border-bottom: 3px solid var(--primary-pink);
        }

        .teacher-name {
            font-size: 0.9rem;
            color: var(--primary-pink);
            font-weight: 700;
            font-family: 'Quicksand', sans-serif;
        }

        .timer-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #timer-display {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary-pink);
            background: #fff;
            padding: 5px 15px;
            border-radius: 20px;
            box-shadow: 0 4px 0 #e0e0e0;
            border: 2px solid var(--primary-pink);
        }

        .timer-btn {
            background: var(--primary-teal);
            border: none;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 3px 0 #009e82;
            transition: transform 0.1s;
        }

        .timer-btn:active {
            transform: translateY(3px);
            box-shadow: none;
        }

        /* --- Main Layout --- */
        .main-container {
            display: flex;
            flex: 1;
            height: calc(100vh - 70px);
        }

        .split-pane {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            position: relative;
        }

        .split-pane.left {
            border-right: 2px dashed var(--primary-pink);
            background: rgba(255, 255, 255, 0.6);
        }

        .split-pane.right {
            background: rgba(255, 255, 255, 0.3);
        }

        h1, h2, h3 {
            font-family: 'Quicksand', sans-serif;
            color: var(--primary-pink);
        }

        /* --- Reading Passage Styling --- */
        .passage-title {
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 20px;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px #fff;
        }

        .paragraph {
            background: #fff;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            line-height: 1.6;
            font-size: 1.1rem;
            position: relative;
        }

        .gap-marker {
            display: inline-block;
            width: 40px;
            height: 25px;
            background: var(--primary-pink);
            color: white;
            text-align: center;
            border-radius: 5px;
            font-weight: bold;
            margin: 0 5px;
            line-height: 25px;
        }

        .trans-btn {
            display: block;
            margin-top: 10px;
            font-size: 0.8rem;
            color: var(--primary-teal);
            background: none;
            border: 2px solid var(--primary-teal);
            border-radius: 20px;
            padding: 5px 15px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.2s;
        }

        .trans-btn:hover {
            background: var(--primary-teal);
            color: white;
        }

        .translation-text {
            display: none;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dotted #ccc;
            color: #666;
            font-style: italic;
            font-size: 1rem;
        }

        .glossary-box {
            background: #eefcf9;
            border: 2px solid var(--primary-teal);
            border-radius: 15px;
            padding: 15px;
            margin-top: 30px;
        }

        .glossary-title {
            text-align: center;
            color: var(--primary-teal);
            margin-top: 0;
        }

        .glossary-table {
            width: 100%;
            border-collapse: collapse;
        }

        .glossary-table th, .glossary-table td {
            text-align: left;
            padding: 8px;
            border-bottom: 1px solid rgba(0, 201, 167, 0.2);
        }

        /* --- Question Styling --- */
        .question-card {
            background: #fff;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }

        .question-header {
            font-weight: 800;
            color: var(--primary-pink);
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .question-header::before {
            content: '‚ùì';
            margin-right: 10px;
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            text-align: left;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            box-shadow: 0 4px 0 #e0e0e0;
        }

        .option-btn:hover:not(.disabled) {
            transform: scale(1.02);
            border-color: var(--primary-pink);
        }

        .option-btn:active:not(.disabled) {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* Correct/Wrong States */
        .option-btn.correct {
            background: var(--correct-green);
            color: white;
            border-color: #00a855;
            box-shadow: 0 4px 0 #00a855;
        }

        .option-btn.wrong {
            background: var(--wrong-red);
            color: white;
            border-color: #d6303e;
            box-shadow: 0 4px 0 #d6303e;
            animation: shake 0.5s;
        }

        .option-btn.disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Feedback Section */
        .feedback-panel {
            display: none;
            margin-top: 15px;
            background: #f8f0ff;
            border-radius: 15px;
            padding: 15px;
            border: 2px dashed var(--primary-pink);
            animation: slideDown 0.3s ease-out;
        }

        .feedback-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }

        .fb-tab {
            font-size: 0.8rem;
            padding: 5px 10px;
            background: #eee;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .fb-tab.active {
            background: var(--primary-pink);
            color: white;
        }

        .fb-content {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .teacher-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--primary-pink);
            vertical-align: middle;
            margin-right: 10px;
            background-color: #fff;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        /* Submit Button */
        .submit-section {
            text-align: center;
            margin: 40px 0;
        }

        .submit-btn {
            background: linear-gradient(45deg, var(--primary-pink), #a26bdb);
            color: white;
            font-size: 1.5rem;
            padding: 15px 50px;
            border: none;
            border-radius: 50px;
            box-shadow: 0 8px 0 #6a3da1, 0 15px 20px rgba(136, 84, 192, 0.4);
            cursor: pointer;
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            transition: transform 0.2s;
        }

        .submit-btn:hover {
            transform: scale(1.05) translateY(-5px);
        }

        /* Modal Result */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 5px solid var(--primary-teal);
        }

        .score-circle {
            width: 150px;
            height: 150px;
            background: var(--primary-teal);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            font-weight: bold;
            margin: 0 auto 20px;
            box-shadow: 0 10px 0 #009e82;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                height: auto;
            }
            .split-pane {
                width: 100%;
                height: auto;
                max-height: 50vh;
            }
            .timer-container {
                position: relative;
                left: 0;
                transform: none;
            }
            header {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>

    <canvas id="confetti" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999;"></canvas>

    <header>
        <div class="teacher-name">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS üë©‚Äçüè´</div>
        <div class="timer-container">
            <button class="timer-btn" id="start-btn" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U</button>
            <div id="timer-display">10:00</div>
        </div>
        <div></div>
    </header>

    <div class="main-container">
        <div class="split-pane left">
            <h2 class="passage-title">üéÆ Computer Game Exhibition</h2>
            
            <p><strong>Five sentences have been removed from the text below. For each question, choose the correct answer. There are three extra sentences which you do not need to use.</strong></p>

            <div class="paragraph">
                Have you ever tried playing the kind of video games that your parents played? The Museum of Science in Manchester, in the UK, has held an exhibition for the last few years, which invites visitors to do exactly that. It offers them the chance to play games from the last 40 years, in various sessions throughout the day.
                <button class="trans-btn" onclick="toggleTrans(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">B·∫°n ƒë√£ bao gi·ªù th·ª≠ ch∆°i lo·∫°i tr√≤ ch∆°i ƒëi·ªán t·ª≠ m√† cha m·∫π b·∫°n t·ª´ng ch∆°i ch∆∞a? B·∫£o t√†ng Khoa h·ªçc ·ªü Manchester, V∆∞∆°ng qu·ªëc Anh, ƒë√£ t·ªï ch·ª©c m·ªôt cu·ªôc tri·ªÉn l√£m trong v√†i nƒÉm qua, m·ªùi kh√°ch tham quan l√†m ch√≠nh x√°c ƒëi·ªÅu ƒë√≥. N√≥ mang ƒë·∫øn cho h·ªç c∆° h·ªôi ch∆°i c√°c tr√≤ ch∆°i t·ª´ 40 nƒÉm tr∆∞·ªõc, trong c√°c bu·ªïi kh√°c nhau su·ªët c·∫£ ng√†y.</div>
            </div>

            <div class="paragraph">
                These video games sessions have now become one of the main attractions of the museum. They are full of people every day, playing a wide range of games. <span class="gap-marker">(1)</span> ........ For parents, for example, these are usually the games they used to play in their childhood.
                <button class="trans-btn" onclick="toggleTrans(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Nh·ªØng bu·ªïi ch∆°i tr√≤ ch∆°i ƒëi·ªán t·ª≠ n√†y hi·ªán ƒë√£ tr·ªü th√†nh m·ªôt trong nh·ªØng ƒëi·ªÉm thu h√∫t ch√≠nh c·ªßa b·∫£o t√†ng. Ng√†y n√†o c≈©ng ch·∫≠t k√≠n ng∆∞·ªùi ch∆°i ƒë·ªß lo·∫°i tr√≤ ch∆°i. (1)......... V√≠ d·ª•, ƒë·ªëi v·ªõi c√°c b·∫≠c cha m·∫π, ƒë√¢y th∆∞·ªùng l√† nh·ªØng tr√≤ ch∆°i m√† h·ªç t·ª´ng ch∆°i th·ªùi th∆° ·∫•u.</div>
            </div>

            <div class="paragraph">
                There‚Äôs also an educational purpose to the games. For instance, some old types of computer, dating back 40 years, are also available in the sessions. They were originally used in classrooms to teach pupils to write their own computer programs. <span class="gap-marker">(2)</span> ........ Now, the museum is holding workshops that encourage children to learn similar skills ‚Äì and they‚Äôre still very popular.
                <button class="trans-btn" onclick="toggleTrans(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">C√°c tr√≤ ch∆°i c≈©ng c√≥ m·ª•c ƒë√≠ch gi√°o d·ª•c. V√≠ d·ª•, m·ªôt s·ªë lo·∫°i m√°y t√≠nh c≈©, c√≥ ni√™n ƒë·∫°i 40 nƒÉm, c≈©ng c√≥ s·∫µn trong c√°c bu·ªïi n√†y. Ch√∫ng ban ƒë·∫ßu ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°c l·ªõp h·ªçc ƒë·ªÉ d·∫°y h·ªçc sinh vi·∫øt c√°c ch∆∞∆°ng tr√¨nh m√°y t√≠nh c·ªßa ri√™ng m√¨nh. (2)........ Hi·ªán nay, b·∫£o t√†ng ƒëang t·ªï ch·ª©c c√°c h·ªôi th·∫£o khuy·∫øn kh√≠ch tr·∫ª em h·ªçc c√°c k·ªπ nƒÉng t∆∞∆°ng t·ª± - v√† ch√∫ng v·∫´n r·∫•t ph·ªï bi·∫øn.</div>
            </div>

            <div class="paragraph">
                The sessions are also seen as social events, as people discover how much fun it is to play video games with other family members. And there‚Äôs also an area at Power Up! where a number of visitors can sit down together. <span class="gap-marker">(3)</span> ........ And nowadays, this is often how fans of video games are more likely to experience playing.
                <button class="trans-btn" onclick="toggleTrans(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">C√°c bu·ªïi n√†y c≈©ng ƒë∆∞·ª£c coi l√† s·ª± ki·ªán x√£ h·ªôi, v√¨ m·ªçi ng∆∞·ªùi kh√°m ph√° ra vi·ªác ch∆°i tr√≤ ch∆°i ƒëi·ªán t·ª≠ v·ªõi c√°c th√†nh vi√™n kh√°c trong gia ƒë√¨nh th√∫ v·ªã nh∆∞ th·∫ø n√†o. V√† c≈©ng c√≥ m·ªôt khu v·ª±c t·∫°i Power Up!, n∆°i m·ªôt s·ªë du kh√°ch c√≥ th·ªÉ ng·ªìi c√πng nhau. (3)........ V√† ng√†y nay, ƒë√¢y th∆∞·ªùng l√† c√°ch ng∆∞·ªùi h√¢m m·ªô tr√≤ ch∆°i ƒëi·ªán t·ª≠ c√≥ nhi·ªÅu kh·∫£ nƒÉng tr·∫£i nghi·ªám ch∆°i game h∆°n.</div>
            </div>

            <div class="paragraph">
                The exhibition also shows how much progress technology has made over the last 40 years. Parents can often remember playing very simple games. But the games that are played today are more complex. <span class="gap-marker">(4)</span> ........ And the players also have to use much more complicated techniques.
                <button class="trans-btn" onclick="toggleTrans(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Tri·ªÉn l√£m c≈©ng cho th·∫•y c√¥ng ngh·ªá ƒë√£ ti·∫øn b·ªô nh∆∞ th·∫ø n√†o trong 40 nƒÉm qua. Cha m·∫π th∆∞·ªùng c√≥ th·ªÉ nh·ªõ l·∫°i vi·ªác ch∆°i nh·ªØng tr√≤ ch∆°i r·∫•t ƒë∆°n gi·∫£n. Nh∆∞ng nh·ªØng tr√≤ ch∆°i ƒë∆∞·ª£c ch∆°i ng√†y nay ph·ª©c t·∫°p h∆°n nhi·ªÅu. (4)........ V√† ng∆∞·ªùi ch∆°i c≈©ng ph·∫£i s·ª≠ d·ª•ng c√°c k·ªπ thu·∫≠t ph·ª©c t·∫°p h∆°n nhi·ªÅu.</div>
            </div>

            <div class="paragraph">
                However, one serious side of the exhibition is that organisers also want to show that video gaming is an important industry, employing many skilled people. <span class="gap-marker">(5)</span> ........ That way, people who enjoy gaming will also understand all the hard work, talent and imagination that goes into creating these amazing games.
                <button class="trans-btn" onclick="toggleTrans(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Tuy nhi√™n, m·ªôt kh√≠a c·∫°nh nghi√™m t√∫c c·ªßa tri·ªÉn l√£m l√† c√°c nh√† t·ªï ch·ª©c c≈©ng mu·ªën cho th·∫•y tr√≤ ch∆°i ƒëi·ªán t·ª≠ l√† m·ªôt ng√†nh c√¥ng nghi·ªáp quan tr·ªçng, s·ª≠ d·ª•ng nhi·ªÅu ng∆∞·ªùi c√≥ tay ngh·ªÅ cao. (5)........ B·∫±ng c√°ch ƒë√≥, nh·ªØng ng∆∞·ªùi th√≠ch ch∆°i game c≈©ng s·∫Ω hi·ªÉu ƒë∆∞·ª£c t·∫•t c·∫£ s·ª± chƒÉm ch·ªâ, t√†i nƒÉng v√† tr√≠ t∆∞·ªüng t∆∞·ª£ng ƒë·ªÉ t·∫°o ra nh·ªØng tr√≤ ch∆°i tuy·ªát v·ªùi n√†y.</div>
            </div>

            <div class="glossary-box">
                <h3 class="glossary-title">üìö Glossary - T·ª´ V·ª±ng Hay</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Exhibition</td><td>(n)</td><td>Cu·ªôc tri·ªÉn l√£m</td></tr>
                    <tr><td>Attraction</td><td>(n)</td><td>ƒêi·ªÉm thu h√∫t</td></tr>
                    <tr><td>Educational</td><td>(adj)</td><td>Mang t√≠nh gi√°o d·ª•c</td></tr>
                    <tr><td>Original</td><td>(adj)</td><td>Nguy√™n b·∫£n, g·ªëc</td></tr>
                    <tr><td>Workshop</td><td>(n)</td><td>H·ªôi th·∫£o, bu·ªïi th·ª±c h√†nh</td></tr>
                    <tr><td>Social event</td><td>(n)</td><td>S·ª± ki·ªán x√£ h·ªôi</td></tr>
                    <tr><td>Complex</td><td>(adj)</td><td>Ph·ª©c t·∫°p</td></tr>
                    <tr><td>Technique</td><td>(n)</td><td>K·ªπ thu·∫≠t</td></tr>
                    <tr><td>Industry</td><td>(n)</td><td>Ng√†nh c√¥ng nghi·ªáp</td></tr>
                    <tr><td>Imagination</td><td>(n)</td><td>Tr√≠ t∆∞·ªüng t∆∞·ª£ng</td></tr>
                </table>
            </div>
            <br><br><br>
        </div>

        <div class="split-pane right">
            <h2 style="text-align:center;">üß© Exercises</h2>
            
            <div id="quiz-container">
                </div>

            <div class="submit-section">
                <button class="submit-btn" onclick="showResults()">N·ªòP B√ÄI üìù</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2>K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-circle" id="final-score">0/5</div>
            <p id="feedback-msg" style="font-size: 1.2rem; margin-bottom: 20px;">...</p>
            <button class="timer-btn" onclick="closeModal()">Xem l·∫°i b√†i</button>
        </div>
    </div>

    <audio id="sound-correct" src="data:audio/mp3;base64,//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"></audio> 
    <script>
    // --- DATA ---
    const questions = [
        {
            id: 1,
            correct: "E",
            options: [
                {id: "A", text: "Visitors each pay for 90-minute sessions."},
                {id: "B", text: "And at the time, it helped lots of young people to do that."},
                {id: "C", text: "So they hope the exhibition will share this message."},
                {id: "D", text: "But not everyone thinks it‚Äôs a lot of fun."},
                {id: "E", text: "However, visitors often choose the ones they‚Äôre similar with."},
                {id: "F", text: "They have better storylines and animation, too."},
                {id: "G", text: "They also create the music to go with the game."},
                {id: "H", text: "Then they can all enjoy playing the same game."}
            ],
            explanation: "<b>D·∫´n ch·ª©ng:</b> C√¢u tr∆∞·ªõc: '...playing a wide range of games.' (ch∆°i nhi·ªÅu lo·∫°i game). C√¢u sau: 'For parents... games they used to play.'<br><b>Gi·∫£i th√≠ch:</b> ƒêo·∫°n n√†y n√≥i v·ªÅ th√≥i quen ch·ªçn game. C√¢u E (Tuy nhi√™n, kh√°ch th∆∞·ªùng ch·ªçn nh·ªØng game h·ªç th·∫•y quen thu·ªôc/gi·ªëng) l√† c·∫ßu n·ªëi h·ª£p l√Ω nh·∫•t d·∫´n ƒë·∫øn v√≠ d·ª• v·ªÅ cha m·∫π ch∆°i game c≈©.",
            translateQ: "Ch·ªçn c√¢u ƒëi·ªÅn v√†o ch·ªó tr·ªëng (1).",
            translateA: "ƒê√°p √°n E: Tuy nhi√™n, kh√°ch tham quan th∆∞·ªùng ch·ªçn nh·ªØng c√°i m√† h·ªç th·∫•y t∆∞∆°ng ƒë·ªìng (quen thu·ªôc)."
        },
        {
            id: 2,
            correct: "B",
            options: "SAME",
            explanation: "<b>D·∫´n ch·ª©ng:</b> C√¢u tr∆∞·ªõc nh·∫Øc ƒë·∫øn m√°y t√≠nh c≈© d√πng ƒë·ªÉ 'teach pupils to write their own computer programs'.<br><b>Gi·∫£i th√≠ch:</b> C√¢u B n√≥i 'And at the time, it helped lots of young people to do that' (V√† v√†o th·ªùi ƒë√≥, n√≥ ƒë√£ gi√∫p nhi·ªÅu ng∆∞·ªùi tr·∫ª l√†m ƒëi·ªÅu ƒë√≥). 'Do that' ch√≠nh l√† 'write programs'.",
            translateA: "ƒê√°p √°n B: V√† v√†o th·ªùi ƒëi·ªÉm ƒë√≥, n√≥ ƒë√£ gi√∫p r·∫•t nhi·ªÅu ng∆∞·ªùi tr·∫ª l√†m ƒë∆∞·ª£c ƒëi·ªÅu ƒë√≥."
        },
        {
            id: 3,
            correct: "H",
            options: "SAME",
            explanation: "<b>D·∫´n ch·ª©ng:</b> C√¢u tr∆∞·ªõc: '...visitors can sit down together.' (ng·ªìi c√πng nhau).<br><b>Gi·∫£i th√≠ch:</b> C√¢u H ti·∫øp n·ªëi h√†nh ƒë·ªông ng·ªìi c√πng nhau: 'Then they can all enjoy playing the same game' (Sau ƒë√≥ h·ªç c√≥ th·ªÉ c√πng ch∆°i m·ªôt tr√≤ ch∆°i).",
            translateA: "ƒê√°p √°n H: Sau ƒë√≥ t·∫•t c·∫£ h·ªç c√≥ th·ªÉ c√πng ch∆°i m·ªôt tr√≤ ch∆°i."
        },
        {
            id: 4,
            correct: "F",
            options: "SAME",
            explanation: "<b>D·∫´n ch·ª©ng:</b> C√¢u tr∆∞·ªõc: 'games that are played today are more complex.' (game ng√†y nay ph·ª©c t·∫°p h∆°n).<br><b>Gi·∫£i th√≠ch:</b> C√¢u F b·ªï sung chi ti·∫øt cho s·ª± ph·ª©c t·∫°p: 'They have better storylines and animation, too' (Ch√∫ng c√≥ c·ªët truy·ªán v√† h√¨nh ·∫£nh ƒë·ªông t·ªët h∆°n).",
            translateA: "ƒê√°p √°n F: Ch√∫ng c≈©ng c√≥ c·ªët truy·ªán v√† ho·∫°t h√¨nh t·ªët h∆°n."
        },
        {
            id: 5,
            correct: "C",
            options: "SAME",
            explanation: "<b>D·∫´n ch·ª©ng:</b> C√¢u tr∆∞·ªõc n√≥i BTC mu·ªën cho th·∫•y 'video gaming is an important industry' (m·ªôt ng√†nh c√¥ng nghi·ªáp quan tr·ªçng).<br><b>Gi·∫£i th√≠ch:</b> C√¢u C n√≥i v·ªÅ m·ª•c ƒë√≠ch: 'So they hope the exhibition will share this message' (H·ªç hy v·ªçng tri·ªÉn l√£m s·∫Ω chia s·∫ª th√¥ng ƒëi·ªáp n√†y).",
            translateA: "ƒê√°p √°n C: V√¨ v·∫≠y h·ªç hy v·ªçng cu·ªôc tri·ªÉn l√£m s·∫Ω chia s·∫ª th√¥ng ƒëi·ªáp n√†y."
        }
    ];

    // --- SOUND ENGINE ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            // Ding effect (High pitch sine wave)
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } else {
            // Fail effect (Low pitch sawtooth)
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // --- CONFETTI ENGINE (Simple CSS/Canvas) ---
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    let particles = [];

    function fireConfetti() {
        for(let i=0; i<100; i++) {
            particles.push({
                x: window.innerWidth / 2, // Start from center (right pane usually)
                y: window.innerHeight / 2,
                vx: (Math.random() - 0.5) * 20,
                vy: (Math.random() - 0.5) * 20,
                color: `hsl(${Math.random()*360}, 100%, 50%)`,
                life: 100
            });
        }
        animateConfetti();
    }

    function animateConfetti() {
        if(particles.length === 0) return;
        ctx.clearRect(0,0, canvas.width, canvas.height);
        for(let i=0; i<particles.length; i++) {
            let p = particles[i];
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.5; // Gravity
            p.life--;
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, 8, 8);
        }
        particles = particles.filter(p => p.life > 0);
        if(particles.length > 0) requestAnimationFrame(animateConfetti);
        else ctx.clearRect(0,0, canvas.width, canvas.height);
    }

    // --- APP LOGIC ---
    let timeLeft = 600; // 10 minutes
    let timerInterval;
    let isTimerRunning = false;
    let userScore = 0;
    let answeredCount = 0;

    function init() {
        const container = document.getElementById('quiz-container');
        // Render Questions
        questions.forEach((q, index) => {
            // If options are "SAME", use the generic list (A-H)
            const optionsList = (q.options === "SAME") ? questions[0].options : q.options;
            
            let html = `
                <div class="question-card" id="q-card-${index}">
                    <div class="question-header">C√¢u h·ªèi ${index + 1}: ƒêi·ªÅn v√†o ch·ªó tr·ªëng (${index + 1})</div>
                    <div class="options-grid">
                        ${optionsList.map(opt => `
                            <button class="option-btn" onclick="checkAnswer(${index}, '${opt.id}', this)">
                                <b>${opt.id}.</b> ${opt.text}
                            </button>
                        `).join('')}
                    </div>
                    
                    <div class="feedback-panel" id="feedback-${index}">
                        <div class="feedback-tabs">
                            <div class="fb-tab active" onclick="switchTab(${index}, 'explain')">Gi·∫£i th√≠ch</div>
                            <div class="fb-tab" onclick="switchTab(${index}, 'trans')">D·ªãch</div>
                        </div>
                        <div class="fb-content" id="fb-content-${index}">
                            </div>
                    </div>
                </div>
            `;
            container.innerHTML += html;
        });
    }

    function toggleTimer() {
        const btn = document.getElementById('start-btn');
        if (isTimerRunning) {
            clearInterval(timerInterval);
            btn.textContent = "TI·∫æP T·ª§C ‚ñ∂Ô∏è";
            btn.style.background = "#FFC107";
        } else {
            timerInterval = setInterval(updateTimer, 1000);
            btn.textContent = "T·∫†M D·ª™NG ‚è∏Ô∏è";
            btn.style.background = "#FF4757";
        }
        isTimerRunning = !isTimerRunning;
    }

    function updateTimer() {
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert("‚è∞ ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
            return;
        }
        timeLeft--;
        const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
        const s = (timeLeft % 60).toString().padStart(2, '0');
        document.getElementById('timer-display').innerText = `${m}:${s}`;
    }

    function checkAnswer(qIndex, selectedId, btnElement) {
        // Prevent re-answering
        const card = document.getElementById(`q-card-${qIndex}`);
        if (card.classList.contains('answered')) return;
        card.classList.add('answered');

        const q = questions[qIndex];
        const allBtns = card.querySelectorAll('.option-btn');
        
        // Disable all buttons
        allBtns.forEach(b => b.classList.add('disabled'));

        const feedbackPanel = document.getElementById(`feedback-${qIndex}`);
        const feedbackContent = document.getElementById(`fb-content-${qIndex}`);
        
        // Store feedback content
        card.dataset.explanation = `<span class="teacher-avatar">üë©‚Äçüè´</span> ${q.explanation}`;
        card.dataset.translation = `<b>C√¢u h·ªèi:</b> ${q.translateQ} <br><br> <b>ƒê√°p √°n:</b> ${q.translateA}`;

        if (selectedId === q.correct) {
            // Correct
            btnElement.classList.add('correct');
            playSound('correct');
            fireConfetti();
            userScore++;
        } else {
            // Wrong
            btnElement.classList.add('wrong');
            playSound('wrong');
            // Highlight correct one
            allBtns.forEach(b => {
                if(b.innerText.startsWith(q.correct + ".")) b.classList.add('correct');
            });
        }
        
        // Show Feedback
        feedbackPanel.style.display = 'block';
        switchTab(qIndex, 'explain'); // Default to explanation
        answeredCount++;
    }

    function switchTab(qIndex, type) {
        const card = document.getElementById(`q-card-${qIndex}`);
        const contentDiv = document.getElementById(`fb-content-${qIndex}`);
        const tabs = document.querySelectorAll(`#feedback-${qIndex} .fb-tab`);
        
        tabs.forEach(t => t.classList.remove('active'));
        if(type === 'explain') {
            tabs[0].classList.add('active');
            contentDiv.innerHTML = card.dataset.explanation;
        } else {
            tabs[1].classList.add('active');
            contentDiv.innerHTML = card.dataset.translation;
        }
    }

    function toggleTrans(btn) {
        const text = btn.nextElementSibling;
        if (text.style.display === "block") {
            text.style.display = "none";
            btn.textContent = "B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶";
        } else {
            text.style.display = "block";
            btn.textContent = "·∫®N B·∫¢N D·ªäCH";
        }
    }

    function showResults() {
        const modal = document.getElementById('result-modal');
        const scoreDiv = document.getElementById('final-score');
        const feedbackMsg = document.getElementById('feedback-msg');

        scoreDiv.innerText = `${userScore}/5`;
        
        if (userScore === 5) feedbackMsg.innerText = "üåü XU·∫§T S·∫ÆC! Em l√† thi√™n t√†i ti·∫øng Anh!";
        else if (userScore >= 3) feedbackMsg.innerText = "üëè L√ÄM T·ªêT L·∫ÆM! C·ªë g·∫Øng ch√∫t n·ªØa l√† ƒëi·ªÉm tuy·ªát ƒë·ªëi r·ªìi!";
        else feedbackMsg.innerText = "üí™ C·ªê L√äN NH√â! H√£y xem k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ hi·ªÉu b√†i h∆°n.";

        modal.style.display = 'flex';
        playSound('correct'); // Celebrating anyway
        fireConfetti();
    }

    function closeModal() {
        document.getElementById('result-modal').style.display = 'none';
    }

    // Initialize
    init();

</script>
</body>
</html>