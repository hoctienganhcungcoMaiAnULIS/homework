<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Mastery - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F4F8;
            --text-color: #2D3436;
            --card-bg: #FFFFFF;
            --option-box-bg: #E3F2FD;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* H·∫°n ch·∫ø b√¥i ƒëen ƒë·ªÉ t·∫≠p trung click */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #E0F7FA;
            /* H·ªça ti·∫øt zigzag/ch·∫•m bi m·ªù */
            background-image: radial-gradient(#00C9A7 15%, transparent 16%), radial-gradient(#8854C0 15%, transparent 16%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            padding-bottom: 100px;
        }

        h1, h2, h3 {
            font-family: 'Quicksand', sans-serif;
            text-align: center;
            color: var(--primary-pink);
            text-shadow: 2px 2px 0px #fff;
            margin: 10px 0;
        }

        .header-title {
            background: #fff;
            display: inline-block;
            padding: 8px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border: 3px solid var(--primary-teal);
        }

        .teacher-badge {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            font-weight: 700;
        }

        /* --- Layout Styles --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .section-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 10px 0 rgba(136, 84, 192, 0.2);
            border: 4px solid #fff;
            position: relative;
            overflow: hidden;
        }

        .section-header {
            background: var(--primary-pink);
            color: white;
            padding: 10px 25px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: 800;
            font-size: 1.2rem;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
            border: 2px solid white;
        }

        /* --- Reading Passage Styling --- */
        .reading-passage {
            font-size: 1.1rem;
            line-height: 1.8;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 6px solid var(--primary-teal);
            margin-bottom: 25px;
            color: #444;
            white-space: pre-wrap;
            text-align: justify;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        /* Gap markers in text */
        .gap-marker {
            background: var(--primary-pink);
            color: white;
            padding: 2px 8px;
            border-radius: 5px;
            font-weight: bold;
            margin: 0 5px;
        }

        /* --- Options Box for Sentence Insertion --- */
        .options-box-container {
            background: var(--option-box-bg);
            border: 2px dashed #90CAF9;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .options-box-title {
            font-weight: 800;
            color: #1565C0;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .option-item {
            background: white;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-weight: 600;
            border-left: 4px solid var(--primary-pink);
        }

        /* --- Glossary Table --- */
        .glossary-container {
            margin-top: 15px;
            margin-bottom: 30px;
            border: 2px dashed #ccc;
            border-radius: 15px;
            padding: 15px;
            background: #fff;
        }
        
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
        }

        .glossary-table th {
            background: var(--primary-teal);
            color: white;
            padding: 10px;
            text-align: left;
            font-family: 'Quicksand', sans-serif;
        }

        .glossary-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        
        .type-tag {
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            color: #555;
            font-family: monospace;
        }

        /* --- Question Area --- */
        .question-block {
            margin-bottom: 25px;
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #eee;
            box-shadow: 0 4px 0 #eee;
        }

        .question-text {
            font-weight: 800;
            color: var(--primary-pink);
            font-size: 1.15rem;
            margin-bottom: 15px;
            display: block;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr; 
            gap: 12px;
        }

        .options-grid-horizontal {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        @media (max-width: 600px) {
            .options-grid-horizontal {
                grid-template-columns: 1fr 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px 0 #ccc;
            text-align: left;
            position: relative;
        }
        
        /* Specific style for short ABCD buttons */
        .option-btn.short {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 800;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-pink);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: 0 0 0 #ccc;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-green) !important;
            color: white !important;
            border-color: #00A653 !important;
            box-shadow: 0 5px 0 #008E47 !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            color: white !important;
            border-color: #D63031 !important;
            box-shadow: 0 5px 0 #B82829 !important;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* --- Explanation Box --- */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 20px;
            background: #FFFDE7; /* Very light yellow */
            border: 2px solid #FBC02D;
            padding: 20px;
            border-radius: 15px;
            animation: slideDown 0.4s ease-out;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .exp-header {
            font-weight: 800;
            color: #F57F17;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px dashed #FBC02D;
            padding-bottom: 10px;
        }

        .exp-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .exp-content p {
            margin: 8px 0;
            line-height: 1.6;
        }

        .exp-label {
            font-weight: 800;
            color: var(--primary-pink);
            text-transform: uppercase;
            font-size: 0.8rem;
            background: #E1D4F9;
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 5px;
        }

        /* --- Footer / Result --- */
        .submit-section {
            text-align: center;
            margin-top: 40px;
        }

        .submit-btn {
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #5E328F;
            transition: transform 0.2s;
            font-family: 'Quicksand', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-btn:active {
            transform: translateY(8px);
            box-shadow: 0 0 0 #5E328F;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Popup Score */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            border: 6px solid var(--primary-teal);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        .score-display {
            font-size: 4rem;
            color: var(--primary-pink);
            font-weight: 900;
            font-family: 'Quicksand', sans-serif;
            margin: 10px 0;
            text-shadow: 3px 3px 0 #eee;
        }

        .comment-text {
            font-size: 1.3rem;
            margin-top: 10px;
            margin-bottom: 20px;
            color: #555;
            font-weight: 600;
        }

    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <center>
            <div class="header-title">
                <h1>ADVANCED ENGLISH CHALLENGE</h1>
                <div class="teacher-badge">Created by: Ms. Mai An ULIS</div>
            </div>
        </center>

        <div class="section-card" id="section-1">
            <div class="section-header">PASSAGE 1: Earth Hour üåçüí°</div>
            
            <div class="reading-passage">
Earth Hour is an annual global campaign encouraging people and businesses worldwide to switch off their electricity for one hour simultaneously. It originated in Australia in 2007 when 2.2 million people in Sydney turned off unnecessary lights for an hour. Since then, it has grown into a massive global event. In 2013, millions of people in 7,000 cities and towns across the globe participated by switching off their lights for 60 minutes at the end of March. Each year, famous landmarks and buildings such as the Sydney Opera House, UK Parliament, Buckingham Palace, and the Empire State Building join in by going dark for Earth Hour. In 2011, the campaign even went into space, with astronauts reducing power on the International Space Station.
The World Wide Fund for Nature (WWF) organises Earth Hour. Andy Ridley, the executive director of Earth Hour Global at WWF and originally from Britain, initiated the idea of Earth Hour. His aim was to raise awareness about environmental issues by encouraging people to take positive actions to help the planet. While switching off lights for an hour may have a small impact on energy consumption, Earth Hour is primarily a symbolic event to make people think about the problems of climate change.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Campaign</td><td><span class="type-tag">n</span></td><td>Chi·∫øn d·ªãch</td></tr>
                    <tr><td>Simultaneously</td><td><span class="type-tag">adv</span></td><td>ƒê·ªìng th·ªùi, c√πng l√∫c</td></tr>
                    <tr><td>Originate</td><td><span class="type-tag">v</span></td><td>B·∫Øt ngu·ªìn, kh·ªüi ngu·ªìn</td></tr>
                    <tr><td>Landmark</td><td><span class="type-tag">n</span></td><td>ƒê·ªãa danh, c√¥ng tr√¨nh n·ªïi ti·∫øng</td></tr>
                    <tr><td>Raise awareness</td><td><span class="type-tag">v.phr</span></td><td>N√¢ng cao nh·∫≠n th·ª©c</td></tr>
                    <tr><td>Consumption</td><td><span class="type-tag">n</span></td><td>S·ª± ti√™u th·ª•</td></tr>
                    <tr><td>Symbolic</td><td><span class="type-tag">adj</span></td><td>Mang t√≠nh bi·ªÉu t∆∞·ª£ng</td></tr>
                </table>
            </div>

            <div id="questions-area-1"></div>
        </div>

        <div class="section-card" id="section-2">
            <div class="section-header">PASSAGE 2: The Ocean üåä‚õ¥Ô∏è</div>
            <p><strong>Task:</strong> Choose the correct sentence (A-D) to fill in each blank.</p>
            
            <div class="options-box-container">
                <div class="options-box-title">Choices Box</div>
                <div class="option-item">A. Fishers catch more than 90 million tons of seafood each year</div>
                <div class="option-item">B. where water and land transportation meet</div>
                <div class="option-item">C. The ocean makes all life on Earth possible</div>
                <div class="option-item">D. are the Port of Shanghai in China and the Port of Rotterdam in the Netherlands</div>
            </div>

            <div class="reading-passage">
The ocean covers 70 percent of Earth‚Äôs surface and contains about 97 percent of all the water on Earth. <span class="gap-marker">(1)</span> ___________, and makes the planet appear blue when viewed from space.
For thousands of years, people have depended on the ocean as a source of food. It offers human beings a wide range of seafood. <span class="gap-marker">(2)</span> ___________. Millions of people, from professional fishers to business owners like restaurant owners and boat builders, depend on fisheries for their life.
People also use the ocean as a route for trade. Ships carry loads of goods from continent to continent, country to country. Ocean ports are areas <span class="gap-marker">(3)</span> ___________. It is also the meeting point of people of different professions: businesspeople, who import and export goods and services; dockworkers, who load and unload cargo; and ships‚Äô crews. Ports also have a high concentration of migrants and immigrants with a wide variety of nationalities, languages, and religions. The busiest ports in the world <span class="gap-marker">(4)</span> ___________.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Continent</td><td><span class="type-tag">n</span></td><td>L·ª•c ƒë·ªãa</td></tr>
                    <tr><td>Profession</td><td><span class="type-tag">n</span></td><td>Ngh·ªÅ nghi·ªáp</td></tr>
                    <tr><td>Import/Export</td><td><span class="type-tag">v</span></td><td>Nh·∫≠p kh·∫©u / Xu·∫•t kh·∫©u</td></tr>
                    <tr><td>Cargo</td><td><span class="type-tag">n</span></td><td>H√†ng h√≥a (tr√™n t√†u, m√°y bay)</td></tr>
                    <tr><td>Migrant</td><td><span class="type-tag">n</span></td><td>Ng∆∞·ªùi di c∆∞</td></tr>
                </table>
            </div>

            <div id="questions-area-2"></div>
        </div>

        <div class="section-card" id="section-3">
            <div class="section-header">PASSAGE 3: The Importance of Forests üå≤üå≥</div>
            <p><strong>Task:</strong> Choose the correct sentence (A-D) to fill in each blank.</p>
            
            <div class="options-box-container">
                <div class="options-box-title">Choices Box</div>
                <div class="option-item">A. have another way to beat the heat</div>
                <div class="option-item">B. Forests absorb much of rainwater and slow down its fast flow</div>
                <div class="option-item">C. About 300 million people live in forests worldwide</div>
                <div class="option-item">D. Forests cover nearly a third of all land on Earth</div>
            </div>

            <div class="reading-passage">
<span class="gap-marker">(1)</span> ___________. Here are three main reasons why forests are so important.
1. They are home to various species, including millions of humans.
Forests, especially tropical rainforests, provide organic living habitats for nearly half of the world's land-based species of animals, plants, and insects. <span class="gap-marker">(2)</span> ___________, of whom about 60 million depend almost entirely on native woodlands. Many millions more live along or near forest fringes.
2. They keep us cool
Trees create vital oases of shade on the ground and help buildings stay cool. This reduces the need for electric fans or air conditioners. Large forests can regulate temperatures in regions, including cities. Trees and forests also <span class="gap-marker">(3)</span> ___________: they remove much of the carbon dioxide from the atmosphere. This helps fight climate change.
3. They prevent flooding and soil erosion
<span class="gap-marker">(4)</span> ___________. This helps prevent soil erosion as well as protect surrounding communities from landslides and floods.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Fringes</td><td><span class="type-tag">n</span></td><td>R√¨a, m√©p (r·ª´ng)</td></tr>
                    <tr><td>Oasis (Oases)</td><td><span class="type-tag">n</span></td><td>·ªêc ƒë·∫£o</td></tr>
                    <tr><td>Regulate</td><td><span class="type-tag">v</span></td><td>ƒêi·ªÅu h√≤a, ki·ªÉm so√°t</td></tr>
                    <tr><td>Erosion</td><td><span class="type-tag">n</span></td><td>S·ª± x√≥i m√≤n</td></tr>
                    <tr><td>Landslide</td><td><span class="type-tag">n</span></td><td>S·∫°t l·ªü ƒë·∫•t</td></tr>
                </table>
            </div>

            <div id="questions-area-3"></div>
        </div>

        <div class="submit-section">
            <button class="submit-btn" onclick="showFinalResult()">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 style="color: var(--primary-pink)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-display" id="finalScore">0/13</div>
            <p class="comment-text" id="finalComment">C·ªë g·∫Øng l√™n nh√©!</p>
            <button class="submit-btn" style="font-size: 1rem; padding: 10px 30px;" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const quizData = {
            section1: [
                {
                    id: "1-1",
                    q: "What is the main idea of the passage?",
                    options: { 
                        A: "The history of the Sydney Opera House", 
                        B: "The importance of saving energy", 
                        C: "The impact of Earth Hour on climate change", 
                        D: "A global campaign to raise awareness about environmental issues" 
                    },
                    correct: "D",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> √ù ch√≠nh c·ªßa ƒëo·∫°n vƒÉn l√† g√¨?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span> ƒêo·∫°n vƒÉn m·ªü ƒë·∫ßu b·∫±ng "Earth Hour is an annual global campaign..." v√† k·∫øt th√∫c b·∫±ng m·ª•c ƒë√≠ch "raise awareness about environmental issues" (n√¢ng cao nh·∫≠n th·ª©c v·ªÅ c√°c v·∫•n ƒë·ªÅ m√¥i tr∆∞·ªùng). ƒê√°p √°n D bao qu√°t to√†n b·ªô n·ªôi dung: l·ªãch s·ª≠, quy m√¥ v√† m·ª•c ƒë√≠ch.</p>
                        <p><span class="exp-label">T·∫°i sao SAI:</span> A. Ch·ªâ l√† v√≠ d·ª•; B. Ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng ch·ªâ l√† t√°c ƒë·ªông nh·ªè (small impact); C. ƒêo·∫°n vƒÉn n√≥i ƒë√¢y l√† s·ª± ki·ªán mang t√≠nh bi·ªÉu t∆∞·ª£ng (symbolic) h∆°n l√† t√°c ƒë·ªông tr·ª±c ti·∫øp.</p>
                    `
                },
                {
                    id: "1-2",
                    q: "The word ‚Äúoriginated‚Äù in paragraph 1 is OPPOSITE in meaning to _______.",
                    options: { A: "began", B: "started", C: "ended", D: "derived" },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> T·ª´ "originated" (b·∫Øt ngu·ªìn) trong ƒëo·∫°n 1 TR√ÅI NGHƒ®A v·ªõi t·ª´ n√†o?</p>
                        <p><span class="exp-label">Ph√¢n t√≠ch:</span> A. B·∫Øt ƒë·∫ßu; B. B·∫Øt ƒë·∫ßu; C. K·∫øt th√∫c; D. B·∫Øt ngu·ªìn t·ª´.</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span> Originate = Start/Begin. Tr√°i nghƒ©a l√† End.</p>
                    `
                },
                {
                    id: "1-3",
                    q: "The word ‚Äúmassive‚Äù in paragraph 1 could be best replaced by _______.",
                    options: { A: "small", B: "huge", C: "local", D: "brief" },
                    correct: "B",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> T·ª´ "massive" (to l·ªõn) trong ƒëo·∫°n 1 c√≥ th·ªÉ thay th·∫ø t·ªët nh·∫•t b·ªüi t·ª´ n√†o?</p>
                        <p><span class="exp-label">Ph√¢n t√≠ch:</span> A. Nh·ªè; B. Kh·ªïng l·ªì/To l·ªõn; C. ƒê·ªãa ph∆∞∆°ng; D. Ng·∫Øn g·ªçn.</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span> Massive = Huge/Very large.</p>
                    `
                },
                {
                    id: "1-4",
                    q: "Which of the following is TRUE according to the passage?",
                    options: { 
                        A: "Earth Hour lasts for two hours.", 
                        B: "Earth Hour started in the UK.", 
                        C: "Earth Hour is organized by the World Wide Fund for Nature.", 
                        D: "Only a few people participate in Earth Hour." 
                    },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> ƒêi·ªÅu n√†o sau ƒë√¢y l√† ƒê√öNG theo ƒëo·∫°n vƒÉn?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span> D·∫´n ch·ª©ng ƒëo·∫°n 2: "The World Wide Fund for Nature (WWF) organises Earth Hour."</p>
                        <p><span class="exp-label">T·∫°i sao SAI:</span> A. Sai v√¨ ch·ªâ 1 gi·ªù (60 minutes); B. Sai v√¨ b·∫Øt ngu·ªìn ·ªü √öc (originated in Australia); D. Sai v√¨ c√≥ h√†ng tri·ªáu ng∆∞·ªùi tham gia (millions of people).</p>
                    `
                },
                {
                    id: "1-5",
                    q: "The word ‚ÄúHis‚Äù in paragraph 2 refers to _______.",
                    options: { A: "an astronaut", B: "Andy Ridley", C: "the executive director", D: "a participant" },
                    correct: "B",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> T·ª´ "His" trong ƒëo·∫°n 2 √°m ch·ªâ ai?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span> C√¢u tr∆∞·ªõc nh·∫Øc ƒë·∫øn "Andy Ridley, the executive director...". C√¢u sau "His aim..." (M·ª•c ti√™u c·ªßa √¥ng ·∫•y). "His" thay th·∫ø cho Andy Ridley.</p>
                    `
                }
            ],
            section2: [
                {
                    id: "2-1",
                    q: "Fill in blank (1)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (1):</span> The ocean covers 70 percent... <span class="gap-marker">(1)</span> ... and makes the planet appear blue...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (C):</span> "The ocean makes all life on Earth possible" (ƒê·∫°i d∆∞∆°ng l√†m cho m·ªçi s·ª± s·ªëng tr√™n Tr√°i ƒë·∫•t tr·ªü n√™n kh·∫£ thi).</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> C√¢u n√†y mang t√≠nh gi·ªõi thi·ªáu t·ªïng quan v·ªÅ vai tr√≤ c·ªßa ƒë·∫°i d∆∞∆°ng, n·ªëi ti·∫øp √Ω "ch·ª©a 97% n∆∞·ªõc" v√† d·∫´n ƒë·∫øn √Ω "h√†nh tinh xanh".</p>
                    `
                },
                {
                    id: "2-2",
                    q: "Fill in blank (2)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "A",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (2):</span> It offers human beings a wide range of seafood. <span class="gap-marker">(2)</span> ...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (A):</span> "Fishers catch more than 90 million tons of seafood each year."</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> C√¢u tr∆∞·ªõc n√≥i v·ªÅ "seafood" (h·∫£i s·∫£n). C√¢u c·∫ßn ƒëi·ªÅn cung c·∫•p s·ªë li·ªáu c·ª• th·ªÉ v·ªÅ l∆∞·ª£ng h·∫£i s·∫£n ƒë√°nh b·∫Øt. C√¢u sau nh·∫Øc ƒë·∫øn "fishers" (ng∆∞ d√¢n).</p>
                    `
                },
                {
                    id: "2-3",
                    q: "Fill in blank (3)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "B",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (3):</span> Ocean ports are areas <span class="gap-marker">(3)</span> ...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (B):</span> "...where water and land transportation meet" (n∆°i giao th√¥ng th·ªßy v√† b·ªô g·∫∑p nhau).</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> ƒê√¢y l√† ƒë·ªãnh nghƒ©a v·ªÅ "Ocean ports" (C·∫£ng bi·ªÉn). C√¢u tr∆∞·ªõc n√≥i v·ªÅ t√†u b√® (water), c√¢u sau n√≥i v·ªÅ vi·ªác b·ªëc d·ª° h√†ng h√≥a (land/logistics).</p>
                    `
                },
                {
                    id: "2-4",
                    q: "Fill in blank (4)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "D",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (4):</span> The busiest ports in the world <span class="gap-marker">(4)</span> ...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (D):</span> "...are the Port of Shanghai in China and the Port of Rotterdam..."</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> C√¢u b·∫Øt ƒë·∫ßu b·∫±ng ch·ªß ng·ªØ "The busiest ports", c·∫ßn ƒë·ªông t·ª´ v√† t√™n c√°c c·∫£ng ƒë·ªÉ ho√†n th√†nh c√¢u.</p>
                    `
                }
            ],
            section3: [
                {
                    id: "3-1",
                    q: "Fill in blank (1)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "D",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (1):</span> <span class="gap-marker">(1)</span> ... Here are three main reasons...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (D):</span> "Forests cover nearly a third of all land on Earth."</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> C√¢u m·ªü ƒë·∫ßu ƒëo·∫°n vƒÉn th∆∞·ªùng cung c·∫•p th√¥ng tin chung. Vi·ªác n√≥i r·ª´ng chi·∫øm 1/3 di·ªán t√≠ch l√† c√°ch m·ªü b√†i ph√π h·ª£p tr∆∞·ªõc khi ƒëi v√†o chi ti·∫øt t·∫ßm quan tr·ªçng.</p>
                    `
                },
                {
                    id: "3-2",
                    q: "Fill in blank (2)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (2):</span> ...species of animals, plants, and insects. <span class="gap-marker">(2)</span> ..., of whom about 60 million...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (C):</span> "About 300 million people live in forests worldwide"</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> C√¢u sau c√≥ m·ªánh ƒë·ªÅ quan h·ªá "of whom" (trong s·ªë h·ªç) -> √Åm ch·ªâ danh t·ª´ ch·ªâ ng∆∞·ªùi ph√≠a tr∆∞·ªõc. ƒê√°p √°n C c√≥ "300 million people" l√† ph√π h·ª£p nh·∫•t.</p>
                    `
                },
                {
                    id: "3-3",
                    q: "Fill in blank (3)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "A",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (3):</span> Trees and forests also <span class="gap-marker">(3)</span> ...: they remove much of the carbon dioxide...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (A):</span> "...have another way to beat the heat"</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> ƒêo·∫°n n√†y ƒëang n√≥i v·ªÅ ch·ªß ƒë·ªÅ "Keep us cool" (Gi·ªØ m√°t). Vi·ªác lo·∫°i b·ªè CO2 (kh√≠ nh√† k√≠nh) l√† m·ªôt c√°ch kh√°c ƒë·ªÉ gi·∫£m nhi·ªát ƒë·ªô Tr√°i ƒë·∫•t (beat the heat).</p>
                    `
                },
                {
                    id: "3-4",
                    q: "Fill in blank (4)",
                    options: { A: "A", B: "B", C: "C", D: "D" },
                    correct: "B",
                    explanation: `
                        <p><span class="exp-label">V·ªã tr√≠ (4):</span> 3. They prevent flooding... <span class="gap-marker">(4)</span> ...</p>
                        <p><span class="exp-label">ƒê√°p √°n ch·ªçn (B):</span> "Forests absorb much of rainwater and slow down its fast flow"</p>
                        <p><span class="exp-label">Gi·∫£i th√≠ch:</span> Ch·ªß ƒë·ªÅ l√† ngƒÉn l≈© l·ª•t (flooding). ƒê√°p √°n B n√≥i v·ªÅ vi·ªác r·ª´ng h·∫•p th·ª• n∆∞·ªõc m∆∞a v√† l√†m ch·∫≠m d√≤ng ch·∫£y -> Gi·∫£i th√≠ch tr·ª±c ti·∫øp c∆° ch·∫ø ngƒÉn l≈©.</p>
                    `
                }
            ]
        };

        // --- SOUNDS (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // Ding sound
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else {
                // Buzz sound
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderSection(sectionId, data) {
            const container = document.getElementById(`questions-area-${sectionId}`);
            data.forEach((item, index) => {
                const questionNum = index + 1;
                // Determine grid layout based on option length (Short for Sentence Insertion)
                const isShort = item.options.A.length < 5; 
                const gridClass = isShort ? 'options-grid-horizontal' : 'options-grid';
                const btnClass = isShort ? 'option-btn short' : 'option-btn';

                const html = `
                    <div class="question-block" id="q-${item.id}">
                        <span class="question-text">Question ${item.q}</span>
                        <div class="${gridClass}">
                            <button class="${btnClass}" onclick="checkAnswer('${item.id}', 'A', '${item.correct}')">${isShort ? 'A' : 'A. ' + item.options.A}</button>
                            <button class="${btnClass}" onclick="checkAnswer('${item.id}', 'B', '${item.correct}')">${isShort ? 'B' : 'B. ' + item.options.B}</button>
                            <button class="${btnClass}" onclick="checkAnswer('${item.id}', 'C', '${item.correct}')">${isShort ? 'C' : 'C. ' + item.options.C}</button>
                            <button class="${btnClass}" onclick="checkAnswer('${item.id}', 'D', '${item.correct}')">${isShort ? 'D' : 'D. ' + item.options.D}</button>
                        </div>
                        <div class="explanation-box" id="exp-${item.id}">
                            <div class="exp-header">
                                <div class="exp-avatar">Ms</div>
                                <span>C√¥ Mai An gi·∫£i th√≠ch:</span>
                            </div>
                            <div class="exp-content">
                                ${item.explanation}
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // Initialize Rendering
        renderSection('1', quizData.section1);
        renderSection('2', quizData.section2);
        renderSection('3', quizData.section3);

        // --- LOGIC FUNCTIONS ---
        let score = 0;
        const totalQuestions = 13; // 5 + 4 + 4

        function checkAnswer(id, selected, correct) {
            const questionBlock = document.getElementById(`q-${id}`);
            const buttons = questionBlock.querySelectorAll('.option-btn');
            const expBox = document.getElementById(`exp-${id}`);

            // Disable all buttons in this question
            buttons.forEach(btn => {
                btn.disabled = true;
                const btnText = btn.innerText.trim();
                let btnLetter = "";
                
                // Logic to extract letter depending on button style
                if (btnText.length === 1) { // Short button "A"
                    btnLetter = btnText;
                } else { // Long button "A. Text..."
                    btnLetter = btnText.charAt(0);
                }

                // Check matches
                if (btnLetter === correct) {
                    btn.classList.add('correct');
                }
                if (btnLetter === selected && selected !== correct) {
                    btn.classList.add('wrong');
                }
            });

            // Logic
            if (selected === correct) {
                score++;
                playSound('correct');
                fireConfetti();
            } else {
                playSound('wrong');
            }

            // Show Explanation immediately
            expBox.style.display = 'block';
        }

        function showFinalResult() {
            const modal = document.getElementById('resultModal');
            const scoreText = document.getElementById('finalScore');
            const comment = document.getElementById('finalComment');
            
            scoreText.innerText = `${score} / ${totalQuestions}`;
            
            if(score === totalQuestions) {
                comment.innerText = "Tuy·ªát v·ªùi! Em l√† thi√™n t√†i ti·∫øng Anh! üåü";
                fireConfetti();
            } else if (score >= 10) {
                comment.innerText = "L√†m t·ªët l·∫Øm! Em r·∫•t c√≥ nƒÉng khi·∫øu! üî•";
            } else {
                comment.innerText = "C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! H√£y xem k·ªπ gi·∫£i th√≠ch c·ªßa c√¥! üí™";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // --- CONFETTI EFFECT ---
        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for (let i = 0; i < 80; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: Math.random() * 4 - 2,
                    vy: Math.random() * 4 + 2,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                    size: Math.random() * 8 + 4
                });
            }

            let animationId;
            function update() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let active = false;
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.y < canvas.height) {
                        ctx.fillStyle = p.color;
                        ctx.fillRect(p.x, p.y, p.size, p.size);
                        active = true;
                    }
                });

                if (active) {
                    animationId = requestAnimationFrame(update);
                } else {
                    cancelAnimationFrame(animationId);
                }
            }
            update();
        }

        // Resize canvas
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

    </script>
</body>
</html>


