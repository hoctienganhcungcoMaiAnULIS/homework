<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i t·∫≠p Tr·∫Øc nghi·ªám Quantifiers - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-color: #8854C0; /* T√≠m h·ªìng */
            --secondary-color: #00C9A7; /* Xanh ng·ªçc */
            --correct-color: #00D26A; /* Xanh l√° */
            --wrong-color: #FF4757; /* ƒê·ªè cam */
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-color: #2d3436;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#8854C0 0.5px, transparent 0.5px), radial-gradient(#8854C0 0.5px, #f0f4f8 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            color: var(--text-color);
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            position: relative;
            overflow: hidden;
            border: 4px solid var(--primary-color);
        }

        /* Header Styles */
        .header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }

        .header h5 {
            color: var(--primary-color);
            margin: 0;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: #f3e5f5;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .header h1 {
            color: var(--text-color);
            margin: 10px 0;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.8rem;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            height: 12px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--secondary-color);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        /* Question Card */
        .question-card {
            background: #fff;
            border-radius: 20px;
            padding: 0;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 25px;
            line-height: 1.5;
            color: #2c3e50;
        }

        /* Answer Options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            padding: 15px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-color);
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 0 #e0e0e0;
            position: relative;
            text-align: left;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #d1d1d1;
            border-color: var(--secondary-color);
            background-color: #f0fdfa;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 0 0 #e0e0e0;
        }

        /* Option States */
        .option-btn.correct {
            background-color: var(--correct-color) !important;
            color: white !important;
            border-color: #00b85c !important;
            box-shadow: 0 4px 0 #009e4f !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-color) !important;
            color: white !important;
            border-color: #e04050 !important;
            box-shadow: 0 4px 0 #c03940 !important;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.9;
        }

        /* Shake Animation */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #fff9c4; /* Light yellow for highlighting */
            border: 2px solid #fbc02d;
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .explanation-box.show {
            display: block;
        }

        .exp-header {
            font-weight: 800;
            color: #f57f17;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-bottom: 2px dashed #fbc02d;
            padding-bottom: 10px;
        }

        .exp-content p {
            margin: 8px 0;
            line-height: 1.6;
        }

        .exp-step {
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(255,255,255,0.6);
            border-radius: 8px;
        }

        .exp-label {
            font-weight: 700;
            color: var(--primary-color);
            margin-right: 5px;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Controls */
        .controls {
            margin-top: 30px;
            text-align: right;
        }

        .next-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(136, 84, 192, 0.4);
            transition: transform 0.2s;
            font-family: 'Quicksand', sans-serif;
            display: none; /* Hidden initially */
        }

        .next-btn:hover {
            transform: scale(1.05);
            background-color: #7a4bb0;
        }

        /* Results Screen */
        .result-screen {
            text-align: center;
            display: none;
            padding: 20px;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            background: var(--secondary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            font-weight: 800;
            margin: 0 auto 20px;
            box-shadow: 0 10px 25px rgba(0, 201, 167, 0.5);
            border: 5px solid white;
            outline: 5px solid var(--secondary-color);
        }

        .message {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-weight: 700;
        }

        .retry-btn {
            background-color: var(--wrong-color);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
            font-family: 'Quicksand', sans-serif;
        }

    </style>
</head>
<body>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h5>Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</h5>
            <h1>Tr·∫Øc nghi·ªám Both, Either & Neither</h1>
        </div>

        <!-- Quiz Area -->
        <div id="quiz-area">
            <!-- Progress -->
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <!-- Question -->
            <div class="question-card">
                <div class="question-text" id="question-text">Loading question...</div>
                <div class="options-grid" id="options-grid">
                    <!-- Options will be injected here -->
                </div>
            </div>

            <!-- Detailed Explanation -->
            <div class="explanation-box" id="explanation-box">
                <div class="exp-header">
                    <span>üí°</span> Gi·∫£i th√≠ch chi ti·∫øt c·ªßa C√¥ Mai An
                </div>
                <div class="exp-content" id="exp-content">
                    <!-- Content injected via JS -->
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="next-btn" id="next-btn" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚ûú</button>
            </div>
        </div>

        <!-- Result Screen -->
        <div class="result-screen" id="result-screen">
            <div class="score-circle" id="final-score">0/0</div>
            <div class="message" id="final-message">B·∫°n l√†m r·∫•t t·ªët!</div>
            <p id="feedback-text"></p>
            <button class="retry-btn" onclick="restartQuiz()">L√†m l·∫°i b√†i thi ‚Ü∫</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const quizData = {
          "questions": [
            {
              "questionNumber": 1,
              "question": "__________ my parents are doctors.",
              "answerOptions": [
                { "text": "Both of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Both of (phrase): c·∫£ hai (trong s·ªë)\n- Both (det/pronoun): c·∫£ hai\n- Either (det/pronoun): m·ªôt trong hai\n- Neither (det/pronoun): kh√¥ng ai trong hai\n2. Gi·∫£i th√≠ch: Tr∆∞·ªõc danh t·ª´ c√≥ t·ª´ h·∫°n ƒë·ªãnh (nh∆∞ 'my', 'the', 'these'), ta th∆∞·ªùng d√πng c·∫•u tr√∫c 'Both of + determiner + N'. D√π 'Both my parents' c≈©ng ƒë√∫ng, nh∆∞ng trong b√†i t·∫≠p ph√¢n bi·ªát 'Both/Both of', 'Both of' nh·∫•n m·∫°nh v√†o nh√≥m x√°c ƒë·ªãnh n√†y.", "isCorrect": true },
                { "text": "Either", "rationale": "Either (m·ªôt trong hai) ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t (is), nh∆∞ng ·ªü ƒë√¢y ƒë·ªông t·ª´ l√† 'are' (s·ªë nhi·ªÅu).", "isCorrect": false },
                { "text": "Neither", "rationale": "Neither (kh√¥ng ai c·∫£) ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t.", "isCorrect": false },
                { "text": "Every", "rationale": "Every (m·ªçi) ƒëi v·ªõi danh t·ª´ s·ªë √≠t.", "isCorrect": false }
              ],
              "hint": "C·∫£ hai b·ªë m·∫π t√¥i ƒë·ªÅu l√† b√°c sƒ©. (D√πng tr∆∞·ªõc t·ª´ h·∫°n ƒë·ªãnh 'my')."
            },
            {
              "questionNumber": 2,
              "question": "__________ students speak English very well.",
              "answerOptions": [
                { "text": "Both of", "rationale": "'Both of' b·∫Øt bu·ªôc ph·∫£i ƒëi k√®m t·ª´ h·∫°n ƒë·ªãnh (the/these/my...) tr∆∞·ªõc danh t·ª´. ·ªû ƒë√¢y 'students' ƒë·ª©ng m·ªôt m√¨nh n√™n sai.", "isCorrect": false },
                { "text": "Both", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Both (det): c·∫£ hai\n- Both of (phrase): c·∫£ hai trong s·ªë\n- Either (det): m·ªôt trong hai\n- Neither (det): kh√¥ng ai/c√°i n√†o\n2. Gi·∫£i th√≠ch: Khi danh t·ª´ s·ªë nhi·ªÅu kh√¥ng c√≥ t·ª´ h·∫°n ƒë·ªãnh (the/my/these) ƒëi k√®m, ta d√πng tr·ª±c ti·∫øp 'Both'. (Both students = C·∫£ hai h·ªçc sinh).", "isCorrect": true },
                { "text": "Either", "rationale": "Either ƒëi v·ªõi danh t·ª´ s·ªë √≠t.", "isCorrect": false },
                { "text": "Neither", "rationale": "Neither ƒëi v·ªõi danh t·ª´ s·ªë √≠t.", "isCorrect": false }
              ],
              "hint": "C·∫£ hai h·ªçc sinh ƒë·ªÅu n√≥i ti·∫øng Anh r·∫•t t·ªët. (Danh t·ª´ kh√¥ng c√≥ 'the/my')."
            },
            {
              "questionNumber": 3,
              "question": "They are __________ tired after the game.",
              "answerOptions": [
                { "text": "both", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- both (adv): c·∫£ hai (ƒë·ªÅu)\n- both of (phrase): c·∫£ hai trong s·ªë\n- either (adv): c≈©ng (trong c√¢u ph·ªß ƒë·ªãnh)\n- neither (adv): c≈©ng kh√¥ng\n2. Gi·∫£i th√≠ch: Khi ƒë√≥ng vai tr√≤ tr·∫°ng t·ª´ nh·∫•n m·∫°nh cho ch·ªß ng·ªØ 'They', 'both' ƒë·ª©ng sau ƒë·ªông t·ª´ to be (are).", "isCorrect": true },
                { "text": "both of", "rationale": "'Both of' kh√¥ng ƒë·ª©ng m·ªôt m√¨nh l√†m tr·∫°ng t·ª´ sau to be nh∆∞ v·∫≠y, n√≥ c·∫ßn danh t·ª´/ƒë·∫°i t·ª´ ph√≠a sau (v√≠ d·ª•: both of them).", "isCorrect": false },
                { "text": "either", "rationale": "Either d√πng trong c√¢u ph·ªß ƒë·ªãnh ho·∫∑c nghi v·∫•n.", "isCorrect": false },
                { "text": "neither", "rationale": "Neither mang nghƒ©a ph·ªß ƒë·ªãnh, kh√¥ng h·ª£p ng·ªØ c·∫£nh 'tired after game' (th∆∞·ªùng l√† c·∫£ hai ƒë·ªÅu m·ªát).", "isCorrect": false }
              ],
              "hint": "H·ªç ƒë·ªÅu m·ªát sau tr·∫≠n ƒë·∫•u. (V·ªã tr√≠ sau ƒë·ªông t·ª´ to be)."
            },
            {
              "questionNumber": 4,
              "question": "__________ them want to visit London.",
              "answerOptions": [
                { "text": "Both", "rationale": "Both kh√¥ng ƒëi tr·ª±c ti·∫øp v·ªõi ƒë·∫°i t·ª´ t√¢n ng·ªØ (them/us/you) m√† ph·∫£i c√≥ 'of'.", "isCorrect": false },
                { "text": "Both of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Both of (phrase): c·∫£ hai trong s·ªë\n- Both (det): c·∫£ hai\n- Either of (phrase): m·ªôt trong hai\n- Neither of (phrase): kh√¥ng ai trong hai\n2. Gi·∫£i th√≠ch: Tr∆∞·ªõc ƒë·∫°i t·ª´ nh√¢n x∆∞ng (them, us, you), b·∫Øt bu·ªôc ph·∫£i d√πng 'Both of'.", "isCorrect": true },
                { "text": "Either", "rationale": "Either them l√† sai ng·ªØ ph√°p (ph·∫£i l√† Either of them). H∆°n n·ªØa ƒë·ªông t·ª´ 'want' s·ªë nhi·ªÅu n√™n Either (th∆∞·ªùng ƒëi v·ªõi s·ªë √≠t) kh√¥ng ph√π h·ª£p.", "isCorrect": false },
                { "text": "Neither", "rationale": "Neither them l√† sai ng·ªØ ph√°p.", "isCorrect": false }
              ],
              "hint": "C·∫£ hai ng∆∞·ªùi h·ªç ƒë·ªÅu mu·ªën ƒëi London. (Tr∆∞·ªõc ƒë·∫°i t·ª´ 'them')."
            },
            {
              "questionNumber": 5,
              "question": "__________ these shirts are expensive.",
              "answerOptions": [
                { "text": "Both of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Both of (phrase): c·∫£ hai trong s·ªë\n- Either of (phrase): m·ªôt trong hai\n- Neither of (phrase): kh√¥ng c√°i n√†o\n- Much (det): nhi·ªÅu\n2. Gi·∫£i th√≠ch: Tr∆∞·ªõc t·ª´ ch·ªâ ƒë·ªãnh 'these', ta d√πng 'Both of'. (D√π 'Both these shirts' c≈©ng ch·∫•p nh·∫≠n ƒë∆∞·ª£c, nh∆∞ng 'Both of' l√† ƒë√°p √°n chu·∫©n cho b√†i t·∫≠p ƒëi·ªÅn t·ª´ n√†y).", "isCorrect": true },
                { "text": "Either", "rationale": "Either ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t (is), ·ªü ƒë√¢y l√† 'are'.", "isCorrect": false },
                { "text": "Neither", "rationale": "Neither ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t.", "isCorrect": false },
                { "text": "Much", "rationale": "Much d√πng cho danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c.", "isCorrect": false }
              ],
              "hint": "C·∫£ hai chi·∫øc √°o n√†y ƒë·ªÅu ƒë·∫Øt."
            },
            {
              "questionNumber": 6,
              "question": "We __________ study at the same school.",
              "answerOptions": [
                { "text": "both", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- both (adv): c·∫£ hai (ƒë·ªÅu)\n- both of (phrase): c·∫£ hai trong s·ªë\n- either (adv): ho·∫∑c/c≈©ng\n- neither (adv): c≈©ng kh√¥ng\n2. Gi·∫£i th√≠ch: 'Both' ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ th∆∞·ªùng (study) ƒë·ªÉ b·ªï nghƒ©a cho ch·ªß ng·ªØ 'We'.", "isCorrect": true },
                { "text": "both of", "rationale": "'Both of' kh√¥ng ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ th∆∞·ªùng nh∆∞ tr·∫°ng t·ª´.", "isCorrect": false },
                { "text": "either", "rationale": "Sai v·ªã tr√≠ v√† nghƒ©a.", "isCorrect": false },
                { "text": "neither", "rationale": "Sai v·ªã tr√≠ v√† nghƒ©a.", "isCorrect": false }
              ],
              "hint": "Ch√∫ng t√¥i ƒë·ªÅu h·ªçc c√πng m·ªôt tr∆∞·ªùng. (ƒê·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ th∆∞·ªùng 'study')."
            },
            {
              "questionNumber": 7,
              "question": "__________ the girls are good at cooking.",
              "answerOptions": [
                { "text": "Both of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Both of (phrase): c·∫£ hai trong s·ªë\n- Either (det): m·ªôt trong hai\n- Neither (det): kh√¥ng ai\n- Each (det): m·ªói\n2. Gi·∫£i th√≠ch: C√≥ m·∫°o t·ª´ 'the' tr∆∞·ªõc danh t·ª´ s·ªë nhi·ªÅu 'girls' -> d√πng 'Both of'.", "isCorrect": true },
                { "text": "Either", "rationale": "Either ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t.", "isCorrect": false },
                { "text": "Neither", "rationale": "Neither ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t.", "isCorrect": false },
                { "text": "Each", "rationale": "Each ƒëi v·ªõi danh t·ª´ s·ªë √≠t.", "isCorrect": false }
              ],
              "hint": "C·∫£ hai c√¥ g√°i ƒë·ªÅu n·∫•u ƒÉn gi·ªèi."
            },
            {
              "questionNumber": 8,
              "question": "__________ brothers act in the same movie.",
              "answerOptions": [
                { "text": "Both", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Both (det): c·∫£ hai\n- Both of (phrase): c·∫£ hai trong s·ªë\n- Either (det): m·ªôt trong hai\n- Neither (det): kh√¥ng ai\n2. Gi·∫£i th√≠ch: Danh t·ª´ 'brothers' s·ªë nhi·ªÅu v√† kh√¥ng c√≥ m·∫°o t·ª´ (the/my...) -> D√πng 'Both' tr·ª±c ti·∫øp.", "isCorrect": true },
                { "text": "Both of", "rationale": "Sai v√¨ thi·∫øu m·∫°o t·ª´ (the/these/my) sau 'Both of'. Kh√¥ng n√≥i 'Both of brothers'.", "isCorrect": false },
                { "text": "Either", "rationale": "Either ƒëi v·ªõi danh t·ª´ s·ªë √≠t.", "isCorrect": false },
                { "text": "Neither", "rationale": "Neither ƒëi v·ªõi danh t·ª´ s·ªë √≠t.", "isCorrect": false }
              ],
              "hint": "C·∫£ hai anh em ƒë·ªÅu ƒë√≥ng trong c√πng m·ªôt b·ªô phim. (Kh√¥ng c√≥ 'the' tr∆∞·ªõc brothers)."
            },
            {
              "questionNumber": 9,
              "question": "__________ us were happy with the result.",
              "answerOptions": [
                { "text": "Both of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Both of (phrase): c·∫£ hai trong s·ªë\n- Both (det): c·∫£ hai\n- Either (det): m·ªôt trong hai\n- Neither (det): kh√¥ng ai\n2. Gi·∫£i th√≠ch: Tr∆∞·ªõc ƒë·∫°i t·ª´ t√¢n ng·ªØ 'us', b·∫Øt bu·ªôc d√πng 'Both of'.", "isCorrect": true },
                { "text": "Both", "rationale": "Kh√¥ng d√πng 'Both us'.", "isCorrect": false },
                { "text": "Either", "rationale": "Either ƒëi v·ªõi s·ªë √≠t (was), c√¢u d√πng 'were'.", "isCorrect": false },
                { "text": "Neither", "rationale": "Neither th∆∞·ªùng ƒëi v·ªõi s·ªë √≠t (formal).", "isCorrect": false }
              ],
              "hint": "C·∫£ hai ch√∫ng t√¥i ƒë·ªÅu vui v·ªõi k·∫øt qu·∫£."
            },
            {
              "questionNumber": 10,
              "question": "She invited __________ her friends to the party.",
              "answerOptions": [
                { "text": "both of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- both of (phrase): c·∫£ hai trong s·ªë\n- both (det): c·∫£ hai\n- either (det): m·ªôt trong hai\n- neither (det): kh√¥ng ai\n2. Gi·∫£i th√≠ch: C√≥ t√≠nh t·ª´ s·ªü h·ªØu 'her' -> D√πng 'both of'.", "isCorrect": true },
                { "text": "either", "rationale": "Kh√¥ng h·ª£p nghƒ©a 'm·ªùi m·ªôt trong hai' khi ng·ªØ c·∫£nh th∆∞·ªùng l√† m·ªùi c·∫£ hai.", "isCorrect": false },
                { "text": "neither", "rationale": "Kh√¥ng h·ª£p nghƒ©a.", "isCorrect": false },
                { "text": "much", "rationale": "Much d√πng cho danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c.", "isCorrect": false }
              ],
              "hint": "C√¥ ·∫•y ƒë√£ m·ªùi c·∫£ hai ng∆∞·ªùi b·∫°n c·ªßa m√¨nh ƒë·∫øn b·ªØa ti·ªác."
            },
            {
              "questionNumber": 11,
              "question": "I haven‚Äôt read __________ these books.",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of (phrase): m·ªôt trong hai (ho·∫∑c b·∫•t k·ª≥ c√°i n√†o trong hai)\n- neither of (phrase): kh√¥ng c√°i n√†o trong hai\n- both of (phrase): c·∫£ hai\n- all of (phrase): t·∫•t c·∫£\n2. Gi·∫£i th√≠ch: C√¢u c√≥ 'haven't' (ph·ªß ƒë·ªãnh) -> D√πng 'either of'. (Not ... either = Neither).", "isCorrect": true },
                { "text": "neither of", "rationale": "Sai v√¨ c√¢u ƒë√£ c√≥ 'haven't' (not). Kh√¥ng d√πng 2 l·∫ßn ph·ªß ƒë·ªãnh (Double negative: haven't + neither).", "isCorrect": false },
                { "text": "both of", "rationale": "'I haven't read both' c√≥ nghƒ©a l√† 'T√¥i ch∆∞a ƒë·ªçc c·∫£ hai (ch·ªâ ƒë·ªçc 1)', nh∆∞ng 'haven't read either' (ch∆∞a ƒë·ªçc quy·ªÉn n√†o c·∫£) ph·ªï bi·∫øn v√† t·ª± nhi√™n h∆°n trong ng·ªØ c·∫£nh li·ªát k√™.", "isCorrect": false },
                { "text": "all of", "rationale": "Usually implies more than 2.", "isCorrect": false }
              ],
              "hint": "T√¥i ch∆∞a ƒë·ªçc quy·ªÉn n√†o trong s·ªë nh·ªØng quy·ªÉn s√°ch n√†y. (C√¢u ph·ªß ƒë·ªãnh)."
            },
            {
              "questionNumber": 12,
              "question": "__________ the two sisters is married. They are both single.",
              "answerOptions": [
                { "text": "Neither of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Neither of (phrase): Kh√¥ng ai trong hai\n- Either of (phrase): M·ªôt trong hai\n- Both of (phrase): C·∫£ hai\n- All of (phrase): T·∫•t c·∫£\n2. Gi·∫£i th√≠ch: ƒê·ªông t·ª´ 'is' (s·ªë √≠t) v√† v·∫ø sau 'They are both single' (C·∫£ hai ƒë·ªÅu ƒë·ªôc th√¢n) -> Nghƒ©a l√† 'Kh√¥ng ai k·∫øt h√¥n'.", "isCorrect": true },
                { "text": "Either of", "rationale": "Nghƒ©a l√† 'M·ªôt trong hai c√¥ ƒë√£ k·∫øt h√¥n' -> M√¢u thu·∫´n v·ªõi 'h·ªç ƒë·ªÅu ƒë·ªôc th√¢n'.", "isCorrect": false },
                { "text": "Both of", "rationale": "Both ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë nhi·ªÅu (are).", "isCorrect": false },
                { "text": "All of", "rationale": "All ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë nhi·ªÅu.", "isCorrect": false }
              ],
              "hint": "Kh√¥ng ai trong hai ch·ªã em ƒë√£ k·∫øt h√¥n. H·ªç ƒë·ªÅu ƒë·ªôc th√¢n."
            },
            {
              "questionNumber": 13,
              "question": "Does __________ you want to play badminton?",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of (phrase): m·ªôt trong hai (ai trong hai b·∫°n)\n- neither of (phrase): kh√¥ng ai\n- both of (phrase): c·∫£ hai\n- all of (phrase): t·∫•t c·∫£\n2. Gi·∫£i th√≠ch: C√¢u h·ªèi nghi v·∫•n, d√πng 'either of' ƒë·ªÉ h·ªèi s·ª± l·ª±a ch·ªçn/√Ω mu·ªën c·ªßa m·ªôt trong hai ng∆∞·ªùi.", "isCorrect": true },
                { "text": "neither of", "rationale": "Kh√¥ng d√πng 'Neither' trong c√¢u h·ªèi d·∫°ng 'Does...'.", "isCorrect": false },
                { "text": "both of", "rationale": "N·∫øu d√πng 'Both', tr·ª£ ƒë·ªông t·ª´ ph·∫£i l√† 'Do' (s·ªë nhi·ªÅu), nh∆∞ng ƒë·ªÅ b√†i l√† 'Does' (s·ªë √≠t).", "isCorrect": false },
                { "text": "all of", "rationale": "All ƒëi v·ªõi s·ªë nhi·ªÅu (Do).", "isCorrect": false }
              ],
              "hint": "C√≥ ai trong hai b·∫°n mu·ªën ch∆°i c·∫ßu l√¥ng kh√¥ng? (Tr·ª£ ƒë·ªông t·ª´ 'Does' s·ªë √≠t -> Either)."
            },
            {
              "questionNumber": 14,
              "question": "__________ the answers is correct. You got 0 points.",
              "answerOptions": [
                { "text": "Neither of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Neither of (phrase): Kh√¥ng c√°i n√†o trong hai\n- Either of (phrase): M·ªôt trong hai\n- Both of (phrase): C·∫£ hai\n- None of (phrase): Kh√¥ng c√°i n√†o (th∆∞·ªùng >=3)\n2. Gi·∫£i th√≠ch: ƒê·ªông t·ª´ 'is' (s·ªë √≠t) + '0 points' (0 ƒëi·ªÉm) -> Kh√¥ng c√≥ c√¢u tr·∫£ l·ªùi n√†o ƒë√∫ng.", "isCorrect": true },
                { "text": "Either of", "rationale": "N·∫øu 'Either... is correct' th√¨ b·∫°n ph·∫£i c√≥ ƒëi·ªÉm.", "isCorrect": false },
                { "text": "Both of", "rationale": "Both ƒëi v·ªõi 'are'.", "isCorrect": false },
                { "text": "Most of", "rationale": "Most ƒëi v·ªõi 'are' trong tr∆∞·ªùng h·ª£p n√†y.", "isCorrect": false }
              ],
              "hint": "Kh√¥ng c√¢u tr·∫£ l·ªùi n√†o ƒë√∫ng c·∫£. B·∫°n ƒë∆∞·ª£c 0 ƒëi·ªÉm."
            },
            {
              "questionNumber": 15,
              "question": "We can‚Äôt use __________ the cars today.",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of (phrase): b·∫•t k·ª≥ c√°i n√†o trong hai\n- neither of (phrase): kh√¥ng c√°i n√†o\n- both of (phrase): c·∫£ hai\n- much of (phrase): ph·∫ßn l·ªõn\n2. Gi·∫£i th√≠ch: C√¢u c√≥ 'can't' (ph·ªß ƒë·ªãnh) -> D√πng 'either of'. (Can't use either = Kh√¥ng d√πng ƒë∆∞·ª£c c√°i n√†o c·∫£).", "isCorrect": true },
                { "text": "neither of", "rationale": "Kh√¥ng d√πng 2 l·∫ßn ph·ªß ƒë·ªãnh (can't + neither).", "isCorrect": false },
                { "text": "both of", "rationale": "'Can't use both' nghƒ©a l√† kh√¥ng d√πng ƒë∆∞·ª£c c√πng l√∫c c·∫£ 2 (c√≥ th·ªÉ d√πng 1), nh∆∞ng ng·ªØ c·∫£nh th∆∞·ªùng l√† kh√¥ng c√≥ xe n√†o ƒë·ªÉ d√πng.", "isCorrect": false },
                { "text": "much of", "rationale": "Kh√¥ng h·ª£p nghƒ©a.", "isCorrect": false }
              ],
              "hint": "H√¥m nay ch√∫ng ta kh√¥ng th·ªÉ s·ª≠ d·ª•ng chi·∫øc xe n√†o c·∫£."
            },
            {
              "questionNumber": 16,
              "question": "__________ the keys opens the door. We need to find the right one.",
              "answerOptions": [
                { "text": "Neither of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Neither of: Kh√¥ng c√°i n√†o\n- Either of: M·ªôt trong hai\n- Both of: C·∫£ hai\n- All of: T·∫•t c·∫£\n2. Gi·∫£i th√≠ch: ƒê·ªông t·ª´ 'opens' (s·ªë √≠t) -> Lo·∫°i Both. Ng·ªØ c·∫£nh 'We need to find the right one' (C·∫ßn t√¨m ƒë√∫ng ch√¨a) ch·ª©ng t·ªè c√°c ch√¨a hi·ªán t·∫°i KH√îNG m·ªü ƒë∆∞·ª£c -> D√πng Neither.", "isCorrect": true },
                { "text": "Either of", "rationale": "N·∫øu 'Either... opens' th√¨ c·ª≠a ƒë√£ m·ªü r·ªìi, kh√¥ng c·∫ßn t√¨m ch√¨a kh√°c.", "isCorrect": false },
                { "text": "Both of", "rationale": "Both ƒëi v·ªõi 'open' (s·ªë nhi·ªÅu).", "isCorrect": false },
                { "text": "All of", "rationale": "All ƒëi v·ªõi 'open' (s·ªë nhi·ªÅu).", "isCorrect": false }
              ],
              "hint": "Kh√¥ng ch√¨a kh√≥a n√†o m·ªü ƒë∆∞·ª£c c·ª≠a c·∫£. Ch√∫ng ta c·∫ßn t√¨m ƒë√∫ng ch√¨a."
            },
            {
              "questionNumber": 17,
              "question": "I don‚Äôt like __________ those pictures.",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of: c√°i n√†o trong hai\n- neither of: kh√¥ng c√°i n√†o\n- both of: c·∫£ hai\n- some of: m·ªôt v√†i\n2. Gi·∫£i th√≠ch: C√¢u ph·ªß ƒë·ªãnh 'don't like' -> D√πng 'either of'.", "isCorrect": true },
                { "text": "neither of", "rationale": "Double negative (don't + neither) l√† sai.", "isCorrect": false },
                { "text": "both of", "rationale": "T∆∞∆°ng t·ª± c√¢u tr√™n, 'don't like either' (kh√¥ng th√≠ch c√°i n√†o) t·ª± nhi√™n h∆°n.", "isCorrect": false },
                { "text": "some of", "rationale": "Kh√¥ng d√πng 'some' trong c√¢u ph·ªß ƒë·ªãnh (th∆∞·ªùng d√πng any/either).", "isCorrect": false }
              ],
              "hint": "T√¥i kh√¥ng th√≠ch b·ª©c tranh n√†o trong s·ªë ƒë√≥ c·∫£."
            },
            {
              "questionNumber": 18,
              "question": "__________ my parents speaks English. They only speak Vietnamese.",
              "answerOptions": [
                { "text": "Neither of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Neither of: Kh√¥ng ai trong hai\n- Either of: M·ªôt trong hai\n- Both of: C·∫£ hai\n- All of: T·∫•t c·∫£\n2. Gi·∫£i th√≠ch: ƒê·ªông t·ª´ 'speaks' (s·ªë √≠t). Ng·ªØ c·∫£nh 'Only speak Vietnamese' -> B·ªë m·∫π kh√¥ng n√≥i ti·∫øng Anh.", "isCorrect": true },
                { "text": "Either of", "rationale": "M√¢u thu·∫´n v·ªõi v·∫ø sau (h·ªç ch·ªâ n√≥i ti·∫øng Vi·ªát).", "isCorrect": false },
                { "text": "Both of", "rationale": "Both ƒëi v·ªõi 'speak' (s·ªë nhi·ªÅu).", "isCorrect": false },
                { "text": "All of", "rationale": "All ƒëi v·ªõi 'speak' (s·ªë nhi·ªÅu).", "isCorrect": false }
              ],
              "hint": "Kh√¥ng ai trong b·ªë m·∫π t√¥i n√≥i ti·∫øng Anh c·∫£."
            },
            {
              "questionNumber": 19,
              "question": "Do __________ the students have a pen?",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of: m·ªôt trong hai\n- neither of: kh√¥ng ai\n- both of: c·∫£ hai\n- any of: b·∫•t c·ª© ai\n2. Gi·∫£i th√≠ch: D√π 'Do' l√† s·ªë nhi·ªÅu (c√≥ th·ªÉ khi·∫øn nghƒ© ƒë·∫øn Both), nh∆∞ng trong c·∫•u tr√∫c c√¢u h·ªèi l·ª±a ch·ªçn 'Do either of...', 'Do' ƒë∆∞·ª£c d√πng do ·∫£nh h∆∞·ªüng c·ªßa danh t·ª´ s·ªë nhi·ªÅu 'students' trong giao ti·∫øp, ho·∫∑c c√¢u chu·∫©n ph·∫£i l√† 'Does either...'. Tuy nhi√™n trong c√°c ƒë√°p √°n, 'either of' h·ª£p l√Ω nh·∫•t cho c√¢u h·ªèi. 'Both' c≈©ng c√≥ th·ªÉ ƒëi v·ªõi 'Do' nh∆∞ng 'either' nh·∫•n m·∫°nh s·ª± b·∫•t ƒë·ªãnh.", "isCorrect": true },
                { "text": "neither of", "rationale": "Kh√¥ng d√πng Neither trong c√¢u h·ªèi Yes/No ki·ªÉu n√†y.", "isCorrect": false },
                { "text": "none of", "rationale": "None d√πng cho >=3 ng∆∞·ªùi.", "isCorrect": false },
                { "text": "much of", "rationale": "Sai ng·ªØ ph√°p.", "isCorrect": false }
              ],
              "hint": "C√≥ ai trong s·ªë c√°c h·ªçc sinh c√≥ b√∫t kh√¥ng? (H·ªèi v·ªÅ s·ª± t·ªìn t·∫°i)."
            },
            {
              "questionNumber": 20,
              "question": "__________ the restaurants is cheap. Let‚Äôs cook at home.",
              "answerOptions": [
                { "text": "Neither of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Neither of: Kh√¥ng c√°i n√†o\n- Either of: M·ªôt trong hai\n- Both of: C·∫£ hai\n- All of: T·∫•t c·∫£\n2. Gi·∫£i th√≠ch: ƒê·ªông t·ª´ 'is' (s·ªë √≠t). 'Let's cook at home' -> Ngo√†i h√†ng kh√¥ng r·∫ª -> Kh√¥ng nh√† h√†ng n√†o r·∫ª.", "isCorrect": true },
                { "text": "Either of", "rationale": "N·∫øu 'Either... is cheap' (m·ªôt c√°i r·∫ª) th√¨ ƒë√£ ƒëi ƒÉn r·ªìi.", "isCorrect": false },
                { "text": "Both of", "rationale": "Both ƒëi v·ªõi 'are'.", "isCorrect": false },
                { "text": "All of", "rationale": "All ƒëi v·ªõi 'are'.", "isCorrect": false }
              ],
              "hint": "Kh√¥ng nh√† h√†ng n√†o r·∫ª c·∫£. H√£y n·∫•u ƒÉn ·ªü nh√†."
            },
            {
              "questionNumber": 21,
              "question": "I didn‚Äôt invite __________ them to my birthday.",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of: ai trong hai\n- neither of: kh√¥ng ai\n- both of: c·∫£ hai\n- all of: t·∫•t c·∫£\n2. Gi·∫£i th√≠ch: C√¢u ph·ªß ƒë·ªãnh 'didn't' -> D√πng 'either of'.", "isCorrect": true },
                { "text": "neither of", "rationale": "Sai v√¨ double negative.", "isCorrect": false },
                { "text": "both of", "rationale": "Ng·ªØ c·∫£nh th∆∞·ªùng l√† kh√¥ng m·ªùi ai c·∫£ (either).", "isCorrect": false },
                { "text": "one of", "rationale": "Kh√¥ng ph·ªï bi·∫øn trong c·∫•u tr√∫c ph·ªß ƒë·ªãnh nh·∫•n m·∫°nh 'c·∫£ hai'.", "isCorrect": false }
              ],
              "hint": "T√¥i ƒë√£ kh√¥ng m·ªùi ai trong s·ªë h·ªç ƒë·∫øn sinh nh·∫≠t."
            },
            {
              "questionNumber": 22,
              "question": "__________ the drivers was hurt in the accident. They are fine.",
              "answerOptions": [
                { "text": "Neither of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Neither of: Kh√¥ng ai\n- Either of: M·ªôt trong hai\n- Both of: C·∫£ hai\n- All of: T·∫•t c·∫£\n2. Gi·∫£i th√≠ch: 'was' (s·ªë √≠t). 'They are fine' -> Kh√¥ng ai b·ªã th∆∞∆°ng.", "isCorrect": true },
                { "text": "Either of", "rationale": "M√¢u thu·∫´n v·ªõi 'They are fine'.", "isCorrect": false },
                { "text": "Both of", "rationale": "Both ƒëi v·ªõi 'were'.", "isCorrect": false },
                { "text": "All of", "rationale": "All ƒëi v·ªõi 'were'.", "isCorrect": false }
              ],
              "hint": "Kh√¥ng t√†i x·∫ø n√†o b·ªã th∆∞∆°ng trong v·ª• tai n·∫°n c·∫£."
            },
            {
              "questionNumber": 23,
              "question": "Has __________ you seen my glasses?",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of: m·ªôt trong hai\n- neither of: kh√¥ng ai\n- both of: c·∫£ hai\n- all of: t·∫•t c·∫£\n2. Gi·∫£i th√≠ch: Tr·ª£ ƒë·ªông t·ª´ 'Has' (s·ªë √≠t) -> D√πng 'either of'. C√¢u h·ªèi nghi v·∫•n.", "isCorrect": true },
                { "text": "neither of", "rationale": "Kh√¥ng d√πng trong c√¢u h·ªèi Has...", "isCorrect": false },
                { "text": "both of", "rationale": "Both ƒëi v·ªõi 'Have'.", "isCorrect": false },
                { "text": "all of", "rationale": "All ƒëi v·ªõi 'Have'.", "isCorrect": false }
              ],
              "hint": "C√≥ ai trong hai b·∫°n th·∫•y k√≠nh c·ªßa t√¥i kh√¥ng?"
            },
            {
              "questionNumber": 24,
              "question": "__________ the plans works. We need a new idea.",
              "answerOptions": [
                { "text": "Neither of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- Neither of: Kh√¥ng c√°i n√†o\n- Either of: M·ªôt trong hai\n- Both of: C·∫£ hai\n- All of: T·∫•t c·∫£\n2. Gi·∫£i th√≠ch: ƒê·ªông t·ª´ 'works' (s·ªë √≠t). 'Need new idea' -> C√°c k·∫ø ho·∫°ch c≈© kh√¥ng hi·ªáu qu·∫£ -> Neither.", "isCorrect": true },
                { "text": "Either of", "rationale": "N·∫øu 'Either... works' th√¨ ƒë√£ kh√¥ng c·∫ßn √Ω t∆∞·ªüng m·ªõi.", "isCorrect": false },
                { "text": "Both of", "rationale": "Both ƒëi v·ªõi 'work' (s·ªë nhi·ªÅu).", "isCorrect": false },
                { "text": "All of", "rationale": "All ƒëi v·ªõi 'work' (s·ªë nhi·ªÅu).", "isCorrect": false }
              ],
              "hint": "Kh√¥ng k·∫ø ho·∫°ch n√†o hi·ªáu qu·∫£ c·∫£."
            },
            {
              "questionNumber": 25,
              "question": "I don‚Äôt think __________ us is ready for the test.",
              "answerOptions": [
                { "text": "either of", "rationale": "1. D·ªãch & T·ª´ lo·∫°i:\n- either of: ai trong hai\n- neither of: kh√¥ng ai\n- both of: c·∫£ hai\n- any of: b·∫•t c·ª© ai\n2. Gi·∫£i th√≠ch: C·∫•u tr√∫c 'don't think' + 'either' = 'think' + 'neither'. V√¨ ƒë√£ c√≥ 'don't', ta d√πng 'either of'. ƒê·ªông t·ª´ 'is' (s·ªë √≠t) c≈©ng ph√π h·ª£p v·ªõi 'either of'.", "isCorrect": true },
                { "text": "neither of", "rationale": "Tr√°nh d√πng 'don't' + 'neither' (Double negative).", "isCorrect": false },
                { "text": "both of", "rationale": "Both ƒëi v·ªõi 'are'.", "isCorrect": false },
                { "text": "all of", "rationale": "All ƒëi v·ªõi 'are'.", "isCorrect": false }
              ],
              "hint": "T√¥i kh√¥ng nghƒ© ai trong hai ch√∫ng ta ƒë√£ s·∫µn s√†ng."
            }
          ]
        };

        // --- GAME STATE ---
        let currentQuestionIndex = 0;
        let score = 0;
        let shuffledQuestions = [];

        // --- AUDIO ---
        // Short Beep/Chime sounds using data URIs to ensure single-file portability
        const correctSound = new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU"); // Placeholder, usually replaced with real base64
        // Since base64 MP3s are long, I will use a simple synthesized beep for wrong/right using AudioContext if possible, 
        // but for simplicity in this prompt I'll use standard short URLs or simulated sound if browser allows.
        // Actually, let's use a simple AudioContext beeper for "Buzz" and "Ding" to be 100% self-contained without massive base64 strings.
        
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // "Ding" - High pitch sine wave
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else {
                // "Buzz" - Low pitch sawtooth
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- UTILS ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- INITIALIZATION ---
        function initQuiz() {
            shuffledQuestions = shuffleArray([...quizData.questions]);
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('quiz-area').style.display = 'block';
            document.getElementById('result-screen').style.display = 'none';
            renderQuestion();
        }

        // --- RENDER QUESTION ---
        function renderQuestion() {
            const q = shuffledQuestions[currentQuestionIndex];
            
            // Update Progress
            const progressPercent = ((currentQuestionIndex) / shuffledQuestions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progressPercent}%`;

            // Update Text
            document.getElementById('question-text').textContent = `C√¢u ${currentQuestionIndex + 1}: ${q.question}`;

            // Reset Explanation
            document.getElementById('explanation-box').classList.remove('show');
            document.getElementById('next-btn').style.display = 'none';

            // Create Options
            const optionsContainer = document.getElementById('options-grid');
            optionsContainer.innerHTML = '';

            // Copy and Shuffle Options for display
            // Note: We use a copy so we don't mess up the original data order if needed later,
            // but principally this ensures A, B, C, D are assigned to random answers.
            const currentOptions = shuffleArray([...q.answerOptions]);
            
            currentOptions.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                // Store correctness on the button itself to easily find it later
                btn.dataset.isCorrect = opt.isCorrect;
                
                btn.innerHTML = `<span style="font-weight:800; color:var(--primary-color); margin-right:10px;">${String.fromCharCode(65+index)}.</span> ${opt.text}`;
                btn.onclick = () => handleAnswer(btn, opt, q);
                optionsContainer.appendChild(btn);
            });
        }

        // --- HANDLE ANSWER ---
        function handleAnswer(btn, option, questionData) {
            // Disable all buttons
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(b => b.disabled = true);

            const isCorrect = option.isCorrect;

            if (isCorrect) {
                btn.classList.add('correct');
                score++;
                playSound('correct');
                // Confetti
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            } else {
                btn.classList.add('wrong');
                playSound('wrong');
                // Highlight correct answer by checking dataset
                buttons.forEach(b => {
                    if (b.dataset.isCorrect === 'true') {
                        b.classList.add('correct');
                    }
                });
            }

            showExplanation(questionData);
            
            // Update button text for last question
            const nextBtn = document.getElementById('next-btn');
            nextBtn.style.display = 'inline-block';
            if (currentQuestionIndex === shuffledQuestions.length - 1) {
                nextBtn.textContent = 'N·ªôp b√†i üèÅ';
            } else {
                nextBtn.textContent = 'C√¢u ti·∫øp theo ‚ûú';
            }
        }

        // --- BUILD EXPLANATION CONTENT ---
        function showExplanation(qData) {
            const expBox = document.getElementById('explanation-box');
            const expContent = document.getElementById('exp-content');
            
            // Extract correct option rationale
            const correctOpt = qData.answerOptions.find(o => o.isCorrect);
            // Incorrect options
            const wrongOpts = qData.answerOptions.filter(o => !o.isCorrect);

            // Step 1: D·ªãch c√¢u h·ªèi (Use hint or create translation prompt style)
            // The 'hint' field in data is actually the translation.
            const translation = qData.hint || "Ch∆∞a c√≥ b·∫£n d·ªãch.";

            // Step 2 & 3: Analysis & Why Correct (From Correct Option Rationale)
            const analysisText = correctOpt.rationale.replace(/\n/g, '<br>');

            // Step 4: Why Others Wrong
            let wrongAnalysisHTML = '<div class="exp-step"><span class="exp-label">‚ùå T·∫°i sao c√°c c√¢u kh√°c sai?</span><ul style="margin:5px 0; padding-left:20px;">';
            wrongOpts.forEach(opt => {
                wrongAnalysisHTML += `<li><strong>${opt.text}:</strong> ${opt.rationale}</li>`;
            });
            wrongAnalysisHTML += '</ul></div>';

            expContent.innerHTML = `
                <div class="exp-step">
                    <span class="exp-label">üáªüá≥ D·ªãch c√¢u h·ªèi:</span>
                    <em>"${translation}"</em>
                </div>
                <div class="exp-step">
                    <span class="exp-label">‚úÖ Ph√¢n t√≠ch & ƒê√°p √°n ƒë√∫ng:</span><br>
                    ${analysisText}
                </div>
                ${wrongAnalysisHTML}
            `;

            expBox.classList.add('show');
            // Scroll to explanation on mobile
            setTimeout(() => {
                expBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // --- NAVIGATION ---
        function nextQuestion() {
            if (currentQuestionIndex < shuffledQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById('quiz-area').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            
            document.getElementById('final-score').textContent = `${score}/${shuffledQuestions.length}`;
            
            let msg = "";
            const percent = (score / shuffledQuestions.length) * 100;
            if (percent === 100) msg = "Tuy·ªát ƒë·ªëi! B·∫°n l√† si√™u sao ng·ªØ ph√°p! üåü";
            else if (percent >= 80) msg = "Gi·ªèi l·∫Øm! B·∫°n n·∫Øm r·∫•t ch·∫Øc ki·∫øn th·ª©c! üéâ";
            else if (percent >= 50) msg = "Kh√° t·ªët! H√£y √¥n l·∫°i ph·∫ßn gi·∫£i th√≠ch nh√©! üí™";
            else msg = "C·ªë g·∫Øng l√™n! L√†m l·∫°i ƒë·ªÉ nh·ªõ l√¢u h∆°n nh√©! üìö";
            
            document.getElementById('final-message').textContent = msg;
        }

        function restartQuiz() {
            initQuiz();
        }

        // --- START ---
        window.onload = initQuiz;

    </script>
</body>
</html>
