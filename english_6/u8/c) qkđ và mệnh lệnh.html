<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc Ti·∫øng Anh C√πng C√¥ Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f7ff;
            background-image: radial-gradient(#8854c0 0.5px, transparent 0.5px), radial-gradient(#8854c0 0.5px, #f0f7ff 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            box-shadow: 0 20px 0 rgba(136, 84, 192, 0.2);
            transition: all 0.3s ease;
        }

        .btn-option {
            background: white;
            border: 3px solid #e2e8f0;
            border-radius: 20px;
            box-shadow: 0 6px 0 #e2e8f0;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            text-align: left;
            padding: 1rem 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #cbd5e1;
            border-color: #cbd5e1;
        }

        .btn-option:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #cbd5e1;
        }

        .btn-option.correct {
            background-color: #00D26A !important;
            border-color: #00a854 !important;
            box-shadow: 0 6px 0 #008f47 !important;
            color: white !important;
        }

        .btn-option.wrong {
            background-color: #FF4757 !important;
            border-color: #e03d4b !important;
            box-shadow: 0 6px 0 #c03440 !important;
            color: white !important;
        }

        .explanation-box {
            animation: slideIn 0.5s ease-out;
            border-left: 8px solid #00C9A7;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .shake { animation: shake 0.4s ease-in-out; }

        .progress-bar-inner {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .ulis-header {
            font-size: 0.8rem;
            color: #8854C0;
            font-weight: 800;
            letter-spacing: 1px;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #8854C0;
            border-radius: 10px;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header Section -->
    <div class="text-center mb-6">
        <h3 class="ulis-header uppercase">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</h3>
        <h1 class="text-3xl md:text-4xl font-extrabold text-[#8854C0] mt-1 drop-shadow-sm">üèÜ TH·ª¨ TH√ÅCH SI√äU SAO TH·ªÇ THAO</h1>
    </div>

    <!-- Main Quiz Container -->
    <div id="quiz-container" class="w-full max-w-2xl">
        <!-- Progress Info -->
        <div class="flex justify-between items-center mb-4 px-2">
            <span class="font-bold text-[#8854C0]">C√¢u h·ªèi: <span id="current-idx">1</span>/30</span>
            <span class="font-bold text-[#00C9A7]">ƒêi·ªÉm: <span id="score">0</span></span>
        </div>
        
        <!-- Progress Bar -->
        <div class="w-full h-4 bg-white rounded-full mb-8 overflow-hidden shadow-inner border-2 border-white">
            <div id="progress-bar" class="progress-bar-inner h-full bg-[#00C9A7]" style="width: 3.33%"></div>
        </div>

        <!-- Question Card -->
        <div id="question-card" class="glass-card p-6 md:p-8 relative">
            <div id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-relaxed">
                Loading...
            </div>

            <div id="options-container" class="grid grid-cols-1 gap-4 mb-8">
                <!-- Options will be injected here -->
            </div>

            <!-- Explanation Area (Hidden by default) -->
            <div id="explanation-area" class="hidden">
                <div class="explanation-box bg-emerald-50 p-5 rounded-2xl mb-6 text-gray-700 shadow-sm border border-emerald-100">
                    <h4 class="font-black text-emerald-700 mb-2 flex items-center">
                        <span class="mr-2">üë©‚Äçüè´</span> C√î MAI AN GI·∫¢I TH√çCH:
                    </h4>
                    <div id="explanation-content" class="text-sm md:text-base space-y-3 leading-relaxed">
                        <!-- Content here -->
                    </div>
                </div>
                <button id="next-btn" class="w-full py-4 bg-[#8854C0] text-white font-extrabold rounded-2xl shadow-[0_6px_0_#6b3da3] hover:translate-y-[-2px] hover:shadow-[0_8px_0_#6b3da3] active:translate-y-[4px] active:shadow-none transition-all text-lg">
                    TI·∫æP T·ª§C TH√îI! üöÄ
                </button>
            </div>
        </div>
    </div>

    <!-- Final Result Modal -->
    <div id="result-modal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4">
        <div class="glass-card max-w-sm w-full p-8 text-center animate-bounce-short">
            <div class="text-6xl mb-4">‚≠ê</div>
            <h2 class="text-3xl font-black text-[#8854C0] mb-2">XU·∫§T S·∫ÆC!</h2>
            <p class="text-gray-600 mb-6 font-semibold">B·∫°n ƒë√£ ho√†n th√†nh b√†i thi c·ªßa C√¥ Mai An.</p>
            <div class="bg-gray-100 rounded-2xl p-6 mb-8 border-2 border-dashed border-gray-300">
                <div class="text-5xl font-black text-[#00C9A7]" id="final-score">0/30</div>
                <div class="text-sm font-bold text-gray-500 mt-2 uppercase">T·ªïng s·ªë c√¢u ƒë√∫ng</div>
            </div>
            <p id="comment" class="text-emerald-600 font-bold italic mb-8">"L√†m t·ªët l·∫Øm, ti·∫øp t·ª•c ph√°t huy nh√©!"</p>
            <button onclick="location.reload()" class="w-full py-4 bg-[#00C9A7] text-white font-extrabold rounded-2xl shadow-[0_6px_0_#00a88c] hover:translate-y-[-2px] transition-all">
                L√ÄM L·∫†I B√ÄI THI üîÑ
            </button>
        </div>
    </div>

    <script>
        const quizData = [
            {
                q: "Yesterday, our team _______ (win) the basketball championship 85-70.",
                options: ["won", "winned", "wins", "winning"],
                correct: 0,
                explanation: {
                    analysis: ["won (v2): th·∫Øng (ƒë·ªông t·ª´ b·∫•t quy t·∫Øc).", "winned: sai (kh√¥ng t·ªìn t·∫°i trong ti·∫øng Anh).", "wins (v1): th·∫Øng (d√πng cho hi·ªán t·∫°i ƒë∆°n).", "winning (v-ing): ƒëang th·∫Øng (c·∫ßn tr·ª£ ƒë·ªông t·ª´ be)."],
                    translation: "H√¥m qua, ƒë·ªôi c·ªßa ch√∫ng t√¥i ƒë√£ th·∫Øng ch·ª©c v√¥ ƒë·ªãch b√≥ng r·ªï v·ªõi t·ªâ s·ªë 85-70.",
                    whyRight: "V√¨ c√≥ tr·∫°ng t·ª´ 'Yesterday' (h√¥m qua), ta d√πng th√¨ Qu√° kh·ª© ƒë∆°n. 'Win' l√† ƒë·ªông t·ª´ b·∫•t quy t·∫Øc, c·ªôt 2 l√† 'won'.",
                    whyWrong: "'Wins' d√πng cho hi·ªán t·∫°i, 'Winning' kh√¥ng ƒë·ª©ng m·ªôt m√¨nh l√†m ƒë·ªông t·ª´ ch√≠nh, 'Winned' l√† t·ª´ vi·∫øt sai quy t·∫Øc."
                }
            },
            {
                q: "I _______ (not/go) swimming last Sunday because it was too cold.",
                options: ["not went", "didn't go", "didn't went", "don't go"],
                correct: 1,
                explanation: {
                    analysis: ["not went: sai c·∫•u tr√∫c ph·ªß ƒë·ªãnh.", "didn't go: ƒë√∫ng (c·∫•u tr√∫c ph·ªß ƒë·ªãnh qu√° kh·ª©).", "didn't went: sai (sau didn't ƒë·ªông t·ª´ ph·∫£i nguy√™n m·∫´u).", "don't go: sai (d√πng cho hi·ªán t·∫°i)."],
                    translation: "T√¥i ƒë√£ kh√¥ng ƒëi b∆°i ch·ªß nh·∫≠t tr∆∞·ªõc v√¨ tr·ªùi qu√° l·∫°nh.",
                    whyRight: "C·∫•u tr√∫c ph·ªß ƒë·ªãnh Qu√° kh·ª© ƒë∆°n v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng: S + didn't + V (nguy√™n th·ªÉ). ·ªû ƒë√¢y c√≥ 'last Sunday'.",
                    whyWrong: "Kh√¥ng bao gi·ªù d√πng 'not' ƒë·ª©ng tr∆∞·ªõc V2, v√† kh√¥ng bao gi·ªù d√πng V2 (went) sau 'didn't'."
                }
            },
            {
                q: "_______ you _______ (watch) the football match on TV last night?",
                options: ["Did / watch", "Do / watch", "Did / watched", "Were / watch"],
                correct: 0,
                explanation: {
                    analysis: ["Did / watch: ƒë√∫ng c·∫•u tr√∫c c√¢u h·ªèi qu√° kh·ª©.", "Do / watch: sai th√¨ (hi·ªán t·∫°i).", "Did / watched: sai (sau did ƒë·ªông t·ª´ gi·ªØ nguy√™n).", "Were / watch: sai tr·ª£ ƒë·ªông t·ª´."],
                    translation: "B·∫°n c√≥ xem tr·∫≠n b√≥ng ƒë√° tr√™n TV t·ªëi qua kh√¥ng?",
                    whyRight: "C√¢u h·ªèi Nghi v·∫•n Qu√° kh·ª© ƒë∆°n: Did + S + V (nguy√™n th·ªÉ)? D·∫•u hi·ªáu: 'last night'.",
                    whyWrong: "'Were' ch·ªâ d√πng cho danh t·ª´/t√≠nh t·ª´ trong qu√° kh·ª©, kh√¥ng d√πng ƒë·ªÉ h·ªèi cho ƒë·ªông t·ª´ th∆∞·ªùng 'watch'."
                }
            },
            {
                q: "The students _______ (play) badminton in the schoolyard two hours ago.",
                options: ["played", "plaied", "playing", "plays"],
                correct: 0,
                explanation: {
                    analysis: ["played: ƒë√∫ng (ƒë·ªông t·ª´ c√≥ quy t·∫Øc).", "plaied: sai ch√≠nh t·∫£.", "playing: thi·∫øu to be.", "plays: sai th√¨ (hi·ªán t·∫°i)."],
                    translation: "C√°c h·ªçc sinh ƒë√£ ch∆°i c·∫ßu l√¥ng ·ªü s√¢n tr∆∞·ªùng hai gi·ªù tr∆∞·ªõc.",
                    whyRight: "D·∫•u hi·ªáu 'two hours ago' -> Qu√° kh·ª© ƒë∆°n. 'Play' l√† ƒë·ªông t·ª´ c√≥ quy t·∫Øc, ch·ªâ c·∫ßn th√™m '-ed' th√†nh 'played'.",
                    whyWrong: "Quy t·∫Øc ch√≠nh t·∫£: 'y' ƒë·ª©ng sau nguy√™n √¢m 'a' th√¨ ch·ªâ vi·ªác th√™m 'ed', kh√¥ng ƒë·ªïi th√†nh 'i'."
                }
            },
            {
                q: "My brother _______ (be) the best chess player in his class last year.",
                options: ["were", "was", "is", "been"],
                correct: 1,
                explanation: {
                    analysis: ["were: sai ng√¥i (d√πng cho s·ªë nhi·ªÅu).", "was: ƒë√∫ng (qu√° kh·ª© c·ªßa be s·ªë √≠t).", "is: sai th√¨ (hi·ªán t·∫°i).", "been: sai d·∫°ng (ph√¢n t·ª´ 2)."],
                    translation: "Anh trai t√¥i l√† ng∆∞·ªùi ch∆°i c·ªù gi·ªèi nh·∫•t l·ªõp nƒÉm ngo√°i.",
                    whyRight: "Ch·ªß ng·ªØ 'My brother' l√† s·ªë √≠t, tr·∫°ng t·ª´ 'last year' -> d√πng 'was'.",
                    whyWrong: "'Were' d√πng cho c√°c ch·ªß ng·ªØ s·ªë nhi·ªÅu nh∆∞ You/We/They."
                }
            },
            {
                q: "We _______ (stop) playing tennis when it started to rain.",
                options: ["stopped", "stoped", "stops", "stopping"],
                correct: 0,
                explanation: {
                    analysis: ["stopped: ƒë√∫ng (g·∫•p ƒë√¥i ph·ª• √¢m).", "stoped: sai ch√≠nh t·∫£.", "stops: sai th√¨.", "stopping: sai c·∫•u tr√∫c."],
                    translation: "Ch√∫ng t√¥i ƒë√£ ng·ª´ng ch∆°i qu·∫ßn v·ª£t khi tr·ªùi b·∫Øt ƒë·∫ßu m∆∞a.",
                    whyRight: "ƒê·ªông t·ª´ 'stop' t·∫≠n c√πng l√† 1 nguy√™n √¢m k·∫πp gi·ªØa 2 ph·ª• √¢m (o n·∫±m gi·ªØa t v√† p) -> Ph·∫£i g·∫•p ƒë√¥i ph·ª• √¢m cu·ªëi tr∆∞·ªõc khi th√™m '-ed'.",
                    whyWrong: "N·∫øu kh√¥ng g·∫•p ƒë√¥i 'p' l√† vi·∫øt sai ch√≠nh t·∫£ ti·∫øng Anh."
                }
            },
            {
                q: "_______ (be) you at the sports center yesterday afternoon?",
                options: ["Was", "Were", "Are", "Did"],
                correct: 1,
                explanation: {
                    analysis: ["Was: sai ng√¥i (d√πng cho I/He/She/It).", "Were: ƒë√∫ng ng√¥i (You/We/They).", "Are: hi·ªán t·∫°i.", "Did: kh√¥ng d√πng v·ªõi t√≠nh t·ª´/tr·∫°ng t·ª´ n∆°i ch·ªën."],
                    translation: "B·∫°n c√≥ ·ªü trung t√¢m th·ªÉ thao chi·ªÅu h√¥m qua kh√¥ng?",
                    whyRight: "C√¢u h·ªèi v·ªõi ƒë·ªông t·ª´ To be ·ªü qu√° kh·ª©: Were + You + ...? V√¨ ch·ªß ng·ªØ l√† 'You'.",
                    whyWrong: "Kh√¥ng d√πng 'Did' v√¨ ·ªü ƒë√¢y kh√¥ng c√≥ ƒë·ªông t·ª´ h√†nh ƒë·ªông ch√≠nh, ch·ªâ c√≥ tr·∫°ng ng·ªØ n∆°i ch·ªën."
                }
            },
            {
                q: "She _______ (study) all the rules before joining the karate club.",
                options: ["studyed", "studied", "studies", "studying"],
                correct: 1,
                explanation: {
                    analysis: ["studyed: sai ch√≠nh t·∫£.", "studied: ƒë√∫ng quy t·∫Øc bi·∫øn y th√†nh i.", "studies: hi·ªán t·∫°i.", "studying: ƒëang h·ªçc."],
                    translation: "C√¥ ·∫•y ƒë√£ nghi√™n c·ª©u t·∫•t c·∫£ c√°c quy t·∫Øc tr∆∞·ªõc khi tham gia c√¢u l·∫°c b·ªô karate.",
                    whyRight: "'Study' t·∫≠n c√πng l√† 'y', tr∆∞·ªõc ƒë√≥ l√† ph·ª• √¢m 'd' -> Ph·∫£i ƒë·ªïi 'y' th√†nh 'i' r·ªìi m·ªõi th√™m '-ed'.",
                    whyWrong: "Vi·∫øt 'studyed' l√† l·ªói sai ch√≠nh t·∫£ ph·ªï bi·∫øn c·∫ßn tr√°nh."
                }
            },
            {
                q: "They _______ (not/be) happy when their team lost the game.",
                options: ["didn't be", "weren't", "wasn't", "aren't"],
                correct: 1,
                explanation: {
                    analysis: ["didn't be: sai (kh√¥ng bao gi·ªù d√πng didn't v·ªõi be).", "weren't: ƒë√∫ng (were not).", "wasn't: sai ng√¥i (s·ªë √≠t).", "aren't: hi·ªán t·∫°i."],
                    translation: "H·ªç ƒë√£ kh√¥ng vui khi ƒë·ªôi c·ªßa h·ªç thua tr·∫≠n.",
                    whyRight: "ƒê·ªông t·ª´ 'to be' t·ª± b·∫£n th√¢n n√≥ th√™m 'not' trong ph·ªß ƒë·ªãnh qu√° kh·ª©. Ch·ªß ng·ªØ 'They' d√πng 'were not' = 'weren't'.",
                    whyWrong: "L∆∞u √Ω c·ª±c quan tr·ªçng: ƒê·ªông t·ª´ To be KH√îNG m∆∞·ª£n tr·ª£ ƒë·ªông t·ª´ 'did'."
                }
            },
            {
                q: "When _______ he _______ (start) learning table tennis?",
                options: ["did / started", "did / start", "do / start", "was / start"],
                correct: 1,
                explanation: {
                    analysis: ["did / started: sai (th·ª´a ed).", "did / start: ƒë√∫ng c·∫•u tr√∫c c√¢u h·ªèi.", "do / start: hi·ªán t·∫°i.", "was / start: sai tr·ª£ ƒë·ªông t·ª´."],
                    translation: "Anh ·∫•y b·∫Øt ƒë·∫ßu h·ªçc b√≥ng b√†n khi n√†o?",
                    whyRight: "C√¢u h·ªèi Wh- ·ªü qu√° kh·ª©: Wh- + did + S + V (nguy√™n th·ªÉ)?",
                    whyWrong: "Trong c√¢u h·ªèi ƒë√£ c√≥ 'did' th√¨ ƒë·ªông t·ª´ ph·∫£i tr·ªü v·ªÅ 'start' nguy√™n g·ªëc."
                }
            },
            {
                q: "The coach _______ (teach) us new techniques last Monday.",
                options: ["teached", "taught", "thought", "teaching"],
                correct: 1,
                explanation: {
                    analysis: ["teached: sai (kh√¥ng t·ªìn t·∫°i).", "taught: ƒë√∫ng (qu√° kh·ª© c·ªßa teach).", "thought: sai nghƒ©a (nghƒ©).", "teaching: ƒëang d·∫°y."],
                    translation: "Hu·∫•n luy·ªán vi√™n ƒë√£ d·∫°y ch√∫ng t√¥i c√°c k·ªπ thu·∫≠t m·ªõi v√†o th·ª© Hai tu·∫ßn tr∆∞·ªõc.",
                    whyRight: "'Teach' l√† ƒë·ªông t·ª´ b·∫•t quy t·∫Øc, qu√° kh·ª© l√† 'taught'.",
                    whyWrong: "'Thought' l√† qu√° kh·ª© c·ªßa 'think', r·∫•t d·ªÖ b·ªã nh·∫ßm l·∫´n v√¨ c√°ch vi·∫øt t∆∞∆°ng t·ª±."
                }
            },
            {
                q: "I _______ (try) aerobics for the first time three weeks ago.",
                options: ["tried", "tryed", "trys", "trying"],
                correct: 0,
                explanation: {
                    analysis: ["tried: ƒë√∫ng quy t·∫Øc y -> i.", "tryed: sai ch√≠nh t·∫£.", "trys: hi·ªán t·∫°i.", "trying: ƒëang th·ª≠."],
                    translation: "T√¥i ƒë√£ th·ª≠ t·∫≠p aerobics l·∫ßn ƒë·∫ßu ti√™n ba tu·∫ßn tr∆∞·ªõc.",
                    whyRight: "'Try' k·∫øt th√∫c b·∫±ng 'y', tr∆∞·ªõc l√† ph·ª• √¢m 'r' -> ƒë·ªïi 'y' th√†nh 'i' + 'ed'.",
                    whyWrong: "'Tryed' l√† c√°ch vi·∫øt sai ch√≠nh t·∫£."
                }
            },
            {
                q: "The players _______ (not/have) enough time to practice before the tournament.",
                options: ["didn't had", "didn't have", "not had", "don't have"],
                correct: 1,
                explanation: {
                    analysis: ["didn't had: sai (sau didn't ph·∫£i nguy√™n m·∫´u).", "didn't have: ƒë√∫ng c·∫•u tr√∫c ph·ªß ƒë·ªãnh.", "not had: thi·∫øu tr·ª£ ƒë·ªông t·ª´.", "don't have: hi·ªán t·∫°i."],
                    translation: "C√°c c·∫ßu th·ªß ƒë√£ kh√¥ng c√≥ ƒë·ªß th·ªùi gian ƒë·ªÉ t·∫≠p luy·ªán tr∆∞·ªõc gi·∫£i ƒë·∫•u.",
                    whyRight: "C·∫•u tr√∫c: didn't + V (nguy√™n m·∫´u). 'Have' l√† nguy√™n m·∫´u c·ªßa 'had'.",
                    whyWrong: "Kh√¥ng bao gi·ªù d√πng V2 (had) sau 'didn't'."
                }
            },
            {
                q: "All the students _______ (be) excited about Sports Day in 2023.",
                options: ["was", "were", "are", "been"],
                correct: 1,
                explanation: {
                    analysis: ["was: sai ng√¥i (s·ªë √≠t).", "were: ƒë√∫ng ng√¥i (s·ªë nhi·ªÅu).", "are: hi·ªán t·∫°i.", "been: ph√¢n t·ª´ 2."],
                    translation: "T·∫•t c·∫£ h·ªçc sinh ƒë·ªÅu h√†o h·ª©ng v·ªÅ Ng√†y h·ªôi Th·ªÉ thao nƒÉm 2023.",
                    whyRight: "Ch·ªß ng·ªØ 'All the students' l√† danh t·ª´ s·ªë nhi·ªÅu -> d√πng 'were'.",
                    whyWrong: "D√π l√† h·ªçc sinh ti·ªÉu h·ªçc hay c·∫•p 2, nh·ªõ 'were' ƒëi v·ªõi s·ªë nhi·ªÅu nh√©!"
                }
            },
            {
                q: "My father _______ (buy) me new goggles for swimming last month.",
                options: ["bought", "buyed", "buys", "buying"],
                correct: 0,
                explanation: {
                    analysis: ["bought: ƒë√∫ng (qu√° kh·ª© b·∫•t quy t·∫Øc).", "buyed: sai (kh√¥ng t·ªìn t·∫°i).", "buys: hi·ªán t·∫°i.", "buying: ƒëang mua."],
                    translation: "B·ªë t√¥i ƒë√£ mua cho t√¥i k√≠nh b∆°i m·ªõi v√†o th√°ng tr∆∞·ªõc.",
                    whyRight: "'Buy' l√† ƒë·ªông t·ª´ b·∫•t quy t·∫Øc, qu√° kh·ª© l√† 'bought'.",
                    whyWrong: "R·∫•t nhi·ªÅu b·∫°n nh·∫ßm 'buyed', nh·ªõ h·ªçc thu·ªôc b·∫£ng ƒë·ªông t·ª´ b·∫•t quy t·∫Øc nha!"
                }
            },
            // IMPERATIVES SECTION
            {
                q: "_______ (bring) your racket to the tennis court tomorrow!",
                options: ["Bringing", "To bring", "Bring", "Brought"],
                correct: 2,
                explanation: {
                    analysis: ["Bringing: sai.", "To bring: sai.", "Bring: ƒë√∫ng (c√¢u m·ªánh l·ªánh).", "Brought: qu√° kh·ª©."],
                    translation: "H√£y mang v·ª£t c·ªßa b·∫°n ƒë·∫øn s√¢n qu·∫ßn v·ª£t ng√†y mai nh√©!",
                    whyRight: "C√¢u m·ªánh l·ªánh kh·∫≥ng ƒë·ªãnh b·∫Øt ƒë·∫ßu tr·ª±c ti·∫øp b·∫±ng ƒë·ªông t·ª´ nguy√™n m·∫´u (Bare infinitive).",
                    whyWrong: "Kh√¥ng d√πng 'To' hay ƒëu√¥i '-ing' ·ªü ƒë·∫ßu c√¢u m·ªánh l·ªánh."
                }
            },
            {
                q: "_______ (not/run) near the swimming pool! It's dangerous.",
                options: ["Not run", "Don't run", "No run", "Doesn't run"],
                correct: 1,
                explanation: {
                    analysis: ["Not run: sai c·∫•u tr√∫c.", "Don't run: ƒë√∫ng m·ªánh l·ªánh ph·ªß ƒë·ªãnh.", "No run: sai.", "Doesn't run: sai (m·ªánh l·ªánh ch·ªâ d√πng Don't)."],
                    translation: "ƒê·ª´ng ch·∫°y g·∫ßn h·ªì b∆°i! Nguy hi·ªÉm l·∫Øm.",
                    whyRight: "C√¢u m·ªánh l·ªánh ph·ªß ƒë·ªãnh (c·∫•m ƒëo√°n) lu√¥n b·∫Øt ƒë·∫ßu b·∫±ng: Don't + V (nguy√™n th·ªÉ).",
                    whyWrong: "K·ªÉ c·∫£ ch·ªß ng·ªØ ng·∫ßm ƒë·ªãnh l√† ai, c√¢u m·ªánh l·ªánh ch·ªâ d√πng 'Don't', kh√¥ng d√πng 'Doesn't' hay 'No'."
                }
            },
            {
                q: "_______ (let/play) chess together this afternoon!",
                options: ["Let play", "Let's play", "Lets play", "Let's playing"],
                correct: 1,
                explanation: {
                    analysis: ["Let play: thi·∫øu 's.", "Let's play: ƒë√∫ng (r·ªß r√™).", "Lets play: sai (thi·∫øu d·∫•u ph·∫©y s).", "Let's playing: sai (sau Let's d√πng nguy√™n m·∫´u)."],
                    translation: "Ch√∫ng ta h√£y c√πng ch∆°i c·ªù vua chi·ªÅu nay nh√©!",
                    whyRight: "C·∫•u tr√∫c r·ªß r√™: Let's (vi·∫øt t·∫Øt c·ªßa Let us) + V (nguy√™n th·ªÉ).",
                    whyWrong: "'Lets' kh√¥ng c√≥ d·∫•u ph·∫©y l√† ƒë·ªông t·ª´ chia ·ªü ng√¥i th·ª© 3 s·ªë √≠t, kh√¥ng ph·∫£i c·∫•u tr√∫c r·ªß r√™."
                }
            },
            {
                q: "_______ (pass) me the ball, please!",
                options: ["Pass", "To pass", "Passing", "Passed"],
                correct: 0,
                explanation: {
                    analysis: ["Pass: ƒë√∫ng.", "To pass: sai.", "Passing: sai.", "Passed: qu√° kh·ª©."],
                    translation: "L√†m ∆°n chuy·ªÅn b√≥ng cho t√¥i!",
                    whyRight: "ƒê√¢y l√† c√¢u y√™u c·∫ßu l·ªãch s·ª±, ta d√πng ƒë·ªông t·ª´ nguy√™n m·∫´u 'Pass'.",
                    whyWrong: "D√π c√≥ 'please' ·ªü cu·ªëi th√¨ c·∫•u tr√∫c m·ªánh l·ªánh v·∫´n kh√¥ng thay ƒë·ªïi."
                }
            },
            {
                q: "Please _______ (wear) your goggles before jumping into the water.",
                options: ["to wear", "wearing", "wear", "wears"],
                correct: 2,
                explanation: {
                    analysis: ["to wear: sai.", "wearing: sai.", "wear: ƒë√∫ng.", "wears: sai (th·ª´a s)."],
                    translation: "Vui l√≤ng ƒëeo k√≠nh b∆°i tr∆∞·ªõc khi nh·∫£y xu·ªëng n∆∞·ªõc.",
                    whyRight: "C·∫•u tr√∫c: Please + V (nguy√™n th·ªÉ) d√πng ƒë·ªÉ ra l·ªánh/y√™u c·∫ßu l·ªãch s·ª±.",
                    whyWrong: "Kh√¥ng ƒë∆∞·ª£c th√™m 's' v√†o ƒë·ªông t·ª´ trong c√¢u m·ªánh l·ªánh."
                }
            },
            {
                q: "_______ (not/forget) to warm up before doing aerobics!",
                options: ["Don't forget", "Not forget", "No forget", "Doesn't forget"],
                correct: 0,
                explanation: {
                    analysis: ["Don't forget: ƒë√∫ng.", "Not forget: sai.", "No forget: sai.", "Doesn't forget: sai."],
                    translation: "ƒê·ª´ng qu√™n kh·ªüi ƒë·ªông tr∆∞·ªõc khi t·∫≠p aerobics nh√©!",
                    whyRight: "M·ªánh l·ªánh ph·ªß ƒë·ªãnh (nh·∫Øc nh·ªü ƒë·ª´ng qu√™n): Don't + forget.",
                    whyWrong: "Ti·∫øng Anh kh√¥ng d√πng 'No forget' hay 'Not forget' ·ªü ƒë·∫ßu c√¢u."
                }
            },
            {
                q: "_______ (let/not/give) up! We can still win this match!",
                options: ["Let's not give", "Let's don't give", "Don't let's give", "Not let's give"],
                correct: 0,
                explanation: {
                    analysis: ["Let's not give: ƒë√∫ng c·∫•u tr√∫c ph·ªß ƒë·ªãnh c·ªßa let's.", "Let's don't give: sai.", "Don't let's give: sai.", "Not let's give: sai."],
                    translation: "Ch√∫ng ta ƒë·ª´ng b·ªè cu·ªôc! Ch√∫ng ta v·∫´n c√≥ th·ªÉ th·∫Øng tr·∫≠n n√†y!",
                    whyRight: "C·∫•u tr√∫c r·ªß r√™ ph·ªß ƒë·ªãnh (khuy√™n ai ƒë√≥ ƒë·ª´ng l√†m g√¨ c√πng m√¨nh): Let's + not + V (nguy√™n th·ªÉ).",
                    whyWrong: "Kh√¥ng d√πng 'don't' sau 'Let's'."
                }
            },
            {
                q: "_______ (watch) the coach carefully and learn the moves!",
                options: ["Watch", "Watching", "Watches", "To watch"],
                correct: 0,
                explanation: {
                    analysis: ["Watch: ƒë√∫ng.", "Watching: sai.", "Watches: sai.", "To watch: sai."],
                    translation: "H√£y quan s√°t hu·∫•n luy·ªán vi√™n c·∫©n th·∫≠n v√† h·ªçc c√°c ƒë·ªông t√°c!",
                    whyRight: "C√¢u m·ªánh l·ªánh b·∫Øt ƒë·∫ßu b·∫±ng ƒë·ªông t·ª´ 'Watch'.",
                    whyWrong: "C√¢u n√†y c√≥ 2 v·∫ø n·ªëi b·∫±ng 'and', v·∫ø sau l√† 'learn' (nguy√™n m·∫´u) th√¨ v·∫ø ƒë·∫ßu c≈©ng ph·∫£i l√† 'Watch' (nguy√™n m·∫´u)."
                }
            },
            {
                q: "The coach said: \"_______ (hurry) up! The game is starting!\"",
                options: ["Hurry", "Hurrying", "Hurries", "To hurry"],
                correct: 0,
                explanation: {
                    analysis: ["Hurry: ƒë√∫ng.", "Hurrying: sai.", "Hurries: sai.", "To hurry: sai."],
                    translation: "Hu·∫•n luy·ªán vi√™n n√≥i: 'Nhanh l√™n! Tr·∫≠n ƒë·∫•u b·∫Øt ƒë·∫ßu r·ªìi!'",
                    whyRight: "C·ª•m ƒë·ªông t·ª´ m·ªánh l·ªánh: Hurry up (Nhanh l√™n).",
                    whyWrong: "ƒê√¢y l√† l·ªùi n√≥i tr·ª±c ti·∫øp mang t√≠nh th√∫c gi·ª•c, d√πng ƒë·ªông t·ª´ nguy√™n m·∫´u."
                }
            },
            {
                q: "_______ (not/be) late for karate practice!",
                options: ["Don't be", "Not be", "No be", "Don't"],
                correct: 0,
                explanation: {
                    analysis: ["Don't be: ƒë√∫ng.", "Not be: sai.", "No be: sai.", "Don't: thi·∫øu ƒë·ªông t·ª´ be."],
                    translation: "ƒê·ª´ng ƒë·∫øn mu·ªôn bu·ªïi t·∫≠p karate nh√©!",
                    whyRight: "C·∫•u tr√∫c ph·ªß ƒë·ªãnh v·ªõi t√≠nh t·ª´ 'late': Don't + be + adj.",
                    whyWrong: "V√¨ 'late' l√† t√≠nh t·ª´ n√™n b·∫Øt bu·ªôc ph·∫£i c√≥ ƒë·ªông t·ª´ 'be' ƒëi k√®m, kh√¥ng ƒë∆∞·ª£c n√≥i 'Don't late'."
                }
            },
            {
                q: "_______ (keep) your eyes on the ball when playing table tennis!",
                options: ["Keep", "Keeping", "Kept", "To keep"],
                correct: 0,
                explanation: {
                    analysis: ["Keep: ƒë√∫ng.", "Keeping: sai.", "Kept: qu√° kh·ª©.", "To keep: sai."],
                    translation: "H√£y ƒë·ªÉ m·∫Øt ƒë·∫øn qu·∫£ b√≥ng khi ch∆°i b√≥ng b√†n!",
                    whyRight: "M·ªánh l·ªánh kh·∫≥ng ƒë·ªãnh: Keep.",
                    whyWrong: "D·∫°ng nguy√™n m·∫´u 'Keep' l√† ch√≠nh x√°c cho m·ªôt l·ªùi h∆∞·ªõng d·∫´n k·ªπ thu·∫≠t."
                }
            },
            {
                q: "_______ (let/practice) outdoors today! The weather is perfect.",
                options: ["Let's practice", "Let practice", "Let's practicing", "Let's to practice"],
                correct: 0,
                explanation: {
                    analysis: ["Let's practice: ƒë√∫ng.", "Let practice: thi·∫øu 's.", "Let's practicing: sai.", "Let's to practice: sai."],
                    translation: "Ch√∫ng ta h√£y t·∫≠p luy·ªán ngo√†i tr·ªùi h√¥m nay ƒëi! Th·ªùi ti·∫øt r·∫•t tuy·ªát.",
                    whyRight: "Let's + V (nguy√™n m·∫´u).",
                    whyWrong: "Lu√¥n nh·ªõ: sau Let's KH√îNG c√≥ 'to' v√† KH√îNG c√≥ '-ing'."
                }
            },
            {
                q: "Please _______ (wait) for me at the schoolyard, I'll be there soon.",
                options: ["waiting", "waits", "wait", "to wait"],
                correct: 2,
                explanation: {
                    analysis: ["waiting: sai.", "waits: sai.", "wait: ƒë√∫ng.", "to wait: sai."],
                    translation: "Vui l√≤ng ƒë·ª£i t·ªõ ·ªü s√¢n tr∆∞·ªùng, t·ªõ s·∫Ω ƒë·∫øn ƒë√≥ s·ªõm th√¥i.",
                    whyRight: "C√¢u y√™u c·∫ßu v·ªõi 'Please' d√πng ƒë·ªông t·ª´ 'wait' nguy√™n m·∫´u.",
                    whyWrong: "Kh√¥ng d√πng 'waiting' hay 'to wait' sau 'Please'."
                }
            },
            {
                q: "_______ (let/not/play) video games all day! We should exercise.",
                options: ["Let's not play", "Let's no play", "Don't let's play", "Let's don't play"],
                correct: 0,
                explanation: {
                    analysis: ["Let's not play: ƒë√∫ng.", "Let's no play: sai t·ª´.", "Don't let's play: sai c·∫•u tr√∫c.", "Let's don't play: sai."],
                    translation: "Ch√∫ng ta ƒë·ª´ng ch∆°i ƒëi·ªán t·ª≠ c·∫£ ng√†y! Ch√∫ng ta n√™n t·∫≠p th·ªÉ d·ª•c.",
                    whyRight: "C·∫•u tr√∫c chu·∫©n nh·∫•t cho l·ªùi r·ªß r√™ ph·ªß ƒë·ªãnh: Let's not + V.",
                    whyWrong: "D√πng 'Let's don't' l√† l·ªói sai ng·ªØ ph√°p nghi√™m tr·ªçng."
                }
            },
            {
                q: "_______ (listen) to the referee's instructions, please!",
                options: ["Listen", "Listening", "To listen", "Listened"],
                correct: 0,
                explanation: {
                    analysis: ["Listen: ƒë√∫ng.", "Listening: sai.", "To listen: sai.", "Listened: qu√° kh·ª©."],
                    translation: "L√†m ∆°n h√£y l·∫Øng nghe h∆∞·ªõng d·∫´n c·ªßa tr·ªçng t√†i!",
                    whyRight: "ƒê·ªông t·ª´ nguy√™n m·∫´u ƒë·ª©ng ƒë·∫ßu c√¢u l√†m m·ªánh l·ªánh.",
                    whyWrong: "K·ªÉ c·∫£ c√≥ 'please' ·ªü cu·ªëi, c·∫•u tr√∫c ƒë·∫ßu c√¢u v·∫´n l√† ƒë·ªông t·ª´ nguy√™n m·∫´u."
                }
            }
        ];

        let currentIdx = 0;
        let score = 0;
        let hasAnswered = false;

        const soundCorrect = new Audio('https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3');
        const soundWrong = new Audio('https://assets.mixkit.co/active_storage/sfx/2018/2018-preview.mp3');

        function initQuiz() {
            renderQuestion();
        }

        function renderQuestion() {
            hasAnswered = false;
            const q = quizData[currentIdx];
            document.getElementById('current-idx').innerText = currentIdx + 1;
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('progress-bar').style.width = ((currentIdx + 1) / 30 * 100) + '%';
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'btn-option text-lg font-bold text-gray-700 flex items-center';
                btn.innerHTML = `
                    <span class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center mr-4 text-sm border-2 border-gray-200">
                        ${String.fromCharCode(65 + i)}
                    </span>
                    ${opt}
                `;
                btn.onclick = () => checkAnswer(i, btn);
                optionsContainer.appendChild(btn);
            });

            document.getElementById('explanation-area').classList.add('hidden');
        }

        function checkAnswer(selectedIdx, btn) {
            if (hasAnswered) return;
            hasAnswered = true;
            
            const q = quizData[currentIdx];
            const allBtns = document.querySelectorAll('.btn-option');
            
            if (selectedIdx === q.correct) {
                btn.classList.add('correct');
                score++;
                document.getElementById('score').innerText = score;
                soundCorrect.play();
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#8854C0', '#00C9A7', '#FFD700']
                });
            } else {
                btn.classList.add('wrong');
                btn.classList.add('shake');
                allBtns[q.correct].classList.add('correct');
                soundWrong.play();
            }

            showExplanation();
        }

        function showExplanation() {
            const q = quizData[currentIdx];
            const content = document.getElementById('explanation-content');
            content.innerHTML = `
                <p><strong>1. Ph√¢n t√≠ch 4 ƒë√°p √°n:</strong></p>
                <ul class="list-disc ml-5 space-y-1">
                    ${q.explanation.analysis.map(item => `<li>${item}</li>`).join('')}
                </ul>
                <p><strong>2. D·ªãch nghƒ©a to√†n c√¢u:</strong> "${q.explanation.translation}"</p>
                <p><strong>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</strong> ${q.explanation.whyRight}</p>
                <p><strong>4. T·∫°i sao c√°c c√¢u kia sai?</strong> ${q.explanation.whyWrong}</p>
                <p class="text-right font-bold text-emerald-600 mt-2">‚Äî Ch√∫c c√°c em h·ªçc t·ªët! ‚ú® ‚Äî</p>
            `;
            document.getElementById('explanation-area').classList.remove('hidden');
            
            // Auto scroll to explanation for better UX on mobile
            setTimeout(() => {
                document.getElementById('explanation-area').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        document.getElementById('next-btn').onclick = () => {
            currentIdx++;
            if (currentIdx < quizData.length) {
                renderQuestion();
            } else {
                showFinalResult();
            }
        };

        function showFinalResult() {
            document.getElementById('final-score').innerText = `${score}/30`;
            const comment = document.getElementById('comment');
            if (score === 30) comment.innerText = '"Tuy·ªát v·ªùi √¥ng m·∫∑t tr·ªùi! Em l√† thi√™n t√†i ti·∫øng Anh!"';
            else if (score >= 25) comment.innerText = '"R·∫•t t·ªët! Em s·∫Øp tr·ªü th√†nh si√™u sao r·ªìi ƒë√≥!"';
            else if (score >= 15) comment.innerText = '"Kh√° l·∫Øm, nh∆∞ng c·∫ßn xem k·ªπ l·ªùi gi·∫£i c·ªßa c√¥ Mai An nh√©!"';
            else comment.innerText = '"ƒê·ª´ng bu·ªìn, h√£y √¥n l·∫°i b√†i v√† th·ª≠ l·∫°i l·∫ßn n·ªØa nh√©. C√¥ tin em!"';
            
            document.getElementById('result-modal').classList.remove('hidden');
        }

        window.onload = initQuiz;
    </script>
</body>
</html>
