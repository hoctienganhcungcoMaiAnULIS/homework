<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ti·∫øng Anh - Ms Mai An ULIS</title>
    <style>
        :root {
            --primary-color: #0056b3; /* Xanh ƒë·∫≠m theo Hex y√™u c·∫ßu */
            --bg-color: #fff0f5; /* H·ªìng nh·∫°t l√†m n·ªÅn ch·ªß ƒë·∫°o */
            --text-color: #333;
            --success-color: #28a745;
            --error-color: #dc3545;
            --warning-color: #ffc107;
            --white: #ffffff;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 80px; /* Space for sticky footer */
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #0056b3, #004494);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        header h2 {
            font-size: 1rem;
            font-weight: 400;
            opacity: 0.9;
            margin-top: 5px;
        }

        /* SECTION STYLES */
        .section-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin: 40px 0 20px 0;
            font-size: 1.4rem;
            text-transform: uppercase;
            font-weight: bold;
        }

        /* DATA BOX (READING TEXT) */
        .data-box {
            background-color: var(--white);
            padding: 25px;
            border-radius: 8px;
            border-left: 5px solid var(--primary-color);
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            font-size: 1.05rem;
            text-align: justify;
        }

        /* GLOSSARY TABLE */
        .glossary-box {
            margin-top: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #dee2e6;
        }

        .glossary-title {
            background-color: #e9ecef;
            padding: 10px 15px;
            font-weight: bold;
            color: #495057;
            font-size: 0.9rem;
        }

        table.glossary-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        table.glossary-table th, table.glossary-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #dee2e6;
            text-align: left;
        }

        table.glossary-table th {
            background-color: #fff;
            color: var(--primary-color);
            width: 30%;
        }

        /* QUESTION CARD */
        .question-card {
            background-color: var(--white);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s;
            position: relative;
        }

        .question-card:hover {
            transform: translateY(-2px);
        }

        .q-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-right: 5px;
        }

        .q-text {
            font-weight: 600;
            margin-bottom: 15px;
            display: inline;
        }

        /* OPTIONS */
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .option-label:hover {
            background-color: #f0f7ff;
            border-color: var(--primary-color);
        }

        .option-label input {
            margin-top: 5px;
            margin-right: 10px;
            accent-color: var(--primary-color);
        }

        /* FEEDBACK STYLES */
        .correct-answer-bg {
            background-color: #d4edda !important;
            border-color: var(--success-color) !important;
        }

        .wrong-answer-bg {
            background-color: #f8d7da !important;
            border-color: var(--error-color) !important;
        }

        /* EXPLANATION AREA */
        .explanation-area {
            margin-top: 15px;
            padding: 15px;
            background-color: #f1f3f5;
            border-radius: 6px;
            font-size: 0.95rem;
            display: none; /* Hidden by default */
            border-top: 3px solid #6c757d;
        }

        .explanation-area.show {
            display: block;
            animation: fadeIn 0.5s;
        }

        .exp-header {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
            display: block;
            text-transform: uppercase;
            font-size: 0.8rem;
        }

        .exp-content p {
            margin-bottom: 8px;
        }

        .exp-translation {
            color: #555;
            font-style: italic;
            margin-bottom: 10px;
            display: block;
        }

        /* INDIVIDUAL CHECK BUTTON */
        .btn-check-single {
            margin-top: 15px;
            padding: 8px 16px;
            background-color: white;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .btn-check-single:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* STICKY FOOTER */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .btn-submit {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .btn-submit:hover {
            background-color: #004494;
            transform: scale(1.05);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: slideIn 0.3s;
        }

        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }

        .modal-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
        }

        /* WARNING FOR UNANSWERED */
        .card-warning {
            border: 2px solid var(--warning-color);
        }

        /* ANIMATIONS */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container { padding: 10px; }
            .data-box { padding: 15px; font-size: 1rem; }
        }
        
        strong.keyword {
            color: #d63384; /* Highlight keywords in text */
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>B√ÄI KI·ªÇM TRA ƒê·ªåC HI·ªÇU T·ªîNG H·ª¢P</h1>
        <h2>Gi√°o vi√™n: Ms Mai An ULIS</h2>
    </header>

    <div class="section-title">Exercise 4: Day of the Dead - Mexico</div>
    
    <div class="data-box">
        <p>Day of the Dead is celebrated on November 1 in Mexico, Ecuador, Guatemala, and other parts of Central and South America. Families gather to <strong>pray</strong> to the souls of dead relatives, asking them to return for just one night. People decorate <strong>altars</strong> in their homes and graveyards with food, candles, candy skulls and <strong>marigolds</strong> to welcome the souls back to Earth. Skeletons are displayed throughout cities, and people dressed as skeletons parade through the streets. <em>Pan de los muertos</em> (bread of the dead) is baked in the shape of skulls and crossbones, and a <strong>toy</strong> is hidden inside each loaf. The person who bites into the toy is said to have good luck. Day of the Dead is a time to celebrate and remember the lives of dead family members.</p>
        
        <div class="glossary-box">
            <div class="glossary-title">üìö T·ª™ V·ª∞NG TR·ªåNG T√ÇM (Glossary)</div>
            <table class="glossary-table">
                <tr><th>Word (Type)</th><th>Meaning</th></tr>
                <tr><td><strong>Altar</strong> (n)</td><td>B√†n th·ªù</td></tr>
                <tr><td><strong>Soul</strong> (n)</td><td>Linh h·ªìn</td></tr>
                <tr><td><strong>Marigold</strong> (n)</td><td>Hoa c√∫c v·∫°n th·ªç</td></tr>
                <tr><td><strong>Skeleton</strong> (n)</td><td>B·ªô x∆∞∆°ng</td></tr>
                <tr><td><strong>Parade</strong> (v)</td><td>Di·ªÖu h√†nh</td></tr>
            </table>
        </div>
    </div>

    <div id="ex4-questions"></div>


    <div class="section-title">Exercise 5: A Hindu Festival - Diwali</div>
    
    <div class="data-box">
        <p>The festival of Diwali is one of the most important religious festivals in India. It lasts for five days around the end of October. It is the festival of Lakshmi, the <strong>Goddess</strong> who, in the Hindu religion, brings peace and <strong>prosperity</strong>. Preparations for the festival begin several weeks before the festival. People clean and decorate their homes, prepare special food, and buy new clothes and jewelry to welcome the Goddess in their homes. All over India, people light up their homes with oil lamps and colourful lights. The celebrations take place on the darkest night of the lunar month, <em>Amavasya</em>. In the evening, fireworks fill the sky to make Diwali a true ‚ÄúFestival of Light‚Äù.</p>

        <div class="glossary-box">
            <div class="glossary-title">üìö T·ª™ V·ª∞NG TR·ªåNG T√ÇM (Glossary)</div>
            <table class="glossary-table">
                <tr><th>Word (Type)</th><th>Meaning</th></tr>
                <tr><td><strong>Prosperity</strong> (n)</td><td>S·ª± th·ªãnh v∆∞·ª£ng, ph·ªìn vinh</td></tr>
                <tr><td><strong>Goddess</strong> (n)</td><td>N·ªØ th·∫ßn</td></tr>
                <tr><td><strong>Religious</strong> (adj)</td><td>Thu·ªôc v·ªÅ t√¥n gi√°o</td></tr>
                <tr><td><strong>Lunar month</strong> (n)</td><td>Th√°ng √¢m l·ªãch</td></tr>
            </table>
        </div>
    </div>

    <div id="ex5-questions"></div>


    <div class="section-title">Exercise 6: Vietnam's New Year</div>
    
    <div class="data-box">
        <p>Vietnam's New Year is celebrated according to the Lunar calendar. It is especially known as Tet Nguyen Dan, or Tet. It begins between January twenty-first and February nineteen. The exact date changes from year to year. Vietnamese people usually make preparations for the holiday several weeks <strong>beforehand</strong>. They tidy their houses, cook special food, clean and make <strong>offerings</strong> on the family altars. On New Year's Eve, people sit up until midnight to see New Year in, then they put on new clothes and give one another the greetings of the season. Tet lasts ten days. The first three days are the most important. Vietnamese people believe that how people act during those days will <strong>influence</strong> the whole year. As a result, they make every effort to avoid arguments and smile as much as possible.</p>

        <div class="glossary-box">
            <div class="glossary-title">üìö T·ª™ V·ª∞NG TR·ªåNG T√ÇM (Glossary)</div>
            <table class="glossary-table">
                <tr><th>Word (Type)</th><th>Meaning</th></tr>
                <tr><td><strong>Beforehand</strong> (adv)</td><td>Tr∆∞·ªõc, s·ªõm h∆°n</td></tr>
                <tr><td><strong>Offering</strong> (n)</td><td>ƒê·ªì c√∫ng, l·ªÖ v·∫≠t</td></tr>
                <tr><td><strong>Influence</strong> (v)</td><td>·∫¢nh h∆∞·ªüng</td></tr>
                <tr><td><strong>Argument</strong> (n)</td><td>S·ª± tranh c√£i</td></tr>
            </table>
        </div>
    </div>

    <div id="ex6-questions"></div>

</div>

<div class="sticky-footer">
    <button class="btn-submit" onclick="submitAll()">N·ªòP B√ÄI (SUBMIT)</button>
</div>

<div id="resultModal" class="modal">
    <div class="modal-content">
        <h2>K·∫øt Qu·∫£</h2>
        <br>
        <div class="score-circle" id="scoreDisplay">0/0</div>
        <p id="scoreMessage">B·∫°n h√£y xem l·∫°i c√°c c√¢u sai nh√©!</p>
        <button class="modal-btn" onclick="closeModal()">Xem chi ti·∫øt gi·∫£i th√≠ch</button>
    </div>
</div>

<script>
    // D·ªÆ LI·ªÜU C√ÇU H·ªéI V√Ä GI·∫¢I TH√çCH (DATABASE)
    const quizData = {
        ex4: [
            {
                id: "ex4_q1",
                question: "Where and when is the Day of the Dead celebrated?",
                options: {
                    A: "On November 1 in the United States and Canada.",
                    B: "On November 1 in Mexico, Ecuador, Guatemala, and parts of Central and South America.",
                    C: "On December 1 in Mexico and South America.",
                    D: "On November 1 in Mexico only."
                },
                correct: "B",
                explanation: {
                    translateQ: "L·ªÖ h·ªôi Ng√†y c·ªßa Ng∆∞·ªùi ch·∫øt ƒë∆∞·ª£c t·ªï ch·ª©c ·ªü ƒë√¢u v√† khi n√†o?",
                    translateOpts: {
                        A: "Ng√†y 1/11 t·∫°i M·ªπ v√† Canada.",
                        B: "Ng√†y 1/11 t·∫°i Mexico, Ecuador, Guatemala v√† m·ªôt s·ªë n∆°i ·ªü Trung & Nam M·ªπ.",
                        C: "Ng√†y 1/12 t·∫°i Mexico v√† Nam M·ªπ.",
                        D: "Ch·ªâ ng√†y 1/11 t·∫°i Mexico."
                    },
                    correctReason: "Th√¥ng tin n·∫±m ngay c√¢u ƒë·∫ßu ti√™n: 'Day of the Dead is celebrated on November 1 in Mexico, Ecuador, Guatemala, and other parts of Central and South America.'",
                    wrongReason: "ƒê√°p √°n A, C sai v·ªÅ ƒë·ªãa ƒëi·ªÉm/th·ªùi gian. ƒê√°p √°n D sai t·ª´ 'only' v√¨ c√≤n c√°c n∆∞·ªõc kh√°c."
                }
            },
            {
                id: "ex4_q2",
                question: "What do families gather to pray for?",
                options: {
                    A: "They pray for good health and wealth for the living family members.",
                    B: "They pray for the harvest to be plentiful.",
                    C: "They pray to the souls of dead relatives, asking them to return for one night.",
                    D: "They pray for the skeletons to parade through the streets."
                },
                correct: "C",
                explanation: {
                    translateQ: "C√°c gia ƒë√¨nh t·ª• t·∫≠p ƒë·ªÉ c·∫ßu nguy·ªán ƒëi·ªÅu g√¨?",
                    translateOpts: {
                        A: "C·∫ßu s·ª©c kh·ªèe v√† s·ª± gi√†u c√≥ cho ng∆∞·ªùi s·ªëng.",
                        B: "C·∫ßu cho m√πa m√†ng b·ªôi thu.",
                        C: "C·∫ßu nguy·ªán cho linh h·ªìn ng∆∞·ªùi th√¢n ƒë√£ khu·∫•t, xin h·ªç tr·ªü v·ªÅ trong m·ªôt ƒë√™m.",
                        D: "C·∫ßu cho c√°c b·ªô x∆∞∆°ng di·ªÖu h√†nh tr√™n ph·ªë."
                    },
                    correctReason: "D·∫´n ch·ª©ng: 'Families gather to pray to the souls of dead relatives, asking them to return for just one night.'",
                    wrongReason: "C√°c ƒë√°p √°n A, B, D kh√¥ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn trong b√†i l√† m·ª•c ƒë√≠ch c·ªßa vi·ªác c·∫ßu nguy·ªán (pray)."
                }
            },
            {
                id: "ex4_q3",
                question: "What do people use to decorate altars and welcome the souls back to Earth?",
                options: {
                    A: "Food, candles, candy skulls, and marigolds.",
                    B: "Bread, water, and photos of famous people.",
                    C: "Fireworks, colorful lights, and oil lamps.",
                    D: "Toys, clothes, and jewelry."
                },
                correct: "A",
                explanation: {
                    translateQ: "M·ªçi ng∆∞·ªùi d√πng g√¨ ƒë·ªÉ trang tr√≠ b√†n th·ªù v√† ch√†o ƒë√≥n linh h·ªìn tr·ªü v·ªÅ Tr√°i ƒê·∫•t?",
                    translateOpts: {
                        A: "ƒê·ªì ƒÉn, n·∫øn, ƒë·∫ßu l√¢u k·∫πo, v√† hoa c√∫c v·∫°n th·ªç.",
                        B: "B√°nh m√¨, n∆∞·ªõc v√† ·∫£nh ng∆∞·ªùi n·ªïi ti·∫øng.",
                        C: "Ph√°o hoa, ƒë√®n m√†u v√† ƒë√®n d·∫ßu.",
                        D: "ƒê·ªì ch∆°i, qu·∫ßn √°o v√† trang s·ª©c."
                    },
                    correctReason: "D·∫´n ch·ª©ng: 'People decorate altars... with food, candles, candy skulls and marigolds...'",
                    wrongReason: "ƒê√°p √°n A li·ªát k√™ ƒë·∫ßy ƒë·ªß v√† ch√≠nh x√°c theo b√†i ƒë·ªçc."
                }
            },
            {
                id: "ex4_q4",
                question: "What is the special custom regarding 'Pan de los muertos' (bread of the dead)?",
                options: {
                    A: "It is baked in the shape of flowers and filled with chocolate.",
                    B: "A coin is hidden inside, and whoever finds it becomes rich.",
                    C: "It is shaped like skulls and crossbones, with a hidden toy that brings good luck.",
                    D: "It is only eaten by people dressed as skeletons."
                },
                correct: "C",
                explanation: {
                    translateQ: "Phong t·ª•c ƒë·∫∑c bi·ªát li√™n quan ƒë·∫øn 'Pan de los muertos' (b√°nh m√¨ c·ªßa ng∆∞·ªùi ch·∫øt) l√† g√¨?",
                    translateOpts: {
                        A: "N∆∞·ªõng h√¨nh hoa v√† nh√¢n s√¥-c√¥-la.",
                        B: "ƒê·ªìng xu gi·∫•u b√™n trong, ai t√¨m th·∫•y s·∫Ω gi√†u.",
                        C: "H√¨nh ƒë·∫ßu l√¢u x∆∞∆°ng ch√©o, c√≥ gi·∫•u ƒë·ªì ch∆°i mang l·∫°i may m·∫Øn.",
                        D: "Ch·ªâ ƒë∆∞·ª£c ƒÉn b·ªüi ng∆∞·ªùi h√≥a trang th√†nh b·ªô x∆∞∆°ng."
                    },
                    correctReason: "D·∫´n ch·ª©ng: 'baked in the shape of skulls and crossbones, and a toy is hidden inside... bites into the toy is said to have good luck.'",
                    wrongReason: "B√†i ƒë·ªçc n√≥i l√† 'toy' (ƒë·ªì ch∆°i) mang l·∫°i 'good luck' (may m·∫Øn), kh√¥ng ph·∫£i 'coin' (ti·ªÅn xu) hay 'rich' (gi√†u)."
                }
            },
            {
                id: "ex4_q5",
                question: "What is the main purpose of the Day of the Dead?",
                options: {
                    A: "To have a parade and wear costumes.",
                    B: "To eat special bread and candy.",
                    C: "To mourn the loss of wealth.",
                    D: "To celebrate and remember the lives of dead family members."
                },
                correct: "D",
                explanation: {
                    translateQ: "M·ª•c ƒë√≠ch ch√≠nh c·ªßa Ng√†y c·ªßa Ng∆∞·ªùi ch·∫øt l√† g√¨?",
                    translateOpts: {
                        A: "ƒê·ªÉ di·ªÖu h√†nh v√† m·∫∑c trang ph·ª•c.",
                        B: "ƒê·ªÉ ƒÉn b√°nh v√† k·∫πo ƒë·∫∑c bi·ªát.",
                        C: "ƒê·ªÉ than kh√≥c vi·ªác m·∫•t c·ªßa c·∫£i.",
                        D: "ƒê·ªÉ ƒÉn m·ª´ng v√† t∆∞·ªüng nh·ªõ cu·ªôc ƒë·ªùi c·ªßa nh·ªØng ng∆∞·ªùi th√¢n ƒë√£ khu·∫•t."
                    },
                    correctReason: "C√¢u cu·ªëi c√πng c·ªßa b√†i: 'Day of the Dead is a time to celebrate and remember the lives of dead family members.'",
                    wrongReason: "A v√† B l√† ho·∫°t ƒë·ªông di·ªÖn ra trong l·ªÖ h·ªôi, nh∆∞ng kh√¥ng ph·∫£i m·ª•c ƒë√≠ch ch√≠nh (main purpose)."
                }
            }
        ],
        ex5: [
            {
                id: "ex5_q1",
                question: "In which country is Diwali celebrated as one of the most important religious festivals?",
                options: { A: "In China.", B: "In Mexico.", C: "In India.", D: "In Ecuador." },
                correct: "C",
                explanation: {
                    translateQ: "Diwali ƒë∆∞·ª£c t·ªï ch·ª©c nh∆∞ m·ªôt l·ªÖ h·ªôi t√¥n gi√°o quan tr·ªçng nh·∫•t ·ªü qu·ªëc gia n√†o?",
                    translateOpts: { A: "Trung Qu·ªëc", B: "Mexico", C: "·∫§n ƒê·ªô", D: "Ecuador" },
                    correctReason: "D·∫´n ch·ª©ng: 'The festival of Diwali is one of the most important religious festivals in India.'",
                    wrongReason: "B√†i ƒë·ªçc n√™u r√µ ƒë·ªãa ƒëi·ªÉm l√† India."
                }
            },
            {
                id: "ex5_q2",
                question: "How long does the festival of Diwali last?",
                options: { A: "It lasts for one night.", B: "It lasts for three days.", C: "It lasts for five days.", D: "It lasts for ten days." },
                correct: "C",
                explanation: {
                    translateQ: "L·ªÖ h·ªôi Diwali k√©o d√†i bao l√¢u?",
                    translateOpts: { A: "1 ƒë√™m", B: "3 ng√†y", C: "5 ng√†y", D: "10 ng√†y" },
                    correctReason: "D·∫´n ch·ª©ng: 'It lasts for five days around the end of October.'",
                    wrongReason: "S·ªë l∆∞·ª£ng ng√†y ch√≠nh x√°c trong b√†i l√† 5."
                }
            },
            {
                id: "ex5_q3",
                question: "Which Goddess is honored during Diwali?",
                options: { A: "The Goddess of war.", B: "Lakshmi, the Goddess of peace and prosperity.", C: "The Goddess of the moon.", D: "The Goddess of fire." },
                correct: "B",
                explanation: {
                    translateQ: "N·ªØ th·∫ßn n√†o ƒë∆∞·ª£c t√¥n vinh trong l·ªÖ Diwali?",
                    translateOpts: { A: "N·ªØ th·∫ßn chi·∫øn tranh.", B: "Lakshmi, N·ªØ th·∫ßn h√≤a b√¨nh v√† th·ªãnh v∆∞·ª£ng.", C: "N·ªØ th·∫ßn m·∫∑t trƒÉng.", D: "N·ªØ th·∫ßn l·ª≠a." },
                    correctReason: "D·∫´n ch·ª©ng: 'It is the festival of Lakshmi, the Goddess who... brings peace and prosperity.'",
                    wrongReason: "T√™n v√† vai tr√≤ c·ªßa N·ªØ th·∫ßn ƒë∆∞·ª£c ghi r√µ trong b√†i."
                }
            },
            {
                id: "ex5_q4",
                question: "What do people do to prepare for the festival?",
                options: { 
                    A: "They sleep all day and wake up at night.", 
                    B: "They visit graveyards and decorate altars.", 
                    C: "They make offerings on family altars only.", 
                    D: "They clean and decorate homes, prepare special food, and buy new clothes and jewelry." 
                },
                correct: "D",
                explanation: {
                    translateQ: "M·ªçi ng∆∞·ªùi l√†m g√¨ ƒë·ªÉ chu·∫©n b·ªã cho l·ªÖ h·ªôi?",
                    translateOpts: { A: "Ng·ªß c·∫£ ng√†y.", B: "ThƒÉm nghƒ©a trang (nh·∫ßm v·ªõi Ex4).", C: "Ch·ªâ c√∫ng b√†n th·ªù.", D: "D·ªçn d·∫πp trang tr√≠ nh√†, l√†m ƒë·ªì ƒÉn ƒë·∫∑c bi·ªát, mua qu·∫ßn √°o m·ªõi v√† trang s·ª©c." },
                    correctReason: "D·∫´n ch·ª©ng: 'People clean and decorate their homes, prepare special food, and buy new clothes and jewelry...'",
                    wrongReason: "A, B, C kh√¥ng c√≥ trong th√¥ng tin v·ªÅ s·ª± chu·∫©n b·ªã (preparations) c·ªßa Diwali."
                }
            },
            {
                id: "ex5_q5",
                question: "Why is Diwali called the 'Festival of Light'?",
                options: { 
                    A: "Because it happens during the day when the sun is brightest.", 
                    B: "Because people light up their homes with lamps and fireworks fill the sky.", 
                    C: "Because people wear light-colored clothes.", 
                    D: "Because it celebrates the longest day of the year." 
                },
                correct: "B",
                explanation: {
                    translateQ: "T·∫°i sao Diwali ƒë∆∞·ª£c g·ªçi l√† 'L·ªÖ h·ªôi √Ånh s√°ng'?",
                    translateOpts: { A: "V√¨ di·ªÖn ra ban ng√†y.", B: "V√¨ m·ªçi ng∆∞·ªùi th·∫Øp ƒë√®n trong nh√† v√† ph√°o hoa r·ª£p tr·ªùi.", C: "V√¨ m·∫∑c ƒë·ªì m√†u s√°ng.", D: "V√¨ m·ª´ng ng√†y d√†i nh·∫•t nƒÉm." },
                    correctReason: "D·∫´n ch·ª©ng: 'people light up their homes with oil lamps... fireworks fill the sky to make Diwali a true Festival of Light'.",
                    wrongReason: "L√Ω do li√™n quan tr·ª±c ti·∫øp ƒë·∫øn h√†nh ƒë·ªông th·∫Øp ƒë√®n (lamps) v√† ph√°o hoa (fireworks)."
                }
            }
        ],
        ex6: [
            {
                id: "ex6_q1",
                question: "What is Vietnam's New Year commonly known as?",
                options: { A: "Diwali.", B: "Tet Nguyen Dan, or Tet.", C: "Lunar Festival.", D: "The Spring Celebration." },
                correct: "B",
                explanation: {
                    translateQ: "NƒÉm m·ªõi c·ªßa Vi·ªát Nam th∆∞·ªùng ƒë∆∞·ª£c bi·∫øt ƒë·∫øn v·ªõi t√™n g·ªçi l√† g√¨?",
                    translateOpts: { A: "Diwali", B: "T·∫øt Nguy√™n ƒê√°n, hay T·∫øt", C: "L·ªÖ h·ªôi √Çm l·ªãch", D: "L·ªÖ m·ª´ng Xu√¢n" },
                    correctReason: "D·∫´n ch·ª©ng: 'It is especially known as Tet Nguyen Dan, or Tet.'",
                    wrongReason: "C√°c t√™n kh√°c kh√¥ng ph·∫£i t√™n ri√™ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn trong b√†i."
                }
            },
            {
                id: "ex6_q2",
                question: "Is Tet celebrated according to the Gregorian (Western) calendar?",
                options: { A: "Yes, it is always on January 1st.", B: "No, it is celebrated according to the Lunar calendar.", C: "No, it is celebrated according to the Solar calendar.", D: "Yes, it is celebrated on the same day every year." },
                correct: "B",
                explanation: {
                    translateQ: "T·∫øt c√≥ ƒë∆∞·ª£c t·ªï ch·ª©c theo l·ªãch D∆∞∆°ng (ph∆∞∆°ng T√¢y) kh√¥ng?",
                    translateOpts: { A: "C√≥, lu√¥n l√† 1/1.", B: "Kh√¥ng, t·ªï ch·ª©c theo √Çm l·ªãch (Lunar calendar).", C: "Kh√¥ng, theo D∆∞∆°ng l·ªãch.", D: "C√≥, c√πng m·ªôt ng√†y m·ªói nƒÉm." },
                    correctReason: "D·∫´n ch·ª©ng: 'Vietnam's New Year is celebrated according to the Lunar calendar.'",
                    wrongReason: "Gregorian calendar l√† d∆∞∆°ng l·ªãch, b√†i ƒë·ªçc kh·∫≥ng ƒë·ªãnh d√πng Lunar calendar."
                }
            },
            {
                id: "ex6_q3",
                question: "When does the Lunar New Year typically begin?",
                options: { A: "Between January 1st and January 21st.", B: "Exactly on February 19th every year.", C: "Between January 21st and February 19th.", D: "On the first day of March." },
                correct: "C",
                explanation: {
                    translateQ: "T·∫øt √Çm l·ªãch th∆∞·ªùng b·∫Øt ƒë·∫ßu khi n√†o?",
                    translateOpts: { A: "1/1 ƒë·∫øn 21/1", B: "Ch√≠nh x√°c 19/2", C: "Gi·ªØa 21/1 v√† 19/2", D: "M√πng 1 th√°ng 3" },
                    correctReason: "D·∫´n ch·ª©ng: 'It begins between January twenty-first and February nineteen.'",
                    wrongReason: "B√†i ƒë·ªçc ƒë∆∞a ra kho·∫£ng th·ªùi gian (range) c·ª• th·ªÉ, kh√¥ng ph·∫£i ng√†y c·ªë ƒë·ªãnh."
                }
            },
            {
                id: "ex6_q4",
                question: "What preparation activities do Vietnamese people usually do?",
                options: { A: "They buy marigolds and candy skulls.", B: "They tidy houses, cook special food, and make offerings on family altars.", C: "They light fireworks every night for a month.", D: "They dress as skeletons and parade in the streets." },
                correct: "B",
                explanation: {
                    translateQ: "Ng∆∞·ªùi Vi·ªát th∆∞·ªùng l√†m g√¨ ƒë·ªÉ chu·∫©n b·ªã?",
                    translateOpts: { A: "Mua c√∫c v·∫°n th·ªç v√† ƒë·∫ßu l√¢u k·∫πo (c·ªßa Ex4).", B: "D·ªçn nh√†, n·∫•u ƒÉn, c√∫ng b√†n th·ªù.", C: "ƒê·ªët ph√°o m·ªói ƒë√™m.", D: "H√≥a trang b·ªô x∆∞∆°ng (c·ªßa Ex4)." },
                    correctReason: "D·∫´n ch·ª©ng: 'They tidy their houses, cook special food, clean and make offerings on the family altars.'",
                    wrongReason: "A v√† D thu·ªôc v·ªÅ b√†i Mexico, C kh√¥ng c√≥ trong b√†i."
                }
            },
            {
                id: "ex6_q5",
                question: "What do people do on New Year's Eve?",
                options: { A: "They go to sleep early.", B: "They sit up until midnight to see the New Year in.", C: "They argue about the past year.", D: "They bake bread with hidden toys." },
                correct: "B",
                explanation: {
                    translateQ: "M·ªçi ng∆∞·ªùi l√†m g√¨ v√†o ƒë√™m Giao th·ª´a?",
                    translateOpts: { A: "ƒêi ng·ªß s·ªõm.", B: "Th·ª©c ƒë·∫øn n·ª≠a ƒë√™m ƒë·ªÉ ƒë√≥n Giao th·ª´a.", C: "Tranh c√£i v·ªÅ nƒÉm c≈©.", D: "N∆∞·ªõng b√°nh c√≥ ƒë·ªì ch∆°i." },
                    correctReason: "D·∫´n ch·ª©ng: 'On New Year's Eve, people sit up until midnight to see New Year in...'",
                    wrongReason: "B√†i ƒë·ªçc n√≥i h·ªç 'sit up' (th·ª©c), 'avoid arguments' (tr√°nh tranh c√£i)."
                }
            },
            {
                id: "ex6_q6",
                question: "According to the text, how long does Tet last?",
                options: { A: "It lasts five days.", B: "It lasts three days.", C: "It lasts one month.", D: "It lasts ten days." },
                correct: "D",
                explanation: {
                    translateQ: "Theo b√†i ƒë·ªçc, T·∫øt k√©o d√†i bao l√¢u?",
                    translateOpts: { A: "5 ng√†y", B: "3 ng√†y", C: "1 th√°ng", D: "10 ng√†y" },
                    correctReason: "D·∫´n ch·ª©ng: 'Tet lasts ten days.'",
                    wrongReason: "Con s·ªë ch√≠nh x√°c trong vƒÉn b·∫£n l√† m∆∞·ªùi (ten)."
                }
            },
            {
                id: "ex6_q7",
                question: "Why are the first three days of Tet considered the most important?",
                options: { A: "Because those are the only days people have off from work.", B: "Because people believe actions during these days influence the whole year.", C: "Because the food is freshest these days.", D: "Because the fireworks only happen then." },
                correct: "B",
                explanation: {
                    translateQ: "T·∫°i sao 3 ng√†y ƒë·∫ßu T·∫øt quan tr·ªçng nh·∫•t?",
                    translateOpts: { A: "V√¨ ch·ªâ ƒë∆∞·ª£c ngh·ªâ l√†m nh·ªØng ng√†y ƒë√≥.", B: "V√¨ tin r·∫±ng h√†nh ƒë·ªông nh·ªØng ng√†y n√†y ·∫£nh h∆∞·ªüng c·∫£ nƒÉm.", C: "V√¨ ƒë·ªì ƒÉn t∆∞∆°i nh·∫•t.", D: "V√¨ ph√°o hoa ch·ªâ b·∫Øn l√∫c ƒë√≥." },
                    correctReason: "D·∫´n ch·ª©ng: 'Vietnamese people believe that how people act during those days will influence the whole year.'",
                    wrongReason: "ƒê√¢y l√† ni·ªÅm tin (believe) v·ªÅ s·ª± ·∫£nh h∆∞·ªüng (influence) ƒë∆∞·ª£c n√™u trong b√†i."
                }
            }
        ]
    };

    // H√ÄM RENDER C√ÇU H·ªéI
    function renderQuestions(exerciseKey, containerId) {
        const container = document.getElementById(containerId);
        const questions = quizData[exerciseKey];
        
        let html = '';
        questions.forEach((q, index) => {
            html += `
            <div class="question-card" id="${q.id}-card">
                <div class="q-text"><span class="q-number">Question ${index + 1}:</span> ${q.question}</div>
                <div class="options-grid">
                    <label class="option-label" id="label-${q.id}-A">
                        <input type="radio" name="${q.id}" value="A"> <span>A. ${q.options.A}</span>
                    </label>
                    <label class="option-label" id="label-${q.id}-B">
                        <input type="radio" name="${q.id}" value="B"> <span>B. ${q.options.B}</span>
                    </label>
                    <label class="option-label" id="label-${q.id}-C">
                        <input type="radio" name="${q.id}" value="C"> <span>C. ${q.options.C}</span>
                    </label>
                    <label class="option-label" id="label-${q.id}-D">
                        <input type="radio" name="${q.id}" value="D"> <span>D. ${q.options.D}</span>
                    </label>
                </div>
                
                <button class="btn-check-single" onclick="checkSingle('${q.id}', '${q.correct}', '${exerciseKey}')">‚úî Check Answer</button>

                <div class="explanation-area" id="exp-${q.id}">
                    <span class="exp-header">üìù GI·∫¢I TH√çCH CHI TI·∫æT (Ms Mai An):</span>
                    <span class="exp-translation"><strong>D·ªãch c√¢u h·ªèi:</strong> ${q.explanation.translateQ}</span>
                    <div class="exp-content">
                        <p><strong>üí° D·ªãch ƒë√°p √°n:</strong></p>
                        <ul>
                            <li>A: ${q.explanation.translateOpts.A}</li>
                            <li>B: ${q.explanation.translateOpts.B}</li>
                            <li>C: ${q.explanation.translateOpts.C}</li>
                            <li>D: ${q.explanation.translateOpts.D}</li>
                        </ul>
                        <br>
                        <p><span style="color:var(--success-color)"><strong>‚úÖ T·∫°i sao ƒë√∫ng:</strong></span> ${q.explanation.correctReason}</p>
                        <p><span style="color:var(--error-color)"><strong>‚ùå T·∫°i sao sai:</strong></span> ${q.explanation.wrongReason}</p>
                    </div>
                </div>
            </div>
            `;
        });
        container.innerHTML = html;
    }

    // RENDER NGAY KHI LOAD
    renderQuestions('ex4', 'ex4-questions');
    renderQuestions('ex5', 'ex5-questions');
    renderQuestions('ex6', 'ex6-questions');

    // LOGIC CHECK T·ª™NG C√ÇU
    function checkSingle(qId, correctVal, exKey) {
        // T√¨m radio ƒë√£ ch·ªçn
        const radios = document.getElementsByName(qId);
        let selectedVal = null;
        for (const r of radios) {
            if (r.checked) {
                selectedVal = r.value;
                break;
            }
        }

        if (!selectedVal) {
            alert("Em ch∆∞a ch·ªçn ƒë√°p √°n n√†o c·∫£!");
            return;
        }

        const card = document.getElementById(qId + '-card');
        const expArea = document.getElementById('exp-' + qId);
        
        // Reset styles c≈©
        ['A', 'B', 'C', 'D'].forEach(opt => {
            document.getElementById(`label-${qId}-${opt}`).classList.remove('correct-answer-bg', 'wrong-answer-bg');
        });

        // Highlight
        if (selectedVal === correctVal) {
            document.getElementById(`label-${qId}-${selectedVal}`).classList.add('correct-answer-bg');
        } else {
            document.getElementById(`label-${qId}-${selectedVal}`).classList.add('wrong-answer-bg');
            document.getElementById(`label-${qId}-${correctVal}`).classList.add('correct-answer-bg');
        }

        // Hi·ªán gi·∫£i th√≠ch
        expArea.classList.add('show');
    }

    // LOGIC N·ªòP B√ÄI T·ªîNG
    function submitAll() {
        let totalScore = 0;
        let totalQuestions = 0;
        let unansweredCount = 0;

        // G·ªôp t·∫•t c·∫£ c√¢u h·ªèi
        const allQuestions = [...quizData.ex4, ...quizData.ex5, ...quizData.ex6];
        totalQuestions = allQuestions.length;

        allQuestions.forEach(q => {
            const radios = document.getElementsByName(q.id);
            let selectedVal = null;
            for (const r of radios) {
                if (r.checked) {
                    selectedVal = r.value;
                    break;
                }
            }

            const card = document.getElementById(q.id + '-card');
            const expArea = document.getElementById('exp-' + q.id);

            // X·ª≠ l√Ω logic hi·ªÉn th·ªã
            if (!selectedVal) {
                unansweredCount++;
                card.classList.add('card-warning'); // Vi·ªÅn v√†ng c·∫£nh b√°o
                // V·∫´n hi·ªán ƒë√°p √°n ƒë√∫ng ƒë·ªÉ h·ªçc sinh h·ªçc
                document.getElementById(`label-${q.id}-${q.correct}`).classList.add('correct-answer-bg');
                expArea.classList.add('show');
            } else {
                card.classList.remove('card-warning');
                // Ch·∫°y logic check nh∆∞ n√∫t ƒë∆°n l·∫ª
                ['A', 'B', 'C', 'D'].forEach(opt => {
                    document.getElementById(`label-${q.id}-${opt}`).classList.remove('correct-answer-bg', 'wrong-answer-bg');
                });
                
                if (selectedVal === q.correct) {
                    totalScore++;
                    document.getElementById(`label-${q.id}-${selectedVal}`).classList.add('correct-answer-bg');
                } else {
                    document.getElementById(`label-${q.id}-${selectedVal}`).classList.add('wrong-answer-bg');
                    document.getElementById(`label-${q.id}-${q.correct}`).classList.add('correct-answer-bg');
                }
                expArea.classList.add('show');
            }
        });

        // Hi·ªÉn th·ªã Popup k·∫øt qu·∫£
        const modal = document.getElementById('resultModal');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const scoreMessage = document.getElementById('scoreMessage');

        scoreDisplay.innerText = `${totalScore}/${totalQuestions}`;
        
        if (totalScore === totalQuestions) {
            scoreMessage.innerText = "Tuy·ªát v·ªùi! Em ƒë√£ l√†m ƒë√∫ng t·∫•t c·∫£! (Excellent)";
        } else if (totalScore >= totalQuestions * 0.8) {
            scoreMessage.innerText = "R·∫•t t·ªët! Em ch·ªâ sai m·ªôt v√†i c√¢u th√¥i.";
        } else {
            scoreMessage.innerText = `Em c√≤n ${unansweredCount} c√¢u ch∆∞a l√†m ho·∫∑c l√†m sai nhi·ªÅu. H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt b√™n d∆∞·ªõi nh√©!`;
        }

        modal.style.display = "flex";
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = "none";
        // Scroll to top or specific area if needed
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
        const modal = document.getElementById('resultModal');
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>

</body>
</html>