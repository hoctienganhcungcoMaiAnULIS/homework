<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 10: Communication in the Future - Ms Mai An ULIS</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <!-- Confetti Library (Inline for single file) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #f0f3f9;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dbe0ea 15%, transparent 16%), radial-gradient(#dbe0ea 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
            margin: 0;
            padding: 20px;
            color: var(--text-main);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 4px solid var(--primary-purple);
            position: relative;
            overflow: hidden;
        }

        header h1 {
            color: var(--primary-purple);
            margin: 0;
            font-weight: 800;
            font-size: 2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        header .sub-title {
            color: var(--primary-teal);
            font-weight: 700;
            font-size: 1.2rem;
            margin-top: 5px;
        }

        header .teacher-name {
            font-family: 'Quicksand', sans-serif;
            background: var(--primary-purple);
            color: white;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 50px;
            margin-top: 10px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Progress Bar */
        .progress-container {
            background: #e0e0e0;
            border-radius: 50px;
            height: 20px;
            width: 100%;
            margin-bottom: 30px;
            overflow: hidden;
            border: 2px solid white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--primary-teal), #48dbfb);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Question Card */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05);
            border: 2px solid #eee;
            position: relative;
            transition: transform 0.3s;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-badge {
            background: var(--primary-teal);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: 800;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.5;
            color: #2d3436;
            margin-bottom: 25px;
        }

        /* Underline logic for phonetics/grammar */
        .question-text u {
            text-decoration: none;
            border-bottom: 3px solid var(--primary-purple);
            padding-bottom: 2px;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Option Button Styling */
        .option-btn {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-main);
            cursor: pointer;
            text-align: left;
            position: relative;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #cccccc;
            outline: none;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-purple);
            background-color: #fbf6ff;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 0 0 #cccccc;
        }

        .option-letter {
            background: #eee;
            color: #888;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin-right: 15px;
            font-weight: 800;
            flex-shrink: 0;
        }

        /* Correct/Wrong States */
        .option-btn.correct {
            background-color: var(--correct-green);
            border-color: #00b85c;
            color: white;
            box-shadow: 0 4px 0 #008f47;
        }
        .option-btn.correct .option-letter {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red);
            border-color: #e63b49;
            color: white;
            box-shadow: 0 4px 0 #c23642;
            animation: shake 0.5s;
        }
        .option-btn.wrong .option-letter {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #f8f9fa;
            border-left: 6px solid var(--primary-purple);
            border-radius: 10px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-box.show {
            display: block;
        }

        .exp-title {
            font-weight: 800;
            color: var(--primary-purple);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .exp-title svg {
            margin-right: 8px;
        }

        .exp-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #4a5568;
            white-space: pre-line; /* Handle newlines from JSON */
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-8px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Result Modal */
        .result-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .result-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 5px solid var(--primary-purple);
            box-shadow: 0 20px 0 rgba(0,0,0,0.2);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-display {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-teal);
            margin: 20px 0;
            text-shadow: 2px 2px 0 #c2f3ea;
        }

        .btn-submit {
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 15px;
            box-shadow: 0 6px 0 #6a4196;
            cursor: pointer;
            font-weight: 800;
            margin-top: 20px;
            transition: all 0.2s;
        }

        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #6a4196;
        }

        .btn-submit:active {
            transform: translateY(2px);
            box-shadow: 0 0 0 #6a4196;
        }

        /* Fixed Score Counter */
        .score-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-weight: 800;
            color: var(--primary-purple);
            border: 2px solid var(--primary-purple);
            z-index: 100;
        }
    </style>
</head>
<body>

    <!-- Score Counter Sticky -->
    <div class="score-counter">
        Score: <span id="current-score">0</span>/40
    </div>

    <div class="container">
        <header>
            <div class="teacher-name">Ms Mai An ULIS</div>
            <h1>Communication in the Future</h1>
            <div class="sub-title">Unit 10 - Advanced Practice</div>
        </header>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div id="quiz-container">
            <!-- Questions will be injected here via JavaScript -->
        </div>

        <div style="text-align: center; margin-bottom: 50px;">
            <button class="btn-submit" onclick="finishQuiz()">Nộp bài & Xem Kết Quả</button>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="result-overlay" id="result-overlay">
        <div class="result-card">
            <h2 style="color: var(--primary-purple);">KẾT QUẢ BÀI THI</h2>
            <p style="font-size: 1.2rem; color: #666;">Bạn đã làm rất tốt!</p>
            <div class="score-display">
                <span id="final-score">0</span><span style="font-size: 2rem; color: #ccc;">/40</span>
            </div>
            <p id="feedback-text" style="font-weight: 600; color: #555; margin-bottom: 20px;"></p>
            <button class="btn-submit" onclick="closeResult()">Xem lại bài làm</button>
        </div>
    </div>

    <script>
        // --- DATA SOURCE ---
        const quizData = {
          "questions": [
            {
              "questionNumber": 1,
              "question": "My granddad got annoyed because the webcam kept focusing ______ his chin. (Part XII)",
              "answerOptions": [
                { "text": "on", "rationale": "1. Phân tích từ vựng:\n- A. on (preposition - giới từ): trên, vào.\n- B. in (preposition - giới từ): trong.\n- C. at (preposition - giới từ): tại.\n- D. with (preposition - giới từ): với.\n2. Dịch nghĩa toàn câu: \"Ông tôi đã rất bực mình vì webcam cứ liên tục lấy nét vào cằm của ông.\"\n3. Tại sao chọn A?\n- Cấu trúc: focus on something (tập trung vào cái gì). Đây là cụm động từ cố định (collocation).", "isCorrect": true },
                { "text": "in", "rationale": "Sai cấu trúc (focus in thường ít dùng hoặc dùng trong ngữ cảnh khác).", "isCorrect": false },
                { "text": "at", "rationale": "Sai cấu trúc.", "isCorrect": false },
                { "text": "with", "rationale": "Sai cấu trúc.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 2,
              "question": "I believe people will invent new ways of communicating ______ the future. (Part XII)",
              "answerOptions": [
                { "text": "in", "rationale": "1. Phân tích từ vựng:\n- A. in (preposition): trong.\n- B. on (preposition): trên.\n- C. at (preposition): tại.\n- D. by (preposition): trước/bởi.\n2. Dịch nghĩa toàn câu: \"Tôi tin rằng con người sẽ phát minh ra những cách giao tiếp mới trong tương lai.\"\n3. Tại sao chọn A?\n- Cụm từ chỉ thời gian: in the future (trong tương lai).", "isCorrect": true },
                { "text": "on", "rationale": "Sai giới từ chỉ thời gian với 'future'.", "isCorrect": false },
                { "text": "at", "rationale": "Sai giới từ chỉ thời gian với 'future'.", "isCorrect": false },
                { "text": "by", "rationale": "Sai giới từ chỉ thời gian với 'future'.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 3,
              "question": "Have you finished talking ______ the phone? (Part XII)",
              "answerOptions": [
                { "text": "on", "rationale": "1. Phân tích từ vựng:\n- A. on (preposition): trên.\n- B. in (preposition): trong.\n- C. with (preposition): với.\n- D. by (preposition): bởi.\n2. Dịch nghĩa toàn câu: \"Bạn đã nói chuyện điện thoại xong chưa?\"\n3. Tại sao chọn A?\n- Cấu trúc: talk on the phone (nói chuyện trên điện thoại). Dùng giới từ 'on' cho các thiết bị truyền thông điện tử.", "isCorrect": true },
                { "text": "in", "rationale": "Sai ngữ pháp.", "isCorrect": false },
                { "text": "with", "rationale": "Talk with someone (nói với ai), nhưng ở đây là 'the phone' (cái điện thoại) nên không dùng with.", "isCorrect": false },
                { "text": "by", "rationale": "Sai ngữ pháp.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 4,
              "question": "By using video calls, you can talk and see all your friends ______ the same time. (Part XII)",
              "answerOptions": [
                { "text": "at", "rationale": "1. Phân tích từ vựng:\n- A. at (preposition): tại.\n- B. in (preposition): trong.\n- C. on (preposition): trên.\n- D. by (preposition): bởi.\n2. Dịch nghĩa toàn câu: \"Bằng cách sử dụng cuộc gọi video, bạn có thể nói chuyện và nhìn thấy tất cả bạn bè cùng một lúc.\"\n3. Tại sao chọn A?\n- Cụm từ cố định: at the same time (cùng lúc, đồng thời).", "isCorrect": true },
                { "text": "in", "rationale": "Sai cụm từ.", "isCorrect": false },
                { "text": "on", "rationale": "Sai cụm từ.", "isCorrect": false },
                { "text": "by", "rationale": "Sai cụm từ.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 5,
              "question": "They communicate ______ each other via email. (Part XII)",
              "answerOptions": [
                { "text": "with", "rationale": "1. Phân tích từ vựng:\n- A. with (preposition): với.\n- B. to (preposition): tới.\n- C. for (preposition): cho.\n- D. about (preposition): về.\n2. Dịch nghĩa toàn câu: \"Họ giao tiếp với nhau qua email.\"\n3. Tại sao chọn A?\n- Cấu trúc: communicate with someone (giao tiếp với ai).", "isCorrect": true },
                { "text": "to", "rationale": "Communicate to thường dùng nghĩa truyền đạt thông tin, nhưng 'with' phổ biến hơn khi nói về sự tương tác hai chiều.", "isCorrect": false },
                { "text": "for", "rationale": "Sai cấu trúc.", "isCorrect": false },
                { "text": "about", "rationale": "Sai nghĩa (giao tiếp về cái gì, không phải với ai).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 6,
              "question": "She glanced ______ her watch for many times that morning. (Part XII)",
              "answerOptions": [
                { "text": "at", "rationale": "1. Phân tích từ vựng:\n- A. at (preposition): tại/vào.\n- B. on (preposition): trên.\n- C. in (preposition): trong.\n- D. to (preposition): tới.\n2. Dịch nghĩa toàn câu: \"Cô ấy liếc nhìn đồng hồ nhiều lần vào buổi sáng hôm đó.\"\n3. Tại sao chọn A?\n- Cấu trúc: glance at something/someone (liếc nhìn cái gì/ai).", "isCorrect": true },
                { "text": "on", "rationale": "Sai cấu trúc.", "isCorrect": false },
                { "text": "in", "rationale": "Sai cấu trúc.", "isCorrect": false },
                { "text": "to", "rationale": "Sai cấu trúc.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 7,
              "question": "Are you making a call ______ your friends on Facebook? (Part XII)",
              "answerOptions": [
                { "text": "to", "rationale": "1. Phân tích từ vựng:\n- A. to (preposition): tới.\n- B. with (preposition): với.\n- C. at (preposition): tại.\n- D. on (preposition): trên.\n2. Dịch nghĩa toàn câu: \"Bạn đang gọi điện cho bạn bè trên Facebook phải không?\"\n3. Tại sao chọn A?\n- Cấu trúc: make a call to someone (gọi điện tới ai).", "isCorrect": true },
                { "text": "with", "rationale": "Make a call with thường ít dùng, thường là 'talk with'.", "isCorrect": false },
                { "text": "at", "rationale": "Sai ngữ pháp.", "isCorrect": false },
                { "text": "on", "rationale": "Sai ngữ pháp (On facebook thì đúng, nhưng call on friends mang nghĩa ghé thăm).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 8,
              "question": "Teens prefer chatting with friends online ______ seeing them in person. (Part XII)",
              "answerOptions": [
                { "text": "to", "rationale": "1. Phân tích từ vựng:\n- A. to (preposition): hơn là (trong so sánh).\n- B. than (conjunction): hơn.\n- C. with (preposition): với.\n- D. rather (adv): thà.\n2. Dịch nghĩa toàn câu: \"Thanh thiếu niên thích tán gẫu với bạn bè trực tuyến hơn là gặp mặt trực tiếp.\"\n3. Tại sao chọn A?\n- Cấu trúc: prefer V-ing to V-ing (thích làm gì hơn làm gì).", "isCorrect": true },
                { "text": "than", "rationale": "Prefer đi với to, Would rather mới đi với than.", "isCorrect": false },
                { "text": "with", "rationale": "Sai cấu trúc so sánh.", "isCorrect": false },
                { "text": "rather", "rationale": "Sai cấu trúc.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 9,
              "question": "She was in the kitchen chatting ______ her best friend. (Part XII)",
              "answerOptions": [
                { "text": "with", "rationale": "1. Phân tích từ vựng:\n- A. with (preposition): với.\n- B. at (preposition): tại.\n- C. on (preposition): trên.\n- D. to (preposition): tới.\n2. Dịch nghĩa toàn câu: \"Cô ấy đang ở trong bếp tán gẫu với bạn thân nhất của mình.\"\n3. Tại sao chọn A?\n- Cấu trúc: chat with someone (tán gẫu với ai).", "isCorrect": true },
                { "text": "at", "rationale": "Sai cấu trúc.", "isCorrect": false },
                { "text": "on", "rationale": "Sai cấu trúc.", "isCorrect": false },
                { "text": "to", "rationale": "Chat to cũng được dùng nhưng chat with phổ biến hơn khi chỉ sự tương tác hai chiều thân mật.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 10,
              "question": "We will see the film ______ Galaxy Nguyen Du. (Part XII)",
              "answerOptions": [
                { "text": "at", "rationale": "1. Phân tích từ vựng:\n- A. at (preposition): tại (địa điểm cụ thể).\n- B. in (preposition): trong.\n- C. on (preposition): trên.\n- D. to (preposition): tới.\n2. Dịch nghĩa toàn câu: \"Chúng tôi sẽ xem phim tại rạp Galaxy Nguyễn Du.\"\n3. Tại sao chọn A?\n- Galaxy Nguyen Du là một địa điểm cụ thể (rạp chiếu phim) -> dùng 'at'.", "isCorrect": true },
                { "text": "in", "rationale": "In thường dùng cho thành phố/quốc gia hoặc không gian kín.", "isCorrect": false },
                { "text": "on", "rationale": "Sai giới từ.", "isCorrect": false },
                { "text": "to", "rationale": "Sai giới từ.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 11,
              "question": "Match Question 1: 'What means of communication will people use in the future?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "c. I think we'll all use telepathy.", "rationale": "1. Phân tích từ vựng:\n- means of communication (noun phrase): phương tiện giao tiếp.\n- telepathy (noun): thần giao cách cảm.\n2. Dịch nghĩa: \"Con người sẽ sử dụng phương tiện giao tiếp nào trong tương lai?\" -> \"Tôi nghĩ tất cả chúng ta sẽ dùng thần giao cách cảm.\"\n3. Tại sao chọn đáp án này?\n- Câu hỏi về 'What means' (phương tiện gì) cần câu trả lời chỉ tên một phương tiện (telepathy).", "isCorrect": true },
                { "text": "f. It's communicating by thoughts, without talking or writing.", "rationale": "Đây là câu trả lời cho 'What is telepathy?'.", "isCorrect": false },
                { "text": "h. Everyone will be using it.", "rationale": "Đây là câu trả lời cho 'Who'.", "isCorrect": false },
                { "text": "i. Of course we will.", "rationale": "Đây là câu trả lời Yes/No.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 12,
              "question": "Match Question 2: 'What is telepathy?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "f. It's communicating by thoughts, without talking or writing.", "rationale": "1. Phân tích từ vựng:\n- definition (noun): định nghĩa.\n- thoughts (noun): suy nghĩ.\n2. Dịch nghĩa: \"Thần giao cách cảm là gì?\" -> \"Đó là giao tiếp bằng suy nghĩ, không cần nói hay viết.\"\n3. Tại sao chọn đáp án này?\n- Câu hỏi 'What is...' yêu cầu định nghĩa.", "isCorrect": true },
                { "text": "c. I think we'll all use telepathy.", "rationale": "Sai. Đây là ý kiến về việc sử dụng.", "isCorrect": false },
                { "text": "g. Emojis will appear in front of our eyes as 3D images.", "rationale": "Sai. Đây là mô tả cách hoạt động của emoji.", "isCorrect": false },
                { "text": "a. Maybe in 100 years' time.", "rationale": "Sai. Đây là câu trả lời về thời gian.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 13,
              "question": "Match Question 3: 'Who will be using this means of communication?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "h. Everyone will be using it.", "rationale": "1. Phân tích từ vựng:\n- Who (pronoun): Ai.\n- Everyone (pronoun): Mọi người.\n2. Dịch nghĩa: \"Ai sẽ sử dụng phương tiện giao tiếp này?\" -> \"Mọi người sẽ sử dụng nó.\"\n3. Tại sao chọn đáp án này?\n- Câu hỏi 'Who' cần câu trả lời chỉ người (Everyone).", "isCorrect": true },
                { "text": "e. I'll choose smartphones.", "rationale": "Sai. Đây là câu trả lời cho sự lựa chọn (Which).", "isCorrect": false },
                { "text": "i. Of course we will.", "rationale": "Sai. Đây là câu trả lời Yes/No.", "isCorrect": false },
                { "text": "j. I think there won't.", "rationale": "Sai. Đây là câu trả lời phủ định cho sự tồn tại.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 14,
              "question": "Match Question 4: 'Will we be able to use emojis via telepathy?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "i. Of course we will.", "rationale": "1. Phân tích từ vựng:\n- Will we (Auxiliary verb): Chúng ta sẽ... chứ?\n- Of course (adv phrase): Dĩ nhiên.\n2. Dịch nghĩa: \"Liệu chúng ta có thể dùng emoji qua thần giao cách cảm không?\" -> \"Dĩ nhiên là có rồi.\"\n3. Tại sao chọn đáp án này?\n- Câu hỏi Yes/No bắt đầu bằng 'Will we...', câu trả lời xác nhận 'Of course we will'.", "isCorrect": true },
                { "text": "d. We can express our ideas more easily without using words.", "rationale": "Sai. Đây là câu trả lời về lợi ích (How help).", "isCorrect": false },
                { "text": "b. I believe smartphones will still be commonly used.", "rationale": "Sai nội dung.", "isCorrect": false },
                { "text": "g. Emojis will appear in front of our eyes as 3D images.", "rationale": "Sai. Câu này giải thích 'như thế nào' (How), không phải 'có hay không'.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 15,
              "question": "Match Question 5: 'How will we use them?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "g. Emojis will appear in front of our eyes as 3D images.", "rationale": "1. Phân tích từ vựng:\n- How (adv): Như thế nào.\n- appear (verb): xuất hiện.\n- 3D images (noun phrase): hình ảnh 3D.\n2. Dịch nghĩa: \"Chúng ta sẽ dùng chúng (emojis) như thế nào?\" -> \"Emoji sẽ xuất hiện trước mắt chúng ta như hình ảnh 3D.\"\n3. Tại sao chọn đáp án này?\n- 'Them' ở đây ám chỉ 'emojis' ở câu trước. Câu trả lời giải thích cách thức hoạt động.", "isCorrect": true },
                { "text": "f. It's communicating by thoughts, without talking or writing.", "rationale": "Sai. Đây là định nghĩa telepathy.", "isCorrect": false },
                { "text": "d. We can express our ideas more easily without using words.", "rationale": "Sai. Đây là lợi ích chung, không cụ thể về cách dùng 'them' (emojis).", "isCorrect": false },
                { "text": "a. Maybe in 100 years' time.", "rationale": "Sai. Chỉ thời gian.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 16,
              "question": "Match Question 6: 'When will telepathy become commonly used?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "a. Maybe in 100 years' time.", "rationale": "1. Phân tích từ vựng:\n- When (adv): Khi nào.\n- time (noun): thời gian.\n2. Dịch nghĩa: \"Khi nào thần giao cách cảm sẽ trở nên phổ biến?\" -> \"Có lẽ là trong 100 năm nữa.\"\n3. Tại sao chọn đáp án này?\n- Câu hỏi 'When' cần câu trả lời mốc thời gian (in 100 years' time).", "isCorrect": true },
                { "text": "h. Everyone will be using it.", "rationale": "Sai. Chỉ người.", "isCorrect": false },
                { "text": "b. I believe smartphones will still be commonly used.", "rationale": "Sai nội dung.", "isCorrect": false },
                { "text": "c. I think we'll all use telepathy.", "rationale": "Sai. Chỉ ý kiến chung.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 17,
              "question": "Match Question 7: 'How will it help in communication?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "d. We can express our ideas more easily without using words.", "rationale": "1. Phân tích từ vựng:\n- Help (verb): Giúp ích.\n- Express ideas (verb phrase): Diễn đạt ý tưởng.\n2. Dịch nghĩa: \"Nó sẽ giúp ích gì trong giao tiếp?\" -> \"Chúng ta có thể diễn đạt ý tưởng dễ dàng hơn mà không cần dùng lời nói.\"\n3. Tại sao chọn đáp án này?\n- Câu trả lời nêu lên lợi ích/cách giúp đỡ của telepathy.", "isCorrect": true },
                { "text": "j. I think there won't. There will be a safety device.", "rationale": "Sai. Đây là nói về rủi ro/vấn đề.", "isCorrect": false },
                { "text": "e. I'll choose smartphones.", "rationale": "Sai.", "isCorrect": false },
                { "text": "i. Of course we will.", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 18,
              "question": "Match Question 8: 'Will there be any problems with telepathy?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "j. I think there won't. There will be a safety device.", "rationale": "1. Phân tích từ vựng:\n- Problems (noun): Vấn đề/Rắc rối.\n- Safety device (noun): Thiết bị an toàn.\n2. Dịch nghĩa: \"Liệu có vấn đề gì với thần giao cách cảm không?\" -> \"Tôi nghĩ là không. Sẽ có thiết bị an toàn.\"\n3. Tại sao chọn đáp án này?\n- Câu trả lời trực tiếp cho câu hỏi Yes/No về 'problems' và đưa ra lý do an toàn.", "isCorrect": true },
                { "text": "b. I believe smartphones will still be commonly used.", "rationale": "Sai.", "isCorrect": false },
                { "text": "f. It's communicating by thoughts, without talking or writing.", "rationale": "Sai. Đây là định nghĩa.", "isCorrect": false },
                { "text": "a. Maybe in 100 years' time.", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 19,
              "question": "Match Question 9: 'What means of communication will still be popular in 100 years?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "b. I believe smartphones will still be commonly used.", "rationale": "1. Phân tích từ vựng:\n- Popular (adj): Phổ biến.\n- Commonly used (adj phrase): Được dùng phổ biến.\n2. Dịch nghĩa: \"Phương tiện giao tiếp nào vẫn sẽ phổ biến trong 100 năm nữa?\" -> \"Tôi tin là điện thoại thông minh vẫn sẽ được dùng phổ biến.\"\n3. Tại sao chọn đáp án này?\n- Câu hỏi hỏi về phương tiện (smartphones) và trạng thái tương lai (still popular/used).", "isCorrect": true },
                { "text": "c. I think we'll all use telepathy.", "rationale": "Có thể đúng nhưng câu c thường khớp với câu 1 hơn. Câu b có chữ 'still' khớp với 'still' trong câu hỏi.", "isCorrect": false },
                { "text": "e. I'll choose smartphones.", "rationale": "Sai. Đây là sở thích cá nhân (prefer).", "isCorrect": false },
                { "text": "h. Everyone will be using it.", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 20,
              "question": "Match Question 10: 'Which will you prefer, smartphones or telepathy?' with the correct Answer. (Part C.I)",
              "answerOptions": [
                { "text": "e. I'll choose smartphones.", "rationale": "1. Phân tích từ vựng:\n- Prefer (verb): Thích hơn.\n- Choose (verb): Chọn.\n2. Dịch nghĩa: \"Bạn sẽ thích cái nào hơn, điện thoại hay thần giao cách cảm?\" -> \"Tôi sẽ chọn điện thoại.\"\n3. Tại sao chọn đáp án này?\n- Câu hỏi về sự lựa chọn (prefer), câu trả lời xác nhận lựa chọn đó (choose).", "isCorrect": true },
                { "text": "c. I think we'll all use telepathy.", "rationale": "Sai. Đây là dự đoán chung, không phải sở thích cá nhân.", "isCorrect": false },
                { "text": "d. We can express our ideas more easily without using words.", "rationale": "Sai.", "isCorrect": false },
                { "text": "a. Maybe in 100 years' time.", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 21,
              "question": "Reorder: use/ More/ special occasions/ for/ video conference/ or short conversations/ will/ people (Part E.I)",
              "answerOptions": [
                { "text": "More people will use video conference for special occasions or short conversations.", "rationale": "1. Phân tích cấu trúc:\n- Subject (Chủ ngữ): More people (Ngày càng nhiều người).\n- Verb (Động từ): will use (sẽ sử dụng).\n- Object (Tân ngữ): video conference (hội nghị trực tuyến).\n- Adverbial phrase (Cụm trạng ngữ): for special occasions or short conversations (cho các dịp đặc biệt hoặc hội thoại ngắn).\n2. Dịch nghĩa: \"Ngày càng nhiều người sẽ sử dụng hội nghị trực tuyến cho các dịp đặc biệt hoặc các cuộc trò chuyện ngắn.\"\n3. Tại sao chọn đáp án này?\n- Đúng trật tự ngữ pháp S + V + O + Adv.", "isCorrect": true },
                { "text": "People will use video conference for more special occasions or short conversations.", "rationale": "Sai nghĩa. 'More' bổ nghĩa cho 'people' hợp lý hơn là 'occasions' trong ngữ cảnh bài học.", "isCorrect": false },
                { "text": "Video conference will use more people for special occasions or short conversations.", "rationale": "Sai nghĩa (Hội nghị sử dụng người -> vô lý).", "isCorrect": false },
                { "text": "More people use will video conference for special occasions or short conversations.", "rationale": "Sai ngữ pháp (will đứng sau use).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 22,
              "question": "Reorder: more and more/ among/ is/ Social media/ young people/ popular/ becoming (Part E.I)",
              "answerOptions": [
                { "text": "Social media is becoming more and more popular among young people.", "rationale": "1. Phân tích cấu trúc:\n- Subject: Social media.\n- Verb: is becoming (đang trở nên).\n- Adjective: popular.\n- Comparative phrase: more and more (ngày càng).\n- Prepositional phrase: among young people (trong giới trẻ).\n2. Dịch nghĩa: \"Mạng xã hội đang ngày càng trở nên phổ biến trong giới trẻ.\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc 'become more and more popular' là chuẩn.", "isCorrect": true },
                { "text": "Social media among young people is becoming more and more popular.", "rationale": "Chấp nhận được nhưng ít tự nhiên hơn đáp án A (nhấn mạnh sự phổ biến trong giới trẻ).", "isCorrect": false },
                { "text": "Young people is becoming more and more popular among social media.", "rationale": "Sai nghĩa hoàn toàn.", "isCorrect": false },
                { "text": "Social media is becoming popular more and more among young people.", "rationale": "Sai trật tự (more and more đứng trước tính từ).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 23,
              "question": "Reorder: by/ way/ is/ a/ communicate/ instantly/ thought/ Telepathy/ to (Part E.I)",
              "answerOptions": [
                { "text": "Telepathy is a way to communicate instantly by thought.", "rationale": "1. Phân tích cấu trúc:\n- Subject: Telepathy.\n- Verb: is.\n- Noun phrase: a way to communicate instantly (một cách để giao tiếp tức thì).\n- Method: by thought (bằng suy nghĩ).\n2. Dịch nghĩa: \"Thần giao cách cảm là một cách để giao tiếp tức thì bằng suy nghĩ.\"\n3. Tại sao chọn đáp án này?\n- Câu định nghĩa chuẩn về telepathy.", "isCorrect": true },
                { "text": "Telepathy is a way to communicate thought by instantly.", "rationale": "Sai ngữ pháp (by + noun/Ving).", "isCorrect": false },
                { "text": "A way to communicate by thought is telepathy instantly.", "rationale": "Sai cấu trúc câu.", "isCorrect": false },
                { "text": "Telepathy is instantly a way to communicate by thought.", "rationale": "Sai vị trí trạng từ.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 24,
              "question": "Reorder: than/ text messages/ are/ ever/ sending/ before/ more/ Teens (Part E.I)",
              "answerOptions": [
                { "text": "Teens are sending more text messages than ever before.", "rationale": "1. Phân tích cấu trúc:\n- Subject: Teens.\n- Verb: are sending.\n- Object: more text messages.\n- Comparison: than ever before (hơn bao giờ hết).\n2. Dịch nghĩa: \"Thanh thiếu niên đang gửi nhiều tin nhắn văn bản hơn bao giờ hết.\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc so sánh hơn chuẩn xác.", "isCorrect": true },
                { "text": "Teens are sending text messages more than ever before.", "rationale": "Cũng có nghĩa nhưng 'more text messages' (nhiều tin nhắn hơn) sát nghĩa ngữ cảnh số lượng hơn.", "isCorrect": false },
                { "text": "More teens are sending text messages than ever before.", "rationale": "Sai ý nghĩa (đề bài 'more' đi kèm text messages hoặc so sánh hành động, ở đây sắp xếp 'more text messages' tự nhiên hơn). Tuy nhiên, 'more text messages' là cụm chuẩn nhất.", "isCorrect": false },
                { "text": "Teens sending more text messages are than ever before.", "rationale": "Sai ngữ pháp.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 25,
              "question": "Reorder: by/ in/ think/ communicate/ will/ you/ telepathy/ people/ Do/ 30 years? (Part E.I)",
              "answerOptions": [
                { "text": "Do you think people will communicate by telepathy in 30 years?", "rationale": "1. Phân tích cấu trúc:\n- Question structure: Do you think + clause (S + will + V).\n- Clause: people will communicate by telepathy.\n- Time: in 30 years.\n2. Dịch nghĩa: \"Bạn có nghĩ con người sẽ giao tiếp bằng thần giao cách cảm trong 30 năm nữa không?\"\n3. Tại sao chọn đáp án này?\n- Đúng cấu trúc câu hỏi ý kiến tương lai.", "isCorrect": true },
                { "text": "Do people think you will communicate by telepathy in 30 years?", "rationale": "Sai nghĩa (Mọi người nghĩ bạn...?).", "isCorrect": false },
                { "text": "Do you think people will communicate in 30 years by telepathy?", "rationale": "Vị trí thời gian thường đứng cuối câu sẽ tự nhiên hơn.", "isCorrect": false },
                { "text": "Will people communicate by telepathy in 30 years do you think?", "rationale": "Sai cấu trúc câu hỏi lồng.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 26,
              "question": "Reorder: to/ someone/ is/ know/ often/ give/ a/ that/ something/ good/ We/ let/ \"thumbs up\" (Part E.I)",
              "answerOptions": [
                { "text": "We often give a \"thumbs up\" to let someone know that something is good.", "rationale": "1. Phân tích cấu trúc:\n- Subject: We.\n- Verb: give a \"thumbs up\".\n- Purpose: to let someone know... (để cho ai đó biết...).\n- Content: that something is good.\n2. Dịch nghĩa: \"Chúng ta thường giơ ngón tay cái lên để cho ai đó biết rằng điều gì đó là tốt.\"\n3. Tại sao chọn đáp án này?\n- Logic hành động và mục đích rõ ràng.", "isCorrect": true },
                { "text": "We often let someone know that something is good to give a \"thumbs up\".", "rationale": "Sai nghĩa (Chúng ta cho ai đó biết... để giơ ngón tay cái -> Ngược).", "isCorrect": false },
                { "text": "Someone often give a \"thumbs up\" to let we know that something is good.", "rationale": "Sai ngữ pháp (give thiếu s, we phải là us).", "isCorrect": false },
                { "text": "We often give something good to let someone know that a \"thumbs up\" is.", "rationale": "Vô nghĩa.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 27,
              "question": "Reorder: allows/ Chatting via webcam/ their/ watch/ body language/ with/ you/ to/ friends (Part E.I)",
              "answerOptions": [
                { "text": "Chatting via webcam with friends allows you to watch their body language.", "rationale": "1. Phân tích cấu trúc:\n- Subject: Chatting via webcam with friends.\n- Verb: allows + O + to V.\n- Object: you.\n- Action: watch their body language.\n2. Dịch nghĩa: \"Trò chuyện qua webcam với bạn bè cho phép bạn quan sát ngôn ngữ cơ thể của họ.\"\n3. Tại sao chọn đáp án này?\n- Sắp xếp hợp lý các cụm từ: chat with friends, watch body language.", "isCorrect": true },
                { "text": "Chatting via webcam allows you to watch friends with their body language.", "rationale": "Nghe không tự nhiên (xem bạn bè với ngôn ngữ cơ thể của họ?).", "isCorrect": false },
                { "text": "Chatting with friends via webcam allows their body language to watch you.", "rationale": "Sai nghĩa (ngôn ngữ cơ thể nhìn bạn?).", "isCorrect": false },
                { "text": "Chatting via webcam allows you with friends to watch their body language.", "rationale": "Sai ngữ pháp.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 28,
              "question": "Reorder: is/ each other/ we/ from/ with/ communicate/ The way/ different/ the past (Part E.I)",
              "answerOptions": [
                { "text": "The way we communicate with each other is different from the past.", "rationale": "1. Phân tích cấu trúc:\n- Subject: The way we communicate with each other (Cách chúng ta giao tiếp với nhau).\n- Verb: is.\n- Adjective phrase: different from the past (khác so với quá khứ).\n2. Dịch nghĩa: \"Cách chúng ta giao tiếp với nhau thì khác so với quá khứ.\"\n3. Tại sao chọn đáp án này?\n- Cụm 'The way we communicate' làm chủ ngữ là chuẩn nhất.", "isCorrect": true },
                { "text": "The way is different from the past with we communicate each other.", "rationale": "Sai ngữ pháp.", "isCorrect": false },
                { "text": "We communicate with each other is different from the way the past.", "rationale": "Sai ngữ pháp (hai động từ chính trong 1 câu không nối).", "isCorrect": false },
                { "text": "The past is different from the way we communicate with each other.", "rationale": "Ngữ nghĩa hơi ngược (Quá khứ thì khác với cách giao tiếp? -> Thường so sánh Cách này khác Cách kia).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 29,
              "question": "Reorder: cell phones/ face to face/ texting/ their/ prefer/ on/ to talking/ today/ Teenagers (Part E.I)",
              "answerOptions": [
                { "text": "Teenagers today prefer texting on their cell phones to talking face to face.", "rationale": "1. Phân tích cấu trúc:\n- Subject: Teenagers today.\n- Verb: prefer (thích hơn).\n- V-ing 1: texting on their cell phones.\n- Preposition: to.\n- V-ing 2: talking face to face.\n2. Dịch nghĩa: \"Thanh thiếu niên ngày nay thích nhắn tin trên điện thoại hơn là nói chuyện trực tiếp.\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc: Prefer V-ing to V-ing.", "isCorrect": true },
                { "text": "Teenagers today prefer talking face to face to texting on their cell phones.", "rationale": "Ngữ pháp đúng nhưng sai ý nghĩa thực tế/ngữ cảnh các từ đã cho (thường prefer texting hơn).", "isCorrect": false },
                { "text": "Teenagers prefer texting on their cell phones to talking face to face today.", "rationale": "'Today' bổ nghĩa cho Teenagers (thế hệ nay) hay hơn là đứng cuối câu.", "isCorrect": false },
                { "text": "Teenagers today prefer to talking face to face texting on their cell phones.", "rationale": "Sai cấu trúc prefer.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 30,
              "question": "Reorder: help/ of/ language barrier/ with/ communicate/ the/ in spite/ can/ foreigners/ Gestures (Part E.I)",
              "answerOptions": [
                { "text": "Gestures can help communicate with foreigners in spite of the language barrier.", "rationale": "1. Phân tích cấu trúc:\n- Subject: Gestures.\n- Verb: can help communicate with (có thể giúp giao tiếp với).\n- Object: foreigners.\n- Concession: in spite of the language barrier (mặc cho rào cản ngôn ngữ).\n2. Dịch nghĩa: \"Cử chỉ có thể giúp giao tiếp với người nước ngoài bất chấp rào cản ngôn ngữ.\"\n3. Tại sao chọn đáp án này?\n- Sắp xếp logic nhất.", "isCorrect": true },
                { "text": "Gestures can help foreigners communicate with the language barrier in spite of.", "rationale": "Sai ngữ pháp (in spite of phải đứng trước danh từ).", "isCorrect": false },
                { "text": "Foreigners can help gestures communicate with the language barrier in spite of.", "rationale": "Sai nghĩa.", "isCorrect": false },
                { "text": "Gestures with foreigners can help communicate in spite of the language barrier.", "rationale": "Sai nghĩa (Cử chỉ với người nước ngoài?).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 31,
              "question": "Rewrite: 'Can one of your tablets connect to 5G?' -> Can one tablet ______? (Part E.II)",
              "answerOptions": [
                { "text": "of yours connect to 5G", "rationale": "1. Phân tích cấu trúc:\n- Gốc: one of your tablets (một trong những máy tính bảng của bạn).\n- Viết lại: one tablet of yours (một chiếc máy tính bảng của bạn).\n- Quy tắc: Noun + of + Possessive Pronoun (Đại từ sở hữu).\n2. Dịch nghĩa: \"Một chiếc máy tính bảng của bạn có thể kết nối 5G không?\"\n3. Tại sao chọn đáp án này?\n- Yours thay thế cho 'your tablets'.", "isCorrect": true },
                { "text": "your connect to 5G", "rationale": "Sai ngữ pháp (One tablet your -> sai).", "isCorrect": false },
                { "text": "of you connect to 5G", "rationale": "Sai (phải là yours).", "isCorrect": false },
                { "text": "yours connect to 5G", "rationale": "Thiếu 'of'.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 32,
              "question": "Rewrite: 'Beck had difficulty in understanding her daughter's text messages.' -> Beck found it ______? (Part E.II)",
              "answerOptions": [
                { "text": "difficult to understand her daughter's text messages", "rationale": "1. Phân tích cấu trúc:\n- Gốc: have difficulty in V-ing (gặp khó khăn trong việc...).\n- Viết lại: find it + adj + to V (thấy cái gì đó như thế nào để làm...).\n2. Dịch nghĩa: \"Beck thấy khó để hiểu tin nhắn của con gái cô ấy.\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc 'find it difficult to understand' tương đương với 'had difficulty in understanding'.", "isCorrect": true },
                { "text": "difficulty to understand her daughter's text messages", "rationale": "Sai từ loại (find it + adj, difficulty là noun).", "isCorrect": false },
                { "text": "difficult understanding her daughter's text messages", "rationale": "Sai cấu trúc (find it difficult + to V).", "isCorrect": false },
                { "text": "difficult understand her daughter's text messages", "rationale": "Thiếu 'to'.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 33,
              "question": "Rewrite: 'Video conferencing technology allows people in remote places to hold face-to-face meetings.' -> Video conferencing technology lets ______? (Part E.II)",
              "answerOptions": [
                { "text": "people in remote places hold face-to-face meetings", "rationale": "1. Phân tích cấu trúc:\n- Gốc: allow + O + to V.\n- Viết lại: let + O + V_inf (động từ nguyên mẫu không to).\n2. Dịch nghĩa: \"Công nghệ hội nghị truyền hình cho phép mọi người ở vùng sâu vùng xa tổ chức họp trực tiếp.\"\n3. Tại sao chọn đáp án này?\n- Sau 'let' động từ 'hold' phải ở dạng nguyên mẫu không 'to'.", "isCorrect": true },
                { "text": "people in remote places to hold face-to-face meetings", "rationale": "Sai (let không đi với to V).", "isCorrect": false },
                { "text": "people in remote places holding face-to-face meetings", "rationale": "Sai (let không đi với V-ing).", "isCorrect": false },
                { "text": "people in remote places held face-to-face meetings", "rationale": "Sai thì động từ.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 34,
              "question": "Rewrite: 'The first time that I created an email account is still unforgettable.' -> I still remember ______? (Part E.II)",
              "answerOptions": [
                { "text": "creating an email account for the first time", "rationale": "1. Phân tích cấu trúc:\n- Gốc: Sự việc trong quá khứ là không thể quên.\n- Viết lại: remember + V-ing (nhớ đã làm gì trong quá khứ).\n2. Dịch nghĩa: \"Tôi vẫn nhớ lần đầu tiên tạo tài khoản email.\"\n3. Tại sao chọn đáp án này?\n- Remember V-ing dùng cho hồi ức quá khứ. 'Creating' phù hợp ngữ cảnh.", "isCorrect": true },
                { "text": "to create an email account for the first time", "rationale": "Remember to V: Nhớ phải làm gì (tương lai/nhiệm vụ) -> Sai nghĩa.", "isCorrect": false },
                { "text": "create an email account for the first time", "rationale": "Sai ngữ pháp.", "isCorrect": false },
                { "text": "created an email account for the first time", "rationale": "Sai ngữ pháp.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 35,
              "question": "Rewrite: 'Making a video call without the network is impossible.' -> It's ______? (Part E.II)",
              "answerOptions": [
                { "text": "impossible to make a video call without the network", "rationale": "1. Phân tích cấu trúc:\n- Gốc: V-ing ... is + adj.\n- Viết lại: It is + adj + to V.\n2. Dịch nghĩa: \"Thật không thể thực hiện cuộc gọi video mà không có mạng.\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc giả định chủ ngữ 'It' chuẩn.", "isCorrect": true },
                { "text": "impossible making a video call without the network", "rationale": "Sai cấu trúc (It is adj + to V).", "isCorrect": false },
                { "text": "impossible make a video call without the network", "rationale": "Thiếu 'to'.", "isCorrect": false },
                { "text": "possible to make a video call without the network", "rationale": "Sai nghĩa (trái ngược).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 36,
              "question": "Rewrite: 'Face-to-face communication is better than texting.' -> Texting isn't ______? (Part E.II)",
              "answerOptions": [
                { "text": "as good as face-to-face communication", "rationale": "1. Phân tích cấu trúc:\n- Gốc: A is better than B (So sánh hơn).\n- Viết lại: B isn't as good as A (So sánh bằng ở dạng phủ định).\n2. Dịch nghĩa: \"Nhắn tin không tốt bằng giao tiếp trực tiếp.\"\n3. Tại sao chọn đáp án này?\n- Better -> Good. Cấu trúc: not as/so + adj + as.", "isCorrect": true },
                { "text": "better than face-to-face communication", "rationale": "Sai nghĩa (Texting không tốt hơn, nhưng câu gốc bảo F2F tốt hơn, câu viết lại phải là 'không tốt bằng').", "isCorrect": false },
                { "text": "as better as face-to-face communication", "rationale": "Sai (trong so sánh bằng dùng tính từ gốc 'good', không dùng 'better').", "isCorrect": false },
                { "text": "good than face-to-face communication", "rationale": "Sai cấu trúc.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 37,
              "question": "Rewrite: 'Could you please confirm the date and time of the meeting?' -> Would you ______? (Part E.II)",
              "answerOptions": [
                { "text": "mind confirming the date and time of the meeting", "rationale": "1. Phân tích cấu trúc:\n- Gốc: Could you please + V (Yêu cầu lịch sự).\n- Viết lại: Would you mind + V-ing (Bạn có phiền làm gì...).\n2. Dịch nghĩa: \"Bạn có phiền xác nhận ngày và giờ của cuộc họp không?\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc: Would you mind + V-ing.", "isCorrect": true },
                { "text": "mind confirm the date and time of the meeting", "rationale": "Sai (mind + V-ing).", "isCorrect": false },
                { "text": "please confirming the date and time of the meeting", "rationale": "Sai cấu trúc (Would you please + V, không phải V-ing). Nhưng 'Would you mind' là cách viết lại phổ biến nhất cho 'Could you'.", "isCorrect": false },
                { "text": "like confirm the date and time of the meeting", "rationale": "Sai (Would you like + to V).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 38,
              "question": "Rewrite: 'I had to resit my English online test because my Internet connection was bad.' -> My Internet connection ______? (Part E.II)",
              "answerOptions": [
                { "text": "was bad, so I had to resit my English online test", "rationale": "1. Phân tích cấu trúc:\n- Gốc: Clause 1 (kết quả) because Clause 2 (nguyên nhân).\n- Viết lại: Clause 2 (nguyên nhân), so Clause 1 (kết quả).\n2. Dịch nghĩa: \"Kết nối Internet của tôi bị kém, vì vậy tôi phải thi lại bài kiểm tra tiếng Anh trực tuyến.\"\n3. Tại sao chọn đáp án này?\n- Dùng liên từ 'so' để chỉ kết quả.", "isCorrect": true },
                { "text": "was bad because I had to resit my English online test", "rationale": "Sai logic nhân quả.", "isCorrect": false },
                { "text": "bad, so I had to resit my English online test", "rationale": "Thiếu động từ to be 'was'.", "isCorrect": false },
                { "text": "was bad but I had to resit my English online test", "rationale": "Sai liên từ (but chỉ sự đối lập).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 39,
              "question": "Rewrite: ''Why don't we give Jean a video call?' Albert said.' -> Albert suggested ______? (Part E.II)",
              "answerOptions": [
                { "text": "giving Jean a video call", "rationale": "1. Phân tích cấu trúc:\n- Gốc: Why don't we + V? (Lời gợi ý).\n- Viết lại: suggest + V-ing (gợi ý làm gì).\n2. Dịch nghĩa: \"Albert gợi ý gọi video cho Jean.\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc: suggest + V-ing.", "isCorrect": true },
                { "text": "give Jean a video call", "rationale": "Sai ngữ pháp.", "isCorrect": false },
                { "text": "to give Jean a video call", "rationale": "Sai ngữ pháp (suggest không đi với to V).", "isCorrect": false },
                { "text": "gave Jean a video call", "rationale": "Sai ngữ pháp.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 40,
              "question": "Rewrite: 'Making video call with friends is a leisure activity of mine.' -> Making video call with friends is one ______? (Part E.II)",
              "answerOptions": [
                { "text": "of my leisure activities", "rationale": "1. Phân tích cấu trúc:\n- Gốc: a leisure activity of mine (một hoạt động giải trí của tôi - dùng đại từ sở hữu).\n- Viết lại: one of my leisure activities (một trong những hoạt động giải trí của tôi - dùng tính từ sở hữu).\n2. Dịch nghĩa: \"Gọi video với bạn bè là một trong những hoạt động giải trí của tôi.\"\n3. Tại sao chọn đáp án này?\n- Cấu trúc: One of + tính từ sở hữu + danh từ số nhiều.", "isCorrect": true },
                { "text": "of mine leisure activities", "rationale": "Sai (mine không đứng trước danh từ).", "isCorrect": false },
                { "text": "of my leisure activity", "rationale": "Sai (sau One of phải là danh từ số nhiều).", "isCorrect": false },
                { "text": "leisure activities of mine", "rationale": "Thiếu 'of' trước cụm này hoặc cấu trúc 'one leisure activities' là sai.", "isCorrect": false }
              ]
            }
          ]
        };

        let currentScore = 0;
        const totalQuestions = quizData.questions.length;

        // --- RENDER QUIZ ---
        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            const letters = ['A', 'B', 'C', 'D'];

            quizData.questions.forEach((q, index) => {
                // Determine card badge
                let typeBadge = "Multiple Choice";
                if(q.question.includes("Match")) typeBadge = "Matching";
                else if(q.question.includes("Reorder")) typeBadge = "Reordering";
                else if(q.question.includes("Rewrite")) typeBadge = "Rewriting";

                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `
                    <div class="question-header">
                        <span class="question-badge">${typeBadge}</span>
                        <span style="font-weight: bold; color: #ccc;">Q${index + 1}/${totalQuestions}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                    
                    <div class="options-grid" id="options-${index}">
                        ${q.answerOptions.map((opt, i) => `
                            <button class="option-btn" onclick="checkAnswer(this, ${index}, ${opt.isCorrect}, ${i})">
                                <div class="option-letter">${letters[i]}</div>
                                ${opt.text}
                            </button>
                        `).join('')}
                    </div>

                    <div class="explanation-box" id="explanation-${index}">
                        <div class="exp-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                            Lời giải chi tiết của Cô Mai An
                        </div>
                        <div class="exp-content">
                            <!-- Rationale will be inserted here -->
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- LOGIC ---
        function checkAnswer(btn, questionIndex, isCorrect, optIndex) {
            const parent = document.getElementById(`options-${questionIndex}`);
            const buttons = parent.getElementsByClassName('option-btn');
            
            // Prevent re-answering
            if (parent.dataset.answered === "true") return;
            parent.dataset.answered = "true";

            // Identify correct button
            const correctBtnIndex = quizData.questions[questionIndex].answerOptions.findIndex(o => o.isCorrect);
            const correctBtn = buttons[correctBtnIndex];

            if (isCorrect) {
                // Correct Logic
                btn.classList.add('correct');
                playSound('correct');
                fireConfetti(btn);
                currentScore++;
                updateScore();
            } else {
                // Wrong Logic
                btn.classList.add('wrong');
                correctBtn.classList.add('correct'); // Show correct answer
                playSound('wrong');
            }

            // Show Explanation
            const expBox = document.getElementById(`explanation-${questionIndex}`);
            // Find correct option rationale to display. In this dataset, the rationale is inside the Correct option or shared. 
            // The dataset structure has 'rationale' in every option but usually the Correct one has the full rationale.
            // Let's grab the rationale from the Correct option.
            const explanationText = quizData.questions[questionIndex].answerOptions[correctBtnIndex].rationale;
            
            expBox.querySelector('.exp-content').textContent = explanationText;
            expBox.classList.add('show');

            // Update Progress
            updateProgressBar();
        }

        function updateScore() {
            document.getElementById('current-score').innerText = currentScore;
        }

        function updateProgressBar() {
            const answered = document.querySelectorAll('.options-grid[data-answered="true"]').length;
            const percentage = (answered / totalQuestions) * 100;
            document.getElementById('progress-bar').style.width = percentage + '%';
        }

        function finishQuiz() {
            const overlay = document.getElementById('result-overlay');
            const finalScore = document.getElementById('final-score');
            const feedbackText = document.getElementById('feedback-text');

            finalScore.innerText = currentScore;
            
            const percentage = (currentScore / totalQuestions) * 100;
            if (percentage === 100) feedbackText.innerText = "Xuất sắc! Bạn là thiên tài tiếng Anh!";
            else if (percentage >= 80) feedbackText.innerText = "Giỏi lắm! Cố gắng thêm chút nữa là hoàn hảo.";
            else if (percentage >= 50) feedbackText.innerText = "Khá tốt. Hãy xem lại phần giải thích để hiểu rõ hơn nhé.";
            else feedbackText.innerText = "Đừng buồn nhé! Hãy đọc kỹ giải thích để làm lại tốt hơn.";

            overlay.style.display = 'flex';
            playSound('finish');
            if (percentage >= 50) fireConfetti(document.body);
        }

        function closeResult() {
            document.getElementById('result-overlay').style.display = 'none';
        }

        // --- AUDIO ENGINE (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'wrong') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'finish') {
                // Simple chord
                [400, 500, 600].forEach((freq, i) => {
                    const o = audioCtx.createOscillator();
                    const g = audioCtx.createGain();
                    o.connect(g);
                    g.connect(audioCtx.destination);
                    o.type = 'triangle';
                    o.frequency.value = freq;
                    g.gain.setValueAtTime(0.2, audioCtx.currentTime);
                    g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 1.5);
                    o.start(audioCtx.currentTime + i * 0.1);
                    o.stop(audioCtx.currentTime + 1.5);
                });
            }
        }

        // --- EFFECTS ---
        function fireConfetti(element) {
            // Get coordinates if element provided, else center
            const rect = element === document.body ? {x: 0.5, y: 0.5} : element.getBoundingClientRect();
            
            // Normalize coordinates for canvas-confetti (0 to 1)
            const x = (rect.left + rect.width / 2) / window.innerWidth;
            const y = (rect.top + rect.height / 2) / window.innerHeight;

            confetti({
                particleCount: 100,
                spread: 70,
                origin: { x: x, y: y },
                colors: ['#8854C0', '#00C9A7', '#00D26A', '#FF4757']
            });
        }

        // Initialize
        window.onload = renderQuiz;

    </script>
</body>
</html>
