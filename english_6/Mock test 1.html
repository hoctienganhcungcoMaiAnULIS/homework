<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·ªÅ M√¥ Ph·ªèng S·ªë 1 - Ms Mai An ULIS</title>
    <style>
        :root {
            --primary-color: #0056b3; /* Xanh d∆∞∆°ng ch·ªß ƒë·∫°o */
            --success-color: #28a745; /* Xanh l√° - ƒê√∫ng */
            --danger-color: #dc3545;  /* ƒê·ªè - Sai */
            --warning-color: #ffc107; /* V√†ng - Ch∆∞a l√†m */
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding-bottom: 80px; /* Space for sticky footer */
        }

        /* HEADER */
        header {
            background: linear-gradient(135deg, var(--primary-color), #004494);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        header h1 {
            margin: 0;
            font-size: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        header p {
            margin: 5px 0 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* CONTAINER */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* DATA BOX (Reading Passage) */
        .data-box {
            background-color: #e9ecef;
            border-left: 5px solid var(--primary-color);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            font-size: 0.95rem;
        }
        
        .data-box h4 { margin-top: 0; color: var(--primary-color); }

        /* QUESTION CARD */
        .question-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            position: relative;
            transition: transform 0.2s;
            border: 1px solid #eee;
        }

        .question-card:hover {
            transform: translateY(-2px);
        }

        .q-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
        }

        .q-content {
            margin-bottom: 15px;
            font-size: 1.05rem;
        }

        /* VISUAL SIGNS (CSS Art) */
        .sign-visual {
            width: 100%;
            height: 120px;
            background: #f8f9fa;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            margin-bottom: 15px;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        
        /* Specific Sign Styles */
        .sign-library { background: #fffbe7; color: #d9534f; }
        .sign-pool { background: #e0f7fa; color: #0277bd; }
        .sign-food { background: #ffebee; color: #c62828; }
        .sign-sale { background: #fff3e0; color: #e65100; font-weight: bold; font-size: 1.2rem; }

        .sign-icon { font-size: 2rem; margin-bottom: 5px; }
        .sign-text { font-size: 0.9rem; font-weight: bold; text-align: center; padding: 0 10px; text-transform: uppercase;}

        /* OPTIONS */
        .options-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover {
            background-color: #f1f8ff;
            border-color: var(--primary-color);
        }

        .option-label input {
            margin-right: 10px;
            transform: scale(1.2);
        }

        /* TEXT INPUTS */
        .input-answer {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
        }

        /* BUTTONS */
        .btn-check {
            margin-top: 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        .btn-check:hover { background-color: #004494; }

        /* EXPLANATION AREA */
        .explanation {
            display: none; /* Hidden by default */
            margin-top: 15px;
            padding: 15px;
            background-color: #e8f5e9;
            border-radius: 6px;
            border-left: 4px solid var(--success-color);
            font-size: 0.95rem;
        }

        .explanation.incorrect {
            background-color: #fdecea;
            border-left-color: var(--danger-color);
        }

        .exp-title {
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
            text-decoration: underline;
        }

        .vocab-list {
            font-size: 0.9rem;
            color: #555;
            margin-top: 5px;
            font-style: italic;
        }

        /* STICKY FOOTER */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }

        .btn-submit {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(40, 167, 69, 0.3);
        }
        
        .btn-submit:hover { background-color: #218838; transform: scale(1.05); }

        .score-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            max-width: 400px;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .q-title { flex-direction: column; }
            .sticky-footer { flex-direction: column; gap: 10px; }
            .btn-submit { width: 100%; }
        }

        /* Utility classes for correctness */
        .correct-bg { background-color: #d4edda !important; border-color: #c3e6cb !important; }
        .incorrect-bg { background-color: #f8d7da !important; border-color: #f5c6cb !important; }
        .unanswered-bg { border: 2px solid var(--warning-color) !important; }

        u { text-decoration-color: var(--primary-color); text-decoration-thickness: 2px; }

    </style>
</head>
<body>

<header>
    <h1>ƒê·ªÄ M√î PH·ªéNG S·ªê 1 (MOCK TEST 1)</h1>
    <p>Gi√°o vi√™n bi√™n so·∫°n: Ms Mai An ULIS | Th·ªùi gian: 30 ph√∫t</p>
</header>

<div class="container" id="quiz-container">
    </div>

<div class="sticky-footer">
    <div class="score-display" id="score-text">ƒêang l√†m b√†i...</div>
    <button class="btn-submit" onclick="submitAll()">N·ªòP B√ÄI (SUBMIT)</button>
</div>

<div class="modal" id="resultModal">
    <div class="modal-content">
        <h2 style="color: var(--primary-color)">K·∫æT QU·∫¢</h2>
        <p style="font-size: 3rem; margin: 10px 0; font-weight: bold;" id="modal-score">0/25</p>
        <p id="modal-message">H√£y c·ªë g·∫Øng h∆°n nh√©!</p>
        <button class="btn-check" onclick="document.getElementById('resultModal').style.display='none'">Xem chi ti·∫øt</button>
    </div>
</div>

<script>
    // D·ªÆ LI·ªÜU ƒê·ªÄ B√ÄI (DATASET)
    const quizData = [
        // PART I: SIGNS
        {
            id: 1,
            type: 'sign',
            section: 'I. Look at the notice and choose the correct answer',
            signText: 'LIBRARY NOTICE<br>Please switch off your mobile phones.',
            signIcon: 'üìµ',
            signClass: 'sign-library',
            options: [
                { val: 'A', text: 'You can buy phones here.' },
                { val: 'B', text: 'You must not speak on the phone here.' },
                { val: 'C', text: 'You can charge your phone here.' },
                { val: 'D', text: 'Keep your phone on the table.' }
            ],
            correct: 'B',
            explanation: `
                <strong>D·ªãch bi·ªÉn b√°o:</strong> TH√îNG B√ÅO TH∆Ø VI·ªÜN. Vui l√≤ng t·∫Øt ƒëi·ªán tho·∫°i di ƒë·ªông.<br>
                <strong>Gi·∫£i th√≠ch:</strong> "Switch off" = T·∫Øt ngu·ªìn. ƒêi·ªÅu n√†y ƒë·ªìng nghƒ©a v·ªõi vi·ªác kh√¥ng ƒë∆∞·ª£c n√≥i chuy·ªán ƒëi·ªán tho·∫°i.<br>
                <strong>Ph√¢n t√≠ch sai:</strong><br>
                A. Mua ƒëi·ªán tho·∫°i (Sai nghƒ©a).<br>
                C. S·∫°c ƒëi·ªán tho·∫°i (Sai nghƒ©a).<br>
                D. ƒê·ªÉ ƒëi·ªán tho·∫°i tr√™n b√†n (Kh√¥ng ƒë·ªß, ph·∫£i t·∫Øt c∆°).
            `
        },
        {
            id: 2,
            type: 'sign',
            section: '',
            signText: 'SWIMMING POOL<br>Adults only: 8 p.m - 10 p.m',
            signIcon: 'üèä‚Äç‚ôÇÔ∏è üîû',
            signClass: 'sign-pool',
            options: [
                { val: 'A', text: 'Children cannot swim here in the evening.' },
                { val: 'B', text: 'The pool is closed at 8 p.m.' },
                { val: 'C', text: 'Only men can swim here.' },
                { val: 'D', text: 'The pool is free for adults.' }
            ],
            correct: 'A',
            explanation: `
                <strong>D·ªãch bi·ªÉn b√°o:</strong> H·ªí B∆†I. Ch·ªâ d√†nh cho ng∆∞·ªùi l·ªõn: 8h t·ªëi - 10h t·ªëi.<br>
                <strong>Gi·∫£i th√≠ch:</strong> "Adults only" = Ch·ªâ ng∆∞·ªùi l·ªõn -> Tr·∫ª em (Children) kh√¥ng ƒë∆∞·ª£c b∆°i v√†o gi·ªù n√†y (evening).<br>
                <strong>Ph√¢n t√≠ch sai:</strong><br>
                B. H·ªì ƒë√≥ng c·ª≠a l√∫c 8h (Sai, 8h m·ªõi b·∫Øt ƒë·∫ßu gi·ªù ng∆∞·ªùi l·ªõn).<br>
                C. Ch·ªâ ƒë√†n √¥ng (Sai, Adults bao g·ªìm c·∫£ ph·ª• n·ªØ).<br>
                D. Mi·ªÖn ph√≠ (Sai, kh√¥ng ƒë·ªÅ c·∫≠p ti·ªÅn b·∫°c).
            `
        },
        {
            id: 3,
            type: 'sign',
            section: '',
            signText: 'COMPUTER ROOM<br>Do not eat or drink inside.',
            signIcon: 'üíª üçîüö´',
            signClass: 'sign-food',
            options: [
                { val: 'A', text: 'You can buy food here.' },
                { val: 'B', text: 'You must have lunch outside.' },
                { val: 'C', text: 'There is a cafe inside the room.' },
                { val: 'D', text: 'You can drink water near the computers.' }
            ],
            correct: 'B',
            explanation: `
                <strong>D·ªãch bi·ªÉn b√°o:</strong> PH√íNG M√ÅY T√çNH. Kh√¥ng ƒÉn ho·∫∑c u·ªëng b√™n trong.<br>
                <strong>Gi·∫£i th√≠ch:</strong> Kh√¥ng ƒë∆∞·ª£c ƒÉn u·ªëng b√™n trong -> Ph·∫£i ƒÉn tr∆∞a (have lunch) ·ªü b√™n ngo√†i (outside).<br>
                <strong>Ph√¢n t√≠ch sai:</strong><br>
                A. Mua ƒë·ªì ƒÉn (Sai).<br>
                C. C√≥ qu√°n c√† ph√™ b√™n trong (Sai, c·∫•m ƒÉn u·ªëng m√†).<br>
                D. ƒê∆∞·ª£c u·ªëng n∆∞·ªõc (Sai, "Do not drink").
            `
        },
        {
            id: 4,
            type: 'sign',
            section: '',
            signText: 'SALE!<br>Buy two T-shirts, get one free.',
            signIcon: 'üëïüëï + üéÅ',
            signClass: 'sign-sale',
            options: [
                { val: 'A', text: 'T-shirts are very expensive.' },
                { val: 'B', text: 'You get 3 T-shirts if you pay for 2.' },
                { val: 'C', text: 'You must pay for 3 T-shirts.' },
                { val: 'D', text: 'There are no T-shirts left.' }
            ],
            correct: 'B',
            explanation: `
                <strong>D·ªãch bi·ªÉn b√°o:</strong> GI·∫¢M GI√Å! Mua 2 √°o ph√¥ng, t·∫∑ng 1.<br>
                <strong>Gi·∫£i th√≠ch:</strong> Mua 2 (pay for 2) + T·∫∑ng 1 = Nh·∫≠n ƒë∆∞·ª£c t·ªïng 3 √°o (Get 3 T-shirts).<br>
                <strong>Ph√¢n t√≠ch sai:</strong><br>
                A. √Åo r·∫•t ƒë·∫Øt (Kh√¥ng ƒë·ªÅ c·∫≠p).<br>
                C. Ph·∫£i tr·∫£ ti·ªÅn cho 3 √°o (Sai, ch·ªâ tr·∫£ 2).<br>
                D. H·∫øt √°o (Sai).
            `
        },
        // PART II: WORD FINDING
        {
            id: 5,
            type: 'text',
            section: 'II. Read the description and find the word',
            content: 'This is a place where you can borrow books to read. (L_ _ _ _ _ ) (7 letters)',
            correct: 'library',
            explanation: `
                <strong>ƒê√°p √°n:</strong> LIBRARY (Th∆∞ vi·ªán).<br>
                <strong>Gi·∫£i th√≠ch:</strong> Place (n∆°i ch·ªën) + borrow books (m∆∞·ª£n s√°ch) = Library.
            `
        },
        {
            id: 6,
            type: 'text',
            section: '',
            content: 'This is the meal that you eat in the morning. (B _ _ _ _ _ _ ) (9 letters)',
            correct: 'breakfast',
            explanation: `
                <strong>ƒê√°p √°n:</strong> BREAKFAST (B·ªØa s√°ng).<br>
                <strong>Gi·∫£i th√≠ch:</strong> Meal (b·ªØa ƒÉn) + morning (bu·ªïi s√°ng) = Breakfast.
            `
        },
        {
            id: 7,
            type: 'text',
            section: '',
            content: 'You use this to take photographs. (C _ _ _ _) (6 letters)',
            correct: 'camera',
            explanation: `
                <strong>ƒê√°p √°n:</strong> CAMERA (M√°y ·∫£nh).<br>
                <strong>Gi·∫£i th√≠ch:</strong> Use to take photographs (d√πng ƒë·ªÉ ch·ª•p ·∫£nh) = Camera.
            `
        },
        // PART III: RESPONSES
        {
            id: 8,
            type: 'mcq',
            section: 'III. Choose the correct response',
            content: '"Let\'s go to the cinema tonight."',
            options: [
                { val: 'A', text: 'Yes, I do.' },
                { val: 'B', text: 'That\'s a good idea.' },
                { val: 'C', text: 'It\'s a comedy.' }
            ],
            correct: 'B',
            explanation: `
                <strong>D·ªãch:</strong> "T·ªëi nay ƒëi xem phim ƒëi." (C√¢u ƒë·ªÅ ngh·ªã).<br>
                <strong>Gi·∫£i th√≠ch:</strong> ƒê·ªÉ ƒë√°p l·∫°i l·ªùi ƒë·ªÅ ngh·ªã "Let's...", ta d√πng "That's a good idea" (√ù ki·∫øn hay ƒë·∫•y).<br>
                <strong>Ph√¢n t√≠ch sai:</strong><br>
                A. Yes, I do: D√πng tr·∫£ l·ªùi c√¢u h·ªèi Do/Don't.<br>
                C. It's a comedy: L·∫°c ƒë·ªÅ.
            `
        },
        {
            id: 9,
            type: 'mcq',
            section: '',
            content: '"I\'m sorry I\'m late."',
            options: [
                { val: 'A', text: 'It doesn\'t matter.' },
                { val: 'B', text: 'You\'re welcome.' },
                { val: 'C', text: 'Same to you.' }
            ],
            correct: 'A',
            explanation: `
                <strong>D·ªãch:</strong> "Xin l·ªói t√¥i ƒë·∫øn mu·ªôn."<br>
                <strong>Gi·∫£i th√≠ch:</strong> ƒê·ªÉ ƒë√°p l·∫°i l·ªùi xin l·ªói nh·∫π, d√πng "It doesn't matter" (Kh√¥ng sao ƒë√¢u/Kh√¥ng v·∫•n ƒë·ªÅ g√¨).<br>
                <strong>Ph√¢n t√≠ch sai:</strong><br>
                B. You're welcome: D√πng ƒë√°p l·∫°i l·ªùi c·∫£m ∆°n.<br>
                C. Same to you: D√πng ƒë√°p l·∫°i l·ªùi ch√∫c.
            `
        },
        // PART IV: GRAMMAR
        {
            id: 10,
            type: 'mcq',
            section: 'IV. Choose the correct answer',
            content: 'My father usually ______________ the gardening on Sundays.',
            options: [
                { val: 'A', text: 'makes' },
                { val: 'B', text: 'does' },
                { val: 'C', text: 'works' }
            ],
            correct: 'B',
            explanation: `
                <strong>Ki·∫øn th·ª©c:</strong> Collocation (C·ª•m t·ª´ c·ªë ƒë·ªãnh).<br>
                <strong>Gi·∫£i th√≠ch:</strong> C·ª•m "do the gardening" = l√†m v∆∞·ªùn. Ch·ªß ng·ªØ "My father" s·ªë √≠t -> chia "does".<br>
                <strong>D·ªãch:</strong> B·ªë t√¥i th∆∞·ªùng l√†m v∆∞·ªùn v√†o Ch·ªß nh·∫≠t.
            `
        },
        {
            id: 11,
            type: 'mcq',
            section: '',
            content: 'Yesterday, I ______________ a very interesting film on TV.',
            options: [
                { val: 'A', text: 'watch' },
                { val: 'B', text: 'have watched' },
                { val: 'C', text: 'watched' }
            ],
            correct: 'C',
            explanation: `
                <strong>Ki·∫øn th·ª©c:</strong> Th√¨ Qu√° kh·ª© ƒë∆°n (Past Simple).<br>
                <strong>Gi·∫£i th√≠ch:</strong> D·∫•u hi·ªáu "Yesterday" (H√¥m qua) -> ƒê·ªông t·ª´ th√™m -ed -> "watched".<br>
                <strong>D·ªãch:</strong> H√¥m qua, t√¥i ƒë√£ xem m·ªôt b·ªô phim r·∫•t th√∫ v·ªã tr√™n TV.
            `
        },
        {
            id: 12,
            type: 'mcq',
            section: '',
            content: 'She is good ______________ English and History.',
            options: [
                { val: 'A', text: 'at' },
                { val: 'B', text: 'in' },
                { val: 'C', text: 'on' }
            ],
            correct: 'A',
            explanation: `
                <strong>Ki·∫øn th·ª©c:</strong> T√≠nh t·ª´ ƒëi v·ªõi gi·ªõi t·ª´.<br>
                <strong>Gi·∫£i th√≠ch:</strong> C·∫•u tr√∫c "be good at something" = gi·ªèi v·ªÅ c√°i g√¨.<br>
                <strong>D·ªãch:</strong> C√¥ ·∫•y gi·ªèi ti·∫øng Anh v√† L·ªãch s·ª≠.
            `
        },
        // PART V: FILL INFO
        {
            id: 13,
            type: 'text',
            section: 'V. Read the letter and note. Fill in the information',
            dataBox: `
                <h4>Email from Mr. Black (Sports Teacher):</h4>
                <p>"Dear students, the football practice will be on <strong>Wednesday</strong> instead of Tuesday this week because the field is wet. Please meet me at the <strong>City Stadium</strong>."</p>
                <h4>Note from Tom to his Mum:</h4>
                <p>"Mum, football practice changed! It's not at school today. I need a lift."</p>
                <hr>
                <strong>Football Practice Change Form</strong><br>
                Student's name: Tom
            `,
            content: 'New Day: __________________',
            correct: 'wednesday',
            explanation: `
                <strong>D·∫´n ch·ª©ng:</strong> Trong Email th·∫ßy Black vi·∫øt: "practice will be on <strong>Wednesday</strong> instead of Tuesday".<br>
                <strong>D·ªãch:</strong> L·ªãch t·∫≠p s·∫Ω v√†o th·ª© T∆∞ thay v√¨ th·ª© Ba.
            `
        },
        {
            id: 14,
            type: 'text',
            section: '',
            content: 'New Place: __________________',
            correct: 'city stadium',
            explanation: `
                <strong>D·∫´n ch·ª©ng:</strong> Trong Email th·∫ßy Black vi·∫øt: "Please meet me at the <strong>City Stadium</strong>".<br>
                <strong>D·ªãch:</strong> H√£y g·∫∑p th·∫ßy ·ªü S√¢n v·∫≠n ƒë·ªông Th√†nh ph·ªë.
            `
        },
        // PART VI: MULTIPLE CHOICE
        {
            id: 15,
            type: 'mcq',
            section: 'VI. Choose the best answer',
            content: 'Traveling by plane is ______________ than traveling by train.',
            options: [
                { val: 'A', text: 'fast' },
                { val: 'B', text: 'fastest' },
                { val: 'C', text: 'faster' },
                { val: 'D', text: 'more fast' }
            ],
            correct: 'C',
            explanation: `
                <strong>Ki·∫øn th·ª©c:</strong> So s√°nh h∆°n v·ªõi t√≠nh t·ª´ ng·∫Øn.<br>
                <strong>Gi·∫£i th√≠ch:</strong> C√≥ t·ª´ "than" -> So s√°nh h∆°n. "Fast" l√† t√≠nh t·ª´ ng·∫Øn -> th√™m -er -> "faster".<br>
                <strong>D·ªãch:</strong> ƒêi m√°y bay th√¨ nhanh h∆°n ƒëi t√†u h·ªèa.
            `
        },
        {
            id: 16,
            type: 'mcq',
            section: '',
            content: 'We don\'t have ______________ juice left in the fridge.',
            options: [
                { val: 'A', text: 'some' },
                { val: 'B', text: 'any' },
                { val: 'C', text: 'a' },
                { val: 'D', text: 'an' }
            ],
            correct: 'B',
            explanation: `
                <strong>Ki·∫øn th·ª©c:</strong> L∆∞·ª£ng t·ª´ Some/Any.<br>
                <strong>Gi·∫£i th√≠ch:</strong> C√¢u ph·ªß ƒë·ªãnh "don't have" -> d√πng "any". "Some" d√πng cho c√¢u kh·∫≥ng ƒë·ªãnh. "Juice" kh√¥ng ƒë·∫øm ƒë∆∞·ª£c n√™n kh√¥ng d√πng a/an.<br>
                <strong>D·ªãch:</strong> Ch√∫ng ta kh√¥ng c√≤n ch√∫t n∆∞·ªõc √©p n√†o trong t·ªß l·∫°nh.
            `
        },
        {
            id: 17,
            type: 'mcq',
            section: '',
            content: 'Look at those grey clouds! It ______________ rain soon.',
            options: [
                { val: 'A', text: 'is going to' },
                { val: 'B', text: 'will' },
                { val: 'C', text: 'goes to' },
                { val: 'D', text: 'is raining' }
            ],
            correct: 'A',
            explanation: `
                <strong>Ki·∫øn th·ª©c:</strong> T∆∞∆°ng lai g·∫ßn (Be going to).<br>
                <strong>Gi·∫£i th√≠ch:</strong> D√πng "be going to" ƒë·ªÉ di·ªÖn t·∫£ d·ª± ƒëo√°n c√≥ cƒÉn c·ª© r√µ r√†ng ·ªü hi·ªán t·∫°i ("Look at those grey clouds" - Nh√¨n m√¢y ƒëen k√¨a).<br>
                <strong>D·ªãch:</strong> Nh√¨n m√¢y ƒëen k√¨a! Tr·ªùi s·∫Øp m∆∞a r·ªìi.
            `
        },
        {
            id: 18,
            type: 'mcq',
            section: '',
            content: 'You ______________ be quiet in the hospital.',
            options: [
                { val: 'A', text: 'mustn\'t' },
                { val: 'B', text: 'can\'t' },
                { val: 'C', text: 'must' },
                { val: 'D', text: 'shouldn\'t' }
            ],
            correct: 'C',
            explanation: `
                <strong>Ki·∫øn th·ª©c:</strong> Modal verbs (ƒê·ªông t·ª´ khuy·∫øt thi·∫øu).<br>
                <strong>Gi·∫£i th√≠ch:</strong> ·ªû b·ªánh vi·ªán th√¨ "ph·∫£i" gi·ªØ im l·∫∑ng -> d√πng "must" (b·∫Øt bu·ªôc).<br>
                <strong>D·ªãch:</strong> B·∫°n ph·∫£i gi·ªØ tr·∫≠t t·ª± trong b·ªánh vi·ªán.
            `
        },
        // PART VII: REARRANGE
        {
            id: 19,
            type: 'text',
            section: 'VII. Rearrange the words',
            dataBox: 'Words: like / would / coffee / cup / of / you / a / ?',
            content: 'Write the complete sentence:',
            correct: 'would you like a cup of coffee?',
            explanation: `
                <strong>ƒê√°p √°n:</strong> Would you like a cup of coffee?<br>
                <strong>C·∫•u tr√∫c:</strong> "Would you like + N?" d√πng ƒë·ªÉ m·ªùi l·ªãch s·ª±.<br>
                <strong>D·ªãch:</strong> B·∫°n c√≥ mu·ªën d√πng m·ªôt t√°ch c√† ph√™ kh√¥ng?
            `
        },
        {
            id: 20,
            type: 'text',
            section: '',
            dataBox: 'Words: the / most / is / in / Niles / river / world / the / long / .',
            content: 'Write the complete sentence:',
            correct: 'the nile is the most long river in the world.',
            altCorrect: ['the nile is the longest river in the world.'], // Accept standard grammar too
            explanation: `
                <strong>ƒê√°p √°n theo t·ª´ g·ª£i √Ω:</strong> The Nile is the most long river in the world.<br>
                <strong>L∆∞u √Ω quan tr·ªçng c·ªßa Ms Mai An:</strong> ƒê·ªÅ b√†i cho t·ª´ "most" v√† "long" n√™n ta bu·ªôc ph·∫£i gh√©p th√†nh "most long". Tuy nhi√™n, trong ti·∫øng Anh chu·∫©n, so s√°nh nh·∫•t c·ªßa "long" ph·∫£i l√† "longest". C≈©ng l∆∞u √Ω t√™n s√¥ng l√† "Nile" (ƒê·ªÅ b√†i vi·∫øt Niles l√† l·ªói ƒë√°nh m√°y).<br>
                <strong>D·ªãch:</strong> S√¥ng Nile l√† con s√¥ng d√†i nh·∫•t th·∫ø gi·ªõi.
            `
        },
        // PART VIII: PRONUNCIATION
        {
            id: 21,
            type: 'mcq',
            section: 'VIII. Pronunciation (Find the different underlined sound)',
            content: 'Choose the word with the different underlined sound (-ed):',
            options: [
                { val: 'A', text: 'want<u>ed</u>' },
                { val: 'B', text: 'play<u>ed</u>' },
                { val: 'C', text: 'need<u>ed</u>' },
                { val: 'D', text: 'visit<u>ed</u>' }
            ],
            correct: 'B',
            explanation: `
                <strong>Quy t·∫Øc ph√°t √¢m ƒëu√¥i -ed:</strong><br>
                A. want<u>ed</u> /…™d/ (sau t, d)<br>
                B. play<u>ed</u> /d/ (sau nguy√™n √¢m/√¢m rung)<br>
                C. need<u>ed</u> /…™d/ (sau t, d)<br>
                D. visit<u>ed</u> /…™d/ (sau t, d)<br>
                => Ch·ªçn B.
            `
        },
        {
            id: 22,
            type: 'mcq',
            section: '',
            content: 'Choose the word with the different underlined sound:',
            options: [
                { val: 'A', text: 'h<u>a</u>ppy' },
                { val: 'B', text: 'h<u>a</u>rd' },
                { val: 'C', text: 'f<u>a</u>t' },
                { val: 'D', text: 'c<u>a</u>t' }
            ],
            correct: 'B',
            explanation: `
                <strong>Ph√¢n t√≠ch phi√™n √¢m:</strong><br>
                A. happy /√¶/<br>
                B. hard /…ëÀê/ (A d√†i)<br>
                C. fat /√¶/<br>
                D. cat /√¶/<br>
                => Ch·ªçn B.
            `
        },
        // PART IX: READING COMPREHENSION
        {
            id: 23,
            type: 'mcq',
            section: 'IX. Reading Comprehension',
            dataBox: `
                <h4>My Hobby</h4>
                <p>My name is Sarah. I am 12 years old. My favourite hobby is collecting stamps. I started collecting them when I was 8. My uncle, who lives in Australia, sent me my first stamp. It was a picture of a kangaroo. Now I have over 500 stamps from different countries. I keep them in a special album. I usually buy new stamps from the post office, but sometimes my friends give them to me for my birthday.</p>
                <hr>
                <em>Glossary:</em><br>
                - Collect (v): S∆∞u t·∫ßm<br>
                - Album (n): Quy·ªÉn t·∫≠p ·∫£nh/tem
            `,
            content: 'Sarah started collecting stamps 4 years ago.',
            options: [
                { val: 'A', text: 'Right' },
                { val: 'B', text: 'Wrong' },
                { val: 'C', text: 'Doesn\'t say' }
            ],
            correct: 'A',
            explanation: `
                <strong>D·∫´n ch·ª©ng:</strong> "I am 12 years old... I started... when I was 8."<br>
                <strong>T√≠nh to√°n:</strong> 12 tu·ªïi - 8 tu·ªïi = 4 nƒÉm.<br>
                => ƒê√°p √°n: Right (ƒê√∫ng).
            `
        },
        {
            id: 24,
            type: 'mcq',
            section: '',
            content: 'Her uncle gave her 500 stamps.',
            options: [
                { val: 'A', text: 'Right' },
                { val: 'B', text: 'Wrong' },
                { val: 'C', text: 'Doesn\'t say' }
            ],
            correct: 'B',
            explanation: `
                <strong>D·∫´n ch·ª©ng:</strong> "My uncle... sent me my <strong>first stamp</strong>." (Ch√∫ g·ª≠i c√°i tem ƒë·∫ßu ti√™n th√¥i).<br>
                "Now I have over 500 stamps..." (B√¢y gi·ªù t√¥i c√≥ h∆°n 500 c√°i - T·ªïng c·ªông).<br>
                => ƒê√°p √°n: Wrong (Sai).
            `
        },
        {
            id: 25,
            type: 'mcq',
            section: '',
            content: 'Sarah thinks collecting stamps is expensive.',
            options: [
                { val: 'A', text: 'Right' },
                { val: 'B', text: 'Wrong' },
                { val: 'C', text: 'Doesn\'t say' }
            ],
            correct: 'C',
            explanation: `
                <strong>Gi·∫£i th√≠ch:</strong> B√†i ƒë·ªçc ch·ªâ n√≥i c√¥ ·∫•y mua tem ho·∫∑c ƒë∆∞·ª£c t·∫∑ng, kh√¥ng h·ªÅ ƒë·ªÅ c·∫≠p ƒë·∫øn vi·ªác c√¥ ·∫•y nghƒ© n√≥ "ƒë·∫Øt" hay "r·∫ª".<br>
                => ƒê√°p √°n: Doesn't say (Kh√¥ng ƒë·ªÅ c·∫≠p).
            `
        }
    ];

    // RENDER UI
    const container = document.getElementById('quiz-container');
    let currentSection = '';

    quizData.forEach((q, index) => {
        // Add Section Header if changed
        if (q.section && q.section !== currentSection) {
            currentSection = q.section;
            const sectionTitle = document.createElement('h2');
            sectionTitle.style.color = '#0056b3';
            sectionTitle.style.marginTop = '30px';
            sectionTitle.textContent = q.section;
            container.appendChild(sectionTitle);
        }

        // Create Card
        const card = document.createElement('div');
        card.className = 'question-card';
        card.id = `card-${q.id}`;

        // Add Data Box if exists (Reading passage)
        if (q.dataBox) {
            const db = document.createElement('div');
            db.className = 'data-box';
            db.innerHTML = q.dataBox;
            card.appendChild(db);
        }

        // Title
        const title = document.createElement('div');
        title.className = 'q-title';
        title.innerHTML = `<span>C√¢u ${q.id}</span>`;
        card.appendChild(title);

        // Visual Sign if exists
        if (q.type === 'sign') {
            const visual = document.createElement('div');
            visual.className = `sign-visual ${q.signClass}`;
            visual.innerHTML = `<div class="sign-icon">${q.signIcon}</div><div class="sign-text">${q.signText}</div>`;
            card.appendChild(visual);
        }

        // Content
        if (q.content) {
            const content = document.createElement('div');
            content.className = 'q-content';
            content.innerHTML = q.content;
            card.appendChild(content);
        }

        // Inputs
        if (q.type === 'mcq' || q.type === 'sign') {
            const group = document.createElement('div');
            group.className = 'options-group';
            q.options.forEach(opt => {
                const label = document.createElement('label');
                label.className = 'option-label';
                label.innerHTML = `
                    <input type="radio" name="q${q.id}" value="${opt.val}">
                    <span><b>${opt.val}.</b> ${opt.text}</span>
                `;
                group.appendChild(label);
            });
            card.appendChild(group);
        } else if (q.type === 'text') {
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'input-answer';
            input.placeholder = 'Nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n...';
            input.id = `input-q${q.id}`;
            card.appendChild(input);
        }

        // Check Button
        const btn = document.createElement('button');
        btn.className = 'btn-check';
        btn.textContent = 'Ki·ªÉm tra c√¢u n√†y';
        btn.onclick = () => checkQuestion(q.id);
        card.appendChild(btn);

        // Explanation (Hidden)
        const exp = document.createElement('div');
        exp.className = 'explanation';
        exp.id = `exp-${q.id}`;
        exp.innerHTML = `<span class="exp-title">GI·∫¢I TH√çCH CHI TI·∫æT C·ª¶A MS MAI AN:</span>${q.explanation}`;
        card.appendChild(exp);

        container.appendChild(card);
    });

    // CHECK FUNCTION
    function checkQuestion(id) {
        const q = quizData.find(x => x.id === id);
        const card = document.getElementById(`card-${id}`);
        const exp = document.getElementById(`exp-${id}`);
        let isCorrect = false;
        let userAnswer = '';

        // Get User Answer
        if (q.type === 'mcq' || q.type === 'sign') {
            const selected = document.querySelector(`input[name="q${id}"]:checked`);
            if (!selected) {
                alert("B·∫°n ch∆∞a ch·ªçn ƒë√°p √°n n√†o c·∫£!");
                return;
            }
            userAnswer = selected.value;
            isCorrect = (userAnswer === q.correct);
        } else {
            const input = document.getElementById(`input-q${id}`);
            userAnswer = input.value.trim().toLowerCase();
            // Remove punctuation for flexible checking
            const cleanUser = userAnswer.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"").replace(/\s{2,}/g," ");
            const cleanCorrect = q.correct.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"").replace(/\s{2,}/g," ");
            
            // Handle multiple correct possibilities (like Q20)
            if (q.altCorrect) {
                 const cleanAlt = q.altCorrect.map(a => a.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,""));
                 isCorrect = (cleanUser === cleanCorrect) || cleanAlt.includes(cleanUser);
            } else {
                 isCorrect = (cleanUser === cleanCorrect);
            }
            
            if (userAnswer === '') {
                alert("B·∫°n ch∆∞a ƒëi·ªÅn c√¢u tr·∫£ l·ªùi!");
                return;
            }
        }

        // UI Feedback
        exp.style.display = 'block';
        if (isCorrect) {
            card.classList.add('correct-bg');
            card.classList.remove('incorrect-bg');
            exp.classList.remove('incorrect');
            // Disable inputs
            disableInputs(id);
        } else {
            card.classList.add('incorrect-bg');
            exp.classList.add('incorrect');
            // Show correct answer explicitly if wrong
            if(q.type === 'text') {
                exp.insertAdjacentHTML('afterbegin', `<p style="color:red; font-weight:bold;">ƒê√°p √°n ƒë√∫ng l√†: ${q.correct.toUpperCase()}</p>`);
            }
        }
        
        // Remove button to prevent spam
        const btn = card.querySelector('.btn-check');
        btn.textContent = isCorrect ? 'ƒê√∫ng r·ªìi! üéâ' : 'Sai r·ªìi, xem gi·∫£i th√≠ch nh√©!';
        btn.disabled = true;
        btn.style.opacity = '0.7';
    }

    function disableInputs(id) {
        const inputs = document.querySelectorAll(`input[name="q${id}"], #input-q${id}`);
        inputs.forEach(i => i.disabled = true);
    }

    // SUBMIT ALL FUNCTION
    function submitAll() {
        let score = 0;
        let unanswered = 0;
        const total = quizData.length;

        quizData.forEach(q => {
            const card = document.getElementById(`card-${q.id}`);
            const btn = card.querySelector('.btn-check');
            let isCorrect = false;

            // Check logic again silently
            if (q.type === 'mcq' || q.type === 'sign') {
                const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
                if (selected) {
                    if (selected.value === q.correct) score++;
                    // Trigger check to show explanation
                    if (!btn.disabled) checkQuestion(q.id);
                } else {
                    unanswered++;
                    card.classList.add('unanswered-bg');
                    // Force show explanation
                    document.getElementById(`exp-${q.id}`).style.display = 'block';
                    // Show correct answer
                    const labels = card.querySelectorAll('.option-label');
                    labels.forEach(l => {
                        if (l.innerText.startsWith(q.correct)) l.style.color = 'var(--success-color)';
                    });
                }
            } else {
                const input = document.getElementById(`input-q${q.id}`);
                const val = input.value.trim().toLowerCase();
                const cleanUser = val.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");
                const cleanCorrect = q.correct.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");
                
                let correct = (cleanUser === cleanCorrect);
                if (q.altCorrect) {
                     const cleanAlt = q.altCorrect.map(a => a.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,""));
                     if (cleanAlt.includes(cleanUser)) correct = true;
                }

                if (val !== '') {
                    if (correct) score++;
                    if (!btn.disabled) checkQuestion(q.id);
                } else {
                    unanswered++;
                    card.classList.add('unanswered-bg');
                    document.getElementById(`exp-${q.id}`).style.display = 'block';
                    document.getElementById(`exp-${q.id}`).insertAdjacentHTML('afterbegin', `<p style="color:red; font-weight:bold;">ƒê√°p √°n ƒë√∫ng l√†: ${q.correct.toUpperCase()}</p>`);
                }
            }
        });

        // Show Modal
        const modal = document.getElementById('resultModal');
        const scoreText = document.getElementById('modal-score');
        const msg = document.getElementById('modal-message');
        
        scoreText.textContent = `${score}/${total}`;
        
        if (score === total) msg.textContent = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i ti·∫øng Anh! üåü";
        else if (score >= total * 0.8) msg.textContent = "L√†m r·∫•t t·ªët! Ch·ªâ sai v√†i c√¢u th√¥i.";
        else if (score >= total * 0.5) msg.textContent = "Kh√° t·ªët, nh∆∞ng c·∫ßn √¥n l·∫°i ph·∫ßn ng·ªØ ph√°p nh√©.";
        else msg.textContent = "ƒê·ª´ng bu·ªìn, h√£y ƒë·ªçc k·ªπ ph·∫ßn gi·∫£i th√≠ch v√† l√†m l·∫°i nh√©!";

        modal.style.display = 'flex';
        document.getElementById('score-text').textContent = `K·∫øt qu·∫£: ${score}/${total}`;
    }

</script>
</body>
</html>