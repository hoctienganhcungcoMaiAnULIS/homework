<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 10: Communication - Matching & Sentence Building | Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-color: #8854C0; /* T√≠m h·ªìng */
            --secondary-color: #00C9A7; /* Xanh ng·ªçc */
            --correct-color: #00D26A; /* Xanh l√° */
            --wrong-color: #FF4757; /* ƒê·ªè cam */
            --bg-pattern: #f0f3f8;
            --card-bg: #ffffff;
            --text-color: #2f3542;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-pattern);
            background-image: radial-gradient(#8854c0 0.8px, transparent 0.8px), radial-gradient(#8854c0 0.8px, #f0f3f8 0.8px);
            background-size: 32px 32px;
            background-position: 0 0, 16px 16px;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER */
        header {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 4px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        h1 {
            color: var(--primary-color);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            margin: 0;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .teacher-tag {
            background: var(--secondary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            display: inline-block;
            margin-top: 10px;
            box-shadow: 0 4px 0 #009e82;
        }

        /* PROGRESS BAR */
        .progress-container {
            background: #dfe4ea;
            border-radius: 15px;
            height: 20px;
            margin-bottom: 30px;
            overflow: hidden;
            border: 2px solid #ced6e0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff9ff3, #8854C0);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 15px;
        }

        /* QUESTION CARD */
        .quiz-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 20px rgba(136, 84, 192, 0.15);
            border: 3px solid #f1f2f6;
            transition: transform 0.3s;
            position: relative;
        }

        .quiz-card:hover {
            transform: translateY(-5px);
        }

        .question-number {
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            position: absolute;
            top: -15px;
            left: -15px;
            box-shadow: 0 4px 0 #5f2d91;
            z-index: 10;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            margin-left: 15px;
            color: #2f3542;
            line-height: 1.5;
        }

        /* OPTIONS */
        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe4ea;
            padding: 15px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            text-align: left;
            transition: all 0.2s;
            position: relative;
            box-shadow: 0 5px 0 #dfe4ea;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(.disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-color);
            box-shadow: 0 7px 0 #dfe4ea;
        }

        .option-btn:active:not(.disabled) {
            transform: translateY(2px);
            box-shadow: 0 0 0 #dfe4ea;
        }

        .option-marker {
            font-weight: 800;
            margin-right: 10px;
            width: 25px;
            color: var(--primary-color);
        }

        /* STATES */
        .option-btn.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 5px 0 #00b85c;
        }
        
        .option-btn.correct .option-marker { color: white; }

        .option-btn.wrong {
            background-color: var(--wrong-color);
            color: white;
            border-color: #ff2e43;
            box-shadow: 0 5px 0 #ff2e43;
            animation: shake 0.5s;
        }
        
        .option-btn.wrong .option-marker { color: white; }

        .disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* EXPLANATION */
        .explanation-box {
            margin-top: 20px;
            padding: 20px;
            background: #e9fff1;
            border: 2px dashed var(--correct-color);
            border-radius: 15px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-header {
            font-weight: 800;
            color: var(--correct-color);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .explanation-content {
            font-size: 0.95rem;
            line-height: 1.6;
            white-space: pre-line; /* Handle line breaks from JSON */
            color: #2f3542;
        }

        /* ANIMATIONS */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            75% { transform: translateX(5px) rotate(2deg); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* SUBMIT BUTTON */
        .submit-section {
            text-align: center;
            margin-top: 40px;
            padding-bottom: 50px;
        }

        .submit-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #5f2d91;
            transition: all 0.2s;
            font-family: 'Quicksand', sans-serif;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 0 #5f2d91;
        }

        .submit-btn:active {
            transform: translateY(3px);
            box-shadow: 0 0 0 #5f2d91;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 5px solid var(--secondary-color);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .score-display {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-color);
            margin: 20px 0;
            text-shadow: 3px 3px 0px #dfe4ea;
        }

        .message {
            font-size: 1.2rem;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            .container { padding: 10px; }
            h1 { font-size: 1.4rem; }
            .option-btn { font-size: 0.9rem; padding: 12px; }
            .question-text { font-size: 1rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Unit 10: Communication</h1>
            <div class="teacher-tag"><i class="fas fa-chalkboard-teacher"></i> Ms. Mai An ULIS</div>
            <p style="margin-top: 10px; color: #666; font-size: 0.9rem;">
                <i class="fas fa-star" style="color: #f1c40f;"></i> Matching & Sentence Building
            </p>
        </header>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div id="quiz-area">
            <!-- Questions will be inserted here by JS -->
        </div>

        <div class="submit-section">
            <button class="submit-btn" onclick="finishQuiz()">
                <i class="fas fa-flag-checkered"></i> N·ªòP B√ÄI
            </button>
        </div>
    </div>

    <!-- RESULT MODAL -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 style="color: var(--secondary-color); font-family: 'Quicksand'; text-transform: uppercase;">K·∫øt qu·∫£ c·ªßa b·∫°n</h2>
            <div class="score-display">
                <span id="finalScore">0</span>/<span id="totalQuestions">0</span>
            </div>
            <p class="message" id="resultMessage">B·∫°n ƒë√£ l√†m r·∫•t t·ªët!</p>
            <button class="submit-btn" onclick="location.reload()" style="background: var(--secondary-color); box-shadow: 0 8px 0 #009e82; font-size: 1.2rem;">
                <i class="fas fa-redo"></i> L√†m l·∫°i
            </button>
        </div>
    </div>

    <script>
        // DATA SOURCE
        const quizData = {
          "questions": [
            {
              "questionNumber": 1,
              "question": "Match Question 1: 'What means of communication uses thoughts?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "f. It's telepathy.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- means of communication (n phrase): ph∆∞∆°ng ti·ªán giao ti·∫øp.\n- thoughts (noun): suy nghƒ©.\n- telepathy (noun): th·∫ßn giao c√°ch c·∫£m.\n2. D·ªãch nghƒ©a: \"Ph∆∞∆°ng ti·ªán giao ti·∫øp n√†o s·ª≠ d·ª•ng suy nghƒ©?\" -> \"ƒê√≥ l√† th·∫ßn giao c√°ch c·∫£m.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- T·ª´ kh√≥a 'thoughts' (suy nghƒ©) li√™n k·∫øt tr·ª±c ti·∫øp v·ªõi ƒë·ªãnh nghƒ©a c·ªßa 'telepathy'.",
                  "isCorrect": true
                },
                {
                  "text": "c. They are fun and cute.",
                  "rationale": "Sai. ƒê√¢y l√† m√¥ t·∫£ t√≠nh ch·∫•t (th∆∞·ªùng n√≥i v·ªÅ emojis).",
                  "isCorrect": false
                },
                {
                  "text": "h. It's for video call or video conference.",
                  "rationale": "Sai. ƒê√¢y l√† ch·ª©c nƒÉng c·ªßa webcam.",
                  "isCorrect": false
                },
                {
                  "text": "g. Businesses use it a lot.",
                  "rationale": "Sai. ƒê√¢y l√† n√≥i v·ªÅ ƒë·ªëi t∆∞·ª£ng s·ª≠ d·ª•ng.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 2,
              "question": "Match Question 2: 'Is this your new laptop?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "a. Yes, it's mine.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- laptop (noun): m√°y t√≠nh x√°ch tay.\n- mine (possessive pronoun): c√°i c·ªßa t√¥i.\n2. D·ªãch nghƒ©a: \"ƒê√¢y l√† chi·∫øc laptop m·ªõi c·ªßa b·∫°n ph·∫£i kh√¥ng?\" -> \"V√¢ng, n√≥ l√† c·ªßa t√¥i.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u h·ªèi Yes/No v·ªÅ s·ªü h·ªØu ('your laptop'). C√¢u tr·∫£ l·ªùi x√°c nh·∫≠n 'Yes' v√† d√πng ƒë·∫°i t·ª´ s·ªü h·ªØu 'mine'.",
                  "isCorrect": true
                },
                {
                  "text": "i. No, he isn't.",
                  "rationale": "Sai ch·ªß ng·ªØ (He d√πng cho ng∆∞·ªùi, laptop l√† v·∫≠t).",
                  "isCorrect": false
                },
                {
                  "text": "e. We usually chat on Zalo.",
                  "rationale": "Sai n·ªôi dung.",
                  "isCorrect": false
                },
                {
                  "text": "j. Maybe in 20 years.",
                  "rationale": "Sai. ƒê√¢y l√† c√¢u tr·∫£ l·ªùi v·ªÅ th·ªùi gian.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 3,
              "question": "Match Question 3: 'What is the webcam for?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "h. It's for video call or video conference.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- What ... for? (Structure): ƒê·ªÉ l√†m g√¨? (H·ªèi m·ª•c ƒë√≠ch).\n- video conference (n phrase): h·ªôi ngh·ªã tr·ª±c tuy·∫øn.\n2. D·ªãch nghƒ©a: \"Webcam d√πng ƒë·ªÉ l√†m g√¨?\" -> \"N√≥ d√πng cho cu·ªôc g·ªçi video ho·∫∑c h·ªôi ngh·ªã tr·ª±c tuy·∫øn.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u tr·∫£ l·ªùi gi·∫£i th√≠ch ch·ª©c nƒÉng (function) c·ªßa webcam.",
                  "isCorrect": true
                },
                {
                  "text": "b. At the conference hall.",
                  "rationale": "Sai. ƒê√¢y l√† ch·ªâ ƒë·ªãa ƒëi·ªÉm (Where).",
                  "isCorrect": false
                },
                {
                  "text": "g. Businesses use it a lot.",
                  "rationale": "Sai. Tr·∫£ l·ªùi cho c√¢u h·ªèi ai d√πng (Who).",
                  "isCorrect": false
                },
                {
                  "text": "f. It's telepathy.",
                  "rationale": "Sai ƒë·ªãnh nghƒ©a.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 4,
              "question": "Match Question 4: 'When will holography become more common?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "j. Maybe in 20 years.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- When (adv): Khi n√†o.\n- common (adj): ph·ªï bi·∫øn.\n2. D·ªãch nghƒ©a: \"Khi n√†o c√¥ng ngh·ªá to√†n ·∫£nh s·∫Ω tr·ªü n√™n ph·ªï bi·∫øn h∆°n?\" -> \"C√≥ l·∫Ω l√† trong 20 nƒÉm n·ªØa.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u h·ªèi v·ªÅ th·ªùi gian (When) -> C·∫ßn c√¢u tr·∫£ l·ªùi c√≥ m·ªëc th·ªùi gian (in 20 years).",
                  "isCorrect": true
                },
                {
                  "text": "d. Once a month.",
                  "rationale": "Sai. ƒê√¢y l√† t·∫ßn su·∫•t (How often).",
                  "isCorrect": false
                },
                {
                  "text": "b. At the conference hall.",
                  "rationale": "Sai. Ch·ªâ ƒë·ªãa ƒëi·ªÉm.",
                  "isCorrect": false
                },
                {
                  "text": "c. They are fun and cute.",
                  "rationale": "Sai.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 5,
              "question": "Match Question 5: 'Who often uses video conference?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "g. Businesses use it a lot.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Who (pronoun): Ai.\n- Businesses (noun): C√°c doanh nghi·ªáp.\n2. D·ªãch nghƒ©a: \"Ai th∆∞·ªùng s·ª≠ d·ª•ng h·ªôi ngh·ªã tr·ª±c tuy·∫øn?\" -> \"C√°c doanh nghi·ªáp s·ª≠ d·ª•ng n√≥ r·∫•t nhi·ªÅu.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u h·ªèi v·ªÅ ƒë·ªëi t∆∞·ª£ng (Who) -> Tr·∫£ l·ªùi l√† 'Businesses'.",
                  "isCorrect": true
                },
                {
                  "text": "e. We usually chat on Zalo.",
                  "rationale": "Sai. Kh√¥ng kh·ªõp v·ªõi 'video conference'.",
                  "isCorrect": false
                },
                {
                  "text": "f. It's telepathy.",
                  "rationale": "Sai.",
                  "isCorrect": false
                },
                {
                  "text": "i. No, he isn't.",
                  "rationale": "Sai.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 6,
              "question": "Match Question 6: 'Why are emojis popular among teens?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "c. They are fun and cute.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Why (adv): T·∫°i sao.\n- fun and cute (adj): vui nh·ªôn v√† d·ªÖ th∆∞∆°ng.\n2. D·ªãch nghƒ©a: \"T·∫°i sao bi·ªÉu t∆∞·ª£ng c·∫£m x√∫c l·∫°i ph·ªï bi·∫øn trong gi·ªõi tr·∫ª?\" -> \"V√¨ ch√∫ng vui nh·ªôn v√† d·ªÖ th∆∞∆°ng.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u h·ªèi l√Ω do (Why) -> C√¢u tr·∫£ l·ªùi n√™u ƒë·∫∑c ƒëi·ªÉm t√≠ch c·ª±c.",
                  "isCorrect": true
                },
                {
                  "text": "g. Businesses use it a lot.",
                  "rationale": "Sai n·ªôi dung.",
                  "isCorrect": false
                },
                {
                  "text": "a. Yes, it's mine.",
                  "rationale": "Sai.",
                  "isCorrect": false
                },
                {
                  "text": "d. Once a month.",
                  "rationale": "Sai.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 7,
              "question": "Match Question 7: 'How do you keep in contact with friends?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "e. We usually chat on Zalo.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- How (adv): B·∫±ng c√°ch n√†o.\n- keep in contact (idiom): gi·ªØ li√™n l·∫°c.\n2. D·ªãch nghƒ©a: \"B·∫°n gi·ªØ li√™n l·∫°c v·ªõi b·∫°n b√® b·∫±ng c√°ch n√†o?\" -> \"Ch√∫ng t√¥i th∆∞·ªùng chat tr√™n Zalo.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u h·ªèi v·ªÅ ph∆∞∆°ng th·ª©c (How) -> Tr·∫£ l·ªùi b·∫±ng h√†nh ƒë·ªông c·ª• th·ªÉ 'chat on Zalo'.",
                  "isCorrect": true
                },
                {
                  "text": "h. It's for video call or video conference.",
                  "rationale": "Sai. ƒê√¢y l√† m·ª•c ƒë√≠ch s·ª≠ d·ª•ng.",
                  "isCorrect": false
                },
                {
                  "text": "b. At the conference hall.",
                  "rationale": "Sai. Ch·ªâ ƒë·ªãa ƒëi·ªÉm.",
                  "isCorrect": false
                },
                {
                  "text": "f. It's telepathy.",
                  "rationale": "Sai.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 8,
              "question": "Match Question 8: 'Where will they hold the exhibition?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "b. At the conference hall.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Where (adv): ·ªû ƒë√¢u.\n- exhibition (noun): bu·ªïi tri·ªÉn l√£m.\n- conference hall (noun phrase): h·ªôi tr∆∞·ªùng.\n2. D·ªãch nghƒ©a: \"H·ªç s·∫Ω t·ªï ch·ª©c bu·ªïi tri·ªÉn l√£m ·ªü ƒë√¢u?\" -> \"T·∫°i h·ªôi tr∆∞·ªùng.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u h·ªèi ƒë·ªãa ƒëi·ªÉm (Where) -> Tr·∫£ l·ªùi 'At the conference hall'.",
                  "isCorrect": true
                },
                {
                  "text": "j. Maybe in 20 years.",
                  "rationale": "Sai. Ch·ªâ th·ªùi gian.",
                  "isCorrect": false
                },
                {
                  "text": "g. Businesses use it a lot.",
                  "rationale": "Sai.",
                  "isCorrect": false
                },
                {
                  "text": "e. We usually chat on Zalo.",
                  "rationale": "Sai.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 9,
              "question": "Match Question 9: 'How often do you send letters to your pen pal?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "d. Once a month.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- How often (adv phrase): Bao l√¢u m·ªôt l·∫ßn (h·ªèi t·∫ßn su·∫•t).\n- pen pal (noun): b·∫°n qua th∆∞.\n- Once a month: M·ªôt l·∫ßn m·ªôt th√°ng.\n2. D·ªãch nghƒ©a: \"B·∫°n c√≥ th∆∞·ªùng g·ª≠i th∆∞ cho b·∫°n qua th∆∞ kh√¥ng?\" -> \"M·ªói th√°ng m·ªôt l·∫ßn.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u tr·∫£ l·ªùi ch·ªâ t·∫ßn su·∫•t (Once a month) kh·ªõp v·ªõi 'How often'.",
                  "isCorrect": true
                },
                {
                  "text": "j. Maybe in 20 years.",
                  "rationale": "Sai. ƒê√¢y l√† m·ªëc th·ªùi gian t∆∞∆°ng lai, kh√¥ng ph·∫£i t·∫ßn su·∫•t.",
                  "isCorrect": false
                },
                {
                  "text": "a. Yes, it's mine.",
                  "rationale": "Sai.",
                  "isCorrect": false
                },
                {
                  "text": "c. They are fun and cute.",
                  "rationale": "Sai.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 10,
              "question": "Match Question 10: 'Is he a classmate of yours?' with the correct Answer. (Part VIII)",
              "answerOptions": [
                {
                  "text": "i. No, he isn't.",
                  "rationale": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\n- Is he (structure): Anh ·∫•y c√≥ ph·∫£i l√†...?\n- classmate (noun): b·∫°n c√πng l·ªõp.\n2. D·ªãch nghƒ©a: \"C·∫≠u ·∫•y c√≥ ph·∫£i l√† b·∫°n c√πng l·ªõp c·ªßa b·∫°n kh√¥ng?\" -> \"Kh√¥ng, kh√¥ng ph·∫£i.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C√¢u h·ªèi Yes/No v·ªõi ch·ªß ng·ªØ 'he'. C√¢u tr·∫£ l·ªùi kh·ªõp ch·ªß ng·ªØ 'he' v√† tr·ª£ ƒë·ªông t·ª´ 'is' (ph·ªß ƒë·ªãnh 'isn't').",
                  "isCorrect": true
                },
                {
                  "text": "a. Yes, it's mine.",
                  "rationale": "Sai ch·ªß ng·ªØ (it vs he).",
                  "isCorrect": false
                },
                {
                  "text": "e. We usually chat on Zalo.",
                  "rationale": "Sai n·ªôi dung.",
                  "isCorrect": false
                },
                {
                  "text": "g. Businesses use it a lot.",
                  "rationale": "Sai.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 11,
              "question": "Make sentence: I/ hope/ language barriers/ disappear/ 50 years' time. (Part XI)",
              "answerOptions": [
                {
                  "text": "I hope language barriers will disappear in 50 years' time.",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- hope + (that) + S + will + V: Hy v·ªçng ƒëi·ªÅu g√¨ s·∫Ω x·∫£y ra trong t∆∞∆°ng lai.\n- Time expression: in + kho·∫£ng th·ªùi gian (in 50 years' time) = trong 50 nƒÉm n·ªØa.\n2. D·ªãch nghƒ©a: \"T√¥i hy v·ªçng r√†o c·∫£n ng√¥n ng·ªØ s·∫Ω bi·∫øn m·∫•t trong 50 nƒÉm n·ªØa.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- C·∫ßn th√™m 'will' ƒë·ªÉ ch·ªâ t∆∞∆°ng lai sau 'hope', v√† gi·ªõi t·ª´ 'in' ch·ªâ th·ªùi gian t∆∞∆°ng lai.",
                  "isCorrect": true
                },
                {
                  "text": "I hope language barriers disappear at 50 years' time.",
                  "rationale": "Sai gi·ªõi t·ª´ ('at' d√πng cho gi·ªù, 'in' d√πng cho kho·∫£ng th·ªùi gian t∆∞∆°ng lai).",
                  "isCorrect": false
                },
                {
                  "text": "I hope language barriers to disappear in 50 years' time.",
                  "rationale": "Sai c·∫•u tr√∫c (hope somebody to V th√¨ ƒë∆∞·ª£c, nh∆∞ng hope + clause ph·ªï bi·∫øn h∆°n, ho·∫∑c hope to V n·∫øu c√πng ch·ªß ng·ªØ). ·ªû ƒë√¢y barriers l√† ch·ªß ng·ªØ m·ªõi n√™n c·∫ßn chia th√¨.",
                  "isCorrect": false
                },
                {
                  "text": "I hope language barriers disappeared in 50 years' time.",
                  "rationale": "Sai th√¨ (qu√° kh·ª©).",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 12,
              "question": "Make sentence: It/ important/ be/ polite and respectful/ when/ you/ online. (Part XI)",
              "answerOptions": [
                {
                  "text": "It is important to be polite and respectful when you are online.",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- It is + adj + to V: Th·∫≠t l√†... ƒë·ªÉ l√†m g√¨.\n- when + S + V (to be): khi b·∫°n tr·ª±c tuy·∫øn.\n2. D·ªãch nghƒ©a: \"Th·∫≠t quan tr·ªçng ƒë·ªÉ l·ªãch s·ª± v√† t√¥n tr·ªçng khi b·∫°n tr·ª±c tuy·∫øn.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- Th√™m 'is' v√† 'to' cho c·∫•u tr√∫c t√≠nh t·ª´. Th√™m 'are' sau 'you' cho m·ªánh ƒë·ªÅ th·ªùi gian.",
                  "isCorrect": true
                },
                {
                  "text": "It important be polite and respectful when you online.",
                  "rationale": "Thi·∫øu ƒë·ªông t·ª´ to be v√† 'to'.",
                  "isCorrect": false
                },
                {
                  "text": "It is important being polite and respectful when you are online.",
                  "rationale": "C·∫•u tr√∫c 'It is important to V' chu·∫©n h∆°n 'being'.",
                  "isCorrect": false
                },
                {
                  "text": "It is important to be polite and respectful when you online.",
                  "rationale": "Thi·∫øu ƒë·ªông t·ª´ 'are' sau 'you'.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 13,
              "question": "Make sentence: My grandma/ spent/ 2 hours/ sit/ front/ the computer/ to learn/ use/ the webcam. (Part XI)",
              "answerOptions": [
                {
                  "text": "My grandma spent 2 hours sitting in front of the computer to learn how to use the webcam.",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- Spend + time + V-ing: D√†nh th·ªùi gian l√†m g√¨ -> spent ... sitting.\n- Preposition: in front of (ph√≠a tr∆∞·ªõc).\n- Learn + (how) to V: H·ªçc c√°ch l√†m g√¨.\n2. D·ªãch nghƒ©a: \"B√† t√¥i ƒë√£ d√†nh 2 gi·ªù ng·ªìi tr∆∞·ªõc m√°y t√≠nh ƒë·ªÉ h·ªçc c√°ch s·ª≠ d·ª•ng webcam.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- 'sit' ph·∫£i ƒë·ªïi th√†nh 'sitting'. C·ª•m 'in front of' c·∫ßn ƒë·∫ßy ƒë·ªß gi·ªõi t·ª´.",
                  "isCorrect": true
                },
                {
                  "text": "My grandma spent 2 hours to sit front the computer to learn use the webcam.",
                  "rationale": "Sai c·∫•u tr√∫c (spend time to V -> sai, ph·∫£i l√† V-ing). Thi·∫øu gi·ªõi t·ª´ 'in' v√† 'of'.",
                  "isCorrect": false
                },
                {
                  "text": "My grandma spent 2 hours sitting front of the computer to learn using the webcam.",
                  "rationale": "Thi·∫øu 'in'. Learn using -> th∆∞·ªùng d√πng 'learn to use' ho·∫∑c 'learn how to use'.",
                  "isCorrect": false
                },
                {
                  "text": "My grandma spent 2 hours sit in front of the computer to learn to use the webcam.",
                  "rationale": "Sai (spend ... sit -> ph·∫£i l√† sitting).",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 14,
              "question": "Make sentence: Most teenagers/ would rather/ chat/ their friends/ online/ see/ them/ in person. (Part XI)",
              "answerOptions": [
                {
                  "text": "Most teenagers would rather chat with their friends online than see them in person.",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- Would rather + V (bare) + than + V (bare): Th√≠ch l√†m g√¨ h∆°n l√†m g√¨.\n- Chat with someone: T√°n g·∫´u v·ªõi ai.\n2. D·ªãch nghƒ©a: \"H·∫ßu h·∫øt thanh thi·∫øu ni√™n th√† t√°n g·∫´u v·ªõi b·∫°n b√® tr·ª±c tuy·∫øn h∆°n l√† g·∫∑p m·∫∑t tr·ª±c ti·∫øp.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- Th√™m 'with' sau chat v√† 'than' ƒë·ªÉ so s√°nh.",
                  "isCorrect": true
                },
                {
                  "text": "Most teenagers would rather chat their friends online to see them in person.",
                  "rationale": "Sai c·∫•u tr√∫c (would rather... than...). Thi·∫øu 'with'.",
                  "isCorrect": false
                },
                {
                  "text": "Most teenagers would rather to chat with their friends online than to see them in person.",
                  "rationale": "Sai (would rather kh√¥ng ƒëi v·ªõi 'to V').",
                  "isCorrect": false
                },
                {
                  "text": "Most teenagers would rather chat with their friends online or see them in person.",
                  "rationale": "Sai nghƒ©a (or = ho·∫∑c, than = h∆°n).",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 15,
              "question": "Make sentence: How/ you/ think/ people/ communicate/ in the future? (Part XI)",
              "answerOptions": [
                {
                  "text": "How do you think people will communicate in the future?",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- C√¢u h·ªèi: Wh-word + do/does + S + V?\n- M·ªánh ƒë·ªÅ sau 'think': S + will + V (v√¨ c√≥ 'in the future').\n2. D·ªãch nghƒ©a: \"B·∫°n nghƒ© con ng∆∞·ªùi s·∫Ω giao ti·∫øp nh∆∞ th·∫ø n√†o trong t∆∞∆°ng lai?\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- Th√™m tr·ª£ ƒë·ªông t·ª´ 'do' v√† 'will' cho t∆∞∆°ng lai.",
                  "isCorrect": true
                },
                {
                  "text": "How you think people communicate in the future?",
                  "rationale": "Thi·∫øu tr·ª£ ƒë·ªông t·ª´ 'do' v√† 'will'.",
                  "isCorrect": false
                },
                {
                  "text": "How do you think people communicate in the future?",
                  "rationale": "Thi·∫øu 'will' (future tense).",
                  "isCorrect": false
                },
                {
                  "text": "How are you think people will communicate in the future?",
                  "rationale": "Sai ng·ªØ ph√°p (are you think -> do you think).",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 16,
              "question": "Make sentence: They/ often/ have/ a/ video conference/ the last day/ the month. (Part XI)",
              "answerOptions": [
                {
                  "text": "They often have a video conference on the last day of the month.",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- Preposition of time: ON + day (v√†o ng√†y...).\n- Possession: OF (c·ªßa th√°ng).\n2. D·ªãch nghƒ©a: \"H·ªç th∆∞·ªùng c√≥ m·ªôt cu·ªôc h·ªçp tr·ª±c tuy·∫øn v√†o ng√†y cu·ªëi c√πng c·ªßa th√°ng.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- Th√™m gi·ªõi t·ª´ 'on' (ch·ªâ ng√†y) v√† 'of' (ch·ªâ s·ª± s·ªü h·ªØu).",
                  "isCorrect": true
                },
                {
                  "text": "They often have a video conference in the last day of the month.",
                  "rationale": "Sai gi·ªõi t·ª´ (in day -> sai, ph·∫£i l√† on day).",
                  "isCorrect": false
                },
                {
                  "text": "They often have a video conference at the last day of the month.",
                  "rationale": "Sai gi·ªõi t·ª´ (at day -> sai).",
                  "isCorrect": false
                },
                {
                  "text": "They often have a video conference on the last day in the month.",
                  "rationale": "Of the month t·ª± nhi√™n h∆°n in the month.",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 17,
              "question": "Make sentence: Smartphones and tablets/ get/ thinner and thinner/ the near future. (Part XI)",
              "answerOptions": [
                {
                  "text": "Smartphones and tablets will get thinner and thinner in the near future.",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- Future tense: Will get (s·∫Ω tr·ªü n√™n).\n- Comparative: thinner and thinner (ng√†y c√†ng m·ªèng).\n- Time: in the near future (trong t∆∞∆°ng lai g·∫ßn).\n2. D·ªãch nghƒ©a: \"ƒêi·ªán tho·∫°i th√¥ng minh v√† m√°y t√≠nh b·∫£ng s·∫Ω ng√†y c√†ng m·ªèng h∆°n trong t∆∞∆°ng lai g·∫ßn.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- Th√™m 'will' v√† gi·ªõi t·ª´ 'in'.",
                  "isCorrect": true
                },
                {
                  "text": "Smartphones and tablets get thinner and thinner in the near future.",
                  "rationale": "Thi·∫øu 'will' (th√¨ t∆∞∆°ng lai).",
                  "isCorrect": false
                },
                {
                  "text": "Smartphones and tablets are getting thinner and thinner on the near future.",
                  "rationale": "Sai gi·ªõi t·ª´ (on the near future -> sai).",
                  "isCorrect": false
                },
                {
                  "text": "Smartphones and tablets will get thinner and thinner at the near future.",
                  "rationale": "Sai gi·ªõi t·ª´ (at).",
                  "isCorrect": false
                }
              ]
            },
            {
              "questionNumber": 18,
              "question": "Make sentence: Last year/ he/ decide/ stop/ use/ Facebook/ personal communication/ family and friends. (Part XI)",
              "answerOptions": [
                {
                  "text": "Last year, he decided to stop using Facebook for personal communication with family and friends.",
                  "rationale": "1. Ph√¢n t√≠ch c·∫•u tr√∫c:\n- Past tense: Last year -> decided.\n- Decide + to V: Quy·∫øt ƒë·ªãnh l√†m g√¨.\n- Stop + V-ing: D·ª´ng h·∫≥n vi·ªác g√¨ (b·ªè d√πng).\n- Purpose: for (ƒë·ªÉ/cho).\n- Communication with: Giao ti·∫øp v·ªõi.\n2. D·ªãch nghƒ©a: \"NƒÉm ngo√°i, anh ·∫•y ƒë√£ quy·∫øt ƒë·ªãnh ng·ª´ng s·ª≠ d·ª•ng Facebook cho vi·ªác giao ti·∫øp c√° nh√¢n v·ªõi gia ƒë√¨nh v√† b·∫°n b√®.\"\n3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?\n- Chia th√¨ qu√° kh·ª© (decided), c·∫•u tr√∫c stop using (b·ªè d√πng), gi·ªõi t·ª´ 'for' v√† 'with'.",
                  "isCorrect": true
                },
                {
                  "text": "Last year, he decided to stop to use Facebook for personal communication with family and friends.",
                  "rationale": "Sai nghƒ©a: 'Stop to use' nghƒ©a l√† ƒëang l√†m vi·ªác kh√°c th√¨ d·ª´ng l·∫°i ƒê·ªÇ d√πng Facebook. 'Stop using' m·ªõi l√† b·ªè Facebook.",
                  "isCorrect": false
                },
                {
                  "text": "Last year, he decided stop using Facebook for personal communication with family and friends.",
                  "rationale": "Thi·∫øu 'to' sau decided.",
                  "isCorrect": false
                },
                {
                  "text": "Last year, he decides to stop using Facebook with personal communication for family and friends.",
                  "rationale": "Sai th√¨ (decides -> hi·ªán t·∫°i).",
                  "isCorrect": false
                }
              ]
            }
          ]
        };

        // SOUNDS (Base64 for single file portability)
        // Ding sound
        const correctSound = new Audio("data:audio/wav;base64,UklGRl9vT1BXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU..."); 
        // Note: Shortened for brevity in display, using simple tone generation for robustness below
        
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // High pitch ding
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(800, audioCtx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.5);
            } else {
                // Low pitch buzz
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.3);
            }
        }


        // STATE
        let score = 0;
        let answeredCount = 0;
        const totalQs = quizData.questions.length;

        // INIT
        window.onload = function() {
            renderQuiz();
            document.getElementById('totalQuestions').innerText = totalQs;
        };

        function renderQuiz() {
            const container = document.getElementById('quiz-area');
            
            quizData.questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.id = `q-card-${index}`;

                // Question Header
                const qNum = document.createElement('div');
                qNum.className = 'question-number';
                qNum.innerText = index + 1;
                
                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.innerText = q.question;

                // Options Container
                const optionsGrid = document.createElement('div');
                optionsGrid.className = 'options-grid';

                q.answerOptions.forEach((opt, optIndex) => {
                    const btn = document.createElement('div');
                    btn.className = 'option-btn';
                    // Letters A, B, C, D
                    const letters = ['A', 'B', 'C', 'D'];
                    const letter = letters[optIndex] || '';

                    btn.innerHTML = `<span class="option-marker">${letter}</span> ${opt.text}`;
                    
                    btn.onclick = () => checkAnswer(btn, opt.isCorrect, q, index, optIndex);
                    optionsGrid.appendChild(btn);
                });

                // Explanation Box (Hidden initially)
                const explainBox = document.createElement('div');
                explainBox.className = 'explanation-box';
                explainBox.id = `explain-${index}`;
                
                // Content for explanation will be populated based on the user's choice/correctness logic
                // But the source has ONE rationale field per option. 
                // We will display the logic for the CORRECT answer + the rationale of the chosen option if wrong.
                
                card.appendChild(qNum);
                card.appendChild(qText);
                card.appendChild(optionsGrid);
                card.appendChild(explainBox);
                
                container.appendChild(card);
            });
        }

        function checkAnswer(btnElement, isCorrect, questionData, qIndex, optIndex) {
            const card = document.getElementById(`q-card-${qIndex}`);
            // Prevent re-answering
            if (card.classList.contains('answered')) return;
            card.classList.add('answered');

            const allBtns = card.querySelectorAll('.option-btn');
            
            // Highlight Selected
            if (isCorrect) {
                btnElement.classList.add('correct');
                playSound('correct');
                score++;
                triggerConfetti(btnElement);
            } else {
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight the correct one automatically
                questionData.answerOptions.forEach((opt, idx) => {
                    if (opt.isCorrect) {
                        allBtns[idx].classList.add('correct');
                    }
                });
            }

            // Disable all buttons
            allBtns.forEach(b => b.classList.add('disabled'));

            // Show Explanation
            showExplanation(qIndex, questionData, isCorrect, optIndex);

            // Update Progress
            answeredCount++;
            updateProgressBar();
        }

        function showExplanation(qIndex, qData, isCorrect, selectedOptIndex) {
            const box = document.getElementById(`explain-${qIndex}`);
            const correctOption = qData.answerOptions.find(o => o.isCorrect);
            
            let htmlContent = `
                <div class="explanation-header">
                    <i class="fas fa-lightbulb"></i> C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:
                </div>
                <div class="explanation-content">
            `;

            // Logic to combine rationales:
            // Always show the analysis of the CORRECT answer (since that's the learning goal)
            // If they picked wrong, maybe show why that specific one was wrong too.
            // Based on the data provided, the "rationale" field in the correct answer usually explains the whole context (Vocab + Translation + Why correct).
            
            htmlContent += `<strong>ƒê√°p √°n ƒë√∫ng: ${correctOption.text}</strong><br><br>`;
            htmlContent += correctOption.rationale.replace(/\n/g, '<br>');
            
            htmlContent += `</div>`;
            
            box.innerHTML = htmlContent;
            box.style.display = 'block';
        }

        function updateProgressBar() {
            const percentage = (answeredCount / totalQs) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        function triggerConfetti(element) {
            const rect = element.getBoundingClientRect();
            // Normalized coordinates
            const x = (rect.left + rect.width / 2) / window.innerWidth;
            const y = (rect.top + rect.height / 2) / window.innerHeight;

            confetti({
                particleCount: 100,
                spread: 70,
                origin: { x: x, y: y },
                colors: ['#8854C0', '#00C9A7', '#ff9ff3', '#feca57']
            });
        }

        function finishQuiz() {
            const modal = document.getElementById('resultModal');
            document.getElementById('finalScore').innerText = score;
            
            let msg = "";
            const percentage = score / totalQs;
            if (percentage === 1) msg = "Tuy·ªát v·ªùi! Con ƒë√£ l√†m ƒë√∫ng t·∫•t c·∫£! üåü";
            else if (percentage >= 0.8) msg = "R·∫•t t·ªët! Con n·∫Øm b√†i r·∫•t ch·∫Øc! üéâ";
            else if (percentage >= 0.5) msg = "Kh√° l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! üí™";
            else msg = "ƒê·ª´ng bu·ªìn nh√©! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch v√† l√†m l·∫°i n√†o! üå±";
            
            document.getElementById('resultMessage').innerText = msg;
            modal.style.display = 'flex';
            
            if (percentage > 0.5) {
                confetti({
                    particleCount: 200,
                    spread: 160,
                    origin: { y: 0.6 }
                });
            }
        }
    </script>
</body>
</html>
