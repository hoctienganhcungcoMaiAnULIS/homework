<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wh-Questions Quiz - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --error-red: #FF4757;
            --bg-pastel: #f0f4f8;
            --text-dark: #2d3436;
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-pastel);
            background-image: radial-gradient(#8854c022 2px, transparent 2px);
            background-size: 30px 30px;
            color: var(--text-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* Header Styles */
        header {
            width: 100%;
            background: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-purple);
            font-weight: 900;
        }

        .teacher-name {
            font-size: 0.9rem;
            color: #636e72;
            margin-top: 5px;
        }

        /* Progress Bar */
        .progress-container {
            width: 90%;
            max-width: 600px;
            height: 15px;
            background: #dfe6e9;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary-teal), var(--primary-purple));
            transition: width 0.3s ease;
        }

        /* Quiz Card */
        .quiz-container {
            width: 95%;
            max-width: 600px;
            perspective: 1000px;
        }

        .card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 0px #d6d6d6, 0 15px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            transition: transform 0.2s;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        /* Options */
        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 3px solid #e2e8f0;
            padding: 15px 20px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            box-shadow: 0 5px 0px #e2e8f0;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            transform: translateY(-3px);
            border-color: var(--primary-purple);
            box-shadow: 0 8px 0px var(--primary-purple);
        }

        .option-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0px var(--primary-purple);
        }

        .option-btn.correct {
            background-color: #d1fae5;
            border-color: var(--correct-green);
            box-shadow: 0 5px 0px var(--correct-green);
            color: #065f46;
        }

        .option-btn.wrong {
            background-color: #fee2e2;
            border-color: var(--error-red);
            box-shadow: 0 5px 0px var(--error-red);
            color: #991b1b;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            padding: 20px;
            border-radius: 20px;
            background: #f8f9fa;
            border-left: 8px solid var(--primary-purple);
            display: none;
            animation: slideUp 0.4s ease;
        }

        .explanation-title {
            color: var(--primary-purple);
            font-weight: 900;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Animations */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .shake { animation: shake 0.3s ease-in-out; }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            width: 100%;
        }

        .btn-next {
            flex: 1;
            padding: 15px;
            background: var(--primary-teal);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: 900;
            cursor: pointer;
            box-shadow: 0 6px 0px #00a88b;
            transition: all 0.1s;
        }

        .btn-next:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0px #00a88b;
        }

        /* Result Modal */
        #result-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 8px solid var(--primary-teal);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary-teal);
        }

        /* Glossary Table */
        .glossary-container {
            margin-top: 30px;
            width: 100%;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: var(--primary-purple);
            color: white;
        }

        .tag-u { text-decoration: underline; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <h1>Tr·∫Øc nghi·ªám T·ª´ ƒë·ªÉ h·ªèi (Wh-Questions) - L·ªõp 6</h1>
        <div class="teacher-name">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</div>
    </header>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="quiz-container" id="quizContainer">
        <!-- Question Card will be injected here -->
    </div>

    <div id="result-modal">
        <div class="modal-content">
            <h2 id="result-title">Tuy·ªát v·ªùi!</h2>
            <div class="score-circle" id="scoreValue">0/20</div>
            <p id="result-comment">B·∫°n ƒë√£ ho√†n th√†nh b√†i thi r·∫•t t·ªët!</p>
            <button class="btn-next" onclick="location.reload()">L√†m l·∫°i b√†i</button>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <script>
        const quizData = [
            {
                q: "1. \"_______ is your favorite TV show?\" - \"It's Tom and Jerry.\"",
                options: ["A. Who", "B. What", "C. Where", "D. When"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. Who (ƒë·∫°i t·ª´): Ai (h·ªèi v·ªÅ ng∆∞·ªùi).",
                        "B. What (ƒë·∫°i t·ª´): C√°i g√¨/G√¨ (h·ªèi v·ªÅ s·ª± v·∫≠t, t√™n ch∆∞∆°ng tr√¨nh).",
                        "C. Where (tr·∫°ng t·ª´): ·ªû ƒë√¢u (h·ªèi v·ªÅ ƒë·ªãa ƒëi·ªÉm).",
                        "D. When (tr·∫°ng t·ª´): Khi n√†o (h·ªèi v·ªÅ th·ªùi gian)."
                    ],
                    translation: "\"Ch∆∞∆°ng tr√¨nh TV y√™u th√≠ch c·ªßa b·∫°n l√† g√¨?\" - \"ƒê√≥ l√† Tom v√† Jerry.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi l√† 'Tom and Jerry' (t√™n m·ªôt ch∆∞∆°ng tr√¨nh/v·∫≠t), n√™n ta d√πng 'What' ƒë·ªÉ h·ªèi v·ªÅ danh t√≠nh c·ªßa s·ª± v·∫≠t ƒë√≥.",
                    whyWrong: "Lo·∫°i A v√¨ kh√¥ng h·ªèi ng∆∞·ªùi. Lo·∫°i C, D v√¨ c√¢u tr·∫£ l·ªùi kh√¥ng ch·ªâ n∆°i ch·ªën hay th·ªùi gian."
                }
            },
            {
                q: "2. \"_______ do you usually watch TV?\" - \"In the living room.\"",
                options: ["A. When", "B. Where", "C. Who", "D. Why"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. When: Khi n√†o.",
                        "B. Where: ·ªû ƒë√¢u.",
                        "C. Who: Ai.",
                        "D. Why: T·∫°i sao."
                    ],
                    translation: "\"B·∫°n th∆∞·ªùng xem TV ·ªü ƒë√¢u?\" - \"Trong ph√≤ng kh√°ch.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi 'In the living room' (Trong ph√≤ng kh√°ch) l√† m·ªôt tr·∫°ng ng·ªØ ch·ªâ n∆°i ch·ªën -> d√πng 'Where'.",
                    whyWrong: "C√°c ph∆∞∆°ng √°n kh√°c h·ªèi v·ªÅ th·ªùi gian, con ng∆∞·ªùi ho·∫∑c l√Ω do ƒë·ªÅu kh√¥ng kh·ªõp v·ªõi 'ph√≤ng kh√°ch'."
                }
            },
            {
                q: "3. \"_______ do you watch cartoons?\" - \"Every Saturday morning.\"",
                options: ["A. What time", "B. Where", "C. When", "D. What"],
                correct: 2,
                explanation: {
                    analysis: [
                        "A. What time: M·∫•y gi·ªù (h·ªèi gi·ªù c·ª• th·ªÉ).",
                        "B. Where: ·ªû ƒë√¢u.",
                        "C. When: Khi n√†o (h·ªèi m·ªëc th·ªùi gian chung).",
                        "D. What: C√°i g√¨."
                    ],
                    translation: "\"Khi n√†o b·∫°n xem phim ho·∫°t h√¨nh?\" - \"M·ªói s√°ng th·ª© B·∫£y.\"",
                    whyCorrect: "Tr·∫£ l·ªùi b·∫±ng 'Every Saturday morning' (S√°ng th·ª© B·∫£y) l√† m·ªôt m·ªëc th·ªùi gian -> d√πng 'When'.",
                    whyWrong: "D√πng 'What time' th∆∞·ªùng y√™u c·∫ßu gi·ªù c·ª• th·ªÉ tr√™n ƒë·ªìng h·ªì (v√≠ d·ª•: 8:00 AM)."
                }
            },
            {
                q: "4. \"_______ does the news start?\" - \"At 7 o'clock.\"",
                options: ["A. How long", "B. What time", "C. How far", "D. How old"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How long: Bao l√¢u.",
                        "B. What time: M·∫•y gi·ªù.",
                        "C. How far: Bao xa.",
                        "D. How old: Bao nhi√™u tu·ªïi."
                    ],
                    translation: "\"B·∫£n tin b·∫Øt ƒë·∫ßu l√∫c m·∫•y gi·ªù?\" - \"L√∫c 7 gi·ªù.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi 'At 7 o'clock' l√† gi·ªù ƒë·ªìng h·ªì c·ª• th·ªÉ -> d√πng 'What time'.",
                    whyWrong: "C√°c t·ª´ c√≤n l·∫°i h·ªèi v·ªÅ ƒë·ªô d√†i, kho·∫£ng c√°ch ho·∫∑c tu·ªïi t√°c ƒë·ªÅu sai ng·ªØ nghƒ©a."
                }
            },
            {
                q: "5. \"_______ watches TV with you in the evening?\" - \"My family.\"",
                options: ["A. Who", "B. What", "C. Why", "D. Where"],
                correct: 0,
                explanation: {
                    analysis: [
                        "A. Who: Ai.",
                        "B. What: C√°i g√¨.",
                        "C. Why: T·∫°i sao.",
                        "D. Where: ·ªû ƒë√¢u."
                    ],
                    translation: "\"Ai xem TV c√πng b·∫°n v√†o bu·ªïi t·ªëi?\" - \"Gia ƒë√¨nh t√¥i.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi 'My family' (Gia ƒë√¨nh t√¥i) ch·ªâ ng∆∞·ªùi -> d√πng 'Who' ƒë√≥ng vai tr√≤ ch·ªß ng·ªØ.",
                    whyWrong: "Kh√¥ng d√πng What/Why/Where v√¨ c√¢u tr·∫£ l·ªùi l√† ch·ªß th·ªÉ ng∆∞·ªùi."
                }
            },
            {
                q: "6. \"_______ remote control is this?\" - \"It's my brother's.\"",
                options: ["A. Who", "B. Whose", "C. Which", "D. Where"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. Who: Ai.",
                        "B. Whose: C·ªßa ai (h·ªèi v·ªÅ s·ªü h·ªØu).",
                        "C. Which: C√°i n√†o (l·ª±a ch·ªçn).",
                        "D. Where: ·ªû ƒë√¢u."
                    ],
                    translation: "\"C√°i ƒëi·ªÅu khi·ªÉn t·ª´ xa n√†y l√† c·ªßa ai?\" - \"C·ªßa anh trai t√¥i.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi c√≥ s·ªü h·ªØu c√°ch 's (my brother's) -> d√πng 'Whose'.",
                    whyWrong: "Who h·ªèi ng∆∞·ªùi (ch·ªß ng·ªØ), kh√¥ng h·ªèi s·ª± s·ªü h·ªØu."
                }
            },
            {
                q: "7. \"_______ channel do you like, Channel 1 or Channel 2?\" - \"Channel 1.\"",
                options: ["A. What", "B. Which", "C. Who", "D. When"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. What: C√°i g√¨.",
                        "B. Which: C√°i n√†o (d√πng khi c√≥ s·ª± l·ª±a ch·ªçn gi·ªõi h·∫°n).",
                        "C. Who: Ai.",
                        "D. When: Khi n√†o."
                    ],
                    translation: "\"B·∫°n th√≠ch k√™nh n√†o, K√™nh 1 hay K√™nh 2?\" - \"K√™nh 1.\"",
                    whyCorrect: "Khi c√¢u h·ªèi ƒë∆∞a ra s·ª± l·ª±a ch·ªçn c·ª• th·ªÉ (A or B) -> d√πng 'Which'.",
                    whyWrong: "What th∆∞·ªùng h·ªèi chung chung, kh√¥ng gi·ªõi h·∫°n l·ª±a ch·ªçn r√µ r√†ng nh∆∞ Which."
                }
            },
            {
                q: "8. \"_______ don't you like horror movies?\" - \"Because they're scary.\"",
                options: ["A. How", "B. Why", "C. What", "D. When"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How: Nh∆∞ th·∫ø n√†o/B·∫±ng c√°ch n√†o.",
                        "B. Why: T·∫°i sao.",
                        "C. What: C√°i g√¨.",
                        "D. When: Khi n√†o."
                    ],
                    translation: "\"T·∫°i sao b·∫°n kh√¥ng th√≠ch phim kinh d·ªã?\" - \"B·ªüi v√¨ ch√∫ng ƒë√°ng s·ª£.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi b·∫Øt ƒë·∫ßu b·∫±ng 'Because' (B·ªüi v√¨) ƒë·ªÉ gi·∫£i th√≠ch l√Ω do -> d√πng 'Why'.",
                    whyWrong: "How/What/When kh√¥ng d√πng ƒë·ªÉ h·ªèi l√Ω do."
                }
            },
            {
                q: "9. \"_______ do you turn on the TV?\" - \"Press the power button.\"",
                options: ["A. What", "B. How", "C. Why", "D. Where"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. What: C√°i g√¨.",
                        "B. How: L√†m th·∫ø n√†o (h·ªèi c√°ch th·ª©c).",
                        "C. Why: T·∫°i sao.",
                        "D. Where: ·ªû ƒë√¢u."
                    ],
                    translation: "\"L√†m th·∫ø n√†o ƒë·ªÉ b·∫°n b·∫≠t TV?\" - \"Nh·∫•n n√∫t ngu·ªìn.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi h∆∞·ªõng d·∫´n c√°ch th·ª±c hi·ªán h√†nh ƒë·ªông -> d√πng 'How'.",
                    whyWrong: "What/Why/Where kh√¥ng d√πng ƒë·ªÉ h·ªèi v·ªÅ quy tr√¨nh th·ª±c hi·ªán."
                }
            },
            {
                q: "10. \"_______ is this TV?\" - \"It's 2 years old.\"",
                options: ["A. How much", "B. How old", "C. How far", "D. How"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How much: Bao nhi√™u (ti·ªÅn/l∆∞·ª£ng).",
                        "B. How old: Bao nhi√™u tu·ªïi/th√¢m ni√™n.",
                        "C. How far: Bao xa.",
                        "D. How: Nh∆∞ th·∫ø n√†o."
                    ],
                    translation: "\"Chi·∫øc TV n√†y d√πng ƒë∆∞·ª£c bao l√¢u r·ªìi?\" - \"N√≥ ƒë∆∞·ª£c 2 nƒÉm tu·ªïi.\"",
                    whyCorrect: "H·ªèi v·ªÅ tu·ªïi th·ªç c·ªßa v·∫≠t d√πng c·∫•u tr√∫c 'How old + be + subject?'.",
                    whyWrong: "Kh√¥ng d√πng How much v√¨ kh√¥ng h·ªèi gi√° ti·ªÅn ·ªü ƒë√¢y."
                }
            },
            {
                q: "11. \"_______ hours do you watch TV every day?\" - \"About 2 hours.\"",
                options: ["A. How much", "B. How many", "C. How long", "D. How far"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How much: Bao nhi√™u (danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c).",
                        "B. How many: Bao nhi√™u (danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu).",
                        "C. How long: Bao l√¢u.",
                        "D. How far: Bao xa."
                    ],
                    translation: "\"B·∫°n xem TV bao nhi√™u ti·∫øng m·ªói ng√†y?\" - \"Kho·∫£ng 2 ti·∫øng.\"",
                    whyCorrect: "V√¨ 'hours' l√† danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu -> d√πng 'How many'.",
                    whyWrong: "D√πng How long th√¨ kh√¥ng ƒëi k√®m danh t·ª´ 'hours' ngay sau ƒë√≥ (How long do you watch TV?)."
                }
            },
            {
                q: "12. \"_______ does a new TV cost?\" - \"About 500 dollars.\"",
                options: ["A. How many", "B. How much", "C. How long", "D. How"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How many: Bao nhi√™u (s·ªë l∆∞·ª£ng).",
                        "B. How much: Bao nhi√™u (gi√° ti·ªÅn).",
                        "C. How long: Bao l√¢u.",
                        "D. How: Nh∆∞ th·∫ø n√†o."
                    ],
                    translation: "\"M·ªôt chi·∫øc TV m·ªõi gi√° bao nhi√™u?\" - \"Kho·∫£ng 500 ƒë√¥ la.\"",
                    whyCorrect: "ƒê·ªông t·ª´ 'cost' (tr·ªã gi√°) ƒëi k√®m v·ªõi 'How much' ƒë·ªÉ h·ªèi gi√° ti·ªÅn.",
                    whyWrong: "How many d√πng cho s·ªë l∆∞·ª£ng ƒë·ªì v·∫≠t ƒë·∫øm ƒë∆∞·ª£c, kh√¥ng d√πng cho ƒë∆°n gi√° t·ªïng qu√°t."
                }
            },
            {
                q: "13. \"_______ do you watch sports on TV?\" - \"Twice a week.\"",
                options: ["A. How long", "B. How far", "C. How often", "D. When"],
                correct: 2,
                explanation: {
                    analysis: [
                        "A. How long: Bao l√¢u.",
                        "B. How far: Bao xa.",
                        "C. How often: Bao l√¢u m·ªôt l·∫ßn (h·ªèi t·∫ßn su·∫•t).",
                        "D. When: Khi n√†o."
                    ],
                    translation: "\"B·∫°n c√≥ th∆∞·ªùng xem th·ªÉ thao tr√™n TV kh√¥ng?\" - \"Hai l·∫ßn m·ªôt tu·∫ßn.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi 'Twice a week' ch·ªâ m·ª©c ƒë·ªô th∆∞·ªùng xuy√™n -> d√πng 'How often'.",
                    whyWrong: "When ch·ªâ h·ªèi m·ªëc th·ªùi gian, kh√¥ng nh·∫•n m·∫°nh t·∫ßn su·∫•t."
                }
            },
            {
                q: "14. \"_______ is the TV shop from here?\" - \"About 2 kilometers.\"",
                options: ["A. How long", "B. How far", "C. How much", "D. How"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How long: Bao l√¢u.",
                        "B. How far: Bao xa (h·ªèi kho·∫£ng c√°ch).",
                        "C. How much: Bao nhi√™u.",
                        "D. How: Nh∆∞ th·∫ø n√†o."
                    ],
                    translation: "\"C·ª≠a h√†ng TV c√°ch ƒë√¢y bao xa?\" - \"Kho·∫£ng 2 ki-l√¥-m√©t.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi '2 kilometers' l√† ƒë∆°n v·ªã ƒëo kho·∫£ng c√°ch -> d√πng 'How far'.",
                    whyWrong: "How long h·ªèi v·ªÅ th·ªùi gian ho·∫∑c ƒë·ªô d√†i v·∫≠t l√Ω, kh√¥ng d√πng cho kho·∫£ng c√°ch l·ªô tr√¨nh."
                }
            },
            {
                q: "15. \"_______ is each episode of this series?\" - \"45 minutes.\"",
                options: ["A. How far", "B. How long", "C. How much", "D. When"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How far: Bao xa.",
                        "B. How long: Bao l√¢u (ƒë·ªô d√†i th·ªùi gian).",
                        "C. How much: Bao nhi√™u.",
                        "D. When: Khi n√†o."
                    ],
                    translation: "\"M·ªói t·∫≠p phim c·ªßa b·ªô n√†y d√†i bao l√¢u?\" - \"45 ph√∫t.\"",
                    whyCorrect: "Tr·∫£ l·ªùi b·∫±ng kho·∫£ng th·ªùi gian '45 minutes' -> d√πng 'How long'.",
                    whyWrong: "When d√πng ƒë·ªÉ h·ªèi th·ªùi ƒëi·ªÉm b·∫Øt ƒë·∫ßu/k·∫øt th√∫c c·ª• th·ªÉ."
                }
            },
            {
                q: "16. \"_______ color is your TV?\" - \"It's black.\"",
                options: ["A. Which", "B. What", "C. Where", "D. Who"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. Which: C√°i n√†o.",
                        "B. What: G√¨/C√°i g√¨.",
                        "C. Where: ·ªû ƒë√¢u.",
                        "D. Who: Ai."
                    ],
                    translation: "\"TV c·ªßa b·∫°n m√†u g√¨?\" - \"N√≥ m√†u ƒëen.\"",
                    whyCorrect: "C·∫•u tr√∫c 'What + noun' (What color) l√† c√°ch h·ªèi th√¥ng d·ª•ng v·ªÅ ƒë·∫∑c ƒëi·ªÉm.",
                    whyWrong: "Which color ch·ªâ d√πng khi c√≥ danh s√°ch m√†u cho s·∫µn ƒë·ªÉ ch·ªçn."
                }
            },
            {
                q: "17. \"_______ presents the weather forecast?\" - \"Mr. Johnson does.\"",
                options: ["A. Who", "B. What", "C. Why", "D. When"],
                correct: 0,
                explanation: {
                    analysis: [
                        "A. Who: Ai.",
                        "B. What: C√°i g√¨.",
                        "C. Why: T·∫°i sao.",
                        "D. When: Khi n√†o."
                    ],
                    translation: "\"Ai d·∫´n ch∆∞∆°ng tr√¨nh d·ª± b√°o th·ªùi ti·∫øt?\" - \"√îng Johnson d·∫´n.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi l√† t√™n ng∆∞·ªùi c·ª• th·ªÉ -> d√πng 'Who'.",
                    whyWrong: "C√°c t·ª´ kh√°c kh√¥ng h·ªèi v·ªÅ ch·ªß th·ªÉ th·ª±c hi·ªán h√†nh ƒë·ªông."
                }
            },
            {
                q: "18. \"_______ do you watch TV?\" - \"After dinner.\"",
                options: ["A. Where", "B. When", "C. Why", "D. Who"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. Where: ·ªû ƒë√¢u.",
                        "B. When: Khi n√†o.",
                        "C. Why: T·∫°i sao.",
                        "D. Who: Ai."
                    ],
                    translation: "\"Khi n√†o b·∫°n xem TV?\" - \"Sau b·ªØa t·ªëi.\"",
                    whyCorrect: "Tr·∫£ l·ªùi 'After dinner' l√† m·ªëc th·ªùi gian -> d√πng 'When'.",
                    whyWrong: "Where/Why/Who kh√¥ng kh·ªõp ng·ªØ nghƒ©a c√¢u tr·∫£ l·ªùi."
                }
            },
            {
                q: "19. \"_______ TV programs do you watch?\" - \"Three or four.\"",
                options: ["A. How much", "B. How many", "C. How long", "D. How far"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. How much: Bao nhi√™u (kh√¥ng ƒë·∫øm ƒë∆∞·ª£c).",
                        "B. How many: Bao nhi√™u (ƒë·∫øm ƒë∆∞·ª£c).",
                        "C. How long: Bao l√¢u.",
                        "D. How far: Bao xa."
                    ],
                    translation: "\"B·∫°n xem bao nhi√™u ch∆∞∆°ng tr√¨nh TV?\" - \"Ba ho·∫∑c b·ªën ch∆∞∆°ng tr√¨nh.\"",
                    whyCorrect: "V√¨ 'programs' l√† danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu -> d√πng 'How many'.",
                    whyWrong: "How much kh√¥ng ƒëi v·ªõi danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu."
                }
            },
            {
                q: "20. \"_______ do you like watching TV?\" - \"Because it's relaxing.\"",
                options: ["A. What", "B. Why", "C. When", "D. Where"],
                correct: 1,
                explanation: {
                    analysis: [
                        "A. What: C√°i g√¨.",
                        "B. Why: T·∫°i sao.",
                        "C. When: Khi n√†o.",
                        "D. Where: ·ªû ƒë√¢u."
                    ],
                    translation: "\"T·∫°i sao b·∫°n th√≠ch xem TV?\" - \"B·ªüi v√¨ n√≥ mang l·∫°i s·ª± th∆∞ gi√£n.\"",
                    whyCorrect: "C√¢u tr·∫£ l·ªùi 'Because...' gi·∫£i th√≠ch l√Ω do -> b·∫Øt bu·ªôc d√πng 'Why'.",
                    whyWrong: "What/When/Where kh√¥ng d√πng ƒë·ªÉ h·ªèi nguy√™n nh√¢n."
                }
            }
        ];

        let currentQ = 0;
        let score = 0;
        let answered = false;

        // Audio Context for sound effects
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(freq, type, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playCorrect() { playSound(880, 'sine', 0.3); }
        function playWrong() { playSound(220, 'square', 0.5); }

        function renderQuestion() {
            const data = quizData[currentQ];
            const container = document.getElementById('quizContainer');
            answered = false;

            let optionsHtml = data.options.map((opt, index) => `
                <button class="option-btn" onclick="checkAnswer(${index}, this)">
                    ${opt}
                </button>
            `).join('');

            container.innerHTML = `
                <div class="card" id="card-${currentQ}">
                    <div class="question-text">${data.q}</div>
                    <div class="options-grid">
                        ${optionsHtml}
                    </div>
                    <div class="explanation-box" id="explanation">
                        <div class="explanation-title">
                            <span>üí° C√¥ Mai An gi·∫£i th√≠ch:</span>
                        </div>
                        <div style="margin-bottom:10px;"><strong>1. Ph√¢n t√≠ch 4 ƒë√°p √°n:</strong></div>
                        <ul style="padding-left:20px; margin-bottom:15px;">
                            ${data.explanation.analysis.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                        <div style="margin-bottom:10px;"><strong>2. D·ªãch nghƒ©a to√†n c√¢u:</strong> <em>${data.explanation.translation}</em></div>
                        <div style="margin-bottom:10px;"><strong>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</strong></div>
                        <p style="margin-bottom:10px;">${data.explanation.whyCorrect}</p>
                        <p><strong>4. T·∫°i sao lo·∫°i ƒë√°p √°n kia?</strong> ${data.explanation.whyWrong}</p>
                    </div>
                    <div class="nav-buttons" id="navButtons" style="display:none">
                        <button class="btn-next" onclick="nextQuestion()">
                            ${currentQ === quizData.length - 1 ? 'Xem k·∫øt qu·∫£' : 'C√¢u ti·∫øp theo ‚ûú'}
                        </button>
                    </div>
                </div>
            `;
            
            updateProgress();
        }

        function checkAnswer(index, btn) {
            if (answered) return;
            answered = true;

            const data = quizData[currentQ];
            const allBtns = document.querySelectorAll('.option-btn');
            const expBox = document.getElementById('explanation');
            const navButtons = document.getElementById('navButtons');

            if (index === data.correct) {
                btn.classList.add('correct');
                score++;
                playCorrect();
                triggerConfetti();
            } else {
                btn.classList.add('wrong');
                allBtns[data.correct].classList.add('correct');
                document.getElementById(`card-${currentQ}`).classList.add('shake');
                playWrong();
            }

            expBox.style.display = 'block';
            navButtons.style.display = 'flex';
        }

        function nextQuestion() {
            currentQ++;
            if (currentQ < quizData.length) {
                renderQuestion();
            } else {
                showResult();
            }
        }

        function updateProgress() {
            const percent = ((currentQ) / quizData.length) * 100;
            document.getElementById('progressBar').style.width = percent + '%';
        }

        function showResult() {
            document.getElementById('progressBar').style.width = '100%';
            document.getElementById('result-modal').style.display = 'flex';
            document.getElementById('scoreValue').innerText = `${score}/${quizData.length}`;
            
            let comment = "";
            if(score === quizData.length) comment = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i Wh-Questions!";
            else if(score > 15) comment = "R·∫•t t·ªët! B·∫°n n·∫Øm ki·∫øn th·ª©c r·∫•t ch·∫Øc ch·∫Øn.";
            else if(score > 10) comment = "Kh√° t·ªët! H√£y ƒë·ªçc k·ªπ ph·∫ßn gi·∫£i th√≠ch c·ªßa c√¥ ƒë·ªÉ ti·∫øn b·ªô nh√©.";
            else comment = "ƒê·ª´ng n·∫£n ch√≠! H√£y √¥n l·∫°i t·ª´ ƒë·ªÉ h·ªèi v√† th·ª≠ l·∫°i nh√©.";
            
            document.getElementById('result-comment').innerText = comment;
            triggerConfetti();
        }

        // Simple Confetti
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function triggerConfetti() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 8 + 4,
                    color: `hsl(${Math.random() * 360}, 70%, 60%)`,
                    speed: Math.random() * 3 + 2,
                    angle: Math.random() * 6
                });
            }
            drawConfetti();
        }

        function drawConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => {
                p.y += p.speed;
                p.x += Math.sin(p.angle) * 2;
                ctx.fillStyle = p.color;
                ctx.fillRect(p.x, p.y, p.size, p.size);
                if (p.y > canvas.height) particles.splice(i, 1);
            });
            if (particles.length > 0) requestAnimationFrame(drawConfetti);
        }

        window.onload = renderQuestion;
    </script>

    <!-- Academic Glossary Section -->
    <div class="quiz-container">
        <div class="card">
            <h3 style="color:var(--primary-purple); font-weight:900;">üìö B·∫¢NG T·ª™ V·ª∞NG N√ÇNG CAO (GLOSSARY)</h3>
            <p style="font-size:0.9rem; color:#636e72; margin-bottom:15px;">C√°c t·ª´ v·ª±ng quan tr·ªçng xu·∫•t hi·ªán trong b√†i thi:</p>
            <div class="glossary-container">
                <table>
                    <thead>
                        <tr>
                            <th>T·ª´ v·ª±ng</th>
                            <th>Lo·∫°i t·ª´</th>
                            <th>Nghƒ©a ti·∫øng Vi·ªát</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Favorite</td>
                            <td>Adj</td>
                            <td>ƒê∆∞·ª£c y√™u th√≠ch nh·∫•t</td>
                        </tr>
                        <tr>
                            <td>Remote control</td>
                            <td>Noun</td>
                            <td>ƒêi·ªÅu khi·ªÉn t·ª´ xa</td>
                        </tr>
                        <tr>
                            <td>Episode</td>
                            <td>Noun</td>
                            <td>T·∫≠p phim</td>
                        </tr>
                        <tr>
                            <td>Series</td>
                            <td>Noun</td>
                            <td>Phim b·ªô / Chu·ªói ch∆∞∆°ng tr√¨nh</td>
                        </tr>
                        <tr>
                            <td>Horror movie</td>
                            <td>Noun</td>
                            <td>Phim kinh d·ªã</td>
                        </tr>
                        <tr>
                            <td>Weather forecast</td>
                            <td>Noun</td>
                            <td>D·ª± b√°o th·ªùi ti·∫øt</td>
                        </tr>
                        <tr>
                            <td>Present</td>
                            <td>Verb</td>
                            <td>D·∫´n ch∆∞∆°ng tr√¨nh / Tr√¨nh b√†y</td>
                        </tr>
                        <tr>
                            <td>Relaxing</td>
                            <td>Adj</td>
                            <td>Mang t√≠nh th∆∞ gi√£n</td>
                        </tr>
                        <tr>
                            <td>Kilometer</td>
                            <td>Noun</td>
                            <td>Ki-l√¥-m√©t (ƒê∆°n v·ªã kho·∫£ng c√°ch)</td>
                        </tr>
                        <tr>
                            <td>Cost</td>
                            <td>Verb</td>
                            <td>Tr·ªã gi√° / C√≥ gi√° l√†</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</body>
</html>
