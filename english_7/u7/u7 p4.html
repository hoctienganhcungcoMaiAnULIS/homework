<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        /* === DYNAMIC THEME & BASE STYLES === */
        :root {
            --primary-color: #3B82F6; /* Sky Blue */
            --secondary-color: #FBBF24; /* Amber/Yellow for contrast */
            --correct-color: #00D26A;
            --wrong-color: #FF4757;
            --bg-gradient: radial-gradient(circle at center, #E0F2FE 0%, #BAE6FD 100%);
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--bg-gradient),
                        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="250" height="250" opacity="0.3"><text x="40" y="80" font-size="40">üöó</text><text x="150" y="180" font-size="40">üö¶</text></svg>');
            height: 100vh;
            overflow: hidden; /* Prevent body scroll, use split panes */
            color: #333;
        }

        /* === TOP CONTROL BAR === */
        #top-bar {
            height: 60px;
            background-color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }

        .author-tag {
            font-weight: 800;
            color: var(--primary-color);
            background: #EFF6FF;
            padding: 5px 15px;
            border-radius: 20px;
            border: 2px solid var(--primary-color);
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        #timer-display {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--wrong-color);
            min-width: 90px;
            text-align: center;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 800;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 5px 0 #2563EB;
            transition: all 0.1s ease;
        }

        .btn:active {
            transform: translateY(5px);
            box-shadow: 0 0px 0 #2563EB;
        }

        .btn-pause { background-color: var(--secondary-color); box-shadow: 0 5px 0 #D97706; }
        .btn-pause:active { box-shadow: 0 0px 0 #D97706; }

        /* === SPLIT SCREEN LAYOUT === */
        #main-container {
            display: flex;
            height: calc(100vh - 60px);
            width: 100%;
        }

        .pane {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        #left-pane {
            border-right: 4px dashed #93C5FD;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(5px);
        }

        #right-pane {
            background: transparent;
        }

        /* Scrollbar Styling for Gamification feel */
        ::-webkit-scrollbar { width: 12px; }
        ::-webkit-scrollbar-track { background: #E0F2FE; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #93C5FD; border-radius: 10px; border: 3px solid #E0F2FE; }

        /* === READING PASSAGE STYLES === */
        .passage-box {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 0 #E2E8F0;
            margin-bottom: 30px;
            font-size: 1.15rem;
            line-height: 1.8;
            border: 2px solid #E2E8F0;
        }

        .passage-title {
            color: var(--primary-color);
            font-weight: 900;
            margin-bottom: 15px;
            font-size: 1.3rem;
            text-transform: uppercase;
        }

        .translate-btn {
            background: #8B5CF6;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 0 #6D28D9;
            margin-top: 15px;
            display: block;
        }
        .translate-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #6D28D9; }

        .translation-content {
            display: none;
            background: #F3F4F6;
            padding: 15px;
            border-radius: 15px;
            margin-top: 15px;
            border-left: 5px solid #8B5CF6;
            font-size: 1.05rem;
            color: #4B5563;
            font-style: italic;
        }

        /* === GLOSSARY STYLES === */
        .glossary-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid #E2E8F0;
        }
        .glossary-table th { background: var(--primary-color); color: white; padding: 12px; text-align: left; }
        .glossary-table td { background: white; padding: 12px; border-bottom: 1px solid #E2E8F0; font-weight: 600; }
        .glossary-table tr:last-child td { border-bottom: none; }

        /* === EXERCISE STYLES === */
        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 0 #E2E8F0;
            border: 2px solid #E2E8F0;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 20px;
            color: #1E293B;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .option-btn {
            background: #F8FAFC;
            border: 3px solid #CBD5E1;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            color: #334155;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            position: relative;
        }

        .option-btn:hover {
            transform: scale(1.02);
            border-color: var(--primary-color);
            background: #EFF6FF;
        }

        .option-btn.correct {
            background: var(--correct-color);
            color: white;
            border-color: #00A352;
            box-shadow: 0 5px 0 #00A352;
            pointer-events: none;
        }

        .option-btn.wrong {
            background: var(--wrong-color);
            color: white;
            border-color: #D63031;
            box-shadow: 0 5px 0 #D63031;
            pointer-events: none;
            animation: shake 0.4s;
        }

        /* Shake Animation */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-8px); }
            100% { transform: translateX(0); }
        }

        /* Explanation Box */
        .explanation-box {
            display: none;
            margin-top: 20px;
            background: #FFFBEB;
            border: 2px solid #FDE68A;
            border-radius: 15px;
            padding: 20px;
            animation: fadeIn 0.5s ease;
        }

        .explanation-box h4 {
            color: #D97706;
            font-weight: 900;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .submit-btn-container {
            text-align: center;
            margin: 40px 0;
        }

        .btn-submit {
            background: var(--secondary-color);
            color: #78350F;
            font-size: 1.5rem;
            padding: 15px 40px;
            box-shadow: 0 8px 0 #D97706;
            border-radius: 20px;
        }

        /* Modal Overlay */
        #result-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            z-index: 999;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 400px;
            box-shadow: 0 15px 0 rgba(0,0,0,0.1);
            animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes scaleIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .score-circle {
            width: 150px;
            height: 150px;
            background: var(--primary-color);
            color: white;
            font-size: 3rem;
            font-weight: 900;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            border: 8px solid #DBEAFE;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .feedback-text {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--correct-color);
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

    <div id="top-bar">
        <div class="author-tag">üë©‚Äçüè´ Gi√°o vi√™n: Ms Mai An ULIS</div>
        <div class="timer-container">
            <button id="btn-timer" class="btn" onclick="startTimer()">‚ñ∂ B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
            <button id="btn-pause" class="btn btn-pause" style="display:none;" onclick="togglePause()">‚è∏ T·∫°m D·ª´ng</button>
            <div id="timer-display">10:00</div>
        </div>
    </div>

    <div id="main-container">
        
        <div id="left-pane" class="pane">
            
            <div class="passage-box">
                <div class="passage-title">üìñ Passage 1: Driving Behaviors</div>
                <p>
                    Read the following passage and mark the letter A, B, C or D on your answer sheet to indicate the correct answer to each of the following questions from 31 to 36.<br><br>
                    Who are the best drivers? According to a recent survey, young and inexperienced drivers are the most likely to have an accident. Older drivers are more careful. Young men have the worst accident records of all. They often choose faster cars with bigger engines. One of the most interesting facts in the survey is that passengers have an effect on the driver. When young male drivers have their friends in the car, their driving becomes worse. When their wife or girlfriend is in the car, however, their driving is better. But this is not true for women. Their driving is more dangerous when their husband or boyfriend is in the car. However, if their small children are riding in the car, they drive more slowly and safely.
                </p>
                <button class="translate-btn" onclick="toggleTranslation('trans1')">‚ú® B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div id="trans1" class="translation-content">
                    Ai l√† nh·ªØng ng∆∞·ªùi l√°i xe gi·ªèi nh·∫•t? Theo m·ªôt cu·ªôc kh·∫£o s√°t g·∫ßn ƒë√¢y, nh·ªØng t√†i x·∫ø tr·∫ª v√† thi·∫øu kinh nghi·ªám l√† nh·ªØng ng∆∞·ªùi d·ªÖ g·∫∑p tai n·∫°n nh·∫•t. Nh·ªØng ng∆∞·ªùi l√°i xe l·ªõn tu·ªïi th√¨ c·∫©n th·∫≠n h∆°n. Nam gi·ªõi tr·∫ª tu·ªïi c√≥ h·ªì s∆° tai n·∫°n t·ªá nh·∫•t trong t·∫•t c·∫£. H·ªç th∆∞·ªùng ch·ªçn nh·ªØng chi·∫øc √¥ t√¥ ch·∫°y nhanh h∆°n v·ªõi ƒë·ªông c∆° l·ªõn h∆°n. M·ªôt trong nh·ªØng s·ª± th·∫≠t th√∫ v·ªã nh·∫•t trong cu·ªôc kh·∫£o s√°t l√† h√†nh kh√°ch c√≥ ·∫£nh h∆∞·ªüng ƒë·∫øn ng∆∞·ªùi l√°i xe. Khi c√°c nam t√†i x·∫ø tr·∫ª c√≥ b·∫°n b√® ƒëi c√πng tr√™n xe, vi·ªác l√°i xe c·ªßa h·ªç tr·ªü n√™n t·ªá h∆°n. Tuy nhi√™n, khi v·ª£ ho·∫∑c b·∫°n g√°i c·ªßa h·ªç ·ªü tr√™n xe, vi·ªác l√°i xe c·ªßa h·ªç l·∫°i t·ªët h∆°n. Nh∆∞ng ƒëi·ªÅu n√†y kh√¥ng ƒë√∫ng v·ªõi ph·ª• n·ªØ. Vi·ªác l√°i xe c·ªßa h·ªç tr·ªü n√™n nguy hi·ªÉm h∆°n khi ch·ªìng ho·∫∑c b·∫°n trai c·ªßa h·ªç ·ªü tr√™n xe. D√π v·∫≠y, n·∫øu c√≥ tr·∫ª nh·ªè ƒëi c√πng tr√™n xe, h·ªç s·∫Ω l√°i xe ch·∫≠m v√† an to√†n h∆°n.
                </div>

                <table class="glossary-table">
                    <thead><tr><th>Vocabulary</th><th>Type</th><th>Vietnamese Meaning</th></tr></thead>
                    <tbody>
                        <tr><td>Inexperienced</td><td>(adj)</td><td>Thi·∫øu kinh nghi·ªám, non n·ªõt</td></tr>
                        <tr><td>Accident</td><td>(n)</td><td>Tai n·∫°n, s·ª± c·ªë</td></tr>
                        <tr><td>Record</td><td>(n)</td><td>H·ªì s∆°, k·ª∑ l·ª•c, th√†nh t√≠ch</td></tr>
                        <tr><td>Passenger</td><td>(n)</td><td>H√†nh kh√°ch (ng∆∞·ªùi ƒëi c√πng)</td></tr>
                        <tr><td>Effect</td><td>(n)</td><td>·∫¢nh h∆∞·ªüng, t√°c ƒë·ªông</td></tr>
                        <tr><td>Behavior</td><td>(n)</td><td>H√†nh vi, c√°ch c∆∞ x·ª≠</td></tr>
                        <tr><td>Survey</td><td>(n)</td><td>Cu·ªôc kh·∫£o s√°t, ƒëi·ªÅu tra</td></tr>
                        <tr><td>Dangerous</td><td>(adj)</td><td>Nguy hi·ªÉm, kh√¥ng an to√†n</td></tr>
                        <tr><td>Safely</td><td>(adv)</td><td>M·ªôt c√°ch an to√†n</td></tr>
                        <tr><td>Engine</td><td>(n)</td><td>ƒê·ªông c∆°, c·ªó m√°y</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="passage-box">
                <div class="passage-title">üìñ Passage 2: Traffic Jams</div>
                <p>
                    Four phrases/ sentences have been removed from the text below. For each question, mark the letter A, B, C or D on your answer sheet to indicate the correct option that best fits each of the numbered blanks from 37 to 40.<br><br>
                    For many years, Raze has been driving to work and back every weekday. Every morning, on his way to work, especially during the rush hour, <strong>(37) ......</strong>. The situation is even worse in the evening when he drives home. All the traffic comes to stop when there is an accident or a car has broken down and blocks a lane. In winter, <strong>(38) ......</strong>, many car accidents with injuries can take a number of hours to clear the road. <strong>(39) ......</strong>, he listens to music on the radio to calm his nerves. His boss and his wife know that if he is late, <strong>(40) ......</strong>.
                </p>
                <button class="translate-btn" onclick="toggleTranslation('trans2')">‚ú® B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div id="trans2" class="translation-content">
                    Trong nhi·ªÅu nƒÉm, Raze ƒë√£ l√°i xe ƒëi l√†m v√† tr·ªü v·ªÅ nh√† v√†o m·ªói ng√†y trong tu·∫ßn. M·ªói bu·ªïi s√°ng, tr√™n ƒë∆∞·ªùng ƒëi l√†m, ƒë·∫∑c bi·ªát l√† trong gi·ªù cao ƒëi·ªÉm, <strong>(37) c√°c ƒë∆∞·ªùng cao t·ªëc th∆∞·ªùng r·∫•t ƒë√¥ng ƒë√∫c</strong>. T√¨nh h√¨nh th·∫≠m ch√≠ c√≤n t·ªá h∆°n v√†o bu·ªïi t·ªëi khi anh ·∫•y l√°i xe v·ªÅ nh√†. M·ªçi ph∆∞∆°ng ti·ªán giao th√¥ng ƒë·ªÅu ph·∫£i d·ª´ng l·∫°i khi c√≥ tai n·∫°n ho·∫∑c m·ªôt chi·∫øc xe b·ªã h·ªèng v√† ch·∫Øn ngang m·ªôt l√†n ƒë∆∞·ªùng. V√†o m√πa ƒë√¥ng, <strong>(38) ƒë·∫∑c bi·ªát l√† khi tr·ªùi c√≥ tuy·∫øt</strong>, nhi·ªÅu v·ª• tai n·∫°n xe h∆°i c√≥ ng∆∞·ªùi b·ªã th∆∞∆°ng c√≥ th·ªÉ m·∫•t v√†i gi·ªù ƒë·ªÉ d·ªçn d·∫πp ƒë∆∞·ªùng. <strong>(39) Khi Raza b·ªã k·∫πt trong m·ªôt v·ª• t·∫Øc ƒë∆∞·ªùng nghi√™m tr·ªçng</strong>, anh ·∫•y nghe nh·∫°c tr√™n ƒë√†i ƒë·ªÉ l√†m d·ªãu th·∫ßn kinh (gi·ªØ b√¨nh tƒ©nh). S·∫øp v√† v·ª£ anh ·∫•y bi·∫øt r·∫±ng n·∫øu anh ·∫•y ƒë·∫øn tr·ªÖ, <strong>(40) anh ·∫•y c√≥ l·∫Ω ƒëang b·ªã k·∫πt xe</strong>.
                </div>

                <table class="glossary-table">
                    <thead><tr><th>Vocabulary</th><th>Type</th><th>Vietnamese Meaning</th></tr></thead>
                    <tbody>
                        <tr><td>Weekday</td><td>(n)</td><td>Ng√†y trong tu·∫ßn (T2 - T6)</td></tr>
                        <tr><td>Rush hour</td><td>(n)</td><td>Gi·ªù cao ƒëi·ªÉm</td></tr>
                        <tr><td>Highway</td><td>(n)</td><td>ƒê∆∞·ªùng cao t·ªëc</td></tr>
                        <tr><td>Crowded</td><td>(adj)</td><td>ƒê√¥ng ƒë√∫c, ch·∫≠t ch·ªôi</td></tr>
                        <tr><td>Situation</td><td>(n)</td><td>T√¨nh hu·ªëng, ho√†n c·∫£nh</td></tr>
                        <tr><td>Break down</td><td>(phr. v)</td><td>B·ªã h·ªèng (m√°y m√≥c, xe c·ªô)</td></tr>
                        <tr><td>Block</td><td>(v)</td><td>Ch·∫∑n, c·∫£n tr·ªü, l√†m k·∫πt</td></tr>
                        <tr><td>Injury</td><td>(n)</td><td>Ch·∫•n th∆∞∆°ng, v·∫øt th∆∞∆°ng</td></tr>
                        <tr><td>Calm</td><td>(v)</td><td>L√†m d·ªãu, tr·∫•n an</td></tr>
                        <tr><td>Nerve</td><td>(n)</td><td>D√¢y th·∫ßn kinh (calm nerves: gi·ªØ b√¨nh tƒ©nh)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="right-pane" class="pane">
            <div id="quiz-container">
                </div>

            <div class="submit-btn-container">
                <button class="btn btn-submit" onclick="submitQuiz()">üèÜ N·ªòP B√ÄI T·ªîNG K·∫æT</button>
            </div>
        </div>
    </div>

    <div id="result-modal">
        <div class="modal-content">
            <h2 style="color: #1E293B; margin-bottom: 20px;">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-circle" id="final-score">0/10</div>
            <div class="feedback-text" id="feedback-msg">Tuy·ªát v·ªùi!</div>
            <p style="color: #64748B; margin-bottom: 20px;">Ms Mai An r·∫•t t·ª± h√†o v·ªÅ b·∫°n! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt ·ªü b√™n c·∫°nh nh√©.</p>
            <button class="btn" style="width: 100%;" onclick="closeModal()">ƒê√≥ng & Xem l·∫°i b√†i</button>
        </div>
    </div>

    <script>
        // === AUDIO SYNTHESIZER (No external links needed, 100% reliable) ===
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // Ding sound
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else {
                // Buzzer sound (t√©o t√®o t√®o)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // === TIMER LOGIC ===
        let timeInSeconds = 10 * 60; 
        let timerInterval;
        let isTimerRunning = false;

        function updateTimerDisplay() {
            const m = Math.floor(timeInSeconds / 60).toString().padStart(2, '0');
            const s = (timeInSeconds % 60).toString().padStart(2, '0');
            document.getElementById('timer-display').innerText = `${m}:${s}`;
        }

        function startTimer() {
            document.getElementById('btn-timer').style.display = 'none';
            document.getElementById('btn-pause').style.display = 'inline-block';
            isTimerRunning = true;
            
            timerInterval = setInterval(() => {
                if(!isTimerRunning) return;
                timeInSeconds--;
                updateTimerDisplay();
                if(timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    alert("‚è∞ ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                }
            }, 1000);
        }

        function togglePause() {
            isTimerRunning = !isTimerRunning;
            document.getElementById('btn-pause').innerText = isTimerRunning ? "‚è∏ T·∫°m D·ª´ng" : "‚ñ∂ Ti·∫øp T·ª•c";
            document.getElementById('btn-pause').style.backgroundColor = isTimerRunning ? "var(--secondary-color)" : "var(--primary-color)";
        }

        function toggleTranslation(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }

        // === QUIZ DATA & MS MAI AN'S EXPLANATIONS ===
        const questions = [
            {
                id: 31,
                text: "Question 31. What is the main idea of the passage?",
                options: [
                    "Older drivers are more careful than younger drivers.",
                    "Passengers can influence a driver‚Äôs behavior.",
                    "Young men prefer faster cars with bigger engines.",
                    "Women drive more safely when their children are in the car."
                ],
                correct: "Passengers can influence a driver‚Äôs behavior.",
                explanation: `
                    <strong>1. Ph√¢n t√≠ch D·ªãch nghƒ©a:</strong> C√¢u h·ªèi t√¨m √ù ch√≠nh c·ªßa ƒëo·∫°n vƒÉn.<br>
                    <strong>2. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</strong><br>
                    M·∫∑c d√π c√°c ƒë√°p √°n kh√°c ƒë·ªÅu c√≥ xu·∫•t hi·ªán trong b√†i, nh∆∞ng ch√∫ng ch·ªâ l√† √Ω nh·ªè b·ªï tr·ª£. C√¢u ch·ªët bao qu√°t to√†n b·ªô b√†i n·∫±m ·ªü: <em>"One of the most interesting facts in the survey is that passengers have an effect on the driver."</em> (H√†nh kh√°ch c√≥ ·∫£nh h∆∞·ªüng ƒë·∫øn ng∆∞·ªùi l√°i xe). Sau ƒë√≥, nguy√™n ƒëo·∫°n vƒÉn ph√≠a sau ƒë∆∞a ra h√†ng lo·∫°t d·∫´n ch·ª©ng v·ªÅ vi·ªác nam/n·ªØ l√°i xe th·∫ø n√†o khi ch·ªü b·∫°n b√®, ng∆∞·ªùi y√™u, ho·∫∑c tr·∫ª con.<br>
                    => <strong>"Passengers can influence a driver‚Äôs behavior"</strong> (H√†nh kh√°ch c√≥ th·ªÉ ·∫£nh h∆∞·ªüng t·ªõi h√†nh vi c·ªßa t√†i x·∫ø) l√† √Ω ch√≠nh x√°c nh·∫•t bao tr√πm ƒëo·∫°n!
                `
            },
            {
                id: 32,
                text: "Question 32. Which word is closest in meaning to ‚Äúeffect‚Äù as used in the text?",
                options: ["Impact", "problem", "accident", "safety"],
                correct: "Impact",
                explanation: `
                    <strong>1. Ph√¢n t√≠ch T·ª´ v·ª±ng:</strong><br>
                    - effect (n): ·∫£nh h∆∞·ªüng, t√°c ƒë·ªông.<br>
                    - impact (n): t√°c ƒë·ªông, ·∫£nh h∆∞·ªüng m·∫°nh.<br>
                    - problem (n): v·∫•n ƒë·ªÅ.<br>
                    - accident (n): tai n·∫°n.<br>
                    - safety (n): s·ª± an to√†n.<br>
                    <strong>2. T·∫°i sao ch·ªçn?</strong> R√µ r√†ng "effect" mang nghƒ©a t∆∞∆°ng ƒë·ªìng nh·∫•t v·ªõi "impact". C·∫£ hai t·ª´ ƒë·ªÅu d√πng ƒë·ªÉ ch·ªâ s·ª± t√°c ƒë·ªông c·ªßa y·∫øu t·ªë n√†y l√™n y·∫øu t·ªë kh√°c.
                `
            },
            {
                id: 33,
                text: "Question 33. According to the survey, who is the most likely to have an accident?",
                options: [
                    "Young and inexperienced drivers",
                    "Old and inexperienced drivers",
                    "Young and old female drivers",
                    "Old and inexperienced men"
                ],
                correct: "Young and inexperienced drivers",
                explanation: `
                    <strong>1. D·ªãch c√¢u h·ªèi:</strong> Theo kh·∫£o s√°t, ai l√† ng∆∞·ªùi d·ªÖ g·∫∑p tai n·∫°n nh·∫•t?<br>
                    <strong>2. D·∫´n ch·ª©ng r√†nh r√†nh trong b√†i:</strong> Ngay c√¢u th·ª© 2 c·ªßa b√†i ƒë·ªçc: <em>"According to a recent survey, <strong>young and inexperienced drivers</strong> are the most likely to have an accident."</em> (Theo kh·∫£o s√°t g·∫ßn ƒë√¢y, t√†i x·∫ø tr·∫ª v√† thi·∫øu kinh nghi·ªám l√† ng∆∞·ªùi d·ªÖ g·∫∑p tai n·∫°n nh·∫•t). Nh√¨n l√† khoanh lu√¥n nha c√°c tr√≤!
                `
            },
            {
                id: 34,
                text: "Question 34. Who has an effect on drivers?",
                options: ["Parents", "policemen", "families", "passengers"],
                correct: "passengers",
                explanation: `
                    <strong>1. D·ªãch c√¢u h·ªèi:</strong> Ai c√≥ ·∫£nh h∆∞·ªüng l√™n t√†i x·∫ø?<br>
                    <strong>2. D·∫´n ch·ª©ng:</strong> C√¢u th·ª© 5 trong b√†i: <em>"One of the most interesting facts in the survey is that <strong>passengers</strong> have an effect on the driver."</em><br>
                    => Ch·ªçn "passengers" (h√†nh kh√°ch).
                `
            },
            {
                id: 35,
                text: "Question 35. When young male drivers have their wife or girlfriend in the car, they drive ____.",
                options: ["Worse", "slowly", "better", "fast"],
                correct: "better",
                explanation: `
                    <strong>1. D·ªãch c√¢u h·ªèi:</strong> Khi nam t√†i x·∫ø tr·∫ª c√≥ v·ª£ ho·∫∑c b·∫°n g√°i tr√™n xe, h·ªç l√°i xe nh∆∞ th·∫ø n√†o?<br>
                    <strong>2. D·∫´n ch·ª©ng:</strong> H√£y qu√©t m·∫Øt t√¨m t·ª´ kh√≥a "wife or girlfriend". B√†i vi·∫øt ghi r√µ: <em>"When their wife or girlfriend is in the car, however, their driving is <strong>better</strong>."</em><br>
                    => C·ª© ch·ªü b·∫°n g√°i l√† t√¢m l√Ω mu·ªën th·ªÉ hi·ªán s·ª± ga-lƒÉng v√† an to√†n n√™n l√°i t·ªët h∆°n (better) nh√©!
                `
            },
            {
                id: 36,
                text: "Question 36. The word ‚Äúthey‚Äù in the last sentence refers to _________.",
                options: ["Women", "husbands", "boyfriends", "small children"],
                correct: "Women",
                explanation: `
                    <strong>1. Ng·ªØ ph√°p Quy chi·∫øu (Reference):</strong> ƒê·∫°i t·ª´ "they" s·∫Ω thay th·∫ø cho danh t·ª´ s·ªë nhi·ªÅu ·ªü c√¢u ngay tr∆∞·ªõc n√≥ ho·∫∑c v·∫ø tr∆∞·ªõc n√≥.<br>
                    <strong>2. Ph√¢n t√≠ch c√¢u:</strong> D√≤ t·ª´ c√¢u tr∆∞·ªõc: <em>"But this is not true for <strong>women</strong>. Their driving is more dangerous... However, if their small children are riding in the car, <strong>they</strong> drive more slowly and safely."</em><br>
                    "They" ·ªü ƒë√¢y th·ª±c hi·ªán h√†nh ƒë·ªông "drive" (l√°i xe). Tr·∫ª con (small children) th√¨ kh√¥ng th·ªÉ l√°i xe ƒë∆∞·ª£c, n√™n "they" ·ªü ƒë√¢y ch·∫Øc ch·∫Øn ch·ªâ "Women" (Nh·ªØng ng∆∞·ªùi ph·ª• n·ªØ).
                `
            },
            {
                id: 37,
                text: "Question 37. Every morning, on his way to work, especially during the rush hour, ________.",
                options: [
                    "he is probably stuck a traffic",
                    "the highways are usually crowded",
                    "particularly when it snows",
                    "When Raza is stuck in a heavy traffic jam"
                ],
                correct: "the highways are usually crowded",
                explanation: `
                    <strong>1. Ph√¢n t√≠ch Ng·ªØ c·∫£nh:</strong> C√¢u ƒëang m√¥ t·∫£ vi·ªác ƒëi l√†m bu·ªïi s√°ng, ƒë·∫∑c bi·ªát v√†o gi·ªù cao ƒëi·ªÉm ("rush hour").<br>
                    <strong>2. Lo·∫°i tr·ª´:</strong> Gi·ªù cao ƒëi·ªÉm th√¨ ƒë∆∞∆°ng nhi√™n ƒë∆∞·ªùng s√° ph·∫£i ƒë√¥ng ƒë√∫c. ƒê√°p √°n "the highways are usually crowded" (c√°c ƒë∆∞·ªùng cao t·ªëc th∆∞·ªùng ƒë√¥ng ƒë√∫c) gh√©p v√†o v·ª´a kh√≠t v·ªÅ nghƒ©a v√† ng·ªØ ph√°p (t·∫°o th√†nh m·ªánh ƒë·ªÅ ch√≠nh cho tr·∫°ng ng·ªØ ch·ªâ th·ªùi gian ph√≠a tr∆∞·ªõc).
                `
            },
            {
                id: 38,
                text: "Question 38. In winter, ________, many car accidents with injuries can take a number of hours to clear the road.",
                options: [
                    "he is probably stuck a traffic",
                    "the highways are usually crowded",
                    "particularly when it snows",
                    "When Raza is stuck in a heavy traffic jam"
                ],
                correct: "particularly when it snows",
                explanation: `
                    <strong>1. Key word:</strong> "In winter" (V√†o m√πa ƒë√¥ng).<br>
                    <strong>2. Li√™n k·∫øt logic:</strong> M√πa ƒë√¥ng th√¨ li√™n quan ch·∫∑t ch·∫Ω ƒë·∫øn hi·ªán t∆∞·ª£ng th·ªùi ti·∫øt n√†o? Ch√≠nh l√† "snows" (tuy·∫øt r∆°i).<br>
                    => Gh√©p v√†o: V√†o m√πa ƒë√¥ng, <strong>ƒë·∫∑c bi·ªát l√† khi tr·ªùi c√≥ tuy·∫øt</strong>, nhi·ªÅu v·ª• tai n·∫°n... C√¢u v√¥ c√πng h·ª£p l√Ω v·ªÅ m·∫∑t logic t·ª± nhi√™n!
                `
            },
            {
                id: 39,
                text: "Question 39. ________, he listens to music on the radio to calm his nerves.",
                options: [
                    "he is probably stuck a traffic",
                    "the highways are usually crowded",
                    "particularly when it snows",
                    "When Raza is stuck in a heavy traffic jam"
                ],
                correct: "When Raza is stuck in a heavy traffic jam",
                explanation: `
                    <strong>1. Ph√¢n t√≠ch:</strong> Ph√≠a sau l√† h√†nh ƒë·ªông "he listens to music... to calm his nerves" (anh ·∫•y nghe nh·∫°c ƒë·ªÉ gi·ªØ b√¨nh tƒ©nh). Khi n√†o ng∆∞·ªùi ta c·∫ßn b√¨nh tƒ©nh khi ƒëang l√°i xe? Ch√≠nh l√† l√∫c b·ªã t·∫Øc ƒë∆∞·ªùng!<br>
                    <strong>2. Gh√©p v√†o:</strong> <strong>Khi Raza b·ªã k·∫πt trong m·ªôt v·ª• t·∫Øc ƒë∆∞·ªùng nghi√™m tr·ªçng</strong>, anh ·∫•y nghe nh·∫°c... (H·ª£p l√Ω 100%).
                `
            },
            {
                id: 40,
                text: "Question 40. His boss and his wife know that if he is late, ________.",
                options: [
                    "he is probably stuck a traffic",
                    "the highways are usually crowded",
                    "particularly when it snows",
                    "When Raza is stuck in a heavy traffic jam"
                ],
                correct: "he is probably stuck a traffic",
                explanation: `
                    <strong>1. C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1:</strong> "if he is late" (n·∫øu anh ·∫•y tr·ªÖ). Tr·ªÖ th√¨ nguy√™n nh√¢n do ƒë√¢u theo b√†i ƒë·ªçc n√†y? Do t·∫Øc ƒë∆∞·ªùng!<br>
                    <strong>2. Gh√©p v√†o:</strong> S·∫øp v√† v·ª£ anh ·∫•y bi·∫øt r·∫±ng n·∫øu anh ·∫•y tr·ªÖ, <strong>anh ·∫•y c√≥ l·∫Ω ƒëang b·ªã k·∫πt xe</strong> (he is probably stuck a traffic). C·ª±c chu·∫©n x√°c!
                `
            }
        ];

        let score = 0;
        let answeredQuestions = 0;

        // Shuffle Array Function
        function shuffleArray(array) {
            let curId = array.length, temp, randId;
            while (0 !== curId) {
                randId = Math.floor(Math.random() * curId);
                curId -= 1;
                temp = array[curId];
                array[curId] = array[randId];
                array[randId] = temp;
            }
            return array;
        }

        // Render Questions
        const quizContainer = document.getElementById('quiz-container');

        questions.forEach((q, index) => {
            const shuffledOptions = shuffleArray([...q.options]); // Shuffle a copy
            
            let optionsHTML = '';
            shuffledOptions.forEach(opt => {
                optionsHTML += `<div class="option-btn" onclick="checkAnswer(this, ${q.id}, '${opt.replace(/'/g, "\\'")}')">${opt}</div>`;
            });

            const qHTML = `
                <div class="question-card" id="qcard-${q.id}">
                    <div class="question-text">${q.text}</div>
                    <div class="options-grid">
                        ${optionsHTML}
                    </div>
                    <div class="explanation-box" id="exp-${q.id}">
                        <h4>üí° Ms Mai An Gi·∫£i Th√≠ch:</h4>
                        ${q.explanation}
                    </div>
                </div>
            `;
            quizContainer.innerHTML += qHTML;
        });

        // Check Answer Logic
        function checkAnswer(element, qId, selectedOption) {
            const questionData = questions.find(q => q.id === qId);
            const parentCard = document.getElementById(`qcard-${qId}`);
            const allOptions = parentCard.querySelectorAll('.option-btn');
            
            // Disable all options in this question
            allOptions.forEach(btn => btn.style.pointerEvents = 'none');

            if (selectedOption === questionData.correct) {
                // CORRECT
                element.classList.add('correct');
                playSound('correct');
                score++;
                
                // Confetti trigger
                const rect = element.getBoundingClientRect();
                confetti({
                    particleCount: 50,
                    spread: 60,
                    origin: { 
                        x: (rect.left + rect.width / 2) / window.innerWidth, 
                        y: (rect.top + rect.height / 2) / window.innerHeight 
                    }
                });
            } else {
                // WRONG
                element.classList.add('wrong');
                playSound('wrong');
                
                // Highlight the correct one immediately
                allOptions.forEach(btn => {
                    if(btn.innerText === questionData.correct) {
                        btn.classList.add('correct');
                    }
                });
            }

            // Show explanation
            document.getElementById(`exp-${qId}`).style.display = 'block';
            answeredQuestions++;
        }

        // Final Submit Logic
        function submitQuiz() {
            if (answeredQuestions < questions.length) {
                if(!confirm("B·∫°n ch∆∞a ho√†n th√†nh t·∫•t c·∫£ c√°c c√¢u h·ªèi! B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i kh√¥ng?")) {
                    return;
                }
            }

            // Stop timer
            clearInterval(timerInterval);
            isTimerRunning = false;

            const modal = document.getElementById('result-modal');
            const scoreDisplay = document.getElementById('final-score');
            const feedbackMsg = document.getElementById('feedback-msg');

            scoreDisplay.innerText = `${score}/${questions.length}`;

            // Grading Logic
            if (score === questions.length) {
                feedbackMsg.innerText = "üåü Thi√™n t√†i xu·∫•t ch√∫ng! 100 ƒëi·ªÉm kh√¥ng c√≥ nh∆∞ng!";
                confetti({ particleCount: 150, spread: 100, origin: { y: 0.3 } });
            } else if (score >= questions.length * 0.7) {
                feedbackMsg.innerText = "üî• L√†m t·ªët l·∫Øm! C·ªë g·∫Øng ch√∫t n·ªØa l√† ho√†n h·∫£o!";
                confetti({ particleCount: 80, spread: 80, origin: { y: 0.4 } });
            } else if (score >= questions.length * 0.5) {
                feedbackMsg.innerText = "üí™ Kh√° khen! ƒê·ª´ng qu√™n xem l·∫°i l·ªói sai nh√©!";
            } else {
                feedbackMsg.innerText = "üìö C·ªë l√™n nh√©! Ms Mai An tin b·∫°n s·∫Ω l√†m t·ªët h∆°n ·ªü l·∫ßn sau!";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('result-modal').style.display = 'none';
        }
    </script>
</body>
</html>