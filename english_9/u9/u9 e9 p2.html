<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i t·∫≠p Ti·∫øng Anh 9 - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0; /* T√≠m h·ªìng */
            --secondary: #00C9A7; /* Xanh ng·ªçc */
            --correct: #00D26A; /* Xanh l√° */
            --wrong: #FF4757; /* ƒê·ªè cam */
            --bg: #F0F3F9;
            --card-bg: #FFFFFF;
            --text: #2C3A47;
            --shadow: 0 8px 0 rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(#d1d8e0 1px, transparent 1px);
            background-size: 20px 20px;
            color: var(--text);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.2);
            border: 4px solid var(--primary);
        }

        h1 {
            color: var(--primary);
            font-weight: 800;
            margin: 0;
            text-transform: uppercase;
            font-size: 1.8rem;
        }

        .teacher-name {
            font-family: 'Quicksand', sans-serif;
            color: var(--secondary);
            font-weight: 700;
            margin-top: 10px;
            font-size: 1.2rem;
        }

        /* EXERCISE CARD */
        .exercise-section {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 2px solid #e0e0e0;
        }

        .section-title {
            background: var(--primary);
            color: white;
            display: inline-block;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 700;
            margin-bottom: 20px;
            font-size: 1.1rem;
            box-shadow: 0 4px 0 #6c429c;
        }

        /* VISUAL RECREATIONS (IMAGES) */
        .sign-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .yellow-sign {
            background: #FFD700;
            border: 4px solid #F1C40F;
            padding: 15px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
            font-weight: bold;
            color: black;
            font-family: Arial, sans-serif;
        }
        
        .no-entry {
            width: 100px;
            height: 100px;
            border: 10px solid #FF0000;
            border-radius: 50%;
            position: relative;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .no-entry::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 100%;
            background: #FF0000;
            transform: rotate(45deg);
        }
        .no-entry-icon {
            font-size: 50px;
            font-weight: bold;
        }

        .library-notice {
            border: 3px solid #89CFF0;
            border-radius: 15px;
            padding: 15px;
            width: 100%;
            max-width: 350px;
            margin: 0 auto;
            text-align: center;
            background: white;
        }

        .handwritten-note {
            border: 3px solid black;
            border-radius: 20px;
            padding: 15px;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background: white;
            width: 100%;
            max-width: 350px;
            margin: 0 auto;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.1);
        }

        /* READING TEXT */
        .reading-text {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            line-height: 1.6;
            font-size: 1.05rem;
            border-left: 5px solid var(--secondary);
            margin-bottom: 20px;
            white-space: pre-wrap; /* Preserve formatting */
        }

        /* GLOSSARY TABLE */
        .glossary {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            margin-bottom: 25px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .glossary th {
            background: var(--secondary);
            color: white;
            padding: 10px;
            text-align: left;
        }

        .glossary td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            color: #555;
            font-size: 0.9rem;
        }

        .glossary tr:last-child td {
            border-bottom: none;
        }

        /* QUESTIONS */
        .question-block {
            margin-top: 30px;
            border-top: 2px dashed #e0e0e0;
            padding-top: 20px;
        }

        .q-title {
            font-weight: 800;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .q-number {
            background: var(--primary);
            color: white;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 0.9rem;
        }

        /* OPTIONS GRID */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-bottom: 6px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--text);
            cursor: pointer;
            transition: all 0.1s;
            text-align: left;
            position: relative;
        }

        .option-btn:hover {
            transform: scale(1.02);
            border-color: #d1d1d1;
        }

        .option-btn:active {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }

        /* STATES */
        .option-btn.correct {
            background-color: var(--correct);
            color: white;
            border-color: #00b85c;
            border-bottom-color: #008f47;
        }

        .option-btn.wrong {
            background-color: var(--wrong);
            color: white;
            border-color: #ff2e40;
            border-bottom-color: #d61c2d;
            animation: shake 0.5s;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        /* EXPLANATION BOX */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 20px;
            background: #fff4e6;
            border: 2px solid #ffd8a8;
            border-radius: 15px;
            padding: 20px;
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .exp-header {
            font-weight: 800;
            color: #d9480f;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .exp-content p {
            margin: 5px 0;
            line-height: 1.5;
        }

        .exp-label {
            font-weight: 700;
            color: var(--primary);
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        @keyframes pop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* SUBMIT BUTTON */
        .submit-container {
            text-align: center;
            margin-top: 40px;
        }

        .submit-btn {
            background: var(--secondary);
            color: white;
            font-size: 1.5rem;
            padding: 15px 50px;
            border: none;
            border-bottom: 8px solid #009e82;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 800;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            filter: brightness(1.1);
        }
        
        .submit-btn:active {
            transform: translateY(4px);
            border-bottom-width: 4px;
        }

        /* CONFETTI CANVAS */
        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            animation: pop 0.5s;
        }

        .score-display {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
        }
    </style>
</head>
<body>

<canvas id="confetti"></canvas>

<div class="container">
    <header>
        <h1>B√†i t·∫≠p Ti·∫øng Anh 9 (Global Success)</h1>
        <div class="teacher-name">Designed by Ms. Mai An ULIS</div>
    </header>

    <div class="exercise-section" id="ex1">
        <div class="section-title">Exercise 1: Signs & Notices</div>
        <p>Look at the sign or the notice. Choose the best answer (A, B, C or D).</p>

        <div class="question-block" id="q1-block">
            <div class="sign-container">
                <div class="yellow-sign">
                    <div style="font-size: 30px;">üö∂‚Äç‚ôÇÔ∏èüö∂‚Äç‚ôÄÔ∏è ‚û°</div>
                    <div>BEAUTIFUL WATERFALL</div>
                    <div style="border-top: 2px solid black; margin-top: 10px; padding-top:5px; display:flex; justify-content:space-between;">
                        <span>‚ö´</span>
                        <span>5 KM</span>
                        <span>üåä</span>
                    </div>
                </div>
            </div>
            <div class="q-title"><span class="q-number">1</span> What does the sign say?</div>
            <div class="options-grid" id="q1-options">
                </div>
            <div class="explanation-box" id="q1-exp"></div>
        </div>

        <div class="question-block" id="q2-block">
            <div class="sign-container">
                <div class="yellow-sign" style="text-align: left; font-size: 0.9rem;">
                    <div style="font-weight: 800; font-size: 1.1rem; margin-bottom: 5px;">Elephant Waterfalls Trail</div>
                    To have an enjoyable walk, please:<br>
                    ‚Ä¢ Keep to the main path<br>
                    ‚Ä¢ Keep dogs under control<br>
                    ‚Ä¢ Leave plants and animals alone
                </div>
            </div>
            <div class="q-title"><span class="q-number">2</span> What should you do?</div>
            <div class="options-grid" id="q2-options"></div>
            <div class="explanation-box" id="q2-exp"></div>
        </div>

        <div class="question-block" id="q3-block">
            <div class="sign-container">
                <div style="text-align: center;">
                    <div class="no-entry">
                        <span class="no-entry-icon">üö∂</span>
                    </div>
                    <div style="font-weight: 800; margin-top: 5px;">NO ENTRY</div>
                </div>
            </div>
            <div class="q-title"><span class="q-number">3</span> What does this sign mean?</div>
            <div class="options-grid" id="q3-options"></div>
            <div class="explanation-box" id="q3-exp"></div>
        </div>

        <div class="question-block" id="q4-block">
            <div class="sign-container">
                <div class="library-notice">
                    <strong>National Library Notice</strong><br>
                    Opening hours:<br>
                    <strong>Weekdays</strong><br>
                    9:00 a.m. ‚Äì 5:30 p.m.<br>
                    <strong>Saturdays</strong><br>
                    9:30 a.m. ‚Äì 1:00 p.m.
                </div>
            </div>
            <div class="q-title"><span class="q-number">4</span> Which is true?</div>
            <div class="options-grid" id="q4-options"></div>
            <div class="explanation-box" id="q4-exp"></div>
        </div>

        <div class="question-block" id="q5-block">
            <div class="sign-container">
                <div class="handwritten-note">
                    Mr Wright's English lesson today will be in Room 24D beside the language laboratory. He's off sick, so use the lesson to revise for the test.<br>
                    Bring your workbooks!
                </div>
            </div>
            <div class="q-title"><span class="q-number">5</span> What is the message about?</div>
            <div class="options-grid" id="q5-options"></div>
            <div class="explanation-box" id="q5-exp"></div>
        </div>
    </div>

    <div class="exercise-section" id="ex2">
        <div class="section-title">Exercise 2: Gap Filling</div>
        <p>Read the advertisements/announcements and choose the best fit.</p>

        <div style="margin-top: 30px;">
            <h3 style="color: var(--primary);">ÔÇÅ English Center Opening</h3>
            <div class="reading-text">
We are thrilled to announce the opening of our new English Center in Ho Chi Minh city! üéâ
We offer a variety (6) _______ courses for all levels, from beginners to advanced learners. Our experienced and friendly teachers will help you improve your speaking, listening, reading, and writing skills in a fun and (7) _____ environment.
Join us now and (8) _______ advantage of our special opening offers, including discounts on course fees and a free trial lesson!
For more information, visit our website at tranminh.com.vn or call us at 0123456789.
We look forward to welcoming you to our (9) ______ center and helping you achieve your English language goals!
            </div>
            
            <div id="ex2-p1-questions"></div>
        </div>

        <hr style="border: 0; border-top: 2px dashed #ddd; margin: 30px 0;">

        <div>
            <h3 style="color: var(--primary);">ÔÇÇ Open Your World with English!</h3>
             <table class="glossary">
                <thead><tr><th>Word</th><th>Type</th><th>Meaning</th></tr></thead>
                <tbody>
                    <tr><td>Confidence</td><td>(n)</td><td>S·ª± t·ª± tin</td></tr>
                    <tr><td>Fluently</td><td>(adv)</td><td>L∆∞u lo√°t</td></tr>
                    <tr><td>Adventure</td><td>(n)</td><td>Cu·ªôc phi√™u l∆∞u</td></tr>
                </tbody>
            </table>
            <div class="reading-text">
Want to:
‚Ä¢ Travel with confidence?
‚Ä¢ Connect with people (10) ______ all over the world?
‚Ä¢ Understand your favorite movies and music?
‚Ä¢ Get a better job?
Learning English opens doors to (11) _______ opportunities!
Our A2 English course will help you:
‚Ä¢ Speak more fluently.
‚Ä¢ Understand everyday (12) _______ conversations.
‚Ä¢ (13) ______ your grammar and vocabulary.
Join our class today and start your English adventure!
tranbinh.com.vn
            </div>
             <div id="ex2-p2-questions"></div>
        </div>

        <hr style="border: 0; border-top: 2px dashed #ddd; margin: 30px 0;">

        <div>
            <h3 style="color: var(--primary);">ÔÇÉ Announcement: English Medium Instruction</h3>
            <table class="glossary">
                <thead><tr><th>Word</th><th>Type</th><th>Meaning</th></tr></thead>
                <tbody>
                    <tr><td>Instruction</td><td>(n)</td><td>S·ª± h∆∞·ªõng d·∫´n/gi·∫£ng d·∫°y</td></tr>
                    <tr><td>Enhance</td><td>(v)</td><td>N√¢ng cao, tƒÉng c∆∞·ªùng</td></tr>
                    <tr><td>Globalized</td><td>(adj)</td><td>To√†n c·∫ßu h√≥a</td></tr>
                </tbody>
            </table>
            <div class="reading-text">
Dear Students and Parents,
We are pleased (14) ______ that starting Monday, August 28th, all subjects will be taught (15) ______ English. This includes Mathematics, Science, History, and more.
We believe this change will enhance language skills and (16) ______ students for (17) ______ globalized world.
For any questions or concerns, please contact the school office.
Best regards,
            </div>
            <div id="ex2-p3-questions"></div>
        </div>
    </div>

    <div class="exercise-section" id="ex3">
        <div class="section-title">Exercise 3: Reading Comprehension</div>
        <p>Read the passage and choose the correct word.</p>
        
        <table class="glossary">
            <thead><tr><th>Word</th><th>Type</th><th>Meaning</th></tr></thead>
            <tbody>
                <tr><td>Widespread</td><td>(adj)</td><td>Lan r·ªông, ph·ªï bi·∫øn</td></tr>
                <tr><td>Official</td><td>(adj)</td><td>Ch√≠nh th·ª©c</td></tr>
                <tr><td>Influence</td><td>(n)</td><td>S·ª± ·∫£nh h∆∞·ªüng</td></tr>
                <tr><td>Civilization</td><td>(n)</td><td>N·ªÅn vƒÉn minh</td></tr>
                <tr><td>Communication</td><td>(n)</td><td>S·ª± giao ti·∫øp</td></tr>
            </tbody>
        </table>

        <div class="reading-text">
There are over 7,000 (18) ______ in the world today. English is probably the most widely spoken language by native speakers after Mandarin Chinese, but it's also the most widely learned second language and is an official language in many countries. One reason (19) ______ English is so widespread is because it has become the main language of international business and politics. For example, most of the information on the Internet is in English, so many people translate and learn English as a second language. Another reason is the (20) ______ of American culture through movies, TV shows, and music. Many people around the world also know about Hollywood and American fast food chains.

However, this doesn't mean that everyone speaks English well. In fact, only about 20% of the world's (21) ______ speaks English at all! Also, many people use English at work, but not at home. Therefore, English may be important for global communication, but it's not going to replace other (22) ______ languages anytime soon.
        </div>
        
        <div id="ex3-questions"></div>
    </div>

    <div class="submit-container">
        <button class="submit-btn" onclick="finishTest()">N·ªòP B√ÄI & XEM ƒêI·ªÇM üöÄ</button>
    </div>

</div>

<div class="modal" id="resultModal">
    <div class="modal-content">
        <h2>K·∫øt qu·∫£ c·ªßa b·∫°n</h2>
        <div class="score-display" id="finalScore">0/22</div>
        <p id="compliment" style="font-size: 1.2rem; color: #555;">B·∫°n l√†m r·∫•t t·ªët!</p>
        <button class="submit-btn" style="font-size: 1rem; padding: 10px 30px;" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
    </div>
</div>

<script>
    // DATA
    const questions = [
        // EX 1
        {
            id: 1, type: 'mcq', target: 'q1',
            text: "Look at sign 1:",
            options: [
                { id: 'A', text: "Many people like to walk to the waterfall." },
                { id: 'B', text: "You‚Äôll see a waterfall ten kilometers from here." },
                { id: 'C', text: "The waterfall is five kilometers wide." },
                { id: 'D', text: "Walk five kilometers to get to the waterfall.", correct: true }
            ],
            explanation: `
                <div class="exp-label">D·ªãch c√¢u h·ªèi:</div> Bi·ªÉn b√°o n√†y n√≥i g√¨?
                <div class="exp-label">Ph√¢n t√≠ch ƒë√°p √°n:</div>
                A. Nhi·ªÅu ng∆∞·ªùi th√≠ch ƒëi b·ªô ƒë·∫øn th√°c n∆∞·ªõc.
                B. B·∫°n s·∫Ω th·∫•y th√°c n∆∞·ªõc c√°ch ƒë√¢y 10km.
                C. Th√°c n∆∞·ªõc r·ªông 5km.
                D. ƒêi b·ªô 5km ƒë·ªÉ ƒë·∫øn th√°c n∆∞·ªõc.
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                <span style="color:var(--correct); font-weight:bold">T·∫°i sao ƒê√öNG:</span> Bi·ªÉn b√°o c√≥ h√¨nh ng∆∞·ªùi ƒëi b·ªô, m≈©i t√™n v√† ch·ªØ "5 KM" h∆∞·ªõng v·ªÅ "Beautiful Waterfall". ƒê√¢y l√† bi·ªÉn ch·ªâ d·∫´n kho·∫£ng c√°ch: ƒêi b·ªô 5km n·ªØa s·∫Ω t·ªõi.
                <br><span style="color:var(--wrong)">T·∫°i sao SAI:</span> B sai v√¨ bi·ªÉn ghi 5km ch·ª© kh√¥ng ph·∫£i 10km. C sai v√¨ "5km" l√† kho·∫£ng c√°ch ƒë∆∞·ªùng ƒëi, kh√¥ng ph·∫£i chi·ªÅu r·ªông (wide).
            `
        },
        {
            id: 2, type: 'mcq', target: 'q2',
            text: "Look at sign 2 (Elephant Waterfalls Trail):",
            options: [
                { id: 'A', text: "Walk on the main path", correct: true },
                { id: 'B', text: "Walk the trail alone" },
                { id: 'C', text: "Let dogs on the trail" },
                { id: 'D', text: "Disturb wildlife" }
            ],
            explanation: `
                <div class="exp-label">D·ªãch c√¢u h·ªèi:</div> B·∫°n n√™n l√†m g√¨?
                <div class="exp-label">Ph√¢n t√≠ch ƒë√°p √°n:</div>
                A. ƒêi tr√™n l·ªëi ƒëi ch√≠nh.
                B. ƒêi b·ªô m·ªôt m√¨nh.
                C. Th·∫£ ch√≥ ch·∫°y tr√™n ƒë∆∞·ªùng m√≤n.
                D. L√†m phi·ªÅn ƒë·ªông v·∫≠t hoang d√£.
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                <span style="color:var(--correct); font-weight:bold">T·∫°i sao ƒê√öNG:</span> Bi·ªÉn b√°o ghi r√µ d√≤ng ƒë·∫ßu ti√™n: "Keep to the main path" (H√£y ƒëi ·ªü l·ªëi ƒëi ch√≠nh). ƒê√°p √°n A ƒë·ªìng nghƒ©a ho√†n to√†n.
                <br><span style="color:var(--wrong)">T·∫°i sao SAI:</span> C sai v√¨ bi·ªÉn ghi "Keep dogs under control" (Gi·ªØ ch√≥ trong t·∫ßm ki·ªÉm so√°t/x√≠ch ch√≥) ch·ª© kh√¥ng ph·∫£i th·∫£ t·ª± do. D sai v√¨ bi·ªÉn ghi "Leave plants and animals alone" (ƒê·ªÉ y√™n cho c√¢y c·ªëi v√† ƒë·ªông v·∫≠t).
            `
        },
        {
            id: 3, type: 'mcq', target: 'q3',
            text: "Look at sign 3 (No Entry):",
            options: [
                { id: 'A', text: "You mustn‚Äôt enter the room.", correct: true },
                { id: 'B', text: "You must go out." },
                { id: 'C', text: "You mustn‚Äôt go straight ahead." },
                { id: 'D', text: "You must knock the door before coming into the room." }
            ],
            explanation: `
                <div class="exp-label">D·ªãch c√¢u h·ªèi:</div> Bi·ªÉn b√°o n√†y c√≥ nghƒ©a l√† g√¨?
                <div class="exp-label">Ph√¢n t√≠ch ƒë√°p √°n:</div>
                A. B·∫°n kh√¥ng ƒë∆∞·ª£c ph√©p v√†o ph√≤ng.
                B. B·∫°n ph·∫£i ƒëi ra ngo√†i.
                C. B·∫°n kh√¥ng ƒë∆∞·ª£c ƒëi th·∫≥ng.
                D. B·∫°n ph·∫£i g√µ c·ª≠a tr∆∞·ªõc khi v√†o.
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                <span style="color:var(--correct); font-weight:bold">T·∫°i sao ƒê√öNG:</span> Bi·ªÉn b√°o "NO ENTRY" (C·∫•m v√†o) c√≥ h√¨nh ng∆∞·ªùi b·ªã g·∫°ch ch√©o. Trong ti·∫øng Anh, c·∫•u tr√∫c c·∫•m ƒëo√°n l√† "Mustn't" (Kh√¥ng ƒë∆∞·ª£c ph√©p).
            `
        },
        {
            id: 4, type: 'mcq', target: 'q4',
            text: "Look at sign 4 (Library Notice):",
            options: [
                { id: 'A', text: "The library is not open on Sunday.", correct: true },
                { id: 'B', text: "The library closes later on Saturday." },
                { id: 'C', text: "The library is open 5 days a week." },
                { id: 'D', text: "The library is open earlier on the weekend." }
            ],
            explanation: `
                <div class="exp-label">D·ªãch c√¢u h·ªèi:</div> C√¢u n√†o d∆∞·ªõi ƒë√¢y l√† ƒë√∫ng?
                <div class="exp-label">Ph√¢n t√≠ch ƒë√°p √°n:</div>
                A. Th∆∞ vi·ªán kh√¥ng m·ªü c·ª≠a v√†o Ch·ªß nh·∫≠t.
                B. Th∆∞ vi·ªán ƒë√≥ng c·ª≠a mu·ªôn h∆°n v√†o th·ª© 7.
                C. Th∆∞ vi·ªán m·ªü 5 ng√†y 1 tu·∫ßn.
                D. Th∆∞ vi·ªán m·ªü c·ª≠a s·ªõm h∆°n v√†o cu·ªëi tu·∫ßn.
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                <span style="color:var(--correct); font-weight:bold">T·∫°i sao ƒê√öNG:</span> Bi·ªÉn b√°o ch·ªâ ghi gi·ªù m·ªü c·ª≠a cho "Weekdays" (Th·ª© 2-6) v√† "Saturdays" (Th·ª© 7). Kh√¥ng nh·∫Øc ƒë·∫øn "Sunday", t·ª©c l√† ƒë√≥ng c·ª≠a.
                <br><span style="color:var(--wrong)">T·∫°i sao SAI:</span> B sai v√¨ th·ª© 7 ƒë√≥ng l√∫c 1:00 p.m (s·ªõm h∆°n ng√†y th∆∞·ªùng 5:30 p.m). C sai v√¨ Weekdays (5 ng√†y) + Sat (1 ng√†y) = 6 ng√†y. D sai v√¨ Th·ª© 7 m·ªü 9:30 (mu·ªôn h∆°n ng√†y th∆∞·ªùng 9:00).
            `
        },
        {
            id: 5, type: 'mcq', target: 'q5',
            text: "Look at the handwritten note (Mr Wright):",
            options: [
                { id: 'A', text: "The English class must take their workbooks to the language laboratory." },
                { id: 'B', text: "The room for English lessons is changing because of the test." },
                { id: 'C', text: "The usual English teacher cannot attend today‚Äôs lesson.", correct: true },
                { id: 'D', text: "Mr. Wright is waiting for his English students and will help them revise for the test." }
            ],
            explanation: `
                <div class="exp-label">D·ªãch c√¢u h·ªèi:</div> Th√¥ng ƒëi·ªáp n√†y n√≥i v·ªÅ ƒëi·ªÅu g√¨?
                <div class="exp-label">Ph√¢n t√≠ch ƒë√°p √°n:</div>
                A. L·ªõp ti·∫øng Anh ph·∫£i mang s√°ch b√†i t·∫≠p ƒë·∫øn ph√≤ng Lab.
                B. Ph√≤ng h·ªçc ƒë·ªïi do c√≥ b√†i ki·ªÉm tra.
                C. Gi√°o vi√™n ti·∫øng Anh th∆∞·ªùng l·ªá kh√¥ng th·ªÉ tham gia ti·∫øt h·ªçc h√¥m nay.
                D. Th·∫ßy Wright ƒëang ƒë·ª£i h·ªçc sinh ƒë·ªÉ gi√∫p √¥n thi.
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                <span style="color:var(--correct); font-weight:bold">T·∫°i sao ƒê√öNG:</span> Trong gi·∫•y ghi: "He's off sick" (Th·∫ßy b·ªã ·ªëm ngh·ªâ l√†m). ƒêi·ªÅu n√†y ƒë·ªìng nghƒ©a v·ªõi vi·ªác th·∫ßy kh√¥ng th·ªÉ d·∫°y (cannot attend).
                <br><span style="color:var(--wrong)">T·∫°i sao SAI:</span> A sai v√¨ ph√≤ng h·ªçc l√† 24D *b√™n c·∫°nh* ph√≤ng Lab, kh√¥ng ph·∫£i v√†o trong Lab. D sai v√¨ th·∫ßy ƒëang ·ªëm.
            `
        },
        // EX 2 - Passage 1
        {
            id: 6, type: 'mcq', parent: 'ex2-p1', num: '(1)',
            text: "Choose the word for blank (1): We offer a variety ______ courses",
            options: [
                {id: 'A', text: 'of', correct: true},
                {id: 'B', text: 'for'},
                {id: 'C', text: 'on'},
                {id: 'D', text: 'to'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·∫•u tr√∫c c·ªë ƒë·ªãnh (Collocation): <b>A variety of + Noun (s·ªë nhi·ªÅu)</b>: ƒêa d·∫°ng c√°c lo·∫°i g√¨ ƒë√≥.
                <br>D·ªãch: Ch√∫ng t√¥i cung c·∫•p ƒëa d·∫°ng c√°c kh√≥a h·ªçc.
            `
        },
        {
            id: 7, type: 'mcq', parent: 'ex2-p1', num: '(2)',
            text: "Choose the word for blank (2): ...in a fun and ______ environment.",
            options: [
                {id: 'A', text: 'supports'},
                {id: 'B', text: 'supportive', correct: true},
                {id: 'C', text: 'supporter'},
                {id: 'D', text: 'support'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                V·ªã tr√≠ c·∫ßn m·ªôt <b>T√≠nh t·ª´ (Adjective)</b> ƒë·ªÉ b·ªï nghƒ©a cho danh t·ª´ "environment" v√† song song v·ªõi t√≠nh t·ª´ "fun".
                <br>A. ƒê·ªông t·ª´ (s); C. Danh t·ª´ (ng∆∞·ªùi ·ªßng h·ªô); D. ƒê·ªông t·ª´/Danh t·ª´.
                <br><b>B. Supportive (adj):</b> C√≥ t√≠nh h·ªó tr·ª£/gi√∫p ƒë·ª° l·∫´n nhau.
            `
        },
        {
            id: 8, type: 'mcq', parent: 'ex2-p1', num: '(3)',
            text: "Choose the word for blank (3): Join us now and ______ advantage of...",
            options: [
                {id: 'A', text: 'build'},
                {id: 'B', text: 'see'},
                {id: 'C', text: 'take', correct: true},
                {id: 'D', text: 'put'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·ª•m t·ª´ c·ªë ƒë·ªãnh (Idiom): <b>Take advantage of sth</b> = T·∫≠n d·ª•ng/L·ª£i d·ª•ng c∆° h·ªôi n√†o ƒë√≥.
                <br>D·ªãch: H√£y tham gia ngay v√† t·∫≠n d·ª•ng c√°c ∆∞u ƒë√£i khai tr∆∞∆°ng ƒë·∫∑c bi·ªát.
            `
        },
        {
            id: 9, type: 'mcq', parent: 'ex2-p1', num: '(4)',
            text: "Choose the word for blank (4): ...welcoming you to our ______ center",
            options: [
                {id: 'A', text: 'an'},
                {id: 'B', text: 'the'},
                {id: 'C', text: 'a'},
                {id: 'D', text: 'no article', correct: true}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                Tr∆∞·ªõc danh t·ª´ "center" ƒë√£ c√≥ t√≠nh t·ª´ s·ªü h·ªØu <b>"our"</b> (c·ªßa ch√∫ng t√¥i).
                <br>Quy t·∫Øc: Khi ƒë√£ d√πng t√≠nh t·ª´ s·ªü h·ªØu (my, your, our...) th√¨ <b>KH√îNG</b> d√πng m·∫°o t·ª´ (a, an, the) n·ªØa.
                <br>V√≠ d·ª•: <i>My book</i> (ƒë√∫ng), <i>My the book</i> (sai). -> Ch·ªçn D.
            `
        },
        // EX 2 - Passage 2
        {
            id: 10, type: 'mcq', parent: 'ex2-p2', num: '(1)',
            text: "Connect with people ______ all over the world?",
            options: [
                {id: 'A', text: 'in'},
                {id: 'B', text: 'at'},
                {id: 'C', text: 'from', correct: true},
                {id: 'D', text: 'to'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·ª•m t·ª´: <b>People from all over the world</b> = M·ªçi ng∆∞·ªùi ƒë·∫øn t·ª´ kh·∫Øp n∆°i tr√™n th·∫ø gi·ªõi.
                <br>D√πng gi·ªõi t·ª´ "from" ƒë·ªÉ ch·ªâ ngu·ªìn g·ªëc/xu·∫•t x·ª©.
            `
        },
        {
            id: 11, type: 'mcq', parent: 'ex2-p2', num: '(2)',
            text: "Learning English opens doors to ______ opportunities!",
            options: [
                {id: 'A', text: 'excitement'},
                {id: 'B', text: 'excited'},
                {id: 'C', text: 'excite'},
                {id: 'D', text: 'exciting', correct: true}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·∫ßn m·ªôt T√≠nh t·ª´ (Adj) b·ªï nghƒ©a cho danh t·ª´ "opportunities".
                <br><b>Excited (ed):</b> Ch·ªâ c·∫£m x√∫c c·ªßa con ng∆∞·ªùi (b·ªã t√°c ƒë·ªông).
                <br><b>Exciting (ing):</b> Ch·ªâ t√≠nh ch·∫•t c·ªßa s·ª± v·∫≠t/s·ª± vi·ªác.
                <br>C∆° h·ªôi (opportunities) mang l·∫°i s·ª± th√∫ v·ªã -> D√πng <b>Exciting</b>.
            `
        },
        {
            id: 12, type: 'mcq', parent: 'ex2-p2', num: '(3)',
            text: "Understand everyday ______ conversations.",
            options: [
                {id: 'A', text: 'an'},
                {id: 'B', text: 'the'},
                {id: 'C', text: 'a'},
                {id: 'D', text: 'no article', correct: true}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                Danh t·ª´ ch√≠nh ·ªü ƒë√¢y l√† <b>"conversations"</b> (s·ªë nhi·ªÅu).
                <br>M·∫°o t·ª´ "a/an" ch·ªâ ƒëi v·ªõi danh t·ª´ s·ªë √≠t ƒë·∫øm ƒë∆∞·ª£c.
                <br>·ªû ƒë√¢y n√≥i v·ªÅ c√°c cu·ªôc h·ªôi tho·∫°i h√†ng ng√†y n√≥i chung -> Kh√¥ng c·∫ßn m·∫°o t·ª´ "the". -> Ch·ªçn D (No article).
            `
        },
        {
            id: 13, type: 'mcq', parent: 'ex2-p2', num: '(4)',
            text: "______ your grammar and vocabulary.",
            options: [
                {id: 'A', text: 'Improve', correct: true},
                {id: 'B', text: 'Mean'},
                {id: 'C', text: 'Borrow'},
                {id: 'D', text: 'Praise'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                D·ª±a v√†o ng·ªØ c·∫£nh: H·ªçc kh√≥a A2 ƒë·ªÉ l√†m g√¨ v·ªõi ng·ªØ ph√°p v√† t·ª´ v·ª±ng?
                <br>A. C·∫£i thi·ªán (H·ª£p l√Ω nh·∫•t).
                <br>B. C√≥ nghƒ©a.
                <br>C. M∆∞·ª£n.
                <br>D. Khen ng·ª£i.
            `
        },
        // EX 2 - Passage 3
        {
            id: 14, type: 'mcq', parent: 'ex2-p3', num: '(1)',
            text: "We are pleased ______ that starting Monday...",
            options: [
                {id: 'A', text: 'to announcing'},
                {id: 'B', text: 'announcing'},
                {id: 'C', text: 'to announce', correct: true},
                {id: 'D', text: 'announce'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·∫•u tr√∫c: <b>Be pleased + to V</b> (Vui m·ª´ng khi l√†m g√¨ ƒë√≥).
                <br>V√≠ d·ª•: I am pleased to meet you. -> Ch·ªçn C.
            `
        },
        {
            id: 15, type: 'mcq', parent: 'ex2-p3', num: '(2)',
            text: "all subjects will be taught ______ English.",
            options: [
                {id: 'A', text: 'by'},
                {id: 'B', text: 'with'},
                {id: 'C', text: 'in', correct: true},
                {id: 'D', text: 'for'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                Khi n√≥i v·ªÅ ng√¥n ng·ªØ d√πng ƒë·ªÉ giao ti·∫øp hay gi·∫£ng d·∫°y, ta d√πng gi·ªõi t·ª´ <b>IN</b>.
                <br>V√≠ d·ª•: In English, In Vietnamese. (ƒê∆∞·ª£c d·∫°y B·∫∞NG ti·∫øng Anh).
            `
        },
        {
            id: 16, type: 'mcq', parent: 'ex2-p3', num: '(3)',
            text: "...enhance language skills and ______ students for...",
            options: [
                {id: 'A', text: 'prepare', correct: true},
                {id: 'B', text: 'confuse'},
                {id: 'C', text: 'delay'},
                {id: 'D', text: 'forget'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·∫•u tr√∫c: <b>Prepare sb for sth</b> (Chu·∫©n b·ªã h√†nh trang cho ai ƒë√≥ ƒë·ªÉ b∆∞·ªõc v√†o c√°i g√¨).
                <br>D·ªãch: Chu·∫©n b·ªã cho h·ªçc sinh b∆∞·ªõc v√†o th·∫ø gi·ªõi to√†n c·∫ßu h√≥a.
                <br>C√°c t·ª´ c√≤n l·∫°i mang nghƒ©a ti√™u c·ª±c: Confuse (l√†m b·ªëi r·ªëi), Delay (tr√¨ ho√£n), Forget (qu√™n).
            `
        },
        {
            id: 17, type: 'mcq', parent: 'ex2-p3', num: '(4)',
            text: "...students for ______ globalized world.",
            options: [
                {id: 'A', text: 'an'},
                {id: 'B', text: 'a', correct: true},
                {id: 'C', text: 'the'},
                {id: 'D', text: '‚àÖ'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·ª•m t·ª´ "globalized world" l√† danh t·ª´ s·ªë √≠t, ƒë·∫øm ƒë∆∞·ª£c, b·∫Øt ƒë·∫ßu b·∫±ng ph·ª• √¢m /g/.
                <br>Ta d√πng m·∫°o t·ª´ <b>"a"</b> ƒë·ªÉ ch·ªâ "m·ªôt th·∫ø gi·ªõi to√†n c·∫ßu h√≥a" (√Ω n√≥i chung chung, m·ªôt lo·∫°i th·∫ø gi·ªõi m·ªõi).
            `
        },
        // EX 3
        {
            id: 18, type: 'mcq', parent: 'ex3', num: '(1)',
            text: "There are over 7,000 ______ in the world today.",
            options: [
                {id: 'A', text: 'varieties'},
                {id: 'B', text: 'languages', correct: true},
                {id: 'C', text: 'rules'},
                {id: 'D', text: 'standards'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C√¢u sau nh·∫Øc ƒë·∫øn "English... spoken language", "Mandarin Chinese". Ng·ªØ c·∫£nh ƒëang n√≥i v·ªÅ ng√¥n ng·ªØ.
                <br>D·ªãch: C√≥ h∆°n 7000 ng√¥n ng·ªØ tr√™n th·∫ø gi·ªõi ng√†y nay.
            `
        },
        {
            id: 19, type: 'mcq', parent: 'ex3', num: '(2)',
            text: "One reason ______ English is so widespread...",
            options: [
                {id: 'A', text: 'when'},
                {id: 'B', text: 'why', correct: true},
                {id: 'C', text: 'which'},
                {id: 'D', text: 'where'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                C·ª•m danh t·ª´ quan h·ªá: <b>The reason why + Clause</b> (L√Ω do t·∫°i sao...).
                <br>ƒê√¢y l√† m·ªánh ƒë·ªÅ quan h·ªá ch·ªâ nguy√™n nh√¢n.
            `
        },
        {
            id: 20, type: 'mcq', parent: 'ex3', num: '(3)',
            text: "Another reason is the ______ of American culture...",
            options: [
                {id: 'A', text: 'model'},
                {id: 'B', text: 'community'},
                {id: 'C', text: 'influence', correct: true},
                {id: 'D', text: 'effort'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                D·ª±a v√†o c√¢u sau: "Hollywood movies, TV shows, music". ƒê√¢y l√† s·ª± t√°c ƒë·ªông/·∫£nh h∆∞·ªüng c·ªßa vƒÉn h√≥a M·ªπ.
                <br><b>Influence (n):</b> S·ª± ·∫£nh h∆∞·ªüng.
                <br>D·ªãch: M·ªôt l√Ω do kh√°c l√† s·ª± ·∫£nh h∆∞·ªüng c·ªßa vƒÉn h√≥a M·ªπ th√¥ng qua phim ·∫£nh...
            `
        },
        {
            id: 21, type: 'mcq', parent: 'ex3', num: '(4)',
            text: "only about 20% of the world's ______ speaks English at all!",
            options: [
                {id: 'A', text: 'population', correct: true},
                {id: 'B', text: 'destination'},
                {id: 'C', text: 'civilization'},
                {id: 'D', text: 'country'}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                Collocation: <b>World's population</b> (D√¢n s·ªë th·∫ø gi·ªõi).
                <br>D·ªãch: Ch·ªâ kho·∫£ng 20% d√¢n s·ªë th·∫ø gi·ªõi n√≥i ti·∫øng Anh.
            `
        },
        {
            id: 22, type: 'mcq', parent: 'ex3', num: '(5)',
            text: "it's not going to replace other ______ languages anytime soon.",
            options: [
                {id: 'A', text: 'foreign'},
                {id: 'B', text: 'sign'},
                {id: 'C', text: 'global'},
                {id: 'D', text: 'native', correct: true}
            ],
            explanation: `
                <div class="exp-label">C√¥ Mai An gi·∫£i th√≠ch:</div>
                D·ª±a v√†o ng·ªØ c·∫£nh: Ti·∫øng Anh quan tr·ªçng cho giao ti·∫øp to√†n c·∫ßu, nh∆∞ng kh√¥ng thay th·∫ø ƒë∆∞·ª£c ti·∫øng m·∫π ƒë·∫ª c·ªßa c√°c qu·ªëc gia.
                <br><b>Native language:</b> Ti·∫øng m·∫π ƒë·∫ª/b·∫£n ng·ªØ.
            `
        }
    ];

    let score = 0;
    const totalQuestions = questions.length;
    let answeredCount = 0;

    // AUDIO CONTEXT for Sound Effects
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            // Ding sound (High pitch sine wave)
            osc.type = 'sine';
            osc.frequency.setValueAtTime(600, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
            fireConfetti();
        } else {
            // Wrong sound (Low pitch saw wave)
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // RENDER FUNCTIONS
    function renderOptions(question, containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        question.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerHTML = `${opt.id}. ${opt.text}`;
            btn.onclick = () => checkAnswer(question.id, opt.id, btn);
            container.appendChild(btn);
        });
    }

    function init() {
        // Render Ex1
        questions.filter(q => q.target).forEach(q => {
            renderOptions(q, `${q.target}-options`);
        });

        // Render Ex2 Passage 1
        const p1Qs = questions.filter(q => q.parent === 'ex2-p1');
        const p1Container = document.getElementById('ex2-p1-questions');
        p1Qs.forEach(q => createQuestionBlock(q, p1Container));

        // Render Ex2 Passage 2
        const p2Qs = questions.filter(q => q.parent === 'ex2-p2');
        const p2Container = document.getElementById('ex2-p2-questions');
        p2Qs.forEach(q => createQuestionBlock(q, p2Container));

        // Render Ex2 Passage 3
        const p3Qs = questions.filter(q => q.parent === 'ex2-p3');
        const p3Container = document.getElementById('ex2-p3-questions');
        p3Qs.forEach(q => createQuestionBlock(q, p3Container));

        // Render Ex3
        const ex3Qs = questions.filter(q => q.parent === 'ex3');
        const ex3Container = document.getElementById('ex3-questions');
        ex3Qs.forEach(q => createQuestionBlock(q, ex3Container));
    }

    function createQuestionBlock(q, container) {
        const div = document.createElement('div');
        div.className = 'question-block';
        div.id = `q${q.id}-block`;
        div.innerHTML = `
            <div class="q-title"><span class="q-number">${q.num}</span> ${q.text}</div>
            <div class="options-grid" id="q${q.id}-options"></div>
            <div class="explanation-box" id="q${q.id}-exp"></div>
        `;
        container.appendChild(div);
        renderOptions(q, `q${q.id}-options`);
    }

    function checkAnswer(qId, selectedId, btnElement) {
        const question = questions.find(q => q.id === qId);
        const container = document.getElementById(`q${qId}-options`);
        const btns = container.getElementsByClassName('option-btn');
        const expBox = document.getElementById(question.target ? `${question.target}-exp` : `q${qId}-exp`);

        // Prevent re-answering
        if (container.classList.contains('answered')) return;
        container.classList.add('answered');
        answeredCount++;

        // Find correct option ID
        const correctOpt = question.options.find(o => o.correct);

        if (selectedId === correctOpt.id) {
            btnElement.classList.add('correct');
            playSound('correct');
            score++;
        } else {
            btnElement.classList.add('wrong');
            playSound('wrong');
            // Highlight correct answer
            for (let btn of btns) {
                if (btn.innerText.startsWith(correctOpt.id)) {
                    btn.classList.add('correct');
                }
            }
        }

        // Disable all buttons
        for (let btn of btns) {
            btn.classList.add('disabled');
        }

        // Show Explanation
        expBox.style.display = 'block';
        expBox.innerHTML = `
            <div class="exp-header">
                <span>üí° GI·∫¢I TH√çCH CHI TI·∫æT</span>
            </div>
            <div class="exp-content">${question.explanation}</div>
        `;
    }

    function finishTest() {
        const modal = document.getElementById('resultModal');
        const scoreText = document.getElementById('finalScore');
        const compliment = document.getElementById('compliment');
        
        scoreText.innerText = `${score}/${totalQuestions}`;
        
        const percentage = (score / totalQuestions) * 100;
        if (percentage === 100) compliment.innerText = "Xu·∫•t s·∫Øc! C√¥ r·∫•t t·ª± h√†o v·ªÅ con! üåü";
        else if (percentage >= 80) compliment.innerText = "Gi·ªèi l·∫Øm! Con n·∫Øm b√†i r·∫•t ch·∫Øc! üí™";
        else if (percentage >= 50) compliment.innerText = "Kh√° t·ªët! C·ªë g·∫Øng xem l·∫°i l·ªói sai nh√©! üìö";
        else compliment.innerText = "ƒê·ª´ng bu·ªìn! H√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n nh√©! ‚ù§Ô∏è";

        modal.style.display = 'flex';
        
        if (percentage >= 80) {
            fireConfetti();
            setTimeout(fireConfetti, 500);
        }
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

    // CONFETTI SCRIPT (Lightweight)
    function fireConfetti() {
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const pieces = [];
        const colors = ['#f00', '#0f0', '#00f', '#ff0', '#0ff', '#f0f'];
        
        for(let i=0; i<100; i++) {
            pieces.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 10 + 5,
                speed: Math.random() * 5 + 2
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let active = false;
            pieces.forEach(p => {
                p.y += p.speed;
                if (p.y < canvas.height) {
                    active = true;
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, p.size, p.size);
                }
            });
            if (active) requestAnimationFrame(draw);
            else ctx.clearRect(0,0, canvas.width, canvas.height);
        }
        draw();
    }

    // Init App
    window.onload = init;

</script>
</body>
</html>