<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Quiz - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-mint: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-dark: #2d3436;
        }

        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 99%, #FECFEF 100%), url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M20 20 L30 20 L25 30 Z" fill="rgba(255,255,255,0.4)"/><circle cx="70" cy="70" r="5" fill="rgba(255,255,255,0.5)"/><rect x="80" y="20" width="8" height="8" transform="rotate(45 84 24)" fill="rgba(255,255,255,0.3)"/><path d="M10 80 Q 15 70 20 80 T 30 80" stroke="rgba(255,255,255,0.4)" fill="none" stroke-width="2"/></svg>');
            background-color: var(--primary-pink);
            background-blend-mode: overlay;
            color: var(--text-dark);
            padding-bottom: 100px;
        }

        .header {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 0 0 30px 30px;
            margin-bottom: 30px;
        }

        .header h5 {
            margin: 0;
            color: var(--primary-pink);
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .header h1 {
            margin: 10px 0 0;
            color: var(--primary-mint);
            font-size: 2rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .section-title {
            background: var(--primary-mint);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 30px;
            box-shadow: 0 5px 0 #00A388;
            border: 2px solid white;
        }

        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 2px solid #eee;
            transition: transform 0.2s;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        /* 3D Buttons for Options */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-dark);
            cursor: pointer;
            box-shadow: 0 5px 0 #e0e0e0;
            transition: all 0.1s;
            font-family: 'Nunito', sans-serif;
            text-align: center;
        }

        .option-btn:hover {
            transform: scale(1.02) translateY(-2px);
            box-shadow: 0 7px 0 #e0e0e0;
        }

        .option-btn:active {
            transform: scale(0.98) translateY(3px);
            box-shadow: 0 2px 0 #e0e0e0;
        }

        .option-btn.correct {
            background: var(--correct-green);
            border-color: #00A355;
            color: white;
            box-shadow: 0 5px 0 #00A355;
        }

        .option-btn.wrong {
            background: var(--wrong-red);
            border-color: #D63031;
            color: white;
            box-shadow: 0 5px 0 #D63031;
        }

        /* Explanation Box */
        .explanation {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-left: 5px solid var(--primary-mint);
            border-radius: 10px;
            animation: slideDown 0.3s ease-out;
            line-height: 1.6;
        }

        .explanation h4 {
            margin: 0 0 10px 0;
            color: var(--primary-pink);
        }

        .explanation p { margin: 5px 0; }
        .explanation .highlight { font-weight: bold; color: var(--primary-mint); }
        
        /* Gap Fill Select */
        .gap-select {
            appearance: none;
            background: #fff;
            border: 3px dashed var(--primary-pink);
            border-radius: 10px;
            padding: 5px 15px;
            font-size: 1.1rem;
            font-family: 'Nunito';
            font-weight: bold;
            color: var(--primary-pink);
            cursor: pointer;
            outline: none;
            transition: 0.3s;
        }
        .gap-select.correct { background: var(--correct-green); border-color: var(--correct-green); color: white; border-style: solid; }
        .gap-select.wrong { background: var(--wrong-red); border-color: var(--wrong-red); color: white; border-style: solid; }

        /* Word Sort */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            min-height: 50px;
            padding: 10px;
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        .word-pill {
            background: var(--primary-mint);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            box-shadow: 0 4px 0 #00A388;
            font-weight: bold;
            transition: 0.1s;
        }
        .word-pill:active { transform: translateY(4px); box-shadow: 0 0 0 #00A388; }
        
        .answer-drop {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 50px;
            padding: 10px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        /* Find Mistake */
        .mistake-inputs {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .mistake-inputs input {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-family: 'Nunito';
            font-weight: bold;
            font-size: 1rem;
        }
        .check-btn {
            background: #FDCB6E;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #E1B12C;
            color: #2d3436;
        }
        .check-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #E1B12C; }

        /* Animations */
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            75% { transform: translateX(5px) rotate(2deg); }
        }
        .shake { animation: shake 0.4s; }

        /* Submit Bar */
        .submit-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
            text-align: center;
            z-index: 100;
            box-sizing: border-box;
        }

        .submit-btn {
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 6px 0 #5f27cd;
            font-family: 'Nunito';
            transition: 0.2s;
        }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 0 #5f27cd; }
        .submit-btn:active { transform: translateY(6px); box-shadow: 0 0 0 #5f27cd; }

        /* Canvas for Confetti */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Modal Overlay */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .modal-content h2 { color: var(--primary-pink); margin-top: 0; font-size: 2rem; }
        .modal-content p { font-size: 1.2rem; font-weight: bold; }
    </style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<div class="header">
    <h5>Ms Mai An ULIS</h5>
    <h1>Super Fun English Quiz üåü</h1>
</div>

<div class="container" id="quiz-container">
    <h2 class="section-title">B√†i t·∫≠p 1: Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t (10 c√¢u)</h2>
    <p><em>M·ª•c ti√™u: √în t·∫≠p c·∫•u tr√∫c c∆° b·∫£n v√† c√°ch ch·ªçn t·ª´ ƒë·ªÉ h·ªèi (What/Where).</em></p>

    <div class="question-card" data-type="mcq" data-correct="C">
        <div class="question-text">1. ____ you like to go to the park?</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. Do</button>
            <button class="option-btn" value="B">B. Are</button>
            <button class="option-btn" value="C">C. Would</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> B·∫°n c√≥ mu·ªën ƒëi ƒë·∫øn c√¥ng vi√™n kh√¥ng?</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>
               A. Do: Tr·ª£ ƒë·ªông t·ª´ (d√πng cho hi·ªán t·∫°i ƒë∆°n).<br>
               B. Are: ƒê·ªông t·ª´ to be (d√πng cho hi·ªán t·∫°i ti·∫øp di·ªÖn/tr·∫°ng th√°i).<br>
               C. Would: Tr·ª£ ƒë·ªông t·ª´ khuy·∫øt thi·∫øu (d√πng trong c·∫•u tr√∫c m·ªùi m·ªçc).</p>
            <p><strong>3. T·∫°i sao ch·ªçn C ƒë√∫ng?</strong> C·∫•u tr√∫c l·ªùi m·ªùi ho·∫∑c h·ªèi √Ω mu·ªën l·ªãch s·ª±: <span class="highlight">"Would you like to + V(nguy√™n th·ªÉ)?"</span>. C√¢u n√†y ƒëang m·ªùi ƒëi c√¥ng vi√™n n√™n ta d√πng "Would".</p>
            <p><strong>4. T·∫°i sao sai?</strong> "Do you like" d√πng ƒë·ªÉ h·ªèi s·ªü th√≠ch chung chung (th∆∞·ªùng ƒëi v·ªõi V-ing). "Are" sai ho√†n to√†n v·ªÅ ng·ªØ ph√°p (kh√¥ng c√≥ c·∫•u tr√∫c Are you like).</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="A">
        <div class="question-text">2. Would she like ____ play chess?</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. to</button>
            <button class="option-btn" value="B">B. play</button>
            <button class="option-btn" value="C">C. playing</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> C√¥ ·∫•y c√≥ mu·ªën ch∆°i c·ªù kh√¥ng?</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. to: Gi·ªõi t·ª´ ch·ªâ ƒë√≠ch/k·∫øt n·ªëi ƒë·ªông t·ª´.<br>B. play: ƒê·ªông t·ª´ nguy√™n th·ªÉ (kh√¥ng to).<br>C. playing: ƒê·ªông t·ª´ th√™m ƒëu√¥i -ing.</p>
            <p><strong>3. T·∫°i sao ch·ªçn A ƒë√∫ng?</strong> C·∫•u tr√∫c b·∫•t di b·∫•t d·ªãch: <span class="highlight">Would like + TO + V nguy√™n th·ªÉ</span>. ·ªû ƒë√¢y ƒë√£ c√≥ "play" (V), n√™n thi·∫øu "to".</p>
            <p><strong>4. T·∫°i sao sai?</strong> B thi·∫øu "to" t·∫°o th√†nh 2 ƒë·ªông t·ª´ li·ªÅn nhau sai lu·∫≠t. C sai v√¨ "Would like" kh√¥ng ƒëi tr·ª±c ti·∫øp v·ªõi V-ing.</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="B">
        <div class="question-text">3. A: Would you like to eat an apple? - B: Yes, ____.</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. thank you</button>
            <button class="option-btn" value="B">B. please</button>
            <button class="option-btn" value="C">C. I do</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> A: B·∫°n c√≥ mu·ªën ƒÉn m·ªôt qu·∫£ t√°o kh√¥ng? - B: C√≥, _____.</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. thank you: C·∫£m ∆°n (th∆∞·ªùng d√πng khi t·ª´ ch·ªëi).<br>B. please: L√†m ∆°n/V√¢ng ·∫° (th∆∞·ªùng d√πng khi ƒë·ªìng √Ω nh·∫≠n).<br>C. I do: T√¥i c√≥ (d√πng tr·∫£ l·ªùi cho c√¢u h·ªèi Do you...).</p>
            <p><strong>3. T·∫°i sao ch·ªçn B ƒë√∫ng?</strong> Khi ƒë·ªìng √Ω v·ªõi l·ªùi m·ªùi "Would you like...?", c√°ch tr·∫£ l·ªùi l·ªãch s·ª± chu·∫©n nh·∫•t l√† <span class="highlight">"Yes, please"</span> (V√¢ng, cho m√¨nh xin).</p>
            <p><strong>4. T·∫°i sao sai?</strong> "Yes, thank you" h∆°i m√¢u thu·∫´n (th∆∞·ªùng l√† "No, thank you"). "Yes, I do" sai ng·ªØ ph√°p v√¨ ng∆∞·ªùi ta h·ªèi b·∫±ng "Would", kh√¥ng ph·∫£i "Do".</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="C">
        <div class="question-text">4. A: Would they like to watch TV? - B: No, ____.</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. please</button>
            <button class="option-btn" value="B">B. thanks</button>
            <button class="option-btn" value="C">C. thank you</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> A: H·ªç c√≥ mu·ªën xem TV kh√¥ng? - B: Kh√¥ng, _____.</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. please: L√†m ∆°n.<br>B. thanks: C·∫£m ∆°n (th√¢n m·∫≠t).<br>C. thank you: C·∫£m ∆°n (l·ªãch s·ª±, chu·∫©n x√°c trong b√†i thi).</p>
            <p><strong>3. T·∫°i sao ch·ªçn C ƒë√∫ng?</strong> ƒê·ªÉ t·ª´ ch·ªëi l·ªùi m·ªùi l·ªãch s·ª±, m·∫´u c√¢u chu·∫©n l√† <span class="highlight">"No, thank you."</span></p>
            <p><strong>4. T·∫°i sao sai?</strong> A sai v√¨ "please" d√πng khi ƒë·ªìng √Ω (Yes). B (thanks) c≈©ng ch·∫•p nh·∫≠n ƒë∆∞·ª£c trong vƒÉn n√≥i, nh∆∞ng trong b√†i ki·ªÉm tra ti·ªÉu h·ªçc, "thank you" lu√¥n l√† ƒë√°p √°n chu·∫©n x√°c nh·∫•t ƒë·ªÉ ƒëi v·ªõi "No,".</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="B">
        <div class="question-text">5. ____ would you like to go? - I'd like to go to the cinema.</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. What</button>
            <button class="option-btn" value="B">B. Where</button>
            <button class="option-btn" value="C">C. Who</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> ____ b·∫°n mu·ªën ƒëi? - T√¥i mu·ªën ƒëi ƒë·∫øn r·∫°p chi·∫øu phim.</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. What: C√°i g√¨.<br>B. Where: ·ªû ƒë√¢u.<br>C. Who: Ai.</p>
            <p><strong>3. T·∫°i sao ch·ªçn B ƒë√∫ng?</strong> C√¢u tr·∫£ l·ªùi ch·ªâ ƒë·ªãa ƒëi·ªÉm "to the cinema" (ƒë·∫øn r·∫°p chi·∫øu phim), do ƒë√≥ t·ª´ ƒë·ªÉ h·ªèi ph·∫£i l√† <span class="highlight">"Where"</span> (·ªû ƒë√¢u).</p>
            <p><strong>4. T·∫°i sao sai?</strong> A (C√°i g√¨) d√πng ƒë·ªÉ h·ªèi h√†nh ƒë·ªông (What to do). C (Ai) d√πng h·ªèi ng∆∞·ªùi.</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="C">
        <div class="question-text">6. What ____ he like to do? - He'd like to read a book.</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. do</button>
            <button class="option-btn" value="B">B. does</button>
            <button class="option-btn" value="C">C. would</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> Anh ·∫•y mu·ªën l√†m g√¨? - Anh ·∫•y mu·ªën ƒë·ªçc s√°ch.</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. do: Tr·ª£ ƒë·ªông t·ª´ s·ªë nhi·ªÅu.<br>B. does: Tr·ª£ ƒë·ªông t·ª´ s·ªë √≠t.<br>C. would: Tr·ª£ ƒë·ªông t·ª´ khuy·∫øt thi·∫øu (m·ªùi m·ªçc/mong mu·ªën).</p>
            <p><strong>3. T·∫°i sao ch·ªçn C ƒë√∫ng?</strong> D·ª±a v√†o c√¢u tr·∫£ l·ªùi "He<span class="highlight">'d</span> like..." ('d l√† vi·∫øt t·∫Øt c·ªßa would), ta bi·∫øt c√¢u h·ªèi ph·∫£i d√πng <span class="highlight">"would"</span>.</p>
            <p><strong>4. T·∫°i sao sai?</strong> N·∫øu d√πng "does", c√¢u h·ªèi s·∫Ω l√† "What does he like to do?" (Anh ·∫•y th√≠ch l√†m g√¨ n√≥i chung). Nh∆∞ng v√¨ c√¢u tr·∫£ l·ªùi d√πng "He'd like" (ch·ªâ ∆∞·ªõc mu·ªën hi·ªán t·∫°i) n√™n A v√† B sai.</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="A">
        <div class="question-text">7. Where would you like ____?</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. to go</button>
            <button class="option-btn" value="B">B. go</button>
            <button class="option-btn" value="C">C. going</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> B·∫°n mu·ªën ƒëi ƒë√¢u?</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. to go: ƒëi (c√≥ to).<br>B. go: ƒëi (nguy√™n th·ªÉ kh√¥ng to).<br>C. going: ƒëi (d·∫°ng V-ing).</p>
            <p><strong>3. T·∫°i sao ch·ªçn A ƒë√∫ng?</strong> V·∫´n l√† c·∫•u tr√∫c c·ªët l√µi: <span class="highlight">Would like + to V</span>. V√¨ v·∫≠y ph·∫£i ch·ªçn "to go".</p>
            <p><strong>4. T·∫°i sao sai?</strong> B thi·∫øu "to". C sai v√¨ sau "would like" kh√¥ng d√πng V-ing.</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="B">
        <div class="question-text">8. A: Would you like to drink some milk? - B: ________. I am full (T·ªõ no r·ªìi).</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. Yes, please</button>
            <button class="option-btn" value="B">B. No, thank you</button>
            <button class="option-btn" value="C">C. Yes, I do</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> A: B·∫°n c√≥ mu·ªën u·ªëng ch√∫t s·ªØa kh√¥ng? - B: ____. T·ªõ no r·ªìi.</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. Yes, please: V√¢ng, cho t·ªõ xin.<br>B. No, thank you: Kh√¥ng, t·ªõ c·∫£m ∆°n.<br>C. Yes, I do: V√¢ng t·ªõ c√≥.</p>
            <p><strong>3. T·∫°i sao ch·ªçn B ƒë√∫ng?</strong> D·ªØ ki·ªán ch·ªët l√† <span class="highlight">"I am full" (T·ªõ no r·ªìi)</span>. No r·ªìi th√¨ ph·∫£i t·ª´ ch·ªëi, do ƒë√≥ ch·ªçn B.</p>
            <p><strong>4. T·∫°i sao sai?</strong> A sai ng·ªØ c·∫£nh (no r·ªìi sao l·∫°i xin th√™m). C sai c·∫•u tr√∫c ng·ªØ ph√°p (h·ªèi Would kh√¥ng tr·∫£ l·ªùi I do).</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="A">
        <div class="question-text">9. I ____ like to go to the beach.</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. would</button>
            <button class="option-btn" value="B">B. do</button>
            <button class="option-btn" value="C">C. am</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> T√¥i mu·ªën ƒëi ƒë·∫øn b√£i bi·ªÉn.</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. would: d√πng cho mong mu·ªën/∆∞·ªõc mu·ªën.<br>B. do: kh√¥ng ƒë·ª©ng tr·ª±c ti·∫øp tr∆∞·ªõc like to V th·∫ø n√†y trong c√¢u kh·∫≥ng ƒë·ªãnh.<br>C. am: ƒë·ªông t·ª´ to be.</p>
            <p><strong>3. T·∫°i sao ch·ªçn A ƒë√∫ng?</strong> C·∫•u tr√∫c di·ªÖn t·∫£ mong mu·ªën: <span class="highlight">S + would like to + V</span>.</p>
            <p><strong>4. T·∫°i sao sai?</strong> B (I do like) ch·ªâ d√πng ƒë·ªÉ nh·∫•n m·∫°nh s·ªü th√≠ch, nh∆∞ng kh√¥ng t·ª± nhi√™n b·∫±ng A. C sai ng·ªØ ph√°p ho√†n to√†n (I am like...).</p>
        </div>
    </div>

    <div class="question-card" data-type="mcq" data-correct="B">
        <div class="question-text">10. A: What would she like to do? - B: She'd like ____ a picture.</div>
        <div class="options-grid">
            <button class="option-btn" value="A">A. draw</button>
            <button class="option-btn" value="B">B. to draw</button>
            <button class="option-btn" value="C">C. draws</button>
        </div>
        <div class="explanation">
            <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
            <p><strong>1. D·ªãch c√¢u h·ªèi:</strong> A: C√¥ ·∫•y mu·ªën l√†m g√¨? - B: C√¥ ·∫•y mu·ªën v·∫Ω m·ªôt b·ª©c tranh.</p>
            <p><strong>2. Ph√¢n t√≠ch ƒë√°p √°n:</strong><br>A. draw: nguy√™n th·ªÉ kh√¥ng to.<br>B. to draw: ƒë·ªông t·ª´ c√≥ to.<br>C. draws: ƒë·ªông t·ª´ chia th√¨ hi·ªán t·∫°i ƒë∆°n (th√™m s).</p>
            <p><strong>3. T·∫°i sao ch·ªçn B ƒë√∫ng?</strong> Lu√¥n nh·ªõ: <span class="highlight">"would like" + "to V"</span>. ƒê√°p √°n B l√† ch√≠nh x√°c nh·∫•t.</p>
            <p><strong>4. T·∫°i sao sai?</strong> A thi·∫øu "to". C chia "s" l√† sai v√¨ sau to ph·∫£i l√† ƒë·ªông t·ª´ nguy√™n th·ªÉ.</p>
        </div>
    </div>

    <h2 class="section-title">B√†i t·∫≠p 2: ƒêi·ªÅn t·ª´ c√≤n thi·∫øu v√†o ch·ªó tr·ªëng</h2>
    <p><em>T·ª´ g·ª£i √Ω: Would, like, to, please, thank, What, Where, I'd, go, play (M·ªói ch·ªó tr·ªëng ch·ªçn 1 t·ª´)</em></p>

    <div id="gap-fill-container">
        <script>
            const gapFillData = [
                { q: "________ you like to read books?", ans: "Would", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "B·∫°n c√≥ mu·ªën ƒë·ªçc s√°ch kh√¥ng?", exp: "C√¢u h·ªèi b·∫Øt ƒë·∫ßu b·∫±ng 'Would' ƒë·ªÉ t·∫°o c·∫•u tr√∫c 'Would you like'." },
                { q: "Where would you ________ to go?", ans: "like", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "B·∫°n mu·ªën ƒëi ƒë√¢u?", exp: "Thi·∫øu ƒë·ªông t·ª´ ch√≠nh trong c·∫•u tr√∫c 'would like to'." },
                { q: "Would he like ________ swim in the pool?", ans: "to", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "Anh ·∫•y c√≥ mu·ªën b∆°i ·ªü b·ªÉ b∆°i kh√¥ng?", exp: "C·∫•u tr√∫c would like + TO + V. T·ª´ c√≤n thi·∫øu l√† 'to'." },
                { q: "________ would she like to do? - She'd like to sing a song.", ans: "What", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "C√¥ ·∫•y mu·ªën l√†m g√¨? - C√¥ ·∫•y mu·ªën h√°t.", exp: "Tr·∫£ l·ªùi l√† m·ªôt h√†nh ƒë·ªông (h√°t), n√™n c√¢u h·ªèi ph·∫£i h·ªèi 'C√°i g√¨/l√†m g√¨' (What)." },
                { q: "________ would they like to go? - They'd like to go to the zoo.", ans: "Where", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "H·ªç mu·ªën ƒëi ƒë√¢u? - ƒê·∫øn s·ªü th√∫.", exp: "Tr·∫£ l·ªùi l√† ƒë·ªãa ƒëi·ªÉm (zoo) n√™n t·ª´ ƒë·ªÉ h·ªèi ph·∫£i l√† 'Where' (·ªû ƒë√¢u)." },
                { q: "A: Would you like an ice cream? - B: Yes, ________.", ans: "please", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "B·∫°n c√≥ mu·ªën m·ªôt c√¢y kem kh√¥ng? - V√¢ng, cho t·ªõ xin.", exp: "ƒê·ªìng √Ω l·ªùi m·ªùi d√πng 'Yes, please'." },
                { q: "A: Would you like to play tennis? - B: No, ________ you.", ans: "thank", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "B·∫°n c√≥ mu·ªën ch∆°i tennis kh√¥ng? - Kh√¥ng, t·ªõ c·∫£m ∆°n.", exp: "T·ª´ ch·ªëi l·ªãch s·ª± d√πng 'No, thank you'." },
                { q: "Where would you like to go? - ________ like to go to the supermarket.", ans: "I'd", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "B·∫°n mu·ªën ƒëi ƒë√¢u? - T·ªõ mu·ªën ƒëi si√™u th·ªã.", exp: "ƒêang h·ªèi 'you' (b·∫°n) n√™n tr·∫£ l·ªùi ph·∫£i x∆∞ng 'I'. Vi·∫øt t·∫Øt c·ªßa I would l√† I'd." },
                { q: "Would they like to ________ football?", ans: "play", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "H·ªç c√≥ mu·ªën ch∆°i b√≥ng ƒë√° kh√¥ng?", exp: "ƒê·ªông t·ª´ ƒëi v·ªõi m√¥n th·ªÉ thao b√≥ng ƒë√° l√† 'play'." },
                { q: "I'd like to ________ to the bakery.", ans: "go", words: ["Would", "like", "to", "please", "thank", "What", "Where", "I'd", "go", "play"], vn: "T·ªõ mu·ªën ƒëi ƒë·∫øn ti·ªám b√°nh.", exp: "ƒê·ªông t·ª´ ch·ªâ s·ª± di chuy·ªÉn ƒë·∫øn ƒë·ªãa ƒëi·ªÉm (the bakery) l√† 'go'." }
            ];

            gapFillData.forEach((item, index) => {
                let optionsHtml = `<option value="" disabled selected>Ch·ªçn t·ª´</option>`;
                item.words.forEach(w => optionsHtml += `<option value="${w}">${w}</option>`);
                let htmlQ = item.q.replace("________", `<select class="gap-select" data-ans="${item.ans}">${optionsHtml}</select>`);
                
                document.write(`
                <div class="question-card gap-card">
                    <div class="question-text">${index + 11}. ${htmlQ}</div>
                    <div class="explanation">
                        <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                        <p><strong>1. D·ªãch nghƒ©a:</strong> ${item.vn}</p>
                        <p><strong>2. Ph√¢n t√≠ch:</strong> T·∫°i sao l·∫°i ƒëi·ªÅn <strong>"${item.ans}"</strong>?</p>
                        <p><strong>3. Gi·∫£i th√≠ch:</strong> <span class="highlight">${item.exp}</span></p>
                    </div>
                </div>
                `);
            });
        </script>
    </div>

    <h2 class="section-title">B√†i t·∫≠p 3: S·∫Øp x·∫øp c√°c t·ª´ ƒë·ªÉ t·∫°o th√†nh c√¢u ho√†n ch·ªânh</h2>
    <p><em>M·ª•c ti√™u: Luy·ªán t·∫≠p tr·∫≠t t·ª± t·ª´ (B·∫•m v√†o c√°c t·ª´ b√™n d∆∞·ªõi ƒë·ªÉ gh√©p th√†nh c√¢u ƒë√∫ng)</em></p>

    <div id="sort-container">
        </div>

    <h2 class="section-title">B√†i t·∫≠p 5: T√¨m v√† s·ª≠a l·ªói sai</h2>
    <p><em>M·ª•c ti√™u: Nh·∫≠p t·ª´ b·ªã sai v√† t·ª´ ƒë√£ s·ª≠a cho ƒë√∫ng v√†o √¥ tr·ªëng b√™n d∆∞·ªõi.</em></p>

    <div id="mistake-container">
        <script>
            const mistakeData = [
                { q: "What would you like to doing?", err: "doing", fix: "do", vn: "B·∫°n mu·ªën l√†m g√¨?", exp: "Sau 'would like to' ph·∫£i l√† ƒë·ªông t·ª´ nguy√™n th·ªÉ 'do', kh√¥ng th√™m ƒëu√¥i '-ing'." },
                { q: "Where do he like to go?", err: "do", fix: "would", vn: "Anh ·∫•y mu·ªën ƒëi ƒë√¢u?", exp: "C√¢u h·ªèi v·ªÅ mong mu·ªën t·∫°i m·ªôt th·ªùi ƒëi·ªÉm d√πng c·∫•u tr√∫c 'Where would you/he/she like...', n√™n thay 'do' b·∫±ng 'would' (ho·∫∑c 'does' n·∫øu h·ªèi s·ªü th√≠ch chung chung, nh∆∞ng b·ªëi c·∫£nh b√†i n√†y l√† would like)." },
                { q: "Would she like play football?", err: "play", fix: "to play", vn: "C√¥ ·∫•y c√≥ mu·ªën ch∆°i b√≥ng ƒë√° kh√¥ng?", exp: "C·∫•u tr√∫c ƒë√∫ng l√† 'Would like + TO + V'. Thi·∫øu ch·ªØ 'to' tr∆∞·ªõc 'play'." },
                { q: "A: Would you like to go to the zoo? - B: No, please.", err: "please", fix: "thank you", vn: "B·∫°n c√≥ mu·ªën ƒëi s·ªü th√∫ kh√¥ng? - Kh√¥ng, c·∫£m ∆°n.", exp: "Khi t·ª´ ch·ªëi l·ªùi m·ªùi, ta n√≥i 'No, thank you' (ho·∫∑c thanks), kh√¥ng d√πng 'please'." },
                { q: "I'd like to going to the park.", err: "going", fix: "go", vn: "T√¥i mu·ªën ƒëi ƒë·∫øn c√¥ng vi√™n.", exp: "Sau 'I'd like to' ph·∫£i l√† ƒë·ªông t·ª´ nguy√™n th·ªÉ 'go', kh√¥ng ƒë∆∞·ª£c d√πng 'going'." }
            ];

            mistakeData.forEach((item, index) => {
                document.write(`
                <div class="question-card mistake-card">
                    <div class="question-text">${index + 26}. ${item.q}</div>
                    <div class="mistake-inputs">
                        <input type="text" placeholder="G√µ t·ª´ sai (VD: ${item.err.substring(0,1)}...)" class="input-err" data-ans="${item.err.toLowerCase()}">
                        <input type="text" placeholder="G√µ t·ª´ ƒë√∫ng (VD: ${item.fix.substring(0,1)}...)" class="input-fix" data-ans="${item.fix.toLowerCase()}">
                        <button class="check-btn">Ki·ªÉm tra</button>
                    </div>
                    <div class="explanation">
                        <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                        <p><strong>1. D·ªãch c√¢u:</strong> ${item.vn}</p>
                        <p><strong>2. Ph√¢n t√≠ch l·ªói sai:</strong> T·ª´ sai l√† <span class="highlight">"${item.err}"</span> -> S·ª≠a th√†nh <span class="highlight">"${item.fix}"</span>.</p>
                        <p><strong>3. T·∫°i sao?:</strong> ${item.exp}</p>
                    </div>
                </div>
                `);
            });
        </script>
    </div>

</div>

<div class="submit-bar">
    <button class="submit-btn" id="submitBtn">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
</div>

<div class="modal" id="scoreModal">
    <div class="modal-content">
        <h2>üéâ CH√öC M·ª™NG üéâ</h2>
        <p id="scoreText">B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng 0 / 30 c√¢u.</p>
        <p id="complimentText" style="color: var(--primary-mint);"></p>
        <button class="check-btn" onclick="location.reload()" style="margin-top:20px;">L√†m l·∫°i b√†i</button>
    </div>
</div>

<script>
    /* --- AUDIO EFFECTS (Web Audio API) --- */
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    let audioCtx = new AudioContext();

    function playDing() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        
        osc.type = 'sine';
        osc.frequency.setValueAtTime(800, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1500, audioCtx.currentTime + 0.1);
        
        gain.gain.setValueAtTime(0, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0.3, audioCtx.currentTime + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
        
        osc.start();
        osc.stop(audioCtx.currentTime + 0.5);
    }

    function playBuzz() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(150, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
        
        gain.gain.setValueAtTime(0, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0.2, audioCtx.currentTime + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        
        osc.start();
        osc.stop(audioCtx.currentTime + 0.3);
    }

    /* --- CONFETTI EFFECT --- */
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];
    function fireConfetti() {
        const colors = ['#00D26A', '#FF4757', '#FDCB6E', '#0984E3', '#8854C0'];
        for(let i=0; i<50; i++) {
            particles.push({
                x: window.innerWidth / 2,
                y: window.innerHeight / 2,
                r: Math.random() * 6 + 2,
                dx: Math.random() * 10 - 5,
                dy: Math.random() * -10 - 5,
                color: colors[Math.floor(Math.random() * colors.length)],
                tilt: Math.random() * 10
            });
        }
    }

    function animateConfetti() {
        requestAnimationFrame(animateConfetti);
        ctx.clearRect(0,0,canvas.width, canvas.height);
        particles.forEach((p, index) => {
            p.dy += 0.2; // gravity
            p.x += p.dx;
            p.y += p.dy;
            p.tilt += 0.1;

            ctx.beginPath();
            ctx.lineWidth = p.r;
            ctx.strokeStyle = p.color;
            ctx.moveTo(p.x + p.tilt + p.r, p.y);
            ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r);
            ctx.stroke();

            if(p.y > canvas.height) particles.splice(index, 1);
        });
    }
    animateConfetti();

    /* --- GLOBAL SCORE --- */
    let score = 0;
    const TOTAL_QUESTIONS = 30;

    /* --- SHUFFLE HELPER --- */
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    /* --- EX 1: MCQ LOGIC --- */
    document.querySelectorAll('.question-card[data-type="mcq"]').forEach(card => {
        const correctAns = card.getAttribute('data-correct');
        const btns = Array.from(card.querySelectorAll('.option-btn'));
        const grid = card.querySelector('.options-grid');
        const exp = card.querySelector('.explanation');
        
        // Shuffle buttons
        shuffleArray(btns);
        btns.forEach(btn => grid.appendChild(btn));

        let answered = false;
        btns.forEach(btn => {
            btn.addEventListener('click', () => {
                if(answered) return;
                answered = true;
                const isCorrect = btn.value === correctAns;
                
                if(isCorrect) {
                    btn.classList.add('correct');
                    playDing();
                    fireConfetti();
                    score++;
                } else {
                    btn.classList.add('wrong');
                    card.classList.add('shake');
                    playBuzz();
                    // Highlight correct answer
                    btns.find(b => b.value === correctAns).classList.add('correct');
                }
                
                exp.style.display = 'block';
            });
        });
    });

    /* --- EX 2: GAP FILL LOGIC --- */
    document.querySelectorAll('.gap-select').forEach(sel => {
        let answered = false;
        sel.addEventListener('change', function() {
            if(answered) return;
            answered = true;
            this.disabled = true;
            const card = this.closest('.gap-card');
            const exp = card.querySelector('.explanation');
            const ans = this.getAttribute('data-ans');

            if(this.value === ans) {
                this.classList.add('correct');
                playDing();
                fireConfetti();
                score++;
            } else {
                this.classList.add('wrong');
                card.classList.add('shake');
                playBuzz();
                // Show correct in select
                const correctOption = Array.from(this.options).find(o => o.value === ans);
                if(correctOption) this.value = ans;
                this.style.color = 'white';
                this.style.backgroundColor = 'var(--wrong-red)';
            }
            exp.style.display = 'block';
        });
    });

    /* --- EX 3: SORT LOGIC --- */
    const sortData = [
        { words: ["you", "like", "Would", "to", "the", "to", "go", "museum?"], ans: "Would you like to go to the museum?", vn: "B·∫°n c√≥ mu·ªën ƒëi ƒë·∫øn vi·ªán b·∫£o t√†ng kh√¥ng?", exp: "C·∫•u tr√∫c l·ªùi m·ªùi: Would you like + to V + (ƒë·ªãa ƒëi·ªÉm)." },
        { words: ["she", "What", "to", "like", "would", "do?"], ans: "What would she like to do?", vn: "C√¥ ·∫•y mu·ªën l√†m g√¨?", exp: "C√¢u h·ªèi b·∫Øt ƒë·∫ßu b·∫±ng t·ª´ ƒë·ªÉ h·ªèi 'What', tr·ª£ ƒë·ªông t·ª´ 'would', ch·ªß ng·ªØ 'she', v√† 'like to do'." },
        { words: ["like", "go", "I'd", "to", "camping.", "to"], ans: "I'd like to go to camping.", altAns: "I'd like to go camping. to", vn: "T√¥i mu·ªën ƒëi c·∫Øm tr·∫°i.", exp: "C·∫•u tr√∫c di·ªÖn t·∫£ mong mu·ªën S + 'd like to + V. L∆∞u √Ω: ƒê·ªÅ b√†i g·ªëc b·ªã d∆∞ m·ªôt ch·ªØ 'to', ƒë√°p √°n chu·∫©n l√† 'I'd like to go camping', ta s·∫Ω s·∫Øp x·∫øp sao cho h·ª£p logic c√°c t·ª´ ƒë∆∞·ª£c cung c·∫•p." },
        { words: ["thank", "No,", "you."], ans: "No, thank you.", vn: "Kh√¥ng, c·∫£m ∆°n b·∫°n.", exp: "C√¢u t·ª´ ch·ªëi l·ªãch s·ª± ti√™u chu·∫©n." },
        { words: ["where", "like", "they", "would", "go?", "to"], ans: "Where would they like to go?", vn: "H·ªç mu·ªën ƒëi ƒë√¢u?", exp: "T·ª´ ƒë·ªÉ h·ªèi 'Where' + would + S + like + to V." }
    ];

    const sortContainer = document.getElementById('sort-container');
    sortData.forEach((item, index) => {
        let card = document.createElement('div');
        card.className = 'question-card sort-card';
        card.innerHTML = `
            <div class="question-text">${index + 21}. S·∫Øp x·∫øp t·ª´:</div>
            <div class="answer-drop" id="drop-${index}"></div>
            <div class="word-bank" id="bank-${index}"></div>
            <div class="explanation">
                <h4>üí° Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                <p><strong>1. D·ªãch nghƒ©a:</strong> ${item.vn}</p>
                <p><strong>2. C√¢u ho√†n ch·ªânh:</strong> <span class="highlight">${item.ans.replace('. to', '')}</span></p>
                <p><strong>3. Gi·∫£i th√≠ch:</strong> ${item.exp}</p>
            </div>
        `;
        sortContainer.appendChild(card);

        const bank = card.querySelector('.word-bank');
        const drop = card.querySelector('.answer-drop');
        const exp = card.querySelector('.explanation');
        let shuffledWords = [...item.words];
        shuffleArray(shuffledWords);
        
        let answered = false;

        shuffledWords.forEach(w => {
            let pill = document.createElement('div');
            pill.className = 'word-pill';
            pill.innerText = w;
            pill.onclick = function() {
                if(answered) return;
                if(this.parentElement === bank) {
                    drop.appendChild(this);
                } else {
                    bank.appendChild(this);
                }
                
                // Check answer if bank is empty
                if(bank.children.length === 0) {
                    let userSentence = Array.from(drop.children).map(c => c.innerText).join(' ').trim();
                    let cleanUser = userSentence.toLowerCase().replace(/[^a-z0-9]/g, '');
                    let cleanAns = item.ans.toLowerCase().replace(/[^a-z0-9]/g, '');
                    let cleanAlt = item.altAns ? item.altAns.toLowerCase().replace(/[^a-z0-9]/g, '') : null;

                    answered = true;
                    if(cleanUser === cleanAns || cleanUser === cleanAlt) {
                        drop.style.borderColor = 'var(--correct-green)';
                        drop.style.backgroundColor = 'rgba(0, 210, 106, 0.1)';
                        playDing();
                        fireConfetti();
                        score++;
                    } else {
                        drop.style.borderColor = 'var(--wrong-red)';
                        drop.style.backgroundColor = 'rgba(255, 71, 87, 0.1)';
                        card.classList.add('shake');
                        playBuzz();
                        // Show correct answer in drop zone automatically
                        drop.innerHTML = '';
                        item.ans.split(' ').forEach(aw => {
                            let correctPill = document.createElement('div');
                            correctPill.className = 'word-pill';
                            correctPill.style.backgroundColor = 'var(--correct-green)';
                            correctPill.innerText = aw;
                            drop.appendChild(correctPill);
                        });
                    }
                    exp.style.display = 'block';
                }
            };
            bank.appendChild(pill);
        });
    });

    /* --- EX 5: FIND & CORRECT LOGIC --- */
    document.querySelectorAll('.mistake-card').forEach(card => {
        const btn = card.querySelector('.check-btn');
        const inErr = card.querySelector('.input-err');
        const inFix = card.querySelector('.input-fix');
        const exp = card.querySelector('.explanation');
        let answered = false;

        btn.addEventListener('click', () => {
            if(answered) return;
            if(!inErr.value.trim() || !inFix.value.trim()) return;
            
            answered = true;
            inErr.disabled = true;
            inFix.disabled = true;
            btn.style.display = 'none';

            const userErr = inErr.value.trim().toLowerCase();
            const userFix = inFix.value.trim().toLowerCase();
            const ansErr = inErr.getAttribute('data-ans');
            const ansFix = inFix.getAttribute('data-ans');

            if((userErr === ansErr) && (userFix === ansFix || (ansFix.includes(userFix) && userFix.length > 2))) {
                inErr.style.borderColor = 'var(--correct-green)';
                inFix.style.borderColor = 'var(--correct-green)';
                inErr.style.backgroundColor = 'rgba(0,210,106,0.1)';
                inFix.style.backgroundColor = 'rgba(0,210,106,0.1)';
                playDing();
                fireConfetti();
                score++;
            } else {
                inErr.style.borderColor = 'var(--wrong-red)';
                inFix.style.borderColor = 'var(--wrong-red)';
                card.classList.add('shake');
                playBuzz();
                inErr.value = "Sai: " + ansErr;
                inFix.value = "S·ª≠a: " + ansFix;
            }
            exp.style.display = 'block';
        });
    });

    /* --- SUBMIT LOGIC --- */
    document.getElementById('submitBtn').addEventListener('click', () => {
        const modal = document.getElementById('scoreModal');
        const scoreText = document.getElementById('scoreText');
        const compText = document.getElementById('complimentText');
        
        scoreText.innerText = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${score} / ${TOTAL_QUESTIONS} c√¢u.`;
        
        let msg = "";
        if(score === TOTAL_QUESTIONS) msg = "Tuy·ªát v·ªùi √¥ng m·∫∑t tr·ªùi! ƒê·ªânh qu√° b·∫°n ∆°i! üåüüåüüåü";
        else if(score >= 25) msg = "Gi·ªèi l·∫Øm! B·∫°n n·∫Øm b√†i r·∫•t ch·∫Øc! üî•";
        else if(score >= 15) msg = "Kh√° l·∫Øm, c·ªë g·∫Øng ch√∫t n·ªØa l√† ho√†n h·∫£o! üí™";
        else msg = "ƒê·ª´ng bu·ªìn, ƒë·ªçc k·ªπ ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ gi·ªèi h∆°n nha! ‚ù§Ô∏è";
        
        compText.innerText = msg;
        modal.style.display = 'flex';
        
        if(score >= 15) fireConfetti();
    });
</script>

</body>
</html>