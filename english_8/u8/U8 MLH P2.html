<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 8: Shopping - Grammar & Tenses (Part 2) - Ms Mai An ULIS</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #f0f4f8;
            --text-color: #2d3436;
            --card-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #e0f7fa;
            background-image: radial-gradient(#00C9A7 1px, transparent 1px), radial-gradient(#00C9A7 1px, transparent 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-color);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding-bottom: 80px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 2px solid var(--primary-purple);
            position: relative;
            overflow: hidden;
        }

        header h1 {
            color: var(--primary-purple);
            font-weight: 800;
            font-size: 1.8rem;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        header p {
            color: #666;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .teacher-badge {
            background: var(--primary-teal);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            display: inline-block;
            margin-top: 10px;
            font-weight: 700;
            box-shadow: 0 4px 0 #008f7a;
        }

        /* Question Card */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 0 var(--shadow-color);
            border: 2px solid #eee;
            position: relative;
            transition: transform 0.3s ease;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: var(--primary-purple);
            color: white;
            padding: 8px 15px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.9rem;
            box-shadow: 0 4px 0 #6c3da3;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.5;
            color: #2d3436;
            margin-bottom: 25px;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 #ccc;
            text-align: left;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-label {
            width: 30px;
            height: 30px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            color: #888;
            flex-shrink: 0;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-purple);
            box-shadow: 0 7px 0 #ccc;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #ccc;
        }

        /* Correct/Wrong States */
        .option-btn.correct {
            background: var(--correct-green);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 5px 0 #009e4f;
        }
        
        .option-btn.correct .option-label {
            background: white;
            color: var(--correct-green);
        }

        .option-btn.wrong {
            background: var(--wrong-red);
            color: white;
            border-color: #e03b4b;
            box-shadow: 0 5px 0 #c23642;
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        .option-btn.wrong .option-label {
            background: white;
            color: var(--wrong-red);
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 1;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #fdf6e3;
            border: 2px dashed var(--primary-purple);
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-box.show {
            display: block;
        }

        .explanation-title {
            color: var(--primary-purple);
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #444;
            white-space: pre-line; /* Preserves line breaks */
        }

        /* Sticky Footer */
        .footer-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px 20px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .score-display {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--primary-teal);
        }

        .submit-btn {
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 5px 0 #6c3da3;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            transform: scale(1.05);
        }

        .submit-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 0 #6c3da3;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 0 rgba(0,0,0,0.2);
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .modal-score {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-teal);
            margin: 20px 0;
        }

        .modal-message {
            font-size: 1.5rem;
            color: #666;
            margin-bottom: 30px;
        }

        /* Animations */
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Utility for highlighting text in explanation */
        .highlight-bold {
            font-weight: bold;
            color: var(--primary-purple);
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Unit 8: Shopping</h1>
            <p>Grammar & Tenses (Part 2)</p>
            <div class="teacher-badge"><i class="fas fa-chalkboard-teacher"></i> Ms Mai An ULIS</div>
        </header>

        <div id="quiz-container">
            <!-- Questions will be injected here via JavaScript -->
        </div>
    </div>

    <div class="footer-bar">
        <div class="score-display">
            Score: <span id="current-score">0</span> / <span id="total-questions">0</span>
        </div>
        <button class="submit-btn" onclick="finishQuiz()">
            <i class="fas fa-flag-checkered"></i> N·ªôp B√†i
        </button>
    </div>

    <!-- Result Modal -->
    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2>K·∫øt Qu·∫£ C·ªßa B·∫°n</h2>
            <div class="modal-score" id="final-score">0/0</div>
            <p class="modal-message" id="final-message">L√†m t·ªët l·∫Øm!</p>
            <button class="submit-btn" onclick="location.reload()">
                <i class="fas fa-redo"></i> L√†m L·∫°i
            </button>
        </div>
    </div>

    <script>
        // --- SOUND EFFECTS (Base64 Encoded to keep Single File) ---
        const soundCorrect = new Audio("data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="); // Placeholder, using real synthesis below
        const soundWrong = new Audio("data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="); // Placeholder

        // Use AudioContext for generated sounds to ensure reliability without external files
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playCorrectSound() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            osc.type = 'sine';
            osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
            osc.frequency.setValueAtTime(659.25, audioCtx.currentTime + 0.1); // E5
            osc.frequency.setValueAtTime(783.99, audioCtx.currentTime + 0.2); // G5
            
            gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.5);

            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        }

        function playWrongSound() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            
            gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.3);

            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }

        // --- DATA ---
        const quizData = {
          "questions": [
            {
              "questionNumber": 1,
              "label": "VI.1",
              "question": "The supersale ______ at three o‚Äôclock, so please be here by one.",
              "answerOptions": [
                { "text": "starts", "isCorrect": true },
                { "text": "is starting", "isCorrect": false },
                { "text": "will start", "isCorrect": false },
                { "text": "start", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> ƒê·ª£t si√™u gi·∫£m gi√° b·∫Øt ƒë·∫ßu l√∫c 3 gi·ªù, v√¨ v·∫≠y vui l√≤ng c√≥ m·∫∑t l√∫c 1 gi·ªù.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. starts (v - present simple): b·∫Øt ƒë·∫ßu (d√πng cho l·ªãch tr√¨nh/th·ªùi gian bi·ªÉu).<br>- B. is starting (v - present continuous): ƒëang b·∫Øt ƒë·∫ßu.<br>- C. will start (v - future simple): s·∫Ω b·∫Øt ƒë·∫ßu.<br>- D. start (v): nguy√™n th·ªÉ (sai ng·ªØ ph√°p v·ªõi ch·ªß ng·ªØ s·ªë √≠t 'The supersale').<br><br><b>Gi·∫£i th√≠ch:</b> L·ªãch tr√¨nh c·ªë ƒë·ªãnh c·ªßa c·ª≠a h√†ng/s·ª± ki·ªán (timetables) lu√¥n d√πng th√¨ Hi·ªán t·∫°i ƒë∆°n."
            },
            {
              "questionNumber": 2,
              "label": "VI.5",
              "question": "Could you pick me up at the airport tomorrow morning? The plane ______ at 8.30.",
              "answerOptions": [
                { "text": "lands", "isCorrect": true },
                { "text": "is landing", "isCorrect": false },
                { "text": "will land", "isCorrect": false },
                { "text": "landed", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> B·∫°n c√≥ th·ªÉ ƒë√≥n t√¥i ·ªü s√¢n bay s√°ng mai kh√¥ng? M√°y bay h·∫° c√°nh l√∫c 8:30.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. lands (v - present simple): h·∫° c√°nh.<br>- B. is landing (v - present continuous): ƒëang h·∫° c√°nh.<br>- C. will land (v - future simple): s·∫Ω h·∫° c√°nh.<br>- D. landed (v - past simple): ƒë√£ h·∫° c√°nh.<br><br><b>Gi·∫£i th√≠ch:</b> Gi·ªù m√°y bay h·∫° c√°nh l√† l·ªãch tr√¨nh c·ªë ƒë·ªãnh (timetable) -> D√πng Hi·ªán t·∫°i ƒë∆°n."
            },
            {
              "questionNumber": 3,
              "label": "VII.1",
              "question": "Our ferry ______ for Amsterdam at 7 tomorrow morning.",
              "answerOptions": [
                { "text": "departs", "isCorrect": true },
                { "text": "is departing", "isCorrect": false },
                { "text": "will depart", "isCorrect": false },
                { "text": "depart", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Ph√† c·ªßa ch√∫ng t√¥i kh·ªüi h√†nh ƒëi Amsterdam l√∫c 7 gi·ªù s√°ng mai.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. departs (v): kh·ªüi h√†nh (l·ªãch tr√¨nh).<br>- B. is departing (v): ƒëang kh·ªüi h√†nh (k·∫ø ho·∫°ch c√° nh√¢n).<br>- C. will depart (v): s·∫Ω kh·ªüi h√†nh.<br>- D. depart (v): nguy√™n th·ªÉ.<br><br><b>Gi·∫£i th√≠ch:</b> L·ªãch tr√¨nh t√†u ph√† (public transport schedule) d√πng th√¨ Hi·ªán t·∫°i ƒë∆°n."
            },
            {
              "questionNumber": 4,
              "label": "VII.3",
              "question": "After the reconstruction, the supermarket ______ again on Monday.",
              "answerOptions": [
                { "text": "opens", "isCorrect": true },
                { "text": "is opening", "isCorrect": false },
                { "text": "open", "isCorrect": false },
                { "text": "will open", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Sau khi tu s·ª≠a, si√™u th·ªã m·ªü c·ª≠a l·∫°i v√†o th·ª© Hai.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. opens (v): m·ªü c·ª≠a.<br>- B. is opening (v): ƒëang m·ªü c·ª≠a.<br>- C. open (v): m·ªü.<br>- D. will open (v): s·∫Ω m·ªü.<br><br><b>Gi·∫£i th√≠ch:</b> L·ªãch ho·∫°t ƒë·ªông c·ªßa c∆° quan/c·ª≠a h√†ng d√πng th√¨ Hi·ªán t·∫°i ƒë∆°n."
            },
            {
              "questionNumber": 5,
              "label": "VII.5",
              "question": "They‚Äôre holding a farmers‚Äô market next month. There ______ displays of new types of vegetables.",
              "answerOptions": [
                { "text": "will be", "isCorrect": true },
                { "text": "are", "isCorrect": false },
                { "text": "is", "isCorrect": false },
                { "text": "being", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> H·ªç s·∫Ω t·ªï ch·ª©c ch·ª£ n√¥ng s·∫£n v√†o th√°ng t·ªõi. S·∫Ω c√≥ c√°c gian h√†ng tr∆∞ng b√†y c√°c lo·∫°i rau m·ªõi.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. will be (v): s·∫Ω c√≥ (d·ª± ƒëo√°n/s·ª± vi·ªác trong t∆∞∆°ng lai).<br>- B. are (v): l√†/c√≥.<br>- C. is (v): l√†/c√≥.<br>- D. being (v): ƒëang l√†.<br><br><b>Gi·∫£i th√≠ch:</b> 'Next month' ch·ªâ t∆∞∆°ng lai. ƒê√¢y l√† s·ª± vi·ªác s·∫Ω di·ªÖn ra, d√πng 'will be'."
            },
            {
              "questionNumber": 6,
              "label": "VII.8",
              "question": "Kate phoned up. She ______ round to see us this weekend.",
              "answerOptions": [
                { "text": "is coming", "isCorrect": true },
                { "text": "comes", "isCorrect": false },
                { "text": "come", "isCorrect": false },
                { "text": "will come", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Kate ƒë√£ g·ªçi ƒëi·ªán. C√¥ ·∫•y s·∫Ω gh√© thƒÉm ch√∫ng ta v√†o cu·ªëi tu·∫ßn n√†y.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. is coming (v): s·∫Ω ƒë·∫øn (k·∫ø ho·∫°ch/s·∫Øp x·∫øp ƒë√£ ƒë·ªãnh).<br>- B. comes (v): ƒë·∫øn (l·ªãch tr√¨nh).<br>- C. come (v): ƒë·∫øn.<br>- D. will come (v): s·∫Ω ƒë·∫øn (quy·∫øt ƒë·ªãnh t·ª©c th·ªùi).<br><br><b>Gi·∫£i th√≠ch:</b> Vi·ªác Kate ƒë√£ g·ªçi ƒëi·ªán (phoned up) ch·ª©ng t·ªè ƒë√¢y l√† m·ªôt k·∫ø ho·∫°ch ƒë√£ ƒë∆∞·ª£c s·∫Øp x·∫øp (arrangement) -> D√πng Hi·ªán t·∫°i ti·∫øp di·ªÖn mang nghƒ©a t∆∞∆°ng lai."
            },
            {
              "questionNumber": 7,
              "label": "VII.9",
              "question": "I‚Äôm free this afternoon, so I think I ______ shopping for some new clothes.",
              "answerOptions": [
                { "text": "will go", "isCorrect": true },
                { "text": "go", "isCorrect": false },
                { "text": "am going", "isCorrect": false },
                { "text": "goes", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Chi·ªÅu nay t√¥i r·∫£nh, n√™n t√¥i nghƒ© t√¥i s·∫Ω ƒëi mua s·∫Øm qu·∫ßn √°o m·ªõi.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. will go (v): s·∫Ω ƒëi.<br>- B. go (v): ƒëi.<br>- C. am going (v): s·∫Ω ƒëi (d·ª± ƒë·ªãnh).<br>- D. goes (v): ƒëi.<br><br><b>Gi·∫£i th√≠ch:</b> C·ª•m t·ª´ 'I think' (t√¥i nghƒ©) th∆∞·ªùng ƒëi v·ªõi T∆∞∆°ng lai ƒë∆°n (will) ƒë·ªÉ di·ªÖn t·∫£ √Ω ƒë·ªãnh ho·∫∑c quy·∫øt ƒë·ªãnh ƒë∆∞·ª£c ƒë∆∞a ra ngay l√∫c n√≥i."
            },
            {
              "questionNumber": 8,
              "label": "VII.11",
              "question": "Lisa is excited because they ______ her package today.",
              "answerOptions": [
                { "text": "are delivering", "isCorrect": true },
                { "text": "deliver", "isCorrect": false },
                { "text": "delivered", "isCorrect": false },
                { "text": "will deliver", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Lisa r·∫•t h√°o h·ª©c v√¨ h·ªç s·∫Ω giao g√≥i h√†ng cho c√¥ ·∫•y h√¥m nay.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. are delivering (v): ƒëang/s·∫Ω giao (k·∫ø ho·∫°ch/s·ª± vi·ªác ƒëang di·ªÖn ti·∫øn).<br>- B. deliver (v): giao (th√≥i quen).<br>- C. delivered (v): ƒë√£ giao.<br>- D. will deliver (v): s·∫Ω giao.<br><br><b>Gi·∫£i th√≠ch:</b> 'Today' (h√¥m nay) trong ng·ªØ c·∫£nh n√†y di·ªÖn t·∫£ m·ªôt s·ª± vi·ªác ƒë√£ ƒë∆∞·ª£c l√™n l·ªãch ho·∫∑c ƒëang trong qu√° tr√¨nh th·ª±c hi·ªán trong ng√†y -> D√πng Hi·ªán t·∫°i ti·∫øp di·ªÖn."
            },
            {
              "questionNumber": 9,
              "label": "IX.1",
              "question": "Most of the products at this farmers‚Äô market ______ home-grown and home-made.",
              "answerOptions": [
                { "text": "are", "isCorrect": true },
                { "text": "was", "isCorrect": false },
                { "text": "is", "isCorrect": false },
                { "text": "will be", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> H·∫ßu h·∫øt c√°c s·∫£n ph·∫©m t·∫°i ch·ª£ n√¥ng s·∫£n n√†y l√† ƒë·ªì nh√† tr·ªìng v√† nh√† l√†m.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. was (v): l√† (qu√° kh·ª©, s·ªë √≠t).<br>- B. are (v): l√† (hi·ªán t·∫°i, s·ªë nhi·ªÅu).<br>- C. is (v): l√† (hi·ªán t·∫°i, s·ªë √≠t).<br>- D. will be (v): s·∫Ω l√†.<br><br><b>Gi·∫£i th√≠ch:</b> Ch·ªß ng·ªØ 'Most of the products' (H·∫ßu h·∫øt s·∫£n ph·∫©m) l√† s·ªë nhi·ªÅu -> D√πng 'are'. ƒê√¢y l√† c√¢u mi√™u t·∫£ s·ª± th·∫≠t hi·ªÉn nhi√™n."
            },
            {
              "questionNumber": 10,
              "label": "IX.2",
              "question": "Carla hates bargaining, so she hopes normal markets ______ price tags in the future.",
              "answerOptions": [
                { "text": "will have", "isCorrect": true },
                { "text": "have", "isCorrect": false },
                { "text": "are having", "isCorrect": false },
                { "text": "had", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Carla gh√©t m·∫∑c c·∫£, v√¨ v·∫≠y c√¥ ·∫•y hy v·ªçng c√°c ch·ª£ b√¨nh th∆∞·ªùng s·∫Ω c√≥ m√°c gi√° trong t∆∞∆°ng lai.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. have (v): c√≥.<br>- B. are having (v): ƒëang c√≥.<br>- C. had (v): ƒë√£ c√≥.<br>- D. will have (v): s·∫Ω c√≥.<br><br><b>Gi·∫£i th√≠ch:</b> 'In the future' (trong t∆∞∆°ng lai) v√† ƒë·ªông t·ª´ 'hopes' (hy v·ªçng) -> D√πng T∆∞∆°ng lai ƒë∆°n."
            },
            {
              "questionNumber": 11,
              "label": "IX.3",
              "question": "I ______ eat junk food because I prefer healthy food.",
              "answerOptions": [
                { "text": "never", "isCorrect": true },
                { "text": "always", "isCorrect": false },
                { "text": "often", "isCorrect": false },
                { "text": "sometimes", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> T√¥i kh√¥ng bao gi·ªù ƒÉn ƒë·ªì ƒÉn v·∫∑t v√¨ t√¥i th√≠ch ƒë·ªì ƒÉn l√†nh m·∫°nh h∆°n.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. never (adv): kh√¥ng bao gi·ªù.<br>- B. always (adv): lu√¥n lu√¥n.<br>- C. often (adv): th∆∞·ªùng xuy√™n.<br>- D. sometimes (adv): th·ªânh tho·∫£ng.<br><br><b>Gi·∫£i th√≠ch:</b> V·∫ø sau 'prefer healthy food' (th√≠ch ƒë·ªì l√†nh m·∫°nh) gi·∫£i th√≠ch l√Ω do cho vi·ªác KH√îNG ƒÉn ƒë·ªì v·∫∑t -> Ch·ªçn 'never'."
            },
            {
              "questionNumber": 12,
              "label": "IX.4",
              "question": "We ______ a party at Christmas. Would you like to come?",
              "answerOptions": [
                { "text": "are having", "isCorrect": true },
                { "text": "have", "isCorrect": false },
                { "text": "had", "isCorrect": false },
                { "text": "will have", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Ch√∫ng t√¥i s·∫Ω t·ªï ch·ª©c m·ªôt b·ªØa ti·ªác v√†o Gi√°ng sinh. B·∫°n c√≥ mu·ªën ƒë·∫øn kh√¥ng?<br><br><b>Ph√¢n t√≠ch:</b><br>- A. have (v): c√≥ (th√≥i quen).<br>- B. had (v): ƒë√£ c√≥.<br>- C. are having (v): s·∫Ω c√≥ (k·∫ø ho·∫°ch).<br>- D. will have (v): s·∫Ω c√≥.<br><br><b>Gi·∫£i th√≠ch:</b> Vi·ªác m·ªùi ng∆∞·ªùi kh√°c ('Would you like to come?') cho th·∫•y b·ªØa ti·ªác l√† m·ªôt k·∫ø ho·∫°ch ƒë√£ ƒë∆∞·ª£c s·∫Øp x·∫øp (arrangement) -> D√πng Hi·ªán t·∫°i ti·∫øp di·ªÖn."
            },
            {
              "questionNumber": 13,
              "label": "IX.5",
              "question": "You‚Äôd better go to bed early. The plane ______ at 6 o‚Äôclock tomorrow morning so we‚Äôll have to be up by 4.30!",
              "answerOptions": [
                { "text": "leaves", "isCorrect": true },
                { "text": "will leave", "isCorrect": false },
                { "text": "leave", "isCorrect": false },
                { "text": "is leaving", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> B·∫°n n√™n ƒëi ng·ªß s·ªõm. M√°y bay c·∫•t c√°nh l√∫c 6 gi·ªù s√°ng mai n√™n ch√∫ng ta s·∫Ω ph·∫£i d·∫≠y l√∫c 4:30!<br><br><b>Ph√¢n t√≠ch:</b><br>- A. will leave (v): s·∫Ω r·ªùi ƒëi.<br>- B. leaves (v): r·ªùi ƒëi (l·ªãch tr√¨nh).<br>- C. leave (v): r·ªùi ƒëi.<br>- D. is leaving (v): ƒëang r·ªùi ƒëi.<br><br><b>Gi·∫£i th√≠ch:</b> Gi·ªù m√°y bay c·∫•t c√°nh l√† l·ªãch tr√¨nh (timetable) -> D√πng Hi·ªán t·∫°i ƒë∆°n."
            },
            {
              "questionNumber": 14,
              "label": "IX.6",
              "question": "The assistants ______ today. All of them are on strike in front of the mall.",
              "answerOptions": [
                { "text": "aren‚Äôt working", "isCorrect": true },
                { "text": "don‚Äôt work", "isCorrect": false },
                { "text": "didn‚Äôt work", "isCorrect": false },
                { "text": "won‚Äôt work", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> C√°c nh√¢n vi√™n b√°n h√†ng h√¥m nay kh√¥ng l√†m vi·ªác. T·∫•t c·∫£ h·ªç ƒëang ƒë√¨nh c√¥ng tr∆∞·ªõc trung t√¢m mua s·∫Øm.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. don‚Äôt work (v): kh√¥ng l√†m vi·ªác (th√≥i quen).<br>- B. didn‚Äôt work (v): ƒë√£ kh√¥ng l√†m vi·ªác.<br>- C. aren‚Äôt working (v): ƒëang kh√¥ng l√†m vi·ªác (t√¨nh tr·∫°ng t·∫°m th·ªùi).<br>- D. won‚Äôt work (v): s·∫Ω kh√¥ng l√†m vi·ªác.<br><br><b>Gi·∫£i th√≠ch:</b> 'Today' v√† 'are on strike' (ƒëang ƒë√¨nh c√¥ng) ch·ªâ m·ªôt s·ª± vi·ªác ƒëang di·ªÖn ra mang t√≠nh t·∫°m th·ªùi trong ng√†y h√¥m nay -> D√πng Hi·ªán t·∫°i ti·∫øp di·ªÖn."
            },
            {
              "questionNumber": 15,
              "label": "IX.7",
              "question": "My grandmother ______ goes to the supermarket. Just once or twice a month!",
              "answerOptions": [
                { "text": "rarely", "isCorrect": true },
                { "text": "sometimes", "isCorrect": false },
                { "text": "always", "isCorrect": false },
                { "text": "never", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> B√† t√¥i hi·∫øm khi ƒëi si√™u th·ªã. Ch·ªâ m·ªôt ho·∫∑c hai l·∫ßn m·ªôt th√°ng!<br><br><b>Ph√¢n t√≠ch:</b><br>- A. rarely (adv): hi·∫øm khi.<br>- B. sometimes (adv): th·ªânh tho·∫£ng.<br>- C. always (adv): lu√¥n lu√¥n.<br>- D. never (adv): kh√¥ng bao gi·ªù.<br><br><b>Gi·∫£i th√≠ch:</b> T·∫ßn su·∫•t 'once or twice a month' (1-2 l·∫ßn/th√°ng) l√† r·∫•t √≠t -> D√πng 'rarely' l√† ph√π h·ª£p nh·∫•t."
            },
            {
              "questionNumber": 16,
              "label": "IX.8",
              "question": "What time ______ your English lesson ______?",
              "answerOptions": [
                { "text": "does ... start", "isCorrect": true },
                { "text": "will ... start", "isCorrect": false },
                { "text": "do ... start", "isCorrect": false },
                { "text": "is ... starting", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Gi·ªù h·ªçc ti·∫øng Anh c·ªßa b·∫°n b·∫Øt ƒë·∫ßu l√∫c m·∫•y gi·ªù?<br><br><b>Ph√¢n t√≠ch:</b><br>- A. will ... start (v): s·∫Ω b·∫Øt ƒë·∫ßu.<br>- B. do ... start (v): b·∫Øt ƒë·∫ßu (sai ng·ªØ ph√°p s·ªë √≠t/nhi·ªÅu).<br>- C. is ... starting (v): ƒëang b·∫Øt ƒë·∫ßu.<br>- D. does ... start (v): b·∫Øt ƒë·∫ßu (hi·ªán t·∫°i ƒë∆°n).<br><br><b>Gi·∫£i th√≠ch:</b> Gi·ªù h·ªçc l√† l·ªãch tr√¨nh c·ªë ƒë·ªãnh (timetable) -> D√πng Hi·ªán t·∫°i ƒë∆°n trong c√¢u h·ªèi (What time does...?)."
            },
            {
              "questionNumber": 17,
              "label": "IX.9",
              "question": "Do you have any plans for the weekend? ~ Yes, I ______ to the shopping centre to buy some new clothes.",
              "answerOptions": [
                { "text": "am going", "isCorrect": true },
                { "text": "will go", "isCorrect": false },
                { "text": "goes", "isCorrect": false },
                { "text": "went", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> B·∫°n c√≥ k·∫ø ho·∫°ch g√¨ cho cu·ªëi tu·∫ßn ch∆∞a? ~ C√≥, t√¥i s·∫Ω ƒëi trung t√¢m mua s·∫Øm ƒë·ªÉ mua qu·∫ßn √°o m·ªõi.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. am going (v): s·∫Ω ƒëi (k·∫ø ho·∫°ch/d·ª± ƒë·ªãnh).<br>- B. will go (v): s·∫Ω ƒëi (quy·∫øt ƒë·ªãnh t·ª©c th·ªùi).<br>- C. goes (v): ƒëi.<br>- D. went (v): ƒë√£ ƒëi.<br><br><b>Gi·∫£i th√≠ch:</b> C√¢u h·ªèi v·ªÅ 'plans' (k·∫ø ho·∫°ch) -> C√¢u tr·∫£ l·ªùi d√πng Hi·ªán t·∫°i ti·∫øp di·ªÖn (am going) ƒë·ªÉ di·ªÖn t·∫£ d·ª± ƒë·ªãnh ƒë√£ c√≥ s·∫µn."
            },
            {
              "questionNumber": 18,
              "label": "IX.10",
              "question": "Hurry up! I don‚Äôt want to miss any of the game. It ______ at 1.00.",
              "answerOptions": [
                { "text": "starts", "isCorrect": true },
                { "text": "will start", "isCorrect": false },
                { "text": "is starting", "isCorrect": false },
                { "text": "started", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Nhanh l√™n! T√¥i kh√¥ng mu·ªën b·ªè l·ª° ch√∫t n√†o c·ªßa tr·∫≠n ƒë·∫•u. N√≥ b·∫Øt ƒë·∫ßu l√∫c 1 gi·ªù.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. will start (v): s·∫Ω b·∫Øt ƒë·∫ßu.<br>- B. starts (v): b·∫Øt ƒë·∫ßu (l·ªãch tr√¨nh).<br>- C. is starting (v): ƒëang b·∫Øt ƒë·∫ßu.<br>- D. started (v): ƒë√£ b·∫Øt ƒë·∫ßu.<br><br><b>Gi·∫£i th√≠ch:</b> Gi·ªù b·∫Øt ƒë·∫ßu tr·∫≠n ƒë·∫•u l√† l·ªãch tr√¨nh c·ªë ƒë·ªãnh -> D√πng Hi·ªán t·∫°i ƒë∆°n."
            },
            {
              "questionNumber": 19,
              "label": "IX.11",
              "question": "The children ______ have cereal for breakfast. Most breakfasts!",
              "answerOptions": [
                { "text": "usually", "isCorrect": true },
                { "text": "always", "isCorrect": false },
                { "text": "never", "isCorrect": false },
                { "text": "sometimes", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> B·ªçn tr·∫ª th∆∞·ªùng ƒÉn ng≈© c·ªëc v√†o b·ªØa s√°ng. H·∫ßu h·∫øt c√°c b·ªØa s√°ng!<br><br><b>Ph√¢n t√≠ch:</b><br>- A. always (adv): lu√¥n lu√¥n (100%).<br>- B. never (adv): kh√¥ng bao gi·ªù.<br>- C. usually (adv): th∆∞·ªùng xuy√™n (ƒëa s·ªë).<br>- D. sometimes (adv): th·ªânh tho·∫£ng.<br><br><b>Gi·∫£i th√≠ch:</b> C·ª•m t·ª´ 'Most breakfasts' (H·∫ßu h·∫øt c√°c b·ªØa s√°ng) t∆∞∆°ng ƒë∆∞∆°ng v·ªõi m·ª©c ƒë·ªô th∆∞·ªùng xuy√™n cao nh∆∞ng ch∆∞a tuy·ªát ƒë·ªëi -> D√πng 'usually' l√† h·ª£p l√Ω nh·∫•t."
            },
            {
              "questionNumber": 20,
              "label": "IX.12",
              "question": "Oh no, there are no instant noodles. I ______ some when I go to the convenience shop.",
              "answerOptions": [
                { "text": "will buy", "isCorrect": true },
                { "text": "am buying", "isCorrect": false },
                { "text": "buy", "isCorrect": false },
                { "text": "don't buy", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> √îi kh√¥ng, h·∫øt m√¨ g√≥i r·ªìi. T√¥i s·∫Ω mua m·ªôt √≠t khi t√¥i ƒëi c·ª≠a h√†ng ti·ªán l·ª£i.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. am buying (v): ƒëang/s·∫Ω mua (k·∫ø ho·∫°ch).<br>- B. will buy (v): s·∫Ω mua (quy·∫øt ƒë·ªãnh t·ª©c th·ªùi).<br>- C. buy (v): mua.<br>- D. don't buy (v): kh√¥ng mua.<br><br><b>Gi·∫£i th√≠ch:</b> 'Oh no...' cho th·∫•y ng∆∞·ªùi n√≥i m·ªõi ph√°t hi·ªán ra s·ª± vi·ªác v√† ƒë∆∞a ra quy·∫øt ƒë·ªãnh mua ngay l√∫c n√≥i -> D√πng T∆∞∆°ng lai ƒë∆°n (will)."
            },
            {
              "questionNumber": 21,
              "label": "IX.13",
              "question": "Before going to the grocery store, I ______ make a shopping list to ensure I don‚Äôt forget anything.",
              "answerOptions": [
                { "text": "always", "isCorrect": true },
                { "text": "never", "isCorrect": false },
                { "text": "sometimes", "isCorrect": false },
                { "text": "rarely", "isCorrect": false }
              ],
              "rationale": "<b>D·ªãch nghƒ©a:</b> Tr∆∞·ªõc khi ƒëi c·ª≠a h√†ng t·∫°p h√≥a, t√¥i lu√¥n l·∫≠p danh s√°ch mua s·∫Øm ƒë·ªÉ ƒë·∫£m b·∫£o t√¥i kh√¥ng qu√™n th·ª© g√¨.<br><br><b>Ph√¢n t√≠ch:</b><br>- A. never (adv): kh√¥ng bao gi·ªù.<br>- B. sometimes (adv): th·ªânh tho·∫£ng.<br>- C. rarely (adv): hi·∫øm khi.<br>- D. always (adv): lu√¥n lu√¥n.<br><br><b>Gi·∫£i th√≠ch:</b> M·ª•c ƒë√≠ch 'to ensure I don't forget anything' (ƒë·ªÉ ƒë·∫£m b·∫£o kh√¥ng qu√™n g√¨) cho th·∫•y ƒë√¢y l√† m·ªôt th√≥i quen c·∫©n th·∫≠n v√† th∆∞·ªùng xuy√™n -> D√πng 'always'."
            }
          ]
        };

        let currentScore = 0;
        const totalQuestions = quizData.questions.length;

        // Initialize Quiz
        function initQuiz() {
            const container = document.getElementById('quiz-container');
            document.getElementById('total-questions').textContent = totalQuestions;

            quizData.questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-card-${index}`;

                // Question Header
                const header = `
                    <div class="question-header">
                        <div class="question-number">Question ${q.label}</div>
                    </div>
                `;

                // Question Text
                const text = `<div class="question-text">${q.question}</div>`;

                // Options Grid
                let optionsHtml = '<div class="options-grid">';
                const letters = ['A', 'B', 'C', 'D'];
                
                q.answerOptions.forEach((opt, optIndex) => {
                    optionsHtml += `
                        <button class="option-btn" 
                                onclick="checkAnswer(${index}, ${optIndex}, this)" 
                                id="btn-${index}-${optIndex}"
                                data-correct="${opt.isCorrect}">
                            <div class="option-label">${letters[optIndex]}</div>
                            ${opt.text}
                        </button>
                    `;
                });
                optionsHtml += '</div>';

                // Explanation Box (Hidden initially)
                const explanationHtml = `
                    <div class="explanation-box" id="explain-${index}">
                        <div class="explanation-title">
                            <i class="fas fa-lightbulb"></i> Gi·∫£i th√≠ch chi ti·∫øt t·ª´ c√¥ Mai An:
                        </div>
                        <div class="explanation-content">
                            ${q.rationale}
                        </div>
                    </div>
                `;

                card.innerHTML = header + text + optionsHtml + explanationHtml;
                container.appendChild(card);
            });
        }

        // Check Answer Logic
        function checkAnswer(questionIndex, optionIndex, btnElement) {
            // Prevent changing answer
            const card = document.getElementById(`q-card-${questionIndex}`);
            if (card.classList.contains('answered')) return;
            
            card.classList.add('answered');
            const isCorrect = btnElement.getAttribute('data-correct') === 'true';
            const allBtns = card.querySelectorAll('.option-btn');
            
            // Disable all buttons in this card
            allBtns.forEach(btn => btn.disabled = true);

            if (isCorrect) {
                // Correct logic
                btnElement.classList.add('correct');
                playCorrectSound();
                currentScore++;
                document.getElementById('current-score').textContent = currentScore;
                
                // Confetti effect
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#00C9A7', '#8854C0', '#FFD700']
                });
            } else {
                // Wrong logic
                btnElement.classList.add('wrong');
                playWrongSound();
                
                // Highlight correct answer strictly
                allBtns.forEach(btn => {
                    if (btn.getAttribute('data-correct') === 'true') {
                        btn.classList.add('correct');
                    }
                });
            }

            // Show explanation
            const explainBox = document.getElementById(`explain-${questionIndex}`);
            explainBox.classList.add('show');
        }

        // Finish Quiz
        function finishQuiz() {
            const modal = document.getElementById('result-modal');
            const finalScoreEl = document.getElementById('final-score');
            const messageEl = document.getElementById('final-message');

            finalScoreEl.textContent = `${currentScore}/${totalQuestions}`;
            
            const percentage = (currentScore / totalQuestions) * 100;
            
            if (percentage === 100) {
                messageEl.textContent = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i ng·ªØ ph√°p! üåü";
                confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
            } else if (percentage >= 80) {
                messageEl.textContent = "L√†m t·ªët l·∫Øm! B·∫°n n·∫Øm r·∫•t v·ªØng ki·∫øn th·ª©c! üëç";
            } else if (percentage >= 50) {
                messageEl.textContent = "Kh√° t·ªët! C·ªë g·∫Øng xem l·∫°i c√°c c√¢u sai nh√©! üí™";
            } else {
                messageEl.textContent = "ƒê·ª´ng n·∫£n l√≤ng! H√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch v√† l√†m l·∫°i nh√©! üå±";
            }

            modal.style.display = 'flex';
        }

        // Initialize on load
        window.onload = initQuiz;

    </script>
</body>
</html>
