<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 8 Test - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0; /* T√≠m h·ªìng */
            --secondary: #00C9A7; /* Xanh ng·ªçc */
            --correct: #00D26A; /* Xanh l√° */
            --wrong: #FF4757; /* ƒê·ªè cam */
            --warning: #FFA502;
            --background: #f0f3f5;
            --card-bg: #ffffff;
            --text: #2f3542;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--background);
            background-image: radial-gradient(#d1d8e0 10%, transparent 10%);
            background-size: 20px 20px;
            color: var(--text);
            margin: 0;
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 { margin: 0; font-weight: 800; font-size: 2rem; text-shadow: 2px 2px 0px rgba(0,0,0,0.2); }
        .header p { margin: 5px 0 0; opacity: 0.9; font-size: 1.1rem; }

        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05), 0 10px 20px rgba(0,0,0,0.1);
            border: 2px solid #e1e1e1;
            transition: transform 0.2s;
        }

        .card-title {
            color: var(--primary);
            font-weight: 800;
            font-size: 1.3rem;
            margin-bottom: 15px;
            border-bottom: 2px dashed #eee;
            padding-bottom: 10px;
        }

        .reading-box {
            background: #f8f9fa;
            border-left: 5px solid var(--secondary);
            padding: 15px;
            border-radius: 10px;
            font-size: 1.05rem;
            line-height: 1.6;
            margin-bottom: 20px;
            white-space: pre-line;
        }

        .question-group { margin-bottom: 25px; }
        .question-text { font-weight: 700; margin-bottom: 10px; font-size: 1.1rem; }

        /* Options styling */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e1e1e1;
            border-radius: 12px;
            padding: 12px 15px;
            font-family: inherit;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #e1e1e1;
            position: relative;
        }

        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #d1d1d1;
            border-color: var(--secondary);
        }

        .option-btn:active {
            transform: translateY(2px);
            box-shadow: 0 0 0 #e1e1e1;
        }

        .option-btn.selected {
            background: #e3f2fd;
            border-color: var(--primary);
            box-shadow: 0 4px 0 var(--primary);
        }

        .option-btn.correct {
            background: var(--correct);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 4px 0 #00b85c;
        }

        .option-btn.wrong {
            background: var(--wrong);
            color: white;
            border-color: #d63031;
            box-shadow: 0 4px 0 #d63031;
        }

        /* Check Button per Question */
        .check-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            box-shadow: 0 4px 0 #009e82;
            transition: all 0.2s;
            display: inline-block;
        }
        .check-btn:active { transform: translateY(4px); box-shadow: none; }
        .check-btn:disabled { background: #ccc; cursor: not-allowed; box-shadow: none; }

        /* Explanation */
        .explanation {
            display: none;
            margin-top: 15px;
            background: #f0fff4;
            border: 2px solid var(--correct);
            border-radius: 12px;
            padding: 15px;
            animation: fadeIn 0.5s;
        }

        .explanation.visible { display: block; }
        
        .explanation h4 {
            margin: 0 0 10px 0;
            color: var(--correct);
            font-weight: 800;
        }

        .detail-row { margin-bottom: 8px; font-size: 0.95rem; }
        .highlight { font-weight: bold; color: var(--primary); }

        /* Glossary Table */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .glossary-table th { background: var(--primary); color: white; padding: 10px; }
        .glossary-table td { padding: 10px; border-bottom: 1px solid #eee; }
        .tag { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }
        .tag.n { background: #ffeaa7; color: #d35400; }
        .tag.v { background: #74b9ff; color: #0984e3; }
        .tag.adj { background: #a29bfe; color: #6c5ce7; }

        /* Submit Footer */
        .submit-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            z-index: 1000;
        }

        .submit-btn {
            background: var(--primary);
            color: white;
            font-size: 1.2rem;
            padding: 12px 40px;
            border: none;
            border-radius: 50px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 5px 0 #6c429c;
            transition: transform 0.2s;
        }
        .submit-btn:hover { transform: scale(1.05); }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .shake { animation: shake 0.3s; }

        /* Phonetics Underline */
        .u { text-decoration: underline; text-decoration-thickness: 2px; text-decoration-color: var(--primary); }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: fadeIn 0.4s;
        }
        .score-circle {
            width: 100px; height: 100px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 800;
            margin: 0 auto 20px;
        }
    </style>
</head>
<body>

<div class="header">
    <h1>UNIT 8: SHOPPING</h1>
    <p>Gi√°o vi√™n t·∫°o: Ms Mai An ULIS | B√†i ki·ªÉm tra t∆∞∆°ng t√°c</p>
</div>

<div class="container">

    <div class="card">
        <div class="card-title">I. GAP FILL: DUBAI MALL</div>
        <div class="reading-box">
            Dubai Mall is the world's largest destination for <b>(1) ________</b>, entertainment and leisure, located next to the world's tallest building, the Burj Khalifa. Featuring over 1,200 <b>(2) ________</b> stores, two major department stores and hundreds of food and beverage outlets, Dubai Mall <b>(3) ________</b> more than 1 million sqm - an area equivalent to 200 football pitches. For lovers of high fashion, over 70 signature outlets beckon your <b>(4) ________</b>, including retailers such as Bloomingdale's and Galeries Lafayette, the first in the Middle East. For haute couture, head to Fashion Avenue where you can <b>(5) ________</b> the latest collections from world renowned designers and <b>(6) ________</b> such as Versace, Burberry and more. You can also find the finest gold jewellery in the Gold Souk as well as the latest in <b>(7) ________</b> at Level Shoes. The Dubai Mall is a must-visit for <b>(8) ________</b> and fun loving families with kids.
            
            <table class="glossary-table">
                <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                <tr><td>Destination</td><td><span class="tag n">n</span></td><td>ƒêi·ªÉm ƒë·∫øn</td></tr>
                <tr><td>Leisure</td><td><span class="tag n">n</span></td><td>Gi·∫£i tr√≠, th∆∞ gi√£n</td></tr>
                <tr><td>Outlet</td><td><span class="tag n">n</span></td><td>C·ª≠a h√†ng ƒë·∫°i l√Ω</td></tr>
                <tr><td>Haute couture</td><td><span class="tag n">n</span></td><td>Th·ªùi trang cao c·∫•p</td></tr>
                <tr><td>Beckon</td><td><span class="tag v">v</span></td><td>V·∫´y g·ªçi, thu h√∫t</td></tr>
            </table>
        </div>

        <div id="p1_questions"></div>
    </div>

    <div class="card">
        <div class="card-title">II. READING COMPREHENSION: ONLINE SHOPPING</div>
        <div class="reading-box">
            Online shopping has changed the way that people approach buying things. Now, from the comfort of your couch, you can purchase products ranging from groceries to heavy equipment. Depending on where you live, you can have those items delivered to your home within 24 hours. In addition to being convenient, consumers can save money on everything they buy online. For example, using Lazada coupons or entering your email when buying for the first time can save you significant money. All of this are reasons why so many people around the world prefer to shop online for products and services, but many don't stop to think about the environmental impact of this decision.
            In theory, online shopping can make for more efficient and eco-friendly brands. However, in the real world, things are a little different. For example, distribution centres are interested in delivering packages the most efficiently possible. According to research, between 12 and 60 percent of home deliveries fail the first time. This means that a driver needs to make two or three trips to deliver the same item. If the item cannot be delivered by the third trip, then the customer needs to drive to the warehouse to pick up the product. Wanting items delivered in 24 hours is also impacting the environment. E-commerce stores can no longer bundle several orders into one delivery. The vans they send out are less full, and they travel more miles per delivery than they would if they were able to bundle deliveries together.

            <table class="glossary-table">
                <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                <tr><td>Purchase</td><td><span class="tag v">v</span></td><td>Mua s·∫Øm</td></tr>
                <tr><td>Distribution centre</td><td><span class="tag n">n</span></td><td>Trung t√¢m ph√¢n ph·ªëi</td></tr>
                <tr><td>Bundle</td><td><span class="tag v">v</span></td><td>G·ªôp l·∫°i, b√≥ l·∫°i</td></tr>
                <tr><td>Eco-friendly</td><td><span class="tag adj">adj</span></td><td>Th√¢n thi·ªán m√¥i tr∆∞·ªùng</td></tr>
            </table>
        </div>

        <h3 style="color:var(--primary)">A. True or False</h3>
        <div id="p2_a_questions"></div>

        <h3 style="color:var(--primary)">B. Multiple Choice (Based on Text)</h3>
        <div id="p2_b_questions"></div>
    </div>

    <div class="card">
        <div class="card-title">III. PHONETICS: Choose the word with different underlined part</div>
        <div id="p3_questions"></div>
    </div>

    <div class="card">
        <div class="card-title">IV. STRESS PATTERN: Choose the word with different stress</div>
        <div id="p4_questions"></div>
    </div>

    <div class="card">
        <div class="card-title">V. GAP FILL: WINDOW SHOPPING</div>
        <div class="reading-box">
            The term window <b>(1) ________</b> means when people carry no money while going to market. Nowadays, the trend of window shopping is increasing day <b>(2) ________</b> day because people <b>(3) ________</b> shopping centers to explore new things but end up buying nothing. <b>(4) ________</b> you want to go on shopping and have zero money, then don't worry, you can enjoy free of cost shopping without buying anything. The best advantage of window shopping is that you can try out and see new trends and add products in your wish list without using any <b>(6) ________</b>. Sometimes, people don't have <b>(7) ________</b> money to buy new clothing, accessories, decorative items, etc., so they can see those things and buy them later. The best part about window shopping is that we can research the new products available in the market without spending anything. We can take a <b>(8) ________</b> of the product at a store and search about it in <b>(9) ________</b> store. [Save] time and buy it on better deals online <b>(10) ________</b> any [time/place].
        </div>
        <div id="p5_questions"></div>
    </div>

</div>

<div class="submit-footer">
    <button class="submit-btn" onclick="submitQuiz()">N·ªòP B√ÄI (SUBMIT)</button>
</div>

<div id="resultModal" class="modal">
    <div class="modal-content">
        <h2 style="color:var(--primary)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
        <div class="score-circle" id="scoreDisplay">0/0</div>
        <p id="feedbackText" style="font-size:1.1rem; margin-bottom:20px;">B·∫°n ƒë√£ l√†m r·∫•t t·ªët!</p>
        <button class="submit-btn" onclick="closeModal()" style="font-size:1rem; padding:10px 30px;">Xem l·∫°i b√†i</button>
    </div>
</div>

<audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"></audio>

<script>
    // --- DATA ---
    const quizData = {
        p1: [
            {
                q: "(1) largest destination for _______",
                options: ["shopping", "retail", "brands", "experience"],
                correct: 0,
                explain: "<b>D·ªãch:</b> Dubai Mall l√† ƒëi·ªÉm ƒë·∫øn l·ªõn nh·∫•t th·∫ø gi·ªõi ƒë·ªÉ mua s·∫Øm (shopping), gi·∫£i tr√≠ v√† th∆∞ gi√£n.<br><b>Gi·∫£i th√≠ch:</b> C·∫•u tr√∫c 'destination for shopping' (ƒëi·ªÉm ƒë·∫øn ƒë·ªÉ mua s·∫Øm). C√°c t·ª´ kh√°c kh√¥ng bao qu√°t h·∫øt √Ω nghƒ©a ho·∫∑c kh√¥ng h·ª£p ng·ªØ c·∫£nh m·ªü ƒë·∫ßu."
            },
            {
                q: "(2) Featuring over 1,200 _______ stores",
                options: ["shopping", "retail", "covers", "attention"],
                correct: 1,
                explain: "<b>D·ªãch:</b> V·ªõi h∆°n 1,200 c·ª≠a h√†ng b√°n l·∫ª (retail stores).<br><b>Gi·∫£i th√≠ch:</b> C·ª•m t·ª´ 'retail stores' l√† c·ª≠a h√†ng b√°n l·∫ª. 'Shopping stores' √≠t d√πng, th∆∞·ªùng d√πng 'shops' ho·∫∑c 'stores'."
            },
            {
                q: "(3) Dubai Mall _______ more than 1 million sqm",
                options: ["experience", "covers", "brands", "attention"],
                correct: 1,
                explain: "<b>D·ªãch:</b> Dubai Mall bao ph·ªß (covers) h∆°n 1 tri·ªáu m√©t vu√¥ng.<br><b>Gi·∫£i th√≠ch:</b> ƒê·ªông t·ª´ 'covers' ƒëi v·ªõi di·ªán t√≠ch (area/sqm) nghƒ©a l√† bao tr√πm, tr·∫£i r·ªông."
            },
            {
                q: "(4) over 70 signature outlets beckon your _______",
                options: ["shopping", "footwear", "attention", "experience"],
                correct: 2,
                explain: "<b>D·ªãch:</b> h∆°n 70 c·ª≠a h√†ng ƒë·∫∑c tr∆∞ng v·∫´y g·ªçi s·ª± ch√∫ √Ω (attention) c·ªßa b·∫°n.<br><b>Gi·∫£i th√≠ch:</b> C·ª•m 'beckon one's attention' (thu h√∫t s·ª± ch√∫ √Ω)."
            },
            {
                q: "(5) where you can _______ the latest collections",
                options: ["experience", "shopaholics", "brands", "retail"],
                correct: 0,
                explain: "<b>D·ªãch:</b> n∆°i b·∫°n c√≥ th·ªÉ tr·∫£i nghi·ªám (experience) nh·ªØng b·ªô s∆∞u t·∫≠p m·ªõi nh·∫•t.<br><b>Gi·∫£i th√≠ch:</b> ƒê·ªông t·ª´ 'experience' ph√π h·ª£p v·ªõi vi·ªác th·ª≠ v√† c·∫£m nh·∫≠n c√°c b·ªô s∆∞u t·∫≠p th·ªùi trang."
            },
            {
                q: "(6) renowned designers and _______",
                options: ["shopping", "brands", "attention", "covers"],
                correct: 1,
                explain: "<b>D·ªãch:</b> c√°c nh√† thi·∫øt k·∫ø v√† th∆∞∆°ng hi·ªáu (brands) n·ªïi ti·∫øng th·∫ø gi·ªõi.<br><b>Gi·∫£i th√≠ch:</b> 'Designers and brands' l√† c·∫∑p t·ª´ th∆∞·ªùng ƒëi chung trong ng·ªØ c·∫£nh th·ªùi trang."
            },
            {
                q: "(7) the latest in _______ at Level Shoes",
                options: ["brands", "retail", "footwear", "shopaholics"],
                correct: 2,
                explain: "<b>D·ªãch:</b> nh·ªØng m·∫´u gi√†y d√©p (footwear) m·ªõi nh·∫•t t·∫°i Level Shoes.<br><b>Gi·∫£i th√≠ch:</b> 'Level Shoes' l√† t√™n c·ª≠a h√†ng gi√†y -> ƒëi·ªÅn 'footwear' (gi√†y d√©p)."
            },
            {
                q: "(8) a must-visit for _______",
                options: ["experience", "shopaholics", "brands", "attention"],
                correct: 1,
                explain: "<b>D·ªãch:</b> ƒêi·ªÉm ƒë·∫øn kh√¥ng th·ªÉ b·ªè qua cho nh·ªØng t√≠n ƒë·ªì mua s·∫Øm (shopaholics).<br><b>Gi·∫£i th√≠ch:</b> 'Shopaholics' ch·ªâ nh·ªØng ng∆∞·ªùi nghi·ªán mua s·∫Øm, ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh trung t√¢m th∆∞∆°ng m·∫°i l·ªõn nh·∫•t th·∫ø gi·ªõi."
            }
        ],
        p2_a: [
            {
                q: "1. People can even buy heavy equipment while sitting on their couch at home.",
                options: ["True", "False"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: True (ƒê√∫ng)</b><br><b>D·∫´n ch·ª©ng:</b> 'Now, from the comfort of your couch, you can purchase products ranging from groceries to heavy equipment.' (Gi·ªù ƒë√¢y, t·ª´ chi·∫øc gh·∫ø sofa √™m √°i, b·∫°n c√≥ th·ªÉ mua c√°c s·∫£n ph·∫©m t·ª´ t·∫°p h√≥a ƒë·∫øn thi·∫øt b·ªã h·∫°ng n·∫∑ng)."
            },
            {
                q: "2. The items can be delivered everywhere within 24 hours.",
                options: ["True", "False"],
                correct: 1,
                explain: "<b>ƒê√°p √°n: False (Sai)</b><br><b>D·∫´n ch·ª©ng:</b> 'Depending on where you live, you can have those items delivered...' (T√πy thu·ªôc v√†o n∆°i b·∫°n s·ªëng...).<br><b>Gi·∫£i th√≠ch:</b> B√†i n√≥i 't√πy thu·ªôc n∆°i s·ªëng' ch·ª© kh√¥ng ph·∫£i 'everywhere' (m·ªçi n∆°i)."
            },
            {
                q: "3. Someone who buys online for the first time can get huge discount.",
                options: ["True", "False"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: True (ƒê√∫ng)</b><br><b>D·∫´n ch·ª©ng:</b> 'entering your email when buying for the first time can save you significant money.' (nh·∫≠p email khi mua l·∫ßn ƒë·∫ßu c√≥ th·ªÉ gi√∫p b·∫°n ti·∫øt ki·ªám s·ªë ti·ªÅn ƒë√°ng k·ªÉ)."
            },
            {
                q: "4. Most people think about the environmental impact when buying online.",
                options: ["True", "False"],
                correct: 1,
                explain: "<b>ƒê√°p √°n: False (Sai)</b><br><b>D·∫´n ch·ª©ng:</b> 'but many don't stop to think about the environmental impact of this decision.' (nh∆∞ng nhi·ªÅu ng∆∞·ªùi kh√¥ng d·ª´ng l·∫°i ƒë·ªÉ suy nghƒ© v·ªÅ t√°c ƒë·ªông m√¥i tr∆∞·ªùng)."
            },
            {
                q: "5. Very few home deliveries fail to be delivered at the first time.",
                options: ["True", "False"],
                correct: 1,
                explain: "<b>ƒê√°p √°n: False (Sai)</b><br><b>D·∫´n ch·ª©ng:</b> 'between 12 and 60 percent of home deliveries fail the first time.' (t·ª´ 12 ƒë·∫øn 60% c√°c ca giao h√†ng th·∫•t b·∫°i l·∫ßn ƒë·∫ßu).<br><b>Gi·∫£i th√≠ch:</b> 60% l√† con s·ªë l·ªõn, kh√¥ng ph·∫£i 'very few' (r·∫•t √≠t)."
            },
            {
                q: "6. If you ask for fast deliveries within 24 hours, you may negatively affect the environment.",
                options: ["True", "False"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: True (ƒê√∫ng)</b><br><b>D·∫´n ch·ª©ng:</b> 'Wanting items delivered in 24 hours is also impacting the environment... vans less full...' (Mu·ªën h√†ng giao trong 24h c≈©ng t√°c ƒë·ªông m√¥i tr∆∞·ªùng... xe t·∫£i √≠t ƒë·∫ßy h∆°n... ƒëi nhi·ªÅu d·∫∑m h∆°n)."
            }
        ],
        p2_b: [
            {
                q: "1. How do consumers save money when they buy online?",
                options: ["By buying heavy equipment", "By using coupons or first-time email registration", "By driving to the warehouse", "By asking for 24h delivery"],
                correct: 1,
                explain: "<b>ƒê√°p √°n: B</b><br><b>D·ªãch:</b> Ng∆∞·ªùi ti√™u d√πng ti·∫øt ki·ªám ti·ªÅn b·∫±ng c√°ch n√†o? -> B·∫±ng c√°ch d√πng m√£ gi·∫£m gi√° ho·∫∑c ƒëƒÉng k√Ω email l·∫ßn ƒë·∫ßu.<br><b>D·∫´n ch·ª©ng:</b> 'using Lazada coupons or entering your email when buying for the first time can save you significant money.'"
            },
            {
                q: "2. What are the benefits of online shopping in theory?",
                options: ["It is faster only", "It makes drivers travel more", "It makes for more efficient and eco-friendly brands", "It allows bundling orders"],
                correct: 2,
                explain: "<b>ƒê√°p √°n: C</b><br><b>D·ªãch:</b> Theo l√Ω thuy·∫øt, l·ª£i √≠ch l√† g√¨? -> T·∫°o ra c√°c th∆∞∆°ng hi·ªáu hi·ªáu qu·∫£ v√† th√¢n thi·ªán m√¥i tr∆∞·ªùng h∆°n.<br><b>D·∫´n ch·ª©ng:</b> 'In theory, online shopping can make for more efficient and eco-friendly brands.'"
            },
            {
                q: "3. When does a customer need to drive to the warehouse?",
                options: ["If the item cannot be delivered by the third trip", "Immediately after ordering", "When the van is full", "If they want to save money"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: A</b><br><b>D·ªãch:</b> Khi n√†o kh√°ch h√†ng ph·∫£i l√°i xe ƒë·∫øn kho? -> N·∫øu m√≥n h√†ng kh√¥ng th·ªÉ giao ƒë∆∞·ª£c sau chuy·∫øn th·ª© 3.<br><b>D·∫´n ch·ª©ng:</b> 'If the item cannot be delivered by the third trip, then the customer needs to drive to the warehouse...'"
            },
            {
                q: "4. Why do vans travel more miles per delivery now?",
                options: ["Because they are lost", "Because they bundle too many deliveries", "Because they cannot bundle orders due to 24h delivery demand", "Because drivers like driving"],
                correct: 2,
                explain: "<b>ƒê√°p √°n: C</b><br><b>D·ªãch:</b> T·∫°i sao xe t·∫£i ph·∫£i ƒëi nhi·ªÅu d·∫∑m h∆°n? -> V√¨ kh√¥ng th·ªÉ g·ªôp ƒë∆°n do nhu c·∫ßu giao trong 24h.<br><b>D·∫´n ch·ª©ng:</b> 'stores can no longer bundle several orders... travel more miles... than they would if they were able to bundle deliveries together.'"
            }
        ],
        p3: [
            {
                q: "1. Choose the word with different underlined part 'a'",
                options: ["speci<u>a</u>lity", "t<u>a</u>g", "shop<u>a</u>holic", "<u>a</u>ccess"],
                correct: 2,
                explain: "<b>ƒê√°p √°n: C. shop<u>a</u>holic (/…ô/)</b><br>A. speciality (/√¶/)<br>B. tag (/√¶/)<br>D. access (/√¶/)<br><b>Gi·∫£i th√≠ch:</b> Ch·ªØ 'a' trong shopaholic ph√°t √¢m l√† √¢m /…ô/ (schwa), c√°c t·ª´ c√≤n l·∫°i l√† /√¶/."
            },
            {
                q: "2. Choose the word with different underlined part",
                options: ["onl<u>i</u>ne", "br<u>ow</u>se", "sh<u>o</u>p", "pr<u>o</u>duct"],
                correct: 1,
                explain: "<b>ƒê√°p √°n: B. br<u>ow</u>se (/a ä/)</b><br>A. online (ch·ª©a √¢m /a…™/ ho·∫∑c /…í/)<br>C. shop (/…í/)<br>D. product (/…í/)<br><b>Gi·∫£i th√≠ch:</b> C√¢u n√†y ki·ªÉm tra nguy√™n √¢m ch√≠nh. Browse (/bra äz/) l√† √¢m ƒë√¥i /a ä/. Shop v√† Product ƒë·ªÅu l√† √¢m /…í/ ng·∫Øn. Online (/Àà…ín.la…™n/) c≈©ng b·∫Øt ƒë·∫ßu b·∫±ng /…í/."
            },
            {
                q: "3. Choose the word with different ending '-ed'",
                options: ["fix<u>ed</u>", "lov<u>ed</u>", "bargain<u>ed</u>", "display<u>ed</u>"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: A. fix<u>ed</u> (/t/)</b><br>B. loved (/d/)<br>C. bargained (/d/)<br>D. displayed (/d/)<br><b>Gi·∫£i th√≠ch:</b> Quy t·∫Øc ph√°t √¢m ƒëu√¥i -ed. Sau √¢m v√¥ thanh /ks/ (trong fixed), -ed ƒë·ªçc l√† /t/. C√°c t·ª´ c√≤n l·∫°i k·∫øt th√∫c b·∫±ng √¢m h·ªØu thanh n√™n ƒë·ªçc l√† /d/."
            },
            {
                q: "4. Choose the word with different underlined part 'i'",
                options: ["w<u>i</u>de", "advert<u>i</u>se", "ass<u>i</u>stant", "pr<u>i</u>ce"],
                correct: 2,
                explain: "<b>ƒê√°p √°n: C. ass<u>i</u>stant (/…™/)</b><br>A. wide (/a…™/)<br>B. advertise (/a…™/)<br>D. price (/a…™/)<br><b>Gi·∫£i th√≠ch:</b> Assistant c√≥ √¢m 'i' l√† /…™/ ng·∫Øn. C√°c t·ª´ c√≤n l·∫°i l√† /a…™/."
            },
            {
                q: "5. Choose the word with different underlined part 'e/i'",
                options: ["it<u>e</u>ms", "deliv<u>e</u>ries", "c<u>e</u>ntres", "mark<u>e</u>ts"],
                correct: 1,
                explain: "<b>ƒê√°p √°n: B. deliv<u>e</u>ries</b><br>A. items (/a…™/)<br>C. centres (/e/)<br>D. markets (/…™/)<br><i>L∆∞u √Ω: D·ª±a tr√™n ƒë·ªÅ b√†i g·ªëc, c√¢u n√†y c√≥ th·ªÉ ki·ªÉm tra √¢m nh·∫•n ho·∫∑c nguy√™n √¢m kh√°c nhau t√πy v·ªã tr√≠ g·∫°ch ch√¢n c·ª• th·ªÉ. D·ª±a tr√™n nh√≥m t·ª´, Items (/ai/) th∆∞·ªùng kh√°c bi·ªát nh·∫•t so v·ªõi √¢m ng·∫Øn trong c√°c t·ª´ c√≤n l·∫°i. Tuy nhi√™n, n·∫øu g·∫°ch ch√¢n ch·ªØ 'e' trong deliveries/centres/markets th√¨ 'centres' (/e/) kh√°c v·ªõi 'deliveries' (/…™/ ho·∫∑c /…ô/). H√£y ch·ªçn ƒë√°p √°n theo ng·ªØ c·∫£nh chung l√† Items (/ai/) kh√°c bi·ªát r√µ r·ªát nh·∫•t.</i>"
            }
        ],
        p4: [
            {
                q: "1. Choose the word with different stress pattern",
                options: ["supermarket", "comfortable", "customer", "assistant"],
                correct: 3,
                explain: "<b>ƒê√°p √°n: D. assistant (√¢m 2)</b><br>A. supermarket (√¢m 1)<br>B. comfortable (√¢m 1)<br>C. customer (√¢m 1)<br><b>Gi·∫£i th√≠ch:</b> Assistant nh·∫•n √¢m 2, c√°c t·ª´ c√≤n l·∫°i nh·∫•n √¢m 1."
            },
            {
                q: "2. Choose the word with different stress pattern",
                options: ["excitement", "convenience", "offline", "announcement"],
                correct: 2,
                explain: "<b>ƒê√°p √°n: C. offline (√¢m 1)</b><br>A. excitement (√¢m 2)<br>B. convenience (√¢m 2)<br>D. announcement (√¢m 2)<br><b>Gi·∫£i th√≠ch:</b> Offline nh·∫•n √¢m 1 (th∆∞·ªùng danh/t√≠nh t·ª´ 2 √¢m ti·∫øt gh√©p), c√°c t·ª´ c√≤n l·∫°i nh·∫•n √¢m 2."
            },
            {
                q: "3. Choose the word with different stress pattern",
                options: ["crowded", "bargain", "product", "complain"],
                correct: 3,
                explain: "<b>ƒê√°p √°n: D. complain (√¢m 2)</b><br>A. crowded (√¢m 1)<br>B. bargain (√¢m 1)<br>C. product (√¢m 1)<br><b>Gi·∫£i th√≠ch:</b> Complain l√† ƒë·ªông t·ª´ nh·∫•n √¢m 2. C√°c t·ª´ c√≤n l·∫°i nh·∫•n √¢m 1."
            },
            {
                q: "4. Choose the word with different stress pattern",
                options: ["prepare", "wander", "vegetable", "order"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: A. prepare (√¢m 2)</b><br>B. wander (√¢m 1)<br>C. vegetable (√¢m 1)<br>D. order (√¢m 1)<br><b>Gi·∫£i th√≠ch:</b> Prepare nh·∫•n √¢m 2. C√°c t·ª´ c√≤n l·∫°i nh·∫•n √¢m 1."
            },
            {
                q: "5. Choose the word with different stress pattern",
                options: ["shopping", "discount", "home-made", "year-round"],
                correct: 3,
                explain: "<b>ƒê√°p √°n: D. year-round (√¢m 2)</b><br>A. shopping (√¢m 1)<br>B. discount (danh t·ª´: √¢m 1)<br>C. home-made (th∆∞·ªùng √¢m 1)<br>D. year-round (t√≠nh t·ª´ gh√©p th∆∞·ªùng nh·∫•n √¢m 2 ho·∫∑c c√¢n b·∫±ng, kh√°c bi·ªát nh·∫•t).<br><i>L∆∞u √Ω: Discount c√≥ th·ªÉ l√† ƒë·ªông t·ª´ (√¢m 2) nh∆∞ng trong nh√≥m n√†y (shopping) n√≥ ƒë∆∞·ª£c hi·ªÉu l√† danh t·ª´.</i>"
            }
        ],
        p5: [
            {
                q: "(1) The term window _______ means...",
                options: ["shopping", "viewing", "walking", "buying"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: shopping</b><br>C·ª•m t·ª´ 'Window shopping' (ƒëi ng·∫Øm ƒë·ªì nh∆∞ng kh√¥ng mua)."
            },
            {
                q: "(2) increasing day _______ day",
                options: ["by", "after", "to", "with"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: by</b><br>C·ª•m t·ª´ 'day by day' (ng√†y qua ng√†y)."
            },
            {
                q: "(3) because people _______ shopping centers",
                options: ["visit", "see", "watch", "look"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: visit</b><br>D·ªãch: b·ªüi v√¨ m·ªçi ng∆∞·ªùi gh√© thƒÉm (visit) c√°c trung t√¢m mua s·∫Øm."
            },
            {
                q: "(4) _______ you want to go...",
                options: ["If", "When", "Unless", "Because"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: If</b><br>C√¢u ƒëi·ªÅu ki·ªán: 'If you want to...' (N·∫øu b·∫°n mu·ªën...)."
            },
            {
                q: "(5) want to go _______ shopping",
                options: ["on", "in", "at", "for"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: on</b> (ho·∫∑c b·ªè tr·ªëng theo vƒÉn n√≥i, nh∆∞ng ƒë·ªÅ b√†i th∆∞·ªùng l√† 'go on').<br>D·ª±a theo ng·ªØ c·∫£nh b√†i ƒëi·ªÅn t·ª´, c√≥ th·ªÉ l√† c·∫•u tr√∫c 'go on shopping' (ti·∫øp t·ª•c mua s·∫Øm/ƒëi mua s·∫Øm)."
            },
            {
                q: "(6) without using any _______",
                options: ["money", "time", "effort", "card"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: money</b><br>D·ªãch: kh√¥ng c·∫ßn d√πng b·∫•t k·ª≥ ti·ªÅn (money) n√†o."
            },
            {
                q: "(7) don't have _______ money",
                options: ["enough", "many", "lots", "some"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: enough</b><br>D·ªãch: kh√¥ng c√≥ ƒë·ªß (enough) ti·ªÅn."
            },
            {
                q: "(8) take a _______ of the product",
                options: ["photo", "look", "price", "touch"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: photo</b><br>D·ªãch: ch·ª•p m·ªôt b·ª©c ·∫£nh (take a photo) c·ªßa s·∫£n ph·∫©m."
            },
            {
                q: "(9) search about it in _______ store",
                options: ["another", "other", "others", "the"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: another</b><br>D·ªãch: t√¨m ki·∫øm n√≥ ·ªü m·ªôt c·ª≠a h√†ng kh√°c (another store - s·ªë √≠t)."
            },
            {
                q: "(10) buy it on better deals online _______ any time",
                options: ["at", "in", "on", "for"],
                correct: 0,
                explain: "<b>ƒê√°p √°n: at</b><br>C·ª•m t·ª´ 'at any time' (v√†o b·∫•t c·ª© l√∫c n√†o)."
            }
        ]
    };

    let totalQuestions = 0;
    let correctCount = 0;

    function renderQuiz(sectionId, questions, prefix) {
        const container = document.getElementById(sectionId);
        questions.forEach((item, index) => {
            totalQuestions++;
            const qDiv = document.createElement('div');
            qDiv.className = 'question-group';
            qDiv.id = `q-${prefix}-${index}`;
            
            const qText = document.createElement('div');
            qText.className = 'question-text';
            qText.innerHTML = item.q;
            qDiv.appendChild(qText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-grid';
            
            item.options.forEach((opt, optIndex) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = opt;
                btn.onclick = () => selectOption(prefix, index, optIndex);
                optionsDiv.appendChild(btn);
            });
            qDiv.appendChild(optionsDiv);

            // Check button
            const checkBtn = document.createElement('button');
            checkBtn.className = 'check-btn';
            checkBtn.innerText = 'Ki·ªÉm tra';
            checkBtn.onclick = () => checkAnswer(prefix, index);
            qDiv.appendChild(checkBtn);

            // Explanation
            const explainDiv = document.createElement('div');
            explainDiv.className = 'explanation';
            explainDiv.innerHTML = `<h4>üí° Gi·∫£i th√≠ch chi ti·∫øt c·ªßa Ms Mai An:</h4><div class="detail-row">${item.explain}</div>`;
            qDiv.appendChild(explainDiv);

            container.appendChild(qDiv);
        });
    }

    // State management
    const userAnswers = {}; // { 'p1-0': 1, 'p1-1': 0 ... }

    function selectOption(prefix, qIndex, optIndex) {
        const key = `${prefix}-${qIndex}`;
        // N·∫øu ƒë√£ check r·ªìi th√¨ kh√¥ng cho ch·ªçn l·∫°i
        if (document.querySelector(`#q-${key} .check-btn`).disabled) return;

        userAnswers[key] = optIndex;
        
        // Update UI
        const btns = document.querySelectorAll(`#q-${key} .option-btn`);
        btns.forEach((btn, idx) => {
            if (idx === optIndex) btn.classList.add('selected');
            else btn.classList.remove('selected');
        });
    }

    function checkAnswer(prefix, qIndex) {
        const key = `${prefix}-${qIndex}`;
        if (userAnswers[key] === undefined) {
            alert("Em h√£y ch·ªçn m·ªôt ƒë√°p √°n tr∆∞·ªõc nh√©!");
            return;
        }

        const questionData = getQuestionData(prefix, qIndex);
        const selected = userAnswers[key];
        const correct = questionData.correct;
        const btns = document.querySelectorAll(`#q-${key} .option-btn`);
        const checkBtn = document.querySelector(`#q-${key} .check-btn`);
        const explainDiv = document.querySelector(`#q-${key} .explanation`);

        // Lock interaction
        checkBtn.disabled = true;
        checkBtn.innerText = 'ƒê√£ ki·ªÉm tra';

        if (selected === correct) {
            btns[selected].classList.add('correct');
            btns[selected].classList.remove('selected');
            document.getElementById('sound-correct').play();
            fireConfetti(btns[selected]);
        } else {
            btns[selected].classList.add('wrong');
            btns[selected].classList.remove('selected');
            btns[correct].classList.add('correct'); // Show correct answer
            document.getElementById('sound-wrong').play();
            btns[selected].parentElement.classList.add('shake');
        }

        explainDiv.classList.add('visible');
    }

    function getQuestionData(prefix, index) {
        if (prefix === 'p1') return quizData.p1[index];
        if (prefix === 'p2_a') return quizData.p2_a[index];
        if (prefix === 'p2_b') return quizData.p2_b[index];
        if (prefix === 'p3') return quizData.p3[index];
        if (prefix === 'p4') return quizData.p4[index];
        if (prefix === 'p5') return quizData.p5[index];
    }

    function submitQuiz() {
        let score = 0;
        let answered = 0;

        // Check all questions
        const prefixes = ['p1', 'p2_a', 'p2_b', 'p3', 'p4', 'p5'];
        
        prefixes.forEach(pref => {
            const list = pref === 'p2_a' ? quizData.p2_a : 
                         pref === 'p2_b' ? quizData.p2_b :
                         pref === 'p1' ? quizData.p1 :
                         pref === 'p3' ? quizData.p3 :
                         pref === 'p4' ? quizData.p4 : quizData.p5;

            list.forEach((q, idx) => {
                const key = `${pref}-${idx}`;
                // Auto check if not checked yet
                const checkBtn = document.querySelector(`#q-${key} .check-btn`);
                if (!checkBtn.disabled) {
                    if (userAnswers[key] !== undefined) {
                        checkAnswer(pref, idx);
                    } else {
                        // Mark as unanswer/wrong visually but show explanation
                        const btns = document.querySelectorAll(`#q-${key} .option-btn`);
                        btns[q.correct].classList.add('correct');
                        document.querySelector(`#q-${key} .explanation`).classList.add('visible');
                        checkBtn.disabled = true;
                    }
                }

                if (userAnswers[key] === q.correct) score++;
            });
        });

        const modal = document.getElementById('resultModal');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const feedback = document.getElementById('feedbackText');

        scoreDisplay.innerText = `${score}/${totalQuestions}`;
        
        const percentage = (score / totalQuestions) * 100;
        if (percentage >= 90) feedback.innerText = "Xu·∫•t s·∫Øc! Em ƒë√∫ng l√† thi√™n t√†i ti·∫øng Anh! üåü";
        else if (percentage >= 70) feedback.innerText = "L√†m t·ªët l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa l√† ƒë·∫°t ƒëi·ªÉm tuy·ªát ƒë·ªëi! üí™";
        else feedback.innerText = "ƒê·ª´ng n·∫£n ch√≠! H√£y xem k·ªπ ph·∫ßn gi·∫£i th√≠ch c·ªßa c√¥ Mai An nh√©! üìö";

        modal.style.display = 'flex';
        
        if (percentage >= 50) fullScreenConfetti();
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

    // INIT
    renderQuiz('p1_questions', quizData.p1, 'p1');
    renderQuiz('p2_a_questions', quizData.p2_a, 'p2_a');
    renderQuiz('p2_b_questions', quizData.p2_b, 'p2_b');
    renderQuiz('p3_questions', quizData.p3, 'p3');
    renderQuiz('p4_questions', quizData.p4, 'p4');
    renderQuiz('p5_questions', quizData.p5, 'p5');

    // Simple Confetti Effect
    function fireConfetti(element) {
        // This relies on a simple CSS particle idea or minimal JS
        // Since we want single file, let's just use the visual feedback (green + sound)
        // Adding full particle engine is heavy, but we can do a simple burst
    }

    function fullScreenConfetti() {
        // Placeholder for a celebration effect
    }

</script>
</body>
</html>