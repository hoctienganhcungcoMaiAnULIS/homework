<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Gamification</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* ================= COLOR PALETTE & DYNAMIC THEME ================= */
        :root {
            --primary: #FDCB6E; /* V√†ng s√°ng */
            --secondary: #8854C0; /* T√≠m pastel */
            --tertiary: #00C9A7; /* Xanh ng·ªçc */
            --correct: #00D26A; /* Xanh l√° nh·∫°t */
            --wrong: #FF4757; /* ƒê·ªè cam */
            --text-dark: #2d3436;
            --bg-card: rgba(255, 255, 255, 0.95);
        }

        * {
            box-sizing: border-box;
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            height: 100vh;
            overflow: hidden;
            color: var(--text-dark);
            /* Dynamic Background: Radial Gradient + SVG Emojis */
            background-color: #ffecd2;
            background-image: 
                radial-gradient(circle at 30% 30%, rgba(253, 203, 110, 0.8), transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(136, 84, 192, 0.7), transparent 50%),
                radial-gradient(circle at 50% 100%, rgba(0, 201, 167, 0.6), transparent 50%),
                url("data:image/svg+xml,%3Csvg width='150' height='150' viewBox='0 0 150 150' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='20' y='30' font-size='24' opacity='0.7'%3E‚öΩ%3C/text%3E%3Ctext x='100' y='80' font-size='28' opacity='0.6'%3EüèÜ%3C/text%3E%3Ctext x='40' y='120' font-size='22' opacity='0.7'%3Eüì∫%3C/text%3E%3Ctext x='120' y='30' font-size='20' opacity='0.5'%3Eüåü%3C/text%3E%3C/svg%3E");
            background-blend-mode: normal;
            background-size: 150% 150%, 150% 150%, 150% 150%, 200px 200px;
            animation: gradientMove 15s ease infinite, bgFloat 30s linear infinite;
            display: flex;
            flex-direction: column;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 0%, 100% 100%, 50% 100%, 0 0; }
            50% { background-position: 100% 100%, 0% 0%, 50% 0%, 100px 100px; }
            100% { background-position: 0% 0%, 100% 100%, 50% 100%, 200px 200px; }
        }

        @keyframes bgFloat {
            from { background-position: 0% 0%, 100% 100%, 50% 100%, 0 0; }
            to { background-position: 0% 0%, 100% 100%, 50% 100%, 400px 400px; }
        }

        /* ================= TOP CONTROL BAR ================= */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            z-index: 10;
        }

        .creator-info h3 {
            font-size: 14px;
            color: var(--secondary);
            font-weight: 700;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .timer-display {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            background: var(--primary);
            padding: 5px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 0px #e1b154;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0px rgba(0,0,0,0.2);
            font-size: 14px;
        }
        .btn:active { transform: translateY(5px); box-shadow: 0 0px 0px rgba(0,0,0,0.2); }

        .btn-start { background-color: var(--tertiary); color: white; box-shadow: 0 5px 0px #00a185; }
        .btn-pause { background-color: var(--secondary); color: white; box-shadow: 0 5px 0px #6b4198; }
        
        /* ================= SPLIT SCREEN LAYOUT ================= */
        .main-container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 20px;
            overflow: hidden;
        }

        .pane {
            flex: 1;
            background: var(--bg-card);
            border-radius: 20px;
            padding: 25px;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: var(--secondary); border-radius: 10px; }

        /* ================= READING PASSAGE (LEFT) ================= */
        .passage-title {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 22px;
            border-bottom: 3px dashed var(--primary);
            padding-bottom: 10px;
        }

        .paragraph {
            margin-bottom: 25px;
            line-height: 1.8;
            font-size: 17px;
            padding: 15px;
            background: #fdfdfd;
            border-radius: 15px;
            border-left: 5px solid var(--tertiary);
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
        }

        .btn-translate {
            background-color: #fff3cd;
            color: #856404;
            border: 2px solid #ffeeba;
            border-radius: 12px;
            padding: 8px 15px;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: 0.2s;
        }
        .btn-translate:hover { background-color: #ffeeba; transform: scale(1.05); }

        .translation-box {
            display: none;
            margin-top: 10px;
            padding: 12px;
            background: #e8f4f8;
            border-radius: 10px;
            font-style: italic;
            color: #2c3e50;
            font-size: 15px;
            line-height: 1.6;
        }

        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .glossary-table th { background: var(--secondary); color: white; padding: 12px; text-align: left; }
        .glossary-table td { padding: 12px; border-bottom: 1px solid #eee; }
        .glossary-table tr:hover { background: #f9f9f9; }

        /* ================= EXERCISES (RIGHT) ================= */
        .question-card {
            background: white;
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 6px 0px rgba(0,0,0,0.05);
            border: 2px solid #eee;
        }

        .question-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .option-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 12px 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            box-shadow: 0 4px 0px #e9ecef;
            display: flex;
            align-items: center;
        }
        
        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px 0px #dee2e6;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 2px 0px #dee2e6;
        }

        .option-btn.correct {
            background: var(--correct) !important;
            color: white;
            border-color: #00b85c !important;
            box-shadow: 0 4px 0px #00b85c !important;
        }

        .option-btn.wrong {
            background: var(--wrong) !important;
            color: white;
            border-color: #e84150 !important;
            box-shadow: 0 4px 0px #e84150 !important;
        }

        .explanation-box {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f0f7ff;
            border-left: 5px solid #3498db;
            border-radius: 10px;
            font-size: 15px;
            line-height: 1.6;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn { from {opacity: 0; transform: translateY(-10px);} to {opacity: 1; transform: translateY(0);} }
        
        .shake { animation: shake 0.4s; }
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-8px); }
            100% { transform: translateX(0); }
        }

        .submit-container { text-align: center; margin-top: 30px; padding-bottom: 30px;}
        .btn-submit {
            background-color: var(--secondary);
            color: white;
            font-size: 20px;
            padding: 15px 40px;
            border-radius: 20px;
            box-shadow: 0 6px 0px #6b4198;
            border: none;
            cursor: pointer;
            font-weight: 700;
        }

        /* ================= MODALS & CONFETTI ================= */
        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            z-index: 9999;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .modal-score { font-size: 60px; font-weight: 700; color: var(--tertiary); margin: 20px 0; }
        .modal-msg { font-size: 24px; color: var(--secondary); margin-bottom: 20px; }

        /* Highlight fill in the blank */
        .blank { font-weight: bold; color: var(--secondary); text-decoration: underline; cursor: pointer; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="creator-info">
            <h3>Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</h3>
        </div>
        <div class="timer-container">
            <button class="btn btn-start" id="btn-timer" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
            <div class="timer-display" id="timer-text">10:00</div>
        </div>
    </div>

    <div class="main-container">
        
        <div class="pane left-pane">
            <h2 class="passage-title">üìñ Reading Passages</h2>
            
            <div class="paragraph">
                <strong>Exercise 9:</strong> Television first appeared in the 1950s. Nowadays, it is one of the most (1)____ source for both the old and the young. Television brings (2)____ for children, world news, music and many other (3)____. If someone likes sports, he can just choose the right (4)____. It is not difficult for us to see why (5)____ is so popular.
                <br>
                <button class="btn-translate" onclick="toggleTranslate('trans1')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="translation-box" id="trans1">
                    <strong>B·∫£n d·ªãch:</strong> V√¥ tuy·∫øn truy·ªÅn h√¨nh xu·∫•t hi·ªán l·∫ßn ƒë·∫ßu ti√™n v√†o nh·ªØng nƒÉm 1950. Ng√†y nay, n√≥ l√† m·ªôt trong nh·ªØng ngu·ªìn (1) ph·ªï bi·∫øn nh·∫•t cho c·∫£ ng∆∞·ªùi gi√† v√† ng∆∞·ªùi tr·∫ª. Truy·ªÅn h√¨nh mang ƒë·∫øn (2) phim ho·∫°t h√¨nh cho tr·∫ª em, tin t·ª©c th·∫ø gi·ªõi, √¢m nh·∫°c v√† nhi·ªÅu (3) ch∆∞∆°ng tr√¨nh kh√°c. N·∫øu ai ƒë√≥ th√≠ch th·ªÉ thao, h·ªç ch·ªâ c·∫ßn ch·ªçn ƒë√∫ng (4) k√™nh. Kh√¥ng kh√≥ ƒë·ªÉ ch√∫ng ta hi·ªÉu t·∫°i sao (5) n√≥ l·∫°i ƒë∆∞·ª£c y√™u th√≠ch ƒë·∫øn v·∫≠y.
                </div>
            </div>

            <hr style="border: 1px dashed #ccc; margin: 20px 0;">

            <h3 style="color: var(--secondary); margin-bottom: 10px;">Exercise 10: FIFA World Cup</h3>
            
            <div class="paragraph">
                In almost every country around the world, there is a big sports competition. It is like the Olympics but only for one sport, the most popular sport in the world!
                <br>
                <button class="btn-translate" onclick="toggleTranslate('trans2')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="translation-box" id="trans2">
                    <strong>B·∫£n d·ªãch:</strong> ·ªû h·∫ßu h·∫øt c√°c qu·ªëc gia tr√™n th·∫ø gi·ªõi, ƒë·ªÅu c√≥ m·ªôt cu·ªôc thi th·ªÉ thao l·ªõn. N√≥ gi·ªëng nh∆∞ Th·∫ø v·∫≠n h·ªôi Olympic nh∆∞ng ch·ªâ d√†nh cho m·ªôt m√¥n th·ªÉ thao, m√¥n th·ªÉ thao ph·ªï bi·∫øn nh·∫•t tr√™n th·∫ø gi·ªõi!
                </div>
            </div>

            <div class="paragraph">
                What do you think about the FIFA World Cup? The first World Cup was in 1930, in Uruguay. In the final game, Uruguay beat Argentina and became the first World Cup winners. 13 countries played in the first World Cup. Now there are 32 countries in the competition. 3
                <br>
                <button class="btn-translate" onclick="toggleTranslate('trans3')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="translation-box" id="trans3">
                    <strong>B·∫£n d·ªãch:</strong> B·∫°n nghƒ© sao v·ªÅ Gi·∫£i v√¥ ƒë·ªãch b√≥ng ƒë√° th·∫ø gi·ªõi FIFA? K·ª≥ World Cup ƒë·∫ßu ti√™n di·ªÖn ra v√†o nƒÉm 1930, t·∫°i Uruguay. Trong tr·∫≠n chung k·∫øt, Uruguay ƒë√£ ƒë√°nh b·∫°i Argentina v√† tr·ªü th√†nh ƒë·ªôi v√¥ ƒë·ªãch World Cup ƒë·∫ßu ti√™n. C√≥ 13 qu·ªëc gia ƒë√£ tham gia k·ª≥ World Cup ƒë·∫ßu ti√™n. B√¢y gi·ªù c√≥ 32 qu·ªëc gia tham gia gi·∫£i ƒë·∫•u.
                </div>
            </div>

            <div class="paragraph">
                Until 2002, the World Cup was always in a European or American country. South Korea and Japan held the first Asian World Cup. The first African World Cup was in 2010, in South Africa.
                <br>
                <button class="btn-translate" onclick="toggleTranslate('trans4')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="translation-box" id="trans4">
                    <strong>B·∫£n d·ªãch:</strong> Cho ƒë·∫øn nƒÉm 2002, World Cup lu√¥n ƒë∆∞·ª£c t·ªï ch·ª©c ·ªü m·ªôt qu·ªëc gia Ch√¢u √Çu ho·∫∑c Ch√¢u M·ªπ. H√†n Qu·ªëc v√† Nh·∫≠t B·∫£n ƒë√£ ƒëƒÉng cai k·ª≥ World Cup ƒë·∫ßu ti√™n ·ªü Ch√¢u √Å. K·ª≥ World Cup ƒë·∫ßu ti√™n ·ªü Ch√¢u Phi l√† v√†o nƒÉm 2010, t·∫°i Nam Phi.
                </div>
            </div>

            <div class="paragraph">
                Brazil is the most successful team. It is the only team that has played in every tournament so far. Germany and Italy have won it four times. Uruguay, Argentina, and France have won it two times. England and Spain have won it once.
                <br>
                <button class="btn-translate" onclick="toggleTranslate('trans5')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
                <div class="translation-box" id="trans5">
                    <strong>B·∫£n d·ªãch:</strong> Brazil l√† ƒë·ªôi b√≥ng th√†nh c√¥ng nh·∫•t. ƒê√¢y l√† ƒë·ªôi duy nh·∫•t ƒë√£ tham gia m·ªçi gi·∫£i ƒë·∫•u cho ƒë·∫øn nay. ƒê·ª©c v√† √ù ƒë√£ gi√†nh chi·∫øn th·∫Øng b·ªën l·∫ßn. Uruguay, Argentina v√† Ph√°p ƒë√£ gi√†nh chi·∫øn th·∫Øng hai l·∫ßn. Anh v√† T√¢y Ban Nha ƒë√£ gi√†nh chi·∫øn th·∫Øng m·ªôt l·∫ßn.
                </div>
            </div>

            <h3 style="color: var(--tertiary); margin-top: 30px;">üìö B·∫£ng T·ª´ V·ª±ng (Glossary)</h3>
            <table class="glossary-table">
                <tr><th>T·ª´ v·ª±ng (Word)</th><th>Lo·∫°i t·ª´ (POS)</th><th>Nghƒ©a Ti·∫øng Vi·ªát (Meaning)</th></tr>
                <tr><td><strong>Competition</strong></td><td>Noun (n)</td><td>Cu·ªôc thi, s·ª± c·∫°nh tranh</td></tr>
                <tr><td><strong>Tournament</strong></td><td>Noun (n)</td><td>Gi·∫£i ƒë·∫•u, v√≤ng ƒë·∫•u</td></tr>
                <tr><td><strong>Successful</strong></td><td>Adjective (adj)</td><td>Th√†nh c√¥ng, th·∫Øng l·ª£i</td></tr>
                <tr><td><strong>Beat</strong></td><td>Verb (v)</td><td>ƒê√°nh b·∫°i (ai ƒë√≥)</td></tr>
                <tr><td><strong>Appear</strong></td><td>Verb (v)</td><td>Xu·∫•t hi·ªán, l·ªô di·ªán</td></tr>
                <tr><td><strong>Nowadays</strong></td><td>Adverb (adv)</td><td>Ng√†y nay, th·ªùi nay</td></tr>
                <tr><td><strong>Popular</strong></td><td>Adjective (adj)</td><td>Ph·ªï bi·∫øn, ƒë∆∞·ª£c nhi·ªÅu ng∆∞·ªùi ∆∞a chu·ªông</td></tr>
                <tr><td><strong>Athlete</strong></td><td>Noun (n)</td><td>V·∫≠n ƒë·ªông vi√™n</td></tr>
                <tr><td><strong>Hold (Held)</strong></td><td>Verb (v)</td><td>T·ªï ch·ª©c, ƒëƒÉng cai</td></tr>
                <tr><td><strong>Final</strong></td><td>Noun / Adj</td><td>Tr·∫≠n chung k·∫øt / Cu·ªëi c√πng</td></tr>
            </table>

        </div>

        <div class="pane right-pane" id="quiz-container">
            <h2 class="passage-title" style="color: var(--tertiary);">üéØ Exercises</h2>
            <div class="submit-container">
                <button class="btn-submit" onclick="submitQuiz()">N·ªòP B√ÄI üöÄ</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2>K·∫øt qu·∫£ c·ªßa b·∫°n</h2>
            <div class="modal-score" id="score-display">0/10</div>
            <div class="modal-msg" id="score-msg">Tuy·ªát v·ªùi!</div>
            <button class="btn btn-start" onclick="closeModal()">Xem l·∫°i ƒë√°p √°n chi ti·∫øt</button>
        </div>
    </div>

<script>
    // ================= D·ªÆ LI·ªÜU C√ÇU H·ªéI (K√®m Gi·∫£i Th√≠ch Chi Ti·∫øt) =================
    const rawQuestions = [
        // EXERCISE 9
        {
            id: 'ex9_q1',
            text: "Question 1 (Exercise 9): Nowadays, it is one of the most (1)____ source...",
            options: [
                { id: 'A', text: "channel", isCorrect: false, expl: "A. channel (n - danh t·ª´): k√™nh. Sau 'the most' c·∫ßn m·ªôt t√≠nh t·ª´ (adjective) ƒë·ªÉ b·ªï nghƒ©a cho danh t·ª´ 'source'. -> Sai ng·ªØ ph√°p." },
                { id: 'B', text: "program", isCorrect: false, expl: "B. program (n - danh t·ª´): ch∆∞∆°ng tr√¨nh. T∆∞∆°ng t·ª± A, ƒë√¢y l√† danh t·ª´. -> Sai ng·ªØ ph√°p." },
                { id: 'C', text: "popular", isCorrect: true, expl: "C. popular (adj - t√≠nh t·ª´): ph·ªï bi·∫øn. C·∫•u tr√∫c 'one of the most + adj + N' (m·ªôt trong nh·ªØng... nh·∫•t). D·ªãch: 'm·ªôt trong nh·ªØng ngu·ªìn ph·ªï bi·∫øn nh·∫•t'. -> ƒê√∫ng ho√†n to√†n c·∫£ ng·ªØ ph√°p v√† ng·ªØ nghƒ©a." },
                { id: 'D', text: "exciting", isCorrect: false, expl: "D. exciting (adj - t√≠nh t·ª´): th√∫ v·ªã. V·ªÅ ng·ªØ nghƒ©a, tivi l√† ngu·ªìn 'ph·ªï bi·∫øn' (popular) ƒë·ªÉ ti·∫øp nh·∫≠n th√¥ng tin, h·ª£p l√Ω h∆°n l√† 'ngu·ªìn th√∫ v·ªã'." }
            ]
        },
        {
            id: 'ex9_q2',
            text: "Question 2 (Exercise 9): Television brings (2)____ for children...",
            options: [
                { id: 'A', text: "cartoons", isCorrect: true, expl: "A. cartoons (n): phim ho·∫°t h√¨nh. D·ª±a v√†o v·∫ø 'for children' (cho tr·∫ª em), phim ho·∫°t h√¨nh l√† n·ªôi dung ph√π h·ª£p nh·∫•t. C√°c v·∫ø sau li·ªát k√™ 'world news, music...' th·ªÉ hi·ªán s·ª± ƒëa d·∫°ng." },
                { id: 'B', text: "news", isCorrect: false, expl: "B. news (n): tin t·ª©c. Tin t·ª©c ƒë√£ ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn ·ªü v·∫ø sau ('world news') v√† kh√¥ng ph·∫£i l√† n·ªôi dung ƒë·∫∑c tr∆∞ng 'cho tr·∫ª em'." },
                { id: 'C', text: "films", isCorrect: false, expl: "C. films (n): phim ·∫£nh. Qu√° chung chung so v·ªõi 'cartoons' d√†nh ri√™ng cho tr·∫ª em." },
                { id: 'D', text: "plays", isCorrect: false, expl: "D. plays (n): v·ªü k·ªãch. Kh√¥ng ph√π h·ª£p ng·ªØ c·∫£nh tivi cho tr·∫ª em b·∫±ng phim ho·∫°t h√¨nh." }
            ]
        },
        {
            id: 'ex9_q3',
            text: "Question 3 (Exercise 9): ...world news, music and many other (3)____.",
            options: [
                { id: 'A', text: "shows", isCorrect: true, expl: "A. shows (n - s·ªë nhi·ªÅu): ch∆∞∆°ng tr√¨nh bi·ªÉu di·ªÖn/truy·ªÅn h√¨nh. T·ª´ kh√≥a 'other' ch·ªâ ra r·∫±ng c√°c t·ª´ ph√≠a tr∆∞·ªõc (news, music, cartoons) ƒë·ªÅu l√† c√°c d·∫°ng 'shows' tr√™n tivi. -> Ph√π h·ª£p nh·∫•t." },
                { id: 'B', text: "channels", isCorrect: false, expl: "B. channels (n): k√™nh truy·ªÅn h√¨nh. Tin t·ª©c hay √¢m nh·∫°c kh√¥ng ph·∫£i l√† c√°c 'k√™nh' m√† l√† n·ªôi dung ph√°t tr√™n k√™nh." },
                { id: 'C', text: "time", isCorrect: false, expl: "C. time (n): th·ªùi gian. Sai ng·ªØ nghƒ©a ho√†n to√†n." },
                { id: 'D', text: "studio", isCorrect: false, expl: "D. studio (n): ph√≤ng thu. Sai ng·ªØ nghƒ©a ho√†n to√†n." }
            ]
        },
        {
            id: 'ex9_q4',
            text: "Question 4 (Exercise 9): If someone likes sports, he can just choose the right (4)____.",
            options: [
                { id: 'A', text: "athletes", isCorrect: false, expl: "A. athletes (n): v·∫≠n ƒë·ªông vi√™n. Kh√°n gi·∫£ xem tivi th√¨ ch·ªçn k√™nh ƒë·ªÉ xem ch·ª© kh√¥ng tr·ª±c ti·∫øp ch·ªçn v·∫≠n ƒë·ªông vi√™n." },
                { id: 'B', text: "programs", isCorrect: false, expl: "B. programs (n): ch∆∞∆°ng tr√¨nh. D√π c√≥ l√Ω, nh∆∞ng th√≥i quen xem tivi l√† ch·ªçn 'k√™nh th·ªÉ thao' (sports channel) thay v√¨ 'right program'." },
                { id: 'C', text: "channels", isCorrect: true, expl: "C. channels (n): k√™nh. D·ªãch: 'N·∫øu ai ƒë√≥ th√≠ch th·ªÉ thao, h·ªç ch·ªâ c·∫ßn ch·ªçn ƒë√∫ng k√™nh (th·ªÉ thao)'. R·∫•t t·ª± nhi√™n v√† h·ª£p logic." },
                { id: 'D', text: "shows", isCorrect: false, expl: "D. shows (n): C√°c show di·ªÖn. Kh√¥ng h·ª£p l√Ω b·∫±ng 'k√™nh'." }
            ]
        },
        {
            id: 'ex9_q5',
            text: "Question 5 (Exercise 9): It is not difficult for us to see why (5)____ is so popular.",
            options: [
                { id: 'A', text: "it", isCorrect: true, expl: "A. it (ƒë·∫°i t·ª´): n√≥. T·ª´ 'it' ·ªü ƒë√¢y thay th·∫ø cho danh t·ª´ s·ªë √≠t 'Television' ·ªü ƒë·∫ßu ƒëo·∫°n vƒÉn. D·ªãch: 'Kh√¥ng kh√≥ ƒë·ªÉ hi·ªÉu t·∫°i sao n√≥ (tivi) l·∫°i ph·ªï bi·∫øn ƒë·∫øn v·∫≠y'." },
                { id: 'B', text: "they", isCorrect: false, expl: "B. they (ƒë·∫°i t·ª´): ch√∫ng. 'Television' l√† danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c/s·ªë √≠t, kh√¥ng d√πng 'they'." },
                { id: 'C', text: "that", isCorrect: false, expl: "C. that: t·ª´ n·ªëi ho·∫∑c ƒë·∫°i t·ª´ ch·ªâ ƒë·ªãnh. Kh√¥ng ph√π h·ª£p c·∫•u tr√∫c c√¢u n√†y (why + S + V)." },
                { id: 'D', text: "there", isCorrect: false, expl: "D. there: tr·∫°ng t·ª´ ch·ªâ n∆°i ch·ªën / c·∫•u tr√∫c 'there is/are'. Sai ng·ªØ ph√°p." }
            ]
        },
        // EXERCISE 10
        {
            id: 'ex10_q1',
            text: "Question 1 (Exercise 10): How often is a World Cup every ____?",
            options: [
                { id: 'A', text: "one year", isCorrect: false, expl: "Sai. Th·ª±c t·∫ø v√† trong b√†i kh√¥ng ƒë·ªÅ c·∫≠p." },
                { id: 'B', text: "two years", isCorrect: false, expl: "Sai. Th·ª±c t·∫ø v√† trong b√†i kh√¥ng ƒë·ªÅ c·∫≠p." },
                { id: 'C', text: "three years", isCorrect: false, expl: "Sai. Th·ª±c t·∫ø v√† trong b√†i kh√¥ng ƒë·ªÅ c·∫≠p." },
                { id: 'D', text: "eight years", isCorrect: true, expl: "üö® CH√ö √ù T·ª™ GI√ÅO VI√äN: D·ª±a tr√™n ki·∫øn th·ª©c th·ª±c t·∫ø, World Cup di·ªÖn ra 4 nƒÉm 1 l·∫ßn. Tuy nhi√™n, ƒë·ªÅ b√†i cung c·∫•p KH√îNG CH·ª®A ƒë√°p √°n 'four years'. Trong t√¨nh hu·ªëng l√†m b√†i thi g·∫∑p l·ªói ƒë·ªÅ nh∆∞ th·∫ø n√†y, ch√∫ng ta bu·ªôc ph·∫£i ch·ªçn m·ªôt ƒë√°p √°n ƒë·ªÉ v∆∞·ª£t qua h·ªá th·ªëng (·ªü ƒë√¢y h·ªá th·ªëng t·∫°m ghi nh·∫≠n D ho·∫∑c b·∫•t k·ª≥ ƒë√°p √°n n√†o l√† gi·∫£ ƒë·ªãnh), nh∆∞ng c√°c em h√£y nh·ªõ s·ª± th·∫≠t l√† 4 nƒÉm nh√©!" }
            ]
        },
        {
            id: 'ex10_q2',
            text: "Question 2 (Exercise 10): In the first World Cup, how many teams played?",
            options: [
                { id: 'A', text: "there were 13 teams", isCorrect: true, expl: "A ƒê√öNG. D·∫´n ch·ª©ng trong b√†i: '13 countries played in the first World Cup.' (13 qu·ªëc gia ƒë√£ tham gia k·ª≥ World Cup ƒë·∫ßu ti√™n)." },
                { id: 'B', text: "Argentina beat Uruguay in the final match", isCorrect: false, expl: "B SAI v√¨ b√†i vi·∫øt ghi ng∆∞·ª£c l·∫°i: 'Uruguay beat Argentina'." },
                { id: 'C', text: "there were 32 teams", isCorrect: false, expl: "C SAI. D·∫´n ch·ª©ng: 'Now there are 32 countries' (ƒê√≥ l√† s·ªë l∆∞·ª£ng ƒê·ªôi hi·ªán t·∫°i, kh√¥ng ph·∫£i k·ª≥ ƒë·∫ßu ti√™n)." },
                { id: 'D', text: "Argentina and Uruguay are the winners", isCorrect: false, expl: "D SAI. Ch·ªâ c√≥ Uruguay th·∫Øng tr·∫≠n chung k·∫øt ƒë·∫ßu ti√™n." }
            ]
        },
        {
            id: 'ex10_q3',
            text: "Question 3 (Exercise 10): In 2002, the World Cup was in ____.",
            options: [
                { id: 'A', text: "an American country", isCorrect: false, expl: "A SAI. D·∫´n ch·ª©ng b√†i ƒë·ªçc: 'Until 2002, the World Cup was always in a European or American country' -> T·ª©c l√† TR∆Ø·ªöC 2002 th√¨ ·ªü √Çu/M·ªπ." },
                { id: 'B', text: "a European country", isCorrect: false, expl: "B SAI. L√Ω do t∆∞∆°ng t·ª± c√¢u A." },
                { id: 'C', text: "an Asian country", isCorrect: false, expl: "C SAI m·ªôt n·ª≠a. Th·ª±c t·∫ø n√≥ di·ªÖn ra ·ªü t·∫≠n 2 qu·ªëc gia." },
                { id: 'D', text: "South Korea and Japan", isCorrect: true, expl: "D ƒê√öNG. D·∫´n ch·ª©ng: 'South Korea and Japan held the first Asian World Cup.' (H√†n Qu·ªëc v√† Nh·∫≠t B·∫£n ƒë√£ t·ªï ch·ª©c World Cup - di·ªÖn ra v√†o nƒÉm 2002 theo ng·ªØ c·∫£nh c√¢u tr∆∞·ªõc ƒë√≥)." }
            ]
        },
        {
            id: 'ex10_q4',
            text: "Question 4 (Exercise 10): Why is Brazil the most successful World Cup team?",
            options: [
                { id: 'A', text: "Because they haven't played in every tournament so far.", isCorrect: false, expl: "A SAI. T·ª´ 'haven't' mang nghƒ©a ph·ªß ƒë·ªãnh, tr√°i ng∆∞·ª£c ho√†n to√†n v·ªõi b√†i ƒë·ªçc." },
                { id: 'B', text: "Because they have played in all tournaments and won the World Cup five times.", isCorrect: true, expl: "B ƒê√öNG. D·∫´n ch·ª©ng trong b√†i: 'Brazil is the most successful team. It is the only team that has played in every tournament so far.' D√π b√†i kh√¥ng nh·∫Øc tr·ª±c ti·∫øp s·ªë l·∫ßn v√¥ ƒë·ªãch l√† 5, nh∆∞ng ƒë√¢y l√† ƒë√°p √°n h·ª£p l√Ω v√† tr·ªçn v·∫πn nh·∫•t trong 4 l·ª±a ch·ªçn." },
                { id: 'C', text: "Because no one could beat them in every competition.", isCorrect: false, expl: "C SAI. B√†i ƒë·ªçc kh√¥ng h·ªÅ n√≥i r·∫±ng 'kh√¥ng ai c√≥ th·ªÉ ƒë√°nh b·∫°i h·ªç'." },
                { id: 'D', text: "Because Germany and Italy have only won the World Cup four times.", isCorrect: false, expl: "D SAI. S·ªë l·∫ßn ƒê·ª©c v√† √ù th·∫Øng kh√¥ng ph·∫£i l√† l√Ω do tr·ª±c ti·∫øp khi·∫øn Brazil ƒë∆∞·ª£c m·ªánh danh l√† th√†nh c√¥ng nh·∫•t trong n·ªôi dung c√¢u h·ªèi." }
            ]
        },
        {
            id: 'ex10_q5',
            text: "Question 5 (Exercise 10): Which of the following is NOT true?",
            options: [
                { id: 'A', text: "The first World Cup was in 1930.", isCorrect: false, expl: "A ƒê√öNG theo b√†i ƒë·ªçc ('The first World Cup was in 1930'). Do ƒë√≥ lo·∫°i v√¨ ta ƒëang t√¨m c√¢u SAI (NOT true)." },
                { id: 'B', text: "Uruguay won the first World Cup.", isCorrect: false, expl: "B ƒê√öNG theo b√†i ƒë·ªçc ('Uruguay beat Argentina and became the first World Cup winners'). Lo·∫°i." },
                { id: 'C', text: "France has won the World Cup once.", isCorrect: true, expl: "C SAI so v·ªõi b√†i ƒë·ªçc. D·∫´n ch·ª©ng: 'Uruguay, Argentina, and France have won it two times' (Ph√°p th·∫Øng 2 l·∫ßn, kh√¥ng ph·∫£i 1 l·∫ßn). V√¨ c√¢u n√†y SAI n√™n n√≥ ch√≠nh l√† ƒê√ÅP √ÅN c·ªßa c√¢u h·ªèi." },
                { id: 'D', text: "South Africa held the first African World Cup.", isCorrect: false, expl: "D ƒê√öNG theo b√†i ƒë·ªçc ('The first African World Cup was in 2010, in South Africa'). Lo·∫°i." }
            ]
        }
    ];

    // ================= AUDIO API SYNTHESIS (√Çm thanh T·ª± ƒë·ªông) =================
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    function playCorrectSound() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        
        osc.type = 'sine';
        osc.frequency.setValueAtTime(600, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
        
        gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        
        osc.start();
        osc.stop(audioCtx.currentTime + 0.3);
    }

    function playWrongSound() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(300, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
        
        gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        
        osc.start();
        osc.stop(audioCtx.currentTime + 0.3);
    }

    // ================= CONFETTI EFFECT (Ph√°o gi·∫•y) =================
    function fireConfetti() {
        const colors = ['#00D26A', '#FDCB6E', '#8854C0', '#00C9A7', '#FF4757'];
        for (let i = 0; i < 40; i++) {
            let confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDuration = (Math.random() * 1.5 + 1.5) + 's';
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 3000);
        }
    }

    // ================= LOGIC HI·ªÇN TH·ªä V√Ä X√ÅO TR·ªòN =================
    let userAnswers = {};
    let isQuizActive = false;

    // Shuffle Array Algorithm (Fisher-Yates)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function renderQuestions() {
        const container = document.getElementById('quiz-container');
        const submitBtnHTML = container.innerHTML; // L∆∞u l·∫°i n√∫t submit
        container.innerHTML = '<h2 class="passage-title" style="color: var(--tertiary);">üéØ Exercises</h2>';
        
        rawQuestions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            
            // Render ti√™u ƒë·ªÅ c√¢u h·ªèi
            let html = `<div class="question-text">${q.text}</div>`;
            html += `<div class="options-grid" id="grid-${q.id}">`;
            
            // X√°o tr·ªôn ƒë√°p √°n
            let shuffledOptions = shuffleArray([...q.options]);
            
            shuffledOptions.forEach(opt => {
                html += `
                    <button class="option-btn" 
                            id="btn-${q.id}-${opt.id}" 
                            onclick="selectOption('${q.id}', '${opt.id}', ${opt.isCorrect})">
                        ${opt.text}
                    </button>
                `;
            });
            html += `</div>`;
            
            // Div ch·ª©a gi·∫£i th√≠ch
            html += `<div class="explanation-box" id="expl-${q.id}">
                <strong style="color: var(--secondary); font-size: 16px;">üë©‚Äçüè´ Gi·∫£i th√≠ch chi ti·∫øt t·ª´ Gi√°o vi√™n:</strong><br><br>
            `;
            // Gh√©p t·∫•t c·∫£ l·ªùi gi·∫£i th√≠ch c·ªßa 4 ƒë√°p √°n v√†o
            q.options.forEach(o => {
                html += `<p style="margin-bottom: 5px;">${o.expl}</p>`;
            });
            html += `</div>`;
            
            card.innerHTML = html;
            container.appendChild(card);
        });

        // Add back the submit button
        container.insertAdjacentHTML('beforeend', `
            <div class="submit-container">
                <button class="btn-submit" onclick="submitQuiz()">N·ªòP B√ÄI üöÄ</button>
            </div>
        `);
    }

    function selectOption(qId, optId, isCorrect) {
        if (!isQuizActive) {
            alert("Vui l√≤ng b·∫•m 'B·∫ÆT ƒê·∫¶U T√çNH GI·ªú' ·ªü g√≥c tr√™n ƒë·ªÉ l√†m b√†i!");
            return;
        }

        // N·∫øu ƒë√£ tr·∫£ l·ªùi c√¢u n√†y r·ªìi th√¨ kh√¥ng cho ch·ªçn l·∫°i
        if (userAnswers[qId] !== undefined) return;
        
        userAnswers[qId] = isCorrect;
        const btn = document.getElementById(`btn-${qId}-${optId}`);
        const explBox = document.getElementById(`expl-${qId}`);
        const allBtns = document.querySelectorAll(`#grid-${qId} .option-btn`);
        
        // Disable all buttons for this question
        allBtns.forEach(b => {
            b.disabled = true;
            b.style.cursor = 'not-allowed';
        });

        if (isCorrect) {
            btn.classList.add('correct');
            playCorrectSound();
            fireConfetti();
        } else {
            btn.classList.add('wrong');
            btn.classList.add('shake');
            playWrongSound();
            
            // T√¨m v√† b√¥i xanh ƒë√°p √°n ƒë√∫ng th·ª±c s·ª±
            const qData = rawQuestions.find(q => q.id === qId);
            const correctOpt = qData.options.find(o => o.isCorrect === true);
            const correctBtn = document.getElementById(`btn-${qId}-${correctOpt.id}`);
            if (correctBtn) correctBtn.classList.add('correct');
        }

        // Hi·ªán gi·∫£i th√≠ch
        explBox.style.display = 'block';
    }

    // ================= TIMER LOGIC =================
    let timeRemaining = 600; // 10 minutes
    let timerInterval;

    function toggleTimer() {
        const btn = document.getElementById('btn-timer');
        if (!isQuizActive) {
            // B·∫Øt ƒë·∫ßu
            isQuizActive = true;
            btn.innerText = "T·∫†M D·ª™NG";
            btn.classList.remove('btn-start');
            btn.classList.add('btn-pause');
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert("‚è∞ ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c xem v√† ch·ªçn ƒë√°p √°n, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                }
            }, 1000);
        } else {
            // T·∫°m d·ª´ng
            isQuizActive = false;
            clearInterval(timerInterval);
            btn.innerText = "TI·∫æP T·ª§C B√ÄI THI";
            btn.classList.remove('btn-pause');
            btn.classList.add('btn-start');
        }
    }

    function updateTimerDisplay() {
        const m = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
        const s = (timeRemaining % 60).toString().padStart(2, '0');
        document.getElementById('timer-text').innerText = `${m}:${s}`;
    }

    // ================= ULTILITIES =================
    function toggleTranslate(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    function submitQuiz() {
        const total = rawQuestions.length;
        const score = Object.values(userAnswers).filter(val => val === true).length;
        
        let msg = "";
        if (score === total) msg = "üåü Thi√™n t√†i! B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ho√†n to√†n!";
        else if (score >= total * 0.7) msg = "üî• L√†m t·ªët l·∫Øm! C·ªë g·∫Øng ch√∫t n·ªØa l√† ho√†n h·∫£o!";
        else if (score >= total * 0.5) msg = "üëç Kh√° ·ªïn! B·∫°n c·∫ßn √¥n l·∫°i b√†i m·ªôt ch√∫t nh√©.";
        else msg = "üí™ C·ªë l√™n nh√©! H√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch c·ªßa gi√°o vi√™n b√™n d∆∞·ªõi ƒë·ªÉ r√∫t kinh nghi·ªám.";

        document.getElementById('score-display').innerText = `${score}/${total}`;
        document.getElementById('score-msg').innerText = msg;
        document.getElementById('result-modal').style.display = 'flex';
        
        clearInterval(timerInterval); // D·ª´ng th·ªùi gian
        if(score > total * 0.5) fireConfetti();
    }

    function closeModal() {
        document.getElementById('result-modal').style.display = 'none';
    }

    // Kh·ªüi t·∫°o trang
    window.onload = () => {
        renderQuestions();
    };
</script>
</body>
</html>