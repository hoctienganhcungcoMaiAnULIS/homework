<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Quiz - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-mint: #00C9A7;
            --primary-yellow: #FDCB6E;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-dark: #2d3436;
        }

        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
            /* H·ªça ti·∫øt n·ªÅn vui nh·ªôn: M√®o con, ng√¥i sao, ch·∫•m bi tr√™n n·ªÅn loang pastel */
            background: linear-gradient(135deg, rgba(255,184,210,0.8) 0%, rgba(136,84,192,0.6) 50%, rgba(0,201,167,0.7) 100%), 
                        url('data:image/svg+xml;utf8,<svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"><path d="M20 30 Q30 10 40 30 Q50 10 60 30 Q60 50 40 60 Q20 50 20 30 Z" fill="rgba(255,255,255,0.2)"/><circle cx="90" cy="40" r="4" fill="rgba(255,255,255,0.4)"/><polygon points="80,90 85,80 95,85 85,95" fill="rgba(255,255,255,0.3)"/></svg>');
            background-blend-mode: overlay;
            color: var(--text-dark);
            padding-bottom: 120px;
        }

        .header {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 0 0 30px 30px;
            margin-bottom: 40px;
            border-bottom: 5px solid var(--primary-mint);
        }

        .header h5 { margin: 0; color: var(--primary-pink); font-size: 1.2rem; text-transform: uppercase; letter-spacing: 1px; }
        .header h1 { margin: 10px 0 0; color: var(--primary-mint); font-size: 2.2rem; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); }

        .container { max-width: 900px; margin: 0 auto; padding: 0 15px; }

        /* L√Ω thuy·∫øt Box */
        .theory-box {
            background: #fff; border: 4px dashed var(--primary-pink);
            border-radius: 20px; padding: 25px; margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15); position: relative;
        }
        .theory-title {
            background: var(--primary-pink); color: white; padding: 10px 25px;
            border-radius: 15px; display: inline-block; font-size: 1.5rem;
            font-weight: 900; margin-top: -45px; box-shadow: 0 5px 0 #5f27cd;
        }
        .theory-content h3 { color: var(--primary-mint); font-size: 1.3rem; margin-top: 20px;}
        .theory-content p { font-size: 1.1rem; line-height: 1.6;}
        
        .theory-table {
            width: 100%; border-collapse: collapse; margin-top: 10px;
            border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            background: white;
        }
        .theory-table th { background: var(--primary-mint); color: white; padding: 12px; font-size: 1.1rem; border: 1px solid #00A388;}
        .theory-table td { padding: 12px; border: 1px solid #eee; font-weight: bold; vertical-align: middle; text-align:center;}
        .theory-table tr:nth-child(even) td { background: #f1f8f6; }
        
        .ex-box { background: #fdfbfb; padding: 15px; border-left: 5px solid var(--primary-yellow); border-radius: 8px; margin-top: 10px;}

        .section-title {
            background: var(--primary-yellow); color: #2d3436; padding: 12px 25px;
            border-radius: 20px; display: inline-block; margin-top: 20px;
            box-shadow: 0 5px 0 #e1b12c; border: 3px solid white; font-size: 1.4rem; font-weight: 900;
        }

        .question-card {
            background: var(--card-bg); border-radius: 20px; padding: 25px; margin: 20px 0;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1); border: 2px solid #eee; transition: transform 0.2s;
        }

        .question-text { font-size: 1.3rem; font-weight: 800; margin-bottom: 20px; color: var(--primary-pink); }

        /* MCQ Options */
        .options-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .option-btn {
            background: white; border: 2px solid #e0e0e0; padding: 15px;
            border-radius: 15px; font-size: 1.2rem; font-weight: 800; color: var(--text-dark);
            cursor: pointer; box-shadow: 0 6px 0 #e0e0e0; transition: all 0.1s;
            font-family: 'Nunito', sans-serif; text-align: center;
        }
        .option-btn:hover { transform: scale(1.02) translateY(-2px); box-shadow: 0 8px 0 #e0e0e0; }
        .option-btn:active { transform: scale(0.98) translateY(4px); box-shadow: 0 2px 0 #e0e0e0; }
        .option-btn.correct { background: var(--correct-green); border-color: #00A355; color: white; box-shadow: 0 6px 0 #00A355; }
        .option-btn.wrong { background: var(--wrong-red); border-color: #D63031; color: white; box-shadow: 0 6px 0 #D63031; }

        /* Explanations */
        .explanation {
            display: none; margin-top: 25px; padding: 20px; background: #fdfbfb;
            border-left: 6px solid var(--primary-mint); border-radius: 12px;
            animation: slideDown 0.3s ease-out; line-height: 1.6; font-size: 1.1rem;
        }
        .explanation h4 { margin: 0 0 12px 0; color: var(--primary-pink); font-size: 1.3rem; text-transform: uppercase;}
        .explanation p { margin: 8px 0; }
        .explanation .highlight { font-weight: 900; color: var(--primary-mint); }

        /* Text Inputs (Ex 2, 3, 4) */
        .input-group { display: flex; flex-wrap: wrap; gap: 15px; align-items: center; margin-top: 10px;}
        .write-input {
            flex: 1; min-width: 250px; padding: 15px; border: 3px solid #dfe6e9; border-radius: 15px;
            font-family: 'Nunito'; font-size: 1.2rem; font-weight: bold;
            color: var(--primary-pink); outline: none; transition: 0.3s;
        }
        .write-input:focus { border-color: var(--primary-mint); }
        .write-input.correct { background: rgba(0,210,106,0.1); border-color: var(--correct-green); color: var(--correct-green); }
        .write-input.wrong { background: rgba(255,71,87,0.1); border-color: var(--wrong-red); color: var(--wrong-red); }
        
        .check-btn {
            background: var(--primary-mint); border: none; padding: 15px 30px;
            border-radius: 15px; font-weight: 900; font-size: 1.2rem; cursor: pointer; color: white;
            box-shadow: 0 6px 0 #00A388; transition: 0.1s; font-family: 'Nunito';
        }
        .check-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #00A388; }

        /* Animations */
        @keyframes slideDown { from { opacity: 0; transform: translateY(-15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px) rotate(-3deg); }
            75% { transform: translateX(8px) rotate(3deg); }
        }
        .shake { animation: shake 0.4s; }

        /* Submit Bar & Modal */
        .submit-bar {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white; padding: 15px; box-shadow: 0 -5px 20px rgba(0,0,0,0.15);
            text-align: center; z-index: 100; box-sizing: border-box;
        }
        .submit-btn {
            background: var(--primary-pink); color: white; border: none; padding: 15px 50px;
            font-size: 1.6rem; font-weight: 900; border-radius: 30px; cursor: pointer;
            box-shadow: 0 6px 0 #5f27cd; font-family: 'Nunito'; transition: 0.2s; text-transform: uppercase;
        }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 0 #5f27cd; }
        .submit-btn:active { transform: translateY(6px); box-shadow: 0 0 0 #5f27cd; }
        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: white; padding: 40px; border-radius: 25px; text-align: center; max-width: 450px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); border: 5px solid var(--primary-mint);}
        .modal-content h2 { color: var(--primary-pink); margin-top: 0; font-size: 2.5rem; }
    </style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<div class="header">
    <h5>Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</h5>
    <h1>ƒê·∫°i T·ª´ Si√™u ƒê·∫≥ng üêæ</h1>
</div>

<div class="container" id="quiz-container">

    <div class="theory-box">
        <div class="theory-title">II. C√°ch d√πng ƒë·∫°i t·ª´ (using pronouns) üìö</div>
        <div class="theory-content">
            <h3>1. B·∫£ng t√¢n ng·ªØ</h3>
            <p>C√°c con h√£y nh√¨n v√†o ng∆∞·ªùi/v·∫≠t m√¨nh mu·ªën nh·∫Øc ƒë·∫øn ƒë·ªÉ ch·ªçn t·ª´ cho ƒë√∫ng nh√©:</p>
            <table class="theory-table">
                <tr>
                    <th>Ng∆∞·ªùi/V·∫≠t ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn</th>
                    <th>T·ª´ thay th·∫ø (ƒê·∫°i t·ª´)</th>
                    <th>Nghƒ©a ti·∫øng Vi·ªát</th>
                </tr>
                <tr><td><strong>I</strong> (L√† ch√≠nh m√¨nh)</td><td style="color:var(--primary-pink)">‚Üí <strong>me</strong></td><td>t·ªõ, m√¨nh, con</td></tr>
                <tr><td><strong>Boy/Man</strong> (Con trai: B·ªë, √îng, B·∫°n nam...)</td><td style="color:var(--primary-pink)">‚Üí <strong>him</strong></td><td>c·∫≠u ·∫•y, √¥ng ·∫•y, anh ·∫•y</td></tr>
                <tr><td><strong>Girl/Woman</strong> (Con g√°i: M·∫π, B√†, B·∫°n n·ªØ...)</td><td style="color:var(--primary-pink)">‚Üí <strong>her</strong></td><td>c√¥ ·∫•y, b√† ·∫•y, ch·ªã ·∫•y</td></tr>
                <tr><td><strong>Thing/Animal</strong> (ƒê·ªì v·∫≠t/Con v·∫≠t s·ªë √≠t: b√∫t, m√®o...)</td><td style="color:var(--primary-pink)">‚Üí <strong>it</strong></td><td>n√≥</td></tr>
                <tr>
                    <td><strong>S·ªë nhi·ªÅu</strong> (D√π l√† ng∆∞·ªùi, v·∫≠t hay con v·∫≠t, mi·ªÖn l√† s·ªë nhi·ªÅu)<br>VD: <em>Maya and Zach, The shoes, The books</em></td>
                    <td style="color:var(--primary-pink)">‚Üí <strong>them</strong></td>
                    <td>h·ªç, b·ªçn h·ªç, b·ªçn ch√∫ng</td>
                </tr>
            </table>

            <h3>2. V√≠ d·ª•</h3>
            <div class="ex-box">
                <p>üôã‚Äç‚ôÄÔ∏è <strong>V·ªõi b·∫°n n·ªØ (Girl/Woman):</strong><br>
                Nora is missing a knife.<br>
                ‚Üí Give it to <strong>her</strong>. <em>(V√¨ Nora l√† con g√°i ‚Üí d√πng her)</em></p>
                <p>üôã‚Äç‚ôÇÔ∏è <strong>V·ªõi b·∫°n nam (Boy/Man):</strong><br>
                Jack is missing a napkin.<br>
                ‚Üí Give it to <strong>him</strong>. <em>(V√¨ Jack l√† con trai ‚Üí d√πng him)</em></p>
                <p>üëØ‚Äç‚ôÇÔ∏è <strong>V·ªõi nhi·ªÅu ng∆∞·ªùi (Plural):</strong><br>
                Maya and Zach need spoons.<br>
                ‚Üí Give the spoons to <strong>them</strong>. <em>(V√¨ c√≥ 2 ng∆∞·ªùi ‚Üí d√πng them)</em></p>
                <p>üôã <strong>V·ªõi ch√≠nh m√¨nh (Me):</strong><br>
                I am missing a fork.<br>
                ‚Üí Give it to <strong>me</strong>. <em>(V√¨ t√¥i ƒëang thi·∫øu ‚Üí ƒë∆∞a cho t√¥i)</em></p>
            </div>
        </div>
    </div>

    <h2 class="section-title">B√†i t·∫≠p 1: Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t (10 c√¢u)</h2>
    <p><em>M·ª•c ti√™u: Nh·∫≠n di·ªán ƒë√∫ng ƒë·ªëi t∆∞·ª£ng (Nam, N·ªØ, B·∫£n th√¢n, S·ªë nhi·ªÅu, V·∫≠t) ƒë·ªÉ ch·ªçn ƒë·∫°i t·ª´ thay th·∫ø ch√≠nh x√°c.</em></p>
    <div id="ex1-container"></div>

    <h2 class="section-title">B√†i t·∫≠p 2: ƒêi·ªÅn ƒë·∫°i t·ª´ th√≠ch h·ª£p (10 c√¢u)</h2>
    <p><em>M·ª•c ti√™u: T·ª± nh·ªõ t·ª´ v√† ƒëi·ªÅn (me, him, her, it, them) v√†o ch·ªó tr·ªëng.</em></p>
    <div id="ex2-container"></div>

    <h2 class="section-title">B√†i t·∫≠p 3: T√¨m v√† s·ª≠a l·ªói sai (5 c√¢u)</h2>
    <p><em>M·ª•c ti√™u: Ph√°t hi·ªán s·ª± "l·ªách pha" gi·ªØa ch·ªß ng·ªØ v√† ƒë·∫°i t·ª´ thay th·∫ø.</em></p>
    <div id="ex3-container"></div>
    
    <h2 class="section-title">B√†i t·∫≠p 4: Vi·∫øt c√¢u y√™u c·∫ßu v·ªõi "Give..." (5 c√¢u)</h2>
    <p><em>M·ª•c ti√™u: D·ª±a v√†o t√¨nh hu·ªëng ƒë·ªÉ vi·∫øt tr·ªçn v·∫πn c√¢u (V√≠ d·ª•: Give it to me).</em></p>
    <div id="ex4-container"></div>

</div>

<div class="submit-bar">
    <button class="submit-btn" id="submitBtn">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
</div>

<div class="modal" id="scoreModal">
    <div class="modal-content">
        <h2>üéâ HO√ÄN TH√ÄNH üéâ</h2>
        <p id="scoreText" style="font-size: 1.8rem; font-weight: 900; color: #2d3436;"></p>
        <p id="complimentText" style="color: var(--primary-mint); font-size: 1.3rem; font-weight: bold;"></p>
        <button class="check-btn" onclick="location.reload()" style="margin-top:20px; width:100%; font-size: 1.5rem;">L√†m l·∫°i b√†i nh√© üîÑ</button>
    </div>
</div>

<script>
    /* --- AUDIO EFFECTS (WEB AUDIO API) --- */
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    let audioCtx = new AudioContext();

    function playDing() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.type = 'sine';
        osc.frequency.setValueAtTime(800, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1600, audioCtx.currentTime + 0.1);
        gain.gain.setValueAtTime(0, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0.4, audioCtx.currentTime + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
        osc.start(); osc.stop(audioCtx.currentTime + 0.5);
    }

    function playBuzz() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(150, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(80, audioCtx.currentTime + 0.3);
        gain.gain.setValueAtTime(0, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0.3, audioCtx.currentTime + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        osc.start(); osc.stop(audioCtx.currentTime + 0.3);
    }

    /* --- CONFETTI EFFECT --- */
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    function fireConfetti() {
        const colors = ['#00D26A', '#FF4757', '#FDCB6E', '#00C9A7', '#8854C0'];
        for(let i=0; i<80; i++) {
            particles.push({
                x: window.innerWidth / 2, y: window.innerHeight / 2,
                r: Math.random() * 8 + 4, dx: Math.random() * 16 - 8, dy: Math.random() * -16 - 8,
                color: colors[Math.floor(Math.random() * colors.length)], tilt: Math.random() * 10
            });
        }
    }
    function animateConfetti() {
        requestAnimationFrame(animateConfetti);
        ctx.clearRect(0,0,canvas.width, canvas.height);
        particles.forEach((p, index) => {
            p.dy += 0.4; p.x += p.dx; p.y += p.dy; p.tilt += 0.15;
            ctx.beginPath(); ctx.lineWidth = p.r; ctx.strokeStyle = p.color;
            ctx.moveTo(p.x + p.tilt + p.r, p.y); ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r); ctx.stroke();
            if(p.y > canvas.height) particles.splice(index, 1);
        });
    }
    animateConfetti();

    /* --- GLOBAL LOGIC --- */
    let score = 0;
    const TOTAL_QUESTIONS = 30;

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function cleanStr(str) { 
        return str.toLowerCase().replace(/[.,!?]/g, '').replace(/\s+/g, ' ').trim(); 
    }

    /* =========================================
       DATA & RENDER B√ÄI T·∫¨P 1 (MCQ)
    ========================================= */
    const ex1Data = [
        { q: "Jack is missing a pen. Give it to ________.", opts: ["A. him", "B. her", "C. me"], ans: "A. him", 
          vn: "Jack ƒëang thi·∫øu m·ªôt c√°i b√∫t. H√£y ƒë∆∞a n√≥ cho c·∫≠u ·∫•y.", 
          p: "A. him: anh ·∫•y, c·∫≠u ·∫•y. B. her: c√¥ ·∫•y. C. me: t√¥i.", 
          r: "ƒê·ªëi t∆∞·ª£ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn l√† 'Jack' (m·ªôt b·∫°n nam). ƒê·∫°i t·ª´ thay th·∫ø cho con trai l√† 'him'.", 
          w: "B sai v√¨ her d√πng cho con g√°i. C sai v√¨ me l√† b·∫£n th√¢n m√¨nh." },
        
        { q: "Nora wants to read the book. Give it to ________.", opts: ["A. it", "B. him", "C. her"], ans: "C. her", 
          vn: "Nora mu·ªën ƒë·ªçc s√°ch. H√£y ƒë∆∞a n√≥ cho c√¥ ·∫•y.", 
          p: "A. it: n√≥. B. him: c·∫≠u ·∫•y. C. her: c√¥ ·∫•y.", 
          r: "ƒê·ªëi t∆∞·ª£ng l√† 'Nora' (t√™n m·ªôt b·∫°n n·ªØ). ƒê·∫°i t·ª´ thay th·∫ø cho con g√°i l√† 'her'.", 
          w: "A sai v√¨ it d√πng cho ƒë·ªì v·∫≠t/con v·∫≠t. B sai gi·ªõi t√≠nh." },

        { q: "I am hungry. Give the apple to ________, please.", opts: ["A. them", "B. me", "C. him"], ans: "B. me", 
          vn: "T·ªõ ƒë√≥i. L√†m ∆°n ƒë∆∞a qu·∫£ t√°o cho t·ªõ.", 
          p: "A. them: h·ªç/ch√∫ng. B. me: t·ªõ/t√¥i. C. him: c·∫≠u ·∫•y.", 
          r: "Ch·ªß ng·ªØ c·ªßa c√¢u tr∆∞·ªõc l√† 'I' (b·∫£n th√¢n m√¨nh). V·∫≠y ph·∫£i ƒë∆∞a qu·∫£ t√°o cho 'me' (t√¥i/t·ªõ).", 
          w: "A v√† C sai ho√†n to√†n v·ªÅ ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn." },

        { q: "Maya and Zach need chairs. Give the chairs to ________.", opts: ["A. them", "B. it", "C. her"], ans: "A. them", 
          vn: "Maya v√† Zach c·∫ßn gh·∫ø. H√£y ƒë∆∞a gh·∫ø cho h·ªç.", 
          p: "A. them: h·ªç/b·ªçn h·ªç. B. it: n√≥. C. her: c√¥ ·∫•y.", 
          r: "C√≥ t·∫≠n 2 ng∆∞·ªùi l√† 'Maya and Zach' (s·ªë nhi·ªÅu). C·ª© l√† s·ªë nhi·ªÅu th√¨ ta d√πng ƒë·∫°i t·ª´ 'them'.", 
          w: "B v√† C ch·ªâ d√πng cho ƒë·ªëi t∆∞·ª£ng s·ªë √≠t (1 ng∆∞·ªùi/1 v·∫≠t)." },

        { q: "Quynh Anh is looking for her bag. Please find it for ________.", opts: ["A. him", "B. her", "C. them"], ans: "B. her", 
          vn: "Qu·ª≥nh Anh ƒëang t√¨m chi·∫øc c·∫∑p. H√£y t√¨m n√≥ cho c√¥ ·∫•y.", 
          p: "A. him: anh ·∫•y. B. her: c√¥ ·∫•y. C. them: b·ªçn h·ªç.", 
          r: "'Quynh Anh' l√† t√™n c·ªßa m·ªôt b·∫°n n·ªØ. Do ƒë√≥, ta ph·∫£i d√πng 'her'.", 
          w: "A sai gi·ªõi t√≠nh. C sai v√¨ Qu·ª≥nh Anh ch·ªâ c√≥ 1 ng∆∞·ªùi (s·ªë √≠t)." },

        { q: "The cat is thirsty. Give some water to ________.", opts: ["A. it", "B. them", "C. me"], ans: "A. it", 
          vn: "Con m√®o ƒëang kh√°t. H√£y cho n√≥ u·ªëng n∆∞·ªõc.", 
          p: "A. it: n√≥ (ƒë·ªì v·∫≠t/con v·∫≠t). B. them: ch√∫ng. C. me: t√¥i.", 
          r: "'The cat' l√† m·ªôt con v·∫≠t ·ªü d·∫°ng s·ªë √≠t. ƒê·∫°i t·ª´ thay th·∫ø chu·∫©n nh·∫•t l√† 'it'.", 
          w: "B sai v√¨ cat kh√¥ng c√≥ 's' (kh√¥ng ph·∫£i s·ªë nhi·ªÅu). C sai ƒë·ªëi t∆∞·ª£ng." },

        { q: "My father is washing his car. I will help ________.", opts: ["A. her", "B. him", "C. them"], ans: "B. him", 
          vn: "B·ªë t√¥i ƒëang r·ª≠a xe. T√¥i s·∫Ω gi√∫p √¥ng ·∫•y.", 
          p: "A. her: b√† ·∫•y. B. him: √¥ng ·∫•y. C. them: h·ªç.", 
          r: "'My father' (B·ªë) l√† gi·ªõi t√≠nh nam. ƒê·∫°i t·ª´ thay th·∫ø cho ng∆∞·ªùi nam l√† 'him'.", 
          w: "A sai v√¨ her d√πng cho n·ªØ (nh∆∞ m·∫π/b√†). C sai v√¨ b·ªë l√† 1 ng∆∞·ªùi." },

        { q: "Thanh and Quynh Anh are drawing. Give the markers to ________.", opts: ["A. her", "B. them", "C. it"], ans: "B. them", 
          vn: "Thanh v√† Qu·ª≥nh Anh ƒëang v·∫Ω. H√£y ƒë∆∞a b√∫t m√†u cho h·ªç.", 
          p: "A. her: c√¥ ·∫•y. B. them: h·ªç/b·ªçn h·ªç. C. it: n√≥.", 
          r: "Ch·ªß ng·ªØ g·ªìm 2 ng∆∞·ªùi 'Thanh and Quynh Anh' (s·ªë nhi·ªÅu). ƒê·∫°i t·ª´ thay th·∫ø s·ªë nhi·ªÅu lu√¥n l√† 'them'.", 
          w: "A v√† C ch·ªâ d√†nh cho s·ªë √≠t." },

        { q: "The shoes are dirty. Please wash ________.", opts: ["A. it", "B. them", "C. him"], ans: "B. them", 
          vn: "ƒê√¥i gi√†y b·ªã b·∫©n r·ªìi. H√£y gi·∫∑t ch√∫ng.", 
          p: "A. it: n√≥. B. them: ch√∫ng (s·ªë nhi·ªÅu). C. him: c·∫≠u ·∫•y.", 
          r: "B·∫´y ·ªü ƒë√¢y n√†y! 'The shoes' (c√≥ ch·ªØ s) l√† s·ªë nhi·ªÅu (ƒë√¥i gi√†y). ƒê√£ l√† s·ªë nhi·ªÅu k·ªÉ c·∫£ ƒë·ªì v·∫≠t c≈©ng ph·∫£i d√πng 'them'.", 
          w: "A (it) ch·ªâ d√πng cho M·ªòT ƒë·ªì v·∫≠t. C sai ho√†n to√†n." },

        { q: "This is my new bicycle. I really like ________.", opts: ["A. it", "B. them", "C. me"], ans: "A. it", 
          vn: "ƒê√¢y l√† chi·∫øc xe ƒë·∫°p m·ªõi c·ªßa t·ªõ. T·ªõ r·∫•t th√≠ch n√≥.", 
          p: "A. it: n√≥. B. them: ch√∫ng. C. me: t√¥i.", 
          r: "'Bicycle' (xe ƒë·∫°p) l√† m·ªôt ƒë·ªì v·∫≠t s·ªë √≠t. D√πng 'it' ƒë·ªÉ thay th·∫ø.", 
          w: "B sai v√¨ bicycle kh√¥ng c√≥ 's'. C sai v√¨ kh√¥ng th·ªÉ t·ª± th√≠ch ch√≠nh m√¨nh trong ng·ªØ c·∫£nh n√†y." }
    ];

    const ex1Container = document.getElementById('ex1-container');
    ex1Data.forEach((item, index) => {
        let shuffledOpts = shuffleArray([...item.opts]);
        let btnHtml = shuffledOpts.map(opt => `<button class="option-btn" data-val="${opt}">${opt}</button>`).join('');
        
        let html = `
        <div class="question-card mcq-card" data-ans="${item.ans}">
            <div class="question-text">${index + 1}. ${item.q}</div>
            <div class="options-grid">${btnHtml}</div>
            <div class="explanation">
                <h4>üí° Gi·∫£i th√≠ch si√™u chi ti·∫øt:</h4>
                <p><strong>1. D·ªãch c√¢u:</strong> ${item.vn}</p>
                <p><strong>2. Ph√¢n t√≠ch:</strong> ${item.p}</p>
                <p><strong>3. T·∫°i sao ƒë√∫ng?</strong> <span class="highlight">${item.r}</span></p>
                <p><strong>4. T·∫°i sao sai?</strong> ${item.w}</p>
            </div>
        </div>`;
        ex1Container.innerHTML += html;
    });

    document.querySelectorAll('.mcq-card').forEach(card => {
        const btns = card.querySelectorAll('.option-btn');
        const correctAns = card.getAttribute('data-ans');
        const exp = card.querySelector('.explanation');
        let answered = false;

        btns.forEach(btn => {
            btn.addEventListener('click', () => {
                if(answered) return;
                answered = true;
                if(btn.getAttribute('data-val') === correctAns) {
                    btn.classList.add('correct'); playDing(); fireConfetti(); score++;
                } else {
                    btn.classList.add('wrong'); card.classList.add('shake'); playBuzz();
                    btns.forEach(b => { if(b.getAttribute('data-val') === correctAns) b.classList.add('correct'); });
                }
                exp.style.display = 'block';
            });
        });
    });

    /* =========================================
       DATA & RENDER B√ÄI T·∫¨P 2 (GAP FILL)
    ========================================= */
    const ex2Data = [
        { q: "Jack is missing a napkin. ‚ûî Give it to ________.", ans: ["him"], vn: "Jack ƒëang thi·∫øu khƒÉn ƒÉn. H√£y ƒë∆∞a cho c·∫≠u ·∫•y.", p: "ƒê·ªëi t∆∞·ª£ng: Jack (b·∫°n nam).", r: "Thay th·∫ø cho nam s·ªë √≠t d√πng 'him'.", w: "Kh√¥ng ƒë∆∞·ª£c d√πng her (n·ªØ) hay it (v·∫≠t)." },
        { q: "I am missing a fork. ‚ûî Give it to ________.", ans: ["me"], vn: "T·ªõ ƒëang thi·∫øu c√°i nƒ©a. H√£y ƒë∆∞a cho t·ªõ.", p: "ƒê·ªëi t∆∞·ª£ng: I (b·∫£n th√¢n ng∆∞·ªùi n√≥i).", r: "Thay th·∫ø cho 'I' l√† 'me'.", w: "Kh√¥ng d√πng c√°c ng√¥i kh√°c v√¨ ch√≠nh t·ªõ ƒëang b·ªã thi·∫øu ƒë·ªì." },
        { q: "Nora is missing a knife. ‚ûî Give it to ________.", ans: ["her"], vn: "Nora ƒëang thi·∫øu m·ªôt con dao. H√£y ƒë∆∞a cho c√¥ ·∫•y.", p: "ƒê·ªëi t∆∞·ª£ng: Nora (b·∫°n n·ªØ).", r: "Thay th·∫ø cho n·ªØ s·ªë √≠t d√πng 'her'.", w: "Kh√¥ng d√πng him (nam) hay them (s·ªë nhi·ªÅu)." },
        { q: "Maya and Zach need spoons. ‚ûî Give the spoons to ________.", ans: ["them"], vn: "Maya v√† Zach c·∫ßn th√¨a. H√£y ƒë∆∞a cho h·ªç.", p: "ƒê·ªëi t∆∞·ª£ng: Maya and Zach (2 ng∆∞·ªùi).", r: "ƒê√£ t·ª´ 2 ng∆∞·ªùi tr·ªü l√™n (s·ªë nhi·ªÅu) b·∫Øt bu·ªôc d√πng 'them'.", w: "C·∫•m d√πng him hay her v√¨ ƒë√¢y l√† s·ªë nhi·ªÅu." },
        { q: "My mother is cooking dinner. I am helping ________.", ans: ["her"], vn: "M·∫π t√¥i ƒëang n·∫•u b·ªØa t·ªëi. T√¥i ƒëang gi√∫p b√† ·∫•y.", p: "ƒê·ªëi t∆∞·ª£ng: My mother (M·∫π - ph·ª• n·ªØ).", r: "Thay th·∫ø cho ph·ª• n·ªØ s·ªë √≠t d√πng 'her'.", w: "Kh√¥ng d√πng him v√¨ him l√† con trai." },
        { q: "The dog is hungry. ‚ûî Give some food to ________.", ans: ["it"], vn: "Con ch√≥ ƒëang ƒë√≥i. H√£y cho n√≥ th·ª©c ƒÉn.", p: "ƒê·ªëi t∆∞·ª£ng: The dog (1 con v·∫≠t).", r: "Thay th·∫ø cho 1 con v·∫≠t d√πng 'it'.", w: "Kh√¥ng d√πng them v√¨ The dog kh√¥ng c√≥ 's' (s·ªë √≠t)." },
        { q: "My brother is playing outside. ‚ûî Give the ball to ________.", ans: ["him"], vn: "Anh trai t·ªõ ƒëang ch∆°i ngo√†i s√¢n. H√£y ƒë∆∞a b√≥ng cho anh ·∫•y.", p: "ƒê·ªëi t∆∞·ª£ng: My brother (Anh trai - nam).", r: "Thay th·∫ø cho ƒë√†n √¥ng/con trai s·ªë √≠t d√πng 'him'.", w: "Kh√¥ng d√πng her (n·ªØ)." },
        { q: "The books are on the table. ‚ûî Please put ________ in the bag.", ans: ["them"], vn: "Nh·ªØng quy·ªÉn s√°ch ƒëang ·ªü tr√™n b√†n. H√£y c·∫•t ch√∫ng v√†o c·∫∑p.", p: "ƒê·ªëi t∆∞·ª£ng: The books (ƒë·ªì v·∫≠t C√ì 'S' -> s·ªë nhi·ªÅu).", r: "ƒê√¢y l√† b·∫´y! ƒê·ªì v·∫≠t s·ªë nhi·ªÅu th√¨ v·∫´n ph·∫£i d√πng 'them' (ch√∫ng).", w: "C·ª±c k·ª≥ ch√∫ √Ω: Kh√¥ng d√πng 'it' v√¨ 'books' l√† s·ªë nhi·ªÅu!" },
        { q: "I want to color this picture. ‚ûî Give the crayons to ________.", ans: ["me"], vn: "T·ªõ mu·ªën t√¥ m√†u b·ª©c tranh n√†y. H√£y ƒë∆∞a b√∫t m√†u cho t·ªõ.", p: "ƒê·ªëi t∆∞·ª£ng: I (ng∆∞·ªùi n√≥i).", r: "T√¥i mu·ªën t√¥ -> ph·∫£i ƒë∆∞a cho t√¥i (me).", w: "D√πng c√°c t·ª´ kh√°c s·∫Ω l√†m sai √Ω nghƒ©a c√¢u n√≥i." },
        { q: "The boys are thirsty. ‚ûî Give some juice to ________.", ans: ["them"], vn: "Nh·ªØng c·∫≠u b√© ƒëang kh√°t. H√£y cho h·ªç n∆∞·ªõc tr√°i c√¢y.", p: "ƒê·ªëi t∆∞·ª£ng: The boys (C√≥ ch·ªØ 's' -> nhi·ªÅu c·∫≠u b√©).", r: "Nhi·ªÅu c·∫≠u b√© (s·ªë nhi·ªÅu) th√¨ ph·∫£i d√πng 'them'.", w: "Kh√¥ng d√πng him v√¨ him ch·ªâ d√πng cho M·ªòT c·∫≠u b√©." }
    ];

    const ex2Container = document.getElementById('ex2-container');
    ex2Data.forEach((item, index) => {
        let qHtml = item.q.replace("________", `<input type="text" class="write-input" style="min-width:100px; text-align:center;" placeholder="...">`);
        let html = `
        <div class="question-card text-card">
            <div class="question-text">${index + 11}. ${qHtml}</div>
            <button class="check-btn" onclick="checkTypeIn(this, '${item.ans.join('|')}')">Ki·ªÉm tra</button>
            <div class="explanation">
                <h4>üí° Gi·∫£i th√≠ch si√™u chi ti·∫øt:</h4>
                <p><strong>1. D·ªãch c√¢u:</strong> ${item.vn}</p>
                <p><strong>2. Ph√¢n t√≠ch ƒë·ªëi t∆∞·ª£ng:</strong> ${item.p}</p>
                <p><strong>3. T·∫°i sao ƒëi·ªÅn <span class="highlight">"${item.ans[0]}"</span>?</strong> ${item.r}</p>
                <p><strong>4. Ch√∫ √Ω b·∫´y:</strong> ${item.w}</p>
            </div>
        </div>`;
        ex2Container.innerHTML += html;
    });

    /* =========================================
       DATA & RENDER B√ÄI T·∫¨P 3 (FIND & FIX)
    ========================================= */
    const ex3Data = [
        { q: "Jack is a boy. Give the ball to her.", err: "her", fix: "him", vn: "Jack l√† con trai. ƒê∆∞a b√≥ng cho c√¥ ·∫•y.", p: "Ch·ªß ng·ªØ l√† 'Jack' (nam), nh∆∞ng ƒë·∫°i t·ª´ l·∫°i l√† 'her' (n·ªØ).", r: "S·ª≠a 'her' th√†nh 'him'.", w: "ƒê√¢y l√† l·ªói sai gi·ªõi t√≠nh c∆° b·∫£n." },
        { q: "I am missing a spoon. Give it to them.", err: "them", fix: "me", vn: "T·ªõ thi·∫øu th√¨a. ƒê∆∞a cho h·ªç.", p: "T√¥i (I) thi·∫øu ƒë·ªì m√† l·∫°i b·∫£o ƒë∆∞a cho 'them' (h·ªç) l√† sai l√¥gic.", r: "ƒê·ªïi 'them' th√†nh 'me' (t√¥i).", w: "L·ªói sai ng√¥i th·ª© (ng∆∞·ªùi n√≥i v√† ng∆∞·ªùi nh·∫≠n kh√°c nhau)." },
        { q: "The cats are very cute. I love it.", err: "it", fix: "them", vn: "Nh·ªØng ch√∫ m√®o r·∫•t ƒë√°ng y√™u. T√¥i y√™u n√≥.", p: "T·ª´ 'cats' c√≥ 's' (s·ªë nhi·ªÅu), nh∆∞ng l·∫°i d√πng 'it' (s·ªë √≠t).", r: "ƒê·ªì v·∫≠t hay con v·∫≠t s·ªë nhi·ªÅu ƒë·ªÅu ph·∫£i d√πng 'them'.", w: "ƒê√¢y l√† b·∫´y si√™u to kh·ªïng l·ªì m√† c√°c con hay m·∫Øc ph·∫£i nh√©!" },
        { q: "Quynh Anh and Thanh are reading. Look at her!", err: "her", fix: "them", vn: "Qu·ª≥nh Anh v√† Thanh ƒëang ƒë·ªçc s√°ch. H√£y nh√¨n c√¥ ·∫•y k√¨a!", p: "C√≥ t·∫≠n 2 ng∆∞·ªùi (QA v√† Thanh), nh∆∞ng c√¢u sau l·∫°i ch·ªâ g·ªçi l√† 'her'.", r: "S·ªë nhi·ªÅu (2 ng∆∞·ªùi tr·ªü l√™n) b·∫Øt bu·ªôc s·ª≠a th√†nh 'them'.", w: "ƒê·ª´ng v·ªôi nh√¨n ch·ªØ Qu·ª≥nh Anh m√† ch·ªçn 'her' nh√©, c√≤n c√≥ b·∫°n Thanh n·ªØa k√¨a." },
        { q: "Nora is a girl. Give the doll to him.", err: "him", fix: "her", vn: "Nora l√† con g√°i. ƒê∆∞a b√∫p b√™ cho anh ·∫•y.", p: "Nora l√† con g√°i (a girl) nh∆∞ng ƒë·∫°i t·ª´ l·∫°i d√πng 'him' (anh ·∫•y).", r: "Ph·∫£i s·ª≠a 'him' th√†nh 'her'.", w: "Gi·ªëng c√¢u 21, l·ªói sai r√†nh r√†nh v·ªÅ gi·ªõi t√≠nh." }
    ];

    const ex3Container = document.getElementById('ex3-container');
    ex3Data.forEach((item, index) => {
        let html = `
        <div class="question-card double-input-card">
            <div class="question-text">${index + 21}. ${item.q}</div>
            <div class="input-group">
                <input type="text" class="write-input err-in" placeholder="T·ª´ b·ªã sai l√† g√¨?">
                <input type="text" class="write-input fix-in" placeholder="S·ª≠a th√†nh g√¨?">
                <button class="check-btn" onclick="checkEx3(this, '${item.err}', '${item.fix}')">Ki·ªÉm tra</button>
            </div>
            <div class="explanation">
                <h4>üí° Gi·∫£i th√≠ch si√™u chi ti·∫øt:</h4>
                <p><strong>1. D·ªãch c√¢u:</strong> ${item.vn}</p>
                <p><strong>2. L·ªói sai ·ªü ƒë√¢u?</strong> L·ªói sai n·∫±m ·ªü ch·ªØ <span class="highlight">"${item.err}"</span>.</p>
                <p><strong>3. C√°ch s·ª≠a ƒë√∫ng:</strong> ${item.p} <span class="highlight">S·ª≠a th√†nh: ${item.fix}</span></p>
                <p><strong>4. Nh·ªõ nh√©:</strong> ${item.w}</p>
            </div>
        </div>`;
        ex3Container.innerHTML += html;
    });

    window.checkEx3 = function(btn, validErrStr, validFixStr) {
        const card = btn.closest('.double-input-card');
        const inErr = card.querySelector('.err-in');
        const inFix = card.querySelector('.fix-in');
        const exp = card.querySelector('.explanation');
        
        if(!inErr.value.trim() || !inFix.value.trim()) return;
        btn.style.display = 'none'; inErr.disabled = true; inFix.disabled = true;

        const uErr = cleanStr(inErr.value);
        const uFix = cleanStr(inFix.value);

        if(uErr.includes(cleanStr(validErrStr)) && uFix.includes(cleanStr(validFixStr))) {
            inErr.classList.add('correct'); inFix.classList.add('correct');
            playDing(); fireConfetti(); score++;
        } else {
            inErr.classList.add('wrong'); inFix.classList.add('wrong');
            card.classList.add('shake'); playBuzz();
            inErr.value = "L·ªói: " + validErrStr;
            inFix.value = "S·ª≠a: " + validFixStr;
        }
        exp.style.display = 'block';
    };

    /* =========================================
       DATA & RENDER B√ÄI T·∫¨P 4 (SITUATION)
    ========================================= */
    const ex4Data = [
        { q: "B·∫°n nam (Jack) ƒëang thi·∫øu m·ªôt c√°i nƒ©a (fork).\n‚ûî Jack is missing a fork. Give", ans: ["it to him", "the fork to him", "it to him.", "the fork to him."], vn: "Jack thi·∫øu nƒ©a. ƒê∆∞a n√≥ cho c·∫≠u ·∫•y.", p: "Jack l√† nam -> d√πng him. A fork (c√°i nƒ©a) -> d√πng it (ho·∫∑c gi·ªØ nguy√™n the fork).", r: "C·∫•u tr√∫c chu·∫©n l√†: Give it to him.", w: "Kh√¥ng d√πng her hay them." },
        { q: "B·∫£n th√¢n con (I) ƒëang thi·∫øu m·ªôt c√°i khƒÉn ƒÉn (napkin).\n‚ûî I am missing a napkin. Give", ans: ["it to me", "the napkin to me", "it to me.", "the napkin to me."], vn: "T·ªõ thi·∫øu khƒÉn ƒÉn. ƒê∆∞a n√≥ cho t·ªõ.", p: "B·∫£n th√¢n 'I' -> d√πng 'me'. A napkin -> 'it'.", r: "C·∫•u tr√∫c chu·∫©n: Give it to me.", w: "T·ª± m√¨nh xin m√† d√πng 'him/her' l√† sai nha." },
        { q: "Hai ng∆∞·ªùi b·∫°n (Maya and Zach) ƒëang thi·∫øu hai c√°i b√°t (bowls).\n‚ûî Maya and Zach need bowls. Give", ans: ["the bowls to them", "them to them", "the bowls to them.", "them to them."], vn: "Maya v√† Zach c·∫ßn b√°t. ƒê∆∞a b√°t cho h·ªç.", p: "Hai ng∆∞·ªùi -> d√πng them. Bowls (nhi·ªÅu c√°i b√°t) -> c≈©ng l√† them.", r: "Vi·∫øt d·ªÖ nh·∫•t l√† 'Give the bowls to them'. (Ho·∫∑c Give them to them).", w: "C·∫•m d√πng it hay him/her." },
        { q: "B·∫°n n·ªØ (Nora) ƒëang thi·∫øu m·ªôt c√°i th√¨a (spoon).\n‚ûî Nora is missing a spoon. Give", ans: ["it to her", "the spoon to her", "it to her.", "the spoon to her."], vn: "Nora thi·∫øu th√¨a. ƒê∆∞a n√≥ cho c√¥ ·∫•y.", p: "Nora l√† n·ªØ -> d√πng her. A spoon -> d√πng it.", r: "C·∫•u tr√∫c chu·∫©n: Give it to her.", w: "D√πng him l√† sai gi·ªõi t√≠nh." },
        { q: "Con ch√≥ (The dog) ƒëang thi·∫øu ƒë·ªì ch∆°i (a toy).\n‚ûî The dog is missing a toy. Give", ans: ["it to it", "the toy to it", "it to it.", "the toy to it."], vn: "Con ch√≥ thi·∫øu ƒë·ªì ch∆°i. ƒê∆∞a n√≥ cho n√≥.", p: "The dog (con v·∫≠t) -> it. A toy (ƒë·ªì v·∫≠t) -> c≈©ng l√† it.", r: "C·∫•u tr√∫c ƒë√∫ng l√†: Give it to it (ho·∫∑c Give the toy to it).", w: "Nghe h∆°i bu·ªìn c∆∞·ªùi (it to it) nh∆∞ng ng·ªØ ph√°p ti·∫øng Anh th√¨ ƒë√≥ l√† chu·∫©n x√°c nh√©!" }
    ];

    const ex4Container = document.getElementById('ex4-container');
    ex4Data.forEach((item, index) => {
        let parts = item.q.split('Give');
        let html = `
        <div class="question-card text-card">
            <div class="question-text" style="font-size:1.15rem; color:#2d3436;">${index + 26}. T√¨nh hu·ªëng: ${parts[0]}</div>
            <div class="input-group">
                <div style="font-size:1.2rem; font-weight:bold; color:var(--primary-mint);">Give</div>
                <input type="text" class="write-input" placeholder="Vi·∫øt ti·∫øp ph·∫ßn c√≤n l·∫°i...">
                <button class="check-btn" onclick="checkTypeIn(this, '${item.ans.join('|')}')">G·ª≠i</button>
            </div>
            <div class="explanation">
                <h4>üí° Gi·∫£i th√≠ch si√™u chi ti·∫øt:</h4>
                <p><strong>1. D·ªãch c√¢u:</strong> ${item.vn}</p>
                <p><strong>2. Ph√¢n t√≠ch:</strong> ${item.p}</p>
                <p><strong>3. Vi·∫øt chu·∫©n:</strong> <span class="highlight">Give ${item.ans[0]}.</span></p>
                <p><strong>4. Ch√∫ √Ω:</strong> ${item.w}</p>
            </div>
        </div>`;
        ex4Container.innerHTML += html;
    });

    window.checkTypeIn = function(btn, validAnswersStr) {
        const card = btn.closest('.text-card');
        const input = card.querySelector('.write-input');
        const exp = card.querySelector('.explanation');
        const validAnswers = validAnswersStr.split('|');

        if(!input.value.trim()) return;

        btn.style.display = 'none'; input.disabled = true;
        const userVal = cleanStr(input.value);
        let isCorrect = validAnswers.some(ans => cleanStr(ans) === userVal);

        if(isCorrect) {
            input.classList.add('correct'); playDing(); fireConfetti(); score++;
        } else {
            input.classList.add('wrong'); card.classList.add('shake'); playBuzz();
            input.value = `Sai! ƒê√°p √°n chu·∫©n: ${validAnswers[0]}`;
        }
        exp.style.display = 'block';
    };

    /* --- SUBMIT MODAL --- */
    document.getElementById('submitBtn').addEventListener('click', () => {
        const modal = document.getElementById('scoreModal');
        const scoreText = document.getElementById('scoreText');
        const compText = document.getElementById('complimentText');
        
        scoreText.innerText = `ƒê·∫°t: ${score} / ${TOTAL_QUESTIONS} ƒêi·ªÉm`;
        
        let msg = "";
        if(score === TOTAL_QUESTIONS) msg = "ƒê·ªânh c·ªßa ch√≥p! Con kh√¥ng d√≠nh m·ªôt c√°i b·∫´y n√†o lu√¥n! üåüüåüüåü";
        else if(score >= 25) msg = "Tuy·ªát v·ªùi! Con n·∫Øm v·ªØng Him/Her/Them/It r·ªìi ƒë·∫•y! üî•";
        else if(score >= 15) msg = "Kh√° l·∫Øm, ch√∫ √Ω c·∫©n th·∫≠n m·∫•y ƒë·ªì v·∫≠t s·ªë nhi·ªÅu (c√≥ ch·ªØ s) nha! üí™";
        else msg = "Kh√¥ng sao ƒë√¢u, ƒë·ªçc k·ªπ l·∫°i ph·∫ßn L√Ω Thuy·∫øt l√† con s·∫Ω gi·ªèi ngay! ‚ù§Ô∏è";
        
        compText.innerText = msg;
        modal.style.display = 'flex';
        if(score >= 15) fireConfetti();
    });
</script>

</body>
</html>