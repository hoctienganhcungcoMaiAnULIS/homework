<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i t·∫≠p Ng·ªØ ph√°p 8, 9, 10 - Ms Mai An ULIS</title>
    <!-- Import Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-dark: #2d3436;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#d1d8e0 20%, transparent 20%),
                              radial-gradient(#d1d8e0 20%, transparent 20%);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header-badge {
            background: linear-gradient(135deg, var(--primary-purple), #a29bfe);
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(136, 84, 192, 0.4);
            margin-bottom: 20px;
            border: 2px solid white;
            font-family: 'Quicksand', sans-serif;
        }

        .container {
            width: 100%;
            max-width: 800px;
        }

        .exercise-title {
            text-align: center;
            color: var(--primary-purple);
            font-size: 1.8rem;
            font-weight: 800;
            margin: 30px 0 15px;
            text-shadow: 2px 2px 0px white;
            background: white;
            display: inline-block;
            padding: 10px 20px;
            border-radius: 15px;
            box-shadow: 0 4px 0 #dfe6e9;
        }

        /* Question Card */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05), 0 15px 20px rgba(0,0,0,0.05);
            border: 2px solid #fff;
            position: relative;
            transition: transform 0.3s ease;
        }

        .question-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .question-number {
            display: inline-block;
            background: var(--primary-teal);
            color: white;
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 800;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: #636e72;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            box-shadow: 0 4px 0 #dfe6e9;
            text-align: left;
        }

        .option-btn:hover:not(.disabled) {
            transform: translateY(-2px) scale(1.02);
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .option-btn:active:not(.disabled) {
            transform: translateY(2px);
            box-shadow: 0 0 0 #dfe6e9;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-green) !important;
            color: white !important;
            border-color: var(--correct-green) !important;
            box-shadow: 0 4px 0 #00b85c !important;
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            color: white !important;
            border-color: var(--wrong-red) !important;
            box-shadow: 0 4px 0 #e63e4c !important;
            animation: shake 0.5s;
        }

        .option-btn.disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #fff8e1; /* Light yellow for note */
            border: 2px dashed #ffeaa7;
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-header {
            font-weight: 800;
            color: #fdcb6e;
            text-transform: uppercase;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .explanation-content {
            font-size: 1rem;
            color: #2d3436;
            line-height: 1.6;
            white-space: pre-line; /* Respect line breaks */
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Submit Button */
        .submit-section {
            text-align: center;
            margin: 40px 0 60px;
        }

        .submit-btn {
            background: linear-gradient(to bottom, #00C9A7, #00b899);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 6px 0 #008c74, 0 15px 20px rgba(0,201,167,0.4);
            transition: transform 0.1s;
            font-family: 'Quicksand', sans-serif;
        }

        .submit-btn:active {
            transform: translateY(6px);
            box-shadow: 0 0 0 #008c74;
        }

        /* Score Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .score-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 4px solid var(--primary-purple);
        }

        .score-number {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-purple);
            margin: 10px 0;
        }

        .score-msg {
            font-size: 1.2rem;
            color: #636e72;
            margin-bottom: 20px;
        }

        .close-btn {
            background: #ff7675;
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #d63031;
        }
        
        .close-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .hint-text {
            font-size: 0.9rem;
            color: #888;
            font-style: italic;
            margin-top: 10px;
        }

    </style>
</head>
<body>

    <div class="header-badge">
        üéì Gi√°o vi√™n t·∫°o: Ms Mai An ULIS
    </div>

    <div class="container" id="quiz-container">
        <!-- Content will be injected by JavaScript -->
    </div>

    <div class="submit-section">
        <button class="submit-btn" onclick="submitQuiz()">N·ªôp b√†i üìù</button>
    </div>

    <!-- Score Modal -->
    <div class="modal-overlay" id="scoreModal">
        <div class="score-card">
            <h2>K·∫øt qu·∫£ c·ªßa b·∫°n</h2>
            <div class="score-number" id="finalScore">0/0</div>
            <p class="score-msg" id="finalMsg">B·∫°n l√†m t·ªët l·∫Øm!</p>
            <button class="close-btn" onclick="closeModal()">L√†m l·∫°i</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const quizData = [
            // Exercise 8
            {
                number: 1,
                exercise: "Exercise 8: Position of Adverbs",
                question: "She lives next door but we ______________ her.",
                hint: "Tr·∫°ng t·ª´ ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ th∆∞·ªùng.",
                options: [
                    { text: "rarely see", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- rarely (adv): hi·∫øm khi\n- see (v): g·∫∑p/th·∫•y\n\n2. Gi·∫£i th√≠ch: Tr·∫°ng t·ª´ ch·ªâ t·∫ßn su·∫•t ƒë·ª©ng TR∆Ø·ªöC ƒë·ªông t·ª´ th∆∞·ªùng.\n\n3. D·ªãch c√¢u: C√¥ ·∫•y s·ªëng ngay nh√† b√™n nh∆∞ng ch√∫ng t√¥i hi·∫øm khi g·∫∑p c√¥ ·∫•y." },
                    { text: "see rarely", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª± t·ª´." },
                    { text: "rarely sees", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (We kh√¥ng ƒëi v·ªõi sees)." },
                    { text: "sees rarely", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª± v√† chia ƒë·ªông t·ª´." }
                ]
            },
            {
                number: 2,
                exercise: "Exercise 8: Position of Adverbs",
                question: "Her husband ______________ to the bar in the evening.",
                hint: "Husband l√† s·ªë √≠t. Tr·∫°ng t·ª´ ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´.",
                options: [
                    { text: "goes sometimes", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª± t·ª´." },
                    { text: "sometimes goes", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- sometimes (adv): th·ªânh tho·∫£ng\n- goes (v): ƒëi (chia s·ªë √≠t)\n\n2. Gi·∫£i th√≠ch: Tr·∫°ng t·ª´ t·∫ßn su·∫•t ƒë·ª©ng TR∆Ø·ªöC ƒë·ªông t·ª´ th∆∞·ªùng.\n\n3. D·ªãch c√¢u: Ch·ªìng c√¥ ·∫•y th·ªânh tho·∫£ng ƒëi qu√°n bar v√†o bu·ªïi t·ªëi." },
                    { text: "go sometimes", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (Husband s·ªë √≠t)." },
                    { text: "sometimes go", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´." }
                ]
            },
            {
                number: 3,
                exercise: "Exercise 8: Position of Adverbs",
                question: "We ______________ at home on holidays.",
                hint: "Tr·∫°ng t·ª´ ƒë·ª©ng sau To Be.",
                options: [
                    { text: "always are", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª± t·ª´." },
                    { text: "are always", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- always (adv): lu√¥n lu√¥n\n- are (be): th√¨/l√†/·ªü\n\n2. Gi·∫£i th√≠ch: Tr·∫°ng t·ª´ t·∫ßn su·∫•t ƒë·ª©ng SAU ƒë·ªông t·ª´ To Be.\n\n3. D·ªãch c√¢u: Ch√∫ng t√¥i lu√¥n ·ªü nh√† v√†o c√°c ng√†y l·ªÖ." },
                    { text: "always is", correct: false, rationale: "‚ùå Sai ƒë·ªông t·ª´ (We kh√¥ng d√πng is)." },
                    { text: "is always", correct: false, rationale: "‚ùå Sai ƒë·ªông t·ª´." }
                ]
            },
            {
                number: 4,
                exercise: "Exercise 8: Position of Adverbs",
                question: "Lan ______________ basketball.",
                hint: "V·ªã tr√≠: Doesn't + adv + V.",
                options: [
                    { text: "frequently doesn‚Äôt play", correct: false, rationale: "‚ùå V·ªã tr√≠ n√†y kh√¥ng t·ª± nhi√™n." },
                    { text: "doesn't frequently play", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- doesn't (aux): tr·ª£ t·ª´ ph·ªß ƒë·ªãnh\n- frequently (adv): th∆∞·ªùng xuy√™n\n- play (v): ch∆°i\n\n2. Gi·∫£i th√≠ch: Trong c√¢u ph·ªß ƒë·ªãnh, tr·∫°ng t·ª´ th∆∞·ªùng ƒë·ª©ng gi·ªØa tr·ª£ ƒë·ªông t·ª´ (doesn't) v√† ƒë·ªông t·ª´ ch√≠nh (play).\n\n3. D·ªãch c√¢u: Lan kh√¥ng th∆∞·ªùng xuy√™n ch∆°i b√≥ng r·ªï." },
                    { text: "doesn't play frequently", correct: false, rationale: "‚ö†Ô∏è C√≥ th·ªÉ ch·∫•p nh·∫≠n ƒë∆∞·ª£c nh∆∞ng ƒë√°p √°n B chu·∫©n m·ª±c h∆°n v·ªÅ v·ªã tr√≠ nh·∫•n m·∫°nh." },
                    { text: "don't frequently play", correct: false, rationale: "‚ùå Sai tr·ª£ ƒë·ªông t·ª´ (Lan s·ªë √≠t)." }
                ]
            },
            {
                number: 5,
                exercise: "Exercise 8: Position of Adverbs",
                question: "They ______________ swimming.",
                hint: "C·ª•m 'hardly ever' ƒëi li·ªÅn nhau v√† ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´.",
                options: [
                    { text: "hardly ever go", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- hardly ever (adv phrase): h·∫ßu nh∆∞ kh√¥ng bao gi·ªù\n- go (v): ƒëi\n\n2. Gi·∫£i th√≠ch: Tr·∫°ng t·ª´ ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ th∆∞·ªùng.\n\n3. D·ªãch c√¢u: H·ªç h·∫ßu nh∆∞ kh√¥ng bao gi·ªù ƒëi b∆°i." },
                    { text: "go hardly ever", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª±." },
                    { text: "hardly go ever", correct: false, rationale: "‚ùå Sai c·∫•u tr√∫c c·ª•m t·ª´." },
                    { text: "ever go hardly", correct: false, rationale: "‚ùå Sai ho√†n to√†n." }
                ]
            },
            {
                number: 6,
                exercise: "Exercise 8: Position of Adverbs",
                question: "My personal doctor checks my health ______________.",
                hint: "Tr·∫°ng t·ª´ ch·ªâ s·ª± ƒë·ªÅu ƒë·∫∑n.",
                options: [
                    { text: "hardly", correct: false, rationale: "‚ùå Sai nghƒ©a. 'Hardly' nghƒ©a l√† 'h·∫ßu nh∆∞ kh√¥ng'." },
                    { text: "regularly", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- regularly (adv): m·ªôt c√°ch ƒë·ªÅu ƒë·∫∑n/th∆∞·ªùng xuy√™n\n- hardly (adv): h·∫ßu nh∆∞ kh√¥ng\n\n2. Gi·∫£i th√≠ch: B√°c sƒ© ri√™ng th√¨ s·∫Ω ki·ªÉm tra s·ª©c kh·ªèe 'ƒë·ªÅu ƒë·∫∑n'.\n\n3. D·ªãch c√¢u: B√°c sƒ© ri√™ng ki·ªÉm tra s·ª©c kh·ªèe c·ªßa t√¥i m·ªôt c√°ch ƒë·ªÅu ƒë·∫∑n." },
                    { text: "rare", correct: false, rationale: "‚ùå Sai lo·∫°i t·ª´ (t√≠nh t·ª´)." },
                    { text: "regular", correct: false, rationale: "‚ùå Sai lo·∫°i t·ª´ (t√≠nh t·ª´)." }
                ]
            },
            {
                number: 7,
                exercise: "Exercise 8: Position of Adverbs",
                question: "My friend and I take vacations together quite ______________.",
                hint: "ƒêi v·ªõi 'quite' (kh√° l√†...).",
                options: [
                    { text: "never", correct: false, rationale: "‚ùå Kh√¥ng ai n√≥i 'quite never'." },
                    { text: "frequently", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- frequently (adv): th∆∞·ªùng xuy√™n\n- never (adv): kh√¥ng bao gi·ªù\n\n2. Gi·∫£i th√≠ch: C·ª•m t·ª´ 'quite frequently' (kh√° th∆∞·ªùng xuy√™n) r·∫•t ph·ªï bi·∫øn.\n\n3. D·ªãch c√¢u: B·∫°n t√¥i v√† t√¥i ƒëi ngh·ªâ c√πng nhau kh√° th∆∞·ªùng xuy√™n." },
                    { text: "frequent", correct: false, rationale: "‚ùå Sai lo·∫°i t·ª´ (t√≠nh t·ª´)." },
                    { text: "rare", correct: false, rationale: "‚ùå Sai lo·∫°i t·ª´." }
                ]
            },
            {
                number: 8,
                exercise: "Exercise 8: Position of Adverbs",
                question: "What does Mai ______________ at break time?",
                hint: "Tr·∫°ng t·ª´ ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ ch√≠nh trong c√¢u h·ªèi.",
                options: [
                    { text: "often do", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- often (adv): th∆∞·ªùng\n- do (v): l√†m\n\n2. Gi·∫£i th√≠ch: C·∫•u tr√∫c c√¢u h·ªèi: Wh-word + does + S + adv + V?\n\n3. D·ªãch c√¢u: Mai th∆∞·ªùng l√†m g√¨ v√†o gi·ªù ra ch∆°i?" },
                    { text: "do often", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª±." },
                    { text: "often does", correct: false, rationale: "‚ùå Sai ng·ªØ ph√°p (ƒë√£ c√≥ tr·ª£ t·ª´ does th√¨ ƒë·ªông t·ª´ ch√≠nh v·ªÅ nguy√™n th·ªÉ)." },
                    { text: "does often", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 9,
                exercise: "Exercise 8: Position of Adverbs",
                question: "______________ online?",
                hint: "Do + Ch·ªß ng·ªØ + Tr·∫°ng t·ª´ + ƒê·ªông t·ª´?",
                options: [
                    { text: "Do often you shop", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª±." },
                    { text: "Do you often shop", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- Do (aux): tr·ª£ t·ª´\n- you (S): b·∫°n\n- often (adv): th∆∞·ªùng\n- shop (v): mua s·∫Øm\n\n2. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Do + S + adv + V?\n\n3. D·ªãch c√¢u: B·∫°n c√≥ th∆∞·ªùng mua s·∫Øm tr·ª±c tuy·∫øn kh√¥ng?" },
                    { text: "You do often shop", correct: false, rationale: "‚ùå Sai c·∫•u tr√∫c c√¢u h·ªèi." },
                    { text: "Do you shop often", correct: false, rationale: "‚ö†Ô∏è ƒê√∫ng vƒÉn n√≥i nh∆∞ng k√©m chu·∫©n v·ªÅ v·ªã tr√≠ tr·∫°ng t·ª´." }
                ]
            },
            {
                number: 10,
                exercise: "Exercise 8: Position of Adverbs",
                question: "______________ his grandmother?",
                hint: "C√¢u h·ªèi v·ªõi Does, ƒë·ªông t·ª´ ch√≠nh tr·ªü v·ªÅ nguy√™n th·ªÉ.",
                options: [
                    { text: "Does occasionally Tom visits", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª± v√† chia ƒë·ªông t·ª´." },
                    { text: "Does Tom occasionally visit", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- Does (aux): Tr·ª£ t·ª´ s·ªë √≠t\n- Tom (S): Tom\n- occasionally (adv): th·ªânh tho·∫£ng\n- visit (v): thƒÉm (nguy√™n th·ªÉ)\n\n2. Gi·∫£i th√≠ch: C·∫•u tr√∫c: Does + S + adv + V-inf?\n\n3. D·ªãch c√¢u: Tom c√≥ th·ªânh tho·∫£ng ƒëi thƒÉm b√† c·ªßa c·∫≠u ·∫•y kh√¥ng?" },
                    { text: "Does Tom occasionally visits", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (ƒë√£ c√≥ Does th√¨ visit kh√¥ng th√™m s)." },
                    { text: "Does visit Tom occasionally", correct: false, rationale: "‚ùå Sai tr·∫≠t t·ª±." }
                ]
            },
            // Exercise 9
            {
                number: 11,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "The convenience store in my neighbourhood ______________ 24/7.",
                hint: "S·ª± th·∫≠t hi·ªÉn nhi√™n/l·ªãch tr√¨nh c·ªë ƒë·ªãnh.",
                options: [
                    { text: "opens", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- opens (Present Simple): m·ªü c·ª≠a\n- will open (Future Simple): s·∫Ω m·ªü c·ª≠a\n\n2. Gi·∫£i th√≠ch: Vi·ªác c·ª≠a h√†ng m·ªü 24/7 l√† m·ªôt s·ª± th·∫≠t hi·ªÉn nhi√™n/l·ªãch tr√¨nh c·ªë ƒë·ªãnh -> D√πng Hi·ªán t·∫°i ƒë∆°n.\n\n3. D·ªãch c√¢u: C·ª≠a h√†ng ti·ªán l·ª£i trong khu ph·ªë c·ªßa t√¥i m·ªü c·ª≠a 24/7." },
                    { text: "will open", correct: false, rationale: "‚ùå Kh√¥ng d√πng T∆∞∆°ng lai ƒë∆°n cho l·ªãch tr√¨nh/s·ª± th·∫≠t hi·ªÉn nhi√™n." },
                    { text: "opening", correct: false, rationale: "‚ùå Sai ng·ªØ ph√°p (thi·∫øu to be)." },
                    { text: "open", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (Store s·ªë √≠t)." }
                ]
            },
            {
                number: 12,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "Mom, I ______________ a shopping list for you to give to the shop assistant of the bakery.",
                hint: "Quy·∫øt ƒë·ªãnh ngay t·∫°i th·ªùi ƒëi·ªÉm n√≥i (l·ªùi h·ª©a/ƒë·ªÅ ngh·ªã).",
                options: [
                    { text: "make", correct: false, rationale: "‚ùå 'I make' nghe nh∆∞ m·ªôt th√≥i quen, kh√¥ng h·ª£p ng·ªØ c·∫£nh." },
                    { text: "will make", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- make (Present Simple): l√†m\n- will make (Future Simple): s·∫Ω l√†m\n\n2. Gi·∫£i th√≠ch: Quy·∫øt ƒë·ªãnh l√†m g√¨ ngay t·∫°i th·ªùi ƒëi·ªÉm n√≥i (ƒë·ªÅ ngh·ªã gi√∫p m·∫π) -> D√πng T∆∞∆°ng lai ƒë∆°n (Will).\n\n3. D·ªãch c√¢u: M·∫π ∆°i, con s·∫Ω l·∫≠p danh s√°ch mua s·∫Øm cho m·∫π..." },
                    { text: "am making", correct: false, rationale: "‚ùå Kh√¥ng ph·∫£i ƒë√°p √°n t·ªëi ∆∞u trong ng·ªØ c·∫£nh n√†y." },
                    { text: "made", correct: false, rationale: "‚ùå Qu√° kh·ª©." }
                ]
            },
            {
                number: 13,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "We ______________ on a holiday this summer vacation.",
                hint: "D·ª± ƒë·ªãnh trong t∆∞∆°ng lai (k·ª≥ ngh·ªâ h√® n√†y).",
                options: [
                    { text: "don't go", correct: false, rationale: "‚ùå Hi·ªán t·∫°i ƒë∆°n ch·ªâ th√≥i quen." },
                    { text: "won't go", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- don't go (Present Simple)\n- won't go (Future Simple)\n\n2. Gi·∫£i th√≠ch: D·ª± ƒëo√°n ho·∫∑c k·∫ø ho·∫°ch cho m·ªôt th·ªùi ƒëi·ªÉm c·ª• th·ªÉ trong t∆∞∆°ng lai -> D√πng Won't go.\n\n3. D·ªãch c√¢u: Ch√∫ng t√¥i s·∫Ω kh√¥ng ƒëi ngh·ªâ v√†o k·ª≥ ngh·ªâ h√® n√†y." },
                    { text: "not go", correct: false, rationale: "‚ùå Sai ng·ªØ ph√°p." },
                    { text: "didn't go", correct: false, rationale: "‚ùå Qu√° kh·ª©." }
                ]
            },
            {
                number: 14,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "The bus schedule says that there ______________ a bus to Hoan Kiem Lake at 9:00.",
                hint: "L·ªãch tr√¨nh t√†u xe (schedule/timetable).",
                options: [
                    { text: "is", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- is (Present Simple)\n- will be (Future Simple)\n\n2. Gi·∫£i th√≠ch: 'Bus schedule' (l·ªãch tr√¨nh xe bu√Ωt) l√† l·ªãch tr√¨nh t√†u xe c·ªë ƒë·ªãnh -> D√πng Hi·ªán t·∫°i ƒë∆°n.\n\n3. D·ªãch c√¢u: L·ªãch tr√¨nh xe bu√Ωt n√≥i r·∫±ng c√≥ m·ªôt chuy·∫øn xe ƒë·∫øn h·ªì Ho√†n Ki·∫øm l√∫c 9:00." },
                    { text: "will be", correct: false, rationale: "‚ùå L·ªãch tr√¨nh t√†u xe c√¥ng c·ªông d√πng Hi·ªán t·∫°i ƒë∆°n, kh√¥ng d√πng Will." },
                    { text: "was", correct: false, rationale: "‚ùå Qu√° kh·ª©." },
                    { text: "being", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 15,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "The show ______________ at 8 o'clock.",
                hint: "L·ªãch tr√¨nh bi·ªÉu di·ªÖn c·ªë ƒë·ªãnh.",
                options: [
                    { text: "will begin", correct: false, rationale: "‚ùå Kh√¥ng d√πng Will cho l·ªãch tr√¨nh ch∆∞∆°ng tr√¨nh c·ªë ƒë·ªãnh." },
                    { text: "begins", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- begins (Present Simple)\n- will begin (Future Simple)\n\n2. Gi·∫£i th√≠ch: L·ªãch chi·∫øu phim/bi·ªÉu di·ªÖn theo gi·ªù c·ªë ƒë·ªãnh -> D√πng Hi·ªán t·∫°i ƒë∆°n.\n\n3. D·ªãch c√¢u: Bu·ªïi bi·ªÉu di·ªÖn b·∫Øt ƒë·∫ßu l√∫c 8 gi·ªù." },
                    { text: "begin", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (Show s·ªë √≠t)." },
                    { text: "is beginning", correct: false, rationale: "‚ùå Hi·ªán t·∫°i ƒë∆°n chu·∫©n h∆°n cho l·ªãch tr√¨nh." }
                ]
            },
            {
                number: 16,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "What time ______________ your flight?",
                hint: "H·ªèi v·ªÅ l·ªãch tr√¨nh ph∆∞∆°ng ti·ªán giao th√¥ng.",
                options: [
                    { text: "is", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- is (Present Simple)\n- will be (Future Simple)\n\n2. Gi·∫£i th√≠ch: H·ªèi gi·ªù bay (Flight schedule) -> D√πng Hi·ªán t·∫°i ƒë∆°n.\n\n3. D·ªãch c√¢u: Chuy·∫øn bay c·ªßa b·∫°n l√† m·∫•y gi·ªù?" },
                    { text: "will be", correct: false, rationale: "‚ùå √çt d√πng Will ƒë·ªÉ h·ªèi gi·ªù t√†u xe theo l·ªãch." },
                    { text: "does", correct: false, rationale: "‚ùå Thi·∫øu ƒë·ªông t·ª´ ch√≠nh." },
                    { text: "are", correct: false, rationale: "‚ùå Sai s·ªë nhi·ªÅu." }
                ]
            },
            {
                number: 17,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "Our final exams ______________ next week.",
                hint: "L·ªãch thi c·ª≠ c·ªë ƒë·ªãnh.",
                options: [
                    { text: "will start", correct: false, rationale: "‚ùå L·ªãch thi l√† l·ªãch tr√¨nh do nh√† tr∆∞·ªùng s·∫Øp ƒë·∫∑t c·ªë ƒë·ªãnh, n√™n d√πng Hi·ªán t·∫°i ƒë∆°n." },
                    { text: "start", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- start (Present Simple)\n- will start (Future Simple)\n\n2. Gi·∫£i th√≠ch: L·ªãch thi c·ª≠ (Exams) l√† l·ªãch tr√¨nh c·ªë ƒë·ªãnh (Timetable) -> D√πng Hi·ªán t·∫°i ƒë∆°n.\n\n3. D·ªãch c√¢u: C√°c b√†i thi cu·ªëi k·ª≥ c·ªßa ch√∫ng t√¥i b·∫Øt ƒë·∫ßu v√†o tu·∫ßn t·ªõi." },
                    { text: "starts", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (Exams s·ªë nhi·ªÅu)." },
                    { text: "starting", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 18,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "I think he ______________ the exam.",
                hint: "D·ª± ƒëo√°n c√° nh√¢n (I think...).",
                options: [
                    { text: "will pass", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- will pass (Future Simple)\n- passes (Present Simple)\n\n2. Gi·∫£i th√≠ch: C·ª•m t·ª´ \"I think\" (t√¥i nghƒ©) th·ªÉ hi·ªán quan ƒëi·ªÉm/d·ª± ƒëo√°n c√° nh√¢n -> D√πng T∆∞∆°ng lai ƒë∆°n (Will).\n\n3. D·ªãch c√¢u: T√¥i nghƒ© anh ·∫•y s·∫Ω v∆∞·ª£t qua k·ª≥ thi." },
                    { text: "passes", correct: false, rationale: "‚ùå Kh√¥ng d√πng Hi·ªán t·∫°i ƒë∆°n cho d·ª± ƒëo√°n c√° nh√¢n." },
                    { text: "is passing", correct: false, rationale: "‚ùå Sai ng·ªØ c·∫£nh." },
                    { text: "pass", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (He s·ªë √≠t)." }
                ]
            },
            {
                number: 19,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "Next Friday at 9 o'clock there ______________ an English speaking contest.",
                hint: "S·ª± ki·ªán theo l·ªãch tr√¨nh.",
                options: [
                    { text: "is", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- is (Present Simple)\n- will be (Future Simple)\n\n2. Gi·∫£i th√≠ch: M·ªôt s·ª± ki·ªán ƒë√£ ƒë∆∞·ª£c l√™n l·ªãch s·∫µn (contest) v√†o gi·ªù c·ª• th·ªÉ -> D√πng Hi·ªán t·∫°i ƒë∆°n.\n\n3. D·ªãch c√¢u: Th·ª© S√°u t·ªõi l√∫c 9 gi·ªù s·∫Ω c√≥ m·ªôt cu·ªôc thi n√≥i ti·∫øng Anh." },
                    { text: "will be", correct: false, rationale: "‚ùå Khi ƒë√£ c√≥ th·ªùi gian c·ª• th·ªÉ cho m·ªôt s·ª± ki·ªán trong l·ªãch tr√¨nh, Hi·ªán t·∫°i ƒë∆°n (is) ch√≠nh x√°c h∆°n." },
                    { text: "are", correct: false, rationale: "‚ùå Sai s·ªë nhi·ªÅu." },
                    { text: "was", correct: false, rationale: "‚ùå Qu√° kh·ª©." }
                ]
            },
            {
                number: 20,
                exercise: "Exercise 9: Present Simple vs Future Simple",
                question: "Perhaps, it ______________ tomorrow.",
                hint: "D·ª± ƒëo√°n kh√¥ng ch·∫Øc ch·∫Øn (Perhaps).",
                options: [
                    { text: "will rain", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Ph√¢n t√≠ch:\n- will rain (Future Simple)\n- rains (Present Simple)\n\n2. Gi·∫£i th√≠ch: T·ª´ \"Perhaps\" (C√≥ l·∫Ω) ch·ªâ s·ª± kh√¥ng ch·∫Øc ch·∫Øn/d·ª± ƒëo√°n -> D√πng T∆∞∆°ng lai ƒë∆°n (Will).\n\n3. D·ªãch c√¢u: C√≥ l·∫Ω ng√†y mai tr·ªùi s·∫Ω m∆∞a." },
                    { text: "rains", correct: false, rationale: "‚ùå Sai. M∆∞a kh√¥ng ph·∫£i l√† l·ªãch tr√¨nh c·ªë ƒë·ªãnh." },
                    { text: "is raining", correct: false, rationale: "‚ùå Sai. D·ª± ƒëo√°n kh√¥ng ch·∫Øc ch·∫Øn th√¨ kh√¥ng d√πng ti·∫øp di·ªÖn." },
                    { text: "rained", correct: false, rationale: "‚ùå Qu√° kh·ª©." }
                ]
            },
            // Exercise 10
            {
                number: 21,
                exercise: "Exercise 10: Present Simple for Future",
                question: "Tomorrow ______________ (be) Monday.",
                hint: "D√πng th√¨ Hi·ªán t·∫°i ƒë∆°n.",
                options: [
                    { text: "is", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: S·ª± th·∫≠t hi·ªÉn nhi√™n v·ªÅ l·ªãch (Calendar) -> Hi·ªán t·∫°i ƒë∆°n.\n\n2. D·ªãch c√¢u: Ng√†y mai l√† th·ª© Hai." },
                    { text: "will be", correct: false, rationale: "‚ùå ƒê·ªÅ b√†i y√™u c·∫ßu d√πng 'Present Simple for Future'." },
                    { text: "are", correct: false, rationale: "‚ùå Sai s·ªë nhi·ªÅu." },
                    { text: "be", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 22,
                exercise: "Exercise 10: Present Simple for Future",
                question: "The film Spiderman ______________ (start) tonight.",
                hint: "Chia ƒë·ªông t·ª´ s·ªë √≠t.",
                options: [
                    { text: "starts", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: L·ªãch chi·∫øu phim -> Hi·ªán t·∫°i ƒë∆°n (chia s·ªë √≠t).\n\n2. D·ªãch c√¢u: B·ªô phim Ng∆∞·ªùi Nh·ªán b·∫Øt ƒë·∫ßu t·ªëi nay." },
                    { text: "start", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (Film s·ªë √≠t)." },
                    { text: "will start", correct: false, rationale: "‚ùå ƒê·ªÅ b√†i y√™u c·∫ßu d√πng 'Present Simple'." },
                    { text: "is starting", correct: false, rationale: "‚ùå Sai th√¨." }
                ]
            },
            {
                number: 23,
                exercise: "Exercise 10: Present Simple for Future",
                question: "The first bus ______________ (depart) at 5:00 a.m.",
                hint: "ƒê·ªông t·ª´ chia s·ªë √≠t (th√™m s).",
                options: [
                    { text: "departs", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: L·ªãch tr√¨nh xe bu√Ωt -> Hi·ªán t·∫°i ƒë∆°n.\n\n2. D·ªãch c√¢u: Chuy·∫øn xe bu√Ωt ƒë·∫ßu ti√™n kh·ªüi h√†nh l√∫c 5:00 s√°ng." },
                    { text: "depart", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´." },
                    { text: "will depart", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." },
                    { text: "is departing", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." }
                ]
            },
            {
                number: 24,
                exercise: "Exercise 10: Present Simple for Future",
                question: "The train to Nha Trang ______________ (leave) at 8:30 a.m.",
                hint: "Chia ƒë·ªông t·ª´ s·ªë √≠t.",
                options: [
                    { text: "leaves", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: L·ªãch t√†u ch·∫°y -> Hi·ªán t·∫°i ƒë∆°n.\n\n2. D·ªãch c√¢u: Chuy·∫øn t√†u ƒëi Nha Trang r·ªùi ƒëi l√∫c 8:30 s√°ng." },
                    { text: "leave", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´." },
                    { text: "will leave", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." },
                    { text: "leaving", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 25,
                exercise: "Exercise 10: Present Simple for Future",
                question: "When ______________ (be) his flight for Ha Noi?",
                hint: "ƒê·ªông t·ª´ To Be s·ªë √≠t.",
                options: [
                    { text: "is", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: H·ªèi gi·ªù bay (l·ªãch tr√¨nh) -> To be hi·ªán t·∫°i ƒë∆°n (flight s·ªë √≠t).\n\n2. D·ªãch c√¢u: Chuy·∫øn bay ƒëi H√† N·ªôi c·ªßa anh ·∫•y l√† khi n√†o?" },
                    { text: "will be", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." },
                    { text: "are", correct: false, rationale: "‚ùå Sai s·ªë nhi·ªÅu." },
                    { text: "does", correct: false, rationale: "‚ùå ƒê·ªông t·ª´ to be kh√¥ng d√πng tr·ª£ t·ª´ does." }
                ]
            },
            {
                number: 26,
                exercise: "Exercise 10: Present Simple for Future",
                question: "Final exams ______________ (start) next week.",
                hint: "Ch·ªß ng·ªØ s·ªë nhi·ªÅu, ƒë·ªông t·ª´ gi·ªØ nguy√™n.",
                options: [
                    { text: "start", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: L·ªãch thi (s·ªë nhi·ªÅu exams) -> Hi·ªán t·∫°i ƒë∆°n gi·ªØ nguy√™n.\n\n2. D·ªãch c√¢u: C√°c b√†i thi cu·ªëi k·ª≥ b·∫Øt ƒë·∫ßu v√†o tu·∫ßn t·ªõi." },
                    { text: "starts", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (Exams s·ªë nhi·ªÅu kh√¥ng th√™m s)." },
                    { text: "will start", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." },
                    { text: "starting", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 27,
                exercise: "Exercise 10: Present Simple for Future",
                question: "Our semester ______________ (end) on June 15th this year.",
                hint: "Chia s·ªë √≠t.",
                options: [
                    { text: "ends", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: L·ªãch h·ªçc (Semester s·ªë √≠t) -> Hi·ªán t·∫°i ƒë∆°n th√™m s.\n\n2. D·ªãch c√¢u: H·ªçc k·ª≥ c·ªßa ch√∫ng t√¥i k·∫øt th√∫c v√†o ng√†y 15 th√°ng 6 nƒÉm nay." },
                    { text: "end", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´." },
                    { text: "will end", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." },
                    { text: "ending", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 28,
                exercise: "Exercise 10: Present Simple for Future",
                question: "The ferry ______________ (not, leave) port at 6:00, but 6:15.",
                hint: "Ph·ªß ƒë·ªãnh hi·ªán t·∫°i ƒë∆°n, s·ªë √≠t.",
                options: [
                    { text: "doesn't leave", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: Ph·ªß ƒë·ªãnh c·ªßa hi·ªán t·∫°i ƒë∆°n v·ªõi ch·ªß ng·ªØ s·ªë √≠t (Ferry) -> Doesn't + V-inf.\n\n2. D·ªãch c√¢u: Ph√† kh√¥ng r·ªùi b·∫øn l√∫c 6:00, m√† l√† 6:15." },
                    { text: "don't leave", correct: false, rationale: "‚ùå Sai tr·ª£ ƒë·ªông t·ª´." },
                    { text: "won't leave", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." },
                    { text: "not leave", correct: false, rationale: "‚ùå Sai ng·ªØ ph√°p." }
                ]
            },
            {
                number: 29,
                exercise: "Exercise 10: Present Simple for Future",
                question: "My favorite television program ______________ (be) on in half an hour.",
                hint: "To be s·ªë √≠t.",
                options: [
                    { text: "is", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: L·ªãch ph√°t s√≥ng truy·ªÅn h√¨nh -> To be hi·ªán t·∫°i ƒë∆°n (Program s·ªë √≠t).\n\n2. D·ªãch c√¢u: Ch∆∞∆°ng tr√¨nh truy·ªÅn h√¨nh y√™u th√≠ch c·ªßa t√¥i s·∫Ω chi·∫øu trong n·ª≠a gi·ªù n·ªØa." },
                    { text: "will be", correct: false, rationale: "‚ùå Sai y√™u c·∫ßu ƒë·ªÅ b√†i." },
                    { text: "are", correct: false, rationale: "‚ùå Sai s·ªë nhi·ªÅu." },
                    { text: "being", correct: false, rationale: "‚ùå Sai." }
                ]
            },
            {
                number: 30,
                exercise: "Exercise 10: Present Simple for Future",
                question: "What are you going to do when you ______________ (finish) college?",
                hint: "Sau 'When' n√≥i v·ªÅ t∆∞∆°ng lai d√πng Hi·ªán t·∫°i ƒë∆°n.",
                options: [
                    { text: "finish", correct: true, rationale: "‚úÖ Ch√≠nh x√°c!\n\n1. Gi·∫£i th√≠ch: M·ªánh ƒë·ªÅ ch·ªâ th·ªùi gian t∆∞∆°ng lai b·∫Øt ƒë·∫ßu b·∫±ng \"When\" -> D√πng Hi·ªán t·∫°i ƒë∆°n.\n\n2. D·ªãch c√¢u: B·∫°n ƒë·ªãnh l√†m g√¨ khi b·∫°n t·ªët nghi·ªáp ƒë·∫°i h·ªçc?" },
                    { text: "will finish", correct: false, rationale: "‚ùå Sai. M·ªánh ƒë·ªÅ th·ªùi gian (When/Until/As soon as...) kh√¥ng d√πng Will." },
                    { text: "finishes", correct: false, rationale: "‚ùå Sai chia ƒë·ªông t·ª´ (You ƒëi v·ªõi finish)." },
                    { text: "finished", correct: false, rationale: "‚ùå Qu√° kh·ª©." }
                ]
            }
        ];

        // --- AUDIO ENGINE ---
        // Simple synth to avoid external dependencies
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            if (type === 'correct') {
                // High pitch Ding
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.4);
                
                // Confetti
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#00D26A', '#00C9A7', '#8854C0']
                });

            } else {
                // Low pitch Buzz
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- RENDER LOGIC ---
        let currentScore = 0;
        let answeredCount = 0;

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            let currentExerciseTitle = "";

            quizData.forEach((item, index) => {
                // Insert Exercise Title if changed
                if (item.exercise !== currentExerciseTitle) {
                    currentExerciseTitle = item.exercise;
                    const titleDiv = document.createElement('div');
                    titleDiv.className = 'exercise-title';
                    titleDiv.innerText = currentExerciseTitle;
                    container.appendChild(titleDiv);
                }

                // Card
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-${index}`;

                // Question Text
                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.innerHTML = `<span class="question-number">Q${item.number}</span> ${item.question}`;
                
                // Options Grid
                const grid = document.createElement('div');
                grid.className = 'options-grid';

                item.options.forEach((opt, optIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt.text; // A, B, C... labels could be added but text is sufficient
                    btn.onclick = () => checkAnswer(index, optIndex, btn);
                    grid.appendChild(btn);
                });

                // Hint (Hidden by default or shown?) - Let's keep it clean, show in rationale
                
                // Explanation Box
                const expBox = document.createElement('div');
                expBox.className = 'explanation-box';
                expBox.id = `exp-${index}`;
                expBox.innerHTML = `
                    <div class="explanation-header">üí° Gi·∫£i th√≠ch chi ti·∫øt c·ªßa Ms Mai An:</div>
                    <div class="explanation-content">${item.hint ? `<i>(G·ª£i √Ω: ${item.hint})</i><br><br>` : ''}${item.options.find(o => o.correct).rationale}</div>
                `;

                card.appendChild(qText);
                card.appendChild(grid);
                card.appendChild(expBox);
                container.appendChild(card);
            });
        }

        function checkAnswer(qIndex, optIndex, btnElement) {
            const card = document.getElementById(`q-${qIndex}`);
            const buttons = card.querySelectorAll('.option-btn');
            const explanation = document.getElementById(`exp-${qIndex}`);
            const data = quizData[qIndex];
            const selectedOpt = data.options[optIndex];

            // Prevent re-answering
            if (card.dataset.answered) return;
            card.dataset.answered = "true";
            answeredCount++;

            // Visual Feedback
            if (selectedOpt.correct) {
                btnElement.classList.add('correct');
                playSound('correct');
                currentScore++;
            } else {
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight correct answer automatically
                data.options.forEach((opt, idx) => {
                    if (opt.correct) buttons[idx].classList.add('correct');
                });
            }

            // Disable all buttons
            buttons.forEach(btn => btn.classList.add('disabled'));

            // Show Explanation
            explanation.style.display = 'block';
            
            // If user clicked wrong answer, we can append the specific rationale of the wrong answer too if needed, 
            // but the 'correct' rationale usually contains the full analysis. 
            // The JSON data 'correct' rationale already analyzes all options? 
            // Let's check: Yes, the JSON 'rationale' for the correct answer usually has a full analysis.
            // HOWEVER, the prompt asked to explain why the *chosen* answer is wrong.
            // My current code shows the rationale of the CORRECT answer (which usually explains everything).
            // Let's tweak: If the specific wrong option has a unique rationale explanation in JSON, append it?
            // The JSON has rationales for WRONG answers too!
            
            if (!selectedOpt.correct) {
                // Append the specific reason why THIS choice was wrong to the top of explanation
                const specificError = `<div style="color: #d63031; margin-bottom: 10px; font-weight:bold;">${selectedOpt.rationale}</div>`;
                const contentDiv = explanation.querySelector('.explanation-content');
                contentDiv.innerHTML = specificError + contentDiv.innerHTML;
            }
        }

        function submitQuiz() {
            const modal = document.getElementById('scoreModal');
            const scoreDisplay = document.getElementById('finalScore');
            const msgDisplay = document.getElementById('finalMsg');
            
            scoreDisplay.innerText = `${currentScore}/${quizData.length}`;
            
            const percentage = (currentScore / quizData.length) * 100;
            if (percentage === 100) msgDisplay.innerText = "Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i ng·ªØ ph√°p! üåü";
            else if (percentage >= 80) msgDisplay.innerText = "L√†m t·ªët l·∫Øm! Ch·ªâ sai m·ªôt ch√∫t th√¥i. üí™";
            else if (percentage >= 50) msgDisplay.innerText = "Kh√° t·ªët, nh∆∞ng c·∫ßn √¥n l·∫°i b√†i k·ªπ h∆°n nh√©! üìö";
            else msgDisplay.innerText = "C·ªë g·∫Øng l√™n! H√£y xem k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch nh√©. üî•";

            modal.style.display = 'flex';
            
            // Celebration confetti if high score
            if (percentage >= 80) {
                 var duration = 3 * 1000;
                var animationEnd = Date.now() + duration;
                var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 2000 };

                var random = function(min, max) { return Math.random() * (max - min) + min; }

                var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.7, 0.9), y: Math.random() - 0.2 } }));
                }, 250);
            }
        }

        function closeModal() {
            document.getElementById('scoreModal').style.display = 'none';
            // Optional: reset quiz? For now just close so they can review.
            // location.reload(); // Uncomment to reload
        }

        // Init
        renderQuiz();

    </script>
</body>
</html>
