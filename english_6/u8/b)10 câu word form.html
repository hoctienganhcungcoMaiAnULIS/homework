<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Form: Sports & Games - Ms Mai An ULIS</title>
    <!-- Google Fonts: Nunito & Quicksand -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome cho icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-pastel: #F3F0FF;
            --text-dark: #2C3E50;
            --card-shadow: 0 8px 0 rgba(0,0,0,0.1);
            --btn-shadow: 0 5px 0 rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-pastel);
            /* Zigzag pattern background */
            background-image: linear-gradient(135deg, #ffffff 25%, transparent 25%), 
                              linear-gradient(225deg, #ffffff 25%, transparent 25%), 
                              linear-gradient(45deg, #ffffff 25%, transparent 25%), 
                              linear-gradient(315deg, #ffffff 25%, transparent 25%);
            background-position: 10px 0, 10px 0, 0 0, 0 0;
            background-size: 20px 20px;
            background-repeat: repeat;
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(to right, var(--primary-purple), var(--primary-teal));
            border-radius: 20px;
            color: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        header h1 {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            font-size: 2rem;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
        }

        header p {
            margin: 5px 0 0;
            font-size: 1rem;
            opacity: 0.9;
        }

        .teacher-tag {
            background: white;
            color: var(--primary-purple);
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.8rem;
            display: inline-block;
            margin-top: 10px;
            box-shadow: 0 3px 0 rgba(0,0,0,0.1);
        }

        /* QUIZ CARD */
        .quiz-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.1);
            border: 2px solid #eee;
            position: relative;
            transition: transform 0.3s ease;
        }

        .question-number {
            background: var(--primary-teal);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            position: absolute;
            top: -15px;
            left: -15px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            border: 2px solid white;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.5;
            color: #2c3e50;
            padding-left: 10px;
        }

        .word-hint {
            color: var(--primary-purple);
            font-weight: 800;
            font-style: italic;
        }

        /* OPTIONS GRID */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-bottom: 5px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: #555;
            cursor: pointer;
            transition: all 0.1s;
            position: relative;
            text-align: left;
        }

        .option-btn:active {
            transform: translateY(3px);
            border-bottom-width: 2px;
        }

        .option-btn:hover:not(:disabled) {
            background-color: #f9f9f9;
            transform: scale(1.02);
        }

        /* STATES */
        .option-btn.correct {
            background-color: var(--correct-green);
            border-color: #00A653; /* Darker green for 3D effect */
            color: white;
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .option-btn.wrong {
            background-color: var(--wrong-red);
            border-color: #D63031; /* Darker red */
            color: white;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.8;
        }

        .option-btn.dimmed {
            opacity: 0.5;
        }

        /* EXPLANATION BOX */
        .explanation-box {
            margin-top: 20px;
            background: #F0F8FF;
            border-radius: 12px;
            padding: 20px;
            border-left: 6px solid var(--primary-purple);
            display: none; /* Hidden initially */
            animation: slideDown 0.4s ease-out;
        }

        .teacher-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            vertical-align: middle;
            border: 2px solid var(--primary-purple);
        }

        .explain-header {
            font-weight: 800;
            color: var(--primary-purple);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .explain-content p {
            margin: 5px 0;
            line-height: 1.6;
        }

        .vocab-list {
            list-style: none;
            padding: 0;
            margin: 10px 0;
            background: white;
            padding: 10px;
            border-radius: 8px;
            border: 1px dashed #ccc;
        }

        .vocab-list li {
            margin-bottom: 5px;
        }

        .vocab-word {
            font-weight: 700;
            color: var(--primary-teal);
        }

        /* FOOTER & SUBMIT */
        .footer-controls {
            text-align: center;
            margin-top: 40px;
            padding-bottom: 50px;
        }

        .submit-btn {
            background: linear-gradient(to bottom, #FFD700, #FFA502);
            color: #583a00;
            font-size: 1.5rem;
            font-weight: 800;
            padding: 15px 50px;
            border: none;
            border-radius: 50px;
            border-bottom: 6px solid #e69500;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .submit-btn:hover {
            transform: scale(1.05);
        }

        .submit-btn:active {
            transform: translateY(4px) scale(1.05);
            border-bottom-width: 2px;
        }

        /* ANIMATIONS */
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .result-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 4px solid var(--primary-teal);
            animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .score-big {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-purple);
            margin: 10px 0;
            text-shadow: 3px 3px 0 #eee;
        }

        .feedback-text {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 20px;
        }

        /* Audio Hidden */
        audio { display: none; }
    </style>
</head>
<body>

<header>
    <h1><i class="fas fa-gamepad"></i> SPORTS & GAMES QUIZ</h1>
    <p>Word Form Challenge - Grade 6</p>
    <div class="teacher-tag">Gi√°o vi√™n: Ms Mai An ULIS</div>
</header>

<div class="container" id="quiz-container">
    <!-- Questions will be injected here by JS -->
</div>

<div class="footer-controls">
    <button class="submit-btn" onclick="submitQuiz()">
        <i class="fas fa-check-circle"></i> N·ªòP B√ÄI & XEM ƒêI·ªÇM
    </button>
</div>

<!-- Modal Result -->
<div class="modal-overlay" id="resultModal">
    <div class="result-card">
        <h2 style="color: var(--primary-teal); margin-top:0;">K·∫æT QU·∫¢ C·ª¶A CON</h2>
        <div class="score-big" id="finalScore">0/10</div>
        <p class="feedback-text" id="feedbackMsg">Tuy·ªát v·ªùi √¥ng m·∫∑t tr·ªùi!</p>
        <button class="submit-btn" style="font-size: 1rem; padding: 10px 30px;" onclick="location.reload()">L√†m l·∫°i b√†i</button>
    </div>
</div>

<!-- Sounds -->
<!-- S·ª≠ d·ª•ng √¢m thanh ng·∫Øn t·ª´ ngu·ªìn uy t√≠n cho gi√°o d·ª•c -->
<audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio> <!-- Ding -->
<audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3"></audio> <!-- Buzz/Fail -->
<audio id="sound-cheer" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio> <!-- Victory -->

<script>
    // D·ªÆ LI·ªÜU C√ÇU H·ªéI & GI·∫¢I TH√çCH CHI TI·∫æT
    const quizData = [
        {
            id: 1,
            question: "Stories about _____________ people in the world of sports are often very interesting. <span class='word-hint'>(fame)</span>",
            options: ["famous", "fame", "famously", "infamous"],
            correct: 0, // Index of correct answer
            explanation: {
                translate: "Nh·ªØng c√¢u chuy·ªán v·ªÅ nh·ªØng ng∆∞·ªùi n·ªïi ti·∫øng trong gi·ªõi th·ªÉ thao th∆∞·ªùng r·∫•t th√∫ v·ªã.",
                vocab: [
                    "A. famous (adj - t√≠nh t·ª´): n·ªïi ti·∫øng",
                    "B. fame (n - danh t·ª´): s·ª± n·ªïi ti·∫øng, danh v·ªçng",
                    "C. famously (adv - tr·∫°ng t·ª´): m·ªôt c√°ch n·ªïi ti·∫øng",
                    "D. infamous (adj - t√≠nh t·ª´): kh√©t ti·∫øng (n·ªïi ti·∫øng v√¨ ƒëi·ªÅu x·∫•u)"
                ],
                whyCorrect: "Tr∆∞·ªõc danh t·ª´ 'people' (ng∆∞·ªùi) ch√∫ng ta c·∫ßn m·ªôt <b>T√≠nh t·ª´ (Adjective)</b> ƒë·ªÉ b·ªï nghƒ©a.",
                whyWrong: "Lo·∫°i B (Danh t·ª´) v√† C (Tr·∫°ng t·ª´) v√¨ sai lo·∫°i t·ª´. Lo·∫°i D v√¨ 'infamous' mang nghƒ©a ti√™u c·ª±c, kh√¥ng ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh 'interesting' (th√∫ v·ªã)."
            }
        },
        {
            id: 2,
            question: "When you open a newspaper, you‚Äôll always find _____________ about some games. <span class='word-hint'>(inform)</span>",
            options: ["informative", "information", "inform", "informer"],
            correct: 1,
            explanation: {
                translate: "Khi con m·ªü m·ªôt t·ªù b√°o, con s·∫Ω lu√¥n t√¨m th·∫•y th√¥ng tin v·ªÅ c√°c tr√≤ ch∆°i.",
                vocab: [
                    "A. informative (adj): cung c·∫•p nhi·ªÅu tin t·ª©c/b·ªï √≠ch",
                    "B. information (n): th√¥ng tin",
                    "C. inform (v): th√¥ng b√°o",
                    "D. informer (n): ng∆∞·ªùi ch·ªâ ƒëi·ªÉm/m·∫≠t th√°m"
                ],
                whyCorrect: "Sau ƒë·ªông t·ª´ 'find' (t√¨m th·∫•y), ta c·∫ßn m·ªôt <b>Danh t·ª´ (Noun)</b> ch·ªâ s·ª± v·∫≠t ƒë·ªÉ l√†m t√¢n ng·ªØ.",
                whyWrong: "Lo·∫°i A (T√≠nh t·ª´), C (ƒê·ªông t·ª´). Lo·∫°i D (Ng∆∞·ªùi ch·ªâ ƒëi·ªÉm) v√¨ sai nghƒ©a ho√†n to√†n."
            }
        },
        {
            id: 3,
            question: "Huy‚Äôs brother is a _____________ football player, isn‚Äôt he? <span class='word-hint'>(profession)</span>",
            options: ["profession", "professor", "professional", "professionally"],
            correct: 2,
            explanation: {
                translate: "Anh trai c·ªßa Huy l√† m·ªôt c·∫ßu th·ªß b√≥ng ƒë√° chuy√™n nghi·ªáp, ph·∫£i kh√¥ng?",
                vocab: [
                    "A. profession (n): ngh·ªÅ nghi·ªáp",
                    "B. professor (n): gi√°o s∆∞",
                    "C. professional (adj): chuy√™n nghi·ªáp",
                    "D. professionally (adv): m·ªôt c√°ch chuy√™n nghi·ªáp"
                ],
                whyCorrect: "ƒê·ª©ng tr∆∞·ªõc c·ª•m danh t·ª´ 'football player', ta c·∫ßn m·ªôt <b>T√≠nh t·ª´ (Adjective)</b> ƒë·ªÉ mi√™u t·∫£ t√≠nh ch·∫•t c·ªßa c·∫ßu th·ªß ƒë√≥.",
                whyWrong: "Lo·∫°i A, B (Danh t·ª´) v√† D (Tr·∫°ng t·ª´). 'Professional' l√† t√≠nh t·ª´ h·ª£p l√Ω nh·∫•t."
            }
        },
        {
            id: 4,
            question: "Please listen to the _____________ carefully. <span class='word-hint'>(instruct)</span>",
            options: ["instructs", "instructive", "instructor", "instructions"],
            correct: 3,
            explanation: {
                translate: "L√†m ∆°n h√£y l·∫Øng nghe c√°c h∆∞·ªõng d·∫´n m·ªôt c√°ch c·∫©n th·∫≠n.",
                vocab: [
                    "A. instructs (v): h∆∞·ªõng d·∫´n (chia ng√¥i 3)",
                    "B. instructive (adj): c√≥ t√≠nh rƒÉn d·∫°y",
                    "C. instructor (n): ng∆∞·ªùi h∆∞·ªõng d·∫´n",
                    "D. instructions (n): c√°c l·ªùi ch·ªâ d·∫´n/h∆∞·ªõng d·∫´n"
                ],
                whyCorrect: "Sau 'the' l√† danh t·ª´. C·ª•m t·ª´ 'listen to the instructions' (nghe h∆∞·ªõng d·∫´n/lu·∫≠t ch∆°i) l√† c·ª•m t·ª´ c·ªë ƒë·ªãnh trong th·ªÉ thao/tr√≤ ch∆°i.",
                whyWrong: "D√π C l√† danh t·ª´ (ng∆∞·ªùi h∆∞·ªõng d·∫´n), nh∆∞ng trong ng·ªØ c·∫£nh tr√≤ ch∆°i, ta th∆∞·ªùng nghe 'l·ªùi h∆∞·ªõng d·∫´n' (instructions) h∆°n l√† nghe 'ng∆∞·ªùi'."
            }
        },
        {
            id: 5,
            question: "Did you join the sports _____________ last week, Tom? <span class='word-hint'>(compete)</span>",
            options: ["competitive", "competition", "competitor", "competes"],
            correct: 1,
            explanation: {
                translate: "B·∫°n c√≥ tham gia cu·ªôc thi th·ªÉ thao tu·∫ßn tr∆∞·ªõc kh√¥ng Tom?",
                vocab: [
                    "A. competitive (adj): c√≥ t√≠nh c·∫°nh tranh",
                    "B. competition (n): cu·ªôc thi",
                    "C. competitor (n): ƒë·ªëi th·ªß",
                    "D. competes (v): thi ƒë·∫•u"
                ],
                whyCorrect: "C·∫ßn m·ªôt danh t·ª´ gh√©p v·ªõi 'sports'. 'Sports competition' nghƒ©a l√† h·ªôi thi/cu·ªôc thi th·ªÉ thao.",
                whyWrong: "Kh√¥ng th·ªÉ 'join a competitor' (tham gia m·ªôt ƒë·ªëi th·ªß) n√™n lo·∫°i C. A v√† D sai lo·∫°i t·ª´."
            }
        },
        {
            id: 6,
            question: "_____________ ! Your team won the first prize. <span class='word-hint'>(congratulate)</span>",
            options: ["Congratulate", "Congratulations", "Congratulation", "Congratulating"],
            correct: 1,
            explanation: {
                translate: "Xin ch√∫c m·ª´ng! ƒê·ªôi c·ªßa b·∫°n ƒë√£ gi√†nh gi·∫£i nh·∫•t.",
                vocab: [
                    "A. Congratulate (v): ch√∫c m·ª´ng",
                    "B. Congratulations (n): l·ªùi ch√∫c m·ª´ng (c√≥ 's')",
                    "C. Congratulation (n): s·ª± ch√∫c m·ª´ng (thi·∫øu 's')",
                    "D. Congratulating (V-ing): vi·ªác ch√∫c m·ª´ng"
                ],
                whyCorrect: "Khi d√πng l√†m c√¢u c·∫£m th√°n ƒë·ªÉ ch√∫c m·ª´ng ai ƒë√≥, danh t·ª´ n√†y <b>LU√îN LU√îN ph·∫£i c√≥ 's'</b> ·ªü cu·ªëi -> Congratulations!",
                whyWrong: "A l√† ƒë·ªông t·ª´. C thi·∫øu 's'. D l√† V-ing kh√¥ng ƒë·ª©ng l√†m c√¢u c·∫£m th√°n."
            }
        },
        {
            id: 7,
            question: "The _____________ in this gym is very modern. <span class='word-hint'>(equip)</span>",
            options: ["equipment", "equipments", "equipped", "equipping"],
            correct: 0,
            explanation: {
                translate: "Trang thi·∫øt b·ªã trong ph√≤ng t·∫≠p n√†y r·∫•t hi·ªán ƒë·∫°i.",
                vocab: [
                    "A. equipment (n): trang thi·∫øt b·ªã (kh√¥ng ƒë·∫øm ƒë∆∞·ª£c)",
                    "B. equipments (sai ng·ªØ ph√°p): t·ª´ n√†y kh√¥ng bao gi·ªù th√™m 's'",
                    "C. equipped (v/adj): ƒë∆∞·ª£c trang b·ªã",
                    "D. equipping (V-ing): vi·ªác trang b·ªã"
                ],
                whyCorrect: "Sau 'The' c·∫ßn danh t·ª´. L∆∞u √Ω ƒë·∫∑c bi·ªát: <b>Equipment</b> l√† danh t·ª´ KH√îNG ƒê·∫æM ƒê∆Ø·ª¢C, kh√¥ng bao gi·ªù c√≥ d·∫°ng s·ªë nhi·ªÅu th√™m 's'.",
                whyWrong: "B sai v√¨ th√™m 's'. C v√† D sai lo·∫°i t·ª´."
            }
        },
        {
            id: 8,
            question: "I think sports and games are very _____________ . <span class='word-hint'>(use)</span>",
            options: ["use", "useful", "useless", "usefully"],
            correct: 1,
            explanation: {
                translate: "C√¥ nghƒ© th·ªÉ thao v√† c√°c tr√≤ ch∆°i r·∫•t h·ªØu √≠ch.",
                vocab: [
                    "A. use (v/n): d√πng/c√¥ng d·ª•ng",
                    "B. useful (adj): c√≥ √≠ch, h·ªØu √≠ch",
                    "C. useless (adj): v√¥ d·ª•ng",
                    "D. usefully (adv): m·ªôt c√°ch h·ªØu √≠ch"
                ],
                whyCorrect: "Sau ƒë·ªông t·ª´ to be 'are' v√† tr·∫°ng t·ª´ 'very', ta c·∫ßn m·ªôt <b>T√≠nh t·ª´ (Adjective)</b>.",
                whyWrong: "Lo·∫°i A v√† D. Lo·∫°i C (v√¥ d·ª•ng) v√¨ nghƒ©a ti√™u c·ª±c, kh√¥ng h·ª£p v·ªõi √Ω khen ng·ª£i th·ªÉ thao."
            }
        },
        {
            id: 9,
            question: "The football fans cheered _____________ for their side. <span class='word-hint'>(loud)</span>",
            options: ["loud", "loudly", "loudness", "louder"],
            correct: 1,
            explanation: {
                translate: "C√°c c·ªï ƒë·ªông vi√™n b√≥ng ƒë√° ƒë√£ h√≤ reo ·∫ßm ƒ© cho ƒë·ªôi c·ªßa h·ªç.",
                vocab: [
                    "A. loud (adj): to, ·ªìn √†o",
                    "B. loudly (adv): m·ªôt c√°ch ·∫ßm ƒ©/nhi·ªát t√¨nh",
                    "C. loudness (n): s·ª± ·ªìn √†o",
                    "D. louder (adj): to h∆°n (so s√°nh h∆°n)"
                ],
                whyCorrect: "ƒê·ªÉ b·ªï nghƒ©a cho ƒë·ªông t·ª´ th∆∞·ªùng 'cheered' (h√≤ reo), ta c·∫ßn m·ªôt <b>Tr·∫°ng t·ª´ (Adverb)</b> th∆∞·ªùng c√≥ ƒëu√¥i -ly.",
                whyWrong: "A l√† t√≠nh t·ª´. C l√† danh t·ª´. D l√† so s√°nh h∆°n (kh√¥ng c√≥ 'than' n√™n kh√¥ng d√πng)."
            }
        },
        {
            id: 10,
            question: "I did many sports last week and was _____________. <span class='word-hint'>(exhaust)</span>",
            options: ["exhausting", "exhaustion", "exhausted", "exhausts"],
            correct: 2,
            explanation: {
                translate: "Tu·∫ßn tr∆∞·ªõc t√¥i ch∆°i nhi·ªÅu th·ªÉ thao qu√° n√™n ƒë√£ b·ªã ki·ªát s·ª©c.",
                vocab: [
                    "A. exhausting (adj): g√¢y ki·ªát s·ª©c (d√πng cho v·∫≠t/vi·ªác)",
                    "B. exhaustion (n): s·ª± ki·ªát s·ª©c",
                    "C. exhausted (adj): b·ªã ki·ªát s·ª©c (d√πng cho ng∆∞·ªùi)",
                    "D. exhausts (v): x·∫£ ra/l√†m ki·ªát s·ª©c"
                ],
                whyCorrect: "Mi√™u t·∫£ c·∫£m x√∫c/tr·∫°ng th√°i c·ªßa con ng∆∞·ªùi (I was...), ta d√πng t√≠nh t·ª´ ƒëu√¥i <b>-ed</b>.",
                whyWrong: "A d√πng cho s·ª± v·∫≠t (The game was exhausting). B sai lo·∫°i t·ª´. D sai ng·ªØ ph√°p."
            }
        }
    ];

    let score = 0;
    let answeredCount = 0;

    // RENDER QUIZ
    const container = document.getElementById('quiz-container');

    quizData.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'quiz-card';
        card.innerHTML = `
            <div class="question-number">${index + 1}</div>
            <div class="question-text">${item.question}</div>
            <div class="options-grid" id="options-${index}">
                ${item.options.map((opt, i) => `
                    <button class="option-btn" onclick="checkAnswer(${index}, ${i}, this)">
                        ${String.fromCharCode(65 + i)}. ${opt}
                    </button>
                `).join('')}
            </div>
            
            <div class="explanation-box" id="explain-${index}">
                <div class="explain-header">
                    <i class="fas fa-chalkboard-teacher" style="font-size: 1.5rem; margin-right: 10px;"></i>
                    Ms. Mai An gi·∫£i th√≠ch:
                </div>
                <div class="explain-content">
                    <p><b>üîç D·ªãch c√¢u:</b> <i>"${item.explanation.translate}"</i></p>
                    <ul class="vocab-list">
                        ${item.explanation.vocab.map(v => `<li>${v}</li>`).join('')}
                    </ul>
                    <p style="color: var(--correct-green);"><i class="fas fa-check-circle"></i> <b>T·∫°i sao ƒê√öNG:</b> ${item.explanation.whyCorrect}</p>
                    <p style="color: var(--wrong-red);"><i class="fas fa-times-circle"></i> <b>T·∫°i sao SAI:</b> ${item.explanation.whyWrong}</p>
                </div>
            </div>
        `;
        container.appendChild(card);
    });

    // CHECK ANSWER FUNCTION
    function checkAnswer(questionIndex, selectedOptionIndex, btnElement) {
        const questionData = quizData[questionIndex];
        const optionsDiv = document.getElementById(`options-${questionIndex}`);
        const allBtns = optionsDiv.getElementsByTagName('button');
        const explainBox = document.getElementById(`explain-${questionIndex}`);

        // Prevent clicking again
        if (btnElement.classList.contains('disabled')) return;
        
        // Disable all buttons in this question
        for (let btn of allBtns) {
            btn.classList.add('disabled');
            btn.disabled = true;
            if (btn !== btnElement) btn.classList.add('dimmed');
        }

        answeredCount++;

        if (selectedOptionIndex === questionData.correct) {
            // CORRECT
            btnElement.classList.add('correct');
            playSound('correct');
            score++;
            triggerConfetti();
        } else {
            // WRONG
            btnElement.classList.add('wrong');
            playSound('wrong');
            // Highlight the correct answer automatically
            allBtns[questionData.correct].classList.remove('dimmed');
            allBtns[questionData.correct].classList.add('correct');
        }

        // SHOW EXPLANATION
        explainBox.style.display = 'block';
    }

    // PLAY SOUND
    function playSound(type) {
        const soundMap = {
            'correct': 'sound-correct',
            'wrong': 'sound-wrong',
            'cheer': 'sound-cheer'
        };
        const audio = document.getElementById(soundMap[type]);
        if (audio) {
            audio.currentTime = 0;
            audio.play().catch(e => console.log("Audio play failed interaction needed"));
        }
    }

    // CONFETTI EFFECT
    function triggerConfetti() {
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 },
            colors: ['#8854C0', '#00C9A7', '#FF4757', '#FFD700']
        });
    }

    // SUBMIT & SHOW SCORE
    function submitQuiz() {
        if (answeredCount < quizData.length) {
            const confirmMsg = confirm("Con ch∆∞a l√†m h·∫øt c√°c c√¢u h·ªèi. Con c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i kh√¥ng?");
            if (!confirmMsg) return;
        }

        const modal = document.getElementById('resultModal');
        const scoreDisplay = document.getElementById('finalScore');
        const feedback = document.getElementById('feedbackMsg');

        scoreDisplay.textContent = `${score}/${quizData.length}`;
        
        // Feedback logic
        const percentage = (score / quizData.length) * 100;
        if (percentage === 100) {
            feedback.textContent = "Xu·∫•t s·∫Øc! Con l√† thi√™n t√†i Word Form! üåü";
            playSound('cheer');
            confetti({ particleCount: 300, spread: 100, origin: { y: 0.6 } });
        } else if (percentage >= 70) {
            feedback.textContent = "L√†m t·ªët l·∫Øm! Ch·ªâ sai x√≠u xiu th√¥i. üí™";
            playSound('cheer');
        } else {
            feedback.textContent = "C·ªë g·∫Øng h∆°n nh√©! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch c·ªßa c√¥ Mai An. üìö";
        }

        modal.style.display = 'flex';
    }
</script>

</body>
</html>