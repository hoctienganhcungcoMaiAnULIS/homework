<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ª≠ Th√°ch Th√¨ Qu√° Kh·ª© - Ms Mai An ULIS</title>
    <!-- Google Fonts: Nunito for rounded, friendly look -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Confetti JS -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #8854C0; /* Purple */
            --primary-dark: #6c429c;
            --secondary: #00C9A7; /* Teal */
            --secondary-dark: #009e82;
            --correct: #00D26A; /* Green */
            --correct-dark: #00a855;
            --wrong: #FF4757; /* Red/Pink */
            --wrong-dark: #d6303e;
            --background: #F0F4F8;
            --card-bg: #ffffff;
            --text-main: #2f3542;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* Prevent text selection for game feel */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--background);
            background-image: radial-gradient(#dfe4ea 15%, transparent 16%), radial-gradient(#dfe4ea 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-main);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* --- Layout & Container --- */
        #game-container {
            width: 100%;
            max-width: 800px;
            margin: auto;
            position: relative;
        }

        .card {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.15);
            padding: 30px;
            margin-bottom: 20px;
            border: 2px solid #e1e1e1;
            position: relative;
            overflow: hidden;
        }

        /* --- Header --- */
        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .teacher-tag {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 10px;
            box-shadow: 0 4px 0 var(--primary-dark);
        }

        h1 {
            color: var(--primary);
            font-weight: 800;
            margin: 0;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.05);
        }

        /* --- Progress Bar --- */
        .progress-container {
            background: #e0e0e0;
            border-radius: 15px;
            height: 15px;
            width: 100%;
            margin-bottom: 20px;
            overflow: hidden;
            border: 2px solid #ccc;
        }

        .progress-bar {
            background: var(--secondary);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 15px;
        }

        /* --- Question --- */
        .question-box {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2f3542;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        /* --- Options Grid --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* --- 3D Buttons --- */
        .option-btn {
            background: white;
            border: 2px solid #e1e1e1;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: #57606f;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px 0 #d1d1d1;
            text-align: left;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #d1d1d1;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background-color: #f8f0ff;
        }

        .option-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #f1f2f6;
            color: #747d8c;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 0.9rem;
            font-weight: 800;
            flex-shrink: 0;
            border: 2px solid #dfe4ea;
        }

        /* --- States: Correct / Wrong --- */
        .option-btn.correct {
            background-color: var(--correct);
            border-color: var(--correct-dark);
            color: white;
            box-shadow: 0 5px 0 var(--correct-dark);
        }
        .option-btn.correct:active { box-shadow: 0 1px 0 var(--correct-dark); }
        .option-btn.correct .option-circle {
            background: white;
            color: var(--correct);
            border-color: white;
        }

        .option-btn.wrong {
            background-color: var(--wrong);
            border-color: var(--wrong-dark);
            color: white;
            box-shadow: 0 5px 0 var(--wrong-dark);
            animation: shake 0.5s;
        }
        .option-btn.wrong:active { box-shadow: 0 1px 0 var(--wrong-dark); }
        .option-btn.wrong .option-circle {
            background: white;
            color: var(--wrong);
            border-color: white;
        }

        .option-btn:disabled {
            cursor: default;
            transform: none !important;
        }

        /* --- Explanation Box --- */
        #explanation-area {
            display: none; /* Hidden by default */
            margin-top: 25px;
            background: #f0fdf4; /* Light green bg */
            border: 2px solid var(--correct);
            border-radius: 15px;
            padding: 20px;
            animation: slideIn 0.4s ease-out;
        }
        
        #explanation-area.incorrect-context {
            background: #fff5f5;
            border-color: var(--wrong);
        }

        .teacher-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            float: left;
            margin-right: 15px;
            border: 3px solid white;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }

        .exp-title {
            color: var(--primary);
            font-weight: 800;
            margin-bottom: 10px;
            display: block;
        }

        .exp-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #2d3436;
            white-space: pre-line; /* Respect line breaks */
        }

        /* --- Navigation --- */
        .nav-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: 800;
            width: 100%;
            margin-top: 20px;
            cursor: pointer;
            box-shadow: 0 6px 0 var(--primary-dark);
            transition: all 0.1s;
            display: none; /* Hidden until answered */
        }

        .nav-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 var(--primary-dark);
        }
        
        .nav-btn:hover {
            filter: brightness(1.1);
        }

        /* --- Animations --- */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            50% { transform: translateX(10px) rotate(5deg); }
            75% { transform: translateX(-10px) rotate(-5deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Results Screen --- */
        #result-screen {
            display: none;
            text-align: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            background: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 3rem;
            font-weight: 900;
            color: white;
            box-shadow: 0 10px 0 var(--secondary-dark);
            border: 5px solid white;
        }

        .message {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
            font-weight: 700;
        }

        /* --- Footer --- */
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9rem;
            color: #a4b0be;
        }

        /* Underline style for phonetics */
        u {
            text-decoration: underline;
            text-decoration-thickness: 3px;
            text-decoration-color: var(--primary);
            text-underline-offset: 3px;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <!-- Start Screen -->
        <div id="start-screen" class="card" style="text-align: center;">
            <div class="teacher-tag"><i class="fas fa-graduation-cap"></i> Ms Mai An ULIS</div>
            <h1 style="margin-bottom: 20px; font-size: 2.5rem;">Th·ª≠ Th√°ch<br>Th√¨ Qu√° Kh·ª©</h1>
            <p style="font-size: 1.2rem; color: #57606f; margin-bottom: 30px;">
                Ch√†o m·ª´ng c√°c em! H√¥m nay ch√∫ng ta s·∫Ω chinh ph·ª•c 30 c√¢u h·ªèi v·ªÅ th√¨ Qu√° kh·ª© ƒê∆°n v√† Qu√° kh·ª© Ti·∫øp di·ªÖn nh√©.<br>
                <small style="color: #a4b0be;">H√£y b·∫≠t √¢m thanh ƒë·ªÉ tr·∫£i nghi·ªám t·ªët nh·∫•t!</small>
            </p>
            <button class="nav-btn" style="display: block;" onclick="startGame()">B·∫Øt ƒê·∫ßu Ngay <i class="fas fa-play"></i></button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" style="display: none;">
            <div class="header">
                <div class="teacher-tag">C√¢u h·ªèi <span id="current-q-num">1</span>/30</div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="card">
                <div class="question-box" id="question-text">
                    Loading question...
                </div>

                <div class="options-grid" id="options-container">
                    <!-- Options injected here -->
                </div>

                <div id="explanation-area">
                    <div class="teacher-avatar"><i class="fas fa-chalkboard-teacher"></i></div>
                    <div>
                        <span class="exp-title">C√¥ Mai An gi·∫£i th√≠ch:</span>
                        <div class="exp-content" id="explanation-text"></div>
                    </div>
                </div>
            </div>

            <button class="nav-btn" id="next-btn" onclick="nextQuestion()">C√¢u Ti·∫øp Theo <i class="fas fa-arrow-right"></i></button>
            <button class="nav-btn" id="finish-btn" onclick="showResults()" style="background-color: var(--secondary); box-shadow: 0 6px 0 var(--secondary-dark);">Xem K·∫øt Qu·∫£ <i class="fas fa-trophy"></i></button>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="card">
            <h1 style="margin-bottom: 30px;">T·ªïng K·∫øt ƒêi·ªÉm</h1>
            <div class="score-circle">
                <span id="final-score">0</span>
            </div>
            <div class="message" id="final-message">L√†m t·ªët l·∫Øm!</div>
            <p style="font-size: 1.1rem; color: #57606f;">S·ªë c√¢u ƒë√∫ng: <span id="correct-count">0</span> / 30</p>
            <button class="nav-btn" style="display: block;" onclick="location.reload()">L√†m L·∫°i B√†i <i class="fas fa-redo"></i></button>
        </div>

        <div class="footer">
            Designed with <i class="fas fa-heart" style="color: var(--wrong);"></i> by Ms Mai An
        </div>
    </div>

    <!-- Audio Elements (Base64 for single file portability) -->
    <!-- Sound effect: Ding (Correct) -->
    <audio id="sound-correct" src="data:audio/mp3;base64,//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"></audio>
    
    <!-- Sound effect: Buzz (Wrong) -->
    <audio id="sound-wrong" src="data:audio/mp3;base64,//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"></audio>

    <script>
        // --- DATA SOURCE (From User Context) ---
        const quizData = [
            {
                q: "While I _____ (build) a sandcastle, the waves _____ (hit) it.",
                options: ["was building / hit", "built / hit", "was building / was hitting", "built / was hitting"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was building / hit: ƒëang x√¢y / ƒë√°nh v√†o (l√†m h·ªèng)\nB. built / hit: ƒë√£ x√¢y / ƒë√£ ƒë√°nh\nC. was building / was hitting: ƒëang x√¢y / ƒëang ƒë√°nh\nD. built / was hitting: ƒë√£ x√¢y / ƒëang ƒë√°nh\n\nGi·∫£i th√≠ch: X√¢y l√¢u ƒë√†i c√°t l√† h√†nh ƒë·ªông d√†i (ƒëang l√†m t·ªâ m·ªâ) -> Was building. S√≥ng bi·ªÉn ·∫≠p v√†o (B√πm! L√†m h·ªèng lu√¥n) l√† h√†nh ƒë·ªông ng·∫Øn -> Hit (qu√° kh·ª© v·∫´n l√† hit).\n\nD·ªãch c√¢u: Trong khi t·ªõ ƒëang x√¢y l√¢u ƒë√†i c√°t th√¨ nh·ªØng con s√≥ng ·∫≠p v√†o ƒë√°nh s·∫≠p n√≥."
            },
            {
                q: "We _____ (have) a picnic when the ants _____ (come).",
                options: ["were having / came", "had / came", "were having / were coming", "had / were coming"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were having / came: ƒëang ƒÉn d√£ ngo·∫°i / ƒë·∫øn\nB. had / came: ƒë√£ ƒÉn / ƒë·∫øn\nC. were having / were coming: ƒëang ƒÉn / ƒëang ƒë·∫øn\nD. had / were coming: ƒë√£ ƒÉn / ƒëang ƒë·∫øn\n\nGi·∫£i th√≠ch: C·∫£ nh√† ƒëang vui v·∫ª ƒÉn u·ªëng (h√†nh ƒë·ªông d√†i) -> Were having. ƒê√†n ki·∫øn k√©o ƒë·∫øn (chen ngang cu·ªôc vui) -> Came.\n\nD·ªãch c√¢u: Ch√∫ng t·ªõ ƒëang ƒëi d√£ ngo·∫°i th√¨ ƒë√†n ki·∫øn k√©o ƒë·∫øn."
            },
            {
                q: "While the teacher _____ (write) on the board, the students _____ (copy).",
                options: ["was writing / were copying", "wrote / copied", "was writing / copied", "wrote / were copying"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was writing / were copying: ƒëang vi·∫øt / ƒëang ch√©p b√†i\nB. wrote / copied: ƒë√£ vi·∫øt / ƒë√£ ch√©p\nC. was writing / copied: ƒëang vi·∫øt / ƒë√£ ch√©p\nD. wrote / were copying: ƒë√£ vi·∫øt / ƒëang ch√©p\n\nGi·∫£i th√≠ch: Song song: C√¥ vi·∫øt b·∫£ng, tr√≤ ch√©p b√†i. C·∫£ hai c√πng di·ªÖn ra. Teacher (s·ªë √≠t) -> was writing. Students (s·ªë nhi·ªÅu) -> were copying.\n\nD·ªãch c√¢u: Trong khi c√¥ gi√°o ƒëang vi·∫øt l√™n b·∫£ng th√¨ h·ªçc sinh ƒëang ch√©p b√†i."
            },
            {
                q: "I _____ (dream) a nice dream when the alarm clock _____ (ring).",
                options: ["was dreaming / rang", "dreamed / rang", "was dreaming / was ringing", "dreamed / was ringing"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was dreaming / rang: ƒëang m∆° / reo\nB. dreamed / rang: ƒë√£ m∆° / ƒë√£ reo\nC. was dreaming / was ringing: ƒëang m∆° / ƒëang reo\nD. dreamed / was ringing: ƒë√£ m∆° / ƒëang reo\n\nGi·∫£i th√≠ch: M∆° ƒë·∫πp l√† h√†nh ƒë·ªông d√†i -> Was dreaming. Chu√¥ng reo (B·ª•p!) ƒë√°nh th·ª©c d·∫≠y -> Rang.\n\nD·ªãch c√¢u: T·ªõ ƒëang m∆° m·ªôt gi·∫•c m∆° ƒë·∫πp th√¨ ƒë·ªìng h·ªì b√°o th·ª©c reo."
            },
            {
                q: "My sister _____ (feed) the cat while I _____ (water) the flowers.",
                options: ["was feeding / was watering", "fed / watered", "was feeding / watered", "fed / was watering"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was feeding / was watering: ƒëang cho ƒÉn / ƒëang t∆∞·ªõi c√¢y\nB. fed / watered: ƒë√£ cho ƒÉn / ƒë√£ t∆∞·ªõi\nC. was feeding / watered: ƒëang cho ƒÉn / ƒë√£ t∆∞·ªõi\nD. fed / was watering: ƒë√£ cho ƒÉn / ƒëang t∆∞·ªõi\n\nGi·∫£i th√≠ch: Song song: Ch·ªã cho m√®o ƒÉn, t·ªõ t∆∞·ªõi hoa. Hai vi·ªác c√πng l√†m trong v∆∞·ªùn. -> C·∫£ hai d√πng Was V-ing.\n\nD·ªãch c√¢u: Ch·ªã t·ªõ ƒëang cho m√®o ƒÉn trong khi t·ªõ ƒëang t∆∞·ªõi hoa."
            },
            {
                q: "What _____ (you / do) when the monster _____ (appear) in the movie?",
                options: ["were you doing / appeared", "did you do / appeared", "were you doing / appears", "do you do / appeared"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were you doing / appeared: b·∫°n ƒëang l√†m g√¨ / xu·∫•t hi·ªán\nB. did you do / appeared: b·∫°n ƒë√£ l√†m g√¨ / xu·∫•t hi·ªán\nC. were you doing / appears: b·∫°n ƒëang l√†m g√¨ / xu·∫•t hi·ªán (hi·ªán t·∫°i)\nD. do you do / appeared: b·∫°n l√†m g√¨ / xu·∫•t hi·ªán\n\nGi·∫£i th√≠ch: H√†nh ƒë·ªông 'qu√°i v·∫≠t xu·∫•t hi·ªán' l√† h√†nh ƒë·ªông ng·∫Øn, chen ngang c·∫£m x√∫c. L√∫c ƒë√≥ b·∫°n ƒëang l√†m g√¨ (che m·∫Øt, la h√©t...)? -> Were you doing / appeared.\n\nD·ªãch c√¢u: B·∫°n ƒëang l√†m g√¨ khi con qu√°i v·∫≠t xu·∫•t hi·ªán trong phim?"
            },
            {
                q: "I _____ (ride) my bike when I _____ (fall) off.",
                options: ["was riding / fell", "rode / fell", "was riding / fall", "rode / was falling"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was riding / fell: ƒëang ƒë·∫°p xe / ng√£\nB. rode / fell: ƒë√£ ƒë·∫°p / ƒë√£ ng√£\nC. was riding / fall: ƒëang ƒë·∫°p / ng√£ (hi·ªán t·∫°i)\nD. rode / was falling: ƒë√£ ƒë·∫°p / ƒëang ng√£\n\nGi·∫£i th√≠ch: ƒê·∫°p xe l√† h√†nh ƒë·ªông d√†i -> Was riding. B·ªã ng√£ (B·ªãch!) l√† h√†nh ƒë·ªông ng·∫Øn -> Fell (qu√° kh·ª© c·ªßa fall).\n\nD·ªãch c√¢u: T·ªõ ƒëang ƒë·∫°p xe th√¨ b·ªã ng√£."
            },
            {
                q: "While the bird _____ (fly), it _____ (see) a worm.",
                options: ["was flying / saw", "flew / saw", "was flying / was seeing", "flew / was seeing"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was flying / saw: ƒëang bay / nh√¨n th·∫•y\nB. flew / saw: ƒë√£ bay / ƒë√£ th·∫•y\nC. was flying / was seeing: ƒëang bay / ƒëang th·∫•y\nD. flew / was seeing: ƒë√£ bay / ƒëang th·∫•y\n\nGi·∫£i th√≠ch: Chim ƒëang bay (d√†i) -> Was flying. Nh√¨n th·∫•y con s√¢u (ng·∫Øn) -> Saw.\n\nD·ªãch c√¢u: Trong khi ch√∫ chim ƒëang bay th√¨ n√≥ nh√¨n th·∫•y m·ªôt con s√¢u."
            },
            {
                q: "_____ it _____ (snow) at 5 o'clock yesterday?",
                options: ["Was / snowing", "Did / snow", "Were / snowing", "Does / snow"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. Was / snowing: C√≥ ƒëang tuy·∫øt r∆°i kh√¥ng\nB. Did / snow: ƒê√£ tuy·∫øt r∆°i ph·∫£i kh√¥ng\nC. Were / snowing: C√≥ ƒëang tuy·∫øt r∆°i kh√¥ng\nD. Does / snow: C√≥ tuy·∫øt r∆°i kh√¥ng\n\nGi·∫£i th√≠ch: Gi·ªù c·ª• th·ªÉ 5 o'clock yesterday -> Qu√° kh·ª© ti·∫øp di·ªÖn. Ch·ªß ng·ªØ It (s·ªë √≠t) -> Was.\n\nD·ªãch c√¢u: Tr·ªùi c√≥ ƒëang r∆°i tuy·∫øt l√∫c 5 gi·ªù h√¥m qua kh√¥ng?"
            },
            {
                q: "The baby _____ (cry) while Mom _____ (make) milk.",
                options: ["was crying / was making", "cried / made", "was crying / made", "cried / was making"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was crying / was making: ƒëang kh√≥c / ƒëang pha\nB. cried / made: ƒë√£ kh√≥c / ƒë√£ pha\nC. was crying / made: ƒëang kh√≥c / ƒë√£ pha\nD. cried / was making: ƒë√£ kh√≥c / ƒëang pha\n\nGi·∫£i th√≠ch: Song song: Em b√© kh√≥c, m·∫π pha s·ªØa. C·∫£ hai c√πng di·ªÖn ra l√∫c ƒë√≥. -> C·∫£ hai d√πng Was V-ing.\n\nD·ªãch c√¢u: Em b√© ƒëang kh√≥c trong khi m·∫π ƒëang pha s·ªØa."
            },
            {
                q: "We _____ (clean) the beach when we _____ (find) a big shell.",
                options: ["were cleaning / found", "cleaned / found", "were cleaning / find", "cleaned / were finding"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were cleaning / found: ƒëang d·ªçn d·∫πp / t√¨m th·∫•y\nB. cleaned / found: ƒë√£ d·ªçn / ƒë√£ th·∫•y\nC. were cleaning / find: ƒëang d·ªçn / th·∫•y (hi·ªán t·∫°i)\nD. cleaned / were finding: ƒë√£ d·ªçn / ƒëang t√¨m\n\nGi·∫£i th√≠ch: D·ªçn b√£i bi·ªÉn l√† h√†nh ƒë·ªông d√†i -> Were cleaning. T√¨m th·∫•y v·ªè ·ªëc (b·∫•t ng·ªù) l√† h√†nh ƒë·ªông ng·∫Øn -> Found (qu√° kh·ª© c·ªßa find).\n\nD·ªãch c√¢u: Ch√∫ng t·ªõ ƒëang d·ªçn d·∫πp b√£i bi·ªÉn th√¨ t√¨m th·∫•y m·ªôt c√°i v·ªè ·ªëc l·ªõn."
            },
            {
                q: "I _____ (look) for my bag when I _____ (find) some money.",
                options: ["was looking / found", "looked / found", "was looking / was finding", "looked / was finding"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was looking / found: ƒëang t√¨m / t√¨m th·∫•y\nB. looked / found: ƒë√£ t√¨m / ƒë√£ th·∫•y\nC. was looking / was finding: ƒëang t√¨m / ƒëang th·∫•y\nD. looked / was finding: ƒë√£ t√¨m / ƒëang th·∫•y\n\nGi·∫£i th√≠ch: ƒêang l·ª•c l·ªçi t√¨m c·∫∑p (d√†i) -> Was looking. Th·∫•y ti·ªÅn (ng·∫Øn, may m·∫Øn) -> Found.\n\nD·ªãch c√¢u: T·ªõ ƒëang t√¨m c·∫∑p s√°ch th√¨ th·∫•y √≠t ti·ªÅn."
            },
            {
                q: "While they _____ (sing), the teacher _____ (play) the guitar.",
                options: ["were singing / was playing", "sang / played", "were singing / played", "sang / was playing"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were singing / was playing: ƒëang h√°t / ƒëang ƒë√†n\nB. sang / played: ƒë√£ h√°t / ƒë√£ ƒë√†n\nC. were singing / played: ƒëang h√°t / ƒë√£ ƒë√†n\nD. sang / was playing: ƒë√£ h√°t / ƒëang ƒë√†n\n\nGi·∫£i th√≠ch: Song song: H·ªçc sinh h√°t, th·∫ßy ƒë√†n. C·∫£ hai h√≤a nh·ªãp c√πng nhau -> C·∫£ hai d√πng Was/Were V-ing.\n\nD·ªãch c√¢u: Trong khi h·ªç ƒëang h√°t th√¨ th·∫ßy gi√°o ƒëang ch∆°i ƒë√†n ghi-ta."
            },
            {
                q: "They _____ (skate) in the park at 4 p.m yesterday.",
                options: ["were skating", "skated", "was skating", "are skating"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were skating: ƒëang tr∆∞·ª£t pa-tin\nB. skated: ƒë√£ tr∆∞·ª£t\nC. was skating: ƒëang tr∆∞·ª£t\nD. are skating: ƒëang tr∆∞·ª£t (hi·ªán t·∫°i)\n\nGi·∫£i th√≠ch: Gi·ªù c·ª• th·ªÉ 4 p.m -> Qu√° kh·ª© ti·∫øp di·ªÖn. They (s·ªë nhi·ªÅu) -> Were skating.\n\nD·ªãch c√¢u: H·ªç ƒëang tr∆∞·ª£t pa-tin trong c√¥ng vi√™n l√∫c 4 gi·ªù chi·ªÅu h√¥m qua."
            },
            {
                q: "He _____ (swim) in the pool at 10 a.m last Sunday.",
                options: ["was swimming", "swam", "were swimming", "swims"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was swimming: ƒëang b∆°i\nB. swam: ƒë√£ b∆°i\nC. were swimming: ƒëang b∆°i\nD. swims: b∆°i\n\nGi·∫£i th√≠ch: Gi·ªù c·ª• th·ªÉ 10 a.m -> Qu√° kh·ª© ti·∫øp di·ªÖn. He (s·ªë √≠t) -> Was swimming.\n\nD·ªãch c√¢u: C·∫≠u ·∫•y ƒëang b∆°i trong h·ªì l√∫c 10 gi·ªù s√°ng Ch·ªß nh·∫≠t tu·∫ßn tr∆∞·ªõc."
            },
            {
                q: "We _____ (make) a snowman when the sun _____ (come) out.",
                options: ["were making / came", "made / came", "were making / was coming", "made / was coming"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were making / came: ƒëang l√†m / hi·ªán ra\nB. made / came: ƒë√£ l√†m / hi·ªán ra\nC. were making / was coming: ƒëang l√†m / ƒëang hi·ªán ra\nD. made / was coming: ƒë√£ l√†m / ƒëang hi·ªán ra\n\nGi·∫£i th√≠ch: ƒêang ƒë·∫Øp ng∆∞·ªùi tuy·∫øt (d√†i) -> Were making. M·∫∑t tr·ªùi hi·ªán ra (ng·∫Øn, l√†m tan tuy·∫øt) -> Came out.\n\nD·ªãch c√¢u: Ch√∫ng t·ªõ ƒëang ƒë·∫Øp ng∆∞·ªùi tuy·∫øt th√¨ m·∫∑t tr·ªùi hi·ªán ra."
            },
            {
                q: "She _____ (not/wear) a hat when I _____ (meet) her.",
                options: ["wasn't wearing / met", "didn't wear / met", "wasn't wearing / meet", "didn't wear / was meeting"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. wasn't wearing / met: kh√¥ng ƒëang ƒë·ªôi / g·∫∑p\nB. didn't wear / met: kh√¥ng ƒë·ªôi / g·∫∑p\nC. wasn't wearing / meet: kh√¥ng ƒëang ƒë·ªôi / g·∫∑p (hi·ªán t·∫°i)\nD. didn't wear / was meeting: kh√¥ng ƒë·ªôi / ƒëang g·∫∑p\n\nGi·∫£i th√≠ch: M√¥ t·∫£ trang ph·ª•c l√∫c g·∫∑p: C√¥ ·∫•y ƒëang KH√îNG ƒë·ªôi m≈© (d√†i/n·ªÅn). G·∫∑p (ng·∫Øn) -> Met.\n\nD·ªãch c√¢u: C√¥ ·∫•y kh√¥ng ƒëang ƒë·ªôi m≈© khi t·ªõ g·∫∑p c√¥ ·∫•y."
            },
            {
                q: "_____ you _____ (listen) to music at 9 p.m?",
                options: ["Were / listening", "Did / listen", "Was / listening", "Do / listen"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. Were / listening: C√≥ ƒëang nghe kh√¥ng\nB. Did / listen: ƒê√£ nghe ph·∫£i kh√¥ng\nC. Was / listening: C√≥ ƒëang nghe kh√¥ng\nD. Do / listen: C√≥ nghe kh√¥ng\n\nGi·∫£i th√≠ch: Gi·ªù c·ª• th·ªÉ 9 p.m -> Were you listening.\n\nD·ªãch c√¢u: B·∫°n c√≥ ƒëang nghe nh·∫°c l√∫c 9 gi·ªù t·ªëi kh√¥ng?"
            },
            {
                q: "The lights _____ (go) out while we _____ (read) stories.",
                options: ["went / were reading", "was going / read", "went / read", "goes / were reading"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. went / were reading: t·∫Øt (m·∫•t ƒëi·ªán) / ƒëang ƒë·ªçc\nB. was going / read: ƒëang t·∫Øt / ƒë√£ ƒë·ªçc\nC. went / read: t·∫Øt / ƒë√£ ƒë·ªçc\nD. goes / were reading: t·∫Øt / ƒëang ƒë·ªçc\n\nGi·∫£i th√≠ch: ƒêang ƒë·ªçc truy·ªán (d√†i) -> Were reading. ƒê√®n t·∫Øt (ng·∫Øn) -> Went out.\n\nD·ªãch c√¢u: ƒê√®n t·∫Øt trong khi ch√∫ng t·ªõ ƒëang ƒë·ªçc truy·ªán."
            },
            {
                q: "My brother _____ (break) his toy while he _____ (play).",
                options: ["broke / was playing", "was breaking / played", "broke / played", "break / was playing"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. broke / was playing: l√†m g√£y / ƒëang ch∆°i\nB. was breaking / played: ƒëang g√£y / ƒë√£ ch∆°i\nC. broke / played: ƒë√£ g√£y / ƒë√£ ch∆°i\nD. break / was playing: g√£y / ƒëang ch∆°i\n\nGi·∫£i th√≠ch: ƒêang ch∆°i (d√†i) -> Was playing. L√†m g√£y ƒë·ªì ch∆°i (R·∫Øc! Ng·∫Øn) -> Broke.\n\nD·ªãch c√¢u: Em trai t·ªõ l√†m g√£y ƒë·ªì ch∆°i trong khi ƒëang ch∆°i."
            },
            {
                q: "While I _____ (wait) for the bus, it _____ (start) to rain.",
                options: ["was waiting / started", "waited / started", "was waiting / was starting", "waited / was starting"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was waiting / started: ƒëang ch·ªù / b·∫Øt ƒë·∫ßu\nB. waited / started: ƒë√£ ch·ªù / b·∫Øt ƒë·∫ßu\nC. was waiting / was starting: ƒëang ch·ªù / ƒëang b·∫Øt ƒë·∫ßu\nD. waited / was starting: ƒë√£ ch·ªù / ƒëang b·∫Øt ƒë·∫ßu\n\nGi·∫£i th√≠ch: ƒêang ch·ªù xe (d√†i) -> Was waiting. Tr·ªùi b·∫Øt ƒë·∫ßu m∆∞a (ng·∫Øn) -> Started.\n\nD·ªãch c√¢u: Trong khi t·ªõ ƒëang ch·ªù xe bu√Ωt th√¨ tr·ªùi b·∫Øt ƒë·∫ßu m∆∞a."
            },
            {
                q: "The monkeys _____ (eat) bananas while the lions _____ (sleep).",
                options: ["were eating / were sleeping", "ate / slept", "were eating / slept", "ate / were sleeping"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were eating / were sleeping: ƒëang ƒÉn / ƒëang ng·ªß\nB. ate / slept: ƒë√£ ƒÉn / ƒë√£ ng·ªß\nC. were eating / slept: ƒëang ƒÉn / ƒë√£ ng·ªß\nD. ate / were sleeping: ƒë√£ ƒÉn / ƒëang ng·ªß\n\nGi·∫£i th√≠ch: Song song trong s·ªü th√∫: Kh·ªâ ƒÉn chu·ªëi, S∆∞ t·ª≠ ng·ªß. C·∫£ hai ƒë·ªÅu d√πng Were V-ing.\n\nD·ªãch c√¢u: Nh·ªØng ch√∫ kh·ªâ ƒëang ƒÉn chu·ªëi trong khi nh·ªØng ch√∫ s∆∞ t·ª≠ ƒëang ng·ªß."
            },
            {
                q: "She _____ (cut) her finger while she _____ (cook).",
                options: ["cut / was cooking", "was cutting / cooked", "cut / cooked", "cuts / was cooking"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. cut / was cooking: ƒë·ª©t tay / ƒëang n·∫•u\nB. was cutting / cooked: ƒëang ƒë·ª©t / ƒë√£ n·∫•u\nC. cut / cooked: ƒë·ª©t / ƒë√£ n·∫•u\nD. cuts / was cooking: ƒë·ª©t / ƒëang n·∫•u\n\nGi·∫£i th√≠ch: ƒêang n·∫•u ƒÉn (d√†i) -> Was cooking. B·ªã ƒë·ª©t tay (ƒëau qu√°! Ng·∫Øn) -> Cut (qu√° kh·ª© c·ªßa cut v·∫´n l√† cut).\n\nD·ªãch c√¢u: C√¥ ·∫•y b·ªã ƒë·ª©t tay trong khi ƒëang n·∫•u ƒÉn."
            },
            {
                q: "What _____ (Mom / do) at this time yesterday?",
                options: ["was Mom doing", "did Mom do", "were Mom doing", "is Mom doing"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was Mom doing: m·∫π ƒëang l√†m g√¨\nB. did Mom do: m·∫π ƒë√£ l√†m g√¨\nC. were Mom doing: m·∫π ƒëang l√†m g√¨\nD. is Mom doing: m·∫π ƒëang l√†m g√¨\n\nGi·∫£i th√≠ch: C·ª•m t·ª´ 'at this time yesterday' (v√†o gi·ªù n√†y h√¥m qua) -> Qu√° kh·ª© ti·∫øp di·ªÖn. Mom (s·ªë √≠t) -> Was Mom doing.\n\nD·ªãch c√¢u: M·∫π ƒëang l√†m g√¨ v√†o gi·ªù n√†y h√¥m qua?"
            },
            {
                q: "Who _____ (you / talk) to when I _____ (see) you?",
                options: ["were you talking / saw", "did you talk / saw", "were you talking / see", "did you talk / was seeing"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. were you talking / saw: b·∫°n ƒëang n√≥i chuy·ªán / nh√¨n th·∫•y\nB. did you talk / saw: b·∫°n ƒë√£ n√≥i chuy·ªán / ƒë√£ th·∫•y\nC. were you talking / see: b·∫°n ƒëang n√≥i chuy·ªán / th·∫•y (hi·ªán t·∫°i)\nD. did you talk / was seeing: b·∫°n ƒë√£ n√≥i chuy·ªán / ƒëang th·∫•y\n\nGi·∫£i th√≠ch: L√∫c t·ªõ nh√¨n th·∫•y b·∫°n (ng·∫Øn -> saw), b·∫°n ƒëang n√≥i chuy·ªán v·ªõi ai (d√†i -> were talking)?\n\nD·ªãch c√¢u: B·∫°n ƒëang n√≥i chuy·ªán v·ªõi ai khi t·ªõ nh√¨n th·∫•y b·∫°n v·∫≠y?"
            },
            {
                q: "It _____ (not/rain) when we _____ (leave) school.",
                options: ["wasn't raining / left", "didn't rain / left", "wasn't raining / leave", "didn't rain / were leaving"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. wasn't raining / left: kh√¥ng ƒëang m∆∞a / r·ªùi kh·ªèi\nB. didn't rain / left: kh√¥ng m∆∞a / r·ªùi kh·ªèi\nC. wasn't raining / leave: kh√¥ng ƒëang m∆∞a / r·ªùi (hi·ªán t·∫°i)\nD. didn't rain / were leaving: kh√¥ng m∆∞a / ƒëang r·ªùi\n\nGi·∫£i th√≠ch: M√¥ t·∫£ th·ªùi ti·∫øt 'kh√¥ng ƒëang m∆∞a' (d√†i). R·ªùi tr∆∞·ªùng (ng·∫Øn) -> Left (qu√° kh·ª© c·ªßa leave).\n\nD·ªãch c√¢u: Tr·ªùi kh√¥ng ƒëang m∆∞a khi ch√∫ng t·ªõ r·ªùi tr∆∞·ªùng."
            },
            {
                q: "While Santa _____ (climb) down the chimney, he _____ (get) stuck.",
                options: ["was climbing / got", "climbed / got", "was climbing / was getting", "climbed / was getting"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was climbing / got: ƒëang leo / b·ªã k·∫πt\nB. climbed / got: ƒë√£ leo / ƒë√£ k·∫πt\nC. was climbing / was getting: ƒëang leo / ƒëang k·∫πt\nD. climbed / was getting: ƒë√£ leo / ƒëang k·∫πt\n\nGi·∫£i th√≠ch: √îng gi√† Noel ƒëang leo (d√†i) -> Was climbing. B·ªã k·∫πt l·∫°i (ng·∫Øn, s·ª± c·ªë) -> Got stuck.\n\nD·ªãch c√¢u: Trong khi √¥ng gi√† Noel ƒëang leo xu·ªëng ·ªëng kh√≥i th√¨ √¥ng b·ªã k·∫πt."
            },
            {
                q: "I _____ (chase) a butterfly when I _____ (trip).",
                options: ["was chasing / tripped", "chased / tripped", "was chasing / trip", "chased / was tripping"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was chasing / tripped: ƒëang ƒëu·ªïi theo / v·∫•p ng√£\nB. chased / tripped: ƒë√£ ƒëu·ªïi / ƒë√£ v·∫•p\nC. was chasing / trip: ƒëang ƒëu·ªïi / v·∫•p (hi·ªán t·∫°i)\nD. chased / was tripping: ƒë√£ ƒëu·ªïi / ƒëang v·∫•p\n\nGi·∫£i th√≠ch: ƒêang m·∫£i ƒëu·ªïi theo b∆∞·ªõm (d√†i) -> Was chasing. V·∫•p ch√¢n ng√£ (ng·∫Øn) -> Tripped.\n\nD·ªãch c√¢u: T·ªõ ƒëang ƒëu·ªïi theo con b∆∞·ªõm th√¨ b·ªã v·∫•p ng√£."
            },
            {
                q: "I _____ (not/watch) TV when you _____ (arrive).",
                options: ["wasn't watching / arrived", "didn't watch / arrived", "wasn't watching / arrive", "didn't watch / was arriving"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. wasn't watching / arrived: kh√¥ng ƒëang xem / ƒë·∫øn\nB. didn't watch / arrived: kh√¥ng xem / ƒë·∫øn\nC. wasn't watching / arrive: kh√¥ng ƒëang xem / ƒë·∫øn (hi·ªán t·∫°i)\nD. didn't watch / was arriving: kh√¥ng xem / ƒëang ƒë·∫øn\n\nGi·∫£i th√≠ch: Ph·ªß ƒë·ªãnh h√†nh ƒë·ªông d√†i: T·ªõ KH√îNG ƒëang xem TV l√∫c ƒë√≥. B·∫°n ƒë·∫øn (ng·∫Øn) -> Arrived.\n\nD·ªãch c√¢u: T·ªõ kh√¥ng ƒëang xem TV khi b·∫°n ƒë·∫øn."
            },
            {
                q: "While the cat _____ (sleep), the dog _____ (bark).",
                options: ["was sleeping / was barking", "slept / barked", "was sleeping / barked", "slept / was barking"],
                correct: 0,
                rationale: "D·ªãch chi ti·∫øt:\nA. was sleeping / was barking: ƒëang ng·ªß / ƒëang s·ªßa\nB. slept / barked: ƒë√£ ng·ªß / ƒë√£ s·ªßa\nC. was sleeping / barked: ƒëang ng·ªß / ƒë√£ s·ªßa\nD. slept / was barking: ƒë√£ ng·ªß / ƒëang s·ªßa\n\nGi·∫£i th√≠ch: Song song: M√®o ng·ªß, Ch√≥ s·ªßa. Hai con v·∫≠t l√†m hai vi·ªác c√πng l√∫c. -> C·∫£ hai d√πng Was V-ing.\n\nD·ªãch c√¢u: Trong khi con m√®o ƒëang ng·ªß th√¨ con ch√≥ ƒëang s·ªßa."
            }
        ];

        // --- GAME LOGIC ---
        let currentQuestion = 0;
        let score = 0;
        const totalQuestions = quizData.length;

        // Sound effects
        const soundDing = new Audio("https://actions.google.com/sounds/v1/cartoon/clank_car_crash.ogg"); // Fallback URL, real one is base64 above but let's just reference IDs
        // Actually, let's just use the elements
        function playSound(type) {
            const ding = document.getElementById('sound-correct');
            // Using a simple beep URL for buzz as base64 is tricky with length limits sometimes, but the injected base64 is robust.
            // Let's use the Base64 elements.
            if(type === 'correct') {
                document.getElementById('sound-correct').currentTime = 0;
                document.getElementById('sound-correct').play().catch(e => console.log(e));
            } else {
                document.getElementById('sound-wrong').currentTime = 0;
                document.getElementById('sound-wrong').play().catch(e => console.log(e));
            }
        }

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            loadQuestion();
        }

        function loadQuestion() {
            const data = quizData[currentQuestion];
            
            // Update Header
            document.getElementById('current-q-num').innerText = currentQuestion + 1;
            document.getElementById('progress-bar').style.width = ((currentQuestion) / totalQuestions * 100) + "%";

            // Update Text
            document.getElementById('question-text').innerText = data.q;

            // Generate Options
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            data.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.onclick = () => checkAnswer(index, btn);
                btn.innerHTML = `
                    <div class="option-circle">${String.fromCharCode(65 + index)}</div>
                    <span>${opt}</span>
                `;
                optionsContainer.appendChild(btn);
            });

            // Reset UI
            document.getElementById('explanation-area').style.display = 'none';
            document.getElementById('explanation-area').className = ''; // Remove error class
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'none';
        }

        function checkAnswer(selectedIndex, btnElement) {
            const data = quizData[currentQuestion];
            const allBtns = document.querySelectorAll('.option-btn');
            
            // Disable all buttons
            allBtns.forEach(btn => btn.disabled = true);

            if (selectedIndex === data.correct) {
                // Correct
                btnElement.classList.add('correct');
                score++;
                playSound('correct');
                triggerConfetti();
                document.getElementById('explanation-area').classList.remove('incorrect-context');
            } else {
                // Wrong
                btnElement.classList.add('wrong');
                // Highlight correct one
                allBtns[data.correct].classList.add('correct');
                playSound('wrong');
                document.getElementById('explanation-area').classList.add('incorrect-context');
            }

            // Show Explanation
            document.getElementById('explanation-text').innerText = data.rationale;
            document.getElementById('explanation-area').style.display = 'block';

            // Show Next Button
            if (currentQuestion < totalQuestions - 1) {
                document.getElementById('next-btn').style.display = 'block';
            } else {
                document.getElementById('finish-btn').style.display = 'block';
            }
            
            // Update progress bar to full for this step
            document.getElementById('progress-bar').style.width = ((currentQuestion + 1) / totalQuestions * 100) + "%";
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function showResults() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            
            // Animate Score
            const scoreEl = document.getElementById('final-score');
            const maxScore = Math.round((score / totalQuestions) * 100); // 0-100 scale or just raw score? Let's do raw.
            scoreEl.innerText = score; // Just raw number
            
            document.getElementById('correct-count').innerText = score;
            
            // Message
            const msgEl = document.getElementById('final-message');
            if (score === totalQuestions) {
                msgEl.innerText = "Tuy·ªát ƒë·ªânh! ƒê√∫ng h·∫øt r·ªìi! üèÜ";
                triggerConfetti();
            } else if (score >= totalQuestions * 0.8) {
                msgEl.innerText = "Gi·ªèi l·∫Øm! Em l√†m r·∫•t t·ªët! üåü";
            } else if (score >= totalQuestions * 0.5) {
                msgEl.innerText = "Kh√° t·ªët! C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! üí™";
            } else {
                msgEl.innerText = "ƒê·ª´ng bu·ªìn, h√£y √¥n l·∫°i b√†i nh√©! üìö";
            }
        }

        function triggerConfetti() {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#8854C0', '#00C9A7', '#FF4757']
            });
        }
    </script>
</body>
</html>
