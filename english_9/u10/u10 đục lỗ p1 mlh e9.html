<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Test - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F4F8;
            --text-color: #2D3436;
            --card-bg: #FFFFFF;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* NgƒÉn b√¥i ƒëen ƒë·ªÉ t·∫≠p trung click */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #E0F7FA;
            background-image: radial-gradient(#00C9A7 15%, transparent 16%), radial-gradient(#8854C0 15%, transparent 16%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            padding-bottom: 80px; /* Space for footer */
        }

        h1, h2, h3 {
            font-family: 'Quicksand', sans-serif;
            text-align: center;
            color: var(--primary-pink);
            text-shadow: 2px 2px 0px #fff;
        }

        .header-title {
            background: #fff;
            display: inline-block;
            padding: 10px 30px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border: 3px solid var(--primary-teal);
        }

        .teacher-badge {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            font-weight: 700;
        }

        /* --- Layout Styles --- */
        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .section-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.2);
            border: 2px solid #fff;
            position: relative;
            overflow: hidden;
        }

        .section-header {
            background: var(--primary-pink);
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 15px;
            font-weight: 800;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }

        /* --- Reading Passage Styling --- */
        .reading-passage {
            font-size: 1.1rem;
            line-height: 1.8;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid var(--primary-teal);
            margin-bottom: 20px;
            white-space: pre-wrap; /* Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng xu·ªëng d√≤ng */
        }
        
        .reading-passage strong {
            color: var(--primary-pink);
        }

        /* --- Glossary Table --- */
        .glossary-container {
            margin-top: 20px;
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .glossary-table th {
            background: var(--primary-teal);
            color: white;
            padding: 12px;
            text-align: left;
        }

        .glossary-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        
        .type-tag {
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            color: #555;
        }

        /* --- Question Card --- */
        .question-block {
            margin-bottom: 30px;
            background: #fff;
            border-radius: 15px;
            padding: 15px;
            border: 2px dashed #ddd;
        }

        .question-number {
            font-weight: 800;
            color: var(--primary-pink);
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: block;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 0 #ccc;
            position: relative;
            text-align: left;
        }

        .option-btn:hover:not(:disabled) {
            transform: scale(1.02);
            border-color: var(--primary-pink);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(5px);
            box-shadow: 0 0 0 #ccc;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-green) !important;
            color: white !important;
            border-color: #00A653 !important;
            box-shadow: 0 5px 0 #008E47 !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            color: white !important;
            border-color: #D63031 !important;
            box-shadow: 0 5px 0 #B82829 !important;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* --- Explanation Box --- */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 20px;
            background: #FFF9C4; /* Light yellow */
            border-left: 5px solid #FBC02D;
            padding: 20px;
            border-radius: 10px;
            animation: slideDown 0.4s ease-out;
        }

        .exp-header {
            font-weight: 800;
            color: #F57F17;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exp-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .exp-content p {
            margin: 5px 0;
            line-height: 1.5;
        }

        .exp-label {
            font-weight: bold;
            color: var(--primary-pink);
        }

        /* --- Footer / Result --- */
        .submit-section {
            text-align: center;
            margin-top: 40px;
        }

        .submit-btn {
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #5E328F;
            transition: transform 0.2s;
        }

        .submit-btn:active {
            transform: translateY(8px);
            box-shadow: 0 0 0 #5E328F;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Popup Score */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            border: 5px solid var(--primary-pink);
            animation: popIn 0.3s;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .score-text {
            font-size: 3rem;
            color: var(--primary-teal);
            font-weight: 800;
        }

        .comment-text {
            font-size: 1.2rem;
            margin-top: 10px;
            color: #666;
        }

    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <center>
            <div class="header-title">
                <h1>ENGLISH MASTERY CHALLENGE</h1>
                <div class="teacher-badge">Created by: Ms. Mai An ULIS</div>
            </div>
            <p style="font-weight: 600; color: #555;">Mark the letter A, B, C or D to indicate the correct option that best fits each of the numbered blanks.</p>
        </center>

        <div class="section-card" id="section-1">
            <div class="section-header">PASSAGE 1: Save Our Oceans! üåä</div>
            
            <div class="reading-passage">
Save Our Oceans!
Our oceans are (1) _______ danger! Pollution and overfishing are harming marine life.
What can you do?
Reduce plastic use ‚Äì say no to straws and (2) ______ bags!
Recycle properly and always dispose of trash responsibly. ‚ôª
Choose sustainable seafood.
Help clean up our (3) _______ beaches.
Together, we can (4) ______ a difference! ü§ù
Join us! tranbinh.com.vn
#SaveOurOceans
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Glossary (Passage 1)</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Pollution</td><td><span class="type-tag">n</span></td><td>S·ª± √¥ nhi·ªÖm</td></tr>
                    <tr><td>Overfishing</td><td><span class="type-tag">n</span></td><td>S·ª± ƒë√°nh b·∫Øt c√° qu√° m·ª©c</td></tr>
                    <tr><td>Marine life</td><td><span class="type-tag">n.phr</span></td><td>ƒê·ªùi s·ªëng sinh v·∫≠t bi·ªÉn</td></tr>
                    <tr><td>Dispose of</td><td><span class="type-tag">v.phr</span></td><td>V·ª©t b·ªè, x·ª≠ l√Ω r√°c th·∫£i</td></tr>
                    <tr><td>Sustainable</td><td><span class="type-tag">adj</span></td><td>B·ªÅn v·ªØng</td></tr>
                </table>
            </div>

            <div id="questions-area-1">
                </div>
        </div>

        <div class="section-card" id="section-2">
            <div class="section-header">PASSAGE 2: Climate Action Now! ‚òÄ‚ùÑ</div>
            
            <div class="reading-passage">
Climate Action Now!
Our planet is warming up! Extreme weather, melting ice, and rising sea levels (1) ______ us all. ‚òÄ‚ùÑ
It's time to act!
Save energy: (2) _______ lights, walk or cycle instead of driving.
Reduce, reuse, recycle: Choose products with less packaging. ‚ôª
Plant a tree: Trees absorb harmful CO2 (3) _____ the atmosphere.
Speak up: Tell your friends and family about climate change.
Every action counts! Let's work together for a (4) ______ planet.
Learn more: tranbinh.com.vn
#ClimateActionNow
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Glossary (Passage 2)</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Extreme weather</td><td><span class="type-tag">n.phr</span></td><td>Th·ªùi ti·∫øt c·ª±c ƒëoan</td></tr>
                    <tr><td>Absorb</td><td><span class="type-tag">v</span></td><td>H·∫•p th·ª•</td></tr>
                    <tr><td>Atmosphere</td><td><span class="type-tag">n</span></td><td>B·∫ßu kh√≠ quy·ªÉn</td></tr>
                    <tr><td>Packaging</td><td><span class="type-tag">n</span></td><td>Bao b√¨</td></tr>
                    <tr><td>Count</td><td><span class="type-tag">v</span></td><td>C√≥ gi√° tr·ªã, quan tr·ªçng</td></tr>
                </table>
            </div>

            <div id="questions-area-2"></div>
        </div>

        <div class="section-card" id="section-3">
            <div class="section-header">PASSAGE 3: Protect Our Planet! üåç</div>
            
            <div class="reading-passage">
Protect Our Planet!
Hello Everyone!
We are excited to announce a special event focused on environmental awareness called "Protect Our Planet!" on October 5, 2024!
üïí Time: 10:00 AM - 12:00 PM
Location: Green Park, 123 Eco Lane, Hanoi
Join us to learn about (1) __________ ways to save our planet. We will have expert (2) ______speakers sharing tips on recycling, reducing waste, and conserving energy.
Don't miss this chance to (3) __________ your voice and make a difference!
Register today (4) __________ [PlanetEarthEvents.com] secure your place!
We can‚Äôt wait to see you there!
Best,
The Eco Team
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Glossary (Passage 3)</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Environmental awareness</td><td><span class="type-tag">n.phr</span></td><td>Nh·∫≠n th·ª©c v·ªÅ m√¥i tr∆∞·ªùng</td></tr>
                    <tr><td>Expert</td><td><span class="type-tag">n/adj</span></td><td>Chuy√™n gia</td></tr>
                    <tr><td>Conserve</td><td><span class="type-tag">v</span></td><td>B·∫£o t·ªìn, ti·∫øt ki·ªám</td></tr>
                    <tr><td>Register</td><td><span class="type-tag">v</span></td><td>ƒêƒÉng k√Ω</td></tr>
                    <tr><td>Secure</td><td><span class="type-tag">v</span></td><td>ƒê·∫£m b·∫£o, gi·ªØ ch·ªó</td></tr>
                </table>
            </div>

            <div id="questions-area-3"></div>
        </div>

        <div class="submit-section">
            <button class="submit-btn" onclick="showFinalResult()">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 style="color: var(--primary-pink)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-text" id="finalScore">0/12</div>
            <p class="comment-text" id="finalComment">C·ªë g·∫Øng l√™n nh√©!</p>
            <button class="submit-btn" style="font-size: 1rem; padding: 10px 30px;" onclick="closeModal()">Xem l·∫°i b√†i</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const quizData = {
            section1: [
                {
                    id: "1-1",
                    q: "Our oceans are (1) _______ danger!",
                    options: { A: "at", B: "on", C: "in", D: "for" },
                    correct: "C",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ƒê·∫°i d∆∞∆°ng c·ªßa ch√∫ng ta ƒëang g·∫∑p nguy hi·ªÉm!</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong>
                        <br>A. at (t·∫°i)
                        <br>B. on (tr√™n)
                        <br>C. in (trong)
                        <br>D. for (cho)</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span></strong> C·ª•m t·ª´ c·ªë ƒë·ªãnh (Collocation): <strong>"in danger"</strong> = ƒëang g·∫∑p nguy hi·ªÉm.</p>
                        <p><strong><span class="exp-label">T·∫°i sao SAI:</span></strong> C√°c gi·ªõi t·ª´ kh√°c kh√¥ng ƒëi v·ªõi "danger" ƒë·ªÉ di·ªÖn t·∫£ √Ω nghƒ©a n√†y.</p>
                    `
                },
                {
                    id: "1-2",
                    q: "say no to straws and (2) ______ bags!",
                    options: { A: "single-use", B: "harmless", C: "essential", D: "best-known" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> H√£y n√≥i kh√¥ng v·ªõi ·ªëng h√∫t v√† t√∫i d√πng m·ªôt l·∫ßn!</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong>
                        <br>A. single-use (adj): d√πng m·ªôt l·∫ßn
                        <br>B. harmless (adj): v√¥ h·∫°i
                        <br>C. essential (adj): thi·∫øt y·∫øu
                        <br>D. best-known (adj): n·ªïi ti·∫øng nh·∫•t</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> D·ª±a v√†o ng·ªØ c·∫£nh "Reduce plastic use" (Gi·∫£m d√πng nh·ª±a) -> c·∫ßn tr√°nh lo·∫°i t√∫i g√¢y h·∫°i -> t√∫i d√πng 1 l·∫ßn (single-use bags).</p>
                    `
                },
                {
                    id: "1-3",
                    q: "Help clean up our (3) _______ beaches.",
                    options: { A: "the", B: "a", C: "no article", D: "an" },
                    correct: "C",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> H√£y gi√∫p l√†m s·∫°ch c√°c b√£i bi·ªÉn c·ªßa ch√∫ng ta.</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. the, B. a, C. kh√¥ng ƒëi·ªÅn, D. an</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span></strong> Tr∆∞·ªõc danh t·ª´ "beaches" ƒë√£ c√≥ t√≠nh t·ª´ s·ªü h·ªØu <strong>"our"</strong>. Trong ti·∫øng Anh, khi ƒë√£ d√πng t√≠nh t·ª´ s·ªü h·ªØu (my, your, our...) th√¨ <strong>kh√¥ng</strong> d√πng th√™m m·∫°o t·ª´ (a/an/the) n·ªØa. 
                        <br>V√≠ d·ª•: <em>My car</em> (ƒë√∫ng), <em>My the car</em> (sai).</p>
                    `
                },
                {
                    id: "1-4",
                    q: "Together, we can (4) ______ a difference!",
                    options: { A: "take", B: "do", C: "have", D: "make" },
                    correct: "D",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> C√πng nhau, ch√∫ng ta c√≥ th·ªÉ t·∫°o ra s·ª± kh√°c bi·ªát!</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. l·∫•y, B. l√†m, C. c√≥, D. t·∫°o ra</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span></strong> C·ª•m t·ª´ c·ªë ƒë·ªãnh (Collocation): <strong>"Make a difference"</strong> = T·∫°o ra s·ª± thay ƒë·ªïi t√≠ch c·ª±c/kh√°c bi·ªát.</p>
                        <p><strong><span class="exp-label">T·∫°i sao SAI:</span></strong> "Do a difference" l√† l·ªói sai ph·ªï bi·∫øn c·ªßa ng∆∞·ªùi Vi·ªát, trong ti·∫øng Anh ph·∫£i d√πng "Make".</p>
                    `
                }
            ],
            section2: [
                {
                    id: "2-1",
                    q: "Extreme weather... and rising sea levels (1) ______ us all.",
                    options: { A: "already affected", B: "have already affected", C: "are already affecting", D: "was already affecting" },
                    correct: "C",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Th·ªùi ti·∫øt c·ª±c ƒëoan... v√† m·ª±c n∆∞·ªõc bi·ªÉn d√¢ng cao ƒëang ·∫£nh h∆∞·ªüng ƒë·∫øn t·∫•t c·∫£ ch√∫ng ta.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span></strong> C√¢u tr∆∞·ªõc "Our planet is warming up!" (ƒëang n√≥ng l√™n) d√πng th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn ƒë·ªÉ m√¥ t·∫£ t√¨nh tr·∫°ng ƒëang x·∫£y ra. Do ƒë√≥, h√†nh ƒë·ªông "·∫£nh h∆∞·ªüng" c≈©ng ƒëang di·ªÖn ra ngay l√∫c n√†y -> D√πng <strong>Present Continuous (are already affecting)</strong>.</p>
                        <p><strong><span class="exp-label">T·∫°i sao SAI:</span></strong>
                        <br>A. Thi·∫øu ƒë·ªông t·ª´ tobe ho·∫∑c tr·ª£ t·ª´.
                        <br>B. Hi·ªán t·∫°i ho√†n th√†nh (nh·∫•n m·∫°nh k·∫øt qu·∫£), nh∆∞ng ·ªü ƒë√¢y nh·∫•n m·∫°nh qu√° tr√¨nh ƒëang ti·∫øp di·ªÖn.
                        <br>D. Qu√° kh·ª© ti·∫øp di·ªÖn (kh√¥ng ph√π h·ª£p ng·ªØ c·∫£nh hi·ªán t·∫°i).</p>
                    `
                },
                {
                    id: "2-2",
                    q: "Save energy: (2) _______ lights...",
                    options: { A: "take out", B: "look for", C: "clean up", D: "turn off" },
                    correct: "D",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng: t·∫Øt ƒë√®n, ƒëi b·ªô ho·∫∑c ƒë·∫°p xe...</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong>
                        <br>A. Take out: v·ª©t r√°c / mang ra ngo√†i
                        <br>B. Look for: t√¨m ki·∫øm
                        <br>C. Clean up: d·ªçn d·∫πp
                        <br>D. Turn off: t·∫Øt (thi·∫øt b·ªã ƒëi·ªán)</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span></strong> ƒê·ªÉ ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng (Save energy) th√¨ h√†nh ƒë·ªông ph√π h·ª£p nh·∫•t l√† "t·∫Øt ƒë√®n".</p>
                    `
                },
                {
                    id: "2-3",
                    q: "Trees absorb harmful CO2 (3) _____ the atmosphere.",
                    options: { A: "about", B: "from", C: "in", D: "of" },
                    correct: "B",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> C√¢y xanh h·∫•p th·ª• kh√≠ CO2 ƒë·ªôc h·∫°i t·ª´ b·∫ßu kh√≠ quy·ªÉn.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span></strong> C·∫•u tr√∫c <strong>"Absorb STH from STH"</strong> = H·∫•p th·ª• c√°i g√¨ T·ª™ ƒë√¢u. C√¢y l·∫•y CO2 T·ª™ kh√¥ng kh√≠ v√†o.</p>
                        <p><strong><span class="exp-label">T·∫°i sao SAI:</span></strong> "Absorb in" th∆∞·ªùng d√πng cho nghƒ©a tr·ª´u t∆∞·ª£ng (m·∫£i m√™), kh√¥ng d√πng cho v·∫≠t l√Ω trong ng·ªØ c·∫£nh n√†y.</p>
                    `
                },
                {
                    id: "2-4",
                    q: "Let's work together for a (4) ______ planet.",
                    options: { A: "healthily", B: "healthy", C: "health", D: "unhealthy" },
                    correct: "B",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> H√£y c√πng nhau h√†nh ƒë·ªông v√¨ m·ªôt h√†nh tinh kh·ªèe m·∫°nh.</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong>
                        <br>A. healthily (adv): m·ªôt c√°ch kh·ªèe m·∫°nh
                        <br>B. healthy (adj): kh·ªèe m·∫°nh
                        <br>C. health (n): s·ª©c kh·ªèe
                        <br>D. unhealthy (adj): kh√¥ng kh·ªèe m·∫°nh</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span></strong> Ch·ªó tr·ªëng ƒë·ª©ng tr∆∞·ªõc danh t·ª´ "planet" -> C·∫ßn m·ªôt <strong>T√≠nh t·ª´ (Adjective)</strong> ƒë·ªÉ b·ªï nghƒ©a. √ù nghƒ©a t√≠ch c·ª±c -> healthy.</p>
                    `
                }
            ],
            section3: [
                {
                    id: "3-1",
                    q: "Join us to learn about (1) __________ ways to save our planet.",
                    options: { A: "creative", B: "creativity", C: "creatively", D: "create" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Tham gia c√πng ch√∫ng t√¥i ƒë·ªÉ t√¨m hi·ªÉu nh·ªØng c√°ch s√°ng t·∫°o ƒë·ªÉ c·ª©u h√†nh tinh.</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong>
                        <br>A. creative (adj): s√°ng t·∫°o
                        <br>B. creativity (n): s·ª± s√°ng t·∫°o
                        <br>C. creatively (adv): m·ªôt c√°ch s√°ng t·∫°o
                        <br>D. create (v): t·∫°o ra</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> Ch·ªó tr·ªëng ƒë·ª©ng tr∆∞·ªõc danh t·ª´ "ways" (c√°c c√°ch th·ª©c) -> C·∫ßn <strong>T√≠nh t·ª´</strong> b·ªï nghƒ©a.</p>
                    `
                },
                {
                    id: "3-2",
                    q: "We will have expert (2) ______ speakers sharing tips...",
                    options: { A: "the", B: "a", C: "no article", D: "an" },
                    correct: "C",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Ch√∫ng t√¥i s·∫Ω c√≥ c√°c di·ªÖn gi·∫£ chuy√™n gia chia s·∫ª m·∫πo...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span></strong> C·ª•m danh t·ª´ l√† "expert speakers" (t√≠nh t·ª´ + danh t·ª´ s·ªë nhi·ªÅu).
                        <br>- Kh√¥ng d√πng "a/an" v√¨ "speakers" l√† s·ªë nhi·ªÅu.
                        <br>- Kh√¥ng d√πng "the" v√¨ ƒë√¢y l√† l·∫ßn ƒë·∫ßu nh·∫Øc ƒë·∫øn, mang nghƒ©a chung chung.</p>
                    `
                },
                {
                    id: "3-3",
                    q: "Don't miss this chance to (3) __________ your voice...",
                    options: { A: "raise", B: "raising", C: "raises", D: "raised" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ƒê·ª´ng b·ªè l·ª° c∆° h·ªôi n√†y ƒë·ªÉ c·∫•t l√™n ti·∫øng n√≥i c·ªßa b·∫°n...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> C·∫•u tr√∫c <strong>"chance to + V-inf"</strong> (c∆° h·ªôi ƒë·ªÉ l√†m g√¨). "To raise your voice" = C·∫•t ti·∫øng n√≥i / Th·ªÉ hi·ªán quan ƒëi·ªÉm.</p>
                    `
                },
                {
                    id: "3-4",
                    q: "Register today (4) __________ [PlanetEarthEvents.com]...",
                    options: { A: "at", B: "on", C: "in", D: "to" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ƒêƒÉng k√Ω ngay h√¥m nay t·∫°i [Website]...</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong>
                        <br>A. at (t·∫°i)
                        <br>B. on (tr√™n - th∆∞·ªùng d√πng cho b·ªÅ m·∫∑t ho·∫∑c ng√†y th√°ng)
                        <br>C. in (trong)
                        <br>D. to (ƒë·∫øn)</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> Khi n√≥i v·ªÅ ƒë·ªãa ch·ªâ website c·ª• th·ªÉ ho·∫∑c ƒë·ªãa ƒëi·ªÉm, ta th∆∞·ªùng d√πng <strong>"at"</strong>. (Register at + t√™n website/ƒë·ªãa ch·ªâ).</p>
                    `
                }
            ]
        };

        // --- SOUNDS (Web Audio API for portability) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // High pitch Ding
                osc.type = 'sine';
                osc.frequency.setValueAtTime(500, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else {
                // Low pitch Buzz
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderSection(sectionId, data) {
            const container = document.getElementById(`questions-area-${sectionId}`);
            data.forEach((item, index) => {
                const questionNum = index + 1;
                const html = `
                    <div class="question-block" id="q-${item.id}">
                        <span class="question-number">Question ${questionNum}: ${item.q}</span>
                        <div class="options-grid">
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'A', '${item.correct}')">A. ${item.options.A}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'B', '${item.correct}')">B. ${item.options.B}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'C', '${item.correct}')">C. ${item.options.C}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'D', '${item.correct}')">D. ${item.options.D}</button>
                        </div>
                        <div class="explanation-box" id="exp-${item.id}">
                            <div class="exp-header">
                                <div class="exp-avatar">Ms</div>
                                <span>C√¥ Mai An gi·∫£i th√≠ch:</span>
                            </div>
                            <div class="exp-content">
                                ${item.explanation}
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // Initialize
        renderSection('1', quizData.section1);
        renderSection('2', quizData.section2);
        renderSection('3', quizData.section3);

        // --- LOGIC FUNCTIONS ---
        let score = 0;
        const totalQuestions = 12; // 4 questions * 3 sections

        function checkAnswer(id, selected, correct) {
            const questionBlock = document.getElementById(`q-${id}`);
            const buttons = questionBlock.querySelectorAll('.option-btn');
            const expBox = document.getElementById(`exp-${id}`);

            // Disable all buttons in this question
            buttons.forEach(btn => {
                btn.disabled = true;
                if (btn.innerText.startsWith(correct)) {
                    btn.classList.add('correct'); // Highlight correct answer
                }
                if (btn.innerText.startsWith(selected) && selected !== correct) {
                    btn.classList.add('wrong'); // Highlight wrong selection
                }
            });

            // Logic
            if (selected === correct) {
                score++;
                playSound('correct');
                fireConfetti();
            } else {
                playSound('wrong');
            }

            // Show Explanation immediately
            expBox.style.display = 'block';
        }

        function showFinalResult() {
            const modal = document.getElementById('resultModal');
            const scoreText = document.getElementById('finalScore');
            const comment = document.getElementById('finalComment');
            
            scoreText.innerText = `${score} / ${totalQuestions}`;
            
            if(score === totalQuestions) {
                comment.innerText = "Tuy·ªát v·ªùi! Em l√† thi√™n t√†i ti·∫øng Anh! üåü";
                fireConfetti();
            } else if (score >= 8) {
                comment.innerText = "L√†m t·ªët l·∫Øm! Em r·∫•t c√≥ nƒÉng khi·∫øu! üî•";
            } else {
                comment.innerText = "C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! H√£y xem k·ªπ gi·∫£i th√≠ch c·ªßa c√¥! üí™";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // --- CONFETTI EFFECT (Minimal JS implementation) ---
        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: Math.random() * 4 - 2,
                    vy: Math.random() * 4 + 2,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`
                });
            }

            let animationId;
            function update() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let active = false;
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.y < canvas.height) {
                        ctx.fillStyle = p.color;
                        ctx.fillRect(p.x, p.y, 8, 8);
                        active = true;
                    }
                });

                if (active) {
                    animationId = requestAnimationFrame(update);
                } else {
                    cancelAnimationFrame(animationId);
                }
            }
            update();
        }

    </script>
</body>
</html>

