<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms Mai An ULIS (Ph·∫ßn 2)</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0;
            --accent: #00C9A7;
            --correct: #00D26A;
            --wrong: #FF4757;
            --bg: #F0F3F8;
            --text: #2f3542;
            --white: #ffffff;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(#d1d8e0 2px, transparent 2px), radial-gradient(#d1d8e0 2px, transparent 2px);
            background-size: 32px 32px;
            background-position: 0 0, 16px 16px;
            color: var(--text);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background: var(--white);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 2px solid var(--primary);
        }

        h1 {
            color: var(--primary);
            font-weight: 900;
            margin: 0;
            font-size: 1.8rem;
            text-transform: uppercase;
        }

        .card {
            background: var(--white);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 0 #dfe4ea;
            border: 2px solid #f1f2f6;
        }

        .section-title {
            background: var(--accent);
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            display: inline-block;
            font-weight: bold;
            margin-bottom: 15px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* ANNOUNCEMENT STYLE */
        .announcement-box {
            background: #fff8e1;
            border: 2px dashed #ffc107;
            padding: 20px;
            border-radius: 15px;
            font-family: 'Quicksand', sans-serif;
            margin-bottom: 20px;
            position: relative;
        }
        
        .announcement-box::before {
            content: 'üì¢';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 30px;
            background: #fff8e1;
            padding: 0 10px;
        }

        .gap-select {
            display: inline-block;
            min-width: 80px;
            padding: 5px 10px;
            margin: 0 5px;
            border: 2px solid var(--primary);
            border-radius: 8px;
            background: white;
            color: var(--primary);
            font-weight: bold;
            cursor: pointer;
            text-align: center;
        }

        /* WRITING TILES STYLE */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background: #f1f2f6;
            border-radius: 15px;
            min-height: 50px;
        }

        .word-tile {
            background: white;
            padding: 8px 15px;
            border-radius: 10px;
            box-shadow: 0 4px 0 #ccc;
            cursor: pointer;
            font-weight: bold;
            border: 1px solid #ddd;
            transition: all 0.2s;
        }

        .word-tile:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #ccc;
        }

        .word-tile.used {
            opacity: 0.5;
            background: #e0e0e0;
            cursor: default;
            box-shadow: none;
            transform: translateY(4px);
        }

        .sentence-area {
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 15px;
            min-height: 50px;
            background: white;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .sentence-area .word-tile {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 0 #5e35b1;
            border: none;
        }

        /* WRITING INPUT STYLE */
        .writing-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #dfe4ea;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            margin-bottom: 10px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        .writing-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .check-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #009e82;
            margin-top: 5px;
        }

        .check-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .explanation {
            display: none;
            margin-top: 15px;
            background: #e8f5e9;
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid var(--correct);
        }
        
        .explanation.visible {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Options Grid for Multiple Choice */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        @media (min-width: 600px) {
            .options-grid { grid-template-columns: 1fr 1fr; }
        }
        .option-btn {
            background: white;
            border: 2px solid #eee;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            text-align: left;
            transition: 0.2s;
        }
        .option-btn:hover { background: #f9f9f9; border-color: var(--primary); }
        .option-btn.correct { background: var(--correct); color: white; border-color: var(--correct); }
        .option-btn.wrong { background: var(--wrong); color: white; border-color: var(--wrong); }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>English Test - Part 2</h1>
        <div style="color: #747d8c; margin-top:5px;">Writing & Reading Completion</div>
    </header>

    <div class="card">
        <div class="section-title">IV. ANNOUNCEMENT (A) - Movie Trip</div>
        
        <div class="announcement-box">
            <h3>Announcement</h3>
            <p><strong>Dear students,</strong></p>
            <p>We are excited to invite you to a movie trip as part of our fun entertainment activities! This is a great chance to <strong>(1) ______</strong>, enjoy a fantastic film, and spend time with friends.</p>
            <p>üìÖ Date: Friday, March 15th<br>
            üïí Time: 3:00 PM ‚Äì 6:00 PM<br>
            üìç Venue: City Cinema<br>
            üé¨ Movie: The Adventures of Tom and Jerry</p>
            <p>üëâ Why join?<br>
            Watch <strong>(2) ______</strong>.<br>
            Have a wonderful experience with classmates.<br>
            Enjoy delicious snacks and a fun time together.</p>
            <p>üì¢ Important notes:<br>
            Please <strong>(3) ______</strong> 15 minutes early to get your tickets.<br>
            The cinema is very crowded, so you should <strong>(4) ______</strong> your seats in advance.</p>
        </div>

        <div id="wrapper-iv-a">
            <div class="question-block">
                <p><strong>Question 1:</strong></p>
                <div class="options-grid" id="q-iv-1">
                    <button class="option-btn" onclick="checkMC('q-iv-1', 'A', 'A')">A. relax</button>
                    <button class="option-btn" onclick="checkMC('q-iv-1', 'B', 'A')">B. relaxing</button>
                    <button class="option-btn" onclick="checkMC('q-iv-1', 'C', 'A')">C. relaxed</button>
                    <button class="option-btn" onclick="checkMC('q-iv-1', 'D', 'A')">D. relaxes</button>
                </div>
                <div class="explanation" id="exp-q-iv-1">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>A. relax</strong><br>
                    Sau c·ª•m t·ª´ "chance to" (c∆° h·ªôi ƒë·ªÉ l√†m g√¨) ta d√πng ƒë·ªông t·ª´ nguy√™n th·ªÉ (V-infinitive).<br>
                    C·∫•u tr√∫c song h√†nh: to relax, enjoy..., and spend...
                </div>
            </div>
            
            <hr style="border-top:1px dashed #ccc; margin: 15px 0;">

            <div class="question-block">
                <p><strong>Question 2:</strong></p>
                <div class="options-grid" id="q-iv-2">
                    <button class="option-btn" onclick="checkMC('q-iv-2', 'A', 'B')">A. a interesting movie</button>
                    <button class="option-btn" onclick="checkMC('q-iv-2', 'B', 'B')">B. an interesting movie</button>
                    <button class="option-btn" onclick="checkMC('q-iv-2', 'C', 'B')">C. a interesting movies</button>
                    <button class="option-btn" onclick="checkMC('q-iv-2', 'D', 'B')">D. an interesting movies</button>
                </div>
                <div class="explanation" id="exp-q-iv-2">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>B. an interesting movie</strong><br>
                    - D√πng m·∫°o t·ª´ "an" tr∆∞·ªõc t√≠nh t·ª´ b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m (u, e, o, a, i) -> "interesting".<br>
                    - "Movie" l√† danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë √≠t n√™n kh√¥ng th√™m "s".
                </div>
            </div>

            <hr style="border-top:1px dashed #ccc; margin: 15px 0;">

            <div class="question-block">
                <p><strong>Question 3:</strong></p>
                <div class="options-grid" id="q-iv-3">
                    <button class="option-btn" onclick="checkMC('q-iv-3', 'A', 'D')">A. arriving</button>
                    <button class="option-btn" onclick="checkMC('q-iv-3', 'B', 'D')">B. arrived</button>
                    <button class="option-btn" onclick="checkMC('q-iv-3', 'C', 'D')">C. to arrive</button>
                    <button class="option-btn" onclick="checkMC('q-iv-3', 'D', 'D')">D. arrive</button>
                </div>
                <div class="explanation" id="exp-q-iv-3">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>D. arrive</strong><br>
                    Sau "Please" l√† c√¢u m·ªánh l·ªánh, ta d√πng ƒë·ªông t·ª´ nguy√™n th·ªÉ kh√¥ng "to".
                </div>
            </div>

            <hr style="border-top:1px dashed #ccc; margin: 15px 0;">

            <div class="question-block">
                <p><strong>Question 4:</strong></p>
                <div class="options-grid" id="q-iv-4">
                    <button class="option-btn" onclick="checkMC('q-iv-4', 'A', 'A')">A. book</button>
                    <button class="option-btn" onclick="checkMC('q-iv-4', 'B', 'A')">B. booking</button>
                    <button class="option-btn" onclick="checkMC('q-iv-4', 'C', 'A')">C. to booking</button>
                    <button class="option-btn" onclick="checkMC('q-iv-4', 'D', 'A')">D. booked</button>
                </div>
                <div class="explanation" id="exp-q-iv-4">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>A. book</strong><br>
                    Sau ƒë·ªông t·ª´ khuy·∫øt thi·∫øu "should" (n√™n) l√† ƒë·ªông t·ª´ nguy√™n th·ªÉ.<br>
                    "Book tickets/seats" nghƒ©a l√† ƒë·∫∑t v√©/ƒë·∫∑t ch·ªó.
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="section-title">IV. ANNOUNCEMENT (B) - Mid-Autumn Festival</div>
        
        <div class="announcement-box" style="background: #e0f7fa; border-color: #26c6da;">
            <h3>Announcement</h3>
            <p><strong>Dear students,</strong></p>
            <p>Join us for the Mid-Autumn Festival...<br>
            ‚ú® How to register?<br>
            Students who want to join should <strong>(1) ______</strong> their names with their class monitors before September 15th.<br>
            Each participant will receive <strong>(2) ______</strong> small gift.<br>
            The event will be held <strong>(3) ______</strong> the school yard, so please arrive on time.<br>
            Remember to bring <strong>(4) ______</strong> for the parade.</p>
        </div>

        <div id="wrapper-iv-b">
            <div class="question-block">
                <p><strong>Question 1:</strong></p>
                <div class="options-grid" id="q-ivb-1">
                    <button class="option-btn" onclick="checkMC('q-ivb-1', 'A', 'A')">A. register</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-1', 'B', 'A')">B. registers</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-1', 'C', 'A')">C. registering</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-1', 'D', 'A')">D. registered</button>
                </div>
                <div class="explanation" id="exp-q-ivb-1">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>A. register</strong><br>
                    Sau "should" l√† V-inf. Register (ƒëƒÉng k√Ω).
                </div>
            </div>

            <hr style="border-top:1px dashed #ccc; margin: 15px 0;">

            <div class="question-block">
                <p><strong>Question 2:</strong></p>
                <div class="options-grid" id="q-ivb-2">
                    <button class="option-btn" onclick="checkMC('q-ivb-2', 'A', 'A')">A. a</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-2', 'B', 'A')">B. an</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-2', 'C', 'A')">C. the</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-2', 'D', 'A')">D. no article</button>
                </div>
                <div class="explanation" id="exp-q-ivb-2">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>A. a</strong><br>
                    "small gift" b·∫Øt ƒë·∫ßu b·∫±ng ph·ª• √¢m "s" -> d√πng m·∫°o t·ª´ "a".
                </div>
            </div>

            <hr style="border-top:1px dashed #ccc; margin: 15px 0;">

            <div class="question-block">
                <p><strong>Question 3:</strong></p>
                <div class="options-grid" id="q-ivb-3">
                    <button class="option-btn" onclick="checkMC('q-ivb-3', 'A', 'B')">A. on</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-3', 'B', 'B')">B. in</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-3', 'C', 'B')">C. between</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-3', 'D', 'B')">D. above</button>
                </div>
                <div class="explanation" id="exp-q-ivb-3">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>B. in</strong><br>
                    C·ª•m t·ª´ ch·ªâ ƒë·ªãa ƒëi·ªÉm: "in the school yard" (trong s√¢n tr∆∞·ªùng).
                </div>
            </div>

            <hr style="border-top:1px dashed #ccc; margin: 15px 0;">

            <div class="question-block">
                <p><strong>Question 4:</strong></p>
                <div class="options-grid" id="q-ivb-4">
                    <button class="option-btn" onclick="checkMC('q-ivb-4', 'A', 'A')">A. your lantern</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-4', 'B', 'A')">B. my lantern</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-4', 'C', 'A')">C. her lantern</button>
                    <button class="option-btn" onclick="checkMC('q-ivb-4', 'D', 'A')">D. their lantern</button>
                </div>
                <div class="explanation" id="exp-q-ivb-4">
                    <strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>A. your lantern</strong><br>
                    Th√¥ng b√°o g·ª≠i ƒë·∫øn h·ªçc sinh ("Dear students"), n√™n d√πng t√≠nh t·ª´ s·ªü h·ªØu "your" (c·ªßa c√°c em).
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="section-title">D. WRITING I - REARRANGE WORDS</div>
        <p>B·∫•m v√†o c√°c t·ª´ b√™n d∆∞·ªõi ƒë·ªÉ x·∫øp th√†nh c√¢u ho√†n ch·ªânh.</p>

        <div class="writing-task" id="w1">
            <p><strong>1. Do/ you/ have/ your/ a/ festival/ harvest/ in/ country/ ?</strong></p>
            <div class="sentence-area" id="w1-area"></div>
            <div class="word-bank" id="w1-bank"></div>
            <div class="explanation" id="exp-w1"></div>
        </div>
        <hr>

        <div class="writing-task" id="w2">
            <p><strong>2. their/ put/ pumpkin/ lanterns/ outside/ homes/ They/ ?</strong></p>
            <div class="sentence-area" id="w2-area"></div>
            <div class="word-bank" id="w2-bank"></div>
            <div class="explanation" id="exp-w2"></div>
        </div>
        <hr>

        <div class="writing-task" id="w3">
            <p><strong>3. from/ Hien‚Äôs/ house/ is/ far/ it/ to the bakery/ How/ ?</strong></p>
            <div class="sentence-area" id="w3-area"></div>
            <div class="word-bank" id="w3-bank"></div>
            <div class="explanation" id="exp-w3"></div>
        </div>
        <hr>
        
        <div class="writing-task" id="w4">
            <p><strong>4. you/ How/ do/ go/ school/ to/ every morning/ ?</strong></p>
            <div class="sentence-area" id="w4-area"></div>
            <div class="word-bank" id="w4-bank"></div>
            <div class="explanation" id="exp-w4"></div>
        </div>
        <hr>

        <div class="writing-task" id="w5">
            <p><strong>5. this/ can‚Äôt/ in/ fast/ You/ drive/ area/.</strong></p>
            <div class="sentence-area" id="w5-area"></div>
            <div class="word-bank" id="w5-bank"></div>
            <div class="explanation" id="exp-w5"></div>
        </div>
        <hr>

        <div class="writing-task" id="w6">
            <p><strong>6. is/ horror/ ‚ÄúA Nightmare‚Äù/ film/ a/.</strong></p>
            <div class="sentence-area" id="w6-area"></div>
            <div class="word-bank" id="w6-bank"></div>
            <div class="explanation" id="exp-w6"></div>
        </div>
        <hr>

        <div class="writing-task" id="w7">
            <p><strong>7. and producer/ He/ the/is/ main actor/ the/ of/ film/.</strong></p>
            <div class="sentence-area" id="w7-area"></div>
            <div class="word-bank" id="w7-bank"></div>
            <div class="explanation" id="exp-w7"></div>
        </div>
        <hr>

        <div class="writing-task" id="w8">
            <p><strong>8. want/ I/ to/ a/ watch/ film,/ but/ don‚Äôt/ I/ want/ go/ the/ to/ cinema/.</strong></p>
            <div class="sentence-area" id="w8-area"></div>
            <div class="word-bank" id="w8-bank"></div>
            <div class="explanation" id="exp-w8"></div>
        </div>
    </div>

    <div class="card">
        <div class="section-title">D. WRITING II & III - MAKE SENTENCES</div>
        <p>G√µ c√¢u tr·∫£ l·ªùi c·ªßa em v√† b·∫•m "Ki·ªÉm tra" ƒë·ªÉ xem ƒë√°p √°n ƒë√∫ng nh√©!</p>

        <div class="question-block">
            <p><strong>II.1. My favourite/ kind/ of/ film/ action film/.</strong></p>
            <input type="text" class="writing-input" id="in-w2-1" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi...">
            <button class="check-btn" onclick="checkWriting('in-w2-1', 'My favourite kind of film is action film.', 'Th√™m ƒë·ªông t·ª´ tobe &quot;is&quot;.')">Ki·ªÉm tra</button>
            <div class="explanation" id="exp-in-w2-1"></div>
        </div>

        <div class="question-block">
            <p><strong>II.2. It/ about/ 5 km/ my village/ nearest town/.</strong></p>
            <input type="text" class="writing-input" id="in-w2-2" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi...">
            <button class="check-btn" onclick="checkWriting('in-w2-2', 'It is about 5 km from my village to the nearest town.', 'C·∫•u tr√∫c: It is + distance + from A to B.')">Ki·ªÉm tra</button>
            <div class="explanation" id="exp-in-w2-2"></div>
        </div>

        <div class="question-block">
            <p><strong>II.3. they/ hold/ the festival/ every year/?</strong></p>
            <input type="text" class="writing-input" id="in-w2-3" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi...">
            <button class="check-btn" onclick="checkWriting('in-w2-3', 'Do they hold the festival every year?', 'C√¢u h·ªèi th√¨ hi·ªán t·∫°i ƒë∆°n: Do + S + V?')">Ki·ªÉm tra</button>
            <div class="explanation" id="exp-in-w2-3"></div>
        </div>
        
        <div class="question-block">
            <p><strong>II.4. My friends/ and/ I / usually/ go/ school/ foot/.</strong></p>
            <input type="text" class="writing-input" id="in-w2-4" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi...">
            <button class="check-btn" onclick="checkWriting('in-w2-4', 'My friends and I usually go to school on foot.', 'C·ª•m t·ª´: go to school (ƒëi h·ªçc) v√† on foot (ƒëi b·ªô).')">Ki·ªÉm tra</button>
            <div class="explanation" id="exp-in-w2-4"></div>
        </div>

         <div class="question-block">
            <p><strong>II.5. We/ go /Flower Festival/ Da Lat/ last year/.</strong></p>
            <input type="text" class="writing-input" id="in-w2-5" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi...">
            <button class="check-btn" onclick="checkWriting('in-w2-5', 'We went to the Flower Festival in Da Lat last year.', 'Last year -> Qu√° kh·ª© ƒë∆°n (go -> went). Th√™m gi·ªõi t·ª´ to/in.')">Ki·ªÉm tra</button>
            <div class="explanation" id="exp-in-w2-5"></div>
        </div>

        <div style="margin-top:40px;">
            <h4>III. Rewrite Sentences</h4>
            
            <div class="question-block">
                <p><strong>1. The distance from Ha Noi to Hue City is about 540 km. (It)</strong></p>
                <input type="text" class="writing-input" id="in-w3-1" placeholder="It is...">
                <button class="check-btn" onclick="checkWriting('in-w3-1', 'It is about 540 km from Ha Noi to Hue City.', 'C·∫•u tr√∫c ch·ªâ kho·∫£ng c√°ch: It is + distance + from... to...')">Ki·ªÉm tra</button>
                <div class="explanation" id="exp-in-w3-1"></div>
            </div>

            <div class="question-block">
                <p><strong>2. What is the distance between your house and your school? (How)</strong></p>
                <input type="text" class="writing-input" id="in-w3-2" placeholder="How...">
                <button class="check-btn" onclick="checkWriting('in-w3-2', 'How far is it from your house to your school?', 'H·ªèi kho·∫£ng c√°ch: How far is it from... to...?')">Ki·ªÉm tra</button>
                <div class="explanation" id="exp-in-w3-2"></div>
            </div>

            <div class="question-block">
                <p><strong>3. Some people said the film was terrible. I found it quite gripping. (Although)</strong></p>
                <input type="text" class="writing-input" id="in-w3-3" placeholder="Although...">
                <button class="check-btn" onclick="checkWriting('in-w3-3', 'Although some people said the film was terrible, I found it quite gripping.', 'M·ªánh ƒë·ªÅ nh∆∞·ª£ng b·ªô: Although + S + V, S + V.')">Ki·ªÉm tra</button>
                <div class="explanation" id="exp-in-w3-3"></div>
            </div>

            <div class="question-block">
                <p><strong>4. It was a horror film. It wasn‚Äôt frightening at all. (however)</strong></p>
                <input type="text" class="writing-input" id="in-w3-4" placeholder="It was...">
                <button class="check-btn" onclick="checkWriting('in-w3-4', 'It was a horror film; however, it wasn‚Äôt frightening at all.', 'However ƒë·ª©ng sau d·∫•u ch·∫•m ph·∫©y ho·∫∑c d·∫•u ch·∫•m, tr∆∞·ªõc d·∫•u ph·∫©y.')">Ki·ªÉm tra</button>
                <div class="explanation" id="exp-in-w3-4"></div>
            </div>

            <div class="question-block">
                <p><strong>5. Take part in the event this time, or you‚Äôll have to wait for next year. (If)</strong></p>
                <input type="text" class="writing-input" id="in-w3-5" placeholder="If...">
                <button class="check-btn" onclick="checkWriting('in-w3-5', 'If you don‚Äôt take part in the event this time, you‚Äôll have to wait for next year.', 'C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1 ph·ªß ƒë·ªãnh.')">Ki·ªÉm tra</button>
                <div class="explanation" id="exp-in-w3-5"></div>
            </div>
             <div class="question-block">
                <p><strong>6. Why don‚Äôt we go out for dinner? (Let)</strong></p>
                <input type="text" class="writing-input" id="in-w3-6" placeholder="Let...">
                <button class="check-btn" onclick="checkWriting('in-w3-6', 'Let‚Äôs go out for dinner.', 'Let‚Äôs + V_inf = Why don‚Äôt we + V_inf?')">Ki·ªÉm tra</button>
                <div class="explanation" id="exp-in-w3-6"></div>
            </div>
        </div>

    </div>
</div>

<script>
    // --- MULTIPLE CHOICE LOGIC ---
    function checkMC(questionId, selected, correct) {
        const container = document.getElementById(questionId);
        const buttons = container.getElementsByClassName('option-btn');
        const explanation = document.getElementById('exp-' + questionId);

        for (let btn of buttons) {
            btn.disabled = true;
            if (btn.innerText.startsWith(correct)) {
                btn.classList.add('correct');
            }
            if (btn.innerText.startsWith(selected) && selected !== correct) {
                btn.classList.add('wrong');
            }
        }
        explanation.classList.add('visible');
    }

    // --- WRITING TILES LOGIC ---
    const writingTasks = {
        'w1': { words: ["Do", "you", "have", "a", "harvest", "festival", "in", "your", "country", "?"], correct: "Do you have a harvest festival in your country ?" },
        'w2': { words: ["Do", "They", "put", "their", "pumpkin", "lanterns", "outside", "homes", "?"], correct: "Do They put their pumpkin lanterns outside homes ?" }, // Added 'Do' assuming it's a question based on '?' but prompt lacks 'Do'. Using available words. Actually prompt is "their/ put/ pumpkin/ lanterns/ outside/ homes/ They/ ?" -> They put... outside homes? (Statement question) or Error in prompt. Let's assume standard order.
        // Wait, prompt 2 is "their/ put/ pumpkin/ lanterns/ outside/ homes/ They/ ?" -> Probably "Do they..." is missing or it is "They put their pumpkin lanterns outside homes?" (intonation question). Let's stick strictly to provided words: "They put their pumpkin lanterns outside homes ?"
        'w2_strict': { words: ["They", "put", "their", "pumpkin", "lanterns", "outside", "homes", "?"], correct: "They put their pumpkin lanterns outside homes ?" },
        'w3': { words: ["How", "far", "is", "it", "from", "Hien‚Äôs", "house", "to the bakery", "?"], correct: "How far is it from Hien‚Äôs house to the bakery ?" },
        'w4': { words: ["How", "do", "you", "go", "to", "school", "every morning", "?"], correct: "How do you go to school every morning ?" },
        'w5': { words: ["You", "can‚Äôt", "drive", "fast", "in", "this", "area", "."], correct: "You can‚Äôt drive fast in this area ." },
        'w6': { words: ["‚ÄúA Nightmare‚Äù", "is", "a", "horror", "film", "."], correct: "‚ÄúA Nightmare‚Äù is a horror film ." },
        'w7': { words: ["He", "is", "the", "main actor", "and", "producer", "of", "the", "film", "."], correct: "He is the main actor and producer of the film ." },
        'w8': { words: ["I", "want", "to", "watch", "a", "film,", "but", "I", "don‚Äôt", "want", "to", "go", "to", "the", "cinema", "."], correct: "I want to watch a film, but I don‚Äôt want to go to the cinema ." }
    };

    function initWritingTiles() {
        // Setup W1
        setupTask('w1', writingTasks['w1'].words, writingTasks['w1'].correct);
        setupTask('w2', writingTasks['w2_strict'].words, writingTasks['w2_strict'].correct);
        setupTask('w3', writingTasks['w3'].words, writingTasks['w3'].correct);
        setupTask('w4', writingTasks['w4'].words, writingTasks['w4'].correct);
        setupTask('w5', writingTasks['w5'].words, writingTasks['w5'].correct);
        setupTask('w6', writingTasks['w6'].words, writingTasks['w6'].correct);
        setupTask('w7', writingTasks['w7'].words, writingTasks['w7'].correct);
        setupTask('w8', writingTasks['w8'].words, writingTasks['w8'].correct);
    }

    function setupTask(id, words, correctSentence) {
        const bank = document.getElementById(id + '-bank');
        const area = document.getElementById(id + '-area');
        const exp = document.getElementById('exp-' + id);
        
        let currentWords = [];

        // Shuffle words slightly for challenge, or keep as list? List is better for "Rearrange"
        // Let's create buttons
        words.forEach((word, index) => {
            const btn = document.createElement('button');
            btn.className = 'word-tile';
            btn.innerText = word;
            btn.onclick = () => {
                // Move to area
                moveWordToArea(word, btn, area, currentWords, correctSentence, exp);
            };
            bank.appendChild(btn);
        });
    }

    function moveWordToArea(word, btn, area, currentWords, correctSentence, exp) {
        if (btn.classList.contains('used')) return;

        btn.classList.add('used');
        
        const newBtn = document.createElement('button');
        newBtn.className = 'word-tile';
        newBtn.innerText = word;
        newBtn.onclick = () => {
            // Remove from area and enable back in bank
            newBtn.remove();
            btn.classList.remove('used');
            const idx = currentWords.indexOf(word);
            if (idx > -1) currentWords.splice(idx, 1);
            exp.innerHTML = "";
            exp.classList.remove('visible');
        };
        area.appendChild(newBtn);
        currentWords.push(word);

        // Auto check if length matches
        const totalWords = correctSentence.split(" ").filter(w => w !== "").length;
        // Simple check: join current words
        const currentSent = currentWords.join(" ");
        // Normalize spaces for comparison
        const normCorrect = correctSentence.replace(/\s+/g, ' ').trim();
        const normCurrent = currentSent.replace(/\s+/g, ' ').trim();

        if (currentWords.length === normCorrect.split(' ').length) {
            if (normCurrent === normCorrect) {
                exp.innerHTML = "‚úÖ <strong>Ch√≠nh x√°c!</strong> Gi·ªèi qu√°! <br> " + normCorrect;
                exp.style.borderLeftColor = "#00D26A";
                // Lock
                Array.from(area.children).forEach(c => c.onclick = null);
            } else {
                exp.innerHTML = "‚ùå <strong>Ch∆∞a ƒë√∫ng.</strong> H√£y th·ª≠ l·∫°i nh√©! <br>Th·ª© t·ª± ƒë√∫ng: " + normCorrect;
                exp.style.borderLeftColor = "#FF4757";
            }
            exp.classList.add('visible');
        }
    }

    // --- WRITING TEXT CHECK LOGIC ---
    function checkWriting(inputId, correctText, explanation) {
        const input = document.getElementById(inputId);
        const expDiv = document.getElementById('exp-' + inputId);
        const userVal = input.value.trim();

        // Simple normalization
        if (userVal === "") {
            alert("Em ch∆∞a nh·∫≠p c√¢u tr·∫£ l·ªùi!");
            return;
        }

        expDiv.innerHTML = `
            <p><strong>ƒê√°p √°n g·ª£i √Ω:</strong> ${correctText}</p>
            <p><em>${explanation}</em></p>
            <p><strong>B√†i l√†m c·ªßa em:</strong> ${userVal}</p>
        `;
        expDiv.classList.add('visible');
    }

    // Initialize
    initWritingTiles();

</script>

</body>
</html>
