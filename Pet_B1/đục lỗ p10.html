<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00b894; /* Green Teal */
            --secondary: #0984e3; /* Blue */
            --accent: #fdcb6e; /* Yellow */
            --correct: #00D26A;
            --wrong: #FF4757;
            --text: #2d3436;
            --bg-card: #ffffff;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --3d-shadow: 0 5px 0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            height: 100vh;
            overflow: hidden;
            color: var(--text);
            /* Dynamic Background SVG with Emojis */
            background-color: #e0f7fa;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='30' font-size='20'%3Eüê®%3C/text%3E%3Ctext x='60' y='80' font-size='20'%3E‚úàÔ∏è%3C/text%3E%3C/svg%3E"), radial-gradient(circle at center, rgba(255,255,255,0.8), rgba(224, 247, 250, 0.9));
        }

        /* Top Bar */
        header {
            height: 60px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 100;
            position: relative;
        }

        .teacher-name {
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            color: var(--secondary);
            font-size: 0.9rem;
            background: #e3f2fd;
            padding: 5px 15px;
            border-radius: 20px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #timer {
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--wrong);
            background: #fff0f1;
            padding: 5px 15px;
            border-radius: 10px;
            border: 2px solid var(--wrong);
            min-width: 80px;
            text-align: center;
        }

        .btn-control {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 0 #008f72;
            transition: all 0.1s;
        }
        .btn-control:active { transform: translateY(4px); box-shadow: 0 0 0; }

        /* Main Layout */
        .main-container {
            display: flex;
            height: calc(100vh - 60px);
        }

        /* Left Panel: Reading */
        .reading-panel {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            border-right: 2px solid #dfe6e9;
            background: rgba(255,255,255,0.9);
        }

        .passage-block {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .passage-title {
            color: var(--primary);
            font-weight: 800;
            font-size: 1.5rem;
            margin-bottom: 15px;
            border-bottom: 2px dashed #b2bec3;
            padding-bottom: 10px;
        }

        .gap-number {
            font-weight: bold;
            color: var(--secondary);
            background: #dfe6e9;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .btn-translate {
            background: var(--accent);
            color: #d35400;
            border: none;
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9rem;
            box-shadow: 0 3px 0 #e67e22;
        }
        .btn-translate:active { transform: translateY(3px); box-shadow: none; }

        .translation-text {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #fff8e1;
            border-left: 4px solid var(--accent);
            border-radius: 0 10px 10px 0;
            font-style: italic;
            color: #5d4037;
        }

        /* Glossary Table */
        .glossary {
            margin-top: 20px;
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border: 1px solid #dfe6e9;
            border-radius: 10px;
            overflow: hidden;
        }
        .glossary th { background: var(--secondary); color: white; padding: 10px; }
        .glossary td { padding: 10px; border-bottom: 1px solid #dfe6e9; background: #fdfdfd; }
        .glossary tr:last-child td { border-bottom: none; }

        /* Right Panel: Exercises */
        .exercise-panel {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: #f1f2f6;
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s;
            border: 1px solid #eee;
        }
        .question-card:hover { transform: translateY(-5px); }

        .q-header {
            font-weight: 800;
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .q-context {
            font-style: italic;
            color: #636e72;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe6e9;
            padding: 12px;
            border-radius: 12px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            box-shadow: 0 4px 0 #dfe6e9;
        }

        .option-btn:hover:not(.disabled) {
            background: #f1f2f6;
            transform: scale(1.02);
        }

        .option-btn:active:not(.disabled) {
            transform: translateY(4px);
            box-shadow: 0 0 0;
        }

        .option-btn.correct {
            background: var(--correct);
            color: white;
            border-color: var(--correct);
            box-shadow: 0 4px 0 #00b359;
        }

        .option-btn.wrong {
            background: var(--wrong);
            color: white;
            border-color: var(--wrong);
            box-shadow: 0 4px 0 #e84118;
            animation: shake 0.5s;
        }

        .explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #e8f5e9;
            border: 2px solid var(--correct);
            border-radius: 12px;
            font-size: 0.95rem;
        }
        .explanation h4 { color: #2d3436; margin-bottom: 8px; }
        .explanation ul { padding-left: 20px; list-style-type: circle; }

        .submit-container {
            text-align: center;
            margin: 40px 0;
        }
        #submit-btn {
            background: linear-gradient(45deg, #6c5ce7, #a29bfe);
            color: white;
            font-size: 1.2rem;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4);
            cursor: pointer;
            transition: transform 0.2s;
        }
        #submit-btn:hover { transform: scale(1.05); }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .score-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .main-container { flex-direction: column; height: auto; }
            .reading-panel { height: 40vh; }
            .exercise-panel { height: 60vh; }
            body { overflow: auto; }
        }
    </style>
</head>
<body>

    <header>
        <div class="teacher-name">üéì Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</div>
        <div class="timer-container">
            <span>‚è≥ Th·ªùi gian:</span>
            <div id="timer">10:00</div>
            <button class="btn-control" id="timer-btn" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U</button>
        </div>
    </header>

    <div class="main-container">
        
        <div class="reading-panel">
            <div class="passage-block" id="passage-1">
                <div class="passage-title">üå± Karakamia Wildlife Sanctuary</div>
                <p>
                    The Karakamia reserve is located not (1)<span class="gap-number">1</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ from Perth in Western Australia. Suburban is not usually a word that you (2)<span class="gap-number">2</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ with a wildlife paradise, but Karakamia is actually part of the township of Chidlow. The land was purchased by the Australian government in 1991 with the (3)<span class="gap-number">3</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ of protecting threatened species of indigenous wildlife. That‚Äôs why there is a nine-kilometre fence around it, designed to (4)<span class="gap-number">4</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ out species introduced by European settlers, (5)<span class="gap-number">5</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ foxes, cats and rabbits.
                </p>
                <br>
                <p>
                    The sanctuary (6)<span class="gap-number">6</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ its name from the Aboriginal word meaning ‚Äòhome of the red-tailed black cockatoos‚Äô, and at dusk the air is (7)<span class="gap-number">7</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ with the calls of these birds. This is when the sanctuary is at its most magical. A guided walk by spotlight is the perfect way to experience it. Many of the animals are quite tame, which means you can (8)<span class="gap-number">8</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ them at close quarters and get an idea of what Australia was like (9)<span class="gap-number">9</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ to European colonization.
                </p>
                <button class="btn-translate" onclick="toggleTrans(1)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text" id="trans-1">
                    Khu b·∫£o t·ªìn Karakamia n·∫±m kh√¥ng xa Perth ·ªü T√¢y √öc. "Ngo·∫°i √¥" th∆∞·ªùng kh√¥ng ph·∫£i l√† t·ª´ m√† b·∫°n li√™n t∆∞·ªüng ƒë·∫øn thi√™n ƒë∆∞·ªùng ƒë·ªông v·∫≠t hoang d√£, nh∆∞ng Karakamia th·ª±c s·ª± l√† m·ªôt ph·∫ßn c·ªßa th·ªã tr·∫•n Chidlow. Khu ƒë·∫•t n√†y ƒë∆∞·ª£c ch√≠nh ph·ªß √öc mua v√†o nƒÉm 1991 v·ªõi m·ª•c ƒë√≠ch b·∫£o v·ªá c√°c lo√†i ƒë·ªông v·∫≠t hoang d√£ b·∫£n ƒë·ªãa b·ªã ƒëe d·ªça. ƒê√≥ l√† l√Ω do t·∫°i sao c√≥ m·ªôt h√†ng r√†o d√†i ch√≠n km bao quanh n√≥, ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ ngƒÉn ch·∫∑n c√°c lo√†i do ng∆∞·ªùi ƒë·ªãnh c∆∞ ch√¢u √Çu ƒë∆∞a v√†o, bao g·ªìm c√°o, m√®o v√† th·ªè.<br><br>
                    Khu b·∫£o t·ªìn l·∫•y t√™n t·ª´ ti·∫øng th·ªï d√¢n c√≥ nghƒ©a l√† 'ng√¥i nh√† c·ªßa nh·ªØng con v·∫πt m√†o ƒëen ƒëu√¥i ƒë·ªè', v√† v√†o l√∫c ho√†ng h√¥n, kh√¥ng kh√≠ tr√†n ng·∫≠p ti·∫øng k√™u c·ªßa nh·ªØng lo√†i chim n√†y. ƒê√¢y l√† l√∫c khu b·∫£o t·ªìn k·ª≥ di·ªáu nh·∫•t. M·ªôt chuy·∫øn ƒëi b·ªô c√≥ h∆∞·ªõng d·∫´n vi√™n b·∫±ng ƒë√®n r·ªçi l√† c√°ch ho√†n h·∫£o ƒë·ªÉ tr·∫£i nghi·ªám n√≥. Nhi·ªÅu lo√†i ƒë·ªông v·∫≠t kh√° thu·∫ßn h√≥a, c√≥ nghƒ©a l√† b·∫°n c√≥ th·ªÉ quan s√°t ch√∫ng ·ªü c·ª± ly g·∫ßn v√† h√¨nh dung n∆∞·ªõc √öc nh∆∞ th·∫ø n√†o tr∆∞·ªõc khi ng∆∞·ªùi ch√¢u √Çu ƒë·∫øn thu·ªôc ƒë·ªãa h√≥a.
                </div>
                
                <h4 style="margin-top:20px; color:var(--primary);">üìö Glossary (T·ª´ v·ª±ng h·ªçc thu·∫≠t)</h4>
                <table class="glossary">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Sanctuary</td><td>(n)</td><td>Khu b·∫£o t·ªìn, th√°nh ƒë·ªãa</td></tr>
                    <tr><td>Indigenous</td><td>(adj)</td><td>B·∫£n ƒë·ªãa, b·∫£n x·ª©</td></tr>
                    <tr><td>Threatened</td><td>(adj)</td><td>B·ªã ƒëe d·ªça (tuy·ªát ch·ªßng)</td></tr>
                    <tr><td>Settler</td><td>(n)</td><td>Ng∆∞·ªùi ƒë·ªãnh c∆∞</td></tr>
                    <tr><td>Dusk</td><td>(n)</td><td>Ho√†ng h√¥n, ch·∫≠p cho·∫°ng t·ªëi</td></tr>
                    <tr><td>Tame</td><td>(adj)</td><td>Thu·∫ßn h√≥a, d·∫°n ng∆∞·ªùi</td></tr>
                </table>
            </div>

            <div class="passage-block" id="passage-2">
                <div class="passage-title">‚úàÔ∏è The Benefits of Travel</div>
                <p>
                    Going away, even for a short time, is very important for everybody. Whether it‚Äôs for work, study or fun, travel gives you the opportunity to relax. Even if it‚Äôs a short (10)<span class="gap-number">1</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.., it allows you time to think about something else. It provides you with a break from your daily (11)<span class="gap-number">2</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. .
                </p>
                <br>
                <p>
                    If you‚Äôre (12)<span class="gap-number">3</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. the chance to go on a work trip, you should always take it. If you‚Äôre going away for fun, you (13)<span class="gap-number">4</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. choose the right person to travel with. Make sure it‚Äôs (14)<span class="gap-number">5</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. you get on with.
                </p>
                <br>
                <p>
                    Sometimes it‚Äôs a good idea to go alone because then you‚Äôll be (15)<span class="gap-number">6</span>‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. to do what you want. Whatever you decide, there‚Äôs no doubt you‚Äôll come home feeling happy and with many new stories about the places you‚Äôve visited on the way.
                </p>
                <button class="btn-translate" onclick="toggleTrans(2)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text" id="trans-2">
                    ƒêi xa, d√π ch·ªâ trong m·ªôt th·ªùi gian ng·∫Øn, l√† r·∫•t quan tr·ªçng ƒë·ªëi v·ªõi m·ªçi ng∆∞·ªùi. Cho d√π l√† v√¨ c√¥ng vi·ªác, h·ªçc t·∫≠p hay vui ch∆°i, du l·ªãch mang l·∫°i cho b·∫°n c∆° h·ªôi th∆∞ gi√£n. Ngay c·∫£ khi ƒë√≥ l√† m·ªôt chuy·∫øn ƒëi ng·∫Øn, n√≥ cho ph√©p b·∫°n c√≥ th·ªùi gian ƒë·ªÉ suy nghƒ© v·ªÅ nh·ªØng ƒëi·ªÅu kh√°c. N√≥ cung c·∫•p cho b·∫°n m·ªôt kho·∫£ng ngh·ªâ ng∆°i kh·ªèi th√≥i quen h√†ng ng√†y.<br><br>
                    N·∫øu b·∫°n ƒë∆∞·ª£c trao c∆° h·ªôi ƒëi c√¥ng t√°c, b·∫°n n√™n lu√¥n n·∫Øm l·∫•y n√≥. N·∫øu b·∫°n ƒëi ch∆°i cho vui, b·∫°n ph·∫£i ch·ªçn ƒë√∫ng ng∆∞·ªùi ƒë·ªÉ ƒëi c√πng. H√£y ch·∫Øc ch·∫Øn r·∫±ng ƒë√≥ l√† ng∆∞·ªùi m√† b·∫°n h√≤a h·ª£p.<br><br>
                    ƒê√¥i khi ƒëi m·ªôt m√¨nh l√† m·ªôt √Ω ki·∫øn hay v√¨ khi ƒë√≥ b·∫°n s·∫Ω t·ª± do l√†m nh·ªØng g√¨ m√¨nh mu·ªën. D√π b·∫°n quy·∫øt ƒë·ªãnh th·∫ø n√†o, ch·∫Øc ch·∫Øn b·∫°n s·∫Ω tr·ªü v·ªÅ nh√† v·ªõi c·∫£m gi√°c h·∫°nh ph√∫c v√† v·ªõi nhi·ªÅu c√¢u chuy·ªán m·ªõi v·ªÅ nh·ªØng n∆°i b·∫°n ƒë√£ gh√© thƒÉm tr√™n ƒë∆∞·ªùng ƒëi.
                </div>

                <h4 style="margin-top:20px; color:var(--secondary);">üìö Glossary (T·ª´ v·ª±ng h·ªçc thu·∫≠t)</h4>
                <table class="glossary">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Destination</td><td>(n)</td><td>ƒêi·ªÉm ƒë·∫øn</td></tr>
                    <tr><td>Routine</td><td>(n)</td><td>Th√≥i quen, l·ªãch tr√¨nh h√†ng ng√†y</td></tr>
                    <tr><td>Recommended</td><td>(v)</td><td>ƒê∆∞·ª£c ƒë·ªÅ xu·∫•t, khuy√™n d√πng</td></tr>
                    <tr><td>Benefit</td><td>(n)</td><td>L·ª£i √≠ch</td></tr>
                    <tr><td>Opportunity</td><td>(n)</td><td>C∆° h·ªôi</td></tr>
                </table>
            </div>
        </div>

        <div class="exercise-panel" id="quiz-container">
            </div>
    </div>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2>üéâ K·∫æT QU·∫¢ C·ª¶A B·∫†N üéâ</h2>
            <div class="score-display" id="final-score">0/15</div>
            <p id="feedback-msg" style="font-size: 1.2rem; margin-bottom: 20px;">L√†m t·ªët l·∫Øm!</p>
            <button class="btn-control" onclick="location.reload()" style="background: var(--secondary);">L√†m l·∫°i b√†i thi</button>
        </div>
    </div>

    <script>
        // --- D·ªÆ LI·ªÜU C√ÇU H·ªéI (DATA) ---
        const questions = [
            // Passage 1: Karakamia
            {
                id: 1,
                passageId: 1,
                text: "The Karakamia reserve is located not (1)______ from Perth...",
                options: {A: "far", B: "long", C: "distant", D: "remote"},
                correct: "A",
                explain: "<b>C·ª•m t·ª´ c·ªë ƒë·ªãnh:</b> 'not far from' (kh√¥ng xa l·∫Øm).<br>C√°c t·ª´ c√≤n l·∫°i (distant, remote) th∆∞·ªùng d√πng cho kho·∫£ng c√°ch ƒë·ªãa l√Ω xa x√¥i nh∆∞ng √≠t ƒëi v·ªõi c·∫•u tr√∫c ph·ªß ƒë·ªãnh 'not...from' trong ng·ªØ c·∫£nh th√¥ng th∆∞·ªùng n√†y."
            },
            {
                id: 2,
                passageId: 1,
                text: "Suburban is not usually a word that you (2)______ with a wildlife paradise...",
                options: {A: "refer", B: "accompany", C: "regard", D: "associate"},
                correct: "D",
                explain: "<b>C·∫•u tr√∫c:</b> 'associate something WITH something' (li√™n t∆∞·ªüng, g·∫Øn k·∫øt c√°i g√¨ v·ªõi c√°i g√¨).<br>- Refer to<br>- Regard as"
            },
            {
                id: 3,
                passageId: 1,
                text: "...with the (3)______ of protecting threatened species...",
                options: {A: "proposal", B: "aim", C: "target", D: "plan"},
                correct: "B",
                explain: "<b>C·ª•m t·ª´:</b> 'with the aim of V-ing' (v·ªõi m·ª•c ƒë√≠ch l√†m g√¨).<br>ƒê√¢y l√† c·ª•m t·ª´ c·ªë ƒë·ªãnh (collocation) trong ti·∫øng Anh h·ªçc thu·∫≠t."
            },
            {
                id: 4,
                passageId: 1,
                text: "...fence around it, designed to (4)______ out species introduced by...",
                options: {A: "catch", B: "send", C: "keep", D: "hold"},
                correct: "C",
                explain: "<b>Phrasal Verb:</b> 'keep out' (ngƒÉn kh√¥ng cho v√†o).<br>H√†ng r√†o ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ ngƒÉn c√°c lo√†i v·∫≠t l·∫° x√¢m nh·∫≠p."
            },
            {
                id: 5,
                passageId: 1,
                text: "...species introduced by European settlers, (5)______ foxes, cats and rabbits.",
                options: {A: "including", B: "intending", C: "involving", D: "indicating"},
                correct: "A",
                explain: "<b>Ng·ªØ ph√°p:</b> D√πng 'including' ƒë·ªÉ li·ªát k√™ c√°c v√≠ d·ª• (bao g·ªìm...).<br>Involving: li√™n quan ƒë·∫øn (th∆∞·ªùng d√πng cho qu√° tr√¨nh)."
            },
            {
                id: 6,
                passageId: 1,
                text: "The sanctuary (6)______ its name from the Aboriginal word...",
                options: {A: "bears", B: "finds", C: "gains", D: "takes"},
                correct: "D",
                explain: "<b>Collocation:</b> 'take one's name from' (l·∫•y t√™n t·ª´ ngu·ªìn g·ªëc n√†o ƒë√≥).<br>Bear one's name: mang t√™n (nh∆∞ng kh√¥ng nh·∫•n m·∫°nh ngu·ªìn g·ªëc)."
            },
            {
                id: 7,
                passageId: 1,
                text: "...and at dusk the air is (7)______ with the calls of these birds.",
                options: {A: "crowded", B: "filled", C: "completed", D: "packed"},
                correct: "B",
                explain: "<b>C·∫•u tr√∫c:</b> 'be filled with' (tr√†n ng·∫≠p, ƒë·∫ßy ·∫Øp √¢m thanh/c·∫£m x√∫c).<br>Crowded with: ƒë√¥ng ƒë√∫c (th∆∞·ªùng d√πng cho ng∆∞·ªùi/v·∫≠t th·ªÉ)."
            },
            {
                id: 8,
                passageId: 1,
                text: "...which means you can (8)______ them at close quarters...",
                options: {A: "observe", B: "notice", C: "realise", D: "glance"},
                correct: "A",
                explain: "<b>T·ª´ v·ª±ng:</b> 'observe' (quan s√°t k·ªπ).<br>Notice: nh·∫≠n ra (b·∫•t ch·ª£t).<br>Glance: li·∫øc nh√¨n.<br>Trong ng·ªØ c·∫£nh xem ƒë·ªông v·∫≠t hoang d√£, ta d√πng 'observe'."
            },
            {
                id: 9,
                passageId: 1,
                text: "...what Australia was like (9)______ to European colonization.",
                options: {A: "advance", B: "former", C: "ahead", D: "prior"},
                correct: "D",
                explain: "<b>C·∫•u tr√∫c:</b> 'prior to' = 'before' (tr∆∞·ªõc khi).<br>ƒê√¢y l√† t·ª´ v·ª±ng trang tr·ªçng (formal) th∆∞·ªùng d√πng trong b√†i ƒë·ªçc l·ªãch s·ª≠/khoa h·ªçc."
            },
            // Passage 2: Travel (Renumbered logic 10-15)
            {
                id: 10,
                passageId: 2,
                text: "Even if it‚Äôs a short (1)______, it allows you time to think...",
                options: {A: "trip", B: "destination", C: "plan", D: "route"},
                correct: "A",
                explain: "<b>T·ª´ v·ª±ng:</b> 'trip' (chuy·∫øn ƒëi ng·∫Øn).<br>Journey: h√†nh tr√¨nh d√†i.<br>Destination: ƒëi·ªÉm ƒë·∫øn.<br>·ªû ƒë√¢y n√≥i v·ªÅ vi·ªác ƒëi ch∆°i ng·∫Øn ng√†y -> trip."
            },
            {
                id: 11,
                passageId: 2,
                text: "It provides you with a break from your daily (2)______ .",
                options: {A: "practice", B: "routine", C: "habit", D: "custom"},
                correct: "B",
                explain: "<b>Collocation:</b> 'daily routine' (c√¥ng vi·ªác th∆∞·ªùng nh·∫≠t/l·ªãch tr√¨nh h√†ng ng√†y).<br>Habit: th√≥i quen c√° nh√¢n (h√∫t thu·ªëc, d·∫≠y s·ªõm). Custom: phong t·ª•c t·∫≠p qu√°n."
            },
            {
                id: 12,
                passageId: 2,
                text: "If you‚Äôre (3)______ the chance to go on a work trip...",
                options: {A: "advised", B: "offered", C: "recommended", D: "suggested"},
                correct: "B",
                explain: "<b>B·ªã ƒë·ªông:</b> 'be offered the chance' (ƒë∆∞·ª£c trao c∆° h·ªôi).<br>C√°c t·ª´ kh√°c kh√¥ng ƒëi tr·ª±c ti·∫øp v·ªõi c·∫•u tr√∫c n√†y m·ªôt c√°ch t·ª± nhi√™n trong ng·ªØ c·∫£nh nh·∫≠n ƒë∆∞·ª£c c∆° h·ªôi c√¥ng t√°c."
            },
            {
                id: 13,
                passageId: 2,
                text: "If you‚Äôre going away for fun, you (4)______ choose the right person...",
                options: {A: "ought", B: "need", C: "must", D: "could"},
                correct: "C",
                explain: "<b>Modal Verbs:</b> 'Must' th·ªÉ hi·ªán s·ª± c·∫ßn thi·∫øt m·∫°nh m·∫Ω (l·ªùi khuy√™n ki√™n quy·∫øt).<br>Ought to (thi·∫øu to). Need to (thi·∫øu to). Could (qu√° nh·∫π)."
            },
            {
                id: 14,
                passageId: 2,
                text: "Make sure it‚Äôs (5)______ you get on with.",
                options: {A: "somebody", B: "everyone", C: "something", D: "everything"},
                correct: "A",
                explain: "<b>ƒê·∫°i t·ª´:</b> ƒêang n√≥i v·ªÅ ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh -> d√πng 'somebody'.<br>'get on with' (h√≤a h·ª£p v·ªõi ai)."
            },
            {
                id: 15,
                passageId: 2,
                text: "...because then you‚Äôll be (6)______ to do what you want.",
                options: {A: "open", B: "free", C: "empty", D: "clear"},
                correct: "B",
                explain: "<b>C·∫•u tr√∫c:</b> 'be free to do something' (t·ª± do l√†m g√¨).<br>Open to: c·ªüi m·ªü v·ªõi."
            }
        ];

        // --- LOGIC ·ª®NG D·ª§NG ---

        let timeLeft = 600; // 10 minutes
        let timerInterval;
        let isRunning = false;
        let score = 0;
        let answeredCount = 0;

        // √Çm thanh (Simple Web Audio API wrappers)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(500, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // Render c√¢u h·ªèi
        function renderQuestions() {
            const container = document.getElementById('quiz-container');
            let html = '<div class="submit-container"><button id="submit-btn" onclick="finishExam()">N·ªòP B√ÄI & XEM ƒêI·ªÇM</button></div>';
            
            // ƒê·∫£o ng∆∞·ª£c ƒë·ªÉ n√∫t n·ªôp b√†i ·ªü cu·ªëi, nh∆∞ng render t·ª´ ƒë·∫ßu
            let qHtml = '';
            questions.forEach((q, index) => {
                qHtml += `
                <div class="question-card" id="card-${q.id}">
                    <div class="q-header">
                        <span>C√¢u ${index + 1}</span>
                    </div>
                    <div class="q-context">"${q.text}"</div>
                    <div class="options-grid">
                        ${Object.keys(q.options).map(key => `
                            <button class="option-btn" onclick="checkAnswer(${q.id}, '${key}', this)">
                                ${key}. ${q.options[key]}
                            </button>
                        `).join('')}
                    </div>
                    <div class="explanation" id="exp-${q.id}">
                        <h4>üë©‚Äçüè´ Gi·∫£i th√≠ch c·ªßa Ms Mai An:</h4>
                        ${q.explain}
                    </div>
                </div>
                `;
            });
            container.innerHTML = qHtml + html;
        }

        // X·ª≠ l√Ω ch·ªçn ƒë√°p √°n
        function checkAnswer(qId, userChoice, btnElement) {
            if(!isRunning) {
                alert("Vui l√≤ng b·∫•m 'B·∫ÆT ƒê·∫¶U' ƒë·ªÉ t√≠nh gi·ªù l√†m b√†i!");
                return;
            }

            const qData = questions.find(q => q.id === qId);
            const card = document.getElementById(`card-${qId}`);
            const allBtns = card.querySelectorAll('.option-btn');
            const expBox = document.getElementById(`exp-${qId}`);

            // Disable buttons logic (One time choice? Or allow retry? 
            // Prompt implies immediate feedback. Let's lock after correct, or just show feedback)
            // Ms Mai An style: Cho ph√©p ch·ªçn l·∫°i nh∆∞ng ghi nh·∫≠n l·∫ßn ƒë·∫ßu. 
            // Nh∆∞ng ƒë·ªÉ ƒë∆°n gi·∫£n v√† chu·∫©n test: Lock sau khi ch·ªçn.
            
            // Reset styles first
            allBtns.forEach(b => b.classList.add('disabled'));
            allBtns.forEach(b => b.removeAttribute('onclick'));

            if (userChoice === qData.correct) {
                // ƒê√∫ng
                btnElement.classList.add('correct');
                playSound('correct');
                score++;
                fireConfetti(btnElement);
            } else {
                // Sai
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight ƒë√∫ng
                allBtns.forEach(b => {
                    if (b.innerText.startsWith(qData.correct)) b.classList.add('correct');
                });
            }
            
            // Hi·ªán gi·∫£i th√≠ch
            expBox.style.display = 'block';
            answeredCount++;
        }

        // Timer Logic
        function toggleTimer() {
            const btn = document.getElementById('timer-btn');
            if (!isRunning) {
                isRunning = true;
                btn.innerText = "T·∫†M D·ª™NG";
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) {
                        finishExam();
                    }
                }, 1000);
            } else {
                isRunning = false;
                btn.innerText = "TI·∫æP T·ª§C";
                clearInterval(timerInterval);
            }
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            const s = (timeLeft % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${m}:${s}`;
        }

        // Translation Toggle
        function toggleTrans(id) {
            const el = document.getElementById(`trans-${id}`);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }

        // K·∫øt th√∫c b√†i
        function finishExam() {
            clearInterval(timerInterval);
            isRunning = false;
            document.getElementById('timer-btn').style.display = 'none';

            const modal = document.getElementById('result-modal');
            const scoreTxt = document.getElementById('final-score');
            const msg = document.getElementById('feedback-msg');

            scoreTxt.innerText = `${score}/${questions.length}`;
            
            const percent = (score / questions.length) * 100;
            if (percent === 100) msg.innerText = "üèÜ Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i ngo·∫°i ng·ªØ!";
            else if (percent >= 80) msg.innerText = "üåü Gi·ªèi l·∫Øm! Ch·ªâ c√≤n m·ªôt ch√∫t n·ªØa l√† ho√†n h·∫£o.";
            else if (percent >= 50) msg.innerText = "üëç Kh√° t·ªët. H√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n nh√©.";
            else msg.innerText = "üí™ C·ªë l√™n! H√£y th·ª≠ l·∫°i l·∫ßn n·ªØa n√†o.";

            modal.style.display = 'flex';
            
            if(percent >= 80) launchBigConfetti();
        }

        // Confetti Effect (Minimalist Version)
        function fireConfetti(element) {
            // Simple particle burst simulation via CSS/JS would be huge. 
            // Using a simple CSS animation trigger on the button instead.
            // But let's create a few DOM elements for fun.
            const rect = element.getBoundingClientRect();
            for(let i=0; i<10; i++) {
                const p = document.createElement('div');
                p.style.position = 'fixed';
                p.style.left = rect.left + rect.width/2 + 'px';
                p.style.top = rect.top + 'px';
                p.style.width = '8px';
                p.style.height = '8px';
                p.style.background = ['#ff0', '#f00', '#0f0', '#00f'][Math.floor(Math.random()*4)];
                p.style.borderRadius = '50%';
                p.style.transition = 'all 1s ease-out';
                p.style.zIndex = '9999';
                document.body.appendChild(p);
                
                setTimeout(() => {
                    p.style.transform = `translate(${Math.random()*100-50}px, ${Math.random()*100-150}px)`;
                    p.style.opacity = 0;
                }, 10);
                setTimeout(() => p.remove(), 1000);
            }
        }

        function launchBigConfetti() {
            // Placeholder for full screen celebration
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
            // Since we can't import libraries easily in single file without CDN, 
            // we rely on the modal popping up and the score color.
        }

        // Init
        renderQuestions();

    </script>
</body>
</html>


