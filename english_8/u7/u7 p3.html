<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #8854C0; /* T√≠m h·ªìng nh·∫°t */
            --secondary-color: #00C9A7; /* Xanh ng·ªçc */
            --correct-color: #00D26A; /* Xanh l√° */
            --wrong-color: #FF4757; /* ƒê·ªè cam */
            --bg-color: #f0f3f8;
            --card-bg: #ffffff;
            --text-color: #2f3542;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#8854C0 0.8px, transparent 0.8px), radial-gradient(#8854C0 0.8px, var(--bg-color) 0.8px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* HEADER */
        header {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 4px solid var(--primary-color);
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sub-header {
            color: #57606f;
            font-size: 1.1rem;
            margin-top: 5px;
            font-weight: 600;
        }

        /* CARD STYLES */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.05);
            border: 2px solid #e1e1e1;
        }

        .reading-passage {
            background-color: #fff4e6;
            border-left: 5px solid var(--secondary-color);
            padding: 20px;
            border-radius: 10px;
            line-height: 1.8;
            font-size: 1.1rem;
            margin-bottom: 20px;
            white-space: pre-wrap; /* Gi·ªØ ƒë·ªãnh d·∫°ng d√≤ng */
        }

        .passage-title {
            color: var(--secondary-color);
            font-weight: 800;
            margin-bottom: 15px;
            font-size: 1.4rem;
            text-align: center;
        }

        /* GLOSSARY TABLE */
        .glossary-box {
            margin-top: 20px;
            border: 2px solid #dfe4ea;
            border-radius: 15px;
            overflow: hidden;
        }
        .glossary-header {
            background: var(--primary-color);
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-family: 'Quicksand', sans-serif;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th {
            background-color: #f1f2f6;
            color: var(--primary-color);
        }
        tr:hover {
            background-color: #f8f9fa;
        }

        /* QUESTION STYLES */
        .question-block {
            margin-bottom: 30px;
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #f1f2f6;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2f3542;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe4ea;
            border-bottom: 6px solid #dfe4ea; /* 3D effect */
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            position: relative;
        }

        .option-btn:hover {
            transform: scale(1.02);
            border-color: var(--secondary-color);
        }

        .option-btn:active {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }

        /* FEEDBACK STATES */
        .option-btn.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: #00b85c;
            border-bottom-color: #009e4f;
        }

        .option-btn.wrong {
            background-color: var(--wrong-color);
            color: white;
            border-color: #ff2e40;
            border-bottom-color: #d61c2d;
            animation: shake 0.5s;
        }

        /* EXPLANATION BOX */
        .explanation {
            display: none; /* Hidden initially */
            margin-top: 15px;
            background: #f8f9fa;
            border: 2px dashed var(--primary-color);
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.4s ease-out;
        }

        .exp-header {
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exp-content p {
            margin: 5px 0;
            line-height: 1.6;
        }

        .highlight {
            font-weight: bold;
            color: var(--primary-color);
        }

        .exp-detail {
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid var(--secondary-color);
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* CONFETTI CANVAS */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        /* SUBMIT BTN */
        .submit-section {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 60px;
        }

        .submit-btn {
            background: var(--primary-color);
            color: white;
            font-size: 1.5rem;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            border-bottom: 8px solid #6c429c;
            cursor: pointer;
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            transition: all 0.2s;
        }

        .submit-btn:active {
            transform: translateY(6px);
            border-bottom-width: 2px;
        }

        /* MODAL SCORE */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            max-width: 400px;
            animation: zoomIn 0.4s;
            border: 5px solid var(--secondary-color);
        }
        @keyframes zoomIn {
            from {transform: scale(0.5); opacity: 0;}
            to {transform: scale(1); opacity: 1;}
        }
    </style>
</head>
<body>

    <header>
        <h1>B√†i Ki·ªÉm Tra ƒê·ªçc Hi·ªÉu</h1>
        <div class="sub-header">Gi√°o vi√™n: Ms Mai An ULIS | M·ª©c ƒë·ªô: Th·∫°c s·ªπ Si√™u C·∫•p</div>
    </header>

    <div class="container">
        <div class="card">
            <h2 class="passage-title">PASSAGE 1: TYPES OF POLLUTION</h2>
            <div class="reading-passage">Pollution is any contamination of the environment which causes harm to the environment or the inhabitants of the environment. There are three main kinds of pollution.
Air pollution can be caused by liquids, or gases that make the air harmful to breathe. There are two main types of air pollution: primary and secondary. Primary pollutants enter the air directly, like smoke from factories and car exhaust. Secondary pollutants are chemicals that mix together to pollute the air, like mixtures of emissions from vehicles and factory smoke that change to form more dangerous pollutants in the air and sunlight.
Soil pollution can be caused by pesticides, leakage from chemical tanks, oil spills, and other chemicals which get into the soil by dumping or accidental contamination. Soil pollution can also cause water pollution when underground water becomes contaminated by coming into contact with the polluted soil.
Water pollution can be caused by waste products, sewage, oil spills, and litter in streams, rivers, lakes, and oceans. Some scientists believe that water pollution is the largest cause of death and disease in the world, causing about 14,000 deaths in the world each day.
It is not possible for anyone to predict the exact timing and effects of global pollution and global climate change brought about by pollution. There is general agreement by scientists that the global climate will continue to change, the intensity of weather effects will continue to increase, and some species of animals will become extinct.</div>
            
            <div class="glossary-box">
                <div class="glossary-header">üìö ACADEMIC GLOSSARY (B1-C2)</div>
                <table>
                    <thead><tr><th>Word</th><th>Type</th><th>Meaning (Vietnamese)</th></tr></thead>
                    <tbody>
                        <tr><td><b>Contamination</b></td><td>(n)</td><td>S·ª± √¥ nhi·ªÖm, s·ª± l√†m b·∫©n</td></tr>
                        <tr><td><b>Inhabitant</b></td><td>(n)</td><td>C∆∞ d√¢n, sinh v·∫≠t s·ªëng t·∫°i m·ªôt n∆°i</td></tr>
                        <tr><td><b>Primary pollutant</b></td><td>(np)</td><td>Ch·∫•t g√¢y √¥ nhi·ªÖm s∆° c·∫•p (tr·ª±c ti·∫øp)</td></tr>
                        <tr><td><b>Exhaust</b></td><td>(n)</td><td>Kh√≠ th·∫£i (t·ª´ xe c·ªô)</td></tr>
                        <tr><td><b>Emission</b></td><td>(n)</td><td>S·ª± ph√°t th·∫£i, kh√≠ th·∫£i</td></tr>
                        <tr><td><b>Pesticide</b></td><td>(n)</td><td>Thu·ªëc tr·ª´ s√¢u</td></tr>
                        <tr><td><b>Leakage</b></td><td>(n)</td><td>S·ª± r√≤ r·ªâ</td></tr>
                        <tr><td><b>Sewage</b></td><td>(n)</td><td>N∆∞·ªõc th·∫£i c·ªëng r√£nh</td></tr>
                        <tr><td><b>Intensity</b></td><td>(n)</td><td>C∆∞·ªùng ƒë·ªô, ƒë·ªô m·∫°nh</td></tr>
                        <tr><td><b>Extinct</b></td><td>(adj)</td><td>Tuy·ªát ch·ªßng</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="exercise-1-questions"></div>

        <div class="card">
            <h2 class="passage-title">PASSAGE 2: SAVING THE ENVIRONMENT</h2>
            <div class="reading-passage">Saving the Environment: One Home at a Time

Pollution can be seen not only throughout the world, but also in our own homes. It comes from household chemicals, the amount of water people use and the waste people produce and throw away. What can be done to stop this pollution? Surprisingly, a person can help save the environment by doing simple things.
First, we need to recycle, which allows products to be used over and over again. Recycling can also reduce the number of trees cut down to produce paper products. It takes very little effort. It is not hard to place plastic and glass bottles, aluminum cans and paper in a bin. Anyone can do it.
Second, we need to control the amount of water used at home. It can be conserved by taking short showers instead of baths, repairing leaky faucets, using the dishwasher or washing machine only when fully loaded, or simply turning the faucet off while brushing your teeth.
Third, we need to reduce waste. We need to recycle whenever possible, but should also try to use this waste effectively. For example, grass clippings and food scraps can be made into compost for plants. The average person produces 4.3 pounds of waste every day, but we can reduce that amount by recycling and reusing.
If we do our part in our own homes, we can help keep the planet from becoming more polluted.</div>

            <div class="glossary-box">
                <div class="glossary-header">üìö ACADEMIC GLOSSARY (B1-C2)</div>
                <table>
                    <thead><tr><th>Word</th><th>Type</th><th>Meaning (Vietnamese)</th></tr></thead>
                    <tbody>
                        <tr><td><b>Household</b></td><td>(adj/n)</td><td>Thu·ªôc v·ªÅ h·ªô gia ƒë√¨nh</td></tr>
                        <tr><td><b>Recycle</b></td><td>(v)</td><td>T√°i ch·∫ø</td></tr>
                        <tr><td><b>Conserve</b></td><td>(v)</td><td>B·∫£o t·ªìn, ti·∫øt ki·ªám (t√†i nguy√™n)</td></tr>
                        <tr><td><b>Faucet</b></td><td>(n)</td><td>V√≤i n∆∞·ªõc (Anh-M·ªπ)</td></tr>
                        <tr><td><b>Clipping</b></td><td>(n)</td><td>M·∫©u v·ª•n (c·ªè c·∫Øt ra)</td></tr>
                        <tr><td><b>Scrap</b></td><td>(n)</td><td>Ph·∫ø li·ªáu, ƒë·ªì th·ª´a</td></tr>
                        <tr><td><b>Compost</b></td><td>(n)</td><td>Ph√¢n h·ªØu c∆°</td></tr>
                        <tr><td><b>Average</b></td><td>(adj)</td><td>Trung b√¨nh</td></tr>
                        <tr><td><b>Effort</b></td><td>(n)</td><td>N·ªó l·ª±c, c√¥ng s·ª©c</td></tr>
                        <tr><td><b>Effectively</b></td><td>(adv)</td><td>M·ªôt c√°ch hi·ªáu qu·∫£</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="exercise-2-questions"></div>

        <div class="card">
            <h2 class="passage-title">PASSAGE 3: CALIFORNIA & NATIONAL PARKS</h2>
            <div class="reading-passage">California has 8 national parks and 20 national forests, more than any other state. Yosemite National Park is one of the most visited parks. It is famous for its waterfalls and granite cliffs. Many rock climbers go to Yosemite to climb a rock wall named El Capitan. Point Reyes National Seashore is on a peninsula north of San Francisco. It is a good place to see harbor seals, sea lions, and many kinds of birds. Disneyland in Anaheim is another California tourist attraction. This large amusement park was created by cartoonist Walt Disney. It features a fairyland castle, a haunted mansion, a jungle safari, and many other attractions and rides.
San Diego has a world-famous zoo. As you wander through its Rain Forest Aviary, brightly colored tropical birds fly by. You will think you are on safari in its outdoor Wild Animal Park, north of San Diego. Sea World in San Diego is a great place to watch whales and dolphins perform. California's sunny climate, long coastline, and natural beauty have made it the most popular tourist state in the United States.</div>

            <div class="glossary-box">
                <div class="glossary-header">üìö ACADEMIC GLOSSARY (B1-C2)</div>
                <table>
                    <thead><tr><th>Word</th><th>Type</th><th>Meaning (Vietnamese)</th></tr></thead>
                    <tbody>
                        <tr><td><b>Granite</b></td><td>(n)</td><td>ƒê√° hoa c∆∞∆°ng</td></tr>
                        <tr><td><b>Cliff</b></td><td>(n)</td><td>V√°ch ƒë√°</td></tr>
                        <tr><td><b>Peninsula</b></td><td>(n)</td><td>B√°n ƒë·∫£o</td></tr>
                        <tr><td><b>Attraction</b></td><td>(n)</td><td>ƒêi·ªÉm thu h√∫t du l·ªãch</td></tr>
                        <tr><td><b>Amusement park</b></td><td>(np)</td><td>C√¥ng vi√™n gi·∫£i tr√≠</td></tr>
                        <tr><td><b>Mansion</b></td><td>(n)</td><td>Bi·ªát th·ª± l·ªõn, l√¢u ƒë√†i</td></tr>
                        <tr><td><b>Safari</b></td><td>(n)</td><td>Cu·ªôc h√†nh tr√¨nh quan s√°t ƒë·ªông v·∫≠t hoang d√£</td></tr>
                        <tr><td><b>Aviary</b></td><td>(n)</td><td>Chu·ªìng chim l·ªõn (m√¥ ph·ªèng t·ª± nhi√™n)</td></tr>
                        <tr><td><b>Coastline</b></td><td>(n)</td><td>ƒê∆∞·ªùng b·ªù bi·ªÉn</td></tr>
                        <tr><td><b>Tropical</b></td><td>(adj)</td><td>Thu·ªôc v√πng nhi·ªát ƒë·ªõi</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="exercise-3-questions"></div>

        <div class="submit-section">
            <button class="submit-btn" onclick="showFinalScore()">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <div id="scoreModal" class="modal">
        <div class="modal-content">
            <h2 style="color:var(--primary-color)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <p style="font-size: 4rem; margin: 20px 0; font-weight: 800; color: var(--secondary-color);" id="finalScoreDisplay">0/15</p>
            <p id="complimentText" style="font-size: 1.2rem; color: #57606f;">B·∫°n l√†m t·ªët l·∫Øm!</p>
            <button class="submit-btn" onclick="document.getElementById('scoreModal').style.display='none'" style="font-size: 1rem; padding: 10px 30px;">ƒê√≥ng</button>
        </div>
    </div>

    <script>
        // D·ªÆ LI·ªÜU C√ÇU H·ªéI
        const questionsData = [
            // PASSAGE 1
            {
                id: "p1q1",
                passageId: 1,
                question: "1. What is the most suitable title for the passage?",
                options: {
                    A: "Solutions to pollution",
                    B: "Environmental issues",
                    C: "Causes and effects of pollution",
                    D: "Environmental impacts"
                },
                correct: "C",
                explanation: {
                    transQ: "Ti√™u ƒë·ªÅ ph√π h·ª£p nh·∫•t cho ƒëo·∫°n vƒÉn l√† g√¨?",
                    vocab: "A. C√°c gi·∫£i ph√°p cho √¥ nhi·ªÖm<br>B. C√°c v·∫•n ƒë·ªÅ m√¥i tr∆∞·ªùng<br>C. Nguy√™n nh√¢n v√† ·∫£nh h∆∞·ªüng c·ªßa √¥ nhi·ªÖm<br>D. T√°c ƒë·ªông m√¥i tr∆∞·ªùng",
                    whyCorrect: "B√†i ƒë·ªçc chia l√†m c√°c ƒëo·∫°n n√≥i r√µ v·ªÅ: 'Three main kinds of pollution' (C√°c lo·∫°i √¥ nhi·ªÖm ch√≠nh), nguy√™n nh√¢n (caused by...) v√† h·∫≠u qu·∫£ (effects/harm). Do ƒë√≥ C bao qu√°t nh·∫•t.",
                    whyWrong: "A sai v√¨ b√†i kh√¥ng t·∫≠p trung v√†o gi·∫£i ph√°p. B v√† D qu√° chung chung ho·∫∑c ch·ªâ n√≥i v·ªÅ m·ªôt kh√≠a c·∫°nh."
                }
            },
            {
                id: "p1q2",
                passageId: 1,
                question: "2. What kind of pollution is considered as the cause of the most death and disease?",
                options: {
                    A: "Air pollution",
                    B: "Water pollution",
                    C: "Soil pollution",
                    D: "None of the above"
                },
                correct: "B",
                explanation: {
                    transQ: "Lo·∫°i √¥ nhi·ªÖm n√†o ƒë∆∞·ª£c coi l√† nguy√™n nh√¢n g√¢y ra nhi·ªÅu c√°i ch·∫øt v√† b·ªánh t·∫≠t nh·∫•t?",
                    vocab: "A. √î nhi·ªÖm kh√¥ng kh√≠<br>B. √î nhi·ªÖm n∆∞·ªõc<br>C. √î nhi·ªÖm ƒë·∫•t<br>D. Kh√¥ng ƒë√°p √°n n√†o",
                    whyCorrect: "D·∫´n ch·ª©ng ƒëo·∫°n 4: 'Some scientists believe that <b>water pollution</b> is the largest cause of death and disease in the world'.",
                    whyWrong: "Th√¥ng tin trong b√†i ch·ªâ ƒë√≠ch danh Water Pollution."
                }
            },
            {
                id: "p1q3",
                passageId: 1,
                question: "3. What is NOT a cause of soil pollution?",
                options: {
                    A: "Chemicals",
                    B: "Pesticides",
                    C: "Oil spills",
                    D: "Exhaust fumes"
                },
                correct: "D",
                explanation: {
                    transQ: "C√°i g√¨ KH√îNG PH·∫¢I l√† nguy√™n nh√¢n g√¢y √¥ nhi·ªÖm ƒë·∫•t?",
                    vocab: "A. H√≥a ch·∫•t<br>B. Thu·ªëc tr·ª´ s√¢u<br>C. Tr√†n d·∫ßu<br>D. Kh√≠ th·∫£i",
                    whyCorrect: "D·∫´n ch·ª©ng ƒëo·∫°n 3: 'Soil pollution can be caused by pesticides (B), leakage from chemical tanks (A), oil spills (C)...'.",
                    whyWrong: "Exhaust fumes (kh√≠ th·∫£i) ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn ·ªü ƒëo·∫°n 2 v·ªÅ 'Air pollution' (√¥ nhi·ªÖm kh√¥ng kh√≠), kh√¥ng ph·∫£i ƒë·∫•t."
                }
            },
            {
                id: "p1q4",
                passageId: 1,
                question: "4. What kind of pollution may oil spills cause?",
                options: {
                    A: "Air pollution",
                    B: "Water pollution",
                    C: "Soil pollution",
                    D: "Both B and C are correct"
                },
                correct: "D",
                explanation: {
                    transQ: "Tr√†n d·∫ßu c√≥ th·ªÉ g√¢y ra lo·∫°i √¥ nhi·ªÖm n√†o?",
                    vocab: "A. Kh√¥ng kh√≠<br>B. N∆∞·ªõc<br>C. ƒê·∫•t<br>D. C·∫£ B v√† C ƒë·ªÅu ƒë√∫ng",
                    whyCorrect: "D·∫´n ch·ª©ng: ƒêo·∫°n 3 nh·∫Øc ƒë·∫øn 'oil spills' g√¢y Soil pollution. ƒêo·∫°n 4 nh·∫Øc ƒë·∫øn 'oil spills' g√¢y Water pollution.",
                    whyWrong: "V√¨ n√≥ g√¢y ra c·∫£ hai lo·∫°i √¥ nhi·ªÖm tr√™n n√™n ch·ªçn D."
                }
            },
            {
                id: "p1q5",
                passageId: 1,
                question: "5. According to the agreement of scientists, what is NOT environmental effect caused by pollution?",
                options: {
                    A: "Disappearance of the rainforests",
                    B: "Intensity of weather effects",
                    C: "Animal extinction",
                    D: "Global climate change"
                },
                correct: "A",
                explanation: {
                    transQ: "Theo s·ª± ƒë·ªìng thu·∫≠n c·ªßa c√°c nh√† khoa h·ªçc, ƒëi·ªÅu g√¨ KH√îNG PH·∫¢I l√† t√°c ƒë·ªông m√¥i tr∆∞·ªùng do √¥ nhi·ªÖm?",
                    vocab: "A. S·ª± bi·∫øn m·∫•t c·ªßa r·ª´ng m∆∞a<br>B. C∆∞·ªùng ƒë·ªô ·∫£nh h∆∞·ªüng th·ªùi ti·∫øt<br>C. S·ª± tuy·ªát ch·ªßng ƒë·ªông v·∫≠t<br>D. Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u to√†n c·∫ßu",
                    whyCorrect: "D·∫´n ch·ª©ng ƒëo·∫°n cu·ªëi: Li·ªát k√™ 'global climate will continue to change' (D), 'intensity of weather effects' (B), 'animals will become extinct' (C).",
                    whyWrong: "B√†i ƒë·ªçc kh√¥ng nh·∫Øc ƒë·∫øn vi·ªác r·ª´ng m∆∞a bi·∫øn m·∫•t (Rainforests)."
                }
            },

            // PASSAGE 2
            {
                id: "p2q1",
                passageId: 2,
                question: "1. Pollution is caused from the following sources except _____________.",
                options: {
                    A: "water in rivers",
                    B: "water from households",
                    C: "wastes",
                    D: "house chemicals"
                },
                correct: "A",
                explanation: {
                    transQ: "√î nhi·ªÖm (trong b√†i n√†y) b·∫Øt ngu·ªìn t·ª´ c√°c ngu·ªìn sau ngo·∫°i tr·ª´...",
                    vocab: "A. N∆∞·ªõc ·ªü s√¥ng ng√≤i<br>B. N∆∞·ªõc t·ª´ h·ªô gia ƒë√¨nh<br>C. R√°c th·∫£i<br>D. H√≥a ch·∫•t gia d·ª•ng",
                    whyCorrect: "D·∫´n ch·ª©ng ƒëo·∫°n 1: 'It comes from household chemicals (D), the amount of water people use (B) and the waste people produce (C)'.",
                    whyWrong: "'Water in rivers' l√† n∆°i b·ªã √¥ nhi·ªÖm (th∆∞·ªùng th·∫•y ·ªü b√†i kh√°c) ch·ª© kh√¥ng ph·∫£i ngu·ªìn g√¢y √¥ nhi·ªÖm ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn trong ƒëo·∫°n m·ªü ƒë·∫ßu v·ªÅ 'homes'."
                }
            },
            {
                id: "p2q2",
                passageId: 2,
                question: "2. Recycling can help us _____________.",
                options: {
                    A: "never cut down trees",
                    B: "produce more paper products",
                    C: "place garbage bins easily",
                    D: "use products again and again"
                },
                correct: "D",
                explanation: {
                    transQ: "T√°i ch·∫ø c√≥ th·ªÉ gi√∫p ch√∫ng ta...",
                    vocab: "A. Kh√¥ng bao gi·ªù ch·∫∑t c√¢y<br>B. S·∫£n xu·∫•t nhi·ªÅu gi·∫•y h∆°n<br>C. ƒê·∫∑t th√πng r√°c d·ªÖ d√†ng<br>D. S·ª≠ d·ª•ng s·∫£n ph·∫©m l·∫∑p ƒëi l·∫∑p l·∫°i",
                    whyCorrect: "D·∫´n ch·ª©ng ƒëo·∫°n 2: '...recycle, which allows products to be used over and over again'.",
                    whyWrong: "A sai v√¨ b√†i ch·ªâ n√≥i 'reduce' (gi·∫£m) ch·∫∑t c√¢y ch·ª© kh√¥ng ph·∫£i 'never'. B v√† C kh√¥ng ƒë√∫ng ng·ªØ c·∫£nh."
                }
            },
            {
                id: "p2q3",
                passageId: 2,
                question: "3. In order to save water, we can do all of the following things except _____________.",
                options: {
                    A: "fully use the washing machine",
                    B: "repair leaky faucets",
                    C: "take short showers instead of baths",
                    D: "tum the faucet off while brushing your teeth"
                },
                correct: "A",
                explanation: {
                    transQ: "ƒê·ªÉ ti·∫øt ki·ªám n∆∞·ªõc, ta c√≥ th·ªÉ l√†m nh·ªØng vi·ªác sau ngo·∫°i tr·ª´...",
                    vocab: "A. S·ª≠ d·ª•ng h·∫øt c√¥ng su·∫•t m√°y gi·∫∑t (C·ª•m t·ª´ d·ªÖ g√¢y hi·ªÉu l·∫ßm)<br>B. S·ª≠a v√≤i r√≤ r·ªâ<br>C. T·∫Øm v√≤i sen nhanh thay v√¨ t·∫Øm b·ªìn<br>D. T·∫Øt v√≤i khi ƒë√°nh rƒÉng",
                    whyCorrect: "Trong b√†i vi·∫øt: 'using the dishwasher or washing machine ONLY when fully loaded' (ch·ªâ d√πng khi ƒë·∫ßy t·∫£i). ƒê√°p √°n A vi·∫øt l√† 'fully use' (s·ª≠ d·ª•ng tri·ªát ƒë·ªÉ/s·ª≠ d·ª•ng nhi·ªÅu) m√† thi·∫øu ƒëi·ªÅu ki·ªán 'only when fully loaded' n√™n c√≥ th·ªÉ hi·ªÉu l√† d√πng l√£ng ph√≠ ho·∫∑c kh√¥ng ch√≠nh x√°c v·ªõi l·ªùi khuy√™n.",
                    whyWrong: "B, C, D ƒë·ªÅu l√† c√°c h√†nh ƒë·ªông ƒë∆∞·ª£c khuy·∫øn kh√≠ch tr·ª±c ti·∫øp trong ƒëo·∫°n 3."
                }
            },
            {
                id: "p2q4",
                passageId: 2,
                question: "4. Recycling helps to reduce waste because _____________.",
                options: {
                    A: "plants need to develop",
                    B: "waste can be recycled and reused",
                    C: "a person can do it in his home",
                    D: "an average man produces compost for plants"
                },
                correct: "B",
                explanation: {
                    transQ: "T√°i ch·∫ø gi√∫p gi·∫£m r√°c th·∫£i b·ªüi v√¨...",
                    vocab: "A. C√¢y c·ªëi c·∫ßn ph√°t tri·ªÉn<br>B. R√°c c√≥ th·ªÉ ƒë∆∞·ª£c t√°i ch·∫ø v√† t√°i s·ª≠ d·ª•ng<br>C. M·ªôt ng∆∞·ªùi c√≥ th·ªÉ l√†m ·ªü nh√†<br>D. Ng∆∞·ªùi b√¨nh th∆∞·ªùng l√†m ph√¢n b√≥n",
                    whyCorrect: "D·∫´n ch·ª©ng ƒëo·∫°n 3: 'but we can reduce that amount by recycling and reusing'. Vi·ªác t√°i s·ª≠ d·ª•ng bi·∫øn r√°c th√†nh v·∫≠t c√≥ √≠ch.",
                    whyWrong: "A, C, D kh√¥ng gi·∫£i th√≠ch tr·ª±c ti·∫øp nguy√™n nh√¢n 't·∫°i sao gi·∫£m l∆∞·ª£ng r√°c'."
                }
            },
            {
                id: "p2q5",
                passageId: 2,
                question: "5. The word \"It\" in paragraph 2 refers to _____________.",
                options: {
                    A: "cutting down",
                    B: "the number",
                    C: "recycling",
                    D: "effort"
                },
                correct: "C",
                explanation: {
                    transQ: "T·ª´ 'It' trong ƒëo·∫°n 2 √°m ch·ªâ ƒëi·ªÅu g√¨?",
                    vocab: "A. Vi·ªác ch·∫∑t c√¢y<br>B. S·ªë l∆∞·ª£ng<br>C. Vi·ªác t√°i ch·∫ø<br>D. N·ªó l·ª±c",
                    whyCorrect: "C√¢u tr∆∞·ªõc: 'Recycling can also reduce...'. C√¢u sau: 'It takes very little effort'. 'It' thay th·∫ø cho ch·ªß ng·ªØ 'Recycling'.",
                    whyWrong: "C√°c ƒë√°p √°n kh√°c kh√¥ng h·ª£p l√Ω v·ªÅ ng·ªØ ph√°p thay th·∫ø."
                }
            },

            // PASSAGE 3
            {
                id: "p3q1",
                passageId: 3,
                question: "1. Yosemite National Park _________________.",
                options: {
                    A: "is famous for its kinds of birds",
                    B: "is one of the 20 national parks in California",
                    C: "interests rock climbers with its El Capitan, a rock wall",
                    D: "is created by a cartoonist."
                },
                correct: "C",
                explanation: {
                    transQ: "V∆∞·ªùn qu·ªëc gia Yosemite...",
                    vocab: "A. N·ªïi ti·∫øng v√¨ c√°c lo√†i chim<br>B. L√† 1 trong 20 v∆∞·ªùn qu·ªëc gia ·ªü Cali<br>C. Thu h√∫t ng∆∞·ªùi leo n√∫i v·ªõi v√°ch ƒë√° El Capitan<br>D. ƒê∆∞·ª£c t·∫°o ra b·ªüi h·ªça sƒ© ho·∫°t h√¨nh",
                    whyCorrect: "D·∫´n ch·ª©ng: 'Many rock climbers go to Yosemite to climb a rock wall named El Capitan.'",
                    whyWrong: "A sai (Point Reyes m·ªõi c√≥ chim). B sai (Cali c√≥ 8 national parks, 20 national forests). D sai (Disneyland m·ªõi do h·ªça sƒ© t·∫°o ra)."
                }
            },
            {
                id: "p3q2",
                passageId: 3,
                question: "2. San Francisco _________________.",
                options: {
                    A: "is famous for its Point Reyes National Seashore",
                    B: "has its special waterfalls and granite cliffs",
                    C: "has more wildlife than anywhere else in California",
                    D: "attracts lots of young children"
                },
                correct: "A",
                explanation: {
                    transQ: "San Francisco...",
                    vocab: "A. N·ªïi ti·∫øng v·ªõi B·ªù bi·ªÉn Qu·ªëc gia Point Reyes<br>B. C√≥ th√°c n∆∞·ªõc ƒë·∫∑c bi·ªát<br>C. C√≥ nhi·ªÅu ƒë·ªông v·∫≠t hoang d√£ h∆°n b·∫•t c·ª© ƒë√¢u<br>D. Thu h√∫t tr·∫ª em",
                    whyCorrect: "D·∫´n ch·ª©ng: 'Point Reyes National Seashore is on a peninsula north of San Francisco.' M·∫∑c d√π n·∫±m ·ªü ph√≠a B·∫Øc, nh∆∞ng n√≥ ƒë∆∞·ª£c g·∫Øn li·ªÅn ƒë·ªãa danh n√†y trong b√†i.",
                    whyWrong: "B l√† c·ªßa Yosemite. C v√† D kh√¥ng c√≥ th√¥ng tin c·ª• th·ªÉ g·∫Øn v·ªõi San Francisco."
                }
            },
            {
                id: "p3q3",
                passageId: 3,
                question: "3. Anaheim attracts many tourists with its _________________.",
                options: {
                    A: "El Capitan",
                    B: "Wild Animal Park",
                    C: "Sea World",
                    D: "Disneyland"
                },
                correct: "D",
                explanation: {
                    transQ: "Anaheim thu h√∫t nhi·ªÅu du kh√°ch v·ªõi...",
                    vocab: "A. V√°ch ƒë√° El Capitan<br>B. C√¥ng vi√™n ƒë·ªông v·∫≠t hoang d√£<br>C. Th·∫ø gi·ªõi bi·ªÉn<br>D. Disneyland",
                    whyCorrect: "D·∫´n ch·ª©ng: 'Disneyland in Anaheim is another California tourist attraction.'",
                    whyWrong: "A ·ªü Yosemite. B v√† C ·ªü San Diego."
                }
            },
            {
                id: "p3q4",
                passageId: 3,
                question: "4. San Diego is worth visiting if you are _________________.",
                options: {
                    A: "a newly-married couple",
                    B: "an animal lover",
                    C: "an enthusiastic rock climber",
                    D: "a movie fan"
                },
                correct: "B",
                explanation: {
                    transQ: "San Diego ƒë√°ng gh√© thƒÉm n·∫øu b·∫°n l√†...",
                    vocab: "A. C·∫∑p ƒë√¥i m·ªõi c∆∞·ªõi<br>B. Ng∆∞·ªùi y√™u ƒë·ªông v·∫≠t<br>C. Ng∆∞·ªùi leo n√∫i nhi·ªát huy·∫øt<br>D. Ng∆∞·ªùi m√™ phim",
                    whyCorrect: "San Diego c√≥: 'world-famous zoo' (s·ªü th√∫), 'Wild Animal Park', 'Sea World' (c√° voi, c√° heo). T·∫•t c·∫£ ƒë·ªÅu li√™n quan ƒë·∫øn ƒë·ªông v·∫≠t.",
                    whyWrong: "C l√† cho Yosemite. A v√† D kh√¥ng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn."
                }
            },
            {
                id: "p3q5",
                passageId: 3,
                question: "5. Which of the following statements is true about California?",
                options: {
                    A: "It has the most national parks and forests of the US states.",
                    B: "Its Disneyland with the fairyland castle is the most famous national park.",
                    C: "It attracts lots of tourists with its modern life.",
                    D: "It is a peninsula north of the United States of America."
                },
                correct: "A",
                explanation: {
                    transQ: "C√¢u n√†o sau ƒë√¢y ƒë√∫ng v·ªÅ California?",
                    vocab: "A. C√≥ nhi·ªÅu v∆∞·ªùn qu·ªëc gia v√† r·ª´ng nh·∫•t c√°c bang M·ªπ<br>B. Disneyland l√† v∆∞·ªùn qu·ªëc gia n·ªïi ti·∫øng nh·∫•t<br>C. Thu h√∫t kh√°ch b·∫±ng cu·ªôc s·ªëng hi·ªán ƒë·∫°i<br>D. L√† b√°n ƒë·∫£o ph√≠a B·∫Øc n∆∞·ªõc M·ªπ",
                    whyCorrect: "D·∫´n ch·ª©ng c√¢u ƒë·∫ßu ti√™n: 'California has 8 national parks and 20 national forests, more than any other state.'",
                    whyWrong: "B sai v√¨ Disneyland l√† c√¥ng vi√™n gi·∫£i tr√≠, kh√¥ng ph·∫£i 'national park'. D sai v√¨ Point Reyes m·ªõi l√† b√°n ƒë·∫£o."
                }
            }
        ];

        let score = 0;
        const totalQuestions = questionsData.length;

        // √Çm thanh Base64 (ƒê·ªÉ ch·∫°y offline)
        const sndCorrect = new Audio("data:audio/mp3;base64,//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//NExAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"); // Placeholder short silence if needed, using simulated sounds below
        // Fake sounds using AudioContext for cleaner implementation without massive base64 strings
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // Ding sound (High pitch sine wave)
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
                fireConfetti();
            } else {
                // Wrong sound (Low pitch sawtooth)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // RENDER QUESTIONS
        function renderQuestions() {
            questionsData.forEach(q => {
                let targetDiv = "";
                if (q.passageId === 1) targetDiv = "exercise-1-questions";
                if (q.passageId === 2) targetDiv = "exercise-2-questions";
                if (q.passageId === 3) targetDiv = "exercise-3-questions";

                const html = `
                    <div class="question-block" id="q-${q.id}">
                        <div class="question-text">${q.question}</div>
                        <div class="options-grid">
                            ${Object.keys(q.options).map(key => `
                                <button class="option-btn" onclick="checkAnswer('${q.id}', '${key}', this)">
                                    <span style="color:var(--primary-color); font-weight:800;">${key}.</span> ${q.options[key]}
                                </button>
                            `).join('')}
                        </div>
                        
                        <div class="explanation" id="exp-${q.id}">
                            <div class="exp-header">
                                <span>üë©‚Äçüè´</span> C√¥ Mai An gi·∫£i th√≠ch:
                            </div>
                            <div class="exp-content">
                                <p><b>D·ªãch c√¢u h·ªèi:</b> ${q.explanation.transQ}</p>
                                <div class="exp-detail">
                                    <p class="highlight">Ph√¢n t√≠ch t·ª´ v·ª±ng:</p>
                                    <p>${q.explanation.vocab}</p>
                                </div>
                                <p>‚úÖ <b style="color:var(--correct-color)">T·∫°i sao ƒê√öNG:</b> ${q.explanation.whyCorrect}</p>
                                <p>‚ùå <b style="color:var(--wrong-color)">T·∫°i sao SAI:</b> ${q.explanation.whyWrong}</p>
                            </div>
                        </div>
                    </div>
                `;
                document.getElementById(targetDiv).innerHTML += html;
            });
        }

        // CHECK ANSWER LOGIC
        function checkAnswer(qId, selectedKey, btnElement) {
            // Prevent re-clicking if already answered correctly (optional, but keep interactive)
            // Reset styles for this question first
            const container = document.getElementById(`q-${qId}`);
            const allBtns = container.querySelectorAll('.option-btn');
            
            // Find data for this question
            const qData = questionsData.find(q => q.id === qId);

            // Remove previous classes
            allBtns.forEach(btn => {
                btn.classList.remove('correct', 'wrong');
            });

            if (selectedKey === qData.correct) {
                // CORRECT
                btnElement.classList.add('correct');
                playSound('correct');
            } else {
                // WRONG
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight the correct one automatically? No, let them try or see explanation.
                // But Prompt says "Show explanation immediately".
            }

            // Always Show Explanation
            document.getElementById(`exp-${qId}`).classList.add('show');
        }

        // FINAL SCORE
        function showFinalScore() {
            // Count correct answers based on class 'correct' present on buttons
            let currentScore = document.querySelectorAll('.option-btn.correct').length;
            
            // Random Compliment
            const compliments = [
                "Xu·∫•t s·∫Øc! C√¥ Mai An r·∫•t t·ª± h√†o!",
                "Tuy·ªát v·ªùi! Em ƒë√£ n·∫Øm b√†i r·∫•t ch·∫Øc!",
                "C·ªë g·∫Øng l√™n! L·∫ßn sau s·∫Ω t·ªët h∆°n n·ªØa!",
                "Em l√† m·ªôt si√™u sao ti·∫øng Anh t∆∞∆°ng lai!"
            ];
            const randComp = compliments[Math.floor(Math.random() * compliments.length)];

            document.getElementById('finalScoreDisplay').innerText = `${currentScore}/${totalQuestions}`;
            document.getElementById('complimentText').innerText = randComp;
            document.getElementById('scoreModal').style.display = 'flex';
            
            if (currentScore > 10) fireConfetti();
        }

        // CONFETTI EFFECT
        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            const colors = ['#8854C0', '#00C9A7', '#FF4757', '#eccc68'];

            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 10 + 5,
                    speed: Math.random() * 5 + 2,
                    angle: Math.random() * 360
                });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let active = false;
                particles.forEach(p => {
                    p.y += p.speed;
                    p.angle += 2;
                    if (p.y < canvas.height) active = true;
                    
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.angle * Math.PI / 180);
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                    ctx.restore();
                });
                
                if (active) requestAnimationFrame(draw);
                else ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            draw();
        }

        // Initialize
        renderQuestions();

    </script>
</body>
</html>