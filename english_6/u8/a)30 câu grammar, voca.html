<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ti·∫øng Anh 6 - Unit 8: Sports & Games | Ms Mai An ULIS</title>
    <!-- Google Fonts: Nunito for rounded, friendly text -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-color: #8854C0; /* Purple */
            --primary-dark: #6c429c;
            --secondary-color: #00C9A7; /* Teal */
            --secondary-dark: #009e82;
            --correct-color: #00D26A; /* Green */
            --correct-dark: #00a855;
            --wrong-color: #FF4757; /* Red/Orange */
            --wrong-dark: #d6303e;
            --bg-color: #f0f4f8;
            --text-color: #2f3542;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dfe4ea 15%, transparent 16%), radial-gradient(#dfe4ea 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 20px;
            background: white;
            padding: 15px 30px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 2px solid #eee;
            width: 100%;
            max-width: 800px;
            position: relative;
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .teacher-name {
            font-size: 0.9rem;
            color: #747d8c;
            font-weight: 600;
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Game Container */
        .game-container {
            width: 100%;
            max-width: 800px;
            perspective: 1000px;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: #dfe4ea;
            border-radius: 15px;
            height: 20px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 2px solid white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.05);
        }

        .progress-bar {
            height: 100%;
            background-color: var(--secondary-color);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 15px;
        }

        /* Question Card */
        .card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.15);
            margin-bottom: 20px;
            position: relative;
            border-bottom: 8px solid #e1e1e1;
            transition: transform 0.3s ease;
        }

        .question-number {
            position: absolute;
            top: -15px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 0.9rem;
            box-shadow: 0 4px 0 var(--primary-dark);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            margin-top: 10px;
            margin-bottom: 25px;
            line-height: 1.5;
            color: #2f3542;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .btn-option {
            background: white;
            border: 2px solid #e1e1e1;
            border-bottom: 6px solid #e1e1e1;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.1s ease;
            text-align: left;
            position: relative;
            display: flex;
            align-items: center;
        }

        .btn-option:active {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }

        .btn-option:hover:not(:disabled) {
            transform: scale(1.02);
            border-color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .btn-option.correct {
            background-color: var(--correct-color);
            border-color: var(--correct-dark);
            border-bottom-color: var(--correct-dark);
            color: white;
        }

        .btn-option.wrong {
            background-color: var(--wrong-color);
            border-color: var(--wrong-dark);
            border-bottom-color: var(--wrong-dark);
            color: white;
            animation: shake 0.5s;
        }

        .option-letter {
            background: rgba(0,0,0,0.05);
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin-right: 12px;
            font-size: 0.9rem;
            font-weight: 800;
        }

        .btn-option.correct .option-letter,
        .btn-option.wrong .option-letter {
            background: rgba(255,255,255,0.3);
        }

        /* Explanation Box (Ms Mai An's Corner) */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 25px;
            background: #f8f0ff;
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            padding: 20px;
            animation: slideIn 0.4s ease-out;
            position: relative;
        }

        .explanation-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            color: var(--primary-color);
            font-weight: 800;
            font-size: 1.1rem;
        }

        .teacher-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 1.2rem;
            box-shadow: 0 3px 0 var(--primary-dark);
        }

        .explanation-content h4 {
            margin: 10px 0 5px 0;
            color: #57606f;
            font-size: 0.95rem;
            text-transform: uppercase;
        }

        .explanation-content p {
            margin: 5px 0 10px 0;
            line-height: 1.5;
            font-size: 1rem;
        }

        /* Vocabulary Table */
        .vocab-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            font-size: 0.95rem;
        }
        
        .vocab-table th {
            background: var(--secondary-color);
            color: white;
            padding: 8px;
            text-align: left;
            font-size: 0.85rem;
        }

        .vocab-table td {
            padding: 8px;
            border-bottom: 1px solid #eee;
            color: #2f3542;
        }

        .vocab-table td:first-child {
            font-weight: 700;
            color: var(--primary-color);
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .btn-nav {
            padding: 12px 25px;
            border-radius: 50px;
            border: none;
            font-family: inherit;
            font-weight: 700;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.1s;
            border-bottom: 4px solid rgba(0,0,0,0.2);
        }

        .btn-nav:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        .btn-next {
            background-color: var(--secondary-color);
            color: white;
            display: none; /* Hidden until answered */
            margin-left: auto;
        }

        /* Popup Summary */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .popup-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .score-circle {
            width: 120px;
            height: 120px;
            background: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            font-weight: 800;
            margin: 0 auto 20px auto;
            border: 5px solid white;
            box-shadow: 0 10px 0 rgba(0,0,0,0.1);
        }

        .popup-content h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .btn-retry {
            background-color: var(--primary-color);
            color: white;
            margin-top: 20px;
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-2deg); }
            50% { transform: translateX(10px) rotate(2deg); }
            75% { transform: translateX(-10px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .hint-text {
            font-size: 0.9rem;
            color: #7f8c8d;
            font-style: italic;
            margin-top: 10px;
            display: flex;
            align-items: center;
        }
        
        .hint-text i {
            margin-right: 5px;
            color: #f1c40f;
        }

        /* Utility for underlined text in questions */
        u {
            text-decoration-color: var(--primary-color);
            text-decoration-thickness: 3px;
            text-underline-offset: 3px;
        }
    </style>
</head>
<body>

    <header>
        <h1>B√†i T·∫≠p Ti·∫øng Anh 6 - Unit 8</h1>
        <div class="teacher-name">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</div>
    </header>

    <div class="game-container">
        <!-- Progress -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <!-- Question Card -->
        <div class="card" id="questionCard">
            <span class="question-number" id="questionNumber">C√¢u 1/30</span>
            <div class="question-text" id="questionText">
                Loading question...
            </div>

            <!-- Hint if available -->
            <div class="hint-text" id="hintBox" style="display:none;">
                <i class="fas fa-lightbulb"></i> <span id="hintText"></span>
            </div>

            <div class="options-grid" id="optionsGrid">
                <!-- Options injected by JS -->
            </div>

            <!-- Explanation Area (Initially Hidden) -->
            <div class="explanation-box" id="explanationBox">
                <div class="explanation-header">
                    <div class="teacher-avatar">üë©‚Äçüè´</div>
                    <span>Ms Mai An gi·∫£i th√≠ch chi ti·∫øt:</span>
                </div>
                <div class="explanation-content" id="explanationContent">
                    <!-- Content injected by JS -->
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-buttons">
            <div style="flex:1"></div> <!-- Spacer -->
            <button class="btn-nav btn-next" id="nextBtn" onclick="nextQuestion()">
                C√¢u ti·∫øp theo <i class="fas fa-arrow-right"></i>
            </button>
            <button class="btn-nav btn-next" id="finishBtn" onclick="showSummary()" style="display:none; background-color: var(--primary-color);">
                N·ªôp b√†i & Xem ƒëi·ªÉm <i class="fas fa-trophy"></i>
            </button>
        </div>
    </div>

    <!-- Summary Popup -->
    <div class="popup-overlay" id="summaryPopup">
        <div class="popup-content">
            <div class="score-circle" id="finalScore">0/30</div>
            <h2 id="finalTitle">Tuy·ªát v·ªùi!</h2>
            <p id="finalMessage">B·∫°n ƒë√£ ho√†n th√†nh b√†i t·∫≠p.</p>
            <button class="btn-nav btn-retry" onclick="location.reload()">L√†m l·∫°i b√†i <i class="fas fa-redo"></i></button>
        </div>
    </div>

    <script>
        // --- DATA SOURCE ---
        const quizData = {
          "questions": [
            {
              "questionNumber": 1,
              "question": "You must learn the ___________ of the game before playing.",
              "answerOptions": [
                { "text": "rules", "rationale": "Ch√≠nh x√°c! Rules (noun): Quy t·∫Øc, lu·∫≠t l·ªá. Ta c·∫ßn m·ªôt danh t·ª´ ch·ªâ nh·ªØng quy ƒë·ªãnh c·∫ßn tu√¢n th·ªß khi ch∆°i game. D·ªãch: B·∫°n ph·∫£i h·ªçc lu·∫≠t ch∆°i tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu.", "isCorrect": true },
                { "text": "laws", "rationale": "Sai. Laws (noun): Lu·∫≠t ph√°p (c·ªßa qu·ªëc gia/nh√† n∆∞·ªõc). T·ª´ n√†y mang nghƒ©a trang tr·ªçng, ph√°p l√Ω, kh√¥ng d√πng cho tr√≤ ch∆°i.", "isCorrect": false },
                { "text": "agreements", "rationale": "Sai. Agreements (noun): S·ª± th·ªèa thu·∫≠n, hi·ªáp ƒë·ªãnh. Kh√¥ng ph√π h·ª£p ng·ªØ c·∫£nh tr√≤ ch∆°i.", "isCorrect": false },
                { "text": "sayings", "rationale": "Sai. Sayings (noun): T·ª•c ng·ªØ, c√¢u n√≥i. Kh√¥ng li√™n quan ƒë·∫øn vi·ªác ch∆°i game.", "isCorrect": false }
              ],
              "hint": "ƒê√¢y l√† danh t·ª´ ch·ªâ nh·ªØng ƒëi·ªÅu b·∫°n ph·∫£i tu√¢n theo khi ch∆°i m·ªôt tr√≤ ch∆°i (b·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ 'r')."
            },
            {
              "questionNumber": 2,
              "question": "We ___________ to Ho Chi Minh for our last summer vacation.",
              "answerOptions": [
                { "text": "go", "rationale": "Sai. Go (verb): ƒêi (hi·ªán t·∫°i ƒë∆°n). C√¢u c√≥ 'last summer vacation' (k·ª≥ ngh·ªâ h√® tr∆∞·ªõc) n√™n kh√¥ng chia hi·ªán t·∫°i.", "isCorrect": false },
                { "text": "went", "rationale": "Ch√≠nh x√°c! Went (verb - past form): ƒê√£ ƒëi. 'Last summer vacation' l√† d·∫•u hi·ªáu c·ªßa th√¨ Qu√° kh·ª© ƒë∆°n (Past Simple). D·ªãch: Ch√∫ng t√¥i ƒë√£ ƒëi TP. H·ªì Ch√≠ Minh v√†o k·ª≥ ngh·ªâ h√® nƒÉm ngo√°i.", "isCorrect": true },
                { "text": "goed", "rationale": "Sai. Goed: Kh√¥ng t·ªìn t·∫°i (t·ª´ 'go' l√† ƒë·ªông t·ª´ b·∫•t quy t·∫Øc, qu√° kh·ª© l√† 'went').", "isCorrect": false },
                { "text": "will go", "rationale": "Sai. Will go (verb phrase): S·∫Ω ƒëi (t∆∞∆°ng lai ƒë∆°n). Kh√¥ng d√πng cho s·ª± ki·ªán ƒë√£ qua.", "isCorrect": false }
              ],
              "hint": "Ch√∫ √Ω c·ª•m t·ª´ ch·ªâ th·ªùi gian 'last summer vacation' (k·ª≥ ngh·ªâ h√® tr∆∞·ªõc)."
            },
            {
              "questionNumber": 3,
              "question": "___________ Liz buy a lot of souvenirs for her friends?",
              "answerOptions": [
                { "text": "Did", "rationale": "Ch√≠nh x√°c! Did: Tr·ª£ ƒë·ªông t·ª´ qu√° kh·ª©. C·∫•u tr√∫c c√¢u h·ªèi th√¨ qu√° kh·ª© ƒë∆°n: Did + S + V(nguy√™n th·ªÉ)? ƒê·ªông t·ª´ ch√≠nh l√† 'buy'. D·ªãch: Liz ƒë√£ mua r·∫•t nhi·ªÅu qu√† l∆∞u ni·ªám cho b·∫°n b√® ph·∫£i kh√¥ng?", "isCorrect": true },
                { "text": "Do", "rationale": "Sai. Do: Tr·ª£ ƒë·ªông t·ª´ hi·ªán t·∫°i. 'Liz' l√† ng√¥i th·ª© 3 s·ªë √≠t, n·∫øu d√πng hi·ªán t·∫°i ph·∫£i l√† 'Does', nh∆∞ng ng·ªØ c·∫£nh mua qu√† l∆∞u ni·ªám th∆∞·ªùng k·ªÉ v·ªÅ chuy·∫øn ƒëi.", "isCorrect": false },
                { "text": "Were", "rationale": "Sai. Were (to be): L√†/th√¨/·ªü. ƒê·ªông t·ª´ 'to be' kh√¥ng ƒëi tr·ª±c ti·∫øp v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng nguy√™n th·ªÉ 'buy'.", "isCorrect": false },
                { "text": "Is", "rationale": "Sai. Is (to be): L√†/th√¨/·ªü. T∆∞∆°ng t·ª±, 'to be' kh√¥ng ƒëi v·ªõi 'buy' nguy√™n th·ªÉ.", "isCorrect": false }
              ],
              "hint": "ƒê·ªông t·ª´ ch√≠nh trong c√¢u l√† 'buy' (nguy√™n th·ªÉ), ƒë√¢y l√† c√¢u h·ªèi Yes/No."
            },
            {
              "questionNumber": 4,
              "question": "John ___________ return to America last week.",
              "answerOptions": [
                { "text": "doesn‚Äôt", "rationale": "Sai. Doesn't: Tr·ª£ ƒë·ªông t·ª´ ph·ªß ƒë·ªãnh hi·ªán t·∫°i. 'Last week' l√† qu√° kh·ª©.", "isCorrect": false },
                { "text": "isn‚Äôt", "rationale": "Sai. Isn't: Kh√¥ng l√†. Kh√¥ng ƒëi v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng 'return' nguy√™n th·ªÉ.", "isCorrect": false },
                { "text": "didn‚Äôt", "rationale": "Ch√≠nh x√°c! Didn't: Tr·ª£ ƒë·ªông t·ª´ ph·ªß ƒë·ªãnh qu√° kh·ª©. D·∫•u hi·ªáu 'last week' -> Qu√° kh·ª© ƒë∆°n. D·ªãch: John ƒë√£ kh√¥ng tr·ªü v·ªÅ M·ªπ v√†o tu·∫ßn tr∆∞·ªõc.", "isCorrect": true },
                { "text": "wasn‚Äôt", "rationale": "Sai. Wasn't: ƒê√£ kh√¥ng l√†. Kh√¥ng ƒëi v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng 'return' nguy√™n th·ªÉ.", "isCorrect": false }
              ],
              "hint": "C√¢u c√≥ tr·∫°ng t·ª´ th·ªùi gian 'last week', c·∫ßn tr·ª£ ƒë·ªông t·ª´ ph·ªß ƒë·ªãnh."
            },
            {
              "questionNumber": 5,
              "question": "Last weekend Phong and Lan ___________ their grandparents.",
              "answerOptions": [
                { "text": "visit", "rationale": "Sai. Visit: ThƒÉm (hi·ªán t·∫°i). Sai th√¨ v√¨ c√≥ 'Last weekend'.", "isCorrect": false },
                { "text": "is visiting", "rationale": "Sai. Is visiting: ƒêang thƒÉm. Ch·ªß ng·ªØ s·ªë nhi·ªÅu kh√¥ng d√πng 'is', v√† sai th√¨.", "isCorrect": false },
                { "text": "will visit", "rationale": "Sai. Will visit: S·∫Ω thƒÉm (t∆∞∆°ng lai). Sai th√¨.", "isCorrect": false },
                { "text": "visited", "rationale": "Ch√≠nh x√°c! Visited: ƒê√£ thƒÉm. 'Last weekend' -> Qu√° kh·ª© ƒë∆°n. D·ªãch: Cu·ªëi tu·∫ßn tr∆∞·ªõc Phong v√† Lan ƒë√£ ƒëi thƒÉm √¥ng b√†.", "isCorrect": true }
              ],
              "hint": "C·ª•m t·ª´ 'Last weekend' y√™u c·∫ßu ƒë·ªông t·ª´ ph·∫£i chia ·ªü th√¨ qu√° kh·ª© ƒë∆°n (V-ed)."
            },
            {
              "questionNumber": 6,
              "question": "All of us ___________ at home yesterday evening.",
              "answerOptions": [
                { "text": "were", "rationale": "Ch√≠nh x√°c! Were: Th√¨/l√†/·ªü (qu√° kh·ª©, s·ªë nhi·ªÅu). 'All of us' l√† s·ªë nhi·ªÅu, 'yesterday evening' l√† qu√° kh·ª©. D·ªãch: T·∫•t c·∫£ ch√∫ng t√¥i ƒë·ªÅu ·ªü nh√† t·ªëi qua.", "isCorrect": true },
                { "text": "was", "rationale": "Sai. Was: Qu√° kh·ª© s·ªë √≠t. 'All of us' l√† s·ªë nhi·ªÅu.", "isCorrect": false },
                { "text": "did", "rationale": "Sai. Did: ƒê√£ l√†m. C√¢u ch·ªâ v·ªã tr√≠ (at home) c·∫ßn ƒë·ªông t·ª´ to be.", "isCorrect": false },
                { "text": "are", "rationale": "Sai. Are: Hi·ªán t·∫°i s·ªë nhi·ªÅu. Sai th√¨ v√¨ c√≥ 'yesterday'.", "isCorrect": false }
              ],
              "hint": "Ch·ªß ng·ªØ 'All of us' l√† s·ªë nhi·ªÅu v√† th·ªùi gian l√† qu√° kh·ª©."
            },
            {
              "questionNumber": 7,
              "question": "You have to throw the ball into the net when you play ___________.",
              "answerOptions": [
                { "text": "basketball", "rationale": "Ch√≠nh x√°c! Basketball: B√≥ng r·ªï. 'Throw into the net' (n√©m v√†o l∆∞·ªõi) m√¥ t·∫£ b√≥ng r·ªï. D·ªãch: B·∫°n ph·∫£i n√©m b√≥ng v√†o r·ªï khi ch∆°i b√≥ng r·ªï.", "isCorrect": true },
                { "text": "football", "rationale": "Sai. Football: B√≥ng ƒë√°. D√πng ch√¢n ƒë√° (kick) v√†o khung th√†nh (goal).", "isCorrect": false },
                { "text": "tennis", "rationale": "Sai. Tennis: Qu·∫ßn v·ª£t. D√πng v·ª£t ƒë√°nh b√≥ng qua l∆∞·ªõi.", "isCorrect": false },
                { "text": "badminton", "rationale": "Sai. Badminton: C·∫ßu l√¥ng. ƒê√°nh qu·∫£ c·∫ßu qua l∆∞·ªõi.", "isCorrect": false }
              ],
              "hint": "M√¥n th·ªÉ thao n√†o m√† ng∆∞·ªùi ch∆°i d√πng tay n√©m b√≥ng v√†o l∆∞·ªõi?"
            },
            {
              "questionNumber": 8,
              "question": "Thanh is a good badminton player. I cannot ___________ him.",
              "answerOptions": [
                { "text": "win", "rationale": "Sai. Win: Th·∫Øng. D√πng 'win a game/match', kh√¥ng d√πng 'win somebody'.", "isCorrect": false },
                { "text": "defeat", "rationale": "Ch√≠nh x√°c! Defeat: ƒê√°nh b·∫°i. 'Defeat + somebody' = Th·∫Øng ai ƒë√≥. D·ªãch: T√¥i kh√¥ng th·ªÉ ƒë√°nh b·∫°i c·∫≠u ·∫•y.", "isCorrect": true },
                { "text": "control", "rationale": "Sai. Control: Ki·ªÉm so√°t. Kh√¥ng ph√π h·ª£p ng·ªØ c·∫£nh.", "isCorrect": false },
                { "text": "hit", "rationale": "Sai. Hit: ƒê√°nh. Mang nghƒ©a t√°c ƒë·ªông v·∫≠t l√Ω ho·∫∑c ƒë√°nh b√≥ng.", "isCorrect": false }
              ],
              "hint": "B·∫°n c·∫ßn m·ªôt ƒë·ªông t·ª´ mang nghƒ©a 'ƒë√°nh b·∫°i' m·ªôt ƒë·ªëi th·ªß."
            },
            {
              "questionNumber": 9,
              "question": "Karate is a form of martial ___________.",
              "answerOptions": [
                { "text": "fighting", "rationale": "Sai. Fighting: S·ª± chi·∫øn ƒë·∫•u. Kh√¥ng t·∫°o th√†nh c·ª•m t·ª´ c·ªë ƒë·ªãnh.", "isCorrect": false },
                { "text": "skill", "rationale": "Sai. Skill: K·ªπ nƒÉng. C·ª•m ƒë√∫ng l√† 'martial art'.", "isCorrect": false },
                { "text": "sports", "rationale": "Sai. Sports: Th·ªÉ thao. Karate l√† m√¥n v√µ.", "isCorrect": false },
                { "text": "art", "rationale": "Ch√≠nh x√°c! Art: Ngh·ªá thu·∫≠t. 'Martial art' (V√µ thu·∫≠t). D·ªãch: Karate l√† m·ªôt h√¨nh th·ª©c v√µ thu·∫≠t.", "isCorrect": true }
              ],
              "hint": "C·ª•m t·ª´ ti·∫øng Anh cho 'v√µ thu·∫≠t' l√† 'Martial ...'."
            },
            {
              "questionNumber": 10,
              "question": "This small ___________ is used to play table tennis.",
              "answerOptions": [
                { "text": "racket", "rationale": "Ch√≠nh x√°c! Racket: C√°i v·ª£t. V·ª£t b√≥ng b√†n c√≤n g·ªçi l√† 'paddle' ho·∫∑c 'bat' nh∆∞ng 'racket' c≈©ng ƒë∆∞·ª£c d√πng chung. D·ªãch: C√°i v·ª£t nh·ªè n√†y d√πng ƒë·ªÉ ch∆°i b√≥ng b√†n.", "isCorrect": true },
                { "text": "stick", "rationale": "Sai. Stick: C√°i g·∫≠y. D√πng cho hockey.", "isCorrect": false },
                { "text": "bat", "rationale": "Sai. Bat: G·∫≠y b√≥ng ch√†y. D√π ƒë√¥i khi d√πng cho b√≥ng b√†n nh∆∞ng ·ªü ƒë√¢y 'racket' ph·ªï bi·∫øn h∆°n trong b√†i h·ªçc.", "isCorrect": false },
                { "text": "hoop", "rationale": "Sai. Hoop: C√°i v√≤ng (r·ªï). D√πng trong b√≥ng r·ªï.", "isCorrect": false }
              ],
              "hint": "D·ª•ng c·ª• d√πng ƒë·ªÉ ƒë√°nh b√≥ng trong b√≥ng b√†n, c·∫ßu l√¥ng."
            },
            {
              "questionNumber": 11,
              "question": "At weekend we can play a ___________ of badminton or join in a football match.",
              "answerOptions": [
                { "text": "sport", "rationale": "Sai. Sport: Th·ªÉ thao. Kh√¥ng n√≥i 'play a sport of badminton'.", "isCorrect": false },
                { "text": "game", "rationale": "Ch√≠nh x√°c! Game: Tr√≤ ch∆°i/v√°n ƒë·∫•u. 'Play a game of [sport]'. D·ªãch: Ch√∫ng t√¥i c√≥ th·ªÉ ch∆°i m·ªôt v√°n c·∫ßu l√¥ng.", "isCorrect": true },
                { "text": "match", "rationale": "Sai. Match: Tr·∫≠n ƒë·∫•u. 'Game' ph·ªï bi·∫øn h∆°n cho ho·∫°t ƒë·ªông gi·∫£i tr√≠ nh·∫π nh√†ng.", "isCorrect": false },
                { "text": "exam", "rationale": "Sai. Exam: K·ª≥ thi. Kh√¥ng li√™n quan.", "isCorrect": false }
              ],
              "hint": "C·ª•m t·ª´ th∆∞·ªùng d√πng: 'play a ... of badminton'."
            },
            {
              "questionNumber": 12,
              "question": "Football is an ___________ game.",
              "answerOptions": [
                { "text": "outdoor", "rationale": "Ch√≠nh x√°c! Outdoor (adj): Ngo√†i tr·ªùi. B√≥ng ƒë√° ch∆°i tr√™n s√¢n c·ªè ngo√†i tr·ªùi. D·ªãch: B√≥ng ƒë√° l√† tr√≤ ch∆°i ngo√†i tr·ªùi.", "isCorrect": true },
                { "text": "indoor", "rationale": "Sai. Indoor (adj): Trong nh√†.", "isCorrect": false },
                { "text": "individual", "rationale": "Sai. Individual (adj): C√° nh√¢n. B√≥ng ƒë√° l√† m√¥n ƒë·ªìng ƒë·ªôi.", "isCorrect": false },
                { "text": "team", "rationale": "Sai ng·ªØ ph√°p. Team (noun). M·∫°o t·ª´ 'an' y√™u c·∫ßu t·ª´ b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m (o, i...), 'team' b·∫Øt ƒë·∫ßu b·∫±ng 't'.", "isCorrect": false }
              ],
              "hint": "B√≥ng ƒë√° ch∆°i ·ªü ngo√†i tr·ªùi hay trong nh√†? Ch√∫ √Ω m·∫°o t·ª´ 'an'."
            },
            {
              "questionNumber": 13,
              "question": "Many girls and women ___________ aerobics to keep fit.",
              "answerOptions": [
                { "text": "play", "rationale": "Sai. Play d√πng v·ªõi m√¥n c√≥ b√≥ng/ƒë·ªìng ƒë·ªôi.", "isCorrect": false },
                { "text": "go", "rationale": "Sai. Go d√πng v·ªõi m√¥n t·∫≠n c√πng -ing (swimming).", "isCorrect": false },
                { "text": "do", "rationale": "Ch√≠nh x√°c! Do d√πng v·ªõi m√¥n th·ªÉ thao c√° nh√¢n (Yoga, Judo, Aerobics). D·ªãch: Nhi·ªÅu ph·ª• n·ªØ t·∫≠p th·ªÉ d·ª•c nh·ªãp ƒëi·ªáu ƒë·ªÉ gi·ªØ d√°ng.", "isCorrect": true },
                { "text": "have", "rationale": "Sai. Have: C√≥. Kh√¥ng d√πng 'have aerobics'.", "isCorrect": false }
              ],
              "hint": "V·ªõi c√°c m√¥n th·ªÉ d·ª•c c√° nh√¢n nh∆∞ Yoga, Aerobics, d√πng ƒë·ªông t·ª´ n√†o?"
            },
            {
              "questionNumber": 14,
              "question": "It‚Äôs very ___________ to swim there. The water is heavily polluted.",
              "answerOptions": [
                { "text": "safe", "rationale": "Sai. Safe: An to√†n. N∆∞·ªõc √¥ nhi·ªÖm th√¨ kh√¥ng an to√†n.", "isCorrect": false },
                { "text": "unsafe", "rationale": "Ch√≠nh x√°c! Unsafe: Kh√¥ng an to√†n. V√¨ n∆∞·ªõc √¥ nhi·ªÖm n·∫∑ng. D·ªãch: B∆°i ·ªü ƒë√≥ r·∫•t nguy hi·ªÉm/kh√¥ng an to√†n.", "isCorrect": true },
                { "text": "unpopular", "rationale": "Sai. Unpopular: Kh√¥ng ph·ªï bi·∫øn. Kh√¥ng h·ª£p logic v·ªõi 'polluted'.", "isCorrect": false },
                { "text": "good", "rationale": "Sai. Good: T·ªët. Ng∆∞·ª£c nghƒ©a.", "isCorrect": false }
              ],
              "hint": "N∆∞·ªõc b·ªã √¥ nhi·ªÖm (polluted) th√¨ b∆°i l·ªôi s·∫Ω nh∆∞ th·∫ø n√†o?"
            },
            {
              "questionNumber": 15,
              "question": "What‚Äôs your favourite ___________? - I like swimming.",
              "answerOptions": [
                { "text": "subject", "rationale": "Sai. Subject: M√¥n h·ªçc. Swimming kh√¥ng ph·∫£i m√¥n h·ªçc ch√≠nh kh√≥a.", "isCorrect": false },
                { "text": "game", "rationale": "Sai. Game: Tr√≤ ch∆°i. Swimming l√† m√¥n th·ªÉ thao v·∫≠n ƒë·ªông.", "isCorrect": false },
                { "text": "drink", "rationale": "Sai. Drink: ƒê·ªì u·ªëng.", "isCorrect": false },
                { "text": "sport", "rationale": "Ch√≠nh x√°c! Sport: M√¥n th·ªÉ thao. B∆°i l·ªôi l√† m·ªôt m√¥n th·ªÉ thao. D·ªãch: M√¥n th·ªÉ thao y√™u th√≠ch c·ªßa b·∫°n l√† g√¨?", "isCorrect": true }
              ],
              "hint": "Swimming thu·ªôc nh√≥m n√†o: ƒë·ªì u·ªëng, m√¥n h·ªçc hay th·ªÉ thao?"
            },
            {
              "questionNumber": 16,
              "question": "I play sports very often, so I look very ___________.",
              "answerOptions": [
                { "text": "sport", "rationale": "Sai. Sport (noun). C·∫ßn t√≠nh t·ª´.", "isCorrect": false },
                { "text": "sports", "rationale": "Sai. Sports (noun plural).", "isCorrect": false },
                { "text": "sporty", "rationale": "Ch√≠nh x√°c! Sporty (adj): D√°ng th·ªÉ thao, kh·ªèe kho·∫Øn. Look + Adj. D·ªãch: T√¥i tr√¥ng r·∫•t kh·ªèe kho·∫Øn.", "isCorrect": true },
                { "text": "sporting", "rationale": "Sai. Sporting (adj): Thu·ªôc v·ªÅ th·ªÉ thao. Kh√¥ng d√πng t·∫£ ngo·∫°i h√¨nh.", "isCorrect": false }
              ],
              "hint": "C·∫ßn m·ªôt t√≠nh t·ª´ ƒë·ªÉ mi√™u t·∫£ ngo·∫°i h√¨nh kh·ªèe m·∫°nh do ch∆°i th·ªÉ thao."
            },
            {
              "questionNumber": 17,
              "question": "She‚Äôd like to watch motor racing because it is very ___________.",
              "answerOptions": [
                { "text": "frightening", "rationale": "Sai. Frightening: ƒê√°ng s·ª£.", "isCorrect": false },
                { "text": "exciting", "rationale": "Ch√≠nh x√°c! Exciting (adj): Th√∫ v·ªã, k·ªãch t√≠nh (ƒëu√¥i -ing cho s·ª± v·∫≠t). D·ªãch: C√¥ ·∫•y mu·ªën xem ƒëua xe v√¨ n√≥ r·∫•t k·ªãch t√≠nh.", "isCorrect": true },
                { "text": "excited", "rationale": "Sai. Excited (adj): H√†o h·ª©ng (ƒëu√¥i -ed cho ng∆∞·ªùi).", "isCorrect": false },
                { "text": "boring", "rationale": "Sai. Boring: Nh√†m ch√°n.", "isCorrect": false }
              ],
              "hint": "ƒêua xe l√† m·ªôt ho·∫°t ƒë·ªông g√¢y h·ª©ng th√∫ (d√πng t√≠nh t·ª´ ƒëu√¥i -ing)."
            },
            {
              "questionNumber": 18,
              "question": "Team sports are sometimes called ___________ sports.",
              "answerOptions": [
                { "text": "compete", "rationale": "Sai. Compete (verb): C·∫°nh tranh.", "isCorrect": false },
                { "text": "competition", "rationale": "Sai. Competition (noun): Cu·ªôc thi.", "isCorrect": false },
                { "text": "competitor", "rationale": "Sai. Competitor (noun): ƒê·ªëi th·ªß.", "isCorrect": false },
                { "text": "competitive", "rationale": "Ch√≠nh x√°c! Competitive (adj): C√≥ t√≠nh c·∫°nh tranh. 'Competitive sports' = Th·ªÉ thao ƒë·ªëi kh√°ng. D·ªãch: Th·ªÉ thao ƒë·ªìng ƒë·ªôi ƒë√¥i khi g·ªçi l√† th·ªÉ thao ƒë·ªëi kh√°ng.", "isCorrect": true }
              ],
              "hint": "C·∫ßn m·ªôt t√≠nh t·ª´ ƒë·ª©ng tr∆∞·ªõc danh t·ª´ 'sports'."
            },
            {
              "questionNumber": 19,
              "question": "My sister is a ___________ volleyball player.",
              "answerOptions": [
                { "text": "badly", "rationale": "Sai. Badly (adv): T·ªìi t·ªá. Sai lo·∫°i t·ª´.", "isCorrect": false },
                { "text": "well", "rationale": "Sai. Well (adv): T·ªët. V·ªã tr√≠ n√†y c·∫ßn t√≠nh t·ª´.", "isCorrect": false },
                { "text": "good", "rationale": "Ch√≠nh x√°c! Good (adj): Gi·ªèi/T·ªët. Good + noun. D·ªãch: Em g√°i t√¥i l√† v·∫≠n ƒë·ªông vi√™n b√≥ng chuy·ªÅn gi·ªèi.", "isCorrect": true },
                { "text": "skillfully", "rationale": "Sai. Skillfully (adv): ƒêi√™u luy·ªán.", "isCorrect": false }
              ],
              "hint": "Tr∆∞·ªõc c·ª•m danh t·ª´ 'volleyball player' c·∫ßn m·ªôt t√≠nh t·ª´."
            },
            {
              "questionNumber": 20,
              "question": "Playing sports helps us get ___________.",
              "answerOptions": [
                { "text": "free", "rationale": "Sai. Free: R·∫£nh r·ªói.", "isCorrect": false },
                { "text": "fat", "rationale": "Sai. Fat: B√©o.", "isCorrect": false },
                { "text": "fittest", "rationale": "Sai. Fittest: Kh·ªèe nh·∫•t (so s√°nh nh·∫•t). C·∫•u tr√∫c get + comparative.", "isCorrect": false },
                { "text": "fitter", "rationale": "Ch√≠nh x√°c! Fitter (comparative): Kh·ªèe h∆°n. Get + so s√°nh h∆°n. D·ªãch: Ch∆°i th·ªÉ thao gi√∫p ch√∫ng ta kh·ªèe h∆°n.", "isCorrect": true }
              ],
              "hint": "Ch∆°i th·ªÉ thao gi√∫p c∆° th·ªÉ 'kh·ªèe h∆°n' (so s√°nh h∆°n)."
            },
            {
              "questionNumber": 21,
              "question": "I like watching football matches but I am not very good ___________ playing football.",
              "answerOptions": [
                { "text": "in", "rationale": "Sai.", "isCorrect": false },
                { "text": "on", "rationale": "Sai.", "isCorrect": false },
                { "text": "at", "rationale": "Ch√≠nh x√°c! Good at + V-ing/Noun: Gi·ªèi v·ªÅ c√°i g√¨. D·ªãch: T√¥i kh√¥ng gi·ªèi ƒë√° b√≥ng l·∫Øm.", "isCorrect": true },
                { "text": "for", "rationale": "Sai. Good for: T·ªët cho (s·ª©c kh·ªèe).", "isCorrect": false }
              ],
              "hint": "C·ª•m t·ª´ 'Gi·ªèi v·ªÅ c√°i g√¨' l√† 'Good ...'."
            },
            {
              "questionNumber": 22,
              "question": "Will you come ___________ me this Sunday morning?",
              "answerOptions": [
                { "text": "to", "rationale": "Sai.", "isCorrect": false },
                { "text": "for", "rationale": "Sai.", "isCorrect": false },
                { "text": "with", "rationale": "Ch√≠nh x√°c! Come with: ƒêi c√πng. D·ªãch: B·∫°n s·∫Ω ƒëi c√πng t√¥i s√°ng Ch·ªß nh·∫≠t n√†y ch·ª©?", "isCorrect": true },
                { "text": "at", "rationale": "Sai.", "isCorrect": false }
              ],
              "hint": "B·∫°n mu·ªën r·ªß ai ƒë√≥ 'ƒëi c√πng', d√πng gi·ªõi t·ª´ g√¨?"
            },
            {
              "questionNumber": 23,
              "question": "___________ run too fast. You may fall.",
              "answerOptions": [
                { "text": "Don‚Äôt", "rationale": "Ch√≠nh x√°c! Don't: ƒê·ª´ng. C√¢u m·ªánh l·ªánh ph·ªß ƒë·ªãnh: Don't + V. D·ªãch: ƒê·ª´ng ch·∫°y qu√° nhanh.", "isCorrect": true },
                { "text": "Do", "rationale": "Sai. D√πng cho kh·∫≥ng ƒë·ªãnh nh·∫•n m·∫°nh.", "isCorrect": false },
                { "text": "Didn‚Äôt", "rationale": "Sai. D√πng cho qu√° kh·ª©.", "isCorrect": false },
                { "text": "Did", "rationale": "Sai.", "isCorrect": false }
              ],
              "hint": "C√¢u m·ªánh l·ªánh c·∫•m ƒëo√°n: 'ƒê·ª´ng...'."
            },
            {
              "questionNumber": 24,
              "question": "The football match on TV last night ___________ great. Our team lost.",
              "answerOptions": [
                { "text": "is", "rationale": "Sai. Sai th√¨ (last night).", "isCorrect": false },
                { "text": "wasn't", "rationale": "Ch√≠nh x√°c! Wasn't: ƒê√£ kh√¥ng. V√¨ 'Our team lost' (thua) n√™n tr·∫≠n ƒë·∫•u 'kh√¥ng tuy·ªát'. D·ªãch: Tr·∫≠n ƒë·∫•u t·ªëi qua kh√¥ng tuy·ªát ch√∫t n√†o.", "isCorrect": true },
                { "text": "isn't", "rationale": "Sai. Sai th√¨.", "isCorrect": false },
                { "text": "was", "rationale": "Sai. M√¢u thu·∫´n nghƒ©a (Thua th√¨ kh√¥ng th·ªÉ tuy·ªát).", "isCorrect": false }
              ],
              "hint": "ƒê·ªôi nh√† thua (lost), n√™n c·∫£m x√∫c v·ªÅ tr·∫≠n ƒë·∫•u l√† ph·ªß ƒë·ªãnh."
            },
            {
              "questionNumber": 25,
              "question": "You're talking too much. ___________ please.",
              "answerOptions": [
                { "text": "Continue", "rationale": "Sai. Continue: Ti·∫øp t·ª•c.", "isCorrect": false },
                { "text": "Don't continue", "rationale": "Sai. √çt d√πng.", "isCorrect": false },
                { "text": "Stop", "rationale": "Ch√≠nh x√°c! Stop: D·ª´ng l·∫°i. D·ªãch: B·∫°n n√≥i nhi·ªÅu qu√°. L√†m ∆°n d·ª´ng l·∫°i.", "isCorrect": true },
                { "text": "Don't stop", "rationale": "Sai. Don't stop: ƒê·ª´ng d·ª´ng l·∫°i.", "isCorrect": false }
              ],
              "hint": "Khi ai ƒë√≥ n√≥i qu√° nhi·ªÅu, b·∫°n y√™u c·∫ßu h·ªç 'D·ª´ng l·∫°i'."
            },
            {
              "questionNumber": 26,
              "question": "Congratulations on your exam result!",
              "answerOptions": [
                { "text": "I don't want to.", "rationale": "Sai. D·ªãch: T√¥i kh√¥ng mu·ªën.", "isCorrect": false },
                { "text": "No worry", "rationale": "Sai. D·ªãch: ƒê·ª´ng lo.", "isCorrect": false },
                { "text": "Thank you.", "rationale": "Ch√≠nh x√°c! D·ªãch: C·∫£m ∆°n. Khi ƒë∆∞·ª£c ch√∫c m·ª´ng, h√£y n√≥i c·∫£m ∆°n.", "isCorrect": true },
                { "text": "That's fine.", "rationale": "Sai. D·ªãch: ·ªîn th√¥i m√† (ƒë√°p l·∫°i l·ªùi xin l·ªói).", "isCorrect": false }
              ],
              "hint": "Ng∆∞·ªùi kh√°c ch√∫c m·ª´ng m√¨nh th√¨ m√¨nh n√™n n√≥i 'C·∫£m ∆°n'."
            },
            {
              "questionNumber": 27,
              "question": "Did you play any sport last year?",
              "answerOptions": [
                { "text": "I didn't know.", "rationale": "Sai. D·ªãch: T√¥i kh√¥ng bi·∫øt.", "isCorrect": false },
                { "text": "How about playing football?", "rationale": "Sai. ƒê√¢y l√† c√¢u r·ªß r√™.", "isCorrect": false },
                { "text": "Yes, I did. I played tennis.", "rationale": "Ch√≠nh x√°c! Tr·∫£ l·ªùi cho c√¢u h·ªèi 'Did you...?' l√† 'Yes, I did'. D·ªãch: C√≥, t·ªõ ƒë√£ ch∆°i qu·∫ßn v·ª£t.", "isCorrect": true },
                { "text": "We can play chess.", "rationale": "Sai. L·∫°c ƒë·ªÅ.", "isCorrect": false }
              ],
              "hint": "C√¢u h·ªèi 'Did you...' tr·∫£ l·ªùi b·∫±ng 'Yes, I did'."
            },
            {
              "questionNumber": 28,
              "question": "What do we need to play badminton?",
              "answerOptions": [
                { "text": "I think you should stay at home.", "rationale": "Sai. Kh√¥ng li√™n quan.", "isCorrect": false },
                { "text": "We brought a racket.", "rationale": "Sai. Sai th√¨ (brought - qu√° kh·ª©).", "isCorrect": false },
                { "text": "We can buy some things.", "rationale": "Sai. Chung chung.", "isCorrect": false },
                { "text": "Just two rackets and a shuttlecock.", "rationale": "Ch√≠nh x√°c! Li·ªát k√™ d·ª•ng c·ª•: 2 c√°i v·ª£t v√† 1 qu·∫£ c·∫ßu. D·ªãch: Ch·ªâ c·∫ßn 2 v·ª£t v√† 1 qu·∫£ c·∫ßu.", "isCorrect": true }
              ],
              "hint": "Badminton c·∫ßn v·ª£t v√† c·∫ßu."
            },
            {
              "questionNumber": 29,
              "question": "Don't eat much fast food.",
              "answerOptions": [
                { "text": "What is that?", "rationale": "Sai.", "isCorrect": false },
                { "text": "Thanks for your advice.", "rationale": "Ch√≠nh x√°c! D·ªãch: C·∫£m ∆°n l·ªùi khuy√™n. ƒê√¢y l√† l·ªùi khuy√™n s·ª©c kh·ªèe.", "isCorrect": true },
                { "text": "I don't know.", "rationale": "Sai.", "isCorrect": false },
                { "text": "Where is my food?", "rationale": "Sai.", "isCorrect": false }
              ],
              "hint": "ƒê√¢y l√† l·ªùi khuy√™n (advice), h√£y c·∫£m ∆°n."
            },
            {
              "questionNumber": 30,
              "question": "Our team won the game yesterday.",
              "answerOptions": [
                { "text": "That's a good idea.", "rationale": "Sai. ƒê√°p l·∫°i c√¢u r·ªß r√™.", "isCorrect": false },
                { "text": "Congratulations!", "rationale": "Ch√≠nh x√°c! D·ªãch: Ch√∫c m·ª´ng nh√©! Nghe tin th·∫Øng tr·∫≠n th√¨ ch√∫c m·ª´ng.", "isCorrect": true },
                { "text": "I know it.", "rationale": "Sai. H∆°i ki√™u ng·∫°o.", "isCorrect": false },
                { "text": "Thank you.", "rationale": "Sai. Ng∆∞·ªùi th·∫Øng m·ªõi n√≥i c·∫£m ∆°n.", "isCorrect": false }
              ],
              "hint": "Khi nghe tin vui th·∫Øng tr·∫≠n, h√£y n√≥i 'Ch√∫c m·ª´ng'."
            }
          ]
        };

        // --- STATE & AUDIO ---
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        // Sound Synthesis (No external files)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // Ding sound (High pitch, sine wave)
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
                
                // Confetti Effect
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#00D26A', '#00C9A7', '#8854C0']
                });

            } else if (type === 'wrong') {
                // Buzz sound (Low pitch, sawtooth)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- GAME LOGIC ---

        function renderQuestion() {
            isAnswered = false;
            const q = quizData.questions[currentQuestionIndex];
            
            // Update UI
            document.getElementById('questionNumber').innerText = `C√¢u ${currentQuestionIndex + 1}/${quizData.questions.length}`;
            document.getElementById('questionText').innerHTML = q.question.replace(/___________/g, "<u>&nbsp;&nbsp;&nbsp;?&nbsp;&nbsp;&nbsp;</u>");
            
            // Progress Bar
            const progress = ((currentQuestionIndex) / quizData.questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;

            // Hint
            const hintBox = document.getElementById('hintBox');
            if (q.hint) {
                hintBox.style.display = 'flex';
                document.getElementById('hintText').innerText = q.hint;
            } else {
                hintBox.style.display = 'none';
            }

            // Options
            const grid = document.getElementById('optionsGrid');
            grid.innerHTML = '';
            
            const letters = ['A', 'B', 'C', 'D'];
            
            q.answerOptions.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'btn-option';
                btn.innerHTML = `<span class="option-letter">${letters[idx]}</span> ${opt.text}`;
                btn.onclick = () => checkAnswer(idx, btn, q);
                grid.appendChild(btn);
            });

            // Reset Explanation & Next Button
            document.getElementById('explanationBox').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('finishBtn').style.display = 'none';
        }

        function checkAnswer(selectedIndex, btnElement, questionData) {
            if (isAnswered) return;
            isAnswered = true;

            const options = document.querySelectorAll('.btn-option');
            const selectedOpt = questionData.answerOptions[selectedIndex];
            
            // Highlight options
            if (selectedOpt.isCorrect) {
                btnElement.classList.add('correct');
                playSound('correct');
                score++;
            } else {
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight the correct one
                questionData.answerOptions.forEach((opt, idx) => {
                    if (opt.isCorrect) {
                        options[idx].classList.add('correct');
                    }
                });
            }

            // Show Navigation
            if (currentQuestionIndex < quizData.questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'block';
            } else {
                document.getElementById('finishBtn').style.display = 'block';
                document.getElementById('progressBar').style.width = '100%';
            }

            // Build Explanation Content (Ms Mai An's Corner)
            buildExplanation(questionData);
        }

        function buildExplanation(qData) {
            const expBox = document.getElementById('explanationBox');
            const contentDiv = document.getElementById('explanationContent');
            
            // 1. Ph√¢n t√≠ch ƒë√°p √°n (Vocab extraction)
            let vocabRows = '';
            let correctAnswerRationale = '';
            
            const letters = ['A', 'B', 'C', 'D'];
            
            qData.answerOptions.forEach((opt, idx) => {
                // Try to extract Meaning from Rationale (simple split by :)
                // Format usually "Word (type): Meaning. Explanation"
                let definition = opt.rationale.split('.')[0] || opt.rationale;
                // Remove "Ch√≠nh x√°c! " or "Sai. " prefix
                definition = definition.replace(/^(Ch√≠nh x√°c! |Sai. )/, '');

                vocabRows += `
                    <tr>
                        <td>${letters[idx]}. ${opt.text}</td>
                        <td>${definition}</td>
                    </tr>
                `;

                if (opt.isCorrect) {
                    correctAnswerRationale = opt.rationale.replace('Ch√≠nh x√°c! ', '');
                }
            });

            // 2. Full Content
            contentDiv.innerHTML = `
                <h4>üìù Ph√¢n t√≠ch t·ª´ v·ª±ng:</h4>
                <table class="vocab-table">
                    <thead>
                        <tr>
                            <th>ƒê√°p √°n</th>
                            <th>Gi·∫£i nghƒ©a & Ng·ªØ ph√°p</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${vocabRows}
                    </tbody>
                </table>

                <h4>‚úÖ T·∫°i sao ch·ªçn ƒë√°p √°n ƒë√∫ng?</h4>
                <p style="color: var(--primary-color); font-weight: 600;">${correctAnswerRationale}</p>
                
                <p style="margin-top: 10px; font-style: italic; font-size: 0.9rem; color: #7f8c8d;">
                    *D·ªãch c√¢u h·ªèi: "${translateQuestion(qData.question)}"
                </p>
            `;

            expBox.style.display = 'block';
        }
        
        // Helper to guess translation (Mocking translation for this demo based on context)
        // In a real app, translation would be in the JSON. Here I assume the rationale contains translated context.
        function translateQuestion(qText) {
             // This is a placeholder since we don't have separate translation fields in JSON.
             // But the 'rationale' text usually contains the full translation "D·ªãch: ..."
             return "Xem ph·∫ßn d·ªãch chi ti·∫øt ·ªü m·ª•c gi·∫£i th√≠ch tr√™n.";
        }

        function nextQuestion() {
            currentQuestionIndex++;
            renderQuestion();
        }

        function showSummary() {
            document.getElementById('summaryPopup').style.display = 'flex';
            document.getElementById('finalScore').innerText = `${score}/${quizData.questions.length}`;
            
            const percentage = (score / quizData.questions.length) * 100;
            const title = document.getElementById('finalTitle');
            const msg = document.getElementById('finalMessage');

            if (percentage === 100) {
                title.innerText = "Xu·∫•t s·∫Øc! üåü";
                msg.innerText = "B·∫°n ƒë√£ n·∫Øm v·ªØng to√†n b·ªô ki·∫øn th·ª©c Unit 8!";
                confetti({ particleCount: 200, spread: 100 });
            } else if (percentage >= 80) {
                title.innerText = "Gi·ªèi l·∫Øm! üéâ";
                msg.innerText = "K·∫øt qu·∫£ r·∫•t t·ªët, ch·ªâ sai m·ªôt ch√∫t x√≠u th√¥i.";
            } else if (percentage >= 50) {
                title.innerText = "C·ªë g·∫Øng l√™n! üí™";
                msg.innerText = "B·∫°n ƒë√£ hi·ªÉu b√†i, nh∆∞ng c·∫ßn √¥n l·∫°i t·ª´ v·ª±ng nh√©.";
            } else {
                title.innerText = "C·∫ßn luy·ªán t·∫≠p th√™m üìö";
                msg.innerText = "H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch c·ªßa c√¥ Mai An nh√©.";
            }
        }

        // Initialize
        renderQuestion();

    </script>
</body>
</html>
