<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Test Part 2 - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-color: #2d3436;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#8854c0 1.5px, transparent 1.5px), radial-gradient(#00c9a7 1.5px, transparent 1.5px);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 900px;
            margin-bottom: 50px;
        }

        /* HEADER */
        .header {
            text-align: center;
            background: linear-gradient(135deg, var(--primary-pink), var(--primary-teal));
            padding: 20px;
            border-radius: 20px;
            color: white;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .header h1 {
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        /* CARD STYLE */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(136, 84, 192, 0.15);
            border: 2px solid #eef2f5;
        }

        .card-title {
            font-size: 1.4rem;
            color: var(--primary-pink);
            font-weight: 800;
            margin-bottom: 20px;
            border-bottom: 2px dashed #ddd;
            padding-bottom: 10px;
        }

        /* READING BOX */
        .reading-box {
            background-color: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
            color: #444;
            text-align: justify;
        }

        .city-section {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ccc;
        }

        .city-name {
            color: var(--primary-pink);
            font-weight: 800;
            font-size: 1.2rem;
        }

        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            border: 2px solid var(--primary-teal);
            border-radius: 15px;
            overflow: hidden;
        }
        
        .glossary-table th {
            background-color: var(--primary-teal);
            color: white;
            padding: 10px;
            text-align: left;
        }

        .glossary-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            background-color: #fdfdfd;
        }

        /* OPTIONS BOX (FOR GAP FILL) */
        .options-box {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            background: #fff0f6;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid var(--primary-pink);
            margin-bottom: 20px;
        }

        .option-chip {
            background: white;
            border: 2px solid var(--primary-pink);
            color: var(--primary-pink);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: default;
        }

        /* QUESTIONS INTERFACE */
        .question-group {
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }

        .gap-input {
            display: inline-block;
            min-width: 120px;
            padding: 5px 10px;
            margin: 0 5px;
            border: 2px solid #ccc;
            border-radius: 10px;
            background: white;
            color: #333;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .gap-input:hover {
            border-color: var(--primary-pink);
            transform: scale(1.05);
        }

        .gap-input.correct { background-color: var(--correct-green); color: white; border-color: var(--correct-green); }
        .gap-input.wrong { background-color: var(--wrong-red); color: white; border-color: var(--wrong-red); animation: shake 0.5s; }

        /* DROPDOWN POPUP */
        .popup-options {
            display: none;
            position: absolute;
            z-index: 100;
            background: white;
            border: 2px solid var(--primary-pink);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            padding: 10px;
            min-width: 200px;
        }
        
        .popup-option-item {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 8px;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .popup-option-item:hover { background-color: #f0f4f8; color: var(--primary-pink); }

        /* TRUE/FALSE BUTTONS */
        .tf-container {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .btn-tf {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            color: white;
        }

        .btn-true { background-color: #48dbfb; }
        .btn-false { background-color: #ff9ff3; }
        .btn-tf:active { transform: translateY(4px); box-shadow: none; }
        .btn-tf.selected-correct { background-color: var(--correct-green) !important; box-shadow: 0 5px 0 #00b85c !important; }
        .btn-tf.selected-wrong { background-color: var(--wrong-red) !important; animation: shake 0.5s; box-shadow: 0 5px 0 #e6404f !important; }

        /* EXPLANATION BOX */
        .explanation-box {
            display: none;
            margin-top: 15px;
            background-color: #e8fbf4;
            border-left: 5px solid var(--primary-teal);
            padding: 15px;
            border-radius: 8px;
            animation: slideDown 0.3s ease-out;
        }

        .expl-title { font-weight: 800; color: var(--primary-teal); display: flex; align-items: center; margin-bottom: 10px; }
        .expl-title::before { content: "üí°"; margin-right: 8px; }
        .expl-content p { margin: 5px 0; font-size: 0.95rem; }
        .expl-correct { color: var(--correct-green); font-weight: bold; }

        /* SUBMIT BUTTON */
        .submit-section { text-align: center; margin-top: 40px; }
        .btn-submit {
            background-color: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #6c429c;
            transition: all 0.2s;
        }
        .btn-submit:hover { transform: scale(1.05); }
        .btn-submit:active { transform: translateY(4px); box-shadow: 0 4px 0 #6c429c; }

        /* ANIMATIONS & RESULT */
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 9999; }
        
        .result-popup {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            background: white; padding: 40px; border-radius: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            text-align: center; z-index: 10000; transition: transform 0.4s; border: 5px solid var(--primary-pink);
        }
        .result-popup.show { transform: translate(-50%, -50%) scale(1); }
        .result-score { font-size: 3rem; color: var(--primary-pink); font-weight: 800; }

    </style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<div class="container">
    <div class="header">
        <h1>B√†i Ki·ªÉm Tra Ti·∫øng Anh (Ph·∫ßn 2)</h1>
        <p>Ms Mai An ULIS - H·ªçc l√† M√™!</p>
    </div>

    <div class="card">
        <div class="card-title">III. Read the text about cities and decide True (T) or False (F)</div>
        <div class="reading-box">
            <div class="city-section">
                <span class="city-name">üáπüá∑ Istanbul</span> is the capital of Turkey, which is located between Europe and Asia. The city has a lot of historical landmarks, such as the Blue Mosque, Hagia Sophia, and Topkapi Palace Museum. Visitors cannot miss Grand Bazaar as there are thousands of shops and stalls selling handcrafted Turkish ceramics, carpets, lamps, leather goods and jewellery.
            </div>
            <div class="city-section">
                <span class="city-name">üáßüá∑ Rio de Janeiro</span> is the second largest city in Brazil. It is the city of sun, beaches and mountains, man-made and natural wonders of the world. It is large and colourful with world famous carnivals and samba. You can also spend all day sunbathing on Copacabana, Ipanema, and Leblon beaches.
            </div>
            <div class="city-section">
                <span class="city-name">üáÆüáπ Venice</span> is famous for its canals. People do not use cars in Venice, so they travel everywhere by canal. The most famous place in Venice is St Mark‚Äôs square with St Mark‚Äôs Cathedral. There are also a lot of museums, palaces, and beautiful bridges.
            </div>
            <div class="city-section">
                <span class="city-name">üá∑üá∫ St Petersburg</span> is the cultural capital of Russia. It is a beautiful city of channels and impressive architecture. The city is famous for the Winter Palace, where the Tsars lived, and the Hermitage Museum, which is a fantastic art gallery. There are, of course, a lot of churches and cathedrals here, too. There is so much to see in St Petersburg!
            </div>
        </div>

        <h3>üìö Glossary (T·ª´ v·ª±ng x·ªãn x√≤)</h3>
        <table class="glossary-table">
            <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
            <tr><td>Landmark</td><td>(n)</td><td>ƒê·ªãa danh n·ªïi ti·∫øng</td></tr>
            <tr><td>Handcrafted</td><td>(adj)</td><td>L√†m th·ªß c√¥ng</td></tr>
            <tr><td>Stall</td><td>(n)</td><td>Qu·∫ßy h√†ng</td></tr>
            <tr><td>Carnival</td><td>(n)</td><td>L·ªÖ h·ªôi h√≥a trang</td></tr>
            <tr><td>Canal</td><td>(n)</td><td>K√™nh ƒë√†o</td></tr>
            <tr><td>Architecture</td><td>(n)</td><td>Ki·∫øn tr√∫c</td></tr>
        </table>

        <div class="question-group">
            <p><strong>1. Istanbul is famous for its handcrafted souvenirs.</strong></p>
            <div class="tf-container">
                <button class="btn-tf btn-true" onclick="checkTF(this, 'q1', true)">TRUE</button>
                <button class="btn-tf btn-false" onclick="checkTF(this, 'q1', false)">FALSE</button>
            </div>
            <div id="expl-q1" class="explanation-box"></div>
        </div>

        <div class="question-group">
            <p><strong>2. Visitors cannot go swimming in Rio de Janeiro.</strong></p>
            <div class="tf-container">
                <button class="btn-tf btn-true" onclick="checkTF(this, 'q2', true)">TRUE</button>
                <button class="btn-tf btn-false" onclick="checkTF(this, 'q2', false)">FALSE</button>
            </div>
            <div id="expl-q2" class="explanation-box"></div>
        </div>

        <div class="question-group">
            <p><strong>3. Rio de Janeiro is a great place for people who are interested in dancing.</strong></p>
            <div class="tf-container">
                <button class="btn-tf btn-true" onclick="checkTF(this, 'q3', true)">TRUE</button>
                <button class="btn-tf btn-false" onclick="checkTF(this, 'q3', false)">FALSE</button>
            </div>
            <div id="expl-q3" class="explanation-box"></div>
        </div>

        <div class="question-group">
            <p><strong>4. Cars are very popular in Venice.</strong></p>
            <div class="tf-container">
                <button class="btn-tf btn-true" onclick="checkTF(this, 'q4', true)">TRUE</button>
                <button class="btn-tf btn-false" onclick="checkTF(this, 'q4', false)">FALSE</button>
            </div>
            <div id="expl-q4" class="explanation-box"></div>
        </div>

        <div class="question-group">
            <p><strong>5. You can see a lot of churches and cathedrals in St Petersburg.</strong></p>
            <div class="tf-container">
                <button class="btn-tf btn-true" onclick="checkTF(this, 'q5', true)">TRUE</button>
                <button class="btn-tf btn-false" onclick="checkTF(this, 'q5', false)">FALSE</button>
            </div>
            <div id="expl-q5" class="explanation-box"></div>
        </div>

        <div class="question-group">
            <p><strong>6. There aren‚Äôt any museums in Istanbul, Venice and St Petersburg.</strong></p>
            <div class="tf-container">
                <button class="btn-tf btn-true" onclick="checkTF(this, 'q6', true)">TRUE</button>
                <button class="btn-tf btn-false" onclick="checkTF(this, 'q6', false)">FALSE</button>
            </div>
            <div id="expl-q6" class="explanation-box"></div>
        </div>
    </div>

    <div class="card">
        <div class="card-title">IV. Read and complete (Kh√°m ph√° Ph√∫ Qu·ªëc)</div>
        <div class="options-box">
            <div class="option-chip">specialties</div>
            <div class="option-chip">climate</div>
            <div class="option-chip">tourists</div>
            <div class="option-chip">dishes</div>
            <div class="option-chip">activities</div>
            <div class="option-chip">discover</div>
        </div>

        <div class="reading-box">
            Phu Quoc is an island city located in the southwest of the country. Phu Quoc attracts a lot of domestic and foreign (1) <div class="gap-input" onclick="showOptions(this, 'q7', ['specialties','climate','tourists','dishes','activities','discover'])">...</div> because it not only has a mild (2) <div class="gap-input" onclick="showOptions(this, 'q8', ['specialties','climate','tourists','dishes','activities','discover'])">...</div> but also has extremely attractive natural scenery.<br>
            <div id="expl-q7" class="explanation-box"></div>
            <div id="expl-q8" class="explanation-box"></div>

            Coming to Phu Quoc from late October to mid-May, you can enjoy wonderful weather: warm and sunny. This is also the most favorable time for recreational (3) <div class="gap-input" onclick="showOptions(this, 'q9', ['specialties','climate','tourists','dishes','activities','discover'])">...</div> in the pearl island such as kayaking, scuba diving to see corals, fishing, night squid fishing or simply making a trip to (4) <div class="gap-input" onclick="showOptions(this, 'q10', ['specialties','climate','tourists','dishes','activities','discover'])">...</div> nature, the wilderness of Phu Quoc.<br>
            <div id="expl-q9" class="explanation-box"></div>
            <div id="expl-q10" class="explanation-box"></div>

            Phu Quoc is not only famous for beautiful beaches, but also famous for many (5) <div class="gap-input" onclick="showOptions(this, 'q11', ['specialties','climate','tourists','dishes','activities','discover'])">...</div> such as: pearl, Phu Quoc fish sauce, pepper and fresh seafood.<br>
            <div id="expl-q11" class="explanation-box"></div>

            Besides, coming to Phu Quoc, visitors can enjoy many unique, delicious and cheap (6) <div class="gap-input" onclick="showOptions(this, 'q12', ['specialties','climate','tourists','dishes','activities','discover'])">...</div> such as grilled abalone, raw ham with mustard, herring salad, ‚Ä¶<br>
            <div id="expl-q12" class="explanation-box"></div>
        </div>

        <h3>üìö Glossary (T·ª´ v·ª±ng x·ªãn x√≤)</h3>
        <table class="glossary-table">
            <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
            <tr><td>Domestic</td><td>(adj)</td><td>Trong n∆∞·ªõc/N·ªôi ƒë·ªãa</td></tr>
            <tr><td>Recreational</td><td>(adj)</td><td>Mang t√≠nh gi·∫£i tr√≠</td></tr>
            <tr><td>Scenery</td><td>(n)</td><td>Phong c·∫£nh</td></tr>
            <tr><td>Wilderness</td><td>(n)</td><td>V√πng hoang d√£</td></tr>
            <tr><td>Abalone</td><td>(n)</td><td>B√†o ng∆∞</td></tr>
        </table>
    </div>

    <div class="submit-section">
        <button class="btn-submit" onclick="submitTest()">N·ªòP B√ÄI & XEM ƒêI·ªÇM</button>
    </div>

</div>

<div id="dropdown-popup" class="popup-options"></div>

<div id="result-popup" class="result-popup">
    <h2>K·∫æT QU·∫¢ PART 2</h2>
    <div class="result-score" id="final-score">0/12</div>
    <p id="result-message" style="font-size: 1.2rem; margin-top: 10px;"></p>
    <button class="btn-submit" style="font-size: 1rem; padding: 10px 20px;" onclick="closeResult()">Xem l·∫°i b√†i l√†m</button>
</div>

<script>
    // SOUNDS
    const audioCorrect = new Audio('https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3');
    const audioWrong = new Audio('https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3');

    // EXPLANATIONS DATA
    const explanations = {
        // CITY TEXT TRUE/FALSE
        q1: {
            correct: true,
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>C√¢u h·ªèi:</strong> Istanbul n·ªïi ti·∫øng v·ªõi c√°c m√≥n qu√† l∆∞u ni·ªám l√†m th·ªß c√¥ng.</p>
                <p><span class="expl-correct">T·∫°i sao TRUE?</span> D·∫´n ch·ª©ng: "shops... selling <u>handcrafted</u> Turkish ceramics, carpets, lamps..." (c·ª≠a h√†ng b√°n ƒë·ªì g·ªëm, th·∫£m, ƒë√®n l√†m th·ªß c√¥ng).</p>
            </div>`
        },
        q2: {
            correct: false,
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>C√¢u h·ªèi:</strong> Du kh√°ch KH√îNG TH·ªÇ ƒëi b∆°i ·ªü Rio de Janeiro.</p>
                <p><span class="expl-correct">T·∫°i sao FALSE?</span> B√†i ƒë·ªçc nh·∫Øc ƒë·∫øn: "spend all day <u>sunbathing on Copacabana, Ipanema, and Leblon beaches</u>". (T·∫Øm n·∫Øng ·ªü b√£i bi·ªÉn). Rio l√† th√†nh ph·ªë c·ªßa bi·ªÉn v√† n·∫Øng, vi·ªác t·∫Øm bi·ªÉn l√† ho·∫°t ƒë·ªông ch√≠nh -> N√™n n√≥i "kh√¥ng th·ªÉ ƒëi b∆°i" l√† Sai.</p>
            </div>`
        },
        q3: {
            correct: true,
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>C√¢u h·ªèi:</strong> Rio de Janeiro l√† n∆°i tuy·ªát v·ªùi cho nh·ªØng ng∆∞·ªùi th√≠ch nh·∫£y m√∫a.</p>
                <p><span class="expl-correct">T·∫°i sao TRUE?</span> D·∫´n ch·ª©ng: "famous <u>carnivals and samba</u>" (l·ªÖ h·ªôi h√≥a trang v√† ƒëi·ªáu nh·∫£y Samba n·ªïi ti·∫øng th·∫ø gi·ªõi).</p>
            </div>`
        },
        q4: {
            correct: false,
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>C√¢u h·ªèi:</strong> Xe h∆°i r·∫•t ph·ªï bi·∫øn ·ªü Venice.</p>
                <p><span class="expl-correct">T·∫°i sao FALSE?</span> D·∫´n ch·ª©ng: "People <u>do not use cars</u> in Venice" (M·ªçi ng∆∞·ªùi kh√¥ng d√πng xe h∆°i ·ªü Venice).</p>
            </div>`
        },
        q5: {
            correct: true,
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>C√¢u h·ªèi:</strong> B·∫°n c√≥ th·ªÉ th·∫•y nhi·ªÅu nh√† th·ªù v√† th√°nh ƒë∆∞·ªùng ·ªü St Petersburg.</p>
                <p><span class="expl-correct">T·∫°i sao TRUE?</span> D·∫´n ch·ª©ng: "There are, of course, a lot of <u>churches and cathedrals</u> here".</p>
            </div>`
        },
        q6: {
            correct: false,
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>C√¢u h·ªèi:</strong> Kh√¥ng c√≥ b·∫•t k·ª≥ b·∫£o t√†ng n√†o ·ªü Istanbul, Venice v√† St Petersburg.</p>
                <p><span class="expl-correct">T·∫°i sao FALSE?</span> C·∫£ 3 th√†nh ph·ªë ƒë·ªÅu c√≥ b·∫£o t√†ng trong b√†i ƒë·ªçc:
                <br>- Istanbul: Topkapi Palace Museum.
                <br>- Venice: a lot of museums.
                <br>- St Petersburg: Hermitage Museum.</p>
            </div>`
        },
        
        // PHU QUOC GAP FILL
        q7: {
            correct: 'tourists',
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>ƒê√°p √°n:</strong> tourists (du kh√°ch)</p>
                <p><strong>T·∫°i sao ch·ªçn?</strong> "attracts a lot of domestic and foreign..." (thu h√∫t nhi·ªÅu... trong v√† ngo√†i n∆∞·ªõc). T·ª´ ph√π h·ª£p nh·∫•t ƒë·ªÉ ƒëi·ªÅn v√†o ch·ªó tr·ªëng l√† "du kh√°ch".</p>
                <p><strong>D·ªãch:</strong> Ph√∫ Qu·ªëc thu h√∫t nhi·ªÅu du kh√°ch trong v√† ngo√†i n∆∞·ªõc.</p>
            </div>`
        },
        q8: {
            correct: 'climate',
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>ƒê√°p √°n:</strong> climate (kh√≠ h·∫≠u)</p>
                <p><strong>T·∫°i sao ch·ªçn?</strong> ƒêi sau t√≠nh t·ª´ "mild" (√¥n h√≤a). C·ª•m t·ª´ "mild climate" nghƒ©a l√† kh√≠ h·∫≠u √¥n h√≤a.</p>
                <p><strong>D·ªãch:</strong> V√¨ n√≥ kh√¥ng ch·ªâ c√≥ kh√≠ h·∫≠u √¥n h√≤a...</p>
            </div>`
        },
        q9: {
            correct: 'activities',
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>ƒê√°p √°n:</strong> activities (ho·∫°t ƒë·ªông)</p>
                <p><strong>T·∫°i sao ch·ªçn?</strong> C·ª•m "recreational activities" (ho·∫°t ƒë·ªông gi·∫£i tr√≠). Sau ƒë√≥ li·ªát k√™: kayaking, scuba diving (l·∫∑n bi·ªÉn), fishing (c√¢u c√°) -> ƒê√¢y ƒë·ªÅu l√† c√°c ho·∫°t ƒë·ªông.</p>
                <p><strong>D·ªãch:</strong> Th·ªùi ƒëi·ªÉm thu·∫≠n l·ª£i nh·∫•t cho c√°c ho·∫°t ƒë·ªông gi·∫£i tr√≠.</p>
            </div>`
        },
        q10: {
            correct: 'discover',
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>ƒê√°p √°n:</strong> discover (kh√°m ph√°)</p>
                <p><strong>T·∫°i sao ch·ªçn?</strong> C·ª•m "make a trip to..." c·∫ßn m·ªôt ƒë·ªông t·ª´ ch·ªâ m·ª•c ƒë√≠ch. "Discover nature" (kh√°m ph√° thi√™n nhi√™n) l√† h·ª£p l√Ω nh·∫•t.</p>
                <p><strong>D·ªãch:</strong> ƒê∆°n gi·∫£n l√† m·ªôt chuy·∫øn ƒëi ƒë·ªÉ kh√°m ph√° thi√™n nhi√™n.</p>
            </div>`
        },
        q11: {
            correct: 'specialties',
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>ƒê√°p √°n:</strong> specialties (ƒë·∫∑c s·∫£n)</p>
                <p><strong>T·∫°i sao ch·ªçn?</strong> B√†i li·ªát k√™: pearl (ng·ªçc trai), fish sauce (n∆∞·ªõc m·∫Øm), pepper (h·ªì ti√™u). ƒê√¢y l√† c√°c ƒë·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng (kh√¥ng ph·∫£i m√≥n ƒÉn "dishes" ƒë·ªÉ ƒÉn ngay).</p>
                <p><strong>D·ªãch:</strong> N·ªïi ti·∫øng v·ªõi nhi·ªÅu ƒë·∫∑c s·∫£n nh∆∞ ng·ªçc trai, n∆∞·ªõc m·∫Øm...</p>
            </div>`
        },
        q12: {
            correct: 'dishes',
            html: `
            <div class="expl-title">Ms. Mai An gi·∫£i th√≠ch:</div>
            <div class="expl-content">
                <p><strong>ƒê√°p √°n:</strong> dishes (m√≥n ƒÉn)</p>
                <p><strong>T·∫°i sao ch·ªçn?</strong> B√†i li·ªát k√™: grilled abalone (b√†o ng∆∞ n∆∞·ªõng), herring salad (g·ªèi c√° tr√≠ch). ƒê√¢y l√† c√°c m√≥n ƒÉn c·ª• th·ªÉ.</p>
                <p><strong>D·ªãch:</strong> Th∆∞·ªüng th·ª©c nhi·ªÅu m√≥n ƒÉn ƒë·ªôc ƒë√°o, ngon v√† r·∫ª.</p>
            </div>`
        }
    };

    let activeInput = null;

    // --- LOGIC FUNCTIONS (SAME AS PART 1) ---
    function showOptions(element, qId, options) {
        if (element.classList.contains('correct')) return;
        activeInput = element;
        const popup = document.getElementById('dropdown-popup');
        popup.innerHTML = '';
        options.forEach(opt => {
            const div = document.createElement('div');
            div.className = 'popup-option-item';
            div.innerText = opt;
            div.onclick = function() { selectOption(element, qId, opt); popup.style.display = 'none'; };
            popup.appendChild(div);
        });
        const rect = element.getBoundingClientRect();
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        popup.style.top = (rect.bottom + scrollTop + 5) + 'px';
        popup.style.left = rect.left + 'px';
        popup.style.display = 'block';
    }

    function selectOption(element, qId, value) {
        element.innerText = value;
        const correctAnswer = explanations[qId].correct;
        const explDiv = document.getElementById('expl-' + qId);
        
        if (value === correctAnswer) {
            element.className = 'gap-input correct';
            audioCorrect.play();
            triggerConfettiSimple();
        } else {
            element.className = 'gap-input wrong';
            audioWrong.play();
            setTimeout(() => { element.classList.remove('wrong'); }, 1000);
        }
        explDiv.innerHTML = explanations[qId].html;
        explDiv.style.display = 'block';
    }

    function checkTF(btn, qId, userChoice) {
        const parent = btn.parentElement;
        const correctAnswer = explanations[qId].correct;
        const explDiv = document.getElementById('expl-' + qId);

        parent.querySelectorAll('.btn-tf').forEach(b => { b.classList.remove('selected-correct', 'selected-wrong'); });

        if (userChoice === correctAnswer) {
            btn.classList.add('selected-correct');
            audioCorrect.play();
            triggerConfettiSimple();
        } else {
            btn.classList.add('selected-wrong');
            audioWrong.play();
        }
        explDiv.innerHTML = explanations[qId].html;
        explDiv.style.display = 'block';
    }

    function submitTest() {
        let score = 0;
        const totalQuestions = 12;
        document.querySelectorAll('.gap-input').forEach(input => { if (input.classList.contains('correct')) score++; });
        document.querySelectorAll('.tf-container').forEach(container => { if (container.querySelector('.selected-correct')) score++; });

        const popup = document.getElementById('result-popup');
        document.getElementById('final-score').innerText = `${score}/${totalQuestions}`;
        document.getElementById('result-message').innerText = score === totalQuestions ? "Tuy·ªát v·ªùi! Con ƒë√£ ho√†n th√†nh xu·∫•t s·∫Øc!" : "C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©!";
        popup.classList.add('show');
        if(score === totalQuestions) triggerConfetti();
    }

    function closeResult() { document.getElementById('result-popup').classList.remove('show'); }
    function triggerConfettiSimple() { confetti({ particleCount: 50, spread: 70, origin: { y: 0.6 } }); }
    window.onclick = function(event) { if (!event.target.matches('.gap-input')) document.getElementById('dropdown-popup').style.display = 'none'; }
</script>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

</body>
</html>