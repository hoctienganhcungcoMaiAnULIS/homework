<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English 9 - Tourism & Relative Clauses | Ms Mai An ULIS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #8854C0;
            --secondary: #00C9A7;
            --correct: #00D26A;
            --wrong: #FF4757;
            --bg-pattern: #f0f4f8;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-pattern);
            background-image: radial-gradient(#e2e8f0 10%, transparent 11%), radial-gradient(#e2e8f0 10%, transparent 11%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
        }

        /* 3D Button Style */
        .btn-3d {
            transition: all 0.1s;
            border-bottom: 5px solid rgba(0,0,0,0.2);
            transform: translateY(0);
        }

        .btn-3d:active {
            transform: translateY(4px);
            border-bottom: 0px solid rgba(0,0,0,0.2);
        }

        .option-card {
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid #e2e8f0;
            border-bottom: 6px solid #cbd5e1;
        }

        .option-card:hover:not(.disabled) {
            transform: scale(1.02);
            border-color: var(--primary);
        }

        .option-card.correct {
            background-color: var(--correct);
            border-color: #00b85c;
            border-bottom-color: #008a45;
            color: white;
        }

        .option-card.wrong {
            background-color: var(--wrong);
            border-color: #ff2e40;
            border-bottom-color: #d11a2a;
            color: white;
            animation: shake 0.5s;
        }

        .explanation-box {
            display: none;
            animation: slideDown 0.4s ease-out forwards;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .teacher-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        /* Markdown formatting in explanation */
        .rationale-content strong {
            color: #d97706; /* Amber-600 */
        }
        .rationale-content ul {
            list-style-type: disc;
            padding-left: 20px;
            margin-top: 5px;
        }
        .rationale-content li {
            margin-bottom: 4px;
        }
    </style>
</head>
<body class="min-h-screen pb-20">

    <!-- Header -->
    <header class="bg-[#8854C0] text-white p-4 sticky top-0 z-50 shadow-lg border-b-4 border-[#6a3da1]">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-white text-[#8854C0] font-bold w-10 h-10 rounded-full flex items-center justify-center border-b-4 border-gray-200">MA</div>
                <div>
                    <h1 class="font-extrabold text-xl md:text-2xl">Ms Mai An ULIS</h1>
                    <p class="text-xs text-purple-200 font-bold">English 9 - Tourism & Relative Clauses</p>
                </div>
            </div>
            <div class="bg-white/20 px-4 py-2 rounded-xl font-bold backdrop-blur-sm border-2 border-white/30">
                Score: <span id="current-score">0</span>
            </div>
        </div>
        <!-- Progress Bar -->
        <div class="max-w-4xl mx-auto mt-4 bg-purple-900/30 h-3 rounded-full overflow-hidden">
            <div id="progress-bar" class="h-full bg-[#00C9A7] w-0 transition-all duration-500 ease-out"></div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto p-4 mt-6">
        
        <!-- Welcome Screen -->
        <div id="start-screen" class="bg-white rounded-3xl p-8 shadow-xl text-center border-b-8 border-gray-200">
            <div class="text-6xl mb-6">üåè‚úàÔ∏è</div>
            <h2 class="text-3xl font-extrabold text-gray-800 mb-4">Ch√†o m·ª´ng ƒë·∫øn v·ªõi l·ªõp h·ªçc c·ªßa C√¥ Mai An!</h2>
            <p class="text-gray-600 mb-8 text-lg">B√†i ki·ªÉm tra v·ªÅ Ch·ªß ƒë·ªÅ Du l·ªãch & M·ªánh ƒë·ªÅ quan h·ªá. <br>Em ƒë√£ s·∫µn s√†ng chinh ph·ª•c ƒëi·ªÉm 10 ch∆∞a?</p>
            <div class="space-y-4">
                 <button onclick="startGame()" class="btn-3d w-full md:w-auto px-10 py-4 bg-[#00C9A7] text-white font-bold rounded-2xl text-xl hover:bg-[#00a88d]">
                    B·∫ÆT ƒê·∫¶U NGAY üöÄ
                </button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="hidden space-y-8">
            <!-- Questions will be injected here via JS -->
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden bg-white rounded-3xl p-8 shadow-xl text-center border-b-8 border-gray-200 mt-10">
            <div class="text-6xl mb-4">üèÜ</div>
            <h2 class="text-3xl font-extrabold text-gray-800 mb-2">T·ªïng k·∫øt</h2>
            <p class="text-gray-500 mb-6">Em ƒë√£ ho√†n th√†nh b√†i thi!</p>
            
            <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="bg-green-100 p-4 rounded-2xl border-b-4 border-green-200">
                    <p class="text-green-600 font-bold text-sm">C√ÇU ƒê√öNG</p>
                    <p id="final-score" class="text-4xl font-extrabold text-green-700">0</p>
                </div>
                <div class="bg-purple-100 p-4 rounded-2xl border-b-4 border-purple-200">
                    <p class="text-purple-600 font-bold text-sm">T·ªîNG C√ÇU</p>
                    <p id="total-questions" class="text-4xl font-extrabold text-purple-700">0</p>
                </div>
            </div>

            <div id="teacher-comment" class="bg-yellow-50 p-6 rounded-2xl border-2 border-dashed border-yellow-300 mb-8 text-left relative">
                <div class="absolute -top-3 -left-3 bg-yellow-400 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm">L·ªùi ph√™ c·ªßa c√¥</div>
                <p class="text-gray-700 italic font-medium">"..."</p>
            </div>

            <button onclick="location.reload()" class="btn-3d px-8 py-3 bg-[#8854C0] text-white font-bold rounded-xl hover:bg-[#6f42a1]">
                L√†m l·∫°i b√†i thi üîÑ
            </button>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center text-gray-400 text-sm py-8">
        ¬© 2024 Ms Mai An ULIS - English 9 Practice
    </footer>

    <script>
        // --- DATA SOURCE ---
        const rawData = {
          "questions": [
            {
              "questionNumber": 1,
              "question": "31. I prefer to go to ______ places to enjoy tranquillity rather than to a noisy place.",
              "hint": "C·∫ßn m·ªôt c·ª•m t·ª´ mang nghƒ©a ƒë·ªëi l·∫≠p v·ªõi 'noisy place' (n∆°i ·ªìn √†o) v√† ph√π h·ª£p v·ªõi 'tranquillity' (s·ª± y√™n b√¨nh).",
              "answerOptions": [
                { "text": "central", "rationale": "Sai. **central** (adj): ·ªü trung t√¢m. N∆°i trung t√¢m th∆∞·ªùng ·ªìn √†o, kh√¥ng y√™n tƒ©nh.", "isCorrect": false },
                { "text": "on the beaten track", "rationale": "Sai. **on the beaten track** (idiom): n∆°i n·ªïi ti·∫øng, ƒë√¥ng ƒë√∫c. Kh√¥ng ph√π h·ª£p v·ªõi vi·ªác t√¨m ki·∫øm s·ª± y√™n b√¨nh.", "isCorrect": false },
                { "text": "urban", "rationale": "Sai. **urban** (adj): thu·ªôc th√†nh th·ªã. Th√†nh th·ªã th∆∞·ªùng ·ªìn √†o.", "isCorrect": false },
                { "text": "off the beaten track", "rationale": "Ch√≠nh x√°c. **off the beaten track** (idiom): n∆°i xa x√¥i, h·∫ªo l√°nh, √≠t ng∆∞·ªùi bi·∫øt ƒë·∫øn (th∆∞·ªùng y√™n tƒ©nh).\n\n**D·ªãch chi ti·∫øt:**\n* **prefer to (v):** th√≠ch h∆°n\n* **tranquillity (n):** s·ª± y√™n b√¨nh\n* **noisy (adj):** ·ªìn √†o\n* **off the beaten track (idiom):** xa x√¥i, √≠t ng∆∞·ªùi qua l·∫°i\n\n**D·ªãch c√¢u:** T√¥i th√≠ch ƒëi ƒë·∫øn nh·ªØng n∆°i **h·∫ªo l√°nh/√≠t ng∆∞·ªùi bi·∫øt** ƒë·ªÉ t·∫≠n h∆∞·ªüng s·ª± y√™n b√¨nh h∆°n l√† ƒë·∫øn m·ªôt n∆°i ·ªìn √†o.", "isCorrect": true }
              ]
            },
            {
              "questionNumber": 2,
              "question": "32. Spending the holidays at a campsite in the forest isn't very ______ to me.",
              "hint": "C·∫ßn m·ªôt t√≠nh t·ª´ m√¥ t·∫£ c·∫£m x√∫c/s·ª± thu h√∫t c·ªßa vi·ªác ƒëi c·∫Øm tr·∫°i ƒë·ªëi v·ªõi ng∆∞·ªùi n√≥i.",
              "answerOptions": [
                { "text": "appealing", "rationale": "Ch√≠nh x√°c. **appealing** (adj): h·∫•p d·∫´n, l√¥i cu·ªën.\n\n**D·ªãch chi ti·∫øt:**\n* **Spending (v-ing):** D√†nh th·ªùi gian\n* **campsite (n):** khu c·∫Øm tr·∫°i\n* **appealing (adj):** h·∫•p d·∫´n\n\n**D·ªãch c√¢u:** Vi·ªác d√†nh k·ª≥ ngh·ªâ t·∫°i m·ªôt khu c·∫Øm tr·∫°i trong r·ª´ng kh√¥ng **h·∫•p d·∫´n** l·∫Øm ƒë·ªëi v·ªõi t√¥i.", "isCorrect": true },
                { "text": "breathtaking", "rationale": "Sai. **breathtaking** (adj): ƒë·∫πp ngo·∫°n m·ª•c (th∆∞·ªùng d√πng cho phong c·∫£nh, kh√¥ng d√πng cho s·ª± vi·ªác 'spending holidays' theo c·∫•u tr√∫c n√†y).", "isCorrect": false },
                { "text": "detailed", "rationale": "Sai. **detailed** (adj): chi ti·∫øt.", "isCorrect": false },
                { "text": "smooth", "rationale": "Sai. **smooth** (adj): tr√¥i ch·∫£y, m∆∞·ª£t m√†.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 3,
              "question": "33. We visited the local _______ to admire the handmade jewellery and pottery on display.",
              "hint": "N∆°i n√†o tr∆∞ng b√†y v√† b√°n c√°c s·∫£n ph·∫©m th·ªß c√¥ng (handmade) nh∆∞ trang s·ª©c v√† g·ªëm s·ª©?",
              "answerOptions": [
                { "text": "village", "rationale": "Sai. **village** (n): ng√¥i l√†ng. M·∫∑c d√π c√≥ th·ªÉ ƒë·∫øn l√†ng ngh·ªÅ, nh∆∞ng ng·ªØ c·∫£nh 'on display' (ƒë∆∞·ª£c tr∆∞ng b√†y) th∆∞·ªùng √°m ch·ªâ m·ªôt s·ª± ki·ªán ho·∫∑c ch·ª£ c·ª• th·ªÉ.", "isCorrect": false },
                { "text": "craft fair", "rationale": "Ch√≠nh x√°c. **craft fair** (n): h·ªôi ch·ª£ th·ªß c√¥ng m·ªπ ngh·ªá. ƒê√¢y l√† n∆°i tr∆∞ng b√†y ƒë·ªì handmade.\n\n**D·ªãch chi ti·∫øt:**\n* **admire (v):** chi√™m ng∆∞·ª°ng\n* **handmade jewellery (n):** trang s·ª©c th·ªß c√¥ng\n* **pottery (n):** ƒë·ªì g·ªëm\n* **on display:** ƒëang ƒë∆∞·ª£c tr∆∞ng b√†y\n\n**D·ªãch c√¢u:** Ch√∫ng t√¥i ƒë√£ gh√© thƒÉm **h·ªôi ch·ª£ th·ªß c√¥ng** ƒë·ªãa ph∆∞∆°ng ƒë·ªÉ chi√™m ng∆∞·ª°ng ƒë·ªì trang s·ª©c th·ªß c√¥ng v√† ƒë·ªì g·ªëm ƒë∆∞·ª£c tr∆∞ng b√†y.", "isCorrect": true },
                { "text": "market", "rationale": "Kh√¥ng ch√≠nh x√°c nh·∫•t. **market** (n): ch·ª£. Ch·ª£ th√¨ chung chung, 'craft fair' c·ª• th·ªÉ h∆°n cho ƒë·ªì th·ªß c√¥ng.", "isCorrect": false },
                { "text": "supermarket", "rationale": "Sai. **supermarket** (n): si√™u th·ªã (b√°n ƒë·ªì c√¥ng nghi·ªáp/th·ª±c ph·∫©m).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 4,
              "question": "34. The local ______ arranged a homestay in Ninh Binh for us also let us hire his car to get around.",
              "hint": "Danh t·ª´ 'The local' ·ªü ƒë√¢y ch·ªâ ng∆∞·ªùi d√¢n ƒë·ªãa ph∆∞∆°ng. C·∫ßn m·ªôt ƒë·∫°i t·ª´ quan h·ªá thay th·∫ø cho danh t·ª´ ch·ªâ ng∆∞·ªùi l√†m ch·ªß ng·ªØ cho ƒë·ªông t·ª´ 'arranged'.",
              "answerOptions": [
                { "text": "what", "rationale": "Sai. **what**: c√°i g√¨ (kh√¥ng d√πng l√†m ƒë·∫°i t·ª´ quan h·ªá thay th·∫ø cho ti·ªÅn ng·ªØ).", "isCorrect": false },
                { "text": "who", "rationale": "Ch√≠nh x√°c. **who** thay th·∫ø cho danh t·ª´ ch·ªâ ng∆∞·ªùi ('The local') v√† l√†m ch·ªß ng·ªØ cho m·ªánh ƒë·ªÅ quan h·ªá.\n\n**D·ªãch chi ti·∫øt:**\n* **The local (n):** Ng∆∞·ªùi d√¢n ƒë·ªãa ph∆∞∆°ng\n* **arrange (v):** s·∫Øp x·∫øp\n* **hire (v):** thu√™\n* **get around (v):** ƒëi l·∫°i loanh quanh\n\n**D·ªãch c√¢u:** Ng∆∞·ªùi d√¢n ƒë·ªãa ph∆∞∆°ng, **ng∆∞·ªùi m√†** ƒë√£ s·∫Øp x·∫øp ch·ªó ·ªü homestay ·ªü Ninh B√¨nh cho ch√∫ng t√¥i, c≈©ng ƒë√£ cho ch√∫ng t√¥i thu√™ xe c·ªßa anh ·∫•y ƒë·ªÉ ƒëi l·∫°i.", "isCorrect": true },
                { "text": "whose", "rationale": "Sai. **whose**: ch·ªâ s·ª± s·ªü h·ªØu (sau n√≥ ph·∫£i l√† danh t·ª´).", "isCorrect": false },
                { "text": "which", "rationale": "Sai. **which**: d√πng cho v·∫≠t.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 5,
              "question": "35. Canada Sports tourism, ______ helps develop the economy substantially, has a number of objectives.",
              "hint": "C·ª•m danh t·ª´ 'Canada Sports tourism' l√† v·∫≠t/s·ª± vi·ªác. ƒê√¢y l√† m·ªánh ƒë·ªÅ quan h·ªá kh√¥ng x√°c ƒë·ªãnh (c√≥ d·∫•u ph·∫©y).",
              "answerOptions": [
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** d√πng thay th·∫ø cho v·∫≠t trong m·ªánh ƒë·ªÅ quan h·ªá kh√¥ng x√°c ƒë·ªãnh (c√≥ d·∫•u ph·∫©y).\n\n**D·ªãch chi ti·∫øt:**\n* **substantially (adv):** ƒë√°ng k·ªÉ\n* **objectives (n):** m·ª•c ti√™u\n\n**D·ªãch c√¢u:** Du l·ªãch Th·ªÉ thao Canada, **c√°i m√†** gi√∫p ph√°t tri·ªÉn n·ªÅn kinh t·∫ø ƒë√°ng k·ªÉ, c√≥ m·ªôt s·ªë m·ª•c ti√™u nh·∫•t ƒë·ªãnh.", "isCorrect": true },
                { "text": "that", "rationale": "Sai. **that** kh√¥ng d√πng trong m·ªánh ƒë·ªÅ quan h·ªá kh√¥ng x√°c ƒë·ªãnh (sau d·∫•u ph·∫©y).", "isCorrect": false },
                { "text": "who", "rationale": "Sai. D√πng cho ng∆∞·ªùi.", "isCorrect": false },
                { "text": "where", "rationale": "Sai. Ch·ªâ n∆°i ch·ªën (c·∫ßn ch·ªß ng·ªØ + ƒë·ªông t·ª´ sau ƒë√≥, ·ªü ƒë√¢y 'helps' l√† ƒë·ªông t·ª´ lu√¥n).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 6,
              "question": "36. The travel agency ______ provided us with the tours gave us a small discount.",
              "hint": "'The travel agency' l√† danh t·ª´ ch·ªâ v·∫≠t/t·ªï ch·ª©c. C·∫ßn ƒë·∫°i t·ª´ quan h·ªá l√†m ch·ªß ng·ªØ.",
              "answerOptions": [
                { "text": "Whose", "rationale": "Sai. Ch·ªâ s·ªü h·ªØu.", "isCorrect": false },
                { "text": "who", "rationale": "Sai. D√πng cho ng∆∞·ªùi (tr·ª´ khi nh√¢n h√≥a, nh∆∞ng 'which' chu·∫©n h∆°n cho t·ªï ch·ª©c).", "isCorrect": false },
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** d√πng cho v·∫≠t ('travel agency').\n\n**D·ªãch chi ti·∫øt:**\n* **travel agency (n):** ƒë·∫°i l√Ω du l·ªãch\n* **provide with (v):** cung c·∫•p\n* **discount (n):** gi·∫£m gi√°\n\n**D·ªãch c√¢u:** ƒê·∫°i l√Ω du l·ªãch **c√°i m√†** cung c·∫•p c√°c tour cho ch√∫ng t√¥i ƒë√£ gi·∫£m gi√° nh·ªè cho ch√∫ng t√¥i.", "isCorrect": true },
                { "text": "what", "rationale": "Sai. Kh√¥ng d√πng l√†m ƒë·∫°i t·ª´ quan h·ªá.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 7,
              "question": "37. People can use online apps to book tickets and accommodation, ______ is so convenient for visitors.",
              "hint": "M·ªánh ƒë·ªÅ quan h·ªá b·ªï sung √Ω nghƒ©a cho c·∫£ c√¢u ph√≠a tr∆∞·ªõc ('vi·ªác m·ªçi ng∆∞·ªùi c√≥ th·ªÉ d√πng app...').",
              "answerOptions": [
                { "text": "what", "rationale": "Sai.", "isCorrect": false },
                { "text": "that", "rationale": "Sai. Kh√¥ng d√πng sau d·∫•u ph·∫©y ƒë·ªÉ thay th·∫ø cho c·∫£ m·ªánh ƒë·ªÅ.", "isCorrect": false },
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** d√πng sau d·∫•u ph·∫©y ƒë·ªÉ thay th·∫ø cho c·∫£ m·ªánh ƒë·ªÅ ph√≠a tr∆∞·ªõc.\n\n**D·ªãch chi ti·∫øt:**\n* **accommodation (n):** ch·ªó ·ªü\n* **convenient (adj):** thu·∫≠n ti·ªán\n\n**D·ªãch c√¢u:** M·ªçi ng∆∞·ªùi c√≥ th·ªÉ d√πng ·ª©ng d·ª•ng tr·ª±c tuy·∫øn ƒë·ªÉ ƒë·∫∑t v√© v√† ch·ªó ·ªü, **ƒëi·ªÅu n√†y** r·∫•t thu·∫≠n ti·ªán cho du kh√°ch.", "isCorrect": true },
                { "text": "who", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 8,
              "question": "38. The guide ______ led this guided tour was very knowledgeable about local history.",
              "hint": "'The guide' l√† danh t·ª´ ch·ªâ ng∆∞·ªùi. C·∫ßn ƒë·∫°i t·ª´ quan h·ªá l√†m ch·ªß ng·ªØ cho ƒë·ªông t·ª´ 'led'.",
              "answerOptions": [
                { "text": "which", "rationale": "Sai. D√πng cho v·∫≠t.", "isCorrect": false },
                { "text": "whom", "rationale": "Sai. D√πng l√†m t√¢n ng·ªØ (object).", "isCorrect": false },
                { "text": "who", "rationale": "Ch√≠nh x√°c. **who** thay th·∫ø cho ng∆∞·ªùi v√† l√†m ch·ªß ng·ªØ.\n\n**D·ªãch chi ti·∫øt:**\n* **guide (n):** h∆∞·ªõng d·∫´n vi√™n\n* **knowledgeable (adj):** am hi·ªÉu\n\n**D·ªãch c√¢u:** Ng∆∞·ªùi h∆∞·ªõng d·∫´n vi√™n, **ng∆∞·ªùi m√†** d·∫´n tour n√†y, r·∫•t am hi·ªÉu v·ªÅ l·ªãch s·ª≠ ƒë·ªãa ph∆∞∆°ng.", "isCorrect": true },
                { "text": "whose", "rationale": "Sai. Ch·ªâ s·ªü h·ªØu.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 9,
              "question": "39. The culinary tour ______ included tastings of local specialities was the highlight of our trip.",
              "hint": "'The culinary tour' l√† danh t·ª´ ch·ªâ v·∫≠t. C√°c ƒë√°p √°n kh√¥ng c√≥ 'which', h√£y t√¨m t·ª´ thay th·∫ø t∆∞∆°ng ƒë∆∞∆°ng.",
              "answerOptions": [
                { "text": "who", "rationale": "Sai. D√πng cho ng∆∞·ªùi.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai. Ch·ªâ s·ªü h·ªØu.", "isCorrect": false },
                { "text": "whom", "rationale": "Sai. D√πng cho ng∆∞·ªùi.", "isCorrect": false },
                { "text": "that", "rationale": "Ch√≠nh x√°c. **that** c√≥ th·ªÉ thay th·∫ø cho **which** trong m·ªánh ƒë·ªÅ quan h·ªá x√°c ƒë·ªãnh (defining relative clause) ch·ªâ v·∫≠t.\n\n**D·ªãch chi ti·∫øt:**\n* **culinary tour (n):** tour ·∫©m th·ª±c\n* **tastings (n):** vi·ªác n·∫øm th·ª≠\n* **specialities (n):** ƒë·∫∑c s·∫£n\n\n**D·ªãch c√¢u:** Chuy·∫øn tour ·∫©m th·ª±c **c√°i m√†** bao g·ªìm vi·ªác n·∫øm th·ª≠ c√°c ƒë·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng l√† ƒëi·ªÉm nh·∫•n c·ªßa chuy·∫øn ƒëi.", "isCorrect": true }
              ]
            },
            {
              "questionNumber": 10,
              "question": "40. Amy wants to get on that scenic train ______ crosses through the landscape of Switzerland.",
              "hint": "'scenic train' l√† danh t·ª´ ch·ªâ v·∫≠t. C·∫ßn ch·ªß ng·ªØ cho ƒë·ªông t·ª´ 'crosses'.",
              "answerOptions": [
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "that", "rationale": "Ch√≠nh x√°c. **that** thay th·∫ø cho danh t·ª´ ch·ªâ v·∫≠t ('train') trong m·ªánh ƒë·ªÅ quan h·ªá x√°c ƒë·ªãnh.\n\n**D·ªãch chi ti·∫øt:**\n* **scenic train (n):** t√†u ng·∫Øm c·∫£nh\n* **landscape (n):** phong c·∫£nh\n\n**D·ªãch c√¢u:** Amy mu·ªën l√™n chuy·∫øn t√†u ng·∫Øm c·∫£nh **c√°i m√†** bƒÉng qua phong c·∫£nh c·ªßa Th·ª•y Sƒ©.", "isCorrect": true },
                { "text": "whom", "rationale": "Sai.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 11,
              "question": "41. The Four Seasons Resort, ______ offers stunning ocean views, is highly rated by guests.",
              "hint": "Danh t·ª´ ri√™ng ch·ªâ v·∫≠t/ƒë·ªãa ƒëi·ªÉm, c√≥ d·∫•u ph·∫©y (m·ªánh ƒë·ªÅ kh√¥ng x√°c ƒë·ªãnh).",
              "answerOptions": [
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** d√πng cho v·∫≠t trong m·ªánh ƒë·ªÅ quan h·ªá kh√¥ng x√°c ƒë·ªãnh.\n\n**D·ªãch chi ti·∫øt:**\n* **stunning (adj):** tuy·ªát ƒë·∫πp\n* **highly rated (adj):** ƒë∆∞·ª£c ƒë√°nh gi√° cao\n\n**D·ªãch c√¢u:** Khu ngh·ªâ d∆∞·ª°ng Four Seasons, **n∆°i** cung c·∫•p t·∫ßm nh√¨n ra bi·ªÉn tuy·ªát ƒë·∫πp, ƒë∆∞·ª£c kh√°ch h√†ng ƒë√°nh gi√° r·∫•t cao.", "isCorrect": true },
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false },
                { "text": "whom", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 12,
              "question": "42. The cruise ship, ______ amenities include a rooftop pool and fine dining, is a favourite among holidaymakers.",
              "hint": "Ti·ªán nghi (amenities) C·ª¶A con t√†u (cruise ship). C·∫ßn t·ª´ ch·ªâ s·ªü h·ªØu.",
              "answerOptions": [
                { "text": "which", "rationale": "Sai.", "isCorrect": false },
                { "text": "that", "rationale": "Sai.", "isCorrect": false },
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "whose", "rationale": "Ch√≠nh x√°c. **whose** ch·ªâ s·ªü h·ªØu cho danh t·ª´ ch·ªâ v·∫≠t.\n\n**D·ªãch chi ti·∫øt:**\n* **cruise ship (n):** du thuy·ªÅn\n* **amenities (n):** ti·ªán nghi\n* **holidaymakers (n):** ng∆∞·ªùi ƒëi ngh·ªâ m√°t\n\n**D·ªãch c√¢u:** Con du thuy·ªÅn, **m√† c√°c ti·ªán nghi c·ªßa n√≥** bao g·ªìm h·ªì b∆°i tr√™n s√¢n th∆∞·ª£ng v√† ·∫©m th·ª±c cao c·∫•p, l√† s·ª± y√™u th√≠ch c·ªßa du kh√°ch.", "isCorrect": true }
              ]
            },
            {
              "questionNumber": 13,
              "question": "43. The hotel staff, from ______ we asked for help, were exceptionally friendly and helpful.",
              "hint": "C√≥ gi·ªõi t·ª´ 'from' ƒë·ª©ng tr∆∞·ªõc. Danh t·ª´ 'staff' ch·ªâ ng∆∞·ªùi.",
              "answerOptions": [
                { "text": "who", "rationale": "Sai. Sau gi·ªõi t·ª´ kh√¥ng d√πng 'who'.", "isCorrect": false },
                { "text": "which", "rationale": "Sai. D√πng cho v·∫≠t.", "isCorrect": false },
                { "text": "whom", "rationale": "Ch√≠nh x√°c. **whom** d√πng thay th·∫ø cho ng∆∞·ªùi khi ƒë·ª©ng sau gi·ªõi t·ª´ ('from').\n\n**D·ªãch chi ti·∫øt:**\n* **staff (n):** nh√¢n vi√™n\n* **exceptionally (adv):** ƒë·∫∑c bi·ªát, kh√°c th∆∞·ªùng\n\n**D·ªãch c√¢u:** Nh√¢n vi√™n kh√°ch s·∫°n, **nh·ªØng ng∆∞·ªùi m√†** ch√∫ng t√¥i ƒë√£ nh·ªù gi√∫p ƒë·ª°, c·ª±c k·ª≥ th√¢n thi·ªán v√† hay gi√∫p ƒë·ª°.", "isCorrect": true },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 14,
              "question": "44. The restaurant ______ we dined at yesterday had a menu full of delicious local dishes.",
              "hint": "'restaurant' l√† v·∫≠t. ƒê√≥ng vai tr√≤ t√¢n ng·ªØ (object) cho gi·ªõi t·ª´ 'at' (dined at...).",
              "answerOptions": [
                { "text": "that", "rationale": "Ch√≠nh x√°c. **that** c√≥ th·ªÉ thay th·∫ø cho **which** trong m·ªánh ƒë·ªÅ quan h·ªá x√°c ƒë·ªãnh ch·ªâ v·∫≠t.\n\n**D·ªãch chi ti·∫øt:**\n* **dine (v):** ƒÉn t·ªëi\n* **delicious (adj):** ngon\n\n**D·ªãch c√¢u:** Nh√† h√†ng **m√†** ch√∫ng t√¥i ƒë√£ ƒÉn t·ªëi h√¥m qua c√≥ th·ª±c ƒë∆°n ƒë·∫ßy c√°c m√≥n ƒë·ªãa ph∆∞∆°ng ngon tuy·ªát.", "isCorrect": true },
                { "text": "whom", "rationale": "Sai. D√πng cho ng∆∞·ªùi.", "isCorrect": false },
                { "text": "who", "rationale": "Sai. D√πng cho ng∆∞·ªùi.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai. Ch·ªâ s·ªü h·ªØu.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 15,
              "question": "45. Visitors ______ come to Kyoto are usually impressed by its temples and gardens.",
              "hint": "'Visitors' l√† danh t·ª´ ch·ªâ ng∆∞·ªùi. C·∫ßn ch·ªß ng·ªØ cho ƒë·ªông t·ª´ 'come'.",
              "answerOptions": [
                { "text": "which", "rationale": "Sai.", "isCorrect": false },
                { "text": "who", "rationale": "Ch√≠nh x√°c. **who** thay th·∫ø cho ng∆∞·ªùi v√† l√†m ch·ªß ng·ªØ.\n\n**D·ªãch chi ti·∫øt:**\n* **Visitors (n):** Du kh√°ch\n* **impressed (adj):** b·ªã ·∫•n t∆∞·ª£ng\n\n**D·ªãch c√¢u:** Nh·ªØng du kh√°ch **ng∆∞·ªùi m√†** ƒë·∫øn Kyoto th∆∞·ªùng b·ªã ·∫•n t∆∞·ª£ng b·ªüi nh·ªØng ng√¥i ƒë·ªÅn v√† khu v∆∞·ªùn ·ªü ƒë√≥.", "isCorrect": true },
                { "text": "whom", "rationale": "Sai. D√πng l√†m t√¢n ng·ªØ.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 16,
              "question": "46. The British Museum has many ancient relics ______ span several millennia of human history.",
              "hint": "'ancient relics' (di t√≠ch c·ªï) l√† danh t·ª´ ch·ªâ v·∫≠t.",
              "answerOptions": [
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** d√πng cho v·∫≠t l√†m ch·ªß ng·ªØ.\n\n**D·ªãch chi ti·∫øt:**\n* **ancient relics (n):** di t√≠ch c·ªï\n* **span (v):** tr·∫£i d√†i\n* **millennia (n):** thi√™n ni√™n k·ª∑ (s·ªë nhi·ªÅu)\n\n**D·ªãch c√¢u:** B·∫£o t√†ng Anh c√≥ nhi·ªÅu di t√≠ch c·ªï **c√°i m√†** tr·∫£i d√†i qua nhi·ªÅu thi√™n ni√™n k·ª∑ l·ªãch s·ª≠ lo√†i ng∆∞·ªùi.", "isCorrect": true },
                { "text": "whom", "rationale": "Sai.", "isCorrect": false },
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 17,
              "question": "47. Passengers ______ flights were delayed were offered free accommodation for the night.",
              "hint": "Chuy·∫øn bay (flights) C·ª¶A h√†nh kh√°ch (Passengers).",
              "answerOptions": [
                { "text": "whose", "rationale": "Ch√≠nh x√°c. **whose** ch·ªâ s·ª± s·ªü h·ªØu (Passengers' flights).\n\n**D·ªãch chi ti·∫øt:**\n* **Passengers (n):** H√†nh kh√°ch\n* **delayed (adj):** b·ªã ho√£n\n* **accommodation (n):** ch·ªó ·ªü\n\n**D·ªãch c√¢u:** Nh·ªØng h√†nh kh√°ch **ng∆∞·ªùi m√† c√≥** chuy·∫øn bay b·ªã ho√£n ƒë√£ ƒë∆∞·ª£c cung c·∫•p ch·ªó ·ªü mi·ªÖn ph√≠ qua ƒë√™m.", "isCorrect": true },
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "whom", "rationale": "Sai.", "isCorrect": false },
                { "text": "which", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 18,
              "question": "48. We stayed at a charming little hotel ______ balcony overlooked a beautiful beach.",
              "hint": "Ban c√¥ng (balcony) C·ª¶A kh√°ch s·∫°n (hotel).",
              "answerOptions": [
                { "text": "which", "rationale": "Sai.", "isCorrect": false },
                { "text": "that", "rationale": "Sai.", "isCorrect": false },
                { "text": "whose", "rationale": "Ch√≠nh x√°c. **whose** ch·ªâ s·ª± s·ªü h·ªØu cho danh t·ª´ ch·ªâ v·∫≠t.\n\n**D·ªãch chi ti·∫øt:**\n* **charming (adj):** quy·∫øn r≈©, duy√™n d√°ng\n* **balcony (n):** ban c√¥ng\n* **overlook (v):** nh√¨n ra\n\n**D·ªãch c√¢u:** Ch√∫ng t√¥i ƒë√£ ·ªü t·∫°i m·ªôt kh√°ch s·∫°n nh·ªè duy√™n d√°ng **m√† ban c√¥ng c·ªßa n√≥** nh√¨n ra m·ªôt b√£i bi·ªÉn tuy·ªát ƒë·∫πp.", "isCorrect": true },
                { "text": "where", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 19,
              "question": "49. We booked a walking tour led by a passionate guide ______ shared fascinating stories about the city‚Äôs history.",
              "hint": "'passionate guide' l√† danh t·ª´ ch·ªâ ng∆∞·ªùi. C·∫ßn ch·ªß ng·ªØ cho 'shared'.",
              "answerOptions": [
                { "text": "which", "rationale": "Sai.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false },
                { "text": "whom", "rationale": "Sai.", "isCorrect": false },
                { "text": "who", "rationale": "Ch√≠nh x√°c. **who** thay th·∫ø cho ng∆∞·ªùi v√† l√†m ch·ªß ng·ªØ.\n\n**D·ªãch chi ti·∫øt:**\n* **passionate (adj):** ƒë·∫ßy ƒëam m√™/nhi·ªát huy·∫øt\n* **fascinating (adj):** h·∫•p d·∫´n\n\n**D·ªãch c√¢u:** Ch√∫ng t√¥i ƒë√£ ƒë·∫∑t m·ªôt tour ƒëi b·ªô ƒë∆∞·ª£c d·∫´n b·ªüi m·ªôt h∆∞·ªõng d·∫´n vi√™n ƒë·∫ßy nhi·ªát huy·∫øt, **ng∆∞·ªùi m√†** ƒë√£ chia s·∫ª nh·ªØng c√¢u chuy·ªán h·∫•p d·∫´n v·ªÅ l·ªãch s·ª≠ th√†nh ph·ªë.", "isCorrect": true }
              ]
            },
            {
              "questionNumber": 20,
              "question": "50. We visited a national park ______ is home to a variety of endangered species.",
              "hint": "'national park' l√† danh t·ª´ ch·ªâ v·∫≠t/n∆°i ch·ªën. ·ªû ƒë√¢y n√≥ ƒë√≥ng vai tr√≤ ch·ªß ng·ªØ cho ƒë·ªông t·ª´ 'is'.",
              "answerOptions": [
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** thay th·∫ø cho v·∫≠t/n∆°i ch·ªën l√†m ch·ªß ng·ªØ. (L∆∞u √Ω: 'where' kh√¥ng th·ªÉ l√†m ch·ªß ng·ªØ, n·∫øu d√πng 'where' ph·∫£i l√† 'where a variety of species live').\n\n**D·ªãch chi ti·∫øt:**\n* **national park (n):** v∆∞·ªùn qu·ªëc gia\n* **endangered species (n):** c√°c lo√†i nguy c·∫•p\n\n**D·ªãch c√¢u:** Ch√∫ng t√¥i ƒë√£ thƒÉm m·ªôt v∆∞·ªùn qu·ªëc gia **n∆°i (c√°i m√†)** l√† nh√† c·ªßa nhi·ªÅu lo√†i ƒë·ªông v·∫≠t nguy c·∫•p.", "isCorrect": true },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false },
                { "text": "where", "rationale": "Sai. 'where' = in which, kh√¥ng l√†m ch·ªß ng·ªØ cho ƒë·ªông t·ª´ 'is'.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 21,
              "question": "51. The tour guide, ______ knowledge of local history was impressive, shared fascinating stories.",
              "hint": "Ki·∫øn th·ª©c (knowledge) C·ª¶A h∆∞·ªõng d·∫´n vi√™n (tour guide).",
              "answerOptions": [
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "whom", "rationale": "Sai.", "isCorrect": false },
                { "text": "that", "rationale": "Sai. Kh√¥ng d√πng trong m·ªánh ƒë·ªÅ quan h·ªá kh√¥ng x√°c ƒë·ªãnh.", "isCorrect": false },
                { "text": "whose", "rationale": "Ch√≠nh x√°c. **whose** ch·ªâ s·ª± s·ªü h·ªØu.\n\n**D·ªãch chi ti·∫øt:**\n* **impressive (adj):** ·∫•n t∆∞·ª£ng\n\n**D·ªãch c√¢u:** Ng∆∞·ªùi h∆∞·ªõng d·∫´n vi√™n, **ng∆∞·ªùi m√† c√≥** ki·∫øn th·ª©c v·ªÅ l·ªãch s·ª≠ ƒë·ªãa ph∆∞∆°ng r·∫•t ·∫•n t∆∞·ª£ng, ƒë√£ chia s·∫ª nh·ªØng c√¢u chuy·ªán th√∫ v·ªã.", "isCorrect": true }
              ]
            },
            {
              "questionNumber": 22,
              "question": "52. The famous beaches in Thailand, ______ many tourists flock to, offer stunning views and clear waters.",
              "hint": "'beaches' l√† danh t·ª´ ch·ªâ v·∫≠t. Ch√∫ √Ω gi·ªõi t·ª´ 'to' ·ªü cu·ªëi m·ªánh ƒë·ªÅ (flock to...).",
              "answerOptions": [
                { "text": "where", "rationale": "Sai. Kh√¥ng d√πng 'where' khi ƒë√£ c√≥ gi·ªõi t·ª´ ch·ªâ n∆°i ch·ªën ƒëi k√®m (flock to).", "isCorrect": false },
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** l√†m t√¢n ng·ªØ cho gi·ªõi t·ª´ 'to' (flock to which).\n\n**D·ªãch chi ti·∫øt:**\n* **flock to (v):** ƒë·ªï x√¥ ƒë·∫øn\n* **clear waters (n):** l√†n n∆∞·ªõc trong xanh\n\n**D·ªãch c√¢u:** Nh·ªØng b√£i bi·ªÉn n·ªïi ti·∫øng ·ªü Th√°i Lan, **n∆°i m√†** nhi·ªÅu du kh√°ch ƒë·ªï x√¥ ƒë·∫øn, mang l·∫°i t·∫ßm nh√¨n tuy·ªát ƒë·∫πp v√† l√†n n∆∞·ªõc trong xanh.", "isCorrect": true },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false },
                { "text": "who", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 23,
              "question": "53. The restaurant ______ serves fresh seafood has a beautiful view of the harbour.",
              "hint": "'The restaurant' l√† danh t·ª´ ch·ªâ v·∫≠t. C·∫ßn ch·ªß ng·ªØ cho 'serves'.",
              "answerOptions": [
                { "text": "that", "rationale": "Ch√≠nh x√°c. **that** (ho·∫∑c which) d√πng cho v·∫≠t l√†m ch·ªß ng·ªØ trong m·ªánh ƒë·ªÅ quan h·ªá x√°c ƒë·ªãnh.\n\n**D·ªãch chi ti·∫øt:**\n* **seafood (n):** h·∫£i s·∫£n\n* **harbour (n):** b·∫øn c·∫£ng\n\n**D·ªãch c√¢u:** Nh√† h√†ng **c√°i m√†** ph·ª•c v·ª• h·∫£i s·∫£n t∆∞∆°i s·ªëng c√≥ t·∫ßm nh√¨n tuy·ªát ƒë·∫πp ra b·∫øn c·∫£ng.", "isCorrect": true },
                { "text": "where", "rationale": "Sai. 'where' kh√¥ng l√†m ch·ªß ng·ªØ.", "isCorrect": false },
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "whom", "rationale": "Sai.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 24,
              "question": "54. I feel satisfied because this is the most amazing trip ______ I‚Äôve ever taken.",
              "hint": "Sau so s√°nh nh·∫•t (most amazing), ∆∞u ti√™n d√πng ƒë·∫°i t·ª´ quan h·ªá n√†o?",
              "answerOptions": [
                { "text": "where", "rationale": "Sai.", "isCorrect": false },
                { "text": "when", "rationale": "Sai.", "isCorrect": false },
                { "text": "that", "rationale": "Ch√≠nh x√°c. D√πng **that** sau c·∫•u tr√∫c so s√°nh nh·∫•t (superlatives) thay v√¨ which.\n\n**D·ªãch chi ti·∫øt:**\n* **satisfied (adj):** h√†i l√≤ng\n* **amazing (adj):** tuy·ªát v·ªùi\n\n**D·ªãch c√¢u:** T√¥i c·∫£m th·∫•y h√†i l√≤ng v√¨ ƒë√¢y l√† chuy·∫øn ƒëi tuy·ªát v·ªùi nh·∫•t **m√†** t√¥i t·ª´ng th·ª±c hi·ªán.", "isCorrect": true },
                { "text": "which", "rationale": "Sai (√≠t d√πng sau so s√°nh nh·∫•t).", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 25,
              "question": "55. The flamenco dancers, ______ were wearing beautiful costumes, performed with incredible passion.",
              "hint": "'flamenco dancers' l√† danh t·ª´ ch·ªâ ng∆∞·ªùi. M·ªánh ƒë·ªÅ kh√¥ng x√°c ƒë·ªãnh.",
              "answerOptions": [
                { "text": "whom", "rationale": "Sai. D√πng l√†m t√¢n ng·ªØ.", "isCorrect": false },
                { "text": "that", "rationale": "Sai. Kh√¥ng d√πng sau d·∫•u ph·∫©y.", "isCorrect": false },
                { "text": "who", "rationale": "Ch√≠nh x√°c. **who** thay th·∫ø cho ng∆∞·ªùi l√†m ch·ªß ng·ªØ trong m·ªánh ƒë·ªÅ quan h·ªá kh√¥ng x√°c ƒë·ªãnh.\n\n**D·ªãch chi ti·∫øt:**\n* **costumes (n):** trang ph·ª•c\n* **passion (n):** ni·ªÅm ƒëam m√™\n\n**D·ªãch c√¢u:** C√°c v≈© c√¥ng flamenco, **nh·ªØng ng∆∞·ªùi** m·∫∑c trang ph·ª•c tuy·ªát ƒë·∫πp, ƒë√£ bi·ªÉu di·ªÖn v·ªõi ni·ªÅm ƒëam m√™ ƒë√°ng kinh ng·∫°c.", "isCorrect": true },
                { "text": "which", "rationale": "Sai. D√πng cho v·∫≠t.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 26,
              "question": "56. Sustainable tourism practices are important to protect the environment, ______ benefits local communities as well.",
              "hint": "M·ªánh ƒë·ªÅ quan h·ªá b·ªï sung √Ω nghƒ©a cho c·∫£ c√¢u ph√≠a tr∆∞·ªõc ('vi·ªác th·ª±c h√†nh du l·ªãch b·ªÅn v·ªØng...').",
              "answerOptions": [
                { "text": "which", "rationale": "Ch√≠nh x√°c. **which** d√πng sau d·∫•u ph·∫©y ƒë·ªÉ thay th·∫ø cho c·∫£ m·ªánh ƒë·ªÅ ph√≠a tr∆∞·ªõc.\n\n**D·ªãch chi ti·∫øt:**\n* **Sustainable tourism (n):** du l·ªãch b·ªÅn v·ªØng\n* **benefit (v):** mang l·∫°i l·ª£i √≠ch\n\n**D·ªãch c√¢u:** Th·ª±c h√†nh du l·ªãch b·ªÅn v·ªØng l√† quan tr·ªçng ƒë·ªÉ b·∫£o v·ªá m√¥i tr∆∞·ªùng, **ƒëi·ªÅu n√†y** c≈©ng mang l·∫°i l·ª£i √≠ch cho c·ªông ƒë·ªìng ƒë·ªãa ph∆∞∆°ng.", "isCorrect": true },
                { "text": "who", "rationale": "Sai.", "isCorrect": false },
                { "text": "whose", "rationale": "Sai.", "isCorrect": false },
                { "text": "that", "rationale": "Sai. Kh√¥ng d√πng sau d·∫•u ph·∫©y.", "isCorrect": false }
              ]
            },
            {
              "questionNumber": 27,
              "question": "57. The hostel‚Äôs services and friendly staff ______ went above and beyond to help us made our stay enjoyable.",
              "hint": "Ti·ªÅn ng·ªØ bao g·ªìm c·∫£ s·ª± v·∫≠t ('services') v√† ng∆∞·ªùi ('staff'). Theo quy t·∫Øc, n√™n d√πng ƒë·∫°i t·ª´ n√†o? (Tuy nhi√™n ƒë·ªông t·ª´ 'went above and beyond' th∆∞·ªùng ch·ªâ h√†nh ƒë·ªông c·ªßa con ng∆∞·ªùi).",
              "answerOptions": [
                { "text": "which", "rationale": "Sai. Ch·ªâ d√πng cho v·∫≠t.", "isCorrect": false },
                { "text": "who", "rationale": "Kh√¥ng ch√≠nh x√°c nh·∫•t. Ch·ªâ d√πng cho ng∆∞·ªùi. (D√π 'staff' l√† ng∆∞·ªùi, nh∆∞ng 'services' th√¨ kh√¥ng).",
                "isCorrect": false },
                { "text": "whose", "rationale": "Sai. Ch·ªâ s·ªü h·ªØu.", "isCorrect": false },
                { "text": "that", "rationale": "Ch√≠nh x√°c. **that** d√πng thay th·∫ø cho ti·ªÅn ng·ªØ h·ªón h·ª£p (c·∫£ ng∆∞·ªùi v√† v·∫≠t). M·∫∑c d√π h√†nh ƒë·ªông 't·∫≠n t√¨nh gi√∫p ƒë·ª°' ch·ªß y·∫øu do nh√¢n vi√™n, nh∆∞ng v·ªÅ m·∫∑t ng·ªØ ph√°p khi g·ªôp 'services and staff', **that** l√† l·ª±a ch·ªçn an to√†n nh·∫•t.\n\n**D·ªãch chi ti·∫øt:**\n* **go above and beyond (idiom):** l√†m v∆∞·ª£t qu√° mong ƒë·ª£i/t·∫≠n t√¨nh\n* **enjoyable (adj):** th√∫ v·ªã/d·ªÖ ch·ªãu\n\n**D·ªãch c√¢u:** D·ªãch v·ª• v√† nh√¢n vi√™n th√¢n thi·ªán c·ªßa nh√† ngh·ªâ, **nh·ªØng th·ª©/ng∆∞·ªùi m√†** ƒë√£ h·∫øt l√≤ng gi√∫p ƒë·ª° ch√∫ng t√¥i, ƒë√£ khi·∫øn k·ª≥ ngh·ªâ c·ªßa ch√∫ng t√¥i th·∫≠t th√∫ v·ªã.", "isCorrect": true }
              ]
            }
          ]
        };

        // --- GLOBAL VARIABLES ---
        let currentQuestions = [];
        let score = 0;
        let audioCtx;

        // --- SOUND SYNTHESIS ---
        // Create audio context on first user interaction to comply with browser policies
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playSound(type) {
            initAudio();
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            if (type === 'correct') {
                // "Ding" sound: High pitch sine wave
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(800, audioCtx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.5);
            } else {
                // "Buzz" sound: Low pitch sawtooth/square
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- UTILITY FUNCTIONS ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatText(text) {
            // Basic markdown parser for bolding
            return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
        }

        // --- GAME LOGIC ---
        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            
            score = 0;
            document.getElementById('current-score').innerText = score;
            
            // Clone and Shuffle Questions
            currentQuestions = JSON.parse(JSON.stringify(rawData.questions));
            currentQuestions = shuffleArray(currentQuestions);

            renderQuestions();
            initAudio();
        }

        function renderQuestions() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            currentQuestions.forEach((q, index) => {
                // Shuffle options for display
                let displayOptions = q.answerOptions.map((opt, i) => ({...opt, originalIndex: i}));
                displayOptions = shuffleArray(displayOptions);

                const cardHTML = `
                    <div class="bg-white rounded-3xl p-6 shadow-md border border-gray-100 relative" id="question-card-${index}">
                        <div class="absolute -top-3 left-4 bg-[#8854C0] text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">C√¢u ${index + 1}</div>
                        
                        <h3 class="text-xl text-gray-800 font-bold mt-4 mb-2 leading-relaxed">${q.question}</h3>
                        ${q.hint ? `<p class="text-sm text-gray-500 italic mb-4">üí° G·ª£i √Ω: ${q.hint}</p>` : ''}

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                            ${displayOptions.map(opt => `
                                <div class="option-card bg-gray-50 p-4 rounded-xl font-semibold text-gray-700 flex items-center justify-between"
                                     onclick="checkAnswer(${index}, this, ${opt.isCorrect})">
                                    <span>${opt.text}</span>
                                    <span class="status-icon text-xl hidden"></span>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Explanation Area -->
                        <div id="explanation-${index}" class="explanation-box bg-purple-50 rounded-xl p-5 border border-purple-100 mt-4 relative">
                            <div class="flex items-start gap-4">
                                <img src="https://ui-avatars.com/api/?name=Ms+Mai+An&background=8854C0&color=fff&size=128" alt="Teacher" class="teacher-avatar flex-shrink-0">
                                <div class="flex-1">
                                    <h4 class="font-bold text-[#8854C0] mb-1">C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</h4>
                                    <div class="text-sm text-gray-700 leading-relaxed rationale-content">
                                        <!-- Combine all rationales -->
                                        ${generateExplanationContent(q)}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', cardHTML);
            });

            // Add Submit Button at the bottom
            const submitBtn = `
                <div class="text-center pt-8 pb-12">
                     <button onclick="finishGame()" class="btn-3d px-12 py-4 bg-[#00C9A7] text-white font-extrabold rounded-2xl text-xl hover:bg-[#00a88d] shadow-xl transform transition hover:-translate-y-1">
                        N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÅ
                    </button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', submitBtn);
        }

        function generateExplanationContent(questionData) {
            // Find the correct rationale which usually contains the translation
            const correctOpt = questionData.answerOptions.find(o => o.isCorrect);
            let content = "";
            
            // Build the analysis of options
            content += "<p><strong>Ph√¢n t√≠ch ƒë√°p √°n:</strong></p><ul>";
            questionData.answerOptions.forEach(opt => {
                // Try to extract just the definition part if possible, or use the rationale
                // Cleaning up "Sai." or "Ch√≠nh x√°c." from the start
                let cleanRationale = opt.rationale.replace(/^(Sai\.|Ch√≠nh x√°c\.|ƒê√∫ng\.)\s*/i, '');
                content += `<li><strong>${opt.text}:</strong> ${formatText(cleanRationale)}</li>`;
            });
            content += "</ul>";

            return content;
        }

        function checkAnswer(questionIndex, element, isCorrect) {
            // Prevent re-clicking
            const card = document.getElementById(`question-card-${questionIndex}`);
            if (card.classList.contains('answered')) return;
            
            card.classList.add('answered');
            const explanation = document.getElementById(`explanation-${questionIndex}`);
            const allOptions = card.querySelectorAll('.option-card');

            // Disable all options
            allOptions.forEach(opt => opt.classList.add('disabled', 'cursor-default'));

            if (isCorrect) {
                // Correct Logic
                element.classList.add('correct');
                element.querySelector('.status-icon').innerText = '‚ú®';
                element.querySelector('.status-icon').classList.remove('hidden');
                playSound('correct');
                score++;
                document.getElementById('current-score').innerText = score;
                triggerConfetti();
            } else {
                // Wrong Logic
                element.classList.add('wrong');
                element.querySelector('.status-icon').innerText = 'üò¢';
                element.querySelector('.status-icon').classList.remove('hidden');
                playSound('wrong');

                // Highlight the correct answer automatically
                allOptions.forEach(opt => {
                     // We need to find the correct one based on onclick attribute or text, 
                     // but simpler: we rendered them. Let's look at the onclick attribute string in DOM (hacky but works for static render)
                     // Better: check the `isCorrect` passed in function? No, we need to find the *other* element.
                     // Logic: Loop options, if DOM element text matches correct option text in data.
                     // Implementation: Since we mapped data, we know which is correct.
                     // Visual feedback is key.
                     if (opt.getAttribute('onclick').includes('true')) {
                         opt.classList.add('correct', 'opacity-75'); // Dim it slightly to show it was missed
                     }
                });
            }

            // Update Progress Bar
            const total = currentQuestions.length;
            const answeredCount = document.querySelectorAll('.answered').length;
            const progress = (answeredCount / total) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            // Show Explanation
            explanation.style.display = 'block';
        }

        function triggerConfetti() {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#8854C0', '#00C9A7', '#FFD700']
            });
        }

        function finishGame() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            
            const total = currentQuestions.length;
            document.getElementById('final-score').innerText = score;
            document.getElementById('total-questions').innerText = total;

            // Generate Teacher Comment
            const percentage = (score / total) * 100;
            let comment = "";
            if (percentage === 100) comment = "Xu·∫•t s·∫Øc! Em l√† thi√™n t√†i Ti·∫øng Anh t∆∞∆°ng lai! üåüüíØ";
            else if (percentage >= 80) comment = "Gi·ªèi l·∫Øm! Ch·ªâ c·∫ßn c·∫©n th·∫≠n h∆°n m·ªôt ch√∫t n·ªØa l√† ƒë∆∞·ª£c 10 ƒëi·ªÉm r·ªìi! üëè";
            else if (percentage >= 50) comment = "Kh√° t·ªët! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ hi·ªÉu r√µ h∆°n nh·ªØng c√¢u sai nh√©! üí™";
            else comment = "ƒê·ª´ng bu·ªìn nh√©! H√£y √¥n t·∫≠p l·∫°i t·ª´ v·ª±ng v√† c·∫•u tr√∫c ng·ªØ ph√°p r·ªìi th·ª≠ l·∫°i n√†o! üìö";
            
            document.getElementById('teacher-comment').querySelector('p').innerText = comment;
            
            if (percentage >= 80) {
                const duration = 3000;
                const end = Date.now() + duration;

                (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#8854C0', '#00C9A7']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#8854C0', '#00C9A7']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
                }());
            }
        }

    </script>
</body>
</html>
