<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Form Practice: Festivals & Celebrations - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-pastel: #f0f4f8;
            --card-shadow: 0 8px 0 rgba(0,0,0,0.15);
            --card-shadow-active: 0 4px 0 rgba(0,0,0,0.15);
            --text-dark: #2d3436;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-pastel);
            background-image: radial-gradient(#dfe6e9 15%, transparent 16%), radial-gradient(#dfe6e9 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-bottom: 5px solid var(--primary-purple);
        }

        h1 {
            color: var(--primary-purple);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            margin: 0;
            font-size: 2.2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .teacher-name {
            display: inline-block;
            background: var(--primary-teal);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-top: 10px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* Question Card */
        .quiz-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 2px solid #eee;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .quiz-card:hover {
            transform: translateY(-5px);
        }

        .question-badge {
            position: absolute;
            top: 0;
            left: 0;
            background: var(--primary-purple);
            color: white;
            padding: 8px 15px;
            border-bottom-right-radius: 15px;
            font-weight: 800;
            font-size: 1.1rem;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            margin-top: 25px;
            margin-bottom: 25px;
            line-height: 1.6;
            color: #2d3436;
        }

        .question-text span {
            color: var(--primary-purple);
            border-bottom: 2px dashed var(--primary-purple);
        }

        .hint-text {
            font-size: 0.9rem;
            color: #636e72;
            font-style: italic;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .hint-text::before {
            content: 'üí°';
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe6e9;
            padding: 15px 20px;
            border-radius: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 0 #dfe6e9;
            text-align: left;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            background-color: #f8f9fa;
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 0 0 #dfe6e9;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-green);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 4px 0 #00b85c;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red);
            color: white;
            border-color: #e6404f;
            box-shadow: 0 4px 0 #e6404f;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 20px;
            background: #fff8e1; /* Light yellow for explanation */
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #ffc107;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-header {
            font-weight: 800;
            color: #d35400;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .expl-section {
            margin-bottom: 12px;
        }

        .expl-title {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 4px;
            font-size: 0.95rem;
            text-decoration: underline;
            text-decoration-color: var(--primary-teal);
        }

        .expl-content {
            font-size: 0.95rem;
            line-height: 1.5;
            color: #34495e;
        }
        
        .vocab-list {
            list-style: none;
            padding: 0;
            margin: 5px 0;
        }
        
        .vocab-item {
            background: rgba(255,255,255,0.6);
            padding: 4px 8px;
            border-radius: 6px;
            margin-bottom: 4px;
            border: 1px solid rgba(0,0,0,0.05);
            font-size: 0.9rem;
        }

        /* Footer */
        .footer-controls {
            text-align: center;
            margin-top: 40px;
            padding-bottom: 40px;
        }

        .submit-btn {
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 800;
            box-shadow: 0 6px 0 #6c429c;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Quicksand', sans-serif;
            text-transform: uppercase;
        }

        .submit-btn:hover {
            transform: scale(1.05);
        }

        .submit-btn:active {
            transform: scale(0.95) translateY(4px);
            box-shadow: 0 0 0 #6c429c;
        }

        /* Modal Score */
        .score-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .score-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 5px solid var(--primary-teal);
        }

        .score-number {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary-purple);
            margin: 20px 0;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }
    </style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<div class="container">
    <header>
        <div class="teacher-name">Gi√°o vi√™n: Ms Mai An ULIS</div>
        <h1>Festivals & Celebrations</h1>
        <p style="color: #636e72; font-weight: 600;">B√†i t·∫≠p Word Form (C·∫•u t·∫°o t·ª´) - L·ªõp 7/8/9</p>
    </header>

    <div id="quiz-container">
        <!-- Questions will be injected here by JS -->
    </div>

    <div class="footer-controls">
        <button class="submit-btn" onclick="finishQuiz()">N·ªôp B√†i & Xem ƒêi·ªÉm</button>
    </div>
</div>

<!-- Score Modal -->
<div id="scoreModal" class="score-modal">
    <div class="score-card">
        <h2 style="color: var(--primary-teal); margin-top: 0;">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
        <div class="score-number" id="final-score">0/0</div>
        <p id="feedback-text" style="font-size: 1.2rem; font-weight: 600; color: #636e72;"></p>
        <button class="submit-btn" onclick="closeModal()" style="padding: 10px 30px; font-size: 1rem; margin-top: 10px;">L√†m l·∫°i</button>
    </div>
</div>

<script>
    // --- DATA ---
    // D·ªØ li·ªáu l·∫•y tr·ª±c ti·∫øp t·ª´ file ƒë·ªÅ b√†i
    const quizData = [
        {
            id: 1,
            question: "Streets are decorated with _________________ lights and red banners. (colour)",
            hint: "B·∫°n c·∫ßn m·ªôt t√≠nh t·ª´ (adjective) ƒë·ªÉ mi√™u t·∫£ cho danh t·ª´ 'lights'.",
            options: [
                { text: "colour", type: "n/v", meaning: "m√†u s·∫Øc / t√¥ m√†u" },
                { text: "colourful", type: "adj", meaning: "s·∫∑c s·ª°, nhi·ªÅu m√†u s·∫Øc" },
                { text: "colourfully", type: "adv", meaning: "m·ªôt c√°ch s·∫∑c s·ª°" },
                { text: "coloured", type: "v-ed/adj", meaning: "ƒë∆∞·ª£c t√¥ m√†u" }
            ],
            correctIndex: 1, // colourful
            translation: "ƒê∆∞·ªùng ph·ªë ƒë∆∞·ª£c trang tr√≠ v·ªõi nh·ªØng √°nh ƒë√®n s·∫∑c s·ª° v√† bƒÉng r√¥n ƒë·ªè.",
            explanation: {
                correct: "**colourful** (adj): s·∫∑c s·ª°. V·ªã tr√≠ tr·ªëng ƒë·ª©ng tr∆∞·ªõc danh t·ª´ 'lights' n√™n c·∫ßn m·ªôt t√≠nh t·ª´ (adjective) ƒë·ªÉ b·ªï nghƒ©a ch·ªâ t√≠nh ch·∫•t.",
                wrong: "**colour** l√† danh t·ª´/ƒë·ªông t·ª´. **colourfully** l√† tr·∫°ng t·ª´. **coloured** th∆∞·ªùng mang nghƒ©a 'ƒë∆∞·ª£c t√¥ m√†u' (nh√¢n t·∫°o) kh√¥ng hay b·∫±ng 'colourful' khi n√≥i v·ªÅ ƒë√®n l·ªÖ h·ªôi."
            }
        },
        {
            id: 2,
            question: "It is _________________ in America to eat turkey on Thanksgiving Day. (tradition)",
            hint: "Sau 'It is' th∆∞·ªùng l√† m·ªôt t√≠nh t·ª´ (adjective).",
            options: [
                { text: "tradition", type: "n", meaning: "truy·ªÅn th·ªëng" },
                { text: "traditional", type: "adj", meaning: "thu·ªôc v·ªÅ truy·ªÅn th·ªëng" },
                { text: "traditionally", type: "adv", meaning: "theo truy·ªÅn th·ªëng" },
                { text: "traditionalist", type: "n", meaning: "ng∆∞·ªùi theo ch·ªß nghƒ©a truy·ªÅn th·ªëng" }
            ],
            correctIndex: 1, // traditional
            translation: "ƒÇn g√† t√¢y v√†o ng√†y L·ªÖ T·∫° ∆†n l√† m·ªôt ƒëi·ªÅu truy·ªÅn th·ªëng ·ªü M·ªπ.",
            explanation: {
                correct: "C·∫•u tr√∫c c√¢u gi·∫£ **It is + adjective + to do something**. C·∫ßn t√≠nh t·ª´ **traditional**.",
                wrong: "**tradition** l√† danh t·ª´. **traditionally** l√† tr·∫°ng t·ª´. **traditionalist** l√† danh t·ª´ ch·ªâ ng∆∞·ªùi."
            }
        },
        {
            id: 3,
            question: "Vietnam's New Year is _________________ according to the Lunar calendar. (celebrate)",
            hint: "C√¢u n√†y ƒëang d√πng th·ªÉ b·ªã ƒë·ªông (Passive Voice) v√¨ NƒÉm m·ªõi 'ƒë∆∞·ª£c' t·ªï ch·ª©c.",
            options: [
                { text: "celebrate", type: "v", meaning: "t·ªï ch·ª©c, ƒÉn m·ª´ng" },
                { text: "celebration", type: "n", meaning: "l·ªÖ k·ª∑ ni·ªám" },
                { text: "celebrated", type: "v-ed", meaning: "ƒë∆∞·ª£c t·ªï ch·ª©c" },
                { text: "celebratory", type: "adj", meaning: "mang t√≠nh k·ª∑ ni·ªám" }
            ],
            correctIndex: 2, // celebrated
            translation: "NƒÉm m·ªõi c·ªßa Vi·ªát Nam ƒë∆∞·ª£c t·ªï ch·ª©c theo √Çm l·ªãch.",
            explanation: {
                correct: "ƒê√¢y l√† c√¢u b·ªã ƒë·ªông (Passive voice): **be + V-ed/V3**. Ch·ªß ng·ªØ l√† 'New Year' (v·∫≠t) n√™n c·∫ßn b·ªã ƒë·ªông -> **celebrated**.",
                wrong: "**celebrate** l√† ƒë·ªông t·ª´ nguy√™n th·ªÉ. **celebration** l√† danh t·ª´. **celebratory** l√† t√≠nh t·ª´ nh∆∞ng kh√¥ng d√πng trong c·∫•u tr√∫c b·ªã ƒë·ªông n√†y."
            }
        },
        {
            id: 4,
            question: "What forms of _________________ do you participate in during the festival? (entertain)",
            hint: "Sau gi·ªõi t·ª´ 'of', ta c·∫ßn ƒëi·ªÅn m·ªôt danh t·ª´ (noun).",
            options: [
                { text: "entertain", type: "v", meaning: "gi·∫£i tr√≠" },
                { text: "entertaining", type: "adj", meaning: "th√∫ v·ªã" },
                { text: "entertainer", type: "n", meaning: "ng∆∞·ªùi l√†m gi·∫£i tr√≠" },
                { text: "entertainment", type: "n", meaning: "s·ª± gi·∫£i tr√≠ / h√¨nh th·ª©c gi·∫£i tr√≠" }
            ],
            correctIndex: 3, // entertainment
            translation: "B·∫°n tham gia v√†o nh·ªØng h√¨nh th·ª©c gi·∫£i tr√≠ n√†o trong l·ªÖ h·ªôi?",
            explanation: {
                correct: "Sau gi·ªõi t·ª´ 'of' c·∫ßn m·ªôt danh t·ª´. C·ª•m **forms of entertainment** (c√°c h√¨nh th·ª©c gi·∫£i tr√≠).",
                wrong: "**entertain** l√† ƒë·ªông t·ª´. **entertaining** l√† t√≠nh t·ª´. **entertainer** l√† danh t·ª´ ch·ªâ ng∆∞·ªùi (kh√¥ng h·ª£p ng·ªØ c·∫£nh 'h√¨nh th·ª©c')."
            }
        },
        {
            id: 5,
            question: "Her eyes were wide with _________________ when she heard the news. (excite)",
            hint: "Sau gi·ªõi t·ª´ 'with' ·ªü ƒë√¢y c·∫ßn m·ªôt danh t·ª´ (noun) ch·ªâ c·∫£m x√∫c.",
            options: [
                { text: "excite", type: "v", meaning: "k√≠ch th√≠ch, g√¢y ph·∫•n kh√≠ch" },
                { text: "excitement", type: "n", meaning: "s·ª± ph·∫•n kh√≠ch" },
                { text: "exciting", type: "adj", meaning: "th√∫ v·ªã (cho v·∫≠t/vi·ªác)" },
                { text: "excited", type: "adj", meaning: "ph·∫•n kh√≠ch (cho ng∆∞·ªùi)" }
            ],
            correctIndex: 1, // excitement
            translation: "M·∫Øt c√¥ ·∫•y m·ªü to v√¨ ph·∫•n kh√≠ch khi c√¥ ·∫•y nghe tin t·ª©c.",
            explanation: {
                correct: "Sau gi·ªõi t·ª´ 'with' c·∫ßn m·ªôt danh t·ª´ ch·ªâ c·∫£m x√∫c -> **excitement**.",
                wrong: "**excite** l√† ƒë·ªông t·ª´. **exciting/excited** l√† t√≠nh t·ª´, kh√¥ng ƒë·ª©ng ngay sau gi·ªõi t·ª´ 'with' trong c·∫•u tr√∫c n√†y."
            }
        },
        {
            id: 6,
            question: "A masquerade is a _________________ gathering of people wearing masks. (festival)",
            hint: "C·∫ßn m·ªôt t√≠nh t·ª´ (adj) ƒë·ª©ng tr∆∞·ªõc danh t·ª´ 'gathering'.",
            options: [
                { text: "festival", type: "n", meaning: "l·ªÖ h·ªôi" },
                { text: "festive", type: "adj", meaning: "thu·ªôc v·ªÅ l·ªÖ h·ªôi, vui nh∆∞ h·ªôi" },
                { text: "festivities", type: "n-pl", meaning: "c√°c ho·∫°t ƒë·ªông l·ªÖ h·ªôi" },
                { text: "festively", type: "adv", meaning: "m·ªôt c√°ch l·ªÖ h·ªôi" }
            ],
            correctIndex: 1, // festive
            translation: "D·∫° h·ªôi h√≥a trang l√† m·ªôt bu·ªïi t·ª• t·∫≠p mang kh√¥ng kh√≠ l·ªÖ h·ªôi c·ªßa nh·ªØng ng∆∞·ªùi ƒëeo m·∫∑t n·∫°.",
            explanation: {
                correct: "ƒê·ª©ng tr∆∞·ªõc danh t·ª´ 'gathering' (bu·ªïi t·ª• t·∫≠p) c·∫ßn m·ªôt t√≠nh t·ª´ b·ªï nghƒ©a -> **festive**.",
                wrong: "**festival** l√† danh t·ª´. **festivities** l√† danh t·ª´ s·ªë nhi·ªÅu. **festively** l√† tr·∫°ng t·ª´."
            }
        },
        {
            id: 7,
            question: "The Rio Carnival Samba _________________ are known as the greatest show on Earth! (parade)",
            hint: "Ch√∫ √Ω ƒë·ªông t·ª´ 'are', ch·ªß ng·ªØ c·∫ßn ·ªü d·∫°ng s·ªë nhi·ªÅu.",
            options: [
                { text: "parade", type: "n-sing", meaning: "cu·ªôc di·ªÖu h√†nh" },
                { text: "parades", type: "n-pl", meaning: "c√°c cu·ªôc di·ªÖu h√†nh" },
                { text: "parading", type: "v-ing", meaning: "vi·ªác di·ªÖu h√†nh" },
                { text: "paraded", type: "v-ed", meaning: "ƒë√£ di·ªÖu h√†nh" }
            ],
            correctIndex: 1, // parades
            translation: "C√°c cu·ªôc di·ªÖu h√†nh Samba t·∫°i l·ªÖ h·ªôi Carnival Rio ƒë∆∞·ª£c bi·∫øt ƒë·∫øn l√† show di·ªÖn tuy·ªát nh·∫•t Tr√°i ƒê·∫•t!",
            explanation: {
                correct: "ƒê·ªông t·ª´ ch√≠nh l√† **are** (s·ªë nhi·ªÅu) n√™n ch·ªß ng·ªØ ph·∫£i l√† danh t·ª´ s·ªë nhi·ªÅu -> **parades**.",
                wrong: "**parade** l√† s·ªë √≠t (ƒëi v·ªõi is). **parading/paraded** l√† d·∫°ng ƒë·ªông t·ª´."
            }
        },
        {
            id: 8,
            question: "A music festival includes live _________________ of singing and musical instrument playing. (perform)",
            hint: "C·∫ßn m·ªôt danh t·ª´ (noun) ch·ªâ c√°c ti·∫øt m·ª•c/m√†n tr√¨nh di·ªÖn.",
            options: [
                { text: "perform", type: "v", meaning: "bi·ªÉu di·ªÖn" },
                { text: "performer", type: "n", meaning: "ng∆∞·ªùi bi·ªÉu di·ªÖn" },
                { text: "performative", type: "adj", meaning: "mang t√≠nh bi·ªÉu di·ªÖn" },
                { text: "performances", type: "n", meaning: "c√°c m√†n tr√¨nh di·ªÖn" }
            ],
            correctIndex: 3, // performances
            translation: "M·ªôt l·ªÖ h·ªôi √¢m nh·∫°c bao g·ªìm c√°c m√†n tr√¨nh di·ªÖn tr·ª±c ti·∫øp c·ªßa vi·ªác h√°t v√† ch∆°i nh·∫°c c·ª•.",
            explanation: {
                correct: "C·∫ßn danh t·ª´ ƒëi sau t√≠nh t·ª´ 'live'. Ng·ªØ c·∫£nh n√≥i v·ªÅ 'singing and playing' (ho·∫°t ƒë·ªông) v√† l·ªÖ h·ªôi c√≥ nhi·ªÅu ti·∫øt m·ª•c n√™n d√πng **performances**.",
                wrong: "**perform** l√† ƒë·ªông t·ª´. **performer** ch·ªâ ng∆∞·ªùi. **performative** l√† t√≠nh t·ª´."
            }
        },
        {
            id: 9,
            question: "Hue Festival is a _________________ event that is held every two years. (culture)",
            hint: "C·∫ßn m·ªôt t√≠nh t·ª´ (adj) ƒë·ªÉ b·ªï nghƒ©a cho 'event'.",
            options: [
                { text: "culture", type: "n", meaning: "vƒÉn h√≥a" },
                { text: "cultural", type: "adj", meaning: "thu·ªôc v·ªÅ vƒÉn h√≥a" },
                { text: "culturally", type: "adv", meaning: "v·ªÅ m·∫∑t vƒÉn h√≥a" },
                { text: "cultured", type: "adj", meaning: "c√≥ h·ªçc th·ª©c (ng∆∞·ªùi)" }
            ],
            correctIndex: 1, // cultural
            translation: "Festival Hu·∫ø l√† m·ªôt s·ª± ki·ªán vƒÉn h√≥a ƒë∆∞·ª£c t·ªï ch·ª©c hai nƒÉm m·ªôt l·∫ßn.",
            explanation: {
                correct: "Tr∆∞·ªõc danh t·ª´ 'event' (s·ª± ki·ªán) c·∫ßn t√≠nh t·ª´ -> **cultural**.",
                wrong: "**culture** l√† danh t·ª´. **culturally** l√† tr·∫°ng t·ª´. **cultured** d√πng cho ng∆∞·ªùi (c√≥ h·ªçc)."
            }
        },
        {
            id: 10,
            question: "New Year's Eve is one of the largest global _________________ because it marks the last day of the year. (celebrate)",
            hint: "Sau c·ª•m t·ª´ 'one of the...' (m·ªôt trong nh·ªØng...), danh t·ª´ lu√¥n ·ªü d·∫°ng s·ªë nhi·ªÅu.",
            options: [
                { text: "celebrate", type: "v", meaning: "ƒÉn m·ª´ng" },
                { text: "celebrated", type: "adj", meaning: "n·ªïi ti·∫øng" },
                { text: "celebration", type: "n-sing", meaning: "l·ªÖ k·ª∑ ni·ªám" },
                { text: "celebrations", type: "n-pl", meaning: "c√°c l·ªÖ k·ª∑ ni·ªám" }
            ],
            correctIndex: 3, // celebrations
            translation: "ƒê√™m Giao th·ª´a l√† m·ªôt trong nh·ªØng l·ªÖ k·ª∑ ni·ªám to√†n c·∫ßu l·ªõn nh·∫•t v√¨ n√≥ ƒë√°nh d·∫•u ng√†y cu·ªëi c√πng c·ªßa nƒÉm.",
            explanation: {
                correct: "C·∫•u tr√∫c **one of the + so s√°nh nh·∫•t + Danh t·ª´ s·ªë nhi·ªÅu**. -> **celebrations**.",
                wrong: "**celebration** l√† s·ªë √≠t. C√°c ƒë√°p √°n c√≤n l·∫°i sai lo·∫°i t·ª´."
            }
        },
        {
            id: 11,
            question: "I saw so many _________________ flowers when I attended the festival last year. (beauty)",
            hint: "C·∫ßn m·ªôt t√≠nh t·ª´ (adj) ƒë·ªÉ mi√™u t·∫£ 'flowers'.",
            options: [
                { text: "beauty", type: "n", meaning: "v·∫ª ƒë·∫πp" },
                { text: "beautiful", type: "adj", meaning: "xinh ƒë·∫πp" },
                { text: "beautifully", type: "adv", meaning: "m·ªôt c√°ch xinh ƒë·∫πp" },
                { text: "beautify", type: "v", meaning: "l√†m ƒë·∫πp" }
            ],
            correctIndex: 1, // beautiful
            translation: "T√¥i ƒë√£ th·∫•y r·∫•t nhi·ªÅu lo√†i hoa xinh ƒë·∫πp khi t√¥i tham d·ª± l·ªÖ h·ªôi nƒÉm ngo√°i.",
            explanation: {
                correct: "ƒê·ª©ng tr∆∞·ªõc danh t·ª´ 'flowers' c·∫ßn t√≠nh t·ª´ -> **beautiful**.",
                wrong: "**beauty** l√† danh t·ª´. **beautifully** l√† tr·∫°ng t·ª´. **beautify** l√† ƒë·ªông t·ª´."
            }
        },
        {
            id: 12,
            question: "The Christmas season is also called the _________________ season. (festival)",
            hint: "C·ª•m t·ª´ c·ªë ƒë·ªãnh '... season' nghƒ©a l√† m√πa l·ªÖ h·ªôi.",
            options: [
                { text: "festival", type: "n", meaning: "l·ªÖ h·ªôi" },
                { text: "festive", type: "adj", meaning: "(thu·ªôc) l·ªÖ h·ªôi" },
                { text: "festivity", type: "n", meaning: "s·ª± h√¢n hoan" },
                { text: "festivals", type: "n-pl", meaning: "c√°c l·ªÖ h·ªôi" }
            ],
            correctIndex: 1, // festive
            translation: "M√πa Gi√°ng sinh c≈©ng ƒë∆∞·ª£c g·ªçi l√† m√πa l·ªÖ h·ªôi.",
            explanation: {
                correct: "**festive season** l√† c·ª•m t·ª´ c·ªë ƒë·ªãnh (collocation) ch·ªâ m√πa l·ªÖ h·ªôi.",
                wrong: "M·∫∑c d√π 'festival season' ƒë√¥i khi ƒë∆∞·ª£c d√πng, nh∆∞ng **festive season** l√† thu·∫≠t ng·ªØ chu·∫©n x√°c nh·∫•t ƒë·ªÉ ch·ªâ kh√¥ng kh√≠ m√πa l·ªÖ h·ªôi cu·ªëi nƒÉm."
            }
        },
        {
            id: 13,
            question: "I loved the _________________ this night. (perform)",
            hint: "Sau m·∫°o t·ª´ 'the' c·∫ßn m·ªôt danh t·ª´ (noun).",
            options: [
                { text: "perform", type: "v", meaning: "bi·ªÉu di·ªÖn" },
                { text: "performing", type: "v-ing", meaning: "ƒëang bi·ªÉu di·ªÖn" },
                { text: "performance", type: "n", meaning: "m√†n tr√¨nh di·ªÖn" },
                { text: "performed", type: "v-ed", meaning: "ƒë√£ bi·ªÉu di·ªÖn" }
            ],
            correctIndex: 2, // performance
            translation: "T√¥i r·∫•t th√≠ch m√†n tr√¨nh di·ªÖn t·ªëi nay.",
            explanation: {
                correct: "Sau m·∫°o t·ª´ 'the' c·∫ßn danh t·ª´. S·ª± ki·ªán c·ª• th·ªÉ 'this night' d√πng s·ªë √≠t -> **performance**.",
                wrong: "**perform** l√† ƒë·ªông t·ª´. **performing** l√† danh ƒë·ªông t·ª´/t√≠nh t·ª´ nh∆∞ng kh√¥ng h·ª£p nghƒ©a b·∫±ng danh t·ª´ g·ªëc."
            }
        },
        {
            id: 14,
            question: "There is a great _________________ for girls on March 3rd every year. (celebrate)",
            hint: "Sau m·∫°o t·ª´ 'a' v√† t√≠nh t·ª´ 'great' c·∫ßn m·ªôt danh t·ª´ s·ªë √≠t.",
            options: [
                { text: "celebrate", type: "v", meaning: "t·ªï ch·ª©c" },
                { text: "celebratory", type: "adj", meaning: "mang t√≠nh k·ª∑ ni·ªám" },
                { text: "celebration", type: "n", meaning: "l·ªÖ k·ª∑ ni·ªám" },
                { text: "celebrated", type: "adj", meaning: "n·ªïi ti·∫øng" }
            ],
            correctIndex: 2, // celebration
            translation: "C√≥ m·ªôt l·ªÖ k·ª∑ ni·ªám l·ªõn d√†nh cho c√°c c√¥ g√°i v√†o ng√†y 3/3 h√†ng nƒÉm.",
            explanation: {
                correct: "Sau 'a great...' c·∫ßn danh t·ª´ s·ªë √≠t -> **celebration**.",
                wrong: "C√°c t·ª´ c√≤n l·∫°i sai lo·∫°i t·ª´ (ƒë·ªông t·ª´, t√≠nh t·ª´)."
            }
        },
        {
            id: 15,
            question: "What I like about festivals is that they show the _________________ values of different communities. (culture)",
            hint: "C·∫ßn t√≠nh t·ª´ (adj) ƒë·ªÉ b·ªï nghƒ©a cho 'values'.",
            options: [
                { text: "culture", type: "n", meaning: "vƒÉn h√≥a" },
                { text: "cultural", type: "adj", meaning: "thu·ªôc v·ªÅ vƒÉn h√≥a" },
                { text: "cultured", type: "adj", meaning: "c√≥ h·ªçc th·ª©c" },
                { text: "culturally", type: "adv", meaning: "v·ªÅ m·∫∑t vƒÉn h√≥a" }
            ],
            correctIndex: 1, // cultural
            translation: "ƒêi·ªÅu t√¥i th√≠ch ·ªü c√°c l·ªÖ h·ªôi l√† ch√∫ng th·ªÉ hi·ªán c√°c gi√° tr·ªã vƒÉn h√≥a c·ªßa nh·ªØng c·ªông ƒë·ªìng kh√°c nhau.",
            explanation: {
                correct: "ƒê·ª©ng tr∆∞·ªõc danh t·ª´ 'values' (c√°c gi√° tr·ªã) c·∫ßn t√≠nh t·ª´ -> **cultural**.",
                wrong: "**culture** l√† danh t·ª´. **cultured** d√πng cho ng∆∞·ªùi. **culturally** l√† tr·∫°ng t·ª´."
            }
        }
    ];

    let userScore = 0;
    let questionsAnswered = 0;

    // --- SOUNDS (Base64 ƒë·ªÉ ƒë·∫£m b·∫£o ch·∫°y tr√™n m·ªçi tr√¨nh duy·ªát m√† kh√¥ng c·∫ßn file ngo√†i) ---
    // √Çm thanh ng·∫Øn g·ªçn
    const dingSound = new Audio("data:audio/wav;base64,UklGRnQGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YXIGAACBhYqFbF1fdJdwbXBgX2NwaXp5e4SDhYeKi4yNkZGTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAGBg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubq7vL2+v8DBwsPExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/v8AAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZGhscHR4fICEiIyQlJicoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubq7vL2+v8DBwsPExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/v8AAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdorK+xsbO1t7m6vL7AwsTFx8nLy8zNz9HS09TV19ja29ze3+Di4+Tm5+jp6uzt7u/w8vP09fb3+fr7/P3+/w==");
    const buzzSound = new Audio("data:audio/wav;base64,UklGRi4AAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAAZGF0YQAAAAA="); // Placeholder, will use CSS animation visual cue mostly, or silent fail for simplicity if base64 too long. 
    // Actually, let's use a real short beep for wrong
    const wrongSound = new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU..."); // Shortened for brevity, relying on visual shake

    // --- RENDER FUNCTIONS ---

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        
        quizData.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'quiz-card';
            card.id = `question-${item.id}`;

            // Badge
            const badge = document.createElement('div');
            badge.className = 'question-badge';
            badge.innerText = `C√¢u ${item.id}`;
            card.appendChild(badge);

            // Question Text
            const qText = document.createElement('div');
            qText.className = 'question-text';
            // Highlight the blank if needed, or just text
            // Replace underscores with a span
            const formattedQuestion = item.question.replace(/_+/g, '<span>__________</span>');
            qText.innerHTML = formattedQuestion;
            card.appendChild(qText);

            // Hint
            if (item.hint) {
                const hint = document.createElement('div');
                hint.className = 'hint-text';
                hint.innerText = `G·ª£i √Ω: ${item.hint}`;
                card.appendChild(hint);
            }

            // Options Grid
            const grid = document.createElement('div');
            grid.className = 'options-grid';

            item.options.forEach((opt, optIndex) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = `<strong>${String.fromCharCode(65 + optIndex)}.</strong> ${opt.text}`;
                btn.onclick = () => checkAnswer(item.id, optIndex, btn);
                grid.appendChild(btn);
            });
            card.appendChild(grid);

            // Explanation Box
            const explBox = document.createElement('div');
            explBox.className = 'explanation-box';
            explBox.id = `expl-${item.id}`;
            
            // Build Explanation Content
            let vocabListHtml = `<ul class="vocab-list">`;
            item.options.forEach((opt, idx) => {
                vocabListHtml += `<li class="vocab-item"><strong>${String.fromCharCode(65 + idx)}.</strong> ${opt.text} <em>(${opt.type})</em>: ${opt.meaning}</li>`;
            });
            vocabListHtml += `</ul>`;

            explBox.innerHTML = `
                <div class="explanation-header">üìù GI·∫¢I TH√çCH CHI TI·∫æT T·ª™ C√î MAI AN</div>
                
                <div class="expl-section">
                    <div class="expl-title">1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</div>
                    ${vocabListHtml}
                </div>

                <div class="expl-section">
                    <div class="expl-title">2. D·ªãch nghƒ©a:</div>
                    <div class="expl-content">"${item.translation}"</div>
                </div>

                <div class="expl-section">
                    <div class="expl-title">3. T·∫°i sao ch·ªçn ƒë√°p √°n ƒë√∫ng?</div>
                    <div class="expl-content" style="color: var(--correct-green); font-weight: bold;">${item.explanation.correct}</div>
                </div>

                <div class="expl-section">
                    <div class="expl-title">4. T·∫°i sao c√°c ƒë√°p √°n kia sai?</div>
                    <div class="expl-content" style="color: var(--wrong-red);">${item.explanation.wrong}</div>
                </div>
            `;
            card.appendChild(explBox);

            container.appendChild(card);
        });
    }

    // --- LOGIC FUNCTIONS ---

    function checkAnswer(questionId, selectedIndex, btnElement) {
        const questionObj = quizData.find(q => q.id === questionId);
        const card = document.getElementById(`question-${questionId}`);
        const allBtns = card.querySelectorAll('.option-btn');
        const explBox = document.getElementById(`expl-${questionId}`);

        // Disable all buttons to prevent re-guessing
        allBtns.forEach(btn => btn.disabled = true);

        if (selectedIndex === questionObj.correctIndex) {
            // Correct
            btnElement.classList.add('correct');
            playSound('ding');
            userScore++;
            fireConfetti(btnElement);
        } else {
            // Wrong
            btnElement.classList.add('wrong');
            playSound('buzz');
            // Highlight correct answer
            allBtns[questionObj.correctIndex].classList.add('correct');
        }

        questionsAnswered++;
        // Show explanation
        explBox.style.display = 'block';
    }

    function playSound(type) {
        // Simple synth fallback for no external files
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        if (!AudioContext) return;
        
        const ctx = new AudioContext();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);

        if (type === 'ding') {
            osc.type = 'sine';
            osc.frequency.setValueAtTime(600, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1000, ctx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.5, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
            osc.start();
            osc.stop(ctx.currentTime + 0.5);
        } else {
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, ctx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, ctx.currentTime + 0.3);
            gain.gain.setValueAtTime(0.5, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
            osc.start();
            osc.stop(ctx.currentTime + 0.3);
        }
    }

    function finishQuiz() {
        const modal = document.getElementById('scoreModal');
        const scoreText = document.getElementById('final-score');
        const feedBack = document.getElementById('feedback-text');

        scoreText.innerText = `${userScore}/${quizData.length}`;
        modal.style.display = 'flex';

        const percentage = (userScore / quizData.length) * 100;
        if (percentage === 100) {
            feedBack.innerText = "Xu·∫•t s·∫Øc! Em l√† thi√™n t√†i Ti·∫øng Anh! üåü";
            fireGlobalConfetti();
        } else if (percentage >= 80) {
            feedBack.innerText = "Gi·ªèi l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa l√† ho√†n h·∫£o! üî•";
        } else if (percentage >= 50) {
            feedBack.innerText = "Kh√° t·ªët! Em nh·ªõ xem l·∫°i c√°c c√¢u sai nh√©! üëç";
        } else {
            feedBack.innerText = "C·∫ßn c·ªë g·∫Øng h∆°n! ƒê·ª´ng n·∫£n ch√≠ nh√©! üí™";
        }
    }

    function closeModal() {
        const modal = document.getElementById('scoreModal');
        modal.style.display = 'none';
        location.reload(); // Simple reset
    }

    // --- EFFECTS ---

    function fireConfetti(element) {
        // Simple visual effect relative to button
        // For a single file simplicity, we stick to CSS effects or canvas global
    }

    // A very simple canvas confetti implementation
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    let particles = [];
    
    function fireGlobalConfetti() {
        for (let i = 0; i < 100; i++) {
            particles.push({
                x: window.innerWidth / 2,
                y: window.innerHeight / 2,
                vx: (Math.random() - 0.5) * 20,
                vy: (Math.random() - 0.5) * 20,
                color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                size: Math.random() * 10 + 5,
                life: 100
            });
        }
        animateConfetti();
    }

    function animateConfetti() {
        if (particles.length === 0) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        for (let i = 0; i < particles.length; i++) {
            let p = particles[i];
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.5; // gravity
            p.life--;
            
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, p.size, p.size);
            
            if (p.life <= 0) {
                particles.splice(i, 1);
                i--;
            }
        }
        
        requestAnimationFrame(animateConfetti);
    }

    // Init
    window.onload = renderQuiz;

</script>

</body>
</html>
