<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Test - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F4F8;
            --text-color: #2D3436;
            --card-bg: #FFFFFF;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* H·∫°n ch·∫ø b√¥i ƒëen ƒë·ªÉ t·∫≠p trung click */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #E0F7FA;
            background-image: radial-gradient(#00C9A7 15%, transparent 16%), radial-gradient(#8854C0 15%, transparent 16%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            padding-bottom: 80px;
        }

        h1, h2, h3 {
            font-family: 'Quicksand', sans-serif;
            text-align: center;
            color: var(--primary-pink);
            text-shadow: 2px 2px 0px #fff;
            margin: 10px 0;
        }

        .header-title {
            background: #fff;
            display: inline-block;
            padding: 8px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border: 3px solid var(--primary-teal);
        }

        .teacher-badge {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            font-weight: 700;
        }

        /* --- Layout Styles --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .section-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 10px 25px rgba(136, 84, 192, 0.2);
            border: 4px solid #fff;
            position: relative;
            overflow: hidden;
        }

        .section-header {
            background: var(--primary-pink);
            color: white;
            padding: 10px 25px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 15px;
            font-weight: 800;
            font-size: 1.1rem;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
        }

        /* --- Reading Passage Styling --- */
        .reading-passage {
            font-size: 1.15rem;
            line-height: 1.8;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 6px solid var(--primary-teal);
            margin-bottom: 25px;
            color: #444;
            white-space: pre-wrap; /* Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng xu·ªëng d√≤ng */
            text-align: justify;
        }

        /* Highlight numbered blanks in text */
        .reading-passage span.blank-number {
            font-weight: 800;
            color: var(--primary-pink);
            background: #E1D4F9;
            padding: 2px 6px;
            border-radius: 5px;
            margin: 0 3px;
        }

        /* --- Glossary Table --- */
        .glossary-container {
            margin-top: 10px;
            margin-bottom: 30px;
            border: 2px dashed #ccc;
            border-radius: 15px;
            padding: 15px;
            background: #fff;
        }
        
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
        }

        .glossary-table th {
            background: var(--primary-teal);
            color: white;
            padding: 10px;
            text-align: left;
            font-family: 'Quicksand', sans-serif;
        }

        .glossary-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        
        .type-tag {
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            color: #555;
            font-family: monospace;
        }

        /* --- Question Card --- */
        .question-block {
            margin-bottom: 20px;
            background: #fff;
            border-radius: 15px;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .question-number {
            font-weight: 800;
            color: var(--primary-pink);
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: block;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        @media (max-width: 700px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 12px 5px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 0 #ccc;
            text-align: center;
        }

        .option-btn:hover:not(:disabled) {
            transform: scale(1.05);
            border-color: var(--primary-pink);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: 0 0 0 #ccc;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-green) !important;
            color: white !important;
            border-color: #00A653 !important;
            box-shadow: 0 4px 0 #008E47 !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            color: white !important;
            border-color: #D63031 !important;
            box-shadow: 0 4px 0 #B82829 !important;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.8;
        }

        /* --- Explanation Box --- */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 15px;
            background: #FFF9C4; /* Light yellow */
            border-left: 5px solid #FBC02D;
            padding: 15px 20px;
            border-radius: 10px;
            animation: slideDown 0.4s ease-out;
            font-size: 1rem;
        }

        .exp-header {
            font-weight: 800;
            color: #F57F17;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exp-avatar {
            width: 35px;
            height: 35px;
            background: var(--primary-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .exp-content p {
            margin: 5px 0;
            line-height: 1.5;
        }

        .exp-label {
            font-weight: bold;
            color: var(--primary-pink);
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        /* --- Footer / Result --- */
        .submit-section {
            text-align: center;
            margin-top: 40px;
        }

        .submit-btn {
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #5E328F;
            transition: transform 0.2s;
            font-family: 'Quicksand', sans-serif;
        }

        .submit-btn:active {
            transform: translateY(8px);
            box-shadow: 0 0 0 #5E328F;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-8px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Popup Score */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            border: 6px solid var(--primary-teal);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        .score-text {
            font-size: 4rem;
            color: var(--primary-pink);
            font-weight: 900;
            font-family: 'Quicksand', sans-serif;
            margin: 10px 0;
        }

        .comment-text {
            font-size: 1.3rem;
            margin-top: 10px;
            margin-bottom: 20px;
            color: #555;
            font-weight: 600;
        }

    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <center>
            <div class="header-title">
                <h1>READING COMPREHENSION CHALLENGE</h1>
                <div class="teacher-badge">Created by: Ms. Mai An ULIS</div>
            </div>
            <p style="font-weight: 600; color: #555; margin-bottom: 30px;">Exercise 3: Read the passage and mark the letter A, B, C, or D to indicate the correct word.</p>
        </center>

        <div class="section-card" id="section-1">
            <div class="section-header">PASSAGE 1: Biodiversity & Extinction üêº</div>
            
            <div class="reading-passage">
There are possibly billions of different species of plants, animals, bacteria, and other living things throughout the world - but we‚Äôve only documented about two million of them. <span class="blank-number">(1)</span> ________ of these known and unknown species have uncertain futures though. Climate change, pollution, poaching, and habitat <span class="blank-number">(2)</span> ________ change the number of plant and animal species <span class="blank-number">(3)</span> ________ live in a habitat, known as declining biodiversity.
Due in part to declining biodiversity, almost one-third of Earth‚Äôs animals are <span class="blank-number">(4)</span> ________ risk of extinction according to the International Union for Conservation of Nature.
By preventing the decline of biodiversity, you can help keep Earth safe. Some animals such as sharks are especially important to protect. Scientists call these animals <span class="blank-number">(5)</span> ________ species because they‚Äôre the key to keeping whole ecosystems healthy. So if you save animals like sharks, you protect other critters.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Biodiversity</td><td><span class="type-tag">n</span></td><td>ƒêa d·∫°ng sinh h·ªçc</td></tr>
                    <tr><td>Document</td><td><span class="type-tag">v</span></td><td>Ghi ch√©p l·∫°i, t∆∞ li·ªáu h√≥a</td></tr>
                    <tr><td>Poaching</td><td><span class="type-tag">n</span></td><td>SƒÉn tr·ªôm</td></tr>
                    <tr><td>Habitat</td><td><span class="type-tag">n</span></td><td>M√¥i tr∆∞·ªùng s·ªëng</td></tr>
                    <tr><td>Decline</td><td><span class="type-tag">v/n</span></td><td>Suy gi·∫£m</td></tr>
                    <tr><td>Extinction</td><td><span class="type-tag">n</span></td><td>S·ª± tuy·ªát ch·ªßng</td></tr>
                    <tr><td>Conservation</td><td><span class="type-tag">n</span></td><td>S·ª± b·∫£o t·ªìn</td></tr>
                    <tr><td>Ecosystem</td><td><span class="type-tag">n</span></td><td>H·ªá sinh th√°i</td></tr>
                    <tr><td>Critter</td><td><span class="type-tag">n</span></td><td>Sinh v·∫≠t (th∆∞·ªùng d√πng th√¢n m·∫≠t)</td></tr>
                </table>
            </div>

            <div id="questions-area-1"></div>
        </div>

        <div class="section-card" id="section-2">
            <div class="section-header">PASSAGE 2: Fun Facts About Earth üåç</div>
            
            <div class="reading-passage">
Earth is the one place everyone on the planet calls home. Here are some fun facts about the Earth.
‚óè The Greek name for Earth was Gaia. It means ‚ÄúMother Earth‚Äù.
‚óè The Earth is not too hot or cold for <span class="blank-number">(1)</span> _____________ things to survive and it is the only planet in our solar system that is known to support life.
‚óè The Earth is home to 8.7 million different <span class="blank-number">(2)</span> _____________ of plants and animals!
‚óè The Earth looks like a ball shape or sphere, but it is not perfectly round.
‚óè The average speed of a race car is 200 miles per hour. The Earth travels around the sun at 67,000 miles per hour! Our Earth is moving <span class="blank-number">(3)</span> _____________!
‚óè It takes the Earth 365 days to <span class="blank-number">(4)</span> _____________ one entire orbit around the sun. We call this orbit a year.
‚óè Only 3 percent of the Earth‚Äôs water is fresh! The rest - 97 percent - is salt water.
‚óè The lowest <span class="blank-number">(5)</span> _____________ on Earth is the Dead Sea located between Jordan and Israel. It‚Äôs 1,400 feet below sea level.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Survive</td><td><span class="type-tag">v</span></td><td>Sinh t·ªìn, s·ªëng s√≥t</td></tr>
                    <tr><td>Solar system</td><td><span class="type-tag">n.phr</span></td><td>H·ªá m·∫∑t tr·ªùi</td></tr>
                    <tr><td>Support life</td><td><span class="type-tag">v.phr</span></td><td>Duy tr√¨ s·ª± s·ªëng</td></tr>
                    <tr><td>Sphere</td><td><span class="type-tag">n</span></td><td>H√¨nh c·∫ßu</td></tr>
                    <tr><td>Average</td><td><span class="type-tag">adj</span></td><td>Trung b√¨nh</td></tr>
                    <tr><td>Orbit</td><td><span class="type-tag">n</span></td><td>Qu·ªπ ƒë·∫°o / V√≤ng quay</td></tr>
                    <tr><td>Located</td><td><span class="type-tag">adj</span></td><td>T·ªça l·∫°c, n·∫±m ·ªü</td></tr>
                    <tr><td>Sea level</td><td><span class="type-tag">n.phr</span></td><td>M·ª±c n∆∞·ªõc bi·ªÉn</td></tr>
                </table>
            </div>

            <div id="questions-area-2"></div>
        </div>

        <div class="section-card" id="section-3">
            <div class="section-header">PASSAGE 3: The Nile River üõ∂</div>
            
            <div class="reading-passage">
The Nile River is one of the longest rivers in the world, flowing through several countries in Africa. It is a vital source of life for the people and wildlife in the region. The Nile River, which spans over 6,600 kilometres, <span class="blank-number">(1)</span> ______ water for drinking, irrigation, and agriculture. Many communities along its banks rely on the <span class="blank-number">(2)</span> ______ for their livelihoods. The Nile also supports a diverse ecosystem, with various <span class="blank-number">(3)</span> ______ of fish, birds, and mammals. It is a popular tourist destination, attracting visitors who enjoy boat cruises and <span class="blank-number">(4)</span> ______ its historical sites. The river played a significant role in ancient civilisations, such as the Egyptian civilisation, where it was worshipped as a divine entity. Today, efforts are being made to <span class="blank-number">(5)</span> ______ the Nile's ecosystem and ensure its sustainable use for future generations. The Nile River is truly a remarkable natural wonder, showcasing the beauty and importance of our planet's water resources.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Vital</td><td><span class="type-tag">adj</span></td><td>Thi·∫øt y·∫øu, quan tr·ªçng s·ªëng c√≤n</td></tr>
                    <tr><td>Irrigation</td><td><span class="type-tag">n</span></td><td>S·ª± th·ªßy l·ª£i, t∆∞·ªõi ti√™u</td></tr>
                    <tr><td>Agriculture</td><td><span class="type-tag">n</span></td><td>N√¥ng nghi·ªáp</td></tr>
                    <tr><td>Livelihood</td><td><span class="type-tag">n</span></td><td>Sinh k·∫ø (k·∫ø sinh nhai)</td></tr>
                    <tr><td>Diverse</td><td><span class="type-tag">adj</span></td><td>ƒêa d·∫°ng</td></tr>
                    <tr><td>Mammal</td><td><span class="type-tag">n</span></td><td>ƒê·ªông v·∫≠t c√≥ v√∫</td></tr>
                    <tr><td>Civilisation</td><td><span class="type-tag">n</span></td><td>N·ªÅn vƒÉn minh</td></tr>
                    <tr><td>Divine entity</td><td><span class="type-tag">n.phr</span></td><td>Th·ª±c th·ªÉ th·∫ßn th√°nh</td></tr>
                    <tr><td>Sustainable</td><td><span class="type-tag">adj</span></td><td>B·ªÅn v·ªØng</td></tr>
                </table>
            </div>

            <div id="questions-area-3"></div>
        </div>

        <div class="submit-section">
            <button class="submit-btn" onclick="showFinalResult()">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 style="color: var(--primary-pink)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-text" id="finalScore">0/15</div>
            <p class="comment-text" id="finalComment">C·ªë g·∫Øng l√™n nh√©!</p>
            <button class="submit-btn" style="font-size: 1rem; padding: 10px 30px;" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const quizData = {
            section1: [
                {
                    id: "1-1",
                    q: "(1) ________ of these known and unknown species...",
                    options: { A: "Much", B: "Any", C: "Many", D: "None" },
                    correct: "C",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> <strong>Nhi·ªÅu</strong> trong s·ªë nh·ªØng lo√†i ƒë√£ bi·∫øt v√† ch∆∞a bi·∫øt n√†y l·∫°i c√≥ t∆∞∆°ng lai b·∫•t ƒë·ªãnh.</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. Much (nhi·ªÅu - d√πng cho danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c); B. Any (b·∫•t k·ª≥); C. Many (nhi·ªÅu - d√πng cho danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c); D. None (kh√¥ng c√°i n√†o).</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span></strong> Danh t·ª´ "species" (lo√†i) ·ªü ƒë√¢y l√† danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu (these species). Do ƒë√≥ ta ph·∫£i d√πng l∆∞·ª£ng t·ª´ <strong>"Many"</strong>.</p>
                        <p><strong><span class="exp-label">T·∫°i sao SAI:</span></strong> "Much" sai ng·ªØ ph√°p. "None" sai v·ªÅ nghƒ©a ng·ªØ c·∫£nh (b√†i vi·∫øt ƒëang n√≥i v·ªÅ nguy c∆° tuy·ªát ch·ªßng n√™n kh√¥ng th·ªÉ l√† "kh√¥ng lo√†i n√†o").</p>
                    `
                },
                {
                    id: "1-2",
                    q: "Climate change... and habitat (2) ________ change...",
                    options: { A: "management", B: "conservation", C: "quality", D: "destruction" },
                    correct: "D",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u, √¥ nhi·ªÖm, sƒÉn tr·ªôm v√† <strong>s·ª± ph√° h·ªßy m√¥i tr∆∞·ªùng s·ªëng</strong>...</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. Qu·∫£n l√Ω; B. B·∫£o t·ªìn; C. Ch·∫•t l∆∞·ª£ng; D. S·ª± ph√° h·ªßy.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span></strong> ƒê√¢y l√† c·ª•m t·ª´ c·ªë ƒë·ªãnh (Collocation): <strong>"Habitat destruction"</strong> = S·ª± ph√° h·ªßy m√¥i tr∆∞·ªùng s·ªëng. Ng·ªØ c·∫£nh li·ªát k√™ c√°c t√°c nh√¢n ti√™u c·ª±c.</p>
                        <p><strong><span class="exp-label">T·∫°i sao SAI:</span></strong> C√°c t·ª´ "management" hay "conservation" mang nghƒ©a t√≠ch c·ª±c, kh√¥ng ph√π h·ª£p ƒë·ªÉ li·ªát k√™ c√πng √¥ nhi·ªÖm v√† sƒÉn tr·ªôm.</p>
                    `
                },
                {
                    id: "1-3",
                    q: "...animal species (3) ________ live in a habitat...",
                    options: { A: "they", B: "what", C: "whose", D: "which" },
                    correct: "D",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ...c√°c lo√†i ƒë·ªông v·∫≠t <strong>m√†</strong> s·ªëng trong m√¥i tr∆∞·ªùng ƒë√≥...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span></strong> ƒê√¢y l√† m·ªánh ƒë·ªÅ quan h·ªá. Ch·ªß ng·ªØ gi·∫£ l√† "animal species" (v·∫≠t/ƒë·ªông v·∫≠t) n√™n ta d√πng ƒë·∫°i t·ª´ quan h·ªá <strong>"which"</strong> (ho·∫∑c "that").</p>
                        <p><strong><span class="exp-label">T·∫°i sao SAI:</span></strong> "They" th·ª´a ch·ªß ng·ªØ. "What" kh√¥ng d√πng trong m·ªánh ƒë·ªÅ quan h·ªá b·ªï nghƒ©a cho danh t·ª´ ƒë·ª©ng tr∆∞·ªõc. "Whose" ch·ªâ s·ªü h·ªØu.</p>
                    `
                },
                {
                    id: "1-4",
                    q: "...animals are (4) ________ risk of extinction...",
                    options: { A: "on", B: "at", C: "in", D: "with" },
                    correct: "B",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ...ƒë·ªông v·∫≠t ƒëang <strong>c√≥ nguy c∆°</strong> tuy·ªát ch·ªßng...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span></strong> C·ª•m t·ª´ c·ªë ƒë·ªãnh (Idiom): <strong>"At risk of"</strong> = C√≥ nguy c∆° b·ªã g√¨ ƒë√≥.</p>
                    `
                },
                {
                    id: "1-5",
                    q: "Scientists call these animals (5) ________ species...",
                    options: { A: "keystone", B: "keychain", C: "keyhole", D: "keyboard" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> C√°c nh√† khoa h·ªçc g·ªçi ch√∫ng l√† <strong>lo√†i ch·ªß ch·ªët</strong>...</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. Keystone (ch·ªß ch·ªët/t·∫£ng ƒë√° kh√≥a v√≤m); B. M√≥c ch√¨a kh√≥a; C. L·ªó kh√≥a; D. B√†n ph√≠m.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> Thu·∫≠t ng·ªØ sinh h·ªçc: <strong>"Keystone species"</strong> (Lo√†i ch·ªß ch·ªët) - lo√†i c√≥ vai tr√≤ c·ª±c k·ª≥ quan tr·ªçng trong h·ªá sinh th√°i.</p>
                    `
                }
            ],
            section2: [
                {
                    id: "2-1",
                    q: "...not too hot or cold for (1) _____________ things to survive...",
                    options: { A: "dead", B: "living", C: "precious", D: "ocean" },
                    correct: "B",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Tr√°i ƒê·∫•t kh√¥ng qu√° n√≥ng hay qu√° l·∫°nh cho <strong>sinh v·∫≠t s·ªëng</strong> t·ªìn t·∫°i.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span></strong> Collocation ph·ªï bi·∫øn: <strong>"Living things"</strong> = Sinh v·∫≠t s·ªëng.</p>
                    `
                },
                {
                    id: "2-2",
                    q: "...8.7 million different (2) _____________ of plants and animals!",
                    options: { A: "things", B: "stages", C: "flora", D: "species" },
                    correct: "D",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> 8.7 tri·ªáu <strong>lo√†i</strong> th·ª±c v·∫≠t v√† ƒë·ªông v·∫≠t kh√°c nhau.</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. Th·ª©; B. Giai ƒëo·∫°n; C. H·ªá th·ª±c v·∫≠t; D. Lo√†i.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span></strong> Khi n√≥i v·ªÅ ph√¢n lo·∫°i ƒë·ªông/th·ª±c v·∫≠t, ta d√πng t·ª´ <strong>"species"</strong>.</p>
                    `
                },
                {
                    id: "2-3",
                    q: "Our Earth is moving (3) _____________!",
                    options: { A: "fast", B: "smoothly", C: "slow", D: "continuously" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Tr√°i ƒê·∫•t c·ªßa ch√∫ng ta ƒëang di chuy·ªÉn <strong>r·∫•t nhanh</strong>!</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> C√¢u tr∆∞·ªõc ƒë∆∞a ra d·∫´n ch·ª©ng: "Tr√°i ƒë·∫•t ƒëi quanh m·∫∑t tr·ªùi v·ªõi t·ªëc ƒë·ªô 67,000 d·∫∑m/gi·ªù" (nhanh h∆°n nhi·ªÅu so v·ªõi xe ƒëua 200 d·∫∑m/gi·ªù). Do ƒë√≥ ƒë√°p √°n ph·∫£i l√† "Fast".</p>
                    `
                },
                {
                    id: "2-4",
                    q: "It takes the Earth 365 days to (4) _____________ one entire orbit...",
                    options: { A: "start", B: "see", C: "complete", D: "run" },
                    correct: "C",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> M·∫•t 365 ng√†y ƒë·ªÉ <strong>ho√†n th√†nh</strong> m·ªôt v√≤ng qu·ªπ ƒë·∫°o.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span></strong> Collocation: <strong>"Complete an orbit"</strong> = Ho√†n th√†nh m·ªôt v√≤ng quay.</p>
                    `
                },
                {
                    id: "2-5",
                    q: "The lowest (5) _____________ on Earth is the Dead Sea...",
                    options: { A: "peak", B: "point", C: "hole", D: "level" },
                    correct: "B",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> <strong>ƒêi·ªÉm</strong> th·∫•p nh·∫•t tr√™n Tr√°i ƒê·∫•t l√† Bi·ªÉn Ch·∫øt...</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. ƒê·ªânh; B. ƒêi·ªÉm; C. C√°i h·ªë; D. M·ª©c ƒë·ªô.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span></strong> Trong ƒë·ªãa l√Ω, ta d√πng "Lowest point" (ƒëi·ªÉm th·∫•p nh·∫•t) v√† "Highest point" (ƒëi·ªÉm cao nh·∫•t).</p>
                    `
                }
            ],
            section3: [
                {
                    id: "3-1",
                    q: "...(1) ______ water for drinking, irrigation...",
                    options: { A: "provides", B: "sells", C: "produces", D: "buys" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> S√¥ng Nile <strong>cung c·∫•p</strong> n∆∞·ªõc ƒë·ªÉ u·ªëng, t∆∞·ªõi ti√™u...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> D√≤ng s√¥ng mang l·∫°i ngu·ªìn n∆∞·ªõc cho con ng∆∞·ªùi s·ª≠ d·ª•ng -> D√πng "Provides". C√°c t·ª´ "Sell/Buy" kh√¥ng d√πng cho d√≤ng s√¥ng.</p>
                    `
                },
                {
                    id: "3-2",
                    q: "Many communities along its banks rely on the (2) ______...",
                    options: { A: "sea", B: "river", C: "mountain", D: "lake" },
                    correct: "B",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> Nhi·ªÅu c·ªông ƒë·ªìng d·ªçc b·ªù s√¥ng d·ª±a v√†o <strong>d√≤ng s√¥ng</strong> n√†y...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span></strong> B√†i ƒë·ªçc ƒëang n√≥i v·ªÅ "The Nile River" (S√¥ng Nile), n√™n t·ª´ c·∫ßn ƒëi·ªÅn tham chi·∫øu ng∆∞·ª£c l·∫°i n√≥ ph·∫£i l√† "River".</p>
                    `
                },
                {
                    id: "3-3",
                    q: "The Nile also supports a diverse ecosystem, with various (3) ______ of fish...",
                    options: { A: "animals", B: "trees", C: "species", D: "plants" },
                    correct: "C",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ...v·ªõi ƒëa d·∫°ng c√°c <strong>lo√†i</strong> c√°, chim...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span></strong> C·∫•u tr√∫c quen thu·ªôc: "Species of fish/birds..." (C√°c lo√†i c√°/chim). Kh√¥ng ch·ªçn A v√¨ "animals of fish" nghe r·∫•t k·ª≥ c·ª•c.</p>
                    `
                },
                {
                    id: "3-4",
                    q: "...enjoy boat cruises and (4) ______ its historical sites.",
                    options: { A: "exchanging", B: "exporting", C: "explaining", D: "exploring" },
                    correct: "D",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ...th√≠ch ƒëi du thuy·ªÅn v√† <strong>kh√°m ph√°</strong> c√°c di t√≠ch l·ªãch s·ª≠.</p>
                        <p><strong><span class="exp-label">Ph√¢n t√≠ch:</span></strong> A. Trao ƒë·ªïi; B. Xu·∫•t kh·∫©u; C. Gi·∫£i th√≠ch; D. Kh√°m ph√°.</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span></strong> Kh√°ch du l·ªãch (visitors) th√¨ h√†nh ƒë·ªông ph√π h·ª£p nh·∫•t v·ªõi di t√≠ch l·ªãch s·ª≠ l√† "explore" (kh√°m ph√°/tham quan).</p>
                    `
                },
                {
                    id: "3-5",
                    q: "...efforts are being made to (5) ______ the Nile's ecosystem...",
                    options: { A: "protect", B: "create", C: "change", D: "provide" },
                    correct: "A",
                    explanation: `
                        <p><strong><span class="exp-label">D·ªãch c√¢u:</span></strong> ...nh·ªØng n·ªó l·ª±c ƒëang ƒë∆∞·ª£c th·ª±c hi·ªán ƒë·ªÉ <strong>b·∫£o v·ªá</strong> h·ªá sinh th√°i s√¥ng Nile...</p>
                        <p><strong><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span></strong> Ng·ªØ c·∫£nh c√¢u sau n√≥i v·ªÅ "sustainable use" (s·ª≠ d·ª•ng b·ªÅn v·ªØng), do ƒë√≥ h√†nh ƒë·ªông c·∫ßn l√†m l√† "Protect" (b·∫£o v·ªá/b·∫£o t·ªìn).</p>
                    `
                }
            ]
        };

        // --- SOUNDS (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // High pitch Ding
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.6);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.6);
            } else {
                // Low pitch Buzz
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderSection(sectionId, data) {
            const container = document.getElementById(`questions-area-${sectionId}`);
            data.forEach((item, index) => {
                const questionNum = index + 1;
                const html = `
                    <div class="question-block" id="q-${item.id}">
                        <span class="question-number">Question ${questionNum}: ${item.q}</span>
                        <div class="options-grid">
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'A', '${item.correct}')">A. ${item.options.A}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'B', '${item.correct}')">B. ${item.options.B}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'C', '${item.correct}')">C. ${item.options.C}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'D', '${item.correct}')">D. ${item.options.D}</button>
                        </div>
                        <div class="explanation-box" id="exp-${item.id}">
                            <div class="exp-header">
                                <div class="exp-avatar">Ms</div>
                                <span>C√¥ Mai An gi·∫£i th√≠ch:</span>
                            </div>
                            <div class="exp-content">
                                ${item.explanation}
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // Initialize
        renderSection('1', quizData.section1);
        renderSection('2', quizData.section2);
        renderSection('3', quizData.section3);

        // --- LOGIC FUNCTIONS ---
        let score = 0;
        const totalQuestions = 15;

        function checkAnswer(id, selected, correct) {
            const questionBlock = document.getElementById(`q-${id}`);
            const buttons = questionBlock.querySelectorAll('.option-btn');
            const expBox = document.getElementById(`exp-${id}`);

            // Disable all buttons in this question
            buttons.forEach(btn => {
                btn.disabled = true;
                if (btn.innerText.startsWith(' ' + correct) || btn.innerText.includes(` ${correct}.`) || btn.innerText.includes(`A. ${correct}`) || btn.innerText.includes(`${correct}`)) {
                    // Logic check string flexible
                }
                
                // Simple strict check based on render
                const btnLetter = btn.innerText.charAt(0);
                if (btnLetter === correct) {
                    btn.classList.add('correct');
                }
                if (btnLetter === selected && selected !== correct) {
                    btn.classList.add('wrong');
                }
            });

            // Logic
            if (selected === correct) {
                score++;
                playSound('correct');
                fireConfetti();
            } else {
                playSound('wrong');
            }

            // Show Explanation immediately
            expBox.style.display = 'block';
        }

        function showFinalResult() {
            const modal = document.getElementById('resultModal');
            const scoreText = document.getElementById('finalScore');
            const comment = document.getElementById('finalComment');
            
            scoreText.innerText = `${score} / ${totalQuestions}`;
            
            if(score === totalQuestions) {
                comment.innerText = "Tuy·ªát v·ªùi! Em l√† thi√™n t√†i ti·∫øng Anh! üåü";
                fireConfetti();
            } else if (score >= 10) {
                comment.innerText = "L√†m t·ªët l·∫Øm! Em r·∫•t c√≥ nƒÉng khi·∫øu! üî•";
            } else {
                comment.innerText = "C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! H√£y xem k·ªπ gi·∫£i th√≠ch c·ªßa c√¥! üí™";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // --- CONFETTI EFFECT ---
        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for (let i = 0; i < 80; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: Math.random() * 4 - 2,
                    vy: Math.random() * 4 + 2,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                    size: Math.random() * 6 + 2
                });
            }

            let animationId;
            function update() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let active = false;
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.y < canvas.height) {
                        ctx.fillStyle = p.color;
                        ctx.fillRect(p.x, p.y, p.size, p.size);
                        active = true;
                    }
                });

                if (active) {
                    animationId = requestAnimationFrame(update);
                } else {
                    cancelAnimationFrame(animationId);
                }
            }
            update();
        }

        // Resize canvas on window resize
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

    </script>
</body>
</html>


