<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary: #8854C0; /* H·ªìng t√≠m nh·∫°t */
            --secondary: #00C9A7; /* Xanh ng·ªçc */
            --correct: #00D26A; /* Xanh l√° */
            --wrong: #FF4757; /* ƒê·ªè cam */
            --bg-body: #F0F2F5;
            --text-dark: #2F3542;
            --card-bg: #FFFFFF;
        }

        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f3e5f5;
            background-image: radial-gradient(#8854C0 0.5px, transparent 0.5px), radial-gradient(#8854C0 0.5px, #f3e5f5 0.5px);
            background-size: 20px 20px;
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding-bottom: 100px;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 40px;
            background: #fff;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 2px solid var(--primary);
        }

        h1 {
            color: var(--primary);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            margin: 0;
            text-transform: uppercase;
            font-size: 1.8rem;
        }

        /* CARD STYLE */
        .section-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(136, 84, 192, 0.15);
            border-bottom: 6px solid #e1e1e1;
        }

        .section-title {
            background: var(--secondary);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 1.1rem;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* QUESTIONS */
        .question-block {
            margin-bottom: 30px;
            border-bottom: 2px dashed #eee;
            padding-bottom: 20px;
        }
        
        .question-text {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2f3542;
        }

        /* INPUTS */
        .input-gap {
            border: 2px solid #ccc;
            border-radius: 10px;
            padding: 8px 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            width: 200px;
            outline: none;
            transition: all 0.3s;
            background: #fdfdfd;
        }
        .input-gap:focus {
            border-color: var(--primary);
        }
        .input-gap.correct {
            border-color: var(--correct);
            background-color: #d1ffe6;
            color: #007a3d;
        }
        .input-gap.wrong {
            border-color: var(--wrong);
            background-color: #ffdad9;
        }

        /* MCQ BUTTONS */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .btn-option {
            background: white;
            border: 2px solid #ddd;
            border-bottom: 5px solid #ddd;
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: #57606f;
            cursor: pointer;
            transition: all 0.1s;
            text-align: left;
        }

        .btn-option:hover {
            transform: translateY(-2px);
            background-color: #f7f1ff;
        }
        
        .btn-option:active {
            transform: translateY(3px);
            border-bottom-width: 2px;
        }

        .btn-option.correct {
            background-color: var(--correct);
            color: white;
            border-color: #00a352;
            border-bottom-color: #00a352;
        }

        .btn-option.wrong {
            background-color: var(--wrong);
            color: white;
            border-color: #d63031;
            border-bottom-color: #d63031;
            animation: shake 0.5s;
        }

        /* MATCHING GAME */
        .matching-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        .match-col {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .match-item {
            background: #fff;
            border: 2px solid var(--primary);
            border-bottom: 5px solid var(--primary);
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .match-item.selected {
            background: #ffeb3b;
            transform: scale(1.02);
        }
        .match-item.matched {
            background: var(--correct);
            color: white;
            border-color: #00a352;
            opacity: 0.6;
            pointer-events: none;
        }
        .match-item.error {
            animation: shake 0.4s;
            background: var(--wrong);
            color: white;
            border-color: #c0392b;
        }

        /* MATCHING EXPLANATION LIST */
        #matching-explanations {
            margin-top: 20px;
            border-top: 2px dashed #ccc;
            padding-top: 10px;
        }
        .match-pair-detail {
            background: #eafef6;
            border-left: 5px solid var(--correct);
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-size: 0.95rem;
            animation: slideDown 0.5s;
        }
        .match-pair-detail b { color: var(--primary); }

        /* EXPLANATION BOX */
        .explanation-box {
            display: none;
            margin-top: 15px;
            background: #eafef6;
            border: 2px solid var(--correct);
            border-radius: 12px;
            padding: 20px;
            animation: slideDown 0.4s ease-out;
            position: relative;
        }
        .explanation-box::before {
            content: "üí° GI·∫¢I TH√çCH CHI TI·∫æT (C√¥ Mai An):";
            display: block;
            font-weight: 800;
            color: #009432;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        .exp-step { margin-bottom: 8px; line-height: 1.6; }
        .exp-label { font-weight: bold; color: var(--primary); }

        /* READING PASSAGE */
        .reading-passage {
            background: #f1f2f6;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--secondary);
            margin-bottom: 20px;
            line-height: 1.8;
            font-size: 1.05rem;
            text-align: justify;
        }

        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .glossary-table th {
            background: var(--primary);
            color: white;
            padding: 12px;
            text-align: left;
        }
        .glossary-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        /* BUTTONS */
        .btn-check {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
            box-shadow: 0 4px 0 #009e82;
        }
        .btn-check:active { transform: translateY(4px); box-shadow: none; }

        /* SUBMIT BAR */
        .submit-bar {
            text-align: center;
            margin-top: 50px;
        }
        .btn-submit {
            background: var(--primary);
            color: white;
            font-size: 1.5rem;
            padding: 15px 50px;
            border-radius: 50px;
            border: none;
            box-shadow: 0 8px 0 #6c4299;
            cursor: pointer;
            font-weight: 800;
            transition: all 0.2s;
        }
        .btn-submit:hover { transform: scale(1.05); }

        /* RESULT MODAL */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            border: 5px solid var(--primary);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: zoomIn 0.3s;
        }
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 800;
            margin: 20px auto;
            border: 5px solid white;
            box-shadow: 0 0 0 5px var(--secondary);
        }
        .score-msg { font-size: 1.2rem; margin-bottom: 20px; color: #555; }
        .btn-close {
            background: #ff4757;
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            50% { transform: translateX(10px) rotate(5deg); }
            75% { transform: translateX(-10px) rotate(-5deg); }
            100% { transform: translateX(0); }
        }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { transform: scale(0); } to { transform: scale(1); } }

        u { text-decoration: underline; text-decoration-color: var(--wrong); text-decoration-thickness: 3px; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>B√†i ki·ªÉm tra Ti·∫øng Anh</h1>
        <h3>Gi√°o vi√™n: Ms Mai An ULIS</h3>
    </header>

    <div class="section-card">
        <div class="section-title">VI. COMPARATIVES & SUPERLATIVES</div>
        <p><i>Complete the sentences with the correct form.</i></p>

        <div class="question-block">
            <div class="question-text">
                1. Sao Paulo is <input type="text" class="input-gap" id="q6-1" placeholder="..."> London. (crowded)
                <button class="btn-check" onclick="checkInput('q6-1', 'more crowded than', 'exp-6-1')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-1">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Sao Paulo ƒë√¥ng ƒë√∫c h∆°n London.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> "Crowded" l√† t√≠nh t·ª´ d√†i -> <b>more crowded than</b>.</div>
            </div>
        </div>

        <div class="question-block">
            <div class="question-text">
                2. Paris is <input type="text" class="input-gap" id="q6-2" placeholder="..."> city in the world. (romantic)
                <button class="btn-check" onclick="checkInput('q6-2', 'the most romantic', 'exp-6-2')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-2">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Paris l√† th√†nh ph·ªë l√£ng m·∫°n nh·∫•t th·∫ø gi·ªõi.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> So s√°nh nh·∫•t t√≠nh t·ª´ d√†i -> <b>the most romantic</b>.</div>
            </div>
        </div>

        <div class="question-block">
            <div class="question-text">
                3. New York is much <input type="text" class="input-gap" id="q6-3" placeholder="..."> Sydney. (expensive)
                <button class="btn-check" onclick="checkInput('q6-3', 'more expensive than', 'exp-6-3')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-3">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> New York ƒë·∫Øt ƒë·ªè h∆°n nhi·ªÅu so v·ªõi Sydney.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> So s√°nh h∆°n t√≠nh t·ª´ d√†i -> <b>more expensive than</b>.</div>
            </div>
        </div>
        
        <div class="question-block">
            <div class="question-text">
                4. The Eiffel Tower is <input type="text" class="input-gap" id="q6-4" placeholder="..."> building in France. (famous)
                <button class="btn-check" onclick="checkInput('q6-4', 'the most famous', 'exp-6-4')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-4">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Th√°p Eiffel l√† t√≤a nh√† n·ªïi ti·∫øng nh·∫•t n∆∞·ªõc Ph√°p.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> So s√°nh nh·∫•t -> <b>the most famous</b>.</div>
            </div>
        </div>

        <div class="question-block">
            <div class="question-text">
                5. China is one of <input type="text" class="input-gap" id="q6-5" placeholder="..."> countries in the world. (big)
                <button class="btn-check" onclick="checkInput('q6-5', 'the biggest', 'exp-6-5')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-5">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Trung Qu·ªëc l√† m·ªôt trong nh·ªØng qu·ªëc gia l·ªõn nh·∫•t.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> Big -> G·∫•p ƒë√¥i 'g' -> <b>the biggest</b>.</div>
            </div>
        </div>

        <div class="question-block">
            <div class="question-text">
                6. In my opinion, Tokyo is <input type="text" class="input-gap" id="q6-6" placeholder="..."> Mumbai. (interesting)
                <button class="btn-check" onclick="checkInput('q6-6', 'more interesting than', 'exp-6-6')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-6">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Tokyo th√∫ v·ªã h∆°n Mumbai.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> So s√°nh h∆°n -> <b>more interesting than</b>.</div>
            </div>
        </div>

        <div class="question-block">
            <div class="question-text">
                7. Barcelona is <input type="text" class="input-gap" id="q6-7" placeholder="..."> Stockholm. (hot)
                <button class="btn-check" onclick="checkInput('q6-7', 'hotter than', 'exp-6-7')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-7">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Barcelona n√≥ng h∆°n Stockholm.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> Hot -> G·∫•p ƒë√¥i 't' -> <b>hotter than</b>.</div>
            </div>
        </div>

        <div class="question-block">
            <div class="question-text">
                8. I think that Istanbul is <input type="text" class="input-gap" id="q6-8" placeholder="..."> city in the world. (beautiful)
                <button class="btn-check" onclick="checkInput('q6-8', 'the most beautiful', 'exp-6-8')">Check</button>
            </div>
            <div class="explanation-box" id="exp-6-8">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Istanbul l√† th√†nh ph·ªë ƒë·∫πp nh·∫•t.</div>
                <div class="exp-step"><span class="exp-label">Gi·∫£i th√≠ch:</span> So s√°nh nh·∫•t -> <b>the most beautiful</b>.</div>
            </div>
        </div>
    </div>

    <div class="section-card">
        <div class="section-title">VIII. MATCHING GAME</div>
        <p><i>N·ªëi c√¢u h·ªèi v·ªõi c√¢u tr·∫£ l·ªùi. (Khi n·ªëi ƒë√∫ng, b·∫£n d·ªãch chi ti·∫øt s·∫Ω hi·ªán ra b√™n d∆∞·ªõi!)</i></p>
        
        <div class="matching-container">
            <div class="match-col" id="questions-col"></div>
            <div class="match-col" id="answers-col"></div>
        </div>
        
        <div id="matching-explanations">
            <h4 style="color:var(--primary); text-align:center;">--- DANH S√ÅCH C√ÅC C·∫∂P ƒê√É N·ªêI ƒê√öNG (K√àM D·ªäCH) ---</h4>
            </div>
    </div>

    <div class="section-card">
        <div class="section-title">IX. GAP FILLING</div>
        <div class="reading-passage">
            <b>Are you planning your next trip? Then why not visit London?</b><br>
            London is one of the most exciting cities in the world.
            <br><br>
            <b>Sights and attractions</b><br>
            There are lots of things to see and do in London. Walk around the centre and see famous <b>(1) _______</b> like Big Ben and Westminster Abbey. Visit the Tower of London where England's kings and queens lived. Go to Buckingham Palace at 11:30 and <b>(2) _______</b> the famous 'Changing of the Guard' ceremony. And don't miss London's art galleries and museums - <b>(3) _______</b> are free to get into!
            <br><br>
            <b>Shopping</b><br>
            There are over 40,000 shops in London. Oxford Street is Europe's <b>(4) _______</b> high street with over 300 shops.
            <br><br>
            <b>Eating</b><br>
            With over 270 nationalities in London, you can try food from just about <b>(5) _______</b> in the world. Make sure you try the UK's most famous dish fish and chips!
            <br><br>
            <b>Getting around</b><br>
            London has a quick underground train system (the 'tube' as the locals call it). <b>(6) _______</b> are also the famous red 'double-decker' buses. The tube is quicker, but you will see more of London from a bus!
        </div>

        <table class="glossary-table">
            <thead><tr><th>Word</th><th>Type</th><th>Meaning</th></tr></thead>
            <tbody>
                <tr><td>Sight</td><td>(n)</td><td>C·∫£nh ƒë·∫πp</td></tr>
                <tr><td>Ceremony</td><td>(n)</td><td>Nghi l·ªÖ</td></tr>
                <tr><td>Nationalities</td><td>(n)</td><td>Qu·ªëc t·ªãch</td></tr>
            </tbody>
        </table>
        <br>

        <div class="question-block" data-correct="c">
            <div class="question-text">1. see famous (1) _______ like Big Ben...</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-1')">A. sights</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-1')">B. landscapes</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-1')">C. landmarks</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-1')">D. facts</button>
            </div>
            <div class="explanation-box" id="exp-9-1">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Ng·∫Øm c√°c ƒë·ªãa danh n·ªïi ti·∫øng nh∆∞ Big Ben...</div>
                <div class="exp-step"><span class="exp-label">T·∫°i sao ch·ªçn C?</span> Landmarks: c√¥ng tr√¨nh/ƒë·ªãa danh mang t√≠nh bi·ªÉu t∆∞·ª£ng.</div>
            </div>
        </div>

        <div class="question-block" data-correct="b">
            <div class="question-text">2. ... and (2) _______ the famous 'Changing of the Guard' ceremony.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-2')">A. notice</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-2')">B. see</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-2')">C. realize</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-2')">D. take</button>
            </div>
            <div class="explanation-box" id="exp-9-2">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> ...v√† xem nghi l·ªÖ ƒê·ªïi G√°c.</div>
                <div class="exp-step"><span class="exp-label">T·∫°i sao ch·ªçn B?</span> "See a ceremony" (Xem nghi l·ªÖ) l√† collocations ƒë√∫ng.</div>
            </div>
        </div>

        <div class="question-block" data-correct="d">
            <div class="question-text">3. ... museums - (3) _______ are free to get into!</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-9-3')">A. lots</button>
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-9-3')">B. much</button>
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-9-3')">C. more</button>
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-9-3')">D. most</button>
            </div>
            <div class="explanation-box" id="exp-9-3">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> ...h·∫ßu h·∫øt ch√∫ng ƒë·ªÅu mi·ªÖn ph√≠!</div>
                <div class="exp-step"><span class="exp-label">T·∫°i sao ch·ªçn D?</span> "Most" (ƒë·∫°i t·ª´) = H·∫ßu h·∫øt.</div>
            </div>
        </div>

        <div class="question-block" data-correct="c">
            <div class="question-text">4. Oxford Street is Europe's (4) _______ high street...</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-4')">A. busy</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-4')">B. busier</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-4')">C. busiest</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-9-4')">D. the busiest</button>
            </div>
            <div class="explanation-box" id="exp-9-4">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> Con ph·ªë s·∫ßm u·∫•t nh·∫•t Ch√¢u √Çu.</div>
                <div class="exp-step"><span class="exp-label">T·∫°i sao ch·ªçn C?</span> Sau s·ªü h·ªØu c√°ch "Europe's" d√πng so s√°nh nh·∫•t nh∆∞ng b·ªè "the". -> "busiest".</div>
            </div>
        </div>

        <div class="question-block" data-correct="a">
            <div class="question-text">5. ...try food from just about (5) _______ in the world.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-9-5')">A. every country</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-9-5')">B. all countries</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-9-5')">C. any country</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-9-5')">D. some country</button>
            </div>
            <div class="explanation-box" id="exp-9-5">
                <div class="exp-step"><span class="exp-label">D·ªãch:</span> ...t·ª´ h·∫ßu h·∫øt m·ªçi qu·ªëc gia.</div>
                <div class="exp-step"><span class="exp-label">T·∫°i sao ch·ªçn A?</span> C·ª•m "just about every country" l√† c·ªë ƒë·ªãnh (h·∫ßu nh∆∞ m·ªçi n∆∞·ªõc).</div>
            </div>
        </div>

        <div class="question-block" data-correct="b">
            <div class="question-text">6. (6) _______ are also the famous red 'double-decker' buses.</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-6')">A. They</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-6')">B. There</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-6')">C. These</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-9-6')">D. Those</button>
            </div>
            <div class="explanation-box" id="exp-9-6">
                <div class="exp-step"><span class="exp-label">T·∫°i sao ch·ªçn B?</span> C·∫•u tr√∫c "There are..." (C√≥ nh·ªØng...).</div>
            </div>
        </div>
    </div>

    <div class="section-card">
        <div class="section-title">X. READING COMPREHENSION</div>
        <div class="reading-passage">
            Seoul is South Korea's capital. It is located in the northern part of South Korea. It has a population of nearly 10 million people. In this city you can find many tall buildings and skyscrapers. Seoul is known around the world as a technology capital. It has a large subway system. Incheon International Airport is a forty minute train ride from Seoul. Gangnam, Itaewon and Hongdae are popular neighbourhoods in Seoul. Here you can find bustling downtown districts, social life, shopping and great dining. The War Memorial of Korea and Namsan Seoul Tower are popular tourist destinations in Seoul.
        </div>

        <table class="glossary-table">
            <thead><tr><th>Word</th><th>Type</th><th>Meaning</th></tr></thead>
            <tbody>
                <tr><td>Capital</td><td>(n)</td><td>Th·ªß ƒë√¥</td></tr>
                <tr><td>Population</td><td>(n)</td><td>D√¢n s·ªë</td></tr>
                <tr><td>Skyscraper</td><td>(n)</td><td>Nh√† ch·ªçc tr·ªùi</td></tr>
                <tr><td>Destination</td><td>(n)</td><td>ƒêi·ªÉm ƒë·∫øn</td></tr>
            </tbody>
        </table>
        <br>

        <div class="question-block" data-correct="b">
            <div class="question-text">1. Where is Seoul located?</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-1')">A. In the southern part.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-1')">B. In the northern part.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-1')">C. In the center.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-1')">D. Near Incheon only.</button>
            </div>
            <div class="explanation-box" id="exp-10-1">
                <div class="exp-step"><span class="exp-label">D·∫´n ch·ª©ng:</span> "It is located in the northern part..." (N·∫±m ·ªü ph√≠a b·∫Øc).</div>
            </div>
        </div>

        <div class="question-block" data-correct="c">
            <div class="question-text">2. How many people live in Seoul?</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-10-2')">A. Exactly 10 million.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-10-2')">B. Over 10 million.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-10-2')">C. Nearly 10 million.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'c', 'exp-10-2')">D. About 5 million.</button>
            </div>
            <div class="explanation-box" id="exp-10-2">
                <div class="exp-step"><span class="exp-label">D·∫´n ch·ª©ng:</span> "...population of nearly 10 million people." (G·∫ßn 10 tri·ªáu).</div>
            </div>
        </div>

        <div class="question-block" data-correct="a">
            <div class="question-text">3. Is Seoul a technology capital?</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-3')">A. Yes, it is known as one.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-3')">B. No, only history.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-3')">C. No technology.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-3')">D. Not mentioned.</button>
            </div>
            <div class="explanation-box" id="exp-10-3">
                <div class="exp-step"><span class="exp-label">D·∫´n ch·ª©ng:</span> "Seoul is known around the world as a technology capital."</div>
            </div>
        </div>

        <div class="question-block" data-correct="d">
            <div class="question-text">4. Time from Seoul to Incheon Airport by train?</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-10-4')">A. 14 minutes.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-10-4')">B. 4 hours.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-10-4')">C. 20 minutes.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'd', 'exp-10-4')">D. 40 minutes.</button>
            </div>
            <div class="explanation-box" id="exp-10-4">
                <div class="exp-step"><span class="exp-label">D·∫´n ch·ª©ng:</span> "...is a forty minute train ride..." (ƒêi t√†u m·∫•t 40 ph√∫t).</div>
            </div>
        </div>

        <div class="question-block" data-correct="a">
            <div class="question-text">5. Which are districts of Seoul?</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-5')">A. Gangnam, Itaewon, Hongdae.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-5')">B. Gangnam and Busan.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-5')">C. Jeju and Itaewon.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'a', 'exp-10-5')">D. Hongdae only.</button>
            </div>
            <div class="explanation-box" id="exp-10-5">
                <div class="exp-step"><span class="exp-label">D·∫´n ch·ª©ng:</span> "Gangnam, Itaewon and Hongdae are popular neighbourhoods..."</div>
            </div>
        </div>

        <div class="question-block" data-correct="b">
            <div class="question-text">6. Popular tourist destinations?</div>
            <div class="options-grid">
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-6')">A. Royal Palace.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-6')">B. War Memorial & Namsan Tower.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-6')">C. Airport only.</button>
                <button class="btn-option" onclick="checkMCQ(this, 'b', 'exp-10-6')">D. Big Ben.</button>
            </div>
            <div class="explanation-box" id="exp-10-6">
                <div class="exp-step"><span class="exp-label">D·∫´n ch·ª©ng:</span> "The War Memorial of Korea and Namsan Seoul Tower..."</div>
            </div>
        </div>
    </div>

    <div class="submit-bar">
        <button class="btn-submit" onclick="showScoreModal()">N·ªòP B√ÄI & XEM ƒêI·ªÇM T·ªîNG</button>
    </div>

</div>

<div id="resultModal" class="modal">
    <div class="modal-content">
        <h2 style="color: var(--primary);">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
        <div class="score-circle" id="score-number">0/28</div>
        <p class="score-msg" id="score-text">ƒêang t√≠nh to√°n...</p>
        <button class="btn-close" onclick="closeModal()">ƒê√≥ng & Xem l·∫°i b√†i</button>
    </div>
</div>

<script>
    // --- SOUND SYSTEM ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } else {
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // --- LOGIC ---

    // 1. INPUTS
    function checkInput(inputId, correctText, expId) {
        const input = document.getElementById(inputId);
        const val = input.value.trim().toLowerCase().replace(/\s+/g, ' ');
        const isCorrect = val === correctText.toLowerCase() || val === "is " + correctText.toLowerCase();

        if (isCorrect) {
            input.classList.remove('wrong');
            input.classList.add('correct');
            playSound('correct');
            confetti({ particleCount: 50, spread: 60, origin: { y: 0.6 } });
        } else {
            input.classList.remove('correct');
            input.classList.add('wrong');
            playSound('wrong');
            input.style.animation = 'shake 0.4s';
            setTimeout(() => input.style.animation = '', 400);
        }
        document.getElementById(expId).style.display = 'block';
    }

    // 2. MCQs
    function checkMCQ(btn, correctOptionIndex, expId) {
        const parent = btn.parentElement;
        const buttons = parent.getElementsByClassName('btn-option');
        const map = {'a':0, 'b':1, 'c':2, 'd':3};
        const correctIdx = map[correctOptionIndex];
        
        let clickedIdx = -1;
        for(let i=0; i<buttons.length; i++) {
            if(buttons[i] === btn) clickedIdx = i;
            buttons[i].disabled = true; 
            buttons[i].style.cursor = 'default';
        }

        // Add selected class for scoring calculation later
        btn.classList.add('selected-answer'); 
        if (clickedIdx === correctIdx) {
            btn.classList.add('correct');
            playSound('correct');
            confetti({ particleCount: 80, spread: 70 });
        } else {
            btn.classList.add('wrong');
            buttons[correctIdx].classList.add('correct');
            playSound('wrong');
        }
        document.getElementById(expId).style.display = 'block';
    }

    // 3. MATCHING GAME WITH TRANSLATION
    const matchingData = [
        { q: "What is the largest country in South America?", a: "It's Brazil.", qVi: "Qu·ªëc gia l·ªõn nh·∫•t Nam M·ªπ l√† g√¨?", aVi: "ƒê√≥ l√† Brazil." },
        { q: "What is the biggest continent?", a: "It's Asia.", qVi: "Ch√¢u l·ª•c l·ªõn nh·∫•t l√† g√¨?", aVi: "ƒê√≥ l√† Ch√¢u √Å." },
        { q: "What is the coldest place on earth?", a: "It's Antarctica.", qVi: "N∆°i l·∫°nh nh·∫•t tr√™n tr√°i ƒë·∫•t l√† ƒë√¢u?", aVi: "ƒê√≥ l√† Nam C·ª±c." },
        { q: "What is the most beautiful capital in the world?", a: "It's London.", qVi: "Th·ªß ƒë√¥ ƒë·∫πp nh·∫•t th·∫ø gi·ªõi l√† g√¨?", aVi: "ƒê√≥ l√† London." },
        { q: "What is the smallest city in the world?", a: "It's Vatican City.", qVi: "Th√†nh ph·ªë nh·ªè nh·∫•t th·∫ø gi·ªõi l√† g√¨?", aVi: "ƒê√≥ l√† Vatican." },
        { q: "What is the most famous landmark in France?", a: "It's Eiffel Tower.", qVi: "ƒê·ªãa danh n·ªïi ti·∫øng nh·∫•t ·ªü Ph√°p l√† g√¨?", aVi: "ƒê√≥ l√† Th√°p Eiffel." },
        { q: "What is the closest planet to the sun?", a: "It's Mercury.", qVi: "H√†nh tinh g·∫ßn m·∫∑t tr·ªùi nh·∫•t l√† g√¨?", aVi: "ƒê√≥ l√† Sao Th·ªßy." },
        { q: "What is the tallest building in the world?", a: "It's Burj Khalifa.", qVi: "T√≤a nh√† cao nh·∫•t th·∫ø gi·ªõi l√† g√¨?", aVi: "ƒê√≥ l√† Burj Khalifa." }
    ];

    let selectedQ = null;
    let matchedCount = 0;

    function initMatching() {
        const qCol = document.getElementById('questions-col');
        const aCol = document.getElementById('answers-col');
        
        // Shuffle
        let qArr = [...matchingData].sort(() => Math.random() - 0.5);
        let aArr = [...matchingData].sort(() => Math.random() - 0.5);

        qArr.forEach(item => {
            let el = document.createElement('div');
            el.className = 'match-item';
            el.textContent = item.q;
            el.dataset.pair = item.a; 
            el.onclick = () => selectQuestion(el);
            qCol.appendChild(el);
        });

        aArr.forEach(item => {
            let el = document.createElement('div');
            el.className = 'match-item';
            el.textContent = item.a;
            el.dataset.val = item.a;
            el.onclick = () => selectAnswer(el);
            aCol.appendChild(el);
        });
    }

    function selectQuestion(el) {
        if(el.classList.contains('matched')) return;
        document.querySelectorAll('#questions-col .match-item').forEach(e => e.classList.remove('selected'));
        el.classList.add('selected');
        selectedQ = el;
    }

    function selectAnswer(el) {
        if(el.classList.contains('matched')) return;
        if(!selectedQ) { playSound('wrong'); return; }

        if (selectedQ.dataset.pair === el.dataset.val) {
            // MATCH FOUND
            playSound('correct');
            selectedQ.classList.remove('selected');
            selectedQ.classList.add('matched');
            el.classList.add('matched');
            
            // Find data for translation
            const dataItem = matchingData.find(d => d.a === el.dataset.val);
            addMatchingExplanation(dataItem);

            selectedQ = null;
            matchedCount++;
            if(matchedCount === matchingData.length) confetti({ particleCount: 200, spread: 100 });
        } else {
            playSound('wrong');
            el.classList.add('error');
            setTimeout(() => el.classList.remove('error'), 500);
        }
    }

    function addMatchingExplanation(item) {
        const container = document.getElementById('matching-explanations');
        const div = document.createElement('div');
        div.className = 'match-pair-detail';
        div.innerHTML = `
            <div>üá¨üáß <b>Q:</b> ${item.q} - <b>A:</b> ${item.a}</div>
            <div style="margin-top:5px;">üáªüá≥ <i>${item.qVi} - ${item.aVi}</i></div>
        `;
        container.appendChild(div);
    }

    initMatching();

    // 4. SCORING SYSTEM (FINAL BUTTON)
    function showScoreModal() {
        // Calculate Score
        let score = 0;
        const total = 28; // 8 (VI) + 8 (VIII) + 6 (IX) + 6 (X)

        // 1. Inputs (Section VI)
        const inputs = document.querySelectorAll('.input-gap');
        inputs.forEach(inp => {
            if(inp.classList.contains('correct')) score++;
        });

        // 2. Matching (Section VIII)
        score += matchedCount;

        // 3. MCQs (Section IX & X)
        // Check buttons that are BOTH 'selected-answer' AND 'correct'
        const mcqBtns = document.querySelectorAll('.btn-option');
        mcqBtns.forEach(btn => {
            if(btn.classList.contains('selected-answer') && btn.classList.contains('correct')) {
                score++;
            }
        });

        // Show Modal
        const modal = document.getElementById('resultModal');
        const scoreNum = document.getElementById('score-number');
        const scoreMsg = document.getElementById('score-text');

        scoreNum.textContent = `${score}/${total}`;
        
        const percentage = (score/total)*100;
        if(percentage === 100) scoreMsg.innerHTML = "üèÜ TUY·ªÜT ƒê·ªêI! Em l√† thi√™n t√†i Ti·∫øng Anh!";
        else if(percentage >= 80) scoreMsg.innerHTML = "üåü Xu·∫•t s·∫Øc! Em n·∫Øm b√†i r·∫•t v·ªØng!";
        else if(percentage >= 50) scoreMsg.innerHTML = "üëç Kh√° t·ªët! C·ªë g·∫Øng √¥n l·∫°i v√†i l·ªói sai nh√©.";
        else scoreMsg.innerHTML = "üí™ ƒê·ª´ng bu·ªìn! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt nh√©.";

        modal.style.display = "flex";
        playSound('correct');
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = "none";
    }

</script>

</body>
</html>