<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Test â€“ Ms Mai An ULIS</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root{--green:#00D26A;--red:#FF4757;--card:#ffffffee;--shadow:0 8px 32px rgba(80,0,120,.13)}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Nunito',sans-serif;min-height:100vh;overflow-x:hidden;position:relative}
body::before{content:'';position:fixed;inset:0;z-index:-2;
  background:linear-gradient(135deg,#f9a8d4,#c084fc,#818cf8,#34d399,#fbbf24,#fb7185);
  background-size:400% 400%;animation:gradMove 12s ease infinite}
@keyframes gradMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
body::after{content:'';position:fixed;inset:0;z-index:-1;opacity:.15;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Ctext y='38' font-size='26'%3E%E2%AD%90%3C/text%3E%3Ctext x='75' y='75' font-size='22'%3E%F0%9F%8C%B8%3C/text%3E%3Ctext x='140' y='45' font-size='24'%3E%F0%9F%8D%8E%3C/text%3E%3Ctext x='15' y='125' font-size='22'%3E%E2%98%81%EF%B8%8F%3C/text%3E%3Ctext x='100' y='145' font-size='26'%3E%F0%9F%90%B1%3C/text%3E%3Ctext x='55' y='175' font-size='20'%3E%F0%9F%8C%88%3C/text%3E%3Ctext x='160' y='170' font-size='19'%3E%F0%9F%92%AB%3C/text%3E%3C/svg%3E");
  animation:floatPat 22s linear infinite}
@keyframes floatPat{from{background-position:0 0}to{background-position:180px 180px}}
header{text-align:center;padding:16px 12px 6px}
header h1{font-size:1.3rem;font-weight:900;color:#fff;text-shadow:0 2px 8px rgba(0,0,0,.25)}
header p{font-size:.82rem;color:#ffffffcc;font-weight:600}
.container{max-width:820px;margin:0 auto;padding:10px 12px 50px}
.section-title{background:linear-gradient(90deg,#c084fc,#818cf8);color:#fff;font-size:.88rem;font-weight:800;padding:7px 16px;border-radius:14px;margin:16px 0 9px;display:inline-block;box-shadow:0 4px 14px rgba(120,0,200,.2);letter-spacing:.5px}
.card{background:var(--card);border-radius:20px;padding:16px 18px;margin-bottom:13px;box-shadow:var(--shadow);position:relative;overflow:hidden}
.card::before{content:'';position:absolute;top:-18px;right:-18px;width:65px;height:65px;background:radial-gradient(circle,#c084fc22,transparent 70%);border-radius:50%}
.q-num{font-size:.72rem;font-weight:800;color:#c084fc;text-transform:uppercase;letter-spacing:1px;margin-bottom:5px}
.q-text{font-size:.97rem;font-weight:700;color:#3d2c6e;line-height:1.6;margin-bottom:11px}
.options{display:grid;grid-template-columns:1fr 1fr;gap:9px}
@media(max-width:500px){.options{grid-template-columns:1fr}}
.opt-btn{background:#f3e8ff;color:#4a1d8a;font-family:'Nunito',sans-serif;font-size:.9rem;font-weight:700;border:2.5px solid #c084fc33;border-radius:16px;padding:10px 13px;cursor:pointer;text-align:left;transition:transform .15s,box-shadow .15s;box-shadow:0 4px 12px rgba(150,0,220,.1),inset 0 -3px 0 rgba(0,0,0,.07)}
.opt-btn:hover:not([disabled]){transform:scale(1.04);box-shadow:0 7px 20px rgba(150,0,220,.2)}
.opt-btn.correct{background:var(--green)!important;color:#fff!important;border-color:var(--green)!important;box-shadow:0 4px 14px rgba(0,210,106,.35)!important}
.opt-btn.wrong{background:var(--red)!important;color:#fff!important;border-color:var(--red)!important;box-shadow:0 4px 14px rgba(255,71,87,.35)!important;animation:shake .4s ease}
.opt-btn.show-correct{background:var(--green)!important;color:#fff!important;border-color:var(--green)!important;opacity:.75}
.opt-btn[disabled]{cursor:default}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-7px)}40%{transform:translateX(7px)}60%{transform:translateX(-5px)}80%{transform:translateX(5px)}}
.mistake-opts{display:flex;gap:9px;flex-wrap:wrap}
.mis-btn{background:#f3e8ff;color:#4a1d8a;font-weight:800;font-size:.95rem;border:2.5px solid #c084fc33;border-radius:14px;padding:8px 20px;cursor:pointer;font-family:'Nunito',sans-serif;box-shadow:0 4px 10px rgba(150,0,220,.1),inset 0 -3px 0 rgba(0,0,0,.07);transition:transform .15s}
.mis-btn:hover:not([disabled]){transform:scale(1.06)}
.mis-btn.correct{background:var(--green)!important;color:#fff!important;border-color:var(--green)!important}
.mis-btn.wrong{background:var(--red)!important;color:#fff!important;animation:shake .4s ease}
.mis-btn[disabled]{cursor:default}
.explanation{margin-top:11px;background:linear-gradient(135deg,#fef9ff,#f0f4ff);border-left:4px solid #c084fc;border-radius:0 12px 12px 0;padding:11px 14px;display:none;font-size:.85rem;line-height:1.7;color:#3d2c6e;animation:fadeIn .3s ease}
.explanation.show{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}
.explanation strong{color:#7c3aed}
.cl{color:var(--green);font-weight:800}
.wl{color:var(--red);font-weight:800}
.write-area{width:100%;border:2.5px solid #c084fc44;border-radius:12px;padding:9px 12px;font-family:'Nunito',sans-serif;font-size:.9rem;color:#3d2c6e;background:#faf5ff;resize:vertical;min-height:46px;outline:none;transition:border .2s}
.write-area:focus{border-color:#c084fc}
.show-ans-btn{margin-top:7px;background:linear-gradient(90deg,#818cf8,#c084fc);color:#fff;border:none;border-radius:12px;padding:7px 16px;font-family:'Nunito',sans-serif;font-size:.83rem;font-weight:700;cursor:pointer;box-shadow:0 3px 10px rgba(120,0,200,.2);transition:transform .15s}
.show-ans-btn:hover{transform:scale(1.04)}
.submit-wrap{text-align:center;margin:24px 0 10px}
.submit-btn{background:linear-gradient(135deg,#f59e0b,#ec4899,#8b5cf6);color:#fff;font-family:'Nunito',sans-serif;font-weight:900;font-size:1.05rem;border:none;border-radius:20px;padding:13px 44px;cursor:pointer;box-shadow:0 6px 24px rgba(139,92,246,.4),inset 0 -4px 0 rgba(0,0,0,.12);transition:transform .15s}
.submit-btn:hover{transform:scale(1.05)}
.popup-overlay{position:fixed;inset:0;background:#0009;z-index:100;align-items:center;justify-content:center;display:none}
.popup-overlay.show{display:flex}
.popup-box{background:#fff;border-radius:26px;padding:32px 38px;text-align:center;max-width:360px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,.25);animation:popIn .4s cubic-bezier(.34,1.56,.64,1)}
@keyframes popIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
.popup-box h2{font-size:1.8rem;font-weight:900;background:linear-gradient(90deg,#f59e0b,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:6px}
.score-big{font-size:3.2rem;font-weight:900;color:#7c3aed;line-height:1}
.popup-box p{font-size:.95rem;color:#555;margin:8px 0}
.popup-close{margin-top:14px;background:linear-gradient(90deg,#818cf8,#c084fc);color:#fff;border:none;border-radius:14px;padding:9px 26px;font-family:'Nunito',sans-serif;font-weight:800;font-size:.92rem;cursor:pointer}
.confetti-piece{position:fixed;top:-10px;z-index:200;pointer-events:none;border-radius:2px;animation:confettiFall 1.3s ease-in forwards}
@keyframes confettiFall{to{transform:translateY(110vh) rotate(720deg);opacity:0}}
</style>
</head>
<body>
<header>
  <h1>ğŸ“ ENGLISH TEST â€“ Ms Mai An ULIS</h1>
  <p>Báº¥m chá»n Ä‘Ã¡p Ã¡n Ä‘á»ƒ xem giáº£i thÃ­ch ngay! ğŸŒŸ</p>
</header>
<div class="container" id="app"></div>
<div class="submit-wrap">
  <button class="submit-btn" id="submitBtn">ğŸ“© Ná»™p BÃ i &amp; Xem Äiá»ƒm</button>
</div>
<div class="popup-overlay" id="scorePopup">
  <div class="popup-box">
    <h2>ğŸ† Káº¿t Quáº£</h2>
    <div class="score-big" id="scoreBig"></div>
    <p id="scoreMsg"></p>
    <p id="scoreDetail" style="color:#888;font-size:.82rem"></p>
    <button class="popup-close" id="closePopup">ÄÃ³ng láº¡i</button>
  </div>
</div>

<script>
/* ===== AUDIO ===== */
var actx = null;
function getACtx(){
  if(!actx) actx = new (window.AudioContext || window.webkitAudioContext)();
  return actx;
}
function playDing(){
  var ctx = getACtx();
  [523,659,784].forEach(function(f,i){
    var o=ctx.createOscillator(), g=ctx.createGain();
    o.connect(g); g.connect(ctx.destination);
    o.type='sine'; o.frequency.value=f;
    var t = ctx.currentTime + i*0.13;
    g.gain.setValueAtTime(0,t);
    g.gain.linearRampToValueAtTime(0.22, t+0.03);
    g.gain.exponentialRampToValueAtTime(0.001, t+0.5);
    o.start(t); o.stop(t+0.52);
  });
}
function playBuzz(){
  var ctx = getACtx();
  var o=ctx.createOscillator(), g=ctx.createGain();
  o.connect(g); g.connect(ctx.destination);
  o.type='sawtooth'; o.frequency.value=110;
  g.gain.setValueAtTime(0.14, ctx.currentTime);
  g.gain.linearRampToValueAtTime(0.08, ctx.currentTime+0.15);
  g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime+0.5);
  o.start(); o.stop(ctx.currentTime+0.52);
}

/* ===== CONFETTI ===== */
var confCols = ['#f59e0b','#ec4899','#8b5cf6','#10b981','#3b82f6','#ef4444','#FDCB6E','#00C9A7'];
function launchConfetti(){
  for(var i=0;i<30;i++){
    (function(){
      var d = document.createElement('div');
      d.className = 'confetti-piece';
      d.style.left = (Math.random()*100)+'vw';
      d.style.background = confCols[Math.floor(Math.random()*confCols.length)];
      var s = 7+Math.random()*8;
      d.style.width = s+'px'; d.style.height = s+'px';
      d.style.animationDuration = (0.8+Math.random()*0.9)+'s';
      d.style.animationDelay = (Math.random()*0.45)+'s';
      document.body.appendChild(d);
      setTimeout(function(){ d.remove(); }, 1700);
    })();
  }
}

/* ===== SHUFFLE ===== */
function shuffle(arr){
  var a = arr.slice();
  for(var i=a.length-1;i>0;i--){
    var j = Math.floor(Math.random()*(i+1));
    var tmp=a[i]; a[i]=a[j]; a[j]=tmp;
  }
  return a;
}

/* ===== DATA ===== */
// ci = correct index in opts array (0-based)
var MC = [
  {id:'q7',sec:'SECTION A â€“ Q7',
   text:'Johny ______ return to England 3 days ago.',
   opts:["doesn't","isn't","didn't","wasn't"],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. didn\'t</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "Johny Ä‘Ã£ khÃ´ng trá»Ÿ vá» Anh 3 ngÃ y trÆ°á»›c."<br><br><strong>PhÃ¢n tÃ­ch:</strong><br>&#8226; A. <span class="wl">doesn\'t</span> â€“ Phá»§ Ä‘á»‹nh HTÄ â†’ Sai vÃ¬ cÃ³ "3 days ago" (quÃ¡ khá»©)<br>&#8226; B. <span class="wl">isn\'t</span> â€“ Phá»§ Ä‘á»‹nh to be HTÄ â†’ Sai thÃ¬, sai cáº¥u trÃºc<br>&#8226; C. <span class="cl">didn\'t âœ…</span> â€“ Phá»§ Ä‘á»‹nh QuÃ¡ khá»© Ä‘Æ¡n. Dáº¥u hiá»‡u: <em>3 days ago</em><br>&#8226; D. <span class="wl">wasn\'t</span> â€“ Phá»§ Ä‘á»‹nh to be QKÄ â†’ Sau wasn\'t cáº§n adj/noun, khÃ´ng dÃ¹ng vá»›i V thÆ°á»ng<br><br><strong>ğŸ’¡ Dáº¥u hiá»‡u QKÄ:</strong> yesterday | ago | last night/week/year â†’ dÃ¹ng <strong>did/didn\'t + V nguyÃªn thá»ƒ</strong>'},
  {id:'q8',sec:'SECTION A â€“ Q8',
   text:'I am studying for my exam. Can you ______ the music please.',
   opts:['turn in','turn off','turn down','turn up'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. turn down</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "TÃ´i Ä‘ang Ã´n thi. Báº¡n cÃ³ thá»ƒ váº·n nhá» nháº¡c xuá»‘ng khÃ´ng?"<br><br><strong>Phrasal Verbs:</strong><br>&#8226; A. <span class="wl">turn in</span> â€“ ná»™p bÃ i / Ä‘i ngá»§ â†’ KhÃ´ng liÃªn quan<br>&#8226; B. <span class="wl">turn off</span> â€“ táº¯t háº³n â†’ QuÃ¡ máº¡nh, cÃ¢u chá»‰ cáº§n "váº·n nhá»"<br>&#8226; C. <span class="cl">turn down âœ…</span> â€“ váº·n nhá» Ã¢m lÆ°á»£ng<br>&#8226; D. <span class="wl">turn up</span> â€“ váº·n to lÃªn â†’ NgÆ°á»£c nghÄ©a<br><br><strong>ğŸ’¡ Ghi nhá»›:</strong> turn <strong>up</strong> = tÄƒng to | turn <strong>down</strong> = giáº£m nhá» | turn <strong>off</strong> = táº¯t háº³n'},
  {id:'q9',sec:'SECTION A â€“ Q9',
   text:'______ will be the winner in this sport competition?',
   opts:['Who','What','Why','When'],ci:0,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: A. Who</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "Ai sáº½ lÃ  ngÆ°á»i chiáº¿n tháº¯ng trong cuá»™c thi thá»ƒ thao nÃ y?"<br><br>&#8226; A. <span class="cl">Who âœ…</span> â€“ há»i vá» <strong>ngÆ°á»i</strong>. "winner" lÃ  ngÆ°á»i â†’ dÃ¹ng Who<br>&#8226; B. <span class="wl">What</span> â€“ há»i vá» váº­t/sá»± viá»‡c<br>&#8226; C. <span class="wl">Why</span> â€“ há»i vá» lÃ½ do<br>&#8226; D. <span class="wl">When</span> â€“ há»i vá» thá»i gian<br><br><strong>ğŸ’¡ Quy táº¯c:</strong> Who = ngÆ°á»i | What = váº­t | When = thá»i gian | Where = nÆ¡i chá»‘n | Why = lÃ½ do'},
  {id:'q10',sec:'SECTION A â€“ Q10',
   text:'Jason Quang Vinh is ______ football player in Bo Cong An team.',
   opts:['the famousest','the most famous','famouser','more famous'],ci:1,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: B. the most famous</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "Jason Quang Vinh lÃ  cáº§u thá»§ ná»•i tiáº¿ng nháº¥t trong Ä‘á»™i Bá»™ CÃ´ng An."<br><br>&#8226; A. <span class="wl">the famousest</span> â€“ SAI. "famous" (3 Ã¢m tiáº¿t) khÃ´ng thÃªm -est<br>&#8226; B. <span class="cl">the most famous âœ…</span> â€“ TÃ­nh tá»« dÃ i â†’ <strong>the most + adj</strong><br>&#8226; C. <span class="wl">famouser</span> â€“ SAI. KhÃ´ng dÃ¹ng -er vá»›i tÃ­nh tá»« dÃ i<br>&#8226; D. <span class="wl">more famous</span> â€“ So sÃ¡nh hÆ¡n, khÃ´ng pháº£i nháº¥t<br><br><strong>ğŸ’¡ Quy táº¯c:</strong> TÃ­nh tá»« â‰¥ 2 Ã¢m tiáº¿t: <strong>the most + adj</strong>'},
  {id:'q11',sec:'SECTION A â€“ Q11',
   text:'The English test was ______ than I thought it would be.',
   opts:['the easier','more easy','easiest','easier'],ci:3,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: D. easier</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "BÃ i kiá»ƒm tra Tiáº¿ng Anh dá»… hÆ¡n tÃ´i nghÄ©."<br><br>&#8226; A. <span class="wl">the easier</span> â€“ So sÃ¡nh nháº¥t, khÃ´ng cÃ³ "than" â†’ Sai<br>&#8226; B. <span class="wl">more easy</span> â€“ Sai. "easy" â†’ eas<strong>ier</strong> (khÃ´ng dÃ¹ng "more")<br>&#8226; C. <span class="wl">easiest</span> â€“ So sÃ¡nh nháº¥t, thiáº¿u "the"<br>&#8226; D. <span class="cl">easier âœ…</span> â€“ easy â†’ easier (bá» y thÃªm -ier)<br><br><strong>ğŸ’¡ TÃ­nh tá»« táº­n cÃ¹ng -y:</strong> bá» y + <strong>ier/iest</strong>'},
  {id:'q12',sec:'SECTION A â€“ Q12',
   text:'Xuan Son ______ three goals for our team and made it a hat trick.',
   opts:['scores','scored','plays','played'],ci:1,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: B. scored</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "XuÃ¢n Son Ä‘Ã£ ghi 3 bÃ n vÃ  thá»±c hiá»‡n hat-trick."<br><br>&#8226; A. <span class="wl">scores</span> â€“ Hiá»‡n táº¡i Ä‘Æ¡n â†’ Sai thÃ¬ khi ká»ƒ láº¡i tráº­n Ä‘Ã£ qua<br>&#8226; B. <span class="cl">scored âœ…</span> â€“ QuÃ¡ khá»© Ä‘Æ¡n. Ká»ƒ láº¡i sá»± kiá»‡n â†’ dÃ¹ng quÃ¡ khá»©<br>&#8226; C. <span class="wl">plays</span> â€“ Sai nghÄ©a vÃ  sai thÃ¬<br>&#8226; D. <span class="wl">played</span> â€“ "played goals" khÃ´ng tá»± nhiÃªn<br><br><strong>ğŸ’¡ Collocation:</strong> <em>score a goal / score a hat-trick</em>'},
  {id:'q13',sec:'SECTION A â€“ Q13',
   text:'Hang is not very ______. She never plays sports.',
   opts:['sporty','sporting','sported','sports'],ci:0,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: A. sporty</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "Háº±ng khÃ´ng thÃ­ch thá»ƒ thao láº¯m. CÃ´ áº¥y khÃ´ng bao giá» chÆ¡i thá»ƒ thao."<br><br>&#8226; A. <span class="cl">sporty (adj) âœ…</span> â€“ yÃªu thÃ­ch thá»ƒ thao. Sau "very" cáº§n tÃ­nh tá»«<br>&#8226; B. <span class="wl">sporting</span> â€“ cÃ³ tinh tháº§n fair play, khÃ´ng mang nghÄ©a "thÃ­ch thá»ƒ thao"<br>&#8226; C. <span class="wl">sported</span> â€“ dáº¡ng quÃ¡ khá»© â†’ Ä‘áº·t sau "very" lÃ  sai<br>&#8226; D. <span class="wl">sports</span> â€“ danh tá»« sá»‘ nhiá»u â†’ khÃ´ng Ä‘áº·t sau "very"<br><br><strong>ğŸ’¡ Ghi nhá»›:</strong> <em>sporty</em> = nÄƒng Ä‘á»™ng, thÃ­ch thá»ƒ thao'},
  {id:'q14',sec:'SECTION A â€“ Q14',
   text:'I think you should use ______ to protect your eyes when you go swimming.',
   opts:['ball','sunglasses','goggles','skis'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. goggles</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "TÃ´i nghÄ© báº¡n nÃªn dÃ¹ng kÃ­nh bÆ¡i Ä‘á»ƒ báº£o vá»‡ máº¯t khi bÆ¡i."<br><br>&#8226; A. <span class="wl">ball</span> â€“ quáº£ bÃ³ng â†’ KhÃ´ng liÃªn quan<br>&#8226; B. <span class="wl">sunglasses</span> â€“ kÃ­nh mÃ¡t â†’ DÃ¹ng ngoÃ i trá»i, khÃ´ng pháº£i khi bÆ¡i<br>&#8226; C. <span class="cl">goggles âœ…</span> â€“ kÃ­nh bÆ¡i, báº£o vá»‡ máº¯t khi bÆ¡i lá»™i<br>&#8226; D. <span class="wl">skis</span> â€“ vÃ¡n trÆ°á»£t tuyáº¿t â†’ HoÃ n toÃ n khÃ´ng liÃªn quan<br><br><strong>ğŸ’¡ Tá»« vá»±ng bÆ¡i lá»™i:</strong> goggles = kÃ­nh bÆ¡i | swimming cap = mÅ© bÆ¡i | swimsuit = Ä‘á»“ bÆ¡i'},
  {id:'q22',sec:'PRONUNCIATION â€“ Q22 (Chá»n tá»« phÃ¡t Ã¢m KHÃC)',
   text:'Chá»n tá»« cÃ³ pháº§n gáº¡ch chÃ¢n phÃ¡t Ã¢m <strong>KHÃC</strong> vá»›i 3 tá»« cÃ²n láº¡i:',
   opts:['ch<u>air</u>','f<u>air</u>','c<u>are</u>','p<u>eer</u>'],ci:3,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: D. p<u>eer</u></strong><br><br>&#8226; A. ch<u>air</u> â†’ /tÊƒeÉ™/ â€“ Ã¢m <strong>/eÉ™/</strong><br>&#8226; B. f<u>air</u> â†’ /feÉ™/ â€“ Ã¢m <strong>/eÉ™/</strong><br>&#8226; C. c<u>are</u> â†’ /keÉ™/ â€“ Ã¢m <strong>/eÉ™/</strong><br>&#8226; D. <span class="cl">p<u>eer</u> âœ…</span> â†’ /pÉªÉ™/ â€“ Ã¢m <strong>/ÉªÉ™/</strong> â† KHÃC<br><br><strong>ğŸ’¡ "air/are" â†’ /eÉ™/</strong> (bear, wear, there) | <strong>"eer" â†’ /ÉªÉ™/</strong> (beer, deer, here)'},
  {id:'q23',sec:'PRONUNCIATION â€“ Q23 (Chá»n tá»« phÃ¡t Ã¢m KHÃC)',
   text:'Chá»n tá»« cÃ³ pháº§n gáº¡ch chÃ¢n phÃ¡t Ã¢m <strong>KHÃC</strong> vá»›i 3 tá»« cÃ²n láº¡i:',
   opts:['<u>th</u>ank','<u>th</u>row','<u>th</u>ere','heal<u>th</u>y'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. <u>th</u>ere</strong><br><br>&#8226; A. <u>th</u>ank â†’ /Î¸/ â€“ vÃ´ thanh<br>&#8226; B. <u>th</u>row â†’ /Î¸/ â€“ vÃ´ thanh<br>&#8226; C. <span class="cl"><u>th</u>ere âœ…</span> â†’ /Ã°/ â€“ <strong>há»¯u thanh</strong> â† KHÃC<br>&#8226; D. heal<u>th</u>y â†’ /Î¸/ â€“ vÃ´ thanh<br><br><strong>ğŸ’¡ /Ã°/ (há»¯u thanh):</strong> this, that, the, there, they | <strong>/Î¸/ (vÃ´ thanh):</strong> think, three, thank, tooth'},
  {id:'ph1',sec:'PART I â€“ Phonetics Q1 (Chá»n tá»« phÃ¡t Ã¢m KHÃC)',
   text:'Chá»n tá»« cÃ³ pháº§n gáº¡ch chÃ¢n phÃ¡t Ã¢m <strong>KHÃC</strong> vá»›i 3 tá»« cÃ²n láº¡i:',
   opts:['wi<u>th</u>out','toge<u>th</u>er','ba<u>th</u>','lea<u>th</u>er'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. ba<u>th</u></strong><br><br>&#8226; A. wi<u>th</u>out â†’ /Ã°/ â€“ há»¯u thanh<br>&#8226; B. toge<u>th</u>er â†’ /Ã°/ â€“ há»¯u thanh<br>&#8226; C. <span class="cl">ba<u>th</u> âœ…</span> â†’ /Î¸/ â€“ <strong>vÃ´ thanh</strong> â† KHÃC<br>&#8226; D. lea<u>th</u>er â†’ /Ã°/ â€“ há»¯u thanh<br><br><strong>ğŸ’¡ Máº¹o nhá»›:</strong> bath, path, cloth, math â†’ /Î¸/ | with, together, leather, weather â†’ /Ã°/'},
  {id:'ph2',sec:'PART I â€“ Phonetics Q2 (Chá»n tá»« phÃ¡t Ã¢m KHÃC)',
   text:'Chá»n tá»« cÃ³ pháº§n gáº¡ch chÃ¢n phÃ¡t Ã¢m <strong>KHÃC</strong> vá»›i 3 tá»« cÃ²n láº¡i:',
   opts:['b<u>o</u>rrow','cl<u>o</u>se','w<u>o</u>rk','c<u>o</u>ld'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. w<u>o</u>rk</strong><br><br>&#8226; A. b<u>o</u>rrow â†’ /É’/ â€“ Ã¢m ngáº¯n<br>&#8226; B. cl<u>o</u>se â†’ /É™ÊŠ/ â€“ Ã¢m Ä‘Ã´i<br>&#8226; C. <span class="cl">w<u>o</u>rk âœ…</span> â†’ /ÉœË/ â† KHÃC<br>&#8226; D. c<u>o</u>ld â†’ /É™ÊŠ/ â€“ Ã¢m Ä‘Ã´i<br><br><strong>ğŸ’¡ Ghi nhá»›:</strong> work /wÉœËk/, world /wÉœËld/, word /wÉœËd/'},
  {id:'ph3',sec:'PART I â€“ Phonetics Q3 (Chá»n tá»« phÃ¡t Ã¢m KHÃC)',
   text:'Chá»n tá»« cÃ³ pháº§n gáº¡ch chÃ¢n phÃ¡t Ã¢m <strong>KHÃC</strong> vá»›i 3 tá»« cÃ²n láº¡i:',
   opts:['r<u>ou</u>nd','m<u>ou</u>th','cl<u>ou</u>dy','w<u>ou</u>ld'],ci:3,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: D. w<u>ou</u>ld</strong><br><br>&#8226; A. r<u>ou</u>nd â†’ /aÊŠ/<br>&#8226; B. m<u>ou</u>th â†’ /aÊŠ/<br>&#8226; C. cl<u>ou</u>dy â†’ /aÊŠ/<br>&#8226; D. <span class="cl">w<u>ou</u>ld âœ…</span> â†’ /ÊŠ/ â† KHÃC<br><br><strong>ğŸ’¡ Ghi nhá»›:</strong> would/could/should â†’ /ÊŠ/ (cÃ¢m chá»¯ l) | round/cloud/mouth â†’ /aÊŠ/'},
  {id:'g1',sec:'PART II â€“ Grammar Q1',
   text:'She ______ Ha Noi last week.',
   opts:['visits','visiting','visited','to visit'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. visited</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> "CÃ´ áº¥y Ä‘Ã£ thÄƒm HÃ  Ná»™i tuáº§n trÆ°á»›c."<br><br>&#8226; A. <span class="wl">visits</span> â€“ HTÄ â†’ Sai (cÃ³ "last week")<br>&#8226; B. <span class="wl">visiting</span> â€“ V-ing, thiáº¿u "was"<br>&#8226; C. <span class="cl">visited âœ…</span> â€“ QKÄ. Dáº¥u hiá»‡u: <strong>last week</strong><br>&#8226; D. <span class="wl">to visit</span> â€“ NguyÃªn thá»ƒ, khÃ´ng lÃ m VN má»™t mÃ¬nh<br><br><strong>ğŸ’¡ Dáº¥u hiá»‡u QKÄ:</strong> yesterday | last week/month/year | ago'},
  {id:'g2',sec:'PART II â€“ Grammar Q2',
   text:'Big Ben is the most famous tower in ________.',
   opts:['Viet Nam','England','America','China'],ci:1,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: B. England</strong><br><br>Big Ben lÃ  biá»ƒu tÆ°á»£ng cá»§a <strong>London, Anh (England)</strong>, náº±m bÃªn cáº¡nh TÃ²a nhÃ  Quá»‘c há»™i Westminster. CÃ¡c Ä‘Ã¡p Ã¡n A, C, D Ä‘á»u sai vá» Ä‘á»‹a lÃ½.'},
  {id:'g3',sec:'PART II â€“ Grammar Q3',
   text:'Do you like ......... TV?',
   opts:['watching','to watch','watched','watches'],ci:0,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: A. watching</strong><br><br>&#8226; A. <span class="cl">watching âœ…</span> â€“ like + <strong>V-ing</strong><br>&#8226; B. <span class="wl">to watch</span> â€“ Trong Ä‘á» phá»• thÃ´ng, V-ing lÃ  Ä‘Ã¡p Ã¡n Æ°u tiÃªn<br>&#8226; C. <span class="wl">watched</span> â€“ QKÄ â†’ Sai vá»‹ trÃ­<br>&#8226; D. <span class="wl">watches</span> â€“ HTÄ ngÃ´i 3 â†’ Sai vá»‹ trÃ­<br><br><strong>ğŸ’¡ Cáº¥u trÃºc:</strong> like / enjoy / love / hate + <strong>V-ing</strong>'},
  {id:'g4',sec:'PART II â€“ Grammar Q4',
   text:'This is my pen. That is ..........',
   opts:['she','her','hers','him'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. hers</strong><br><br>&#8226; A. <span class="wl">she</span> â€“ Äáº¡i tá»« chá»§ ngá»¯ â†’ Sai<br>&#8226; B. <span class="wl">her</span> â€“ TÃ­nh tá»« sá»Ÿ há»¯u, cáº§n Ä‘á»©ng trÆ°á»›c danh tá»«<br>&#8226; C. <span class="cl">hers âœ…</span> â€“ Äáº¡i tá»« sá»Ÿ há»¯u Ä‘á»™c láº­p = "cá»§a cÃ´ áº¥y"<br>&#8226; D. <span class="wl">him</span> â€“ TÃ¢n ngá»¯ cá»§a "he"<br><br><strong>ğŸ’¡ ÄTSHHÄL:</strong> mine | yours | his | <strong>hers</strong> | ours | theirs'},
  {id:'g5',sec:'PART II â€“ Grammar Q5',
   text:'......... will be the winner in this sport competition?',
   opts:['Who','What','Why','When'],ci:0,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: A. Who</strong><br><br>"winner" = ngÆ°á»i chiáº¿n tháº¯ng â†’ há»i báº±ng <strong>Who</strong>. What = váº­t | Why = lÃ½ do | When = thá»i gian'},
  {id:'g6',sec:'PART II â€“ Grammar Q6',
   text:'Do Son is .......... beach in Hai Phong.',
   opts:['the more beautiful','more beautiful','the most beautiful','most beautiful'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. the most beautiful</strong><br><br>"beautiful" 3 Ã¢m tiáº¿t â†’ so sÃ¡nh nháº¥t: <strong>the most beautiful</strong>. A&B lÃ  so sÃ¡nh hÆ¡n. D thiáº¿u "the".<br><br><strong>ğŸ’¡ TÃ­nh tá»« dÃ i â‰¥2 Ã¢m tiáº¿t:</strong> <strong>the most + adj</strong>'},
  {id:'g7',sec:'PART II â€“ Grammar Q7',
   text:'Football is my favorite ...........',
   opts:['music','food','sport','drink'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. sport</strong><br><br>Football (bÃ³ng Ä‘Ã¡) lÃ  má»™t loáº¡i <strong>sport</strong> (thá»ƒ thao). Music, food, drink Ä‘á»u khÃ´ng phÃ¹ há»£p vá»›i football.'},
  {id:'g8',sec:'PART II â€“ Grammar Q8',
   text:"She was sick ......... She didn't go to the beach ________.",
   opts:['and','but','because','so'],ci:3,
   exp:"<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: D. so</strong><br><br><strong>Dá»‹ch cÃ¢u:</strong> \"CÃ´ áº¥y bá»‹ á»‘m nÃªn cÃ´ áº¥y khÃ´ng Ä‘i biá»ƒn.\"<br><br>&#8226; A. <span class=\"wl\">and</span> â€“ khÃ´ng diá»…n Ä‘áº¡t nhÃ¢n-quáº£<br>&#8226; B. <span class=\"wl\">but</span> â€“ tÆ°Æ¡ng pháº£n, khÃ´ng phÃ¹ há»£p<br>&#8226; C. <span class=\"wl\">because</span> â€“ cáº§n Ä‘áº£o tráº­t tá»± cÃ¢u: \"She didn't go... because she was sick\"<br>&#8226; D. <span class=\"cl\">so âœ…</span> â€“ vÃ¬ váº­y. NguyÃªn nhÃ¢n â†’ káº¿t quáº£<br><br><strong>ğŸ’¡ PhÃ¢n biá»‡t:</strong> <em>because</em> trÆ°á»›c nguyÃªn nhÃ¢n | <em>so</em> trÆ°á»›c káº¿t quáº£"},
  {id:'g9',sec:'PART II â€“ Grammar Q9',
   text:"________ eat too much sweets. It's not good for your teeth.",
   opts:["Do","Please","Don't","Can't"],ci:2,
   exp:"<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. Don't</strong><br><br>&#8226; A. <span class=\"wl\">Do</span> â€“ má»‡nh lá»‡nh kháº³ng Ä‘á»‹nh â†’ ngÆ°á»£c nghÄ©a<br>&#8226; B. <span class=\"wl\">Please</span> â€“ lá»‹ch sá»± nhÆ°ng khÃ´ng phÃ¹ há»£p vá»›i cÃ¢u sau<br>&#8226; C. <span class=\"cl\">Don't âœ…</span> â€“ má»‡nh lá»‡nh phá»§ Ä‘á»‹nh: <strong>Don't + V</strong><br>&#8226; D. <span class=\"wl\">Can't</span> â€“ phá»§ Ä‘á»‹nh kháº£ nÄƒng, khÃ´ng dÃ¹ng cho cÃ¢u khuyÃªn<br><br><strong>ğŸ’¡ Cáº¥u trÃºc:</strong> <strong>Don't + V</strong> = Äá»«ng..."},
  {id:'g10',sec:'PART II â€“ Grammar Q10',
   text:'Playing sports is ........... for health.',
   opts:['bad','well','good','comfortable'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. good</strong><br><br>&#8226; A. <span class="wl">bad</span> â€“ xáº¥u, cÃ³ háº¡i â†’ Sai nghÄ©a<br>&#8226; B. <span class="wl">well</span> â€“ tráº¡ng tá»« â†’ Sau "is" cáº§n tÃ­nh tá»«<br>&#8226; C. <span class="cl">good âœ…</span> â€“ "be <strong>good for</strong> + N"<br>&#8226; D. <span class="wl">comfortable</span> â€“ thoáº£i mÃ¡i â†’ KhÃ´ng phÃ¹ há»£p<br><br><strong>ğŸ’¡ Collocation:</strong> be good for (tá»‘t cho) | be bad for (xáº¥u cho)'}
];

var MISTAKE = [
  {id:'mis1',sec:'SECTION D â€“ I. Find the Mistake (Sentence 1)',
   html:'The <u>weather</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(A)</sup> was <u>bad</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(B)</sup> <u>because</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(C)</sup> he didn\'t <u>go fishing</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(D)</sup>.',
   opts:['A','B','C','D'],ci:2,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: C. because â†’ sá»­a thÃ nh "so"</strong><br><br><strong>CÃ¢u sai:</strong> "The weather was bad <span class="wl">because</span> he didn\'t go fishing."<br><strong>CÃ¢u Ä‘Ãºng:</strong> "The weather was bad <span class="cl">so</span> he didn\'t go fishing."<br><br>Logic: Thá»i tiáº¿t xáº¥u (nguyÃªn nhÃ¢n) â†’ KhÃ´ng Ä‘i cÃ¢u cÃ¡ (káº¿t quáº£).<br><em>because</em> Ä‘á»©ng trÆ°á»›c nguyÃªn nhÃ¢n | <em>so</em> Ä‘á»©ng trÆ°á»›c káº¿t quáº£ âœ…'},
  {id:'mis2',sec:'SECTION D â€“ I. Find the Mistake (Sentence 2)',
   html:'<u>She</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(A)</sup> doesn\'t <u>goes</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(B)</sup> to <u>school</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(C)</sup> on <u>Sundays</u> <sup style="font-size:.7rem;font-weight:900;color:#9333ea">(D)</sup>.',
   opts:['A','B','C','D'],ci:1,
   exp:'<strong>&#127919; ÄÃ¡p Ã¡n Ä‘Ãºng: B. goes â†’ sá»­a thÃ nh "go"</strong><br><br><strong>CÃ¢u sai:</strong> "She doesn\'t <span class="wl">goes</span> to school on Sundays."<br><strong>CÃ¢u Ä‘Ãºng:</strong> "She doesn\'t <span class="cl">go</span> to school on Sundays."<br><br>Cáº¥u trÃºc HTÄ phá»§ Ä‘á»‹nh: <strong>S + doesn\'t/don\'t + V(nguyÃªn thá»ƒ)</strong><br>Khi Ä‘Ã£ cÃ³ "doesn\'t" rá»“i â†’ Ä‘á»™ng tá»« chÃ­nh KHÃ”NG thÃªm -s/-es.'}
];

var WRITING = [
  {id:'w33',sec:'Q33 â€“ Rewrite (Discovery Channel)',
   prompt:'There are a lot of interesting programs on Discovery Channel.<br>&#8594; Discovery Channel ......',
   ans:'Discovery Channel has a lot of interesting programs.',
   exp:'Chuyá»ƒn chá»§ ngá»¯: "There are + N + on + place" &#8594; "Place + <strong>has</strong> + N".'},
  {id:'w34',sec:'Q34 â€“ Rewrite using "should"',
   prompt:"It's good for you to play sports regularly.<br>&#8594; You should ...",
   ans:'You should play sports regularly.',
   exp:'"It\'s good for you to + V" &#8596; "<strong>You should + V</strong>".'},
  {id:'w35',sec:'Q35 â€“ Rewrite using "although"',
   prompt:'It rained hard yesterday. Hung went to work on time.<br>&#8594; Although ...',
   ans:'Although it rained hard yesterday, Hung went to work on time.',
   exp:'Cáº¥u trÃºc: <strong>Although + má»‡nh Ä‘á» (trá»Ÿ ngáº¡i), má»‡nh Ä‘á» (káº¿t quáº£ váº«n xáº£y ra)</strong>.'},
  {id:'w36',sec:'Q36 â€“ Rewrite using "because"',
   prompt:'Linh needs to study hard. She wants to get a good score on the test.<br>&#8594; Linh needs to study hard because ...',
   ans:'Linh needs to study hard because she wants to get a good score on the test.',
   exp:'<strong>Because</strong> Ä‘á»©ng trÆ°á»›c nguyÃªn nhÃ¢n.'},
  {id:'w37',sec:'Q37 â€“ Viáº¿t cÃ¢u há»i',
   prompt:'She / go / to the gym / five days ago / ?<br>&#8594; ...',
   ans:'Did she go to the gym five days ago?',
   exp:'CÃ¢u há»i QKÄ: <strong>Did + S + V(nguyÃªn thá»ƒ) + ...?</strong>'},
  {id:'w38',sec:'Q38 â€“ Viáº¿t cÃ¢u tá»« gá»£i Ã½',
   prompt:'Although / my dad / sleepy / stay up / watch / end / football match / TV / yesterday.<br>&#8594; ...',
   ans:'Although my dad was sleepy, he stayed up to watch the end of the football match on TV yesterday.',
   exp:'Although + S + V (trá»Ÿ ngáº¡i), S + V (váº«n lÃ m).'},
  {id:'w39',sec:'Q39 â€“ Viáº¿t cÃ¢u há»i',
   prompt:'What / weather / like / Hanoi / summer?<br>&#8594; ...',
   ans:'What is the weather like in Hanoi in summer?',
   exp:'Cáº¥u trÃºc: <strong>What is the weather like in [place] in [season]?</strong>'},
  {id:'w40',sec:'Q40 â€“ Viáº¿t cÃ¢u',
   prompt:'It / be / rainy / last weekend //.<br>&#8594; ...',
   ans:'It was rainy last weekend.',
   exp:'"Last weekend" = dáº¥u hiá»‡u QKÄ. "It + was + adj" diá»…n táº£ thá»i tiáº¿t.'},
  {id:'dII1',sec:'SECTION D â€“ II. Rewrite (1)',
   prompt:'Ho Chi Minh city is bigger than Ha Noi city.<br>&#8594; Ha Noi city isn\'t ......',
   ans:"Ha Noi city isn't as big as Ho Chi Minh city.",
   exp:'So sÃ¡nh phá»§ Ä‘á»‹nh ngang báº±ng: <strong>S + isn\'t + as + adj + as + ...</strong>'},
  {id:'dII2',sec:'SECTION D â€“ II. Rewrite (2)',
   prompt:'Ngan walks to school every morning.<br>&#8594; Ngan goes ......',
   ans:'Ngan goes to school on foot every morning.',
   exp:'"Walk to school" = "go to school <strong>on foot</strong>"'},
  {id:'dII3',sec:'SECTION D â€“ II. Rewrite (3)',
   prompt:'My house is behind the bookstore.<br>&#8594; The bookstore is ......',
   ans:'The bookstore is in front of my house.',
   exp:'A is <em>behind</em> B &#8596; B is <em>in front of</em> A.'},
  {id:'dII4',sec:'SECTION D â€“ II. Rewrite (4)',
   prompt:'Her hair is long and black.<br>&#8594; She has ......',
   ans:'She has long black hair.',
   exp:'Her + N + is + adj &#8596; She + has + adj + N. Tráº­t tá»±: size &#8594; color &#8594; noun.'},
  {id:'dII5',sec:'SECTION D â€“ II. Rewrite (5)',
   prompt:"Let's go fishing.<br>&#8594; What about ......?",
   ans:'What about going fishing?',
   exp:'"Let\'s + V" &#8596; "<strong>What about + V-ing</strong>?"'},
  {id:'dIII1',sec:'SECTION D â€“ III. Make Sentences (1)',
   prompt:'Ho Chi Minh city / big / Viet Nam.<br>&#8594; ...',
   ans:'Ho Chi Minh city is the biggest city in Viet Nam.',
   exp:'big &#8594; so sÃ¡nh nháº¥t: <strong>the biggest</strong>.'},
  {id:'dIII2',sec:'SECTION D â€“ III. Make Sentences (2)',
   prompt:'There / many delicious dishes.<br>&#8594; ...',
   ans:'There are many delicious dishes (in Ho Chi Minh city).',
   exp:'<strong>There are + many + N sá»‘ nhiá»u</strong>.'},
  {id:'dIII3',sec:'SECTION D â€“ III. Make Sentences (3)',
   prompt:'The streets / crowded.<br>&#8594; ...',
   ans:'The streets are crowded.',
   exp:'S + be + adj. "streets" sá»‘ nhiá»u &#8594; "are".'},
  {id:'dIII4',sec:'SECTION D â€“ III. Make Sentences (4)',
   prompt:'People here / hospitable / friendly.<br>&#8594; ...',
   ans:'People here are hospitable and friendly.',
   exp:'S + be + adj1 + and + adj2.'},
  {id:'dIII5',sec:'SECTION D â€“ III. Make Sentences (5)',
   prompt:'Ho Chi Minh / a beautiful / poetic city.<br>&#8594; ...',
   ans:'Ho Chi Minh city is a beautiful and poetic city.',
   exp:'S + is + a + adj + N.'}
];

/* ===== BUILD HTML ===== */
function secTitle(t){return '<div class="section-title">'+t+'</div>';}

function buildMC(q){
  var idxArr = shuffle([0,1,2,3]);
  var lts = ['A','B','C','D'];
  var btns = idxArr.map(function(origIdx, pos){
    return '<button class="opt-btn" data-qid="'+q.id+'" data-origidx="'+origIdx+'"><span style="font-size:.72rem;font-weight:900;color:#9333ea;margin-right:5px">'+lts[pos]+'.</span>'+q.opts[origIdx]+'</button>';
  }).join('');
  return '<div class="card" id="card-'+q.id+'"><div class="q-num">&#128221; '+q.sec+'</div><div class="q-text">'+q.text+'</div><div class="options">'+btns+'</div><div class="explanation" id="exp-'+q.id+'">'+q.exp+'</div></div>';
}

function buildMistake(q){
  var btns = q.opts.map(function(o,i){
    return '<button class="mis-btn" data-qid="'+q.id+'" data-origidx="'+i+'">'+o+'</button>';
  }).join('');
  return '<div class="card" id="card-'+q.id+'"><div class="q-num">&#128269; '+q.sec+'</div><div class="q-text" style="font-size:.97rem;font-weight:700;line-height:1.8">'+q.html+'</div><div class="mistake-opts">'+btns+'</div><div class="explanation" id="exp-'+q.id+'">'+q.exp+'</div></div>';
}

function buildWriting(q){
  return '<div class="card" id="card-'+q.id+'"><div class="q-num">&#9999;&#65039; '+q.sec+'</div><div class="q-text">'+q.prompt+'</div><textarea class="write-area" id="ta-'+q.id+'" placeholder="Viáº¿t cÃ¢u tráº£ lá»i cá»§a báº¡n á»Ÿ Ä‘Ã¢y..."></textarea><button class="show-ans-btn" data-wid="'+q.id+'">&#128161; Xem ÄÃ¡p Ãn &amp; Giáº£i ThÃ­ch</button><div class="explanation" id="exp-'+q.id+'"><strong>&#9989; ÄÃ¡p Ã¡n máº«u:</strong><br><em style="color:#10b981">'+q.ans+'</em><br><br><strong>&#128218; Giáº£i thÃ­ch:</strong><br>'+q.exp+'</div></div>';
}

var html = '';
html += secTitle('&#128218; SECTION A â€“ Mark the Correct Answer (Q7â€“Q14)');
['q7','q8','q9','q10','q11','q12','q13','q14'].forEach(function(id){
  var q = MC.filter(function(x){return x.id===id;})[0];
  if(q) html += buildMC(q);
});
html += secTitle('&#128266; PRONUNCIATION â€“ Q22 &amp; Q23');
['q22','q23'].forEach(function(id){var q=MC.filter(function(x){return x.id===id;})[0];if(q)html+=buildMC(q);});
html += secTitle('&#128266; PART I â€“ Phonetics (Choose the differently pronounced word)');
['ph1','ph2','ph3'].forEach(function(id){var q=MC.filter(function(x){return x.id===id;})[0];if(q)html+=buildMC(q);});
html += secTitle('&#128221; PART II â€“ Choose the Best Answer (Grammar 1â€“10)');
['g1','g2','g3','g4','g5','g6','g7','g8','g9','g10'].forEach(function(id){var q=MC.filter(function(x){return x.id===id;})[0];if(q)html+=buildMC(q);});
html += secTitle('&#128269; SECTION D â€“ I. Find the Mistake');
MISTAKE.forEach(function(q){html+=buildMistake(q);});
html += secTitle('&#9999;&#65039; Q33â€“Q40 â€“ Rewrite / Construct Sentences');
WRITING.filter(function(q){return q.id.indexOf('w')===0;}).forEach(function(q){html+=buildWriting(q);});
html += secTitle('&#9999;&#65039; SECTION D â€“ II. Rewrite Sentences');
WRITING.filter(function(q){return q.id.indexOf('dII')===0;}).forEach(function(q){html+=buildWriting(q);});
html += secTitle('&#9999;&#65039; SECTION D â€“ III. Make Sentences (Ho Chi Minh City)');
WRITING.filter(function(q){return q.id.indexOf('dIII')===0;}).forEach(function(q){html+=buildWriting(q);});

document.getElementById('app').innerHTML = html;

/* ===== EVENT DELEGATION ===== */
var results = {};

document.addEventListener('click', function(e){
  // MC option button
  var mcBtn = e.target.closest ? e.target.closest('.opt-btn') : null;
  if(mcBtn && !mcBtn.disabled){
    var qid = mcBtn.getAttribute('data-qid');
    var card = document.getElementById('card-'+qid);
    if(!card || card.getAttribute('data-done')) return;
    card.setAttribute('data-done','1');
    var chosenIdx = parseInt(mcBtn.getAttribute('data-origidx'),10);
    var qData = null;
    for(var i=0;i<MC.length;i++){if(MC[i].id===qid){qData=MC[i];break;}}
    if(!qData) return;
    var allBtns = card.querySelectorAll('.opt-btn');
    for(var b=0;b<allBtns.length;b++) allBtns[b].disabled=true;
    if(chosenIdx === qData.ci){
      mcBtn.classList.add('correct');
      playDing(); launchConfetti();
      results[qid]=true;
    } else {
      mcBtn.classList.add('wrong');
      for(var b2=0;b2<allBtns.length;b2++){
        if(parseInt(allBtns[b2].getAttribute('data-origidx'),10)===qData.ci){
          allBtns[b2].classList.add('show-correct');
        }
      }
      playBuzz();
      results[qid]=false;
    }
    var expEl = document.getElementById('exp-'+qid);
    if(expEl) expEl.classList.add('show');
    return;
  }

  // Mistake button
  var misBtn = e.target.closest ? e.target.closest('.mis-btn') : null;
  if(misBtn && !misBtn.disabled){
    var qid2 = misBtn.getAttribute('data-qid');
    var card2 = document.getElementById('card-'+qid2);
    if(!card2 || card2.getAttribute('data-done')) return;
    card2.setAttribute('data-done','1');
    var chosenIdx2 = parseInt(misBtn.getAttribute('data-origidx'),10);
    var mData = null;
    for(var m=0;m<MISTAKE.length;m++){if(MISTAKE[m].id===qid2){mData=MISTAKE[m];break;}}
    if(!mData) return;
    var allMBtns = card2.querySelectorAll('.mis-btn');
    for(var mb=0;mb<allMBtns.length;mb++) allMBtns[mb].disabled=true;
    if(chosenIdx2 === mData.ci){
      misBtn.classList.add('correct');
      playDing(); launchConfetti();
      results[qid2]=true;
    } else {
      misBtn.classList.add('wrong');
      for(var mb2=0;mb2<allMBtns.length;mb2++){
        if(parseInt(allMBtns[mb2].getAttribute('data-origidx'),10)===mData.ci){
          allMBtns[mb2].classList.add('correct');
        }
      }
      playBuzz();
      results[qid2]=false;
    }
    var expEl2 = document.getElementById('exp-'+qid2);
    if(expEl2) expEl2.classList.add('show');
    return;
  }

  // Writing answer button
  var wBtn = e.target.closest ? e.target.closest('.show-ans-btn') : null;
  if(wBtn){
    var wid = wBtn.getAttribute('data-wid');
    var wExp = document.getElementById('exp-'+wid);
    if(wExp) wExp.classList.add('show');
    return;
  }
});

/* ===== SUBMIT ===== */
document.getElementById('submitBtn').addEventListener('click', function(){
  var total = MC.length + MISTAKE.length;
  var correct = 0;
  var keys = Object.keys(results);
  for(var k=0;k<keys.length;k++){if(results[keys[k]]===true) correct++;}
  var pct = Math.round(correct/total*100);
  var msgs = ['Xuáº¥t sáº¯c! Perfect score! Em tháº­t tuyá»‡t vá»i! ğŸ†',
              'Ráº¥t giá»i! Tiáº¿p tá»¥c phÃ¡t huy nhÃ©! ğŸŒŸ',
              'KhÃ¡ tá»‘t! Cá»‘ gáº¯ng thÃªm lÃ  Ä‘áº¡t Ä‘iá»ƒm cao! ğŸ’ª',
              'Ã”n láº¡i nhÃ©! Practice makes perfect! ğŸ“–'];
  var msg = pct===100?msgs[0]:pct>=80?msgs[1]:pct>=60?msgs[2]:msgs[3];
  document.getElementById('scoreBig').textContent = correct+'/'+total;
  document.getElementById('scoreMsg').textContent = msg;
  document.getElementById('scoreDetail').textContent = 'Äáº¡t '+pct+'% | ChÆ°a lÃ m: '+(total-keys.length)+' cÃ¢u';
  document.getElementById('scorePopup').classList.add('show');
  if(pct>=60) launchConfetti();
});
document.getElementById('closePopup').addEventListener('click',function(){
  document.getElementById('scorePopup').classList.remove('show');
});
</script>
</body>
</html>
