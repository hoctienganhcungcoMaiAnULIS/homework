<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIT 9 ‚Äì NATURAL DISASTER | TEST 01</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --correct-color: #27ae60;
            --wrong-color: #e74c3c;
            --bg-color: #f4f6f7;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 20px;
        }

        h1 { color: var(--primary-color); margin: 0; font-size: 2.2rem; }
        h2 { color: var(--accent-color); margin: 5px 0 0; font-weight: 400; font-size: 1.2rem; }
        .teacher-name { color: #7f8c8d; font-style: italic; font-size: 0.9rem; margin-top: 5px; }

        /* Reference Box (Reading text, Options box) */
        .ref-box {
            background-color: #e8f6f3;
            border-left: 5px solid #1abc9c;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
            font-size: 0.95rem;
            white-space: pre-line;
        }
        .ref-title {
            font-weight: bold;
            color: #16a085;
            text-transform: uppercase;
            margin-bottom: 10px;
            display: block;
        }

        /* Question Styles */
        .question-block {
            margin-bottom: 35px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .q-title {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .q-text { margin-bottom: 15px; display: block; }
        .underlined { text-decoration: underline; font-weight: bold; color: var(--primary-color); }

        /* Options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        @media(min-width: 600px) {
            .options-grid { grid-template-columns: 1fr 1fr; }
            .options-grid.full-width { grid-template-columns: 1fr; }
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover { background: #e2e6ea; border-color: #ced4da; }
        .option-label input { margin-right: 12px; transform: scale(1.2); }

        /* Feedback States */
        .option-label.correct {
            background-color: #d4edda;
            border-color: var(--correct-color);
            color: #155724;
        }
        .option-label.wrong {
            background-color: #f8d7da;
            border-color: var(--wrong-color);
            color: #721c24;
        }
        .option-label.missed {
            border: 2px dashed var(--correct-color);
            background-color: #f0fff4;
        }

        /* Explanations */
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
            display: none; /* Hidden by default */
            font-size: 0.9rem;
            color: #856404;
        }
        .explanation.visible { display: block; animation: fadeIn 0.5s; }
        .exp-header { font-weight: bold; margin-bottom: 5px; display: block; }

        /* Buttons */
        .btn-check {
            margin-top: 15px;
            padding: 8px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .btn-check:hover { background-color: #1a252f; }

        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
            text-align: center;
            z-index: 100;
        }
        .btn-submit-all {
            background-color: var(--accent-color);
            color: white;
            padding: 12px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .btn-submit-all:hover { transform: scale(1.05); background-color: #2980b9; }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal {
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--accent-color);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        .close-modal {
            margin-top: 20px;
            padding: 10px 30px;
            background: #95a5a6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Utility for gaps */
        .gap-input {
            display: inline-block;
            width: 40px;
            border-bottom: 2px solid #333;
            text-align: center;
            font-weight: bold;
            color: var(--accent-color);
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>UNIT 9 ‚Äì NATURAL DISASTER</h1>
        <h2>TEST 01</h2>
        <div class="teacher-name">Created by: Mai An | Digitized by: AI Expert Teacher</div>
    </header>

    <div id="quiz-container">
        </div>
    
    <div style="height: 100px;"></div>
</div>

<div class="sticky-footer">
    <button class="btn-submit-all" onclick="submitAll()">N·ªôp B√†i & Xem ƒêi·ªÉm</button>
</div>

<div class="modal-overlay" id="resultModal">
    <div class="modal">
        <div class="score-circle" id="scoreDisplay">0/40</div>
        <h3 id="scoreMessage">Great Job!</h3>
        <p>B·∫°n ƒë√£ ho√†n th√†nh b√†i ki·ªÉm tra.</p>
        <button class="close-modal" onclick="closeModal()">Xem Chi Ti·∫øt ƒê√°p √Ån</button>
    </div>
</div>

<script>
    // DATA SOURCE
    const quizData = [
        // PRONUNCIATION
        {
            id: 1,
            type: "pronunciation",
            instruction: "Mark the letter A, B, C or D to indicate the word whose underlined part differs from the other three in pronunciation.",
            question: "Choose the word with different pronunciation:",
            options: [
                { text: "m<u>u</u>d", value: "A", ipa: "/ å/" },
                { text: "n<u>u</u>merous", value: "B", ipa: "/ju:/", correct: true },
                { text: "th<u>u</u>nderstorm", value: "C", ipa: "/ å/" },
                { text: "s<u>u</u>ddenly", value: "D", ipa: "/ å/" }
            ],
            explanation: "ƒê√°p √°n B ph√°t √¢m l√† /ju:/ (nh∆∞ 'you'). C√°c ƒë√°p √°n c√≤n l·∫°i (mud, thunderstorm, suddenly) ph√°t √¢m l√† / å/."
        },
        {
            id: 2,
            type: "pronunciation",
            instruction: "Mark the letter A, B, C or D to indicate the word whose underlined part differs from the other three in pronunciation.",
            question: "Choose the word with different pronunciation:",
            options: [
                { text: "violen<u>t</u>", value: "A", ipa: "/t/" },
                { text: "whis<u>t</u>le", value: "B", ipa: "/sl/ (silent t)", correct: true },
                { text: "prac<u>t</u>ical", value: "C", ipa: "/t/" },
                { text: "ligh<u>t</u>ning", value: "D", ipa: "/t/" }
            ],
            explanation: "ƒê√°p √°n B 'whistle' c√≥ √¢m 't' b·ªã c√¢m (silent). C√°c t·ª´ c√≤n l·∫°i ph√°t √¢m 't' r√µ r√†ng."
        },
        // STRESS
        {
            id: 3,
            type: "stress",
            instruction: "Mark the letter A, B, C or D to indicate the word that differs from the other three in the position of primary stress.",
            question: "Choose the word with different stress pattern:",
            options: [
                { text: "develop", value: "A", stress: "2nd", correct: true },
                { text: "funnel", value: "B", stress: "1st" },
                { text: "damage", value: "C", stress: "1st" },
                { text: "funnel (duplicate in src)", value: "D", stress: "1st" }
            ],
            explanation: "ƒê√°p √°n A 'develop' nh·∫•n √¢m 2 (/d…™Ààvel…ôp/). C√°c t·ª´ c√≤n l·∫°i nh·∫•n √¢m 1: funnel (/Ààf ånl/), damage (/Ààd√¶m…™d í/)."
        },
        {
            id: 4,
            type: "stress",
            instruction: "Mark the letter A, B, C or D to indicate the word that differs from the other three in the position of primary stress.",
            question: "Choose the word with different stress pattern:",
            options: [
                { text: "rescue", value: "A", stress: "1st" },
                { text: "strengthen", value: "B", stress: "1st" },
                { text: "system", value: "C", stress: "1st" },
                { text: "towards", value: "D", stress: "2nd", correct: true }
            ],
            explanation: "ƒê√°p √°n D 'towards' nh·∫•n √¢m 2 (/t…ôÀàw…îÀêdz/). C√°c t·ª´ c√≤n l·∫°i nh·∫•n √¢m 1."
        },
        // GRAMMAR & VOCAB
        {
            id: 5,
            instruction: "Choose the best answer.",
            question: "The volcanic _____ sent plumes of ash and smoke high into the sky.",
            options: [
                { text: "eruption", value: "A", correct: true },
                { text: "outbreak", value: "B" },
                { text: "burst", value: "C" },
                { text: "discharge", value: "D" }
            ],
            explanation: "Collocation: 'Volcanic eruption' (S·ª± phun tr√†o n√∫i l·ª≠a). 'Outbreak' d√πng cho d·ªãch b·ªánh/chi·∫øn tranh."
        },
        {
            id: 6,
            instruction: "Choose the best answer.",
            question: "The ____ shook the region, leaving buildings damaged and roads cracked.",
            options: [
                { text: "earthquake", value: "A", correct: true },
                { text: "shock", value: "B" },
                { text: "tornado", value: "C" },
                { text: "thunderstorm", value: "D" }
            ],
            explanation: "Key words: 'shook' (rung chuy·ªÉn), 'roads cracked' (n·ª©t ƒë∆∞·ªùng) -> Ch·ªâ c√≥ Earthquake (ƒê·ªông ƒë·∫•t) g√¢y ra hi·ªán t∆∞·ª£ng n√†y."
        },
        {
            id: 7,
            instruction: "Choose the best answer.",
            question: "The hurricane hit the coastal village with incredible force, leaving a trail of ____ in its wake.",
            options: [
                { text: "warning", value: "A" },
                { text: "prediction", value: "B" },
                { text: "destruction", value: "C", correct: true },
                { text: "property", value: "D" }
            ],
            explanation: "Phrase: 'leave a trail of destruction' (ƒë·ªÉ l·∫°i m·ªôt v·ªát t√†n ph√°). Nghƒ©a: C∆°n b√£o g√¢y ra s·ª± t√†n ph√° kh·ªßng khi·∫øp."
        },
        {
            id: 8,
            instruction: "Choose the best answer.",
            question: "He is good ____ meteorology.",
            options: [
                { text: "on", value: "A" },
                { text: "in", value: "B" },
                { text: "at", value: "C", correct: true },
                { text: "for", value: "D" }
            ],
            explanation: "Structure: 'Good at + Noun/V-ing' (Gi·ªèi v·ªÅ c√°i g√¨). Meteorology: Kh√≠ t∆∞·ª£ng h·ªçc."
        },
        {
            id: 9,
            instruction: "Choose the best answer.",
            question: "How fast _____ when the accident happened?",
            options: [
                { text: "were you driving", value: "A", correct: true },
                { text: "did you drive", value: "B" },
                { text: "would you drive", value: "C" },
                { text: "were you driven", value: "D" }
            ],
            explanation: "H√†nh ƒë·ªông ƒëang x·∫£y ra (l√°i xe) th√¨ h√†nh ƒë·ªông kh√°c xen v√†o (tai n·∫°n). D√πng Past Continuous (Were + V-ing)."
        },
        {
            id: 10,
            instruction: "Choose the best answer.",
            question: "While Steven and Rachel _____ around the Canary Islands, their boat ___.",
            options: [
                { text: "were sailing ‚Äì sank", value: "A", correct: true },
                { text: "sailed ‚Äì sank", value: "B" },
                { text: "sailed ‚Äì was sinking", value: "C" },
                { text: "were sailing ‚Äì was sinking", value: "D" }
            ],
            explanation: "C·∫•u tr√∫c 'While' + Past Continuous (h√†nh ƒë·ªông d√†i: sailing), Past Simple (h√†nh ƒë·ªông ng·∫Øn: sank)."
        },
        {
            id: 11,
            instruction: "Choose the best answer. (Note: Typo fixed in options)",
            question: "Indonesia _____ by a powerful 6.9 magnitude earthquake on Friday.",
            options: [
                { text: "was stuck (b·ªã k·∫πt)", value: "A" },
                { text: "was stucking (sai ng·ªØ ph√°p)", value: "B" },
                { text: "was struck (b·ªã t·∫•n c√¥ng/ƒë√°nh)", value: "C", correct: true },
                { text: "was stucken (sai t·ª´ v·ª±ng)", value: "D" }
            ],
            explanation: "C√¢u b·ªã ƒë·ªông: Indonesia 'was struck' (b·ªã t·∫•n c√¥ng/ƒë√°nh v√†o) b·ªüi tr·∫≠n ƒë·ªông ƒë·∫•t. (ƒê·ªÅ g·ªëc ghi 'stucken' l√† sai ch√≠nh t·∫£ c·ªßa 'struck' ho·∫∑c nh·∫ßm v·ªõi 'stuck'). ·ªû ƒë√¢y ta ch·ªçn ƒë√°p √°n mang nghƒ©a 'struck' (ƒë√£ s·ª≠a l·∫°i cho ƒë√∫ng)."
        },
        {
            id: 12,
            instruction: "Choose the best answer.",
            question: "There was a heavy rain which supported to _______ the forest fire.",
            options: [
                { text: "put up", value: "A" },
                { text: "put out", value: "B", correct: true },
                { text: "give out", value: "C" },
                { text: "give up", value: "D" }
            ],
            explanation: "Phrasal verb: 'Put out' = Extinguish (D·∫≠p t·∫Øt l·ª≠a)."
        },
        // GAP FILL - ANNOUNCEMENT
        {
            id: 13,
            context: "ANNOUNCEMENT OF THE GRADUATION CEREMONY\nThe school Youth Union would like to announce\nAll students of Grade 12 (13) ______ present by 17:00 on Jun 29, 2024.\nGirls are required to wear the traditional (14) ______, while boys must wear white shirts and dark pants.\n(15) _____parents need further information, feel free to contact Mr. Cuong at 0356.211.439.\nPlease contact if you (16) _____ anyone.",
            instruction: "Read the announcement and choose the correct option.",
            question: "Question 13:",
            options: [
                { text: "must", value: "A" },
                { text: "have to be", value: "B", correct: true },
                { text: "due to", value: "C" },
                { text: "going to", value: "D" }
            ],
            explanation: "C·∫•u tr√∫c: 'Have to be present' (Ph·∫£i c√≥ m·∫∑t). 'Must' thi·∫øu 'be' ƒë·ªÉ ƒëi v·ªõi t√≠nh t·ª´ 'present'."
        },
        {
            id: 14,
            instruction: "Read the announcement and choose the correct option.",
            question: "Question 14: Girls are required to wear the traditional (14) ______",
            options: [
                { text: "customs", value: "A" },
                { text: "activities", value: "B" },
                { text: "cultures", value: "C" },
                { text: "costumes", value: "D", correct: true }
            ],
            explanation: "Traditional costumes (Trang ph·ª•c truy·ªÅn th·ªëng). Customs (Phong t·ª•c) kh√¥ng d√πng v·ªõi 'wear'."
        },
        {
            id: 15,
            instruction: "Read the announcement and choose the correct option.",
            question: "Question 15: (15) _____parents need further information...",
            options: [
                { text: "Had", value: "A" },
                { text: "Should", value: "B", correct: true },
                { text: "Were", value: "C" },
                { text: "Do", value: "D" }
            ],
            explanation: "ƒê·∫£o ng·ªØ c√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1 trang tr·ªçng: 'Should + S + V' thay cho 'If + S + V'. (Should parents need... = If parents need...)"
        },
        {
            id: 16,
            instruction: "Read the announcement and choose the correct option.",
            question: "Question 16: Please contact if you (16) _____ anyone.",
            options: [
                { text: "brings", value: "A" },
                { text: "bring", value: "B", correct: true },
                { text: "bringing", value: "C" },
                { text: "have brought", value: "D" }
            ],
            explanation: "M·ªánh ƒë·ªÅ If lo·∫°i 1 (Hi·ªán t·∫°i ƒë∆°n): If you bring."
        },
        // SENTENCE ARRANGEMENT
        {
            id: 17,
            type: "ordering",
            boxContent: "a. Thank you for your continued support and for being a valued VIP member.\nb. Enjoy special benefits like extended warranties and priority customer service.\nc. We are excited to offer you exclusive access to our latest electronic gadgets\nd. Hi, Sarah! Welcome to the VIP club at our electronics store\ne. Please reach out if you have any questions or need assistance with your new benefits.",
            instruction: "Arrange the sentences to make a meaningful letter.",
            question: "Question 17: Choose the correct order:",
            options: [
                { text: "d-a-b-c-e", value: "A" },
                { text: "d-c-a-b-e", value: "B" },
                { text: "d-a-c-b-e", value: "C", correct: true },
                { text: "d-b-c-a-e", value: "D" }
            ],
            explanation: "Logic th∆∞ ch√†o m·ª´ng: Ch√†o (d) -> C·∫£m ∆°n (a) -> Th√¥ng b√°o quy·ªÅn l·ª£i/tin vui (c) -> Chi ti·∫øt l·ª£i √≠ch (b) -> K·∫øt th∆∞/H·ªó tr·ª£ (e)."
        },
        {
            id: 18,
            type: "ordering",
            boxContent: "a. To start using your new phone, first, take it out of the box and charge it fully.\nb. Next, turn on the phone by pressing the power button on the side.\nc. After that, use the setup guide to connect to your Wi-fi network and sign in\nd. Then, explore the settings to change things like brightness and volume.\ne. Finally, download any apps you need from the app store.",
            instruction: "Arrange the sentences to make a meaningful instruction.",
            question: "Question 18: Choose the correct order:",
            options: [
                { text: "a-b-c-d-e", value: "A", correct: true },
                { text: "b-a-c-d-e", value: "B" },
                { text: "a-c-b-e-d", value: "C" },
                { text: "a-b-e-d-c", value: "D" }
            ],
            explanation: "Tr√¨nh t·ª± th·ªùi gian r√µ r√†ng qua c√°c t·ª´ n·ªëi: First (a) -> Next (b) -> After that (c) -> Then (d) -> Finally (e)."
        },
        // CLOZE TEXT - EROSION
        {
            id: 19,
            context: "EROSION IN AMERICA\nErosion of America‚Äôs farmland by wind and water has been a problem since settlers first put the prairies and grassland under the plow in the nineteenth century. By the 1930s, (19) _____282 million acres of farmland (20) _____ by erosion. After 40 years of (21) _____ efforts, soil erosion has accelerated due to new demands (22) _____ on the land by heavy crop (23) _____. In the years ahead, soil erosion and the pollution problems it causes are likely to replace petroleum scarcity as the nation's most critical (24) ____ resource problem.",
            instruction: "Read the passage and choose the correct option.",
            question: "Question 19: By the 1930s, (19) _____ 282 million acres...",
            options: [
                { text: "more than", value: "A", correct: true },
                { text: "more", value: "B" },
                { text: "less", value: "C" },
                { text: "than", value: "D" }
            ],
            explanation: "'More than' (h∆°n) d√πng tr∆∞·ªõc con s·ªë ƒë·ªÉ ch·ªâ s·ªë l∆∞·ª£ng v∆∞·ª£t qu√°."
        },
        {
            id: 20,
            instruction: "Refer to the text 'Erosion in America'.",
            question: "Question 20: ...farmland (20) _____ by erosion.",
            options: [
                { text: "damaged", value: "A" },
                { text: "was damaged", value: "B" },
                { text: "were damaged", value: "C", correct: true },
                { text: "damages", value: "D" }
            ],
            explanation: "Ch·ªß ng·ªØ l√† '282 million acres' (s·ªë nhi·ªÅu) -> ƒê·ªông t·ª´ tobe l√† 'were'. C√¢u b·ªã ƒë·ªông: were damaged."
        },
        {
            id: 21,
            instruction: "Refer to the text 'Erosion in America'.",
            question: "Question 21: After 40 years of (21) _____ efforts...",
            options: [
                { text: "conserve", value: "A" },
                { text: "conservation", value: "B", correct: true },
                { text: "conserving", value: "C" },
                { text: "conservations", value: "D" }
            ],
            explanation: "C·ª•m danh t·ª´ gh√©p: 'Conservation efforts' (N·ªó l·ª±c b·∫£o t·ªìn)."
        },
        {
            id: 22,
            instruction: "Refer to the text 'Erosion in America'.",
            question: "Question 22: ...new demands (22) _____ on the land...",
            options: [
                { text: "were placed", value: "A" },
                { text: "was placed", value: "B" },
                { text: "which placed", value: "C" },
                { text: "placed", value: "D", correct: true }
            ],
            explanation: "R√∫t g·ªçn m·ªánh ƒë·ªÅ quan h·ªá d·∫°ng b·ªã ƒë·ªông: 'demands (which were) placed on the land'."
        },
        {
            id: 23,
            instruction: "Refer to the text 'Erosion in America'.",
            question: "Question 23: ...by heavy crop (23) _____.",
            options: [
                { text: "produce", value: "A" },
                { text: "product", value: "B" },
                { text: "production", value: "C", correct: true },
                { text: "produce", value: "D" }
            ],
            explanation: "'Crop production' (S·∫£n xu·∫•t m√πa v·ª•/n√¥ng s·∫£n). C·∫ßn danh t·ª´ ch·ªâ qu√° tr√¨nh."
        },
        {
            id: 24,
            instruction: "Refer to the text 'Erosion in America'.",
            question: "Question 24: ...most critical (24) ____ resource problem.",
            options: [
                { text: "nature", value: "A" },
                { text: "natural", value: "B", correct: true },
                { text: "nation", value: "C" },
                { text: "national", value: "D" }
            ],
            explanation: "'Natural resource' (T√†i nguy√™n thi√™n nhi√™n). C·∫ßn t√≠nh t·ª´ b·ªï nghƒ©a cho danh t·ª´ resource."
        },
        // CLOSEST MEANING
        {
            id: 25,
            instruction: "Indicate the sentence that is closest in meaning to the original.",
            question: "Original: I was studying for my exam. My brother was playing video games in his room.",
            options: [
                { text: "I studied for my exam while my brother played video games in his room.", value: "A" },
                { text: "While I was studying for my exam, my brother was playing video games in his room.", value: "B", correct: true },
                { text: "When I was studying for my exam, my brother was playing video games in his room.", value: "C" },
                { text: "While I studied for my exam, my brother was playing video games in his room.", value: "D" }
            ],
            explanation: "Hai h√†nh ƒë·ªông x·∫£y ra song song trong qu√° kh·ª© -> D√πng 'While' + Past Continuous cho c·∫£ 2 v·∫ø."
        },
        {
            id: 26,
            instruction: "Indicate the sentence that is closest in meaning to the original.",
            question: "Original: This morning, I was cleaning the house. My sister was baking a cake in the kitchen.",
            options: [
                { text: "This morning, I was cleaning the house, I was hearing my sister baking a cake in the kitchen.", value: "A" },
                { text: "This morning, when I cleaned the house, my sister baked a cake in the kitchen.", value: "B" },
                { text: "This morning, while I was cleaning the house, my sister was baking a cake in the kitchen.", value: "C", correct: true },
                { text: "This morning, I cleaned the house while my sister was baking a cake in the kitchen.", value: "D" }
            ],
            explanation: "T∆∞∆°ng t·ª± c√¢u 25, hai h√†nh ƒë·ªông song song d√πng 'While' + Past Continuous."
        },
        // SENTENCE BUILDING
        {
            id: 27,
            instruction: "Indicate the sentence made from the given cues.",
            question: "Cues: Sometimes / more / one disaster / occur / same time.",
            options: [
                { text: "Sometimes, more than one disaster occurs the same time.", value: "A" },
                { text: "Sometimes, more than one disaster occur at same time.", value: "B" },
                { text: "Sometimes, more than one disaster occur same time.", value: "C" },
                { text: "Sometimes, more than one disaster occurs at the same time.", value: "D", correct: true }
            ],
            explanation: "C·ª•m t·ª´ c·ªë ƒë·ªãnh 'at the same time'. Ch·ªß ng·ªØ 'more than one disaster' ƒëi v·ªõi ƒë·ªông t·ª´ s·ªë √≠t 'occurs'."
        },
        {
            id: 28,
            instruction: "Indicate the sentence made from the given cues.",
            question: "Cues: Scientist / can predict / many / the disasters / ahead / time.",
            options: [
                { text: "Scientist can predict many of the disasters ahead of time.", value: "A" },
                { text: "Scientists can predict many the disasters ahead of time.", value: "B" },
                { text: "Scientists can predict many of the disasters ahead time.", value: "C" },
                { text: "Scientists can predict many of the disasters ahead of time.", value: "D", correct: true }
            ],
            explanation: "Scientists (s·ªë nhi·ªÅu). C·∫•u tr√∫c 'many of the disasters'. C·ª•m 'ahead of time' (tr∆∞·ªõc th·ªùi h·∫°n/s·ªõm)."
        },
        // SIGNS
        {
            id: 29,
            instruction: "What does the notice say?",
            question: "Image: [Sign with Restroom icon and Arrow pointing Right]",
            imgPlaceholder: "Sign: Restrooms -> Right Arrow",
            options: [
                { text: "Restrooms are in the direction shown by this sign", value: "A", correct: true },
                { text: "The restroom is closed and you cannot use it now.", value: "B" },
                { text: "There are no restrooms here or nearby", value: "C" },
                { text: "Restrooms are on the other side of this place.", value: "D" }
            ],
            explanation: "Bi·ªÉn b√°o c√≥ m≈©i t√™n h∆∞·ªõng sang ph·∫£i -> Nh√† v·ªá sinh ·ªü h∆∞·ªõng ƒë∆∞·ª£c ch·ªâ d·∫´n."
        },
        {
            id: 30,
            context: "Notice Text: 'Students will have Tet holiday from February 8, 2025. They will return to school on February 15, 2025 to prepare for mid-term exams.'",
            instruction: "What does the notice say?",
            question: "Choose the correct interpretation:",
            options: [
                { text: "Students will return to school after 8 days of holiday and prepare for exams.", value: "A" },
                { text: "Students‚Äô exams will come when they return to school", value: "B" },
                { text: "Students will have to prepare for exams after the holiday.", value: "C" },
                { text: "Students will return to school after February 14 and prepare for exams.", value: "D", correct: true }
            ],
            explanation: "Th√¥ng b√°o n√≥i 'return on Feb 15'. ƒêi·ªÅu n√†y ƒë·ªìng nghƒ©a v·ªõi 'return after Feb 14'. ƒê√°p √°n C c≈©ng ƒë√∫ng v·ªÅ m·∫∑t ng·ªØ nghƒ©a (prepare after holiday), nh∆∞ng D ch√≠nh x√°c h∆°n v·ªÅ m·∫∑t th√¥ng tin th·ªùi gian c·ª• th·ªÉ m√† bi·ªÉn b√°o ƒë∆∞a ra."
        },
        // READING COMPREHENSION - TSUNAMI
        {
            id: 31,
            context: "WHAT IS A TSUNAMI\nA tsunami is a string of large ocean waves. Some people call it a 'wave train' or a 'tidal wave.' Tsunamis, unlike normal ocean waves, are not caused by tides. The word tsunami comes from the Japanese. Tsunamis are caused by a sudden, large motion on the ocean floor. They can be caused by an earthquake under the ocean. Sometimes an underwater landslide or volcano is the cause. When one of these things happens, the energy passes through the ocean water. Just like the ripples from a rock being thrown into a pond, the energy released by one of these motions spreads out in all directions. The energy can travel many miles away. Tsunamis move at high speeds. Most tsunamis happen in the Pacific Ocean. In the deep waters, a tsunami may travel 450 miles per hour. Out in the ocean, a tsunami may be hard to see. As it comes close to shore, its speed slows down. The height of the wave builds. The tsunami may suddenly rise into a wave ten to one hundred feet high. These large waves are a disaster for coastal regions and people living there. Tsunami warning networks alert people living along coastlines in the Pacific Ocean. When a warning is sounded, people can move away from the coast to higher ground.",
            instruction: "Read the passage about Tsunami and answer the questions.",
            question: "Question 31: What is the main idea of the passage?",
            options: [
                { text: "How tsunamis are formed and their impact", value: "A", correct: true },
                { text: "How tides affect the ocean", value: "B" },
                { text: "The history of the word 'tsunami'", value: "C" },
                { text: "How earthquakes destroy coastal cities.", value: "D" }
            ],
            explanation: "B√†i ƒë·ªçc gi·∫£i th√≠ch ƒë·ªãnh nghƒ©a, nguy√™n nh√¢n h√¨nh th√†nh (earthquake, landslide) v√† t√°c ƒë·ªông (disaster, wave height) c·ªßa s√≥ng th·∫ßn."
        },
        {
            id: 32,
            instruction: "Refer to the Tsunami passage.",
            question: "Question 32: Which word has the same meaning as ‚Äúdisaster‚Äù in the text?",
            options: [
                { text: "Warning", value: "A" },
                { text: "Tragedy", value: "B", correct: true },
                { text: "Motion", value: "C" },
                { text: "Ground", value: "D" }
            ],
            explanation: "Disaster (Th·∫£m h·ªça) ƒë·ªìng nghƒ©a v·ªõi Tragedy (Bi k·ªãch/Th·∫£m k·ªãch)."
        },
        {
            id: 33,
            instruction: "Refer to the Tsunami passage.",
            question: "Question 33: Which word is the OPPOSITE of ‚Äúshallow‚Äù (n√¥ng) as used in the text?",
            options: [
                { text: "High", value: "A" },
                { text: "Deep", value: "B", correct: true },
                { text: "Slow", value: "C" },
                { text: "Low", value: "D" }
            ],
            explanation: "Opposite of Shallow (n√¥ng) l√† Deep (s√¢u). B√†i ƒë·ªçc nh·∫Øc ƒë·∫øn 'In the deep waters'."
        },
        {
            id: 34,
            instruction: "Refer to the Tsunami passage.",
            question: "Question 34: Which of the following is NOT TRUE according to the text?",
            options: [
                { text: "Most tsunamis happen in the Pacific Ocean", value: "A" },
                { text: "Tsunamis are caused by tides", value: "B", correct: true },
                { text: "Tsunamis can travel at high speeds in deep water", value: "C" },
                { text: "People are warned about tsunamis through special networks.", value: "D" }
            ],
            explanation: "B√†i ƒë·ªçc ghi r√µ: 'Tsunamis, unlike normal ocean waves, are not caused by tides' (S√≥ng th·∫ßn KH√îNG do th·ªßy tri·ªÅu g√¢y ra)."
        },
        {
            id: 35,
            instruction: "Refer to the Tsunami passage.",
            question: "Question 35: What usually causes a tsunami to form?",
            options: [
                { text: "High tides on the ocean surface", value: "A" },
                { text: "Large movements on the ocean floor", value: "B", correct: true },
                { text: "Strong winds blowing across the sea", value: "C" },
                { text: "Ripples caused by boats", value: "D" }
            ],
            explanation: "Text: 'Tsunamis are caused by a sudden, large motion on the ocean floor' (Chuy·ªÉn ƒë·ªông l·ªõn d∆∞·ªõi ƒë√°y ƒë·∫°i d∆∞∆°ng)."
        },
        {
            id: 36,
            instruction: "Refer to the Tsunami passage.",
            question: "Question 36: Why are tsunamis hard to see in the middle of the ocean?",
            options: [
                { text: "They travel too slowly", value: "A" },
                { text: "Their height is low in deep water", value: "B", correct: true },
                { text: "Their speed makes them invisible", value: "C" },
                { text: "The ocean water blocks the waves", value: "D" }
            ],
            explanation: "Text: 'Out in the ocean, a tsunami may be hard to see... The height of the wave builds [when close to shore]'. Suy ra ngo√†i kh∆°i chi·ªÅu cao s√≥ng th·∫•p."
        },
        // GAP FILL - LINDA STORM (Special Layout)
        {
            id: 37,
            type: "gap_fill_group",
            context: "Vietnam usually has a dozen storms every year from June through the end of November. November 2nd, 1997, however, (37) ______ . Linda was the worst typhoon in Southern Vietnam over 100 years. (38) _______ , Linda strengthened as it moved westward. (39) ______ . Over 3000 people were reported lost and died. Ca Mau province, suffered a direct hit by the storm, had the most damage. Gusts and heavy rainfalls caused flooding, destroyed crops, damaged about 200,000 houses and left about 383,000 people homeless. Linda later struck Thailand, (40) _____ . The storm also affected Myanmar, Indonesia, Malaysia, and Cambodia to a lesser degree.",
            topOptions: "A - causing flash flooding and at least 164 deaths\nB - Formed in the sea of the Philippines\nC - was an unexpected day when the major storm Linda raged in the South\nD - Later, it struck extreme Southern Vietnam with winds of 100 kilometres an hour",
            question: "Question 37",
            options: [
                { text: "A", value: "A" },
                { text: "B", value: "B" },
                { text: "C", value: "C", correct: true },
                { text: "D", value: "D" }
            ],
            explanation: "V·ªã tr√≠ 37 c·∫ßn m·ªôt m·ªánh ƒë·ªÅ sau 'November 2nd, 1997'. C - 'was an unexpected day...' l√† ph√π h·ª£p nh·∫•t v·ªÅ nghƒ©a v√† ng·ªØ ph√°p."
        },
        {
            id: 38,
            type: "gap_fill_child",
            question: "Question 38",
            options: [
                { text: "A", value: "A" },
                { text: "B", value: "B", correct: true },
                { text: "C", value: "C" },
                { text: "D", value: "D" }
            ],
            explanation: "V·ªã tr√≠ 38 m√¥ t·∫£ ngu·ªìn g·ªëc b√£o tr∆∞·ªõc khi n√≥ m·∫°nh l√™n. B - 'Formed in the sea of the Philippines' l√† m·ªánh ƒë·ªÅ r√∫t g·ªçn ph√π h·ª£p."
        },
        {
            id: 39,
            type: "gap_fill_child",
            question: "Question 39",
            options: [
                { text: "A", value: "A" },
                { text: "B", value: "B" },
                { text: "C", value: "C" },
                { text: "D", value: "D", correct: true }
            ],
            explanation: "V·ªã tr√≠ 39 m√¥ t·∫£ s·ª± ki·ªán b√£o ƒë·ªï b·ªô g√¢y th∆∞∆°ng vong l·ªõn (3000 people died). D - 'Later, it struck extreme Southern Vietnam...' d·∫´n d·∫Øt tr·ª±c ti·∫øp ƒë·∫øn h·∫≠u qu·∫£ ƒë√≥."
        },
        {
            id: 40,
            type: "gap_fill_child",
            question: "Question 40",
            options: [
                { text: "A", value: "A", correct: true },
                { text: "B", value: "B" },
                { text: "C", value: "C" },
                { text: "D", value: "D" }
            ],
            explanation: "V·ªã tr√≠ 40 n√≥i v·ªÅ h·∫≠u qu·∫£ t·∫°i Th√°i Lan. A - 'causing flash flooding...' l√† h·∫≠u qu·∫£ h·ª£p l√Ω."
        }
    ];

    // RENDER LOGIC
    const container = document.getElementById('quiz-container');

    quizData.forEach((item, index) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question-block';
        qDiv.id = `q-block-${item.id}`;

        // Add Context Box if exists (Grouping Reading passages)
        if (item.context && (item.type !== 'gap_fill_child')) {
            const contextBox = document.createElement('div');
            contextBox.className = 'ref-box';
            let titleText = "READING PASSAGE / CONTEXT";
            if(item.id === 13) titleText = "ANNOUNCEMENT";
            if(item.id === 30) titleText = "NOTICE";
            
            contextBox.innerHTML = `<span class="ref-title">${titleText}</span>${item.context}`;
            
            // For Question 37's special options box
            if (item.topOptions) {
                contextBox.innerHTML += `<hr style="border-color:#1abc9c; margin:15px 0;"><span class="ref-title">OPTIONS</span>${item.topOptions}`;
            }
            qDiv.appendChild(contextBox);
        }

        // Add Sentence Ordering Box
        if (item.boxContent) {
            const box = document.createElement('div');
            box.className = 'ref-box';
            box.innerHTML = `<span class="ref-title">Arrange these sentences:</span>${item.boxContent}`;
            qDiv.appendChild(box);
        }

        // Question Title & Text
        const title = document.createElement('div');
        title.className = 'q-title';
        title.innerText = `Question ${item.id}:`;
        qDiv.appendChild(title);

        if(item.instruction) {
            const instr = document.createElement('p');
            instr.style.fontStyle = "italic";
            instr.style.color = "#666";
            instr.innerText = item.instruction;
            qDiv.appendChild(instr);
        }

        if(item.question) {
            const qText = document.createElement('div');
            qText.className = 'q-text';
            qText.innerHTML = item.question; // Allow HTML for underlines
            qDiv.appendChild(qText);
        }

        // Image Placeholders (Simulated)
        if(item.imgPlaceholder) {
            const imgDiv = document.createElement('div');
            imgDiv.style.border = "2px dashed #ccc";
            imgDiv.style.padding = "20px";
            imgDiv.style.textAlign = "center";
            imgDiv.style.marginBottom = "15px";
            imgDiv.style.backgroundColor = "#fff";
            imgDiv.innerHTML = `üñºÔ∏è <b>Image Representation:</b> ${item.imgPlaceholder}`;
            qDiv.appendChild(imgDiv);
        }

        // Options
        const optionsGrid = document.createElement('div');
        optionsGrid.className = 'options-grid';
        if(item.options[0].text.length > 30) optionsGrid.classList.add('full-width');

        item.options.forEach(opt => {
            const label = document.createElement('label');
            label.className = 'option-label';
            label.id = `opt-${item.id}-${opt.value}`;
            
            const input = document.createElement('input');
            input.type = 'radio';
            input.name = `q${item.id}`;
            input.value = opt.value;
            input.onclick = () => resetFeedback(item.id);

            const span = document.createElement('span');
            span.innerHTML = `<b>${opt.value}.</b> ${opt.text}`;

            label.appendChild(input);
            label.appendChild(span);
            optionsGrid.appendChild(label);
        });
        qDiv.appendChild(optionsGrid);

        // Check Button
        const btn = document.createElement('button');
        btn.className = 'btn-check';
        btn.innerText = 'Check Answer';
        btn.onclick = () => checkQuestion(item.id);
        qDiv.appendChild(btn);

        // Explanation Box
        const exp = document.createElement('div');
        exp.className = 'explanation';
        exp.id = `exp-${item.id}`;
        exp.innerHTML = `<span class="exp-header">üí° Detailed Explanation:</span>${item.explanation}`;
        qDiv.appendChild(exp);

        container.appendChild(qDiv);
    });

    // SCORING LOGIC
    function resetFeedback(qId) {
        // Clear colors when user re-selects
        const labels = document.querySelectorAll(`#q-block-${qId} .option-label`);
        labels.forEach(l => {
            l.classList.remove('correct', 'wrong');
        });
        document.getElementById(`exp-${qId}`).classList.remove('visible');
    }

    function checkQuestion(qId, isSubmitAll = false) {
        const qData = quizData.find(q => q.id === qId);
        const selected = document.querySelector(`input[name="q${qId}"]:checked`);
        const expBox = document.getElementById(`exp-${qId}`);
        const correctVal = qData.options.find(o => o.correct).value;

        // Reset visual state
        document.querySelectorAll(`#q-block-${qId} .option-label`).forEach(l => l.classList.remove('correct', 'wrong', 'missed'));

        let isCorrect = false;

        if (!selected) {
            if (isSubmitAll) {
                // Highlight correct answer as missed
                document.getElementById(`opt-${qId}-${correctVal}`).classList.add('missed');
                expBox.classList.add('visible');
            }
            return false; // Not answered
        }

        const userVal = selected.value;

        if (userVal === correctVal) {
            document.getElementById(`opt-${qId}-${userVal}`).classList.add('correct');
            isCorrect = true;
        } else {
            document.getElementById(`opt-${qId}-${userVal}`).classList.add('wrong');
            document.getElementById(`opt-${qId}-${correctVal}`).classList.add('correct');
        }

        expBox.classList.add('visible');
        return isCorrect;
    }

    function submitAll() {
        let score = 0;
        let answered = 0;

        quizData.forEach(q => {
            const isCorrect = checkQuestion(q.id, true);
            if(document.querySelector(`input[name="q${q.id}"]:checked`)) answered++;
            if(isCorrect) score++;
        });

        // Show Modal
        const modal = document.getElementById('resultModal');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const scoreMessage = document.getElementById('scoreMessage');

        scoreDisplay.innerText = `${score}/${quizData.length}`;
        
        const percentage = (score / quizData.length) * 100;
        if(percentage === 100) scoreMessage.innerText = "Xu·∫•t s·∫Øc! Perfect Score! üèÜ";
        else if(percentage >= 80) scoreMessage.innerText = "Gi·ªèi l·∫Øm! Very Good! üåü";
        else if(percentage >= 50) scoreMessage.innerText = "C·ªë g·∫Øng th√™m nh√©! Keep Trying! üí™";
        else scoreMessage.innerText = "C·∫ßn √¥n t·∫≠p l·∫°i. Review Needed. üìö";

        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

</script>

</body>
</html>