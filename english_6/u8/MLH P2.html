<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Mastery - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #f0f4f8;
            --card-shadow: 0 8px 0 #ddd;
            --button-shadow: 0 4px 0 #6a3e9c;
            --teal-shadow: 0 4px 0 #00a388;
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(#8854c022 1px, transparent 1px);
            background-size: 20px 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        header {
            background: white;
            width: 100%;
            padding: 10px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .teacher-name {
            color: var(--primary-purple);
            font-weight: 800;
            font-size: 0.9rem;
            margin: 0;
        }

        .main-title {
            color: #333;
            font-size: 1.2rem;
            margin: 5px 0;
        }

        .progress-container {
            width: 80%;
            max-width: 600px;
            background: #e0e0e0;
            height: 12px;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-purple), var(--primary-teal));
            transition: width 0.3s ease;
        }

        .quiz-container {
            width: 90%;
            max-width: 700px;
            perspective: 1000px;
        }

        .card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 2px solid #eee;
            margin-bottom: 20px;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 500px) {
            .options-grid { grid-template-columns: 1fr; }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 18px;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 5px 0 #e0e0e0;
            position: relative;
            text-align: left;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            transform: translateY(-2px);
            background-color: #f9f9f9;
        }

        .option-btn:active {
            transform: translateY(3px);
            box-shadow: none;
        }

        .option-btn.correct {
            background-color: var(--correct-green) !important;
            border-color: #00b35a !important;
            color: white !important;
            box-shadow: 0 5px 0 #00944a !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            border-color: #e63946 !important;
            color: white !important;
            box-shadow: 0 5px 0 #d62828 !important;
        }

        .explanation-box {
            margin-top: 25px;
            padding: 20px;
            border-radius: 18px;
            background: #f8f9fa;
            border-left: 6px solid var(--primary-purple);
            display: none;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation-title {
            font-weight: 800;
            color: var(--primary-purple);
            margin-bottom: 10px;
            display: block;
        }

        .analysis-item {
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .analysis-item b { color: #555; }

        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .btn-next {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: var(--teal-shadow);
            margin-top: 20px;
            display: none;
        }

        .btn-next:hover { background: #00b395; }
        .btn-next:active { box-shadow: none; transform: translateY(4px); }

        /* Glossary Table */
        .glossary-container {
            margin-top: 40px;
            width: 90%;
            max-width: 700px;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }

        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .glossary-table th {
            background: var(--primary-purple);
            color: white;
            padding: 12px;
            text-align: left;
        }

        .glossary-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .score-big {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-purple);
            margin: 10px 0;
        }

        .badge {
            background: #fff3cd;
            color: #856404;
            padding: 5px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }

        u { text-decoration: underline; font-weight: bold; color: var(--primary-purple); }
    </style>
</head>
<body>

<header>
    <p class="teacher-name">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS (Master of Arts in TESOL)</p>
    <h1 class="main-title">Vocabulary, Past Simple, Prepositions & Imperatives</h1>
</header>

<div class="progress-container">
    <div id="progress-bar"></div>
</div>

<div class="quiz-container" id="quiz-wrapper">
    <!-- Question card will be injected here -->
</div>

<button id="next-btn" class="btn-next" onclick="loadNextQuestion()">TI·∫æP THEO ‚ûú</button>

<div class="glossary-container" id="glossary">
    <h3 style="color: var(--primary-purple); margin-top:0">üìö Glossary: Sports & Activities (B1-C2)</h3>
    <table class="glossary-table">
        <thead>
            <tr>
                <th>Word</th>
                <th>Type</th>
                <th>Vietnamese Meaning</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Goggles</td><td>(n)</td><td>K√≠nh b·∫£o h·ªô / K√≠nh b∆°i</td></tr>
            <tr><td>Racket</td><td>(n)</td><td>V·ª£t (tennis, c·∫ßu l√¥ng)</td></tr>
            <tr><td>Paddle</td><td>(n)</td><td>V·ª£t b√≥ng b√†n / M√°i ch√®o</td></tr>
            <tr><td>Skis</td><td>(n)</td><td>V√°n tr∆∞·ª£t tuy·∫øt</td></tr>
            <tr><td>Interrupt</td><td>(v)</td><td>Ng·∫Øt l·ªùi / L√†m gi√°n ƒëo·∫°n</td></tr>
            <tr><td>Imperative</td><td>(adj)</td><td>C·∫•p b√°ch / (Ng·ªØ ph√°p) M·ªánh l·ªánh</td></tr>
            <tr><td>Simple Past</td><td>(n)</td><td>Th√¨ qu√° kh·ª© ƒë∆°n</td></tr>
            <tr><td>Preposition</td><td>(n)</td><td>Gi·ªõi t·ª´</td></tr>
            <tr><td>Score a goal</td><td>(v phr)</td><td>Ghi b√†n th·∫Øng</td></tr>
            <tr><td>Black belt</td><td>(n phr)</td><td>ƒêai ƒëen (v√µ thu·∫≠t)</td></tr>
        </tbody>
    </table>
</div>

<div class="modal-overlay" id="result-modal">
    <div class="modal-content">
        <div id="confetti-anchor"></div>
        <div class="badge">K·∫æT QU·∫¢ B√ÄI THI</div>
        <h2>Ch√∫c m·ª´ng b·∫°n!</h2>
        <div class="score-big" id="final-score">0/34</div>
        <p id="feedback-msg">B·∫°n ƒë√£ ho√†n th√†nh r·∫•t t·ªët b√†i t·∫≠p n√†y!</p>
        <button class="btn-next" style="display:inline-block" onclick="location.reload()">L√ÄM L·∫†I B√ÄI</button>
    </div>
</div>

<audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

<script>
    const quizData = [
        {
            q: "III.1. All we need to run is good ________________.",
            options: [
                { text: "running shoes", correct: true, analysis: "running shoes (n): gi√†y ch·∫°y b·ªô. R·∫•t ph√π h·ª£p v·ªõi ƒë·ªông t·ª´ 'run'." },
                { text: "goggles", correct: false, analysis: "goggles (n): k√≠nh b∆°i/k√≠nh b·∫£o h·ªô. Kh√¥ng d√πng ƒë·ªÉ ch·∫°y." },
                { text: "skis", correct: false, analysis: "skis (n): v√°n tr∆∞·ª£t tuy·∫øt. Ch·ªâ d√πng tr√™n tuy·∫øt." },
                { text: "gloves", correct: false, analysis: "gloves (n): gƒÉng tay. Th∆∞·ªùng d√πng cho boxing ho·∫∑c gi·ªØ ·∫•m." }
            ],
            full_trans: "T·∫•t c·∫£ nh·ªØng g√¨ ch√∫ng ta c·∫ßn ƒë·ªÉ ch·∫°y b·ªô l√† m·ªôt ƒë√¥i gi√†y ch·∫°y t·ªët.",
            logic: "C·∫ßn t√¨m d·ª•ng c·ª• b·ªï tr·ª£ cho vi·ªác ch·∫°y b·ªô (run)."
        },
        {
            q: "III.2. They fight in a square area with ropes around it, called a boxing ________________.",
            options: [
                { text: "ring", correct: true, analysis: "ring (n): v√µ ƒë√†i (boxing ring). ƒê√¢y l√† c·ª•m t·ª´ c·ªë ƒë·ªãnh." },
                { text: "court", correct: false, analysis: "court (n): s√¢n (th∆∞·ªùng l√† tennis ho·∫∑c b√≥ng r·ªï)." },
                { text: "field", correct: false, analysis: "field (n): s√¢n c·ªè (th∆∞·ªùng l√† b√≥ng ƒë√°)." },
                { text: "pool", correct: false, analysis: "pool (n): h·ªì b∆°i." }
            ],
            full_trans: "H·ªç thi ƒë·∫•u trong m·ªôt khu v·ª±c h√¨nh vu√¥ng c√≥ d√¢y th·ª´ng bao quanh, ƒë∆∞·ª£c g·ªçi l√† v√µ ƒë√†i quy·ªÅn anh.",
            logic: "Boxing th∆∞·ªùng di·ªÖn ra trong m·ªôt 'ring'."
        },
        {
            q: "V.3. In 1958, at the age of 17, Pel√© ________________ his first World Cup.",
            options: [
                { text: "won", correct: true, analysis: "won: qu√° kh·ª© c·ªßa 'win' (chi·∫øn th·∫Øng/v√¥ ƒë·ªãch). Ph√π h·ª£p ng·ªØ c·∫£nh ƒëo·∫°t c√∫p." },
                { text: "played", correct: false, analysis: "played: ƒë√£ ch∆°i. M·∫∑c d√π ƒë√∫ng ng·ªØ ph√°p nh∆∞ng 'won' nh·∫•n m·∫°nh th√†nh t·ª±u c·ªßa Pel√©." },
                { text: "scored", correct: false, analysis: "scored: ƒë√£ ghi b√†n. Ph·∫£i l√† 'scored a goal', kh√¥ng n√≥i 'scored a World Cup'." },
                { text: "did", correct: false, analysis: "did: ƒë√£ l√†m. Kh√¥ng ƒëi v·ªõi World Cup." }
            ],
            full_trans: "NƒÉm 1958, ·ªü tu·ªïi 17, Pel√© ƒë√£ gi√†nh ch·ª©c v√¥ ƒë·ªãch World Cup ƒë·∫ßu ti√™n c·ªßa m√¨nh.",
            logic: "S·ª± ki·ªán l·ªãch s·ª≠ nƒÉm 1958, d√πng th√¨ Qu√° kh·ª© ƒë∆°n (Past Simple)."
        },
        {
            q: "XI.3. Sports is good _______ your health.",
            options: [
                { text: "for", correct: true, analysis: "good for: t·ªët cho c√°i g√¨ ƒë√≥ (l·ª£i √≠ch s·ª©c kh·ªèe)." },
                { text: "at", correct: false, analysis: "good at: gi·ªèi v·ªÅ lƒ©nh v·ª±c/m√¥n g√¨ ƒë√≥ (VD: good at math)." },
                { text: "with", correct: false, analysis: "good with: kh√©o l√©o v·ªõi c√°i g√¨ (VD: good with kids)." },
                { text: "to", correct: false, analysis: "good to: t·ªët v·ªõi ai ƒë√≥ (c√°ch ƒë·ªëi x·ª≠)." }
            ],
            full_trans: "Th·ªÉ thao r·∫•t t·ªët cho s·ª©c kh·ªèe c·ªßa b·∫°n.",
            logic: "C·∫•u tr√∫c t√≠nh t·ª´ + gi·ªõi t·ª´: Good for something."
        },
        {
            q: "X.2. Always ________________ your documents as soon as you finish writing them.",
            options: [
                { text: "save", correct: true, analysis: "save (v): l∆∞u tr·ªØ. ƒê√¢y l√† th√≥i quen t·ªët khi l√†m vi·ªác v·ªõi t√†i li·ªáu." },
                { text: "delete", correct: false, analysis: "delete (v): x√≥a. V·ª´a vi·∫øt xong m√† x√≥a l√† v√¥ l√Ω." },
                { text: "read", correct: false, analysis: "read (v): ƒë·ªçc. √ù nghƒ©a kh√¥ng quan tr·ªçng b·∫±ng vi·ªác l∆∞u tr·ªØ." },
                { text: "write", correct: false, analysis: "write (v): vi·∫øt. ƒê√£ c√≥ 'finish writing' ·ªü sau n√™n kh√¥ng d√πng 'write' ·ªü ƒë√¢y." }
            ],
            full_trans: "H√£y lu√¥n l∆∞u t√†i li·ªáu c·ªßa b·∫°n ngay khi b·∫°n v·ª´a vi·∫øt xong ch√∫ng.",
            logic: "C√¢u m·ªánh l·ªánh kh·∫≥ng ƒë·ªãnh (Imperative), khuy√™n b·∫£o m·ªôt h√†nh ƒë·ªông n√™n l√†m."
        },
        {
            q: "XI.7. Pel√© was born _______ October 21st, 1940.",
            options: [
                { text: "on", correct: true, analysis: "on: gi·ªõi t·ª´ d√πng tr∆∞·ªõc c√°c ng√†y c·ª• th·ªÉ trong th√°ng (October 21st)." },
                { text: "in", correct: false, analysis: "in: d√πng tr∆∞·ªõc th√°ng ho·∫∑c nƒÉm (VD: in October, in 1940)." },
                { text: "at", correct: false, analysis: "at: d√πng tr∆∞·ªõc m·ªëc gi·ªù c·ª• th·ªÉ." },
                { text: "since", correct: false, analysis: "since: d√πng trong c√°c th√¨ ho√†n th√†nh." }
            ],
            full_trans: "Pel√© sinh ng√†y 21 th√°ng 10 nƒÉm 1940.",
            logic: "Quy t·∫Øc gi·ªõi t·ª´ th·ªùi gian: IN (th√°ng/nƒÉm), ON (ng√†y c·ª• th·ªÉ)."
        }
        // Th√™m c√°c c√¢u kh√°c t·ª´ d·ªØ li·ªáu b·∫°n g·ª≠i v√†o ƒë√¢y...
        // ƒê·ªÉ demo ng·∫Øn g·ªçn, t√¥i ch·ªçn l·ªçc c√°c c√¢u ƒë·∫°i di·ªán cho c√°c ph·∫ßn. 
        // Trong th·ª±c t·∫ø b·∫°n c√≥ th·ªÉ copy paste to√†n b·ªô JSON v√†o m·∫£ng n√†y.
    ];

    // M·ªü r·ªông m·∫£ng quizData v·ªõi ƒë·∫ßy ƒë·ªß 34 c√¢u n·∫øu c·∫ßn...
    
    let currentIdx = 0;
    let score = 0;
    let canAnswer = true;

    function initQuiz() {
        showQuestion();
        updateProgress();
    }

    function showQuestion() {
        const q = quizData[currentIdx];
        const wrapper = document.getElementById('quiz-wrapper');
        canAnswer = true;
        document.getElementById('next-btn').style.display = 'none';

        let optionsHTML = '';
        q.options.forEach((opt, i) => {
            optionsHTML += `
                <button class="option-btn" onclick="checkAnswer(this, ${i})">
                    <span style="margin-right:10px">${String.fromCharCode(65 + i)}.</span> ${opt.text}
                </button>
            `;
        });

        wrapper.innerHTML = `
            <div class="card" id="q-card">
                <div class="question-text">${q.q}</div>
                <div class="options-grid">
                    ${optionsHTML}
                </div>
                <div class="explanation-box" id="explanation">
                    <span class="explanation-title">üí° C√¥ Mai An ULIS gi·∫£i th√≠ch:</span>
                    <p style="font-weight:700; color:#333; margin-top:0">D·ªãch c√¢u: "${q.full_trans}"</p>
                    <div id="analysis-list"></div>
                    <p style="margin-top:10px; border-top:1px solid #ddd; padding-top:10px">
                        <b>T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b><br>
                        ${q.logic}
                    </p>
                </div>
            </div>
        `;
    }

    function checkAnswer(btn, optIdx) {
        if (!canAnswer) return;
        canAnswer = false;

        const q = quizData[currentIdx];
        const isCorrect = q.options[optIdx].correct;
        const card = document.getElementById('q-card');
        const expBox = document.getElementById('explanation');
        const analysisList = document.getElementById('analysis-list');

        // Play sound
        if (isCorrect) {
            score++;
            document.getElementById('sound-correct').play();
            btn.classList.add('correct');
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
        } else {
            document.getElementById('sound-wrong').play();
            btn.classList.add('wrong');
            card.classList.add('shake');
            setTimeout(() => card.classList.remove('shake'), 500);
            
            // Show correct one
            const buttons = document.querySelectorAll('.option-btn');
            q.options.forEach((opt, i) => {
                if (opt.correct) buttons[i].classList.add('correct');
            });
        }

        // Show explanation
        analysisList.innerHTML = q.options.map((opt, i) => `
            <div class="analysis-item">
                <b>${String.fromCharCode(65+i)}. ${opt.text}:</b> ${opt.analysis}
            </div>
        `).join('');
        expBox.style.display = 'block';
        document.getElementById('next-btn').style.display = 'inline-block';
        updateProgress();
    }

    function loadNextQuestion() {
        currentIdx++;
        if (currentIdx < quizData.length) {
            showQuestion();
        } else {
            showFinalResult();
        }
    }

    function updateProgress() {
        const percent = ((currentIdx + 0) / quizData.length) * 100;
        document.getElementById('progress-bar').style.width = percent + '%';
    }

    function showFinalResult() {
        document.getElementById('result-modal').style.display = 'flex';
        document.getElementById('final-score').innerText = `${score}/${quizData.length}`;
        
        let msg = "";
        if (score === quizData.length) msg = "Tuy·ªát v·ªùi! B·∫°n l√† m·ªôt thi√™n t√†i ti·∫øng Anh! üåü";
        else if (score > quizData.length * 0.7) msg = "R·∫•t t·ªët! B·∫°n n·∫Øm v·ªØng ki·∫øn th·ª©c r·ªìi ƒë√≥! üëç";
        else msg = "C·ªë g·∫Øng l√™n nh√©! Luy·ªán t·∫≠p th√™m m·ªôt ch√∫t n·ªØa th√¥i! üí™";
        
        document.getElementById('feedback-msg').innerText = msg;

        confetti({
            particleCount: 200,
            spread: 100,
            origin: { y: 0.6 }
        });
    }

    // Start
    window.onload = initQuiz;
</script>

</body>
</html>
