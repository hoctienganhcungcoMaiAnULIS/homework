<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Challenge - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            /* DYNAMIC THEME: COMMUNITY & NATURE (Based on "Park", "Yoga", "Picnic") */
            --primary-color: #2E7D32; /* Forest Green */
            --secondary-color: #FF8F00; /* Warm Amber/Sun */
            --bg-color: #E8F5E9;
            --card-bg: #ffffff;
            --text-color: #2c3e50;
            --correct-color: #00D26A;
            --wrong-color: #FF4757;
            --shadow: 0 8px 20px rgba(0,0,0,0.1);
            --radius: 16px;
        }

        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            background-color: var(--bg-color);
            /* SVG Background with Emojis: Park, Yoga, Sun */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Cdefs%3E%3CradialGradient id='a' cx='50%25' cy='50%25' r='50%25' fx='50%25' fy='50%25'%3E%3Cstop offset='0%25' stop-color='%23E8F5E9' stop-opacity='0.8'/%3E%3Cstop offset='100%25' stop-color='%23C8E6C9' stop-opacity='1'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23a)'/%3E%3Ctext x='10%25' y='20%25' font-size='60' opacity='0.1'%3Eüå≥%3C/text%3E%3Ctext x='80%25' y='10%25' font-size='60' opacity='0.1'%3Eüßò%3C/text%3E%3Ctext x='20%25' y='80%25' font-size='60' opacity='0.1'%3Eü•™%3C/text%3E%3Ctext x='70%25' y='70%25' font-size='60' opacity='0.1'%3Eüé≠%3C/text%3E%3C/svg%3E");
            color: var(--text-color);
        }

        /* --- HEADER & TIMER --- */
        header {
            background: #ffffff;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            z-index: 100;
            position: relative;
        }

        .teacher-brand {
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        #timer-display {
            font-size: 1.5rem;
            font-weight: 800;
            font-variant-numeric: tabular-nums;
            color: var(--text-color);
        }

        .btn-timer {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 0 #1B5E20;
        }
        .btn-timer:active { transform: translateY(4px); box-shadow: none; }
        .btn-timer.paused { background: var(--secondary-color); box-shadow: 0 4px 0 #E65100; }

        /* --- SPLIT LAYOUT --- */
        .main-container {
            display: flex;
            height: calc(100vh - 60px);
            max-width: 1400px;
            margin: 0 auto;
        }

        .panel {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            /* Scrollbar styling */
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #f0f0f0;
        }
        
        .panel::-webkit-scrollbar { width: 8px; }
        .panel::-webkit-scrollbar-track { background: #f0f0f0; }
        .panel::-webkit-scrollbar-thumb { background-color: var(--primary-color); border-radius: 10px; }

        .left-panel {
            border-right: 2px solid rgba(0,0,0,0.05);
            background: rgba(255, 255, 255, 0.9);
        }

        .right-panel {
            background: transparent;
        }

        /* --- READING CONTENT --- */
        .passage-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .passage-section {
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 5px solid var(--secondary-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .passage-section h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-translate {
            display: block;
            margin-top: 10px;
            font-size: 0.85rem;
            color: var(--secondary-color);
            background: none;
            border: 1px dashed var(--secondary-color);
            padding: 5px 10px;
            border-radius: 8px;
            cursor: pointer;
            width: fit-content;
        }
        .btn-translate:hover { background: #fff3e0; }
        
        .translation-text {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            font-style: italic;
            color: #555;
            border-left: 3px solid #ccc;
        }

        /* --- GLOSSARY --- */
        .glossary-box {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 30px;
            box-shadow: var(--shadow);
            border: 2px solid var(--primary-color);
        }
        .glossary-box h3 { color: var(--primary-color); text-align: center; }
        .glossary-table { width: 100%; border-collapse: collapse; }
        .glossary-table th, .glossary-table td { padding: 10px; text-align: left; border-bottom: 1px solid #eee; }
        .glossary-table th { color: var(--secondary-color); }
        .word-type { font-size: 0.8em; color: #888; font-style: italic; }

        /* --- EXERCISE CARDS --- */
        .question-card {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            position: relative;
            transition: transform 0.3s;
        }
        
        .question-header {
            font-weight: 800;
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
            display: flex;
            justify-content: space-between;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 cols for A-H options */
            gap: 10px;
        }

        .option-btn {
            background: #f1f2f6;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            color: var(--text-color);
            position: relative;
            box-shadow: 0 4px 0 #dcdcdc;
        }

        .option-btn:hover { transform: translateY(-2px); border-color: var(--secondary-color); }
        .option-btn:active { transform: translateY(2px); box-shadow: none; }

        .option-btn.correct {
            background: var(--correct-color);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 4px 0 #008f47;
        }

        .option-btn.wrong {
            background: var(--wrong-color);
            color: white;
            border-color: #ff2e40;
            box-shadow: 0 4px 0 #c41e30;
            animation: shake 0.5s;
        }

        /* --- FEEDBACK ACTIONS --- */
        .feedback-panel {
            display: none; /* Hidden by default */
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px dashed #eee;
            animation: slideDown 0.3s ease-out;
        }

        .feedback-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        .btn-explain { background: #E3F2FD; color: #1976D2; }
        .btn-trans-q { background: #F3E5F5; color: #7B1FA2; }
        .btn-para { background: #FFF3E0; color: #E65100; }

        .action-btn:hover { filter: brightness(0.95); transform: scale(1.02); }

        .detail-box {
            display: none;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
            border-left: 4px solid #ccc;
        }
        
        .detail-box.show { display: block; }
        
        /* Teacher Avatar in Explanation */
        .teacher-note {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }
        .teacher-avatar {
            width: 40px;
            height: 40px;
            background: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        /* --- SCORE MODAL --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .score-card {
            background: white;
            width: 90%;
            max-width: 400px;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .score-circle {
            width: 120px;
            height: 120px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 800;
            margin: 0 auto 20px;
            border: 5px solid #fff;
            box-shadow: 0 0 0 5px var(--primary-color);
        }
        .btn-submit {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--secondary-color);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            border: none;
            font-size: 1.2rem;
            font-weight: 800;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 90;
            transition: all 0.3s;
        }
        .btn-submit:hover { transform: scale(1.05); }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-container { flex-direction: column; height: auto; }
            .panel { height: auto; overflow: visible; }
            .options-grid { grid-template-columns: repeat(4, 1fr); }
            .btn-submit { bottom: 10px; right: 10px; padding: 10px 20px; font-size: 1rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="teacher-brand"><i class="fas fa-graduation-cap"></i> Ms. Mai An ULIS</div>
        <div class="timer-container">
            <i class="fas fa-clock" style="color: var(--secondary-color)"></i>
            <div id="timer-display">10:00</div>
            <button class="btn-timer" id="timer-btn" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
        </div>
    </header>

    <div class="main-container">
        <div class="panel left-panel">
            <h2 class="passage-title">Local Activities</h2>
            <p style="text-align: center; color: #666; margin-bottom: 20px;"><em>The people (1-5) below all want to do a local activity. There are eight activities (A-H). Decide which activity would be the most suitable for the people below.</em></p>

            <div id="reading-content">
                <div class="passage-section">
                    <h3>A. Friends of Hamley Park</h3>
                    <p>Come along to ‚ÄòFriends of Hamley Park‚Äô for our monthly litter pick. Join our friendly team of adults and children every Sunday to help us keep our lovely local park tidy and something to be proud of. We provide all the tools and equipment you‚Äôll need. Just come along on the day and we‚Äôll find something for you to do.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-a')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-a" class="translation-text">H√£y ƒë·∫øn v·ªõi 'Nh·ªØng ng∆∞·ªùi b·∫°n c·ªßa C√¥ng vi√™n Hamley' trong bu·ªïi nh·∫∑t r√°c h√†ng th√°ng c·ªßa ch√∫ng t√¥i. H√£y tham gia ƒë·ªôi ng≈© th√¢n thi·ªán g·ªìm c·∫£ ng∆∞·ªùi l·ªõn v√† tr·∫ª em v√†o m·ªói Ch·ªß nh·∫≠t ƒë·ªÉ gi√∫p gi·ªØ g√¨n c√¥ng vi√™n ƒë·ªãa ph∆∞∆°ng xinh ƒë·∫πp c·ªßa ch√∫ng ta lu√¥n s·∫°ch s·∫Ω v√† tr·ªü th√†nh ni·ªÅm t·ª± h√†o. Ch√∫ng t√¥i cung c·∫•p t·∫•t c·∫£ c√°c c√¥ng c·ª• v√† thi·∫øt b·ªã b·∫°n c·∫ßn. Ch·ªâ c·∫ßn ƒë·∫øn v√†o ng√†y ƒë√≥ v√† ch√∫ng t√¥i s·∫Ω s·∫Øp x·∫øp vi·ªác cho b·∫°n l√†m.</div>
                </div>

                <div class="passage-section">
                    <h3>B. Yoga sessions</h3>
                    <p>Yoga sessions with Petra aimed at your level. I know how important it can be for you mums to get out of the house and do some exercise. My fun weekly ‚ÄòMum and Child‚Äô yoga classes start on Monday 18 June. Buy five sessions and get one free.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-b')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-b" class="translation-text">C√°c bu·ªïi t·∫≠p Yoga v·ªõi Petra ph√π h·ª£p v·ªõi tr√¨nh ƒë·ªô c·ªßa b·∫°n. T√¥i bi·∫øt vi·ªác ra kh·ªèi nh√† v√† t·∫≠p th·ªÉ d·ª•c quan tr·ªçng nh∆∞ th·∫ø n√†o ƒë·ªëi v·ªõi c√°c b√† m·∫π. C√°c l·ªõp h·ªçc Yoga 'M·∫π v√† B√©' vui nh·ªôn h√†ng tu·∫ßn c·ªßa t√¥i b·∫Øt ƒë·∫ßu v√†o th·ª© Hai, ng√†y 18 th√°ng 6. Mua nƒÉm bu·ªïi v√† ƒë∆∞·ª£c t·∫∑ng m·ªôt bu·ªïi mi·ªÖn ph√≠.</div>
                </div>

                <div class="passage-section">
                    <h3>C. Broadchester Park</h3>
                    <p>You are invited to come along for our weekly picnic in Broadchester Park. Open to all, young and old, it‚Äôs held every Tuesday throughout the summer at 12.00. Please note there will be a charge for food which will be supplied by the caf√©.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-c')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-c" class="translation-text">B·∫°n ƒë∆∞·ª£c m·ªùi ƒë·∫øn tham gia bu·ªïi d√£ ngo·∫°i h√†ng tu·∫ßn c·ªßa ch√∫ng t√¥i t·∫°i C√¥ng vi√™n Broadchester. M·ªü c·ª≠a cho t·∫•t c·∫£ m·ªçi ng∆∞·ªùi, gi√† tr·∫ª l·ªõn b√©, s·ª± ki·ªán ƒë∆∞·ª£c t·ªï ch·ª©c v√†o m·ªói th·ª© Ba trong su·ªët m√πa h√® l√∫c 12:00. Xin l∆∞u √Ω s·∫Ω c√≥ t√≠nh ph√≠ cho ƒë·ªì ƒÉn do qu√°n c√† ph√™ cung c·∫•p.</div>
                </div>

                <div class="passage-section">
                    <h3>D. Poetry competition</h3>
                    <p>Come and see the winners of this poetry competition. The theme was the natural world and the poets will be performing their work in the beautiful surroundings of Kimberley Park. Entry costs ¬£2. Children under 11 are free.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-d')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-d" class="translation-text">H√£y ƒë·∫øn v√† xem nh·ªØng ng∆∞·ªùi chi·∫øn th·∫Øng cu·ªôc thi th∆° n√†y. Ch·ªß ƒë·ªÅ l√† th·∫ø gi·ªõi t·ª± nhi√™n v√† c√°c nh√† th∆° s·∫Ω tr√¨nh di·ªÖn t√°c ph·∫©m c·ªßa h·ªç trong khung c·∫£nh tuy·ªát ƒë·∫πp c·ªßa C√¥ng vi√™n Kimberley. Ph√≠ v√†o c·ª≠a l√† ¬£2. Tr·∫ª em d∆∞·ªõi 11 tu·ªïi ƒë∆∞·ª£c mi·ªÖn ph√≠.</div>
                </div>

                <div class="passage-section">
                    <h3>E. Storytelling</h3>
                    <p>Storytelling has become popular lately, especially for those who want to tell their story on stage in front of a live audience. Join our one-day event on Wednesday ‚Äì we‚Äôll be looking at how to feel confident and keep your audience interested.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-e')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-e" class="translation-text">K·ªÉ chuy·ªán g·∫ßn ƒë√¢y ƒë√£ tr·ªü n√™n ph·ªï bi·∫øn, ƒë·∫∑c bi·ªát l√† ƒë·ªëi v·ªõi nh·ªØng ng∆∞·ªùi mu·ªën k·ªÉ c√¢u chuy·ªán c·ªßa m√¨nh tr√™n s√¢n kh·∫•u tr∆∞·ªõc kh√°n gi·∫£ tr·ª±c ti·∫øp. H√£y tham gia s·ª± ki·ªán m·ªôt ng√†y c·ªßa ch√∫ng t√¥i v√†o th·ª© T∆∞ ‚Äì ch√∫ng ta s·∫Ω t√¨m hi·ªÉu c√°ch ƒë·ªÉ c·∫£m th·∫•y t·ª± tin v√† gi·ªØ cho kh√°n gi·∫£ lu√¥n h·ª©ng th√∫.</div>
                </div>

                <div class="passage-section">
                    <h3>F. Time to relax</h3>
                    <p>A new six-week yoga course for beginners. Help yourself become more focused, reduce your stress levels, sleep better and improve your mental health. I will be running these courses in the local community centre on Wednesday and Thursday mornings from 11.00 till 12.00. Childcare is available for babies and young children.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-f')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-f" class="translation-text">M·ªôt kh√≥a h·ªçc yoga m·ªõi k√©o d√†i s√°u tu·∫ßn d√†nh cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu. Gi√∫p b·∫£n th√¢n t·∫≠p trung h∆°n, gi·∫£m m·ª©c ƒë·ªô cƒÉng th·∫≥ng, ng·ªß ngon h∆°n v√† c·∫£i thi·ªán s·ª©c kh·ªèe tinh th·∫ßn. T√¥i s·∫Ω t·ªï ch·ª©c c√°c kh√≥a h·ªçc n√†y t·∫°i trung t√¢m c·ªông ƒë·ªìng ƒë·ªãa ph∆∞∆°ng v√†o s√°ng th·ª© T∆∞ v√† th·ª© NƒÉm t·ª´ 11:00 ƒë·∫øn 12:00. C√≥ d·ªãch v·ª• tr√¥ng tr·∫ª cho tr·∫ª s∆° sinh v√† tr·∫ª nh·ªè.</div>
                </div>

                <div class="passage-section">
                    <h3>G. The community caf√©</h3>
                    <p>Our community caf√© is looking for young volunteer waiters and waitresses to help us throughout the summer period. You‚Äôll learn skills that will be useful when you start your job search. We‚Äôre looking for anyone who is at least 18 and would like you to be available for at least two days per week.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-g')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-g" class="translation-text">Qu√°n c√† ph√™ c·ªông ƒë·ªìng c·ªßa ch√∫ng t√¥i ƒëang t√¨m ki·∫øm c√°c nam n·ªØ ph·ª•c v·ª• t√¨nh nguy·ªán tr·∫ª tu·ªïi ƒë·ªÉ gi√∫p ƒë·ª° ch√∫ng t√¥i trong su·ªët th·ªùi gian h√®. B·∫°n s·∫Ω h·ªçc ƒë∆∞·ª£c c√°c k·ªπ nƒÉng h·ªØu √≠ch khi b·∫Øt ƒë·∫ßu t√¨m ki·∫øm vi·ªác l√†m. Ch√∫ng t√¥i ƒëang t√¨m ki·∫øm b·∫•t k·ª≥ ai √≠t nh·∫•t 18 tu·ªïi v√† mong mu·ªën b·∫°n c√≥ th·ªÉ l√†m vi·ªác √≠t nh·∫•t hai ng√†y m·ªói tu·∫ßn.</div>
                </div>

                <div class="passage-section">
                    <h3>H. Creswell Youth Centre</h3>
                    <p>Are you interested in developing your acting skills? Creswell Youth Centre is offering young people aged from 7 to 19 the chance to join us for our next show. No experience is required as we can offer a role to all abilities. You will need to be available at weekends throughout the summer.</p>
                    <button class="btn-translate" onclick="toggleTrans('trans-h')"><i class="fas fa-language"></i> B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <div id="trans-h" class="translation-text">B·∫°n c√≥ quan t√¢m ƒë·∫øn vi·ªác ph√°t tri·ªÉn k·ªπ nƒÉng di·ªÖn xu·∫•t c·ªßa m√¨nh kh√¥ng? Trung t√¢m Thanh thi·∫øu ni√™n Creswell ƒëang mang ƒë·∫øn cho c√°c b·∫°n tr·∫ª t·ª´ 7 ƒë·∫øn 19 tu·ªïi c∆° h·ªôi tham gia ch∆∞∆°ng tr√¨nh ti·∫øp theo c·ªßa ch√∫ng t√¥i. Kh√¥ng y√™u c·∫ßu kinh nghi·ªám v√¨ ch√∫ng t√¥i c√≥ th·ªÉ cung c·∫•p vai di·ªÖn cho m·ªçi kh·∫£ nƒÉng. B·∫°n s·∫Ω c·∫ßn ph·∫£i r·∫£nh v√†o c√°c ng√†y cu·ªëi tu·∫ßn trong su·ªët m√πa h√®.</div>
                </div>
            </div>

            <div class="glossary-box">
                <h3><i class="fas fa-book"></i> VOCABULARY HIGHLIGHTS</h3>
                <table class="glossary-table">
                    <thead>
                        <tr>
                            <th>T·ª´ v·ª±ng</th>
                            <th>Lo·∫°i t·ª´ & Nghƒ©a</th>
                        </tr>
                    </thead>
                    <tbody id="glossary-body">
                        </tbody>
                </table>
            </div>
        </div>

        <div class="panel right-panel" id="exercise-container">
            </div>
    </div>

    <button class="btn-submit" onclick="submitTest()">N·ªòP B√ÄI <i class="fas fa-paper-plane"></i></button>

    <div class="modal-overlay" id="score-modal">
        <div class="score-card">
            <div class="score-circle" id="final-score">0/5</div>
            <h2 id="score-title" style="color: var(--secondary-color)"></h2>
            <p id="score-message"></p>
            <button class="btn-timer" onclick="closeModal()" style="margin-top:20px">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

<script>
    // --- DATA ---
    const vocabulary = [
        { word: "Keen to", type: "phrasal verb", meaning: "R·∫•t th√≠ch, h√†o h·ª©ng l√†m g√¨" },
        { word: "Perform", type: "verb", meaning: "Bi·ªÉu di·ªÖn, tr√¨nh di·ªÖn" },
        { word: "Voluntary", type: "adj", meaning: "T√¨nh nguy·ªán, t·ª± nguy·ªán" },
        { word: "Bargain", type: "noun", meaning: "M√≥n h·ªùi (mua gi√° r·∫ª)" },
        { word: "Supply", type: "verb", meaning: "Cung c·∫•p" },
        { word: "Surroundings", type: "noun", meaning: "M√¥i tr∆∞·ªùng xung quanh" },
        { word: "Audience", type: "noun", meaning: "Kh√°n gi·∫£" },
        { word: "Focused", type: "adj", meaning: "T·∫≠p trung" },
        { word: "Community", type: "noun", meaning: "C·ªông ƒë·ªìng" },
        { word: "Available", type: "adj", meaning: "C√≥ s·∫µn, r·∫£nh r·ªói" }
    ];

    const questions = [
        {
            id: 1,
            text: "Susie has a teenage son who is very keen to get into acting and learning how best to perform on stage. Because of other activities he cannot do Saturdays or Sundays.",
            correct: "E",
            translation: "Susie c√≥ m·ªôt c·∫≠u con trai tu·ªïi teen r·∫•t th√≠ch di·ªÖn xu·∫•t v√† mu·ªën h·ªçc c√°ch bi·ªÉu di·ªÖn t·ªët nh·∫•t tr√™n s√¢n kh·∫•u. Do c√°c ho·∫°t ƒë·ªông kh√°c, c·∫≠u ·∫•y kh√¥ng th·ªÉ tham gia v√†o th·ª© B·∫£y ho·∫∑c Ch·ªß Nh·∫≠t.",
            explanation: "C√¥ Mai An gi·∫£i th√≠ch n√®: <br>1. Susie's son th√≠ch 'acting' (di·ªÖn xu·∫•t) v√† 'perform on stage' (bi·ªÉu di·ªÖn s√¢n kh·∫•u). <br>2. C·∫≠u ·∫•y b·∫≠n T7, CN ('cannot do Saturdays or Sundays'). <br>-> Nh√¨n ƒë√°p √°n E: 'tell their story on stage' (k·ªÉ chuy·ªán tr√™n s√¢n kh·∫•u) v√† di·ªÖn ra v√†o 'Wednesday' (th·ª© T∆∞ - kh√¥ng ph·∫£i cu·ªëi tu·∫ßn). <br>-> Lo·∫°i H v√¨ d√π c√≥ 'acting' nh∆∞ng y√™u c·∫ßu 'weekends' (cu·ªëi tu·∫ßn).",
            paraphrase: "Keen to get into acting ‚âà tell their story on stage; Cannot do Sat/Sun ‚âà Wednesday."
        },
        {
            id: 2,
            text: "Gareth is 21 and on summer vacation before going back to university. He is looking for voluntary work that will help him gain experience in working with customers.",
            correct: "G",
            translation: "Gareth 21 tu·ªïi v√† ƒëang trong k·ª≥ ngh·ªâ h√® tr∆∞·ªõc khi quay l·∫°i ƒë·∫°i h·ªçc. C·∫≠u ·∫•y ƒëang t√¨m ki·∫øm c√¥ng vi·ªác t√¨nh nguy·ªán gi√∫p c·∫≠u ·∫•y t√≠ch l≈©y kinh nghi·ªám l√†m vi·ªác v·ªõi kh√°ch h√†ng.",
            explanation: "T·ª´ kh√≥a quan tr·ªçng: '21 years old' (tr√™n 18), 'voluntary work' (vi·ªác t√¨nh nguy·ªán), 'experience working with customers' (kinh nghi·ªám v·ªõi kh√°ch h√†ng). <br>-> ƒê√°p √°n G ph√π h·ª£p nh·∫•t: 'volunteer waiters' (ph·ª•c v·ª• t√¨nh nguy·ªán), 'at least 18' (√≠t nh·∫•t 18 tu·ªïi), 'useful when you start your job search'.",
            paraphrase: "Voluntary work ‚âà volunteer waiters; Gain experience ‚âà learn skills useful for job search."
        },
        {
            id: 3,
            text: "Marcia would like to take her children to the park one day next week. She would like to show them the importance of doing something for local people.",
            correct: "A",
            translation: "Marcia mu·ªën ƒë∆∞a c√°c con ƒë·∫øn c√¥ng vi√™n v√†o m·ªôt ng√†y trong tu·∫ßn t·ªõi. C√¥ ·∫•y mu·ªën ch·ªâ cho ch√∫ng th·∫•y t·∫ßm quan tr·ªçng c·ªßa vi·ªác l√†m ƒëi·ªÅu g√¨ ƒë√≥ cho ng∆∞·ªùi d√¢n ƒë·ªãa ph∆∞∆°ng.",
            explanation: "Marcia mu·ªën ƒëi 'park' (c√¥ng vi√™n) v·ªõi 'children' (c√°c con) v√† l√†m g√¨ ƒë√≥ cho 'local people' (ng∆∞·ªùi d√¢n). <br>-> ƒê√°p √°n A: 'Friends of Hamley Park', 'litter pick' (nh·∫∑t r√°c - l√†m vi·ªác t·ªët), 'adults and children' (ng∆∞·ªùi l·ªõn v√† tr·∫ª em). ƒê√¢y l√† ho·∫°t ƒë·ªông c·ªông ƒë·ªìng √Ω nghƒ©a.",
            paraphrase: "Take her children ‚âà adults and children; Doing something for local people ‚âà keep our lovely local park tidy."
        },
        {
            id: 4,
            text: "Ella is a new mum with a three-month-old baby and is looking for exercise to help her relax. She is free on Monday and Tuesday and loves getting a bargain!",
            correct: "B",
            translation: "Ella l√† m·ªôt b√† m·∫π m·ªõi sinh v·ªõi em b√© 3 th√°ng tu·ªïi v√† ƒëang t√¨m b√†i t·∫≠p gi√∫p th∆∞ gi√£n. C√¥ ·∫•y r·∫£nh v√†o th·ª© Hai, th·ª© Ba v√† th√≠ch mua ƒë∆∞·ª£c m√≥n h·ªùi!",
            explanation: "Ella l√† 'new mum' (m·∫π m·ªõi), c√≥ 'baby' (em b√©), mu·ªën 'exercise' (t·∫≠p th·ªÉ d·ª•c), r·∫£nh 'Monday/Tuesday', th√≠ch 'bargain' (gi√° r·∫ª/khuy·∫øn m√£i). <br>-> ƒê√°p √°n B: 'Mum and Child yoga', 'start on Monday', 'Buy five get one free' (mua 5 t·∫∑ng 1 - ƒë√¢y ch√≠nh l√† bargain).",
            paraphrase: "New mum with baby ‚âà Mum and Child; Exercise ‚âà Yoga; Bargain ‚âà Buy five get one free."
        },
        {
            id: 5,
            text: "Jacob is looking for somewhere to take his son for something to eat at lunchtime any day this week. He would like to go somewhere that is outside to get some fresh air.",
            correct: "C",
            translation: "Jacob ƒëang t√¨m n∆°i ƒë·ªÉ ƒë∆∞a con trai ƒëi ƒÉn tr∆∞a v√†o b·∫•t k·ª≥ ng√†y n√†o trong tu·∫ßn n√†y. Anh ·∫•y mu·ªën ƒëi ƒë√¢u ƒë√≥ ·ªü ngo√†i tr·ªùi ƒë·ªÉ h√≠t th·ªü kh√¥ng kh√≠ trong l√†nh.",
            explanation: "Jacob ƒëi v·ªõi 'son' (con trai), mu·ªën 'eat at lunchtime' (ƒÉn tr∆∞a), 'outside' (ngo√†i tr·ªùi). <br>-> ƒê√°p √°n C: 'picnic' (d√£ ngo·∫°i - ƒÉn ngo√†i tr·ªùi), '12.00' (gi·ªù tr∆∞a), 'food supplied by the caf√©' (c√≥ ƒë·ªì ƒÉn).",
            paraphrase: "Eat at lunchtime ‚âà picnic at 12.00; Outside/Fresh air ‚âà Park/Picnic."
        }
    ];

    const options = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];
    let userAnswers = {};
    let score = 0;
    
    // --- AUDIO CONTEXT FOR SOUNDS ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            // Ding sound (High pitch sine wave fade out)
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(800, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.5);
            
            // Confetti
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#00D26A', '#FF9800', '#2E7D32']
            });
        } else {
            // Wrong sound (Low pitch sawtooth shake)
            oscillator.type = 'sawtooth';
            oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
            oscillator.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.3);
        }
    }

    // --- INITIALIZATION ---
    window.onload = function() {
        renderGlossary();
        renderExercises();
    };

    function renderGlossary() {
        const tbody = document.getElementById('glossary-body');
        vocabulary.forEach(item => {
            const row = `<tr>
                <td style="font-weight:700; color:var(--text-color)">${item.word}</td>
                <td>
                    <span class="word-type">(${item.type})</span> 
                    ${item.meaning}
                </td>
            </tr>`;
            tbody.innerHTML += row;
        });
    }

    function renderExercises() {
        const container = document.getElementById('exercise-container');
        questions.forEach((q, index) => {
            let optionButtons = '';
            options.forEach(opt => {
                optionButtons += `<button class="option-btn" id="btn-${q.id}-${opt}" onclick="checkAnswer(${q.id}, '${opt}', '${q.correct}')">${opt}</button>`;
            });

            const html = `
            <div class="question-card" id="card-${q.id}">
                <div class="question-header">
                    <span>Question ${q.id}</span>
                    <span id="status-${q.id}"></span>
                </div>
                <div class="question-text">${q.text}</div>
                <div class="options-grid">
                    ${optionButtons}
                </div>

                <div class="feedback-panel" id="feedback-${q.id}">
                    <div class="feedback-controls">
                        <button class="action-btn btn-explain" onclick="toggleDetail('exp-${q.id}')">
                            <i class="fas fa-chalkboard-teacher"></i> Gi·∫£i th√≠ch
                        </button>
                        <button class="action-btn btn-trans-q" onclick="toggleDetail('transq-${q.id}')">
                            <i class="fas fa-language"></i> D·ªãch c√¢u h·ªèi
                        </button>
                        <button class="action-btn btn-para" onclick="toggleDetail('para-${q.id}')">
                            <i class="fas fa-exchange-alt"></i> Paraphrase
                        </button>
                    </div>

                    <div id="exp-${q.id}" class="detail-box">
                        <div class="teacher-note">
                            <div class="teacher-avatar">üë©‚Äçüè´</div>
                            <div><strong>Ms. Mai An:</strong> ${q.explanation}</div>
                        </div>
                    </div>
                    <div id="transq-${q.id}" class="detail-box">
                        <strong>D·ªãch nghƒ©a:</strong> ${q.translation}
                    </div>
                    <div id="para-${q.id}" class="detail-box">
                        <strong>T·ª´ v·ª±ng t∆∞∆°ng ƒë∆∞∆°ng:</strong><br> ${q.paraphrase}
                    </div>
                </div>
            </div>`;
            container.innerHTML += html;
        });
    }

    // --- INTERACTION LOGIC ---
    function checkAnswer(qId, selectedOpt, correctOpt) {
        // Prevent re-answering if already correct (optional, but good for testing)
        // For this UI, we allow changing answers unless submitted, BUT per request "Instant feedback".
        // Let's lock the question once answered correctly to give that "Game" feel.
        
        const card = document.getElementById(`card-${qId}`);
        const feedbackPanel = document.getElementById(`feedback-${qId}`);
        const allBtns = card.querySelectorAll('.option-btn');
        
        // Reset styles for this card
        allBtns.forEach(btn => {
            btn.classList.remove('correct', 'wrong');
        });

        const selectedBtn = document.getElementById(`btn-${qId}-${selectedOpt}`);

        if (selectedOpt === correctOpt) {
            selectedBtn.classList.add('correct');
            playSound('correct');
            userAnswers[qId] = true; // Mark correct
            feedbackPanel.style.display = "block"; // Show explanations immediately
        } else {
            selectedBtn.classList.add('wrong');
            playSound('wrong');
            userAnswers[qId] = false; // Mark wrong
            // Optional: Show correct answer immediately or wait? 
            // Request says "Khi hs b·∫•m sai th√¨ ngay l·∫≠p t·ª©c hi·ªán lu√¥n ƒë√°p √°n ƒë√∫ng"
            const correctBtn = document.getElementById(`btn-${qId}-${correctOpt}`);
            correctBtn.classList.add('correct'); // Show the right one
            feedbackPanel.style.display = "block";
        }
    }

    function toggleDetail(id) {
        const el = document.getElementById(id);
        if (el.style.display === "block") {
            el.style.display = "none";
        } else {
            // Close others in same group (optional UX improvement)
            el.parentElement.querySelectorAll('.detail-box').forEach(box => box.style.display = 'none');
            el.style.display = "block";
        }
    }

    function toggleTrans(id) {
        const el = document.getElementById(id);
        el.style.display = el.style.display === "block" ? "none" : "block";
    }

    // --- TIMER LOGIC ---
    let timeLeft = 600; // 10 minutes in seconds
    let timerId = null;
    let isPaused = true;

    function toggleTimer() {
        const btn = document.getElementById('timer-btn');
        if (isPaused) {
            isPaused = false;
            btn.textContent = "T·∫†M D·ª™NG";
            btn.classList.remove('paused');
            timerId = setInterval(updateTimer, 1000);
        } else {
            isPaused = true;
            btn.textContent = "TI·∫æP T·ª§C";
            btn.classList.add('paused');
            clearInterval(timerId);
        }
    }

    function updateTimer() {
        if (timeLeft <= 0) {
            clearInterval(timerId);
            alert("‚è∞ ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
            return;
        }
        timeLeft--;
        const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
        const s = (timeLeft % 60).toString().padStart(2, '0');
        document.getElementById('timer-display').textContent = `${m}:${s}`;
    }

    // --- SUBMIT & SCORE ---
    function submitTest() {
        // Calculate score based on userAnswers object
        let correctCount = 0;
        // Check actually clicked answers.
        // Since we mark userAnswers[id] = true/false on click
        for (let i = 1; i <= 5; i++) {
            if (userAnswers[i] === true) correctCount++;
        }

        const modal = document.getElementById('score-modal');
        const scoreCircle = document.getElementById('final-score');
        const title = document.getElementById('score-title');
        const msg = document.getElementById('score-message');

        modal.style.display = "flex";
        scoreCircle.textContent = `${correctCount}/5`;

        if (correctCount === 5) {
            title.textContent = "XU·∫§T S·∫ÆC! THI√äN T√ÄI! üåü";
            msg.textContent = "C√¥ Mai An r·∫•t t·ª± h√†o v·ªÅ em! Kh√¥ng sai c√¢u n√†o c·∫£!";
            playSound('correct'); // Extra confetti
        } else if (correctCount >= 3) {
            title.textContent = "L√ÄM T·ªêT L·∫ÆM! üëç";
            msg.textContent = "Em ƒë√£ n·∫Øm ƒë∆∞·ª£c √Ω ch√≠nh r·ªìi ƒë√≥. C·ªë g·∫Øng xem l·∫°i c√°c l·ªói sai ƒë·ªÉ l·∫ßn sau 5/5 nh√©!";
        } else {
            title.textContent = "C·ªê L√äN NH√â! üí™";
            msg.textContent = "B√†i n√†y h∆°i kh√≥ m·ªôt ch√∫t ƒë√∫ng kh√¥ng? H√£y ƒë·ªçc k·ªπ ph·∫ßn gi·∫£i th√≠ch c·ªßa c√¥ ƒë·ªÉ hi·ªÉu r√µ h∆°n nha.";
        }
    }

    function closeModal() {
        document.getElementById('score-modal').style.display = "none";
    }

</script>
</body>
</html>