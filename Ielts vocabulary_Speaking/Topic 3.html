<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra: Healthy Lifestyle & Cooking - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            /* Dynamic Theme Colors: Cooking/Health */
            --primary-color: #FF8C00; /* Dark Orange - K√≠ch th√≠ch v·ªã gi√°c */
            --secondary-color: #4CAF50; /* Green - S·ª©c kh·ªèe/Rau c·ªß */
            --bg-gradient-start: #FFF3E0;
            --bg-gradient-end: #E8F5E9;
            --text-color: #2D3436;
            --correct-color: #00D26A;
            --wrong-color: #FF4757;
            --font-main: 'Nunito', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-main);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-gradient-start);
        }

        /* SVG Background Pattern using Data URI */
        .bg-pattern {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            /* SVG with Emojis: Pan, Carrot, Salad */
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='30' font-size='20'%3Eüç≥%3C/text%3E%3Ctext x='60' y='70' font-size='20'%3Eü•ï%3C/text%3E%3Ctext x='80' y='20' font-size='20'%3Eü•ó%3C/text%3E%3C/svg%3E");
            background-size: 150px 150px;
            opacity: 0.1;
        }

        .bg-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(circle at center, transparent 0%, var(--bg-gradient-start) 100%);
        }

        /* Header */
        header {
            background: white;
            padding: 10px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            height: 60px;
            border-bottom: 3px solid var(--primary-color);
        }

        .teacher-name {
            font-size: 0.9rem;
            color: #636e72;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-container {
            background: var(--primary-color);
            color: white;
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 800;
            font-size: 1.2rem;
            box-shadow: 0 4px 0 #E65100;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .timer-container:active { transform: translateY(2px); box-shadow: 0 2px 0 #E65100; }

        /* Main Split Layout */
        .container {
            display: flex;
            flex: 1;
            height: calc(100vh - 60px);
            overflow: hidden;
        }

        /* Left Panel: Reading */
        .reading-panel {
            width: 50%;
            padding: 30px;
            overflow-y: auto;
            border-right: 2px dashed rgba(0,0,0,0.1);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
        }

        .reading-title {
            font-family: 'Quicksand', sans-serif;
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 1px 1px 0px rgba(0,0,0,0.1);
        }

        .paragraph {
            margin-bottom: 25px;
            line-height: 1.8;
            font-size: 1.1rem;
            text-align: justify;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            border-left: 5px solid var(--secondary-color);
        }

        .gap-marker {
            display: inline-block;
            background: #eee;
            color: #555;
            padding: 2px 8px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 0.9rem;
            margin: 0 2px;
            border: 1px dashed #bbb;
        }

        .btn-translate {
            background: #E0F2F1;
            color: #00695C;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }
        .btn-translate:hover { background: #B2DFDB; }

        .translation-text {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: #F1F8E9;
            border-radius: 10px;
            color: #33691E;
            font-size: 1rem;
            font-style: italic;
            border-left: 3px solid #7CB342;
        }

        /* Glossary */
        .glossary-box {
            margin-top: 30px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .glossary-title { color: var(--primary-color); margin-bottom: 15px; text-align: center; }
        .glossary-table { width: 100%; border-collapse: collapse; }
        .glossary-table th, .glossary-table td { padding: 10px; text-align: left; border-bottom: 1px solid #eee; }
        .glossary-table th { color: var(--secondary-color); }
        .word-type { font-size: 0.8rem; color: #888; font-style: italic; }

        /* Right Panel: Exercises */
        .exercise-panel {
            width: 50%;
            padding: 30px;
            overflow-y: auto;
            background: #FAFAFA;
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }
        .question-card:hover { transform: translateY(-5px); }

        .q-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: #888;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .q-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #EEE;
            padding: 15px;
            border-radius: 15px;
            font-family: var(--font-main);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #DDD;
            text-align: left;
            position: relative;
        }

        .option-btn:hover {
            transform: scale(1.02);
            border-color: var(--primary-color);
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #DDD;
        }

        /* States */
        .option-btn.correct {
            background: var(--correct-color);
            color: white;
            border-color: #00B85C;
            box-shadow: 0 4px 0 #00B85C;
        }
        .option-btn.wrong {
            background: var(--wrong-color);
            color: white;
            border-color: #D32F2F;
            box-shadow: 0 4px 0 #D32F2F;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* Explanation Box */
        .explanation {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #E3F2FD;
            border-radius: 12px;
            border: 1px solid #BBDEFB;
        }
        .exp-title { font-weight: 800; color: #1565C0; margin-bottom: 5px; display: block; }
        .exp-detail { font-size: 0.95rem; line-height: 1.5; color: #0D47A1; }
        .exp-vocab { margin-top: 8px; font-size: 0.9rem; color: #555; border-top: 1px dashed #90CAF9; padding-top: 5px; }

        /* Submit Button */
        .submit-section {
            text-align: center;
            padding: 20px;
        }
        .btn-submit {
            background: linear-gradient(45deg, var(--primary-color), #FF6F00);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: 800;
            box-shadow: 0 6px 0 #E65100, 0 10px 20px rgba(255, 140, 0, 0.4);
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-submit:hover { transform: translateY(-3px); box-shadow: 0 8px 0 #E65100, 0 15px 25px rgba(255, 140, 0, 0.5); }
        .btn-submit:active { transform: translateY(4px); box-shadow: 0 2px 0 #E65100; }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 5px solid var(--primary-color);
        }
        @keyframes popIn { from {transform: scale(0.5); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        
        .score-display { font-size: 4rem; font-weight: 900; color: var(--secondary-color); margin: 20px 0; }
        .feedback-text { font-size: 1.2rem; margin-bottom: 20px; color: #555; }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container { flex-direction: column; overflow-y: auto; }
            .reading-panel, .exercise-panel { width: 100%; height: auto; overflow: visible; }
            .options-grid { grid-template-columns: 1fr; }
            header { flex-direction: column; height: auto; gap: 10px; }
        }
    </style>
</head>
<body>

    <div class="bg-pattern"></div>
    <div class="bg-overlay"></div>

    <header>
        <div class="teacher-name">Gi√°o vi√™n: Ms Mai An ULIS</div>
        <div class="timer-container" id="timer" onclick="toggleTimer()">10:00</div>
    </header>

    <div class="container">
        <div class="reading-panel" id="reading-content">
            <h1 class="reading-title">Cooking a Special Meal</h1>
            </div>

        <div class="exercise-panel">
            <div id="quiz-container">
                </div>
            
            <div class="submit-section">
                <button class="btn-submit" onclick="finishTest()">N·ªòP B√ÄI</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="resultModal">
        <div class="modal-content">
            <h2>K·∫æT QU·∫¢ B√ÄI L√ÄM</h2>
            <div class="score-display" id="finalScore">0/42</div>
            <p class="feedback-text" id="feedbackMsg">C·ªë l√™n nh√©!</p>
            <button class="btn-submit" onclick="closeModal()" style="font-size: 1rem; padding: 10px 30px;">Xem l·∫°i b√†i</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const readingPassage = [
            {
                text: "To be honest, <span class='gap-marker'>(1)</span>, I was a typical <span class='gap-marker'>(2)</span>. My lifestyle was hectic, so I was always <span class='gap-marker'>(3)</span> from street stalls or fast food chains. You know, just seeking that instant gratification.",
                translation: "Th√†nh th·∫≠t m√† n√≥i, tr∆∞·ªõc ƒë√¢y, t√¥i l√† m·ªôt ng∆∞·ªùi ti√™u d√πng ƒëi·ªÉn h√¨nh ∆∞a s·ª± ti·ªán l·ª£i. L·ªëi s·ªëng c·ªßa t√¥i r·∫•t b·∫≠n r·ªôn, n√™n t√¥i lu√¥n ƒÉn v·ªôi v√†ng t·ª´ c√°c qu√°n v·ªâa h√® ho·∫∑c chu·ªói th·ª©c ƒÉn nhanh. B·∫°n bi·∫øt ƒë·∫•y, ch·ªâ t√¨m ki·∫øm s·ª± th·ªèa m√£n t·ª©c th√¨."
            },
            {
                text: "However, a documentary I watched recently really <span class='gap-marker'>(4)</span>. It <span class='gap-marker'>(5)</span> the hidden dangers of processed food, warning that a poor diet can <span class='gap-marker'>(6)</span> serious health issues like obesity and heart disease. It really <span class='gap-marker'>(7)</span> for me. I realized that my habit of eating greasy food was <span class='gap-marker'>(8)</span>; I knew it wasn't good, but I ignored the risks.",
                translation: "Tuy nhi√™n, m·ªôt b·ªô phim t√†i li·ªáu t√¥i xem g·∫ßn ƒë√¢y th·ª±c s·ª± ƒë√£ kh∆°i g·ª£i s·ª± h·ª©ng th√∫ c·ªßa t√¥i. N√≥ ƒë√£ l√†m n·ªïi b·∫≠t nh·ªØng nguy hi·ªÉm ti·ªÅm ·∫©n c·ªßa th·ª±c ph·∫©m ch·∫ø bi·∫øn s·∫µn, c·∫£nh b√°o r·∫±ng ch·∫ø ƒë·ªô ƒÉn u·ªëng k√©m c√≥ th·ªÉ k√©o theo c√°c v·∫•n ƒë·ªÅ s·ª©c kh·ªèe nghi√™m tr·ªçng nh∆∞ b√©o ph√¨ v√† b·ªánh tim. N√≥ th·ª±c s·ª± ƒë√£ gi√≥ng l√™n h·ªìi chu√¥ng c·∫£nh b√°o ƒë·ªëi v·ªõi t√¥i. T√¥i nh·∫≠n ra th√≥i quen ƒÉn ƒë·ªì d·∫ßu m·ª° c·ªßa m√¨nh th·∫≠t ƒë√°ng ng·ªù; t√¥i bi·∫øt n√≥ kh√¥ng t·ªët nh∆∞ng ƒë√£ ph·ªõt l·ªù r·ªßi ro."
            },
            {
                text: "So, I decided to <span class='gap-marker'>(9)</span> cooking healthy, <span class='gap-marker'>(10)</span> at home. I wanted to <span class='gap-marker'>(11)</span> the myth that healthy food is boring. I chose a recipe for a mushroom pie‚Äîa bit of a <span class='gap-marker'>(12)</span> dish because of its strong flavor, but a <span class='gap-marker'>(13)</span> for me personally.",
                translation: "V√¨ v·∫≠y, t√¥i quy·∫øt ƒë·ªãnh th·ª≠ s·ª©c n·∫•u c√°c m√≥n ƒÉn t·ª´ th·ª±c v·∫≠t l√†nh m·∫°nh t·∫°i nh√†. T√¥i mu·ªën b√°c b·ªè quan ni·ªám sai l·∫ßm r·∫±ng ƒë·ªì ƒÉn t·ªët cho s·ª©c kh·ªèe th√¨ nh√†m ch√°n. T√¥i ch·ªçn c√¥ng th·ª©c l√†m b√°nh n·∫•m‚Äîm·ªôt m√≥n ƒÉn g√¢y tranh c√£i (ng∆∞·ªùi th√≠ch ng∆∞·ªùi gh√©t) v√¨ h∆∞∆°ng v·ªã m·∫°nh, nh∆∞ng l·∫°i l√† m√≥n t·ªß ƒë·ªëi v·ªõi c√° nh√¢n t√¥i."
            },
            {
                text: "Let me tell you, it was <span class='gap-marker'>(14)</span>. The recipe required <span class='gap-marker'>(15)</span> so the crust would be crispy but not oily. It was quite <span class='gap-marker'>(16)</span> for a beginner. There were moments when <span class='gap-marker'>(17)</span> and I almost gave up. The first attempt was a disaster; the crust was burnt, which felt like total <span class='gap-marker'>(18)</span> after hours of work! It seemed <span class='gap-marker'>(19)</span> to try again.",
                translation: "ƒê·ªÉ t√¥i n√≥i cho b·∫°n nghe, n√≥ kh√¥ng h·ªÅ d·ªÖ d√†ng ch√∫t n√†o. C√¥ng th·ª©c y√™u c·∫ßu ph·∫£i pha b·ªôt th·∫≠t chu·∫©n ƒë·ªÉ v·ªè b√°nh gi√≤n m√† kh√¥ng ng·∫•m d·∫ßu. N√≥ kh√° l√† n·∫£n ch√≠ cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu. C√≥ nh·ªØng l√∫c c∆°n l∆∞·ªùi ·∫≠p ƒë·∫øn v√† t√¥i su√Ωt b·ªè cu·ªôc. L·∫ßn th·ª≠ ƒë·∫ßu ti√™n l√† m·ªôt th·∫£m h·ªça; v·ªè b√°nh b·ªã ch√°y, c·∫£m gi√°c nh∆∞ suy s·ª•p tinh th·∫ßn ho√†n to√†n sau h√†ng gi·ªù h√¨ h·ª•c! C√≥ v·∫ª nh∆∞ th·∫≠t v√¥ √≠ch khi th·ª≠ l·∫°i."
            },
            {
                text: "But <span class='gap-marker'>(20)</span>: I didn't want to go back to <span class='gap-marker'>(21)</span> meats that usually <span class='gap-marker'>(22)</span> questionable hygiene standards. I wanted to prove that home cooking doesn't have to <span class='gap-marker'>(23)</span> restaurant quality. So I decided to <span class='gap-marker'>(24)</span> some high-quality organic ingredients‚Äîa little <span class='gap-marker'>(25)</span> for myself.",
                translation: "Nh∆∞ng ƒëi·ªÉm m·∫•u ch·ªët l√†: T√¥i kh√¥ng mu·ªën quay l·∫°i v·ªõi c√°c lo·∫°i th·ªãt n·∫°c (k√©m ch·∫•t l∆∞·ª£ng) th∆∞·ªùng c√≥ ti√™u chu·∫©n v·ªá sinh ƒë√°ng ng·ªù. T√¥i mu·ªën ch·ª©ng minh r·∫±ng n·∫•u ƒÉn t·∫°i nh√† kh√¥ng nh·∫•t thi·∫øt ph·∫£i thua k√©m xa ch·∫•t l∆∞·ª£ng nh√† h√†ng. V√¨ v·∫≠y t√¥i quy·∫øt ƒë·ªãnh vung ti·ªÅn mua m·ªôt s·ªë nguy√™n li·ªáu h·ªØu c∆° ch·∫•t l∆∞·ª£ng cao‚Äîcoi nh∆∞ m·ªôt ph·∫ßn th∆∞·ªüng nh·ªè cho b·∫£n th√¢n."
            },
            {
                text: "The second attempt was much better. The smell was <span class='gap-marker'>(26)</span>, filling the kitchen. I made sure to <span class='gap-marker'>(27)</span> the pie with a fresh salad to <span class='gap-marker'>(28)</span> the flavors. The dish was <span class='gap-marker'>(29)</span> in a beautiful golden crust that seemed to <span class='gap-marker'>(30)</span> all my hard work.",
                translation: "L·∫ßn th·ª≠ th·ª© hai t·ªët h∆°n nhi·ªÅu. M√πi th∆°m ph·ª©c lan t·ªèa kh·∫Øp b·∫øp. T√¥i ƒë·∫£m b·∫£o k·∫øt h·ª£p b√°nh v·ªõi m√≥n salad t∆∞∆°i ƒë·ªÉ g·ª° g·∫°c/c√¢n b·∫±ng l·∫°i h∆∞∆°ng v·ªã. M√≥n ƒÉn ƒë∆∞·ª£c bao b·ªçc trong l·ªõp v·ªè v√†ng ∆∞∆°m tuy·ªát ƒë·∫πp d∆∞·ªùng nh∆∞ g√≥i g·ªçn t·∫•t c·∫£ c√¥ng s·ª©c c·ªßa t√¥i."
            },
            {
                text: "The result <span class='gap-marker'>(31)</span> my determination. It wasn‚Äôt just about the food; it <span class='gap-marker'>(32)</span> to the fact that I could take care of myself. Eating <span class='gap-marker'>(33)</span> like this helps <span class='gap-marker'>(34)</span> illnesses and keeps me energetic.",
                translation: "K·∫øt qu·∫£ ƒë√£ n√≥i l√™n nhi·ªÅu ƒëi·ªÅu v·ªÅ s·ª± quy·∫øt t√¢m c·ªßa t√¥i. N√≥ kh√¥ng ch·ªâ l√† v·ªÅ m√≥n ƒÉn; n√≥ l√†m ch·ª©ng cho vi·ªác t√¥i c√≥ th·ªÉ t·ª± chƒÉm s√≥c b·∫£n th√¢n. ƒÇn ƒë·ªì thanh ƒë·∫°m nh∆∞ th·∫ø n√†y gi√∫p ngƒÉn ng·ª´a b·ªánh t·∫≠t v√† gi·ªØ cho t√¥i tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng."
            },
            {
                text: "Now, I try not to <span class='gap-marker'>(35)</span> regarding food choices‚Äînot all fast food is bad, but we shouldn't let health <span class='gap-marker'>(36)</span> convenience. Even though the preparation leaves <span class='gap-marker'>(37)</span> (which I hate!), the <span class='gap-marker'>(38)</span> of a nice dinner at home is worth it. It‚Äôs my ultimate <span class='gap-marker'>(39)</span> now.",
                translation: "B√¢y gi·ªù, t√¥i c·ªë g·∫Øng kh√¥ng v∆° ƒë≈©a c·∫£ n·∫Øm v·ªÅ l·ª±a ch·ªçn th·ª±c ph·∫©m‚Äîkh√¥ng ph·∫£i ƒë·ªì ƒÉn nhanh n√†o c≈©ng x·∫•u, nh∆∞ng ch√∫ng ta kh√¥ng n√™n ƒë·ªÉ s·ª©c kh·ªèe ph·ª• thu·ªôc v√†o s·ª± ti·ªán l·ª£i. M·∫∑c d√π vi·ªác chu·∫©n b·ªã ƒë·ªìng nghƒ©a v·ªõi vi·ªác kh√¥ng c√≥ b√°t ƒëƒ©a s·∫°ch sau ƒë√≥ (√Ω l√† ph·∫£i r·ª≠a b√°t), nh∆∞ng b·∫ßu kh√¥ng kh√≠ c·ªßa m·ªôt b·ªØa t·ªëi ngon l√†nh t·∫°i nh√† th·∫≠t x·ª©ng ƒë√°ng. ƒê√≥ l√† l·ª±a ch·ªçn h√†ng ƒë·∫ßu c·ªßa t√¥i b√¢y gi·ªù." 
            },
            {
                text: "Honestly, looking at the busy <span class='gap-marker'>(40)</span> outside eating junk food, it really <span class='gap-marker'>(41)</span> the need for better education on nutrition. I hope my family will <span class='gap-marker'>(42)</span> this new lifestyle soon.",
                translation: "Th·ª±c l√≤ng m√† n√≥i, nh√¨n nh·ªØng ng∆∞·ªùi qua ƒë∆∞·ªùng b·∫≠n r·ªôn b√™n ngo√†i ƒëang ƒÉn ƒë·ªì ƒÉn v·∫∑t, ƒëi·ªÅu ƒë√≥ th·ª±c s·ª± quy v·ªÅ nhu c·∫ßu gi√°o d·ª•c t·ªët h∆°n v·ªÅ dinh d∆∞·ª°ng. T√¥i hy v·ªçng gia ƒë√¨nh t√¥i s·∫Ω s·ªõm ·ªßng h·ªô l·ªëi s·ªëng m·ªõi n√†y."
            }
        ];

        // Gap 37 Special Handling text injection
        readingPassage[7].text = readingPassage[7].text.replace("<span class='gap-marker'>(37)</span>", "Unlike eating out which means <span class='gap-marker'>(37)</span> no dishes to clean up afterward, cooking at home is messy");


        const glossaryData = [
            { word: "Hectic", type: "adj", mean: "B·∫≠n r·ªôn, cu·ªìng nhi·ªát" },
            { word: "Gratification", type: "n", mean: "S·ª± h√†i l√≤ng, th·ªèa m√£n" },
            { word: "Documentary", type: "n", mean: "Phim t√†i li·ªáu" },
            { word: "Debunk", type: "v", mean: "B√°c b·ªè, l·∫≠t t·∫©y (quan ni·ªám sai)" },
            { word: "Daunting", type: "adj", mean: "G√¢y n·∫£n ch√≠, kh√≥ khƒÉn" },
            { word: "Hygiene", type: "n", mean: "V·ªá sinh" },
            { word: "Aromatic", type: "adj", mean: "Th∆°m ph·ª©c" },
            { word: "Encapsulate", type: "v", mean: "G√≥i g·ªçn, t√≥m l∆∞·ª£c" },
            { word: "Ambiance", type: "n", mean: "B·∫ßu kh√¥ng kh√≠, kh√¥ng gian" },
            { word: "Futile", type: "adj", mean: "V√¥ √≠ch, kh√¥ng hi·ªáu qu·∫£" }
        ];

        const questions = [
            {
                id: 1,
                correct: "back in the day",
                wrong: ["in the near future", "at this moment", "all of a sudden"],
                explain: "<b>'Back in the day'</b> l√† c·ª•m t·ª´ d√πng ƒë·ªÉ ch·ªâ th·ªùi gian trong qu√° kh·ª© (tr∆∞·ªõc ƒë√¢y/ng√†y x∆∞a). Ng·ªØ c·∫£nh c√¢u d√πng th√¨ qu√° kh·ª© 'I was...'"
            },
            {
                id: 2,
                correct: "convenience-driven consumer",
                wrong: ["health-conscious eater", "picky eater", "master chef"],
                explain: "<b>'Convenience-driven consumer'</b>: ng∆∞·ªùi ti√™u d√πng ∆∞a chu·ªông s·ª± ti·ªán l·ª£i. Ph√π h·ª£p v·ªõi v·∫ø sau 'lifestyle was hectic' (b·∫≠n r·ªôn) v√† ƒÉn 'fast food'."
            },
            {
                id: 3,
                correct: "grabbing a quick bite on the go",
                wrong: ["cooking a feast carefully", "dining in luxury restaurants", "ignoring meals completely"],
                explain: "<b>'Grabbing a quick bite on the go'</b>: ƒÉn v·ªôi khi ƒëang di chuy·ªÉn. Ph·∫£n √°nh l·ªëi s·ªëng b·∫≠n r·ªôn, ƒë·ªëi l·∫≠p v·ªõi vi·ªác ng·ªìi ƒÉn ƒë√†ng ho√†ng."
            },
            {
                id: 4,
                correct: "piqued my interest",
                wrong: ["bored me to death", "made me angry", "confused my mind"],
                explain: "<b>'Piqued my interest'</b>: kh∆°i g·ª£i s·ª± h·ª©ng th√∫. ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn vi·ªác nh√¢n v·∫≠t thay ƒë·ªïi h√†nh vi sau khi xem phim."
            },
            {
                id: 5,
                correct: "brought to the fore",
                wrong: ["hide under the carpet", "kept secret", "ignored completely"],
                explain: "<b>'Bring to the fore'</b>: l√†m n·ªïi b·∫≠t v·∫•n ƒë·ªÅ. B·ªô phim l√†m r√µ nh·ªØng nguy hi·ªÉm c·ªßa th·ª±c ph·∫©m ch·∫ø bi·∫øn s·∫µn."
            },
            {
                id: 6,
                correct: "bring in its wake",
                wrong: ["take away", "prevent completely", "cure instantly"],
                explain: "<b>'Bring in its wake'</b>: mang theo h·ªá qu·∫£ (th∆∞·ªùng l√† x·∫•u). Ch·∫ø ƒë·ªô ƒÉn k√©m k√©o theo b·ªánh t·∫≠t."
            },
            {
                id: 7,
                correct: "rang the bell of caution",
                wrong: ["sounded like music", "made no sense", "was a joke"],
                explain: "<b>'Rang the bell of caution'</b>: gi√≥ng l√™n h·ªìi chu√¥ng c·∫£nh b√°o. Nh√¢n v·∫≠t nh·∫≠n th·ª©c ƒë∆∞·ª£c nguy hi·ªÉm."
            },
            {
                id: 8,
                correct: "questionable",
                wrong: ["excellent", "perfect", "harmless"],
                explain: "<b>'Questionable'</b>: ƒë√°ng ng·ªù/c√≥ v·∫•n ƒë·ªÅ. Th√≥i quen ƒÉn d·∫ßu m·ª° l√† kh√¥ng t·ªët."
            },
            {
                id: 9,
                correct: "try my hand at",
                wrong: ["give up on", "stay away from", "criticize"],
                explain: "<b>'Try my hand at'</b>: th·ª≠ s·ª©c l√†m g√¨ ƒë√≥ l·∫ßn ƒë·∫ßu ti√™n. Nh√¢n v·∫≠t quy·∫øt ƒë·ªãnh th·ª≠ n·∫•u ƒÉn."
            },
            {
                id: 10,
                correct: "plant-based dishes",
                wrong: ["meat-heavy meals", "expensive caviar", "processed snacks"],
                explain: "<b>'Plant-based dishes'</b>: c√°c m√≥n ƒÉn t·ª´ th·ª±c v·∫≠t. Ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh 'cooking healthy'."
            },
            {
                id: 11,
                correct: "debunk",
                wrong: ["support", "prove", "believe"],
                explain: "<b>'Debunk'</b>: b√°c b·ªè/l·∫≠t t·∫©y (m·ªôt quan ni·ªám sai). Mu·ªën ch·ª©ng minh r·∫±ng ƒë·ªì ƒÉn healthy kh√¥ng h·ªÅ nh√†m ch√°n."
            },
            {
                id: 12,
                correct: "love-it-or-hate-it",
                wrong: ["universally loved", "completely tasteless", "widely ignored"],
                explain: "<b>'Love-it-or-hate-it'</b>: m√≥n g√¢y tranh c√£i (ng∆∞·ªùi th√≠ch ng∆∞·ªùi gh√©t). V√≠ d·ª• nh∆∞ s·∫ßu ri√™ng ho·∫∑c m·∫Øm t√¥m, ·ªü ƒë√¢y l√† do 'strong flavor'."
            },
            {
                id: 13,
                correct: "comfort food",
                wrong: ["strange food", "daily punishment", "expensive luxury"],
                explain: "<b>'Comfort food'</b>: m√≥n t·ªß/m√≥n ƒÉn tinh th·∫ßn mang l·∫°i c·∫£m gi√°c d·ªÖ ch·ªãu."
            },
            {
                id: 14,
                correct: "no walk in the park",
                wrong: ["a piece of cake", "very easy", "effortless"],
                explain: "<b>'No walk in the park'</b>: kh√¥ng h·ªÅ d·ªÖ d√†ng (nh∆∞ ƒëi d·∫°o c√¥ng vi√™n). ƒê·ªìng nghƒ©a v·ªõi kh√≥ khƒÉn."
            },
            {
                id: 15,
                correct: "getting the batter just right",
                wrong: ["burning the stove", "buying pre-made dough", "calling delivery"],
                explain: "<b>'Getting the batter just right'</b>: pha b·ªôt chu·∫©n ch·ªâ. Y√™u c·∫ßu k·ªπ thu·∫≠t ƒë·ªÉ v·ªè b√°nh ngon."
            },
            {
                id: 16,
                correct: "daunting",
                wrong: ["encouraging", "exciting", "relaxing"],
                explain: "<b>'Daunting'</b>: n·∫£n ch√≠/g√¢y s·ª£ h√£i v√¨ kh√≥. Ph√π h·ª£p cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu (beginner)."
            },
            {
                id: 17,
                correct: "laziness kicked in",
                wrong: ["energy boosted", "inspiration struck", "hunger disappeared"],
                explain: "<b>'Laziness kicked in'</b>: c∆°n l∆∞·ªùi ·∫≠p ƒë·∫øn. Khi g·∫∑p kh√≥ khƒÉn th√¨ d·ªÖ n·∫£y sinh t√¢m l√Ω l∆∞·ªùi."
            },
            {
                id: 18,
                correct: "emotional devastation",
                wrong: ["great joy", "mild annoyance", "total success"],
                explain: "<b>'Emotional devastation'</b>: s·ª± suy s·ª•p tinh th·∫ßn (d√πng c√°ch n√≥i c∆∞·ªùng ƒëi·ªáu). C·∫£m gi√°c khi l√†m h·ªèng sau nhi·ªÅu gi·ªù c·ªë g·∫Øng."
            },
            {
                id: 19,
                correct: "futile",
                wrong: ["promising", "necessary", "hopeful"],
                explain: "<b>'Futile'</b>: v√¥ √≠ch. C·∫£m th·∫•y c·ªë g·∫Øng l·∫°i c≈©ng ch·∫≥ng ƒë∆∞·ª£c g√¨."
            },
            {
                id: 20,
                correct: "here‚Äôs the kicker",
                wrong: ["boringly enough", "predictably", "sadly"],
                explain: "<b>'Here‚Äôs the kicker'</b>: ƒëi·ªÉm m·∫•u ch·ªët/ƒëi·ªÅu b·∫•t ng·ªù l√†. D√πng ƒë·ªÉ gi·ªõi thi·ªáu m·ªôt b∆∞·ªõc ngo·∫∑t trong suy nghƒ©."
            },
            {
                id: 21,
                correct: "lean meats",
                wrong: ["fresh vegetables", "fruits", "grains"],
                explain: "<b>'Lean meats'</b>: th·ªãt n·∫°c. Trong ng·ªØ c·∫£nh n√†y t√°c gi·∫£ ƒëang ch√™ ch·∫•t l∆∞·ª£ng th·ªãt kh√¥ng ƒë·∫£m b·∫£o."
            },
            {
                id: 22,
                correct: "are prone to",
                wrong: ["are immune to", "are free from", "never have"],
                explain: "<b>'Are prone to'</b>: d·ªÖ b·ªã/c√≥ khuynh h∆∞·ªõng b·ªã. Th·ªãt k√©m ch·∫•t l∆∞·ª£ng d·ªÖ d√≠nh v·∫•n ƒë·ªÅ v·ªá sinh."
            },
            {
                id: 23,
                correct: "trail far behind",
                wrong: ["exceed", "surpass", "lead"],
                explain: "<b>'Trail far behind'</b>: t·ª•t h·∫≠u xa/thua k√©m xa. Mu·ªën ch·ª©ng minh ƒë·ªì nh√† l√†m kh√¥ng thua k√©m nh√† h√†ng."
            },
            {
                id: 24,
                correct: "splurge on",
                wrong: ["save on", "steal", "avoid"],
                explain: "<b>'Splurge on'</b>: vung ti·ªÅn v√†o/chi m·∫°nh tay. Mua ƒë·ªì organic ƒë·∫Øt ti·ªÅn."
            },
            {
                id: 25,
                correct: "treat",
                wrong: ["punishment", "burden", "fine"],
                explain: "<b>'Treat'</b>: ph·∫ßn th∆∞·ªüng/ƒëi·ªÅu ƒë·∫∑c bi·ªát ƒë√£i b·∫£n th√¢n."
            },
            {
                id: 26,
                correct: "aromatic",
                wrong: ["stinky", "odorless", "putrid"],
                explain: "<b>'Aromatic'</b>: th∆°m ph·ª©c. M√πi h∆∞∆°ng lan t·ªèa kh·∫Øp b·∫øp."
            },
            {
                id: 27,
                correct: "pair with",
                wrong: ["separate from", "throw away", "mix badly"],
                explain: "<b>'Pair with'</b>: k·∫øt h·ª£p v·ªõi. ƒÇn b√°nh k√®m salad."
            },
            {
                id: 28,
                correct: "redeem",
                wrong: ["ruin", "destroy", "ignore"],
                explain: "<b>'Redeem'</b>: c·ª©u v√£n/g·ª° g·∫°c l·∫°i. Salad thanh m√°t c√¢n b·∫±ng v·ªã b√©o c·ªßa b√°nh."
            },
            {
                id: 29,
                correct: "encased",
                wrong: ["exposed", "removed", "broken"],
                explain: "<b>'Encased'</b>: ƒë∆∞·ª£c bao b·ªçc. Nh√¢n b√°nh n·∫±m trong v·ªè b√°nh."
            },
            {
                id: 30,
                correct: "encapsulate",
                wrong: ["forget", "erase", "deny"],
                explain: "<b>'Encapsulate'</b>: g√≥i g·ªçn. Th√†nh qu·∫£ m√≥n ƒÉn g√≥i tr·ªçn c√¥ng s·ª©c b·ªè ra."
            },
            {
                id: 31,
                correct: "speaks volumes about",
                wrong: ["keeps silent about", "hides", "whispers"],
                explain: "<b>'Speaks volumes about'</b>: n√≥i l√™n nhi·ªÅu ƒëi·ªÅu v·ªÅ. K·∫øt qu·∫£ ch·ª©ng minh s·ª± quy·∫øt t√¢m."
            },
            {
                id: 32,
                correct: "bore witness",
                wrong: ["denied", "lied", "refused"],
                explain: "<b>'Bore witness'</b> (qu√° kh·ª© c·ªßa bear witness): l√†m ch·ª©ng. Vi·ªác n·∫•u ƒÉn ch·ª©ng minh kh·∫£ nƒÉng t·ª± chƒÉm s√≥c b·∫£n th√¢n."
            },
            {
                id: 33,
                correct: "lighter fare",
                wrong: ["heavy meals", "junk food", "greasy stuff"],
                explain: "<b>'Lighter fare'</b>: ƒë·ªì ƒÉn nh·∫π b·ª•ng/thanh ƒë·∫°m. T·ªët cho s·ª©c kh·ªèe."
            },
            {
                id: 34,
                correct: "ward off",
                wrong: ["invite", "cause", "attract"],
                explain: "<b>'Ward off'</b>: ngƒÉn ng·ª´a/ph√≤ng tr√°nh (b·ªánh t·∫≠t)."
            },
            {
                id: 35,
                correct: "paint everyone with the same brush",
                wrong: ["appreciate individuality", "select carefully", "judge fairly"],
                explain: "<b>'Paint everyone with the same brush'</b>: v∆° ƒë≈©a c·∫£ n·∫Øm/ƒë√°nh ƒë·ªìng. Kh√¥ng ph·∫£i ƒë·ªì ƒÉn nhanh n√†o c≈©ng t·ªá."
            },
            {
                id: 36,
                correct: "take a back seat to",
                wrong: ["be more important than", "prioritize", "lead"],
                explain: "<b>'Take a back seat to'</b> (trong b√†i g·ªëc l√† ng·ªØ c·∫£nh: kh√¥ng ƒë·ªÉ s·ª©c kh·ªèe nh∆∞·ªùng ch·ªó cho s·ª± ti·ªán l·ª£i). T√°c gi·∫£ √Ω n√≥i s·ª©c kh·ªèe ph·∫£i quan tr·ªçng h∆°n."
            },
            { // Fixed logic as per user request
                id: 37,
                correct: "no dishes to clean up",
                wrong: ["a messy kitchen", "lots of work", "culinary chaos"],
                explain: "<b>'No dishes to clean up'</b>: kh√¥ng ph·∫£i r·ª≠a b√°t. Ng·ªØ c·∫£nh c√¢u s·ª≠a ƒë·ªïi: 'Kh√¥ng gi·ªëng nh∆∞ ƒÉn ngo√†i nghƒ©a l√† kh√¥ng ph·∫£i r·ª≠a b√°t, n·∫•u ·ªü nh√† th√¨ b·ª´a b·ªôn'."
            },
            {
                id: 38,
                correct: "ambiance",
                wrong: ["noise", "stress", "danger"],
                explain: "<b>'Ambiance'</b>: kh√¥ng gian/b·∫ßu kh√¥ng kh√≠ ·∫•m c√∫ng khi ƒÉn t·ªëi t·∫°i nh√†."
            },
            {
                id: 39,
                correct: "frontrunner",
                wrong: ["last choice", "backup plan", "enemy"],
                explain: "<b>'Frontrunner'</b>: ·ª©ng c·ª≠ vi√™n s√°ng gi√°/l·ª±a ch·ªçn h√†ng ƒë·∫ßu."
            },
            {
                id: 40,
                correct: "passers-by",
                wrong: ["stay-at-homes", "drivers", "buildings"],
                explain: "<b>'Passers-by'</b>: ng∆∞·ªùi qua ƒë∆∞·ªùng."
            },
            {
                id: 41,
                correct: "ticks down to",
                wrong: ["has nothing to do with", "avoids", "complicates"],
                explain: "<b>'Ticks down to'</b> (ho·∫∑c boils down to/comes down to): quy v·ªÅ/chung quy l√†. V·∫•n ƒë·ªÅ n·∫±m ·ªü gi√°o d·ª•c."
            },
            {
                id: 42,
                correct: "get on board with",
                wrong: ["reject", "oppose", "hate"],
                explain: "<b>'Get on board with'</b>: ·ªßng h·ªô/ƒë·ªìng thu·∫≠n v·ªõi √Ω t∆∞·ªüng m·ªõi."
            }
        ];

        // --- AUDIO ENGINE (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // High pitch Ding
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else if (type === 'wrong') {
                // Low pitch buzz
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'finish') {
                // Victory chord
                [440, 554, 659].forEach((freq, i) => {
                    const o = audioCtx.createOscillator();
                    const g = audioCtx.createGain();
                    o.connect(g);
                    g.connect(audioCtx.destination);
                    o.frequency.value = freq;
                    g.gain.setValueAtTime(0.1, audioCtx.currentTime);
                    g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 2);
                    o.start();
                    o.stop(audioCtx.currentTime + 2);
                });
            }
        }

        // --- LOGIC ---
        let timerInterval;
        let timeLeft = 600; // 10 minutes
        let isTimerRunning = false;
        let score = 0;
        let userAnswers = {}; // Store user choice status

        function init() {
            renderReading();
            renderGlossary();
            renderQuiz();
        }

        function renderReading() {
            const container = document.getElementById('reading-content');
            readingPassage.forEach((para, index) => {
                const div = document.createElement('div');
                div.className = 'paragraph';
                div.innerHTML = `
                    <p>${para.text}</p>
                    <button class="btn-translate" onclick="toggleTrans(this)">Show Translation üáªüá≥</button>
                    <div class="translation-text">${para.translation}</div>
                `;
                container.appendChild(div);
            });
        }

        function toggleTrans(btn) {
            const transDiv = btn.nextElementSibling;
            if (transDiv.style.display === 'block') {
                transDiv.style.display = 'none';
                btn.textContent = 'Show Translation üáªüá≥';
            } else {
                transDiv.style.display = 'block';
                btn.textContent = 'Hide Translation üáªüá≥';
            }
        }

        function renderGlossary() {
            const container = document.getElementById('reading-content');
            const box = document.createElement('div');
            box.className = 'glossary-box';
            
            let html = `
                <h3 class="glossary-title">üìö Glossary (T·ª´ v·ª±ng x·ªãn)</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
            `;
            
            glossaryData.forEach(item => {
                html += `
                    <tr>
                        <td><strong>${item.word}</strong></td>
                        <td><span class="word-type">${item.type}</span></td>
                        <td>${item.mean}</td>
                    </tr>
                `;
            });
            
            html += `</table>`;
            box.innerHTML = html;
            container.appendChild(box);
        }

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            
            questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-card-${q.id}`;
                
                // Shuffle options
                let options = [...q.wrong, q.correct];
                options.sort(() => Math.random() - 0.5);

                let optionsHtml = '';
                options.forEach(opt => {
                    // Escape quotes for onclick
                    const safeOpt = opt.replace(/'/g, "\\'"); 
                    optionsHtml += `<button class="option-btn" onclick="checkAnswer(${q.id}, '${safeOpt}', this)">${opt}</button>`;
                });

                card.innerHTML = `
                    <div class="q-header">
                        <span>Question ${index + 1} / ${questions.length}</span>
                        <span>Gap (${q.id})</span>
                    </div>
                    <div class="q-text">Choose the word for gap (${q.id}):</div>
                    <div class="options-grid" id="opts-${q.id}">
                        ${optionsHtml}
                    </div>
                    <div class="explanation" id="exp-${q.id}">
                        <span class="exp-title">üí° Gi·∫£i th√≠ch chi ti·∫øt Ms Mai An:</span>
                        <div class="exp-detail">${q.explain}</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function checkAnswer(qId, selectedText, btnElement) {
            // Prevent multiple clicks if already answered correctly
            if (userAnswers[qId] === 'correct') return;

            const qData = questions.find(q => q.id === qId);
            const isCorrect = (selectedText === qData.correct);
            const parent = document.getElementById(`opts-${qId}`);
            const expBox = document.getElementById(`exp-${qId}`);

            // Reset other buttons in this group
            Array.from(parent.children).forEach(b => {
                b.classList.remove('wrong');
                // Don't remove 'correct' if previously set (though logic prevents re-click)
            });

            if (isCorrect) {
                btnElement.classList.add('correct');
                playSound('correct');
                
                // Confetti effect from the button position
                const rect = btnElement.getBoundingClientRect();
                confetti({
                    particleCount: 30,
                    spread: 50,
                    origin: { 
                        x: (rect.left + rect.width / 2) / window.innerWidth, 
                        y: (rect.top + rect.height / 2) / window.innerHeight 
                    }
                });

                // Show Explanation
                expBox.style.display = 'block';
                userAnswers[qId] = 'correct';
                score++;
                
                // Disable all buttons in this question
                Array.from(parent.children).forEach(b => b.disabled = true);

            } else {
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Allow trying again
            }
        }

        // --- TIMER ---
        function toggleTimer() {
            if (isTimerRunning) {
                clearInterval(timerInterval);
                isTimerRunning = false;
                document.getElementById('timer').style.opacity = '0.7';
            } else {
                if (timeLeft <= 0) return;
                isTimerRunning = true;
                document.getElementById('timer').style.opacity = '1';
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert("ƒê√£ h·∫øt gi·ªù l√†m b√†i. B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                    }
                }, 1000);
            }
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60);
            const s = timeLeft % 60;
            document.getElementById('timer').textContent = `${m}:${s < 10 ? '0' : ''}${s}`;
        }

        // --- SUBMIT & SCORE ---
        function finishTest() {
            clearInterval(timerInterval);
            isTimerRunning = false;
            
            // Calculate final score based on correct first tries or just total correct state
            // Here simply counting how many are green
            const finalScore = Object.values(userAnswers).filter(s => s === 'correct').length;
            
            const modal = document.getElementById('resultModal');
            const scoreTxt = document.getElementById('finalScore');
            const feedback = document.getElementById('feedbackMsg');
            
            scoreTxt.textContent = `${finalScore}/${questions.length}`;
            
            if (finalScore === questions.length) {
                feedback.textContent = "üèÜ Xu·∫•t s·∫Øc! B·∫°n l√† thi√™n t√†i ti·∫øng Anh!";
                playSound('finish');
                confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
            } else if (finalScore > 30) {
                feedback.textContent = "üî• L√†m t·ªët l·∫Øm! Ch·ªâ c√≤n m·ªôt ch√∫t n·ªØa th√¥i.";
                playSound('finish');
            } else {
                feedback.textContent = "üí™ C·ªë l√™n nh√©! H√£y xem k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch.";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // Auto start
        init();

    </script>
</body>
</html>
