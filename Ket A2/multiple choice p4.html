<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms Mai An ULIS - Jack Calder Reading</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Music Theme Colors */
            --primary: #6C5CE7;      /* Deep Purple */
            --secondary: #00CEC9;    /* Teal (Ocean Blue vibes) */
            --accent: #FD79A8;       /* Pink/Spotlight */
            --correct: #00D26A;
            --wrong: #FF4757;
            --text-dark: #2d3436;
            --bg-glass: rgba(255, 255, 255, 0.95);
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            overflow: hidden;
            color: var(--text-dark);
            /* Gradient Background: Purple to Blue to Pink */
            background: linear-gradient(135deg, #a29bfe, #74b9ff, #dfe6e9);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            height: 100vh;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* SVG Pattern Overlay: Violin, Notes, Ocean Wave */
        .pattern-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Ctext x='20' y='50' font-size='35'%3Eüéª%3C/text%3E%3Ctext x='120' y='140' font-size='35'%3Eüéµ%3C/text%3E%3Ctext x='150' y='40' font-size='30'%3Eüåä%3C/text%3E%3Ctext x='50' y='160' font-size='25'%3Eüé∏%3C/text%3E%3C/svg%3E");
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
            animation: floatPattern 50s linear infinite;
        }

        @keyframes floatPattern {
            from { background-position: 0 0; }
            to { background-position: 500px 500px; }
        }

        /* Header */
        header {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 20px rgba(108, 92, 231, 0.2);
            border-bottom: 4px solid var(--primary);
        }

        .header-title {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn-action {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 rgba(0,0,0,0.15);
        }

        .btn-start {
            background-color: var(--accent);
            color: white;
        }
        .btn-start:active { transform: translateY(4px); box-shadow: none; }

        #timer-display {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--primary);
            background: #dfe6e9;
            padding: 5px 15px;
            border-radius: 10px;
            min-width: 110px;
            text-align: center;
        }

        /* Layout */
        .main-container {
            display: flex;
            height: calc(100vh - 80px);
            position: relative;
            z-index: 5;
        }

        .panel {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
        }

        .left-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border-right: 3px dashed var(--primary);
        }

        /* Reading Passage */
        .passage-title {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 10px;
            text-align: center;
            font-weight: 900;
        }
        
        .sub-title {
            text-align: center;
            color: #636e72;
            font-style: italic;
            margin-bottom: 25px;
            font-size: 1.1rem;
        }

        .paragraph-box {
            background: #fff;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-left: 5px solid var(--secondary);
            font-size: 1.15rem;
            line-height: 1.8;
            transition: transform 0.2s;
        }
        .paragraph-box:hover { transform: translateX(5px); }

        .btn-translate {
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-top: 15px;
            cursor: pointer;
            opacity: 0.9;
        }
        .btn-translate:hover { opacity: 1; }

        .translation-text {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f1f2f6;
            border-radius: 10px;
            font-size: 1rem;
            color: #2d3436;
            font-style: italic;
        }

        /* Glossary */
        .glossary-wrapper {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-top: 40px;
            border: 3px solid var(--primary);
            box-shadow: 8px 8px 0 rgba(108, 92, 231, 0.2);
        }
        .glossary-title {
            color: var(--primary);
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: 800;
        }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #dfe6e9; }
        th { background: var(--primary); color: white; border-radius: 5px 5px 0 0; }
        tr:last-child td { border-bottom: none; }
        
        /* Quiz Section */
        .question-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 35px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        .question-card:hover { border-color: var(--secondary); transform: translateY(-5px); }

        .question-text {
            font-size: 1.25rem;
            font-weight: 800;
            color: #2d3436;
            margin-bottom: 20px;
        }

        .option-btn {
            width: 100%;
            background: #f1f2f6;
            border: 2px solid #dfe6e9;
            padding: 18px 25px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3436;
            cursor: pointer;
            text-align: left;
            margin-bottom: 12px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }
        
        .option-btn:hover:not(:disabled) {
            background: white;
            border-color: var(--primary);
            box-shadow: 0 4px 10px rgba(108, 92, 231, 0.2);
        }

        .option-btn.correct {
            background: #d4edda;
            border-color: var(--correct);
            color: #155724;
            position: relative;
        }
        .option-btn.correct::after {
            content: "‚úì";
            position: absolute;
            right: 20px;
            font-weight: 900;
        }

        .option-btn.wrong {
            background: #f8d7da;
            border-color: var(--wrong);
            color: #721c24;
            opacity: 0.7;
        }

        /* Explanation Box */
        .explanation-box {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #eef2f3;
            border-left: 5px solid var(--accent);
            border-radius: 0 10px 10px 0;
            animation: slideDown 0.4s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .explanation-box h4 { color: var(--primary); margin-bottom: 10px; }
        .explanation-box li { margin-bottom: 8px; list-style-type: none; }
        .explanation-box .highlight { background: #ffeaa7; padding: 0 4px; font-weight: bold; border-radius: 3px; }

        /* Submit & Modal */
        .btn-submit {
            width: 100%;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
            font-size: 1.4rem;
            font-weight: 900;
            padding: 20px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(108, 92, 231, 0.4);
            margin-top: 20px;
            transition: transform 0.2s;
        }
        .btn-submit:hover { transform: scale(1.03); }

        #result-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white;
            padding: 50px;
            border-radius: 40px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            animation: zoomIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes zoomIn { from { transform: scale(0.5); } to { transform: scale(1); } }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #b2bec3; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary); }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
    </style>
</head>
<body>

    <div class="pattern-overlay"></div>
    <canvas id="confetti-canvas"></canvas>

    <header>
        <div class="header-title">üéª Reading Challenge: The Violinist</div>
        <div class="timer-container">
            <div id="timer-display">10:00</div>
            <button class="btn-action btn-start" id="btn-timer" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
        </div>
    </header>

    <div class="main-container">
        <div class="panel left-panel">
            <h1 class="passage-title">Jack Calder</h1>
            <p class="sub-title">Violin player Jack Calder plays in the Australian band, Ocean Blue.</p>

            <div class="paragraph-box">
                <p>Jack Calder started playing the violin when he was ten. ‚ÄòMy music teacher played and one day he asked if anyone wanted to learn. Some girls put up their hands and so did I. I didn‚Äôt have a violin, but my uncle said I could use his. The lessons were really hard at first, but playing the violin soon became important to me.‚Äô</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Jack Calder b·∫Øt ƒë·∫ßu ch∆°i violin khi anh m∆∞·ªùi tu·ªïi. "Th·∫ßy gi√°o d·∫°y nh·∫°c c·ªßa t√¥i c≈©ng ch∆°i violin v√† m·ªôt ng√†y n·ªç, th·∫ßy h·ªèi c√≥ ai mu·ªën h·ªçc kh√¥ng. M·ªôt v√†i b·∫°n n·ªØ gi∆° tay v√† t√¥i c≈©ng v·∫≠y. T√¥i kh√¥ng c√≥ ƒë√†n violin, nh∆∞ng ch√∫ t√¥i b·∫£o t√¥i c√≥ th·ªÉ d√πng c√¢y ƒë√†n c·ªßa ch√∫. Nh·ªØng b√†i h·ªçc ƒë·∫ßu ti√™n th·ª±c s·ª± r·∫•t kh√≥, nh∆∞ng vi·ªác ch∆°i violin s·ªõm tr·ªü n√™n quan tr·ªçng ƒë·ªëi v·ªõi t√¥i."</div>
            </div>

            <div class="paragraph-box">
                <p>After leaving school, Jack moved to Melbourne. For a time, he preferred listening to music to playing it. The rock music he listened to sounded very different from violin music, so he bought an electric violin, and started putting the things he liked about rock music into the music he played on his violin.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Sau khi ra tr∆∞·ªùng, Jack chuy·ªÉn ƒë·∫øn Melbourne. Trong m·ªôt kho·∫£ng th·ªùi gian, anh th√≠ch nghe nh·∫°c h∆°n l√† ch∆°i nh·∫°c. Nh·∫°c rock m√† anh nghe c√≥ √¢m thanh r·∫•t kh√°c so v·ªõi nh·∫°c violin, v√¨ v·∫≠y anh ƒë√£ mua m·ªôt c√¢y violin ƒëi·ªán, v√† b·∫Øt ƒë·∫ßu ƒë∆∞a nh·ªØng th·ª© anh th√≠ch ·ªü nh·∫°c rock v√†o trong nh·ªØng b·∫£n nh·∫°c anh ch∆°i tr√™n c√¢y violin c·ªßa m√¨nh.</div>
            </div>

            <div class="paragraph-box">
                <p>A year later, Jack met a small group of Melbourne musicians. ‚ÄòWe all thought about music in the same way and started Ocean Blue together. A year later, we were playing lots of concerts, and our music was selling well. But we didn‚Äôt want this to make us different people. We didn‚Äôt want to stop being friends.‚Äô</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">M·ªôt nƒÉm sau, Jack g·∫∑p m·ªôt nh√≥m nh·ªè c√°c nh·∫°c sƒ© ·ªü Melbourne. "T·∫•t c·∫£ ch√∫ng t√¥i ƒë·ªÅu c√≥ c√πng t∆∞ duy v·ªÅ √¢m nh·∫°c v√† ƒë√£ c√πng nhau th√†nh l·∫≠p ban nh·∫°c Ocean Blue. M·ªôt nƒÉm sau ƒë√≥, ch√∫ng t√¥i ƒë√£ bi·ªÉu di·ªÖn r·∫•t nhi·ªÅu bu·ªïi h√≤a nh·∫°c, v√† √¢m nh·∫°c c·ªßa ch√∫ng t√¥i b√°n r·∫•t ch·∫°y. Nh∆∞ng ch√∫ng t√¥i kh√¥ng mu·ªën ƒëi·ªÅu n√†y l√†m thay ƒë·ªïi con ng∆∞·ªùi m√¨nh. Ch√∫ng t√¥i kh√¥ng mu·ªën ƒë√°nh m·∫•t t√¨nh b·∫°n."</div>
            </div>

            <div class="paragraph-box">
                <p>Jack meets many people who think playing the violin is an unusual career, but he doesn‚Äôt agree with them. ‚ÄòI think it‚Äôs the best thing in the world. I guess I‚Äôm lucky that way. The internet has changed music, but when I walk into a violin shop it‚Äôs like entering another world ‚Äì one where time has stopped. Someone has looked after these beautiful old instruments that are two or three hundred years old. I think that‚Äôs amazing.‚Äô</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Jack g·∫∑p nhi·ªÅu ng∆∞·ªùi nghƒ© r·∫±ng ch∆°i violin l√† m·ªôt ngh·ªÅ nghi·ªáp kh√°c th∆∞·ªùng, nh∆∞ng anh kh√¥ng ƒë·ªìng √Ω v·ªõi h·ªç. "T√¥i nghƒ© ƒë√≥ l√† ƒëi·ªÅu tuy·ªát v·ªùi nh·∫•t tr√™n th·∫ø gi·ªõi. T√¥i ƒëo√°n l√† t√¥i may m·∫Øn theo c√°ch ƒë√≥. Internet ƒë√£ thay ƒë·ªïi √¢m nh·∫°c, nh∆∞ng khi t√¥i b∆∞·ªõc v√†o m·ªôt c·ª≠a h√†ng violin, c·∫£m gi√°c nh∆∞ b∆∞·ªõc v√†o m·ªôt th·∫ø gi·ªõi kh√°c ‚Äì n∆°i th·ªùi gian nh∆∞ng ng·ª´ng l·∫°i. Ai ƒë√≥ ƒë√£ chƒÉm s√≥c nh·ªØng nh·∫°c c·ª• c·ªï xinh ƒë·∫πp c√≥ tu·ªïi ƒë·ªùi hai ho·∫∑c ba trƒÉm nƒÉm n√†y. T√¥i nghƒ© ƒëi·ªÅu ƒë√≥ th·∫≠t tuy·ªát v·ªùi."</div>
            </div>

            <div class="glossary-wrapper">
                <h3 class="glossary-title">üéº Music & Life Vocabulary (B1-C2)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>T·ª´ v·ª±ng</th>
                            <th>Lo·∫°i t·ª´</th>
                            <th>Nghƒ©a Ti·∫øng Vi·ªát</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1. Instrument</td><td>Noun</td><td>Nh·∫°c c·ª•</td></tr>
                        <tr><td>2. Career</td><td>Noun</td><td>S·ª± nghi·ªáp, ngh·ªÅ nghi·ªáp</td></tr>
                        <tr><td>3. Concert</td><td>Noun</td><td>Bu·ªïi h√≤a nh·∫°c</td></tr>
                        <tr><td>4. Prefer (+ V-ing)</td><td>Verb</td><td>Th√≠ch c√°i g√¨ h∆°n</td></tr>
                        <tr><td>5. Unusual</td><td>Adj</td><td>Kh√°c th∆∞·ªùng, l·∫° l·∫´m</td></tr>
                        <tr><td>6. Amazing</td><td>Adj</td><td>Tuy·ªát v·ªùi, kinh ng·∫°c</td></tr>
                        <tr><td>7. Electric</td><td>Adj</td><td>(Thu·ªôc) ƒêi·ªán / Ch·∫°y b·∫±ng ƒëi·ªán</td></tr>
                        <tr><td>8. Musician</td><td>Noun</td><td>Nh·∫°c sƒ©, ng∆∞·ªùi ch∆°i nh·∫°c</td></tr>
                        <tr><td>9. Agree (with)</td><td>Verb</td><td>ƒê·ªìng √Ω (v·ªõi ai)</td></tr>
                        <tr><td>10. Look after</td><td>Phrasal Verb</td><td>ChƒÉm s√≥c, tr√¥ng coi</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel right-panel">
            <div id="quiz-container">
                </div>
            <button class="btn-submit" onclick="submitQuiz()">N·ªòP B√ÄI</button>
        </div>
    </div>

    <div id="result-modal">
        <div class="modal-content">
            <h2 style="color: var(--primary); font-size: 2.5rem;">K·∫æT QU·∫¢</h2>
            <div id="final-score" style="font-size: 4rem; color: var(--accent); font-weight: 900; margin: 20px 0;">0/5</div>
            <p id="feedback-msg" style="font-size: 1.2rem; margin-bottom: 30px; color: #636e72;"></p>
            <button class="btn-action btn-start" onclick="location.reload()" style="width: 100%; padding: 15px;">L√ÄM L·∫†I B√ÄI</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const quizData = [
            {
                id: 1,
                question: "1. What do we learn about Jack in the first paragraph?",
                options: [
                    { text: "He was the only person at school to play the violin.", isCorrect: false },
                    { text: "He learned to play on an instrument that he borrowed.", isCorrect: true },
                    { text: "He enjoyed playing the violin as soon as he started learning.", isCorrect: false }
                ],
                explanation: `
                    <h4>Gi·∫£i th√≠ch chi ti·∫øt C√¢u 1:</h4>
                    <ul>
                        <li><strong>D·ªãch c√¢u h·ªèi:</strong> Ch√∫ng ta bi·∫øt ƒë∆∞·ª£c g√¨ v·ªÅ Jack trong ƒëo·∫°n ƒë·∫ßu ti√™n?</li>
                        <li><strong>T·∫°i sao ch·ªçn B?</strong> (Anh ·∫•y h·ªçc ch∆°i tr√™n m·ªôt nh·∫°c c·ª• ƒëi m∆∞·ª£n): Trong b√†i Jack n√≥i: <span class="highlight">"I didn‚Äôt have a violin, but my uncle said I could use his."</span> (T√¥i kh√¥ng c√≥ ƒë√†n, nh∆∞ng ch√∫ t√¥i b·∫£o c√≥ th·ªÉ d√πng ƒë√†n c·ªßa ch√∫).</li>
                        <li><strong>T·∫°i sao lo·∫°i A?</strong> Sai v√¨ b√†i n√≥i <span class="highlight">"Some girls put up their hands and so did I"</span> (V√†i b·∫°n n·ªØ gi∆° tay v√† t√¥i c≈©ng v·∫≠y) -> Kh√¥ng ph·∫£i ch·ªâ m√¨nh anh ·∫•y.</li>
                        <li><strong>T·∫°i sao lo·∫°i C?</strong> Sai v√¨ <span class="highlight">"The lessons were really hard at first"</span> (L√∫c ƒë·∫ßu r·∫•t kh√≥), ng·ª• √Ω anh ch∆∞a th·∫•y th√≠ch ngay l·∫≠p t·ª©c.</li>
                    </ul>
                `
            },
            {
                id: 2,
                question: "2. What is the writer doing in the second paragraph?",
                options: [
                    { text: "explaining why Jack thought some music was easy to play", isCorrect: false },
                    { text: "saying why only a few people liked the music Jack played", isCorrect: false },
                    { text: "describing how Jack changed the kind of music he played", isCorrect: true }
                ],
                explanation: `
                    <h4>Gi·∫£i th√≠ch chi ti·∫øt C√¢u 2:</h4>
                    <ul>
                        <li><strong>D·ªãch c√¢u h·ªèi:</strong> T√°c gi·∫£ ƒëang l√†m g√¨ trong ƒëo·∫°n th·ª© hai?</li>
                        <li><strong>T·∫°i sao ch·ªçn C?</strong> (M√¥ t·∫£ c√°ch Jack thay ƒë·ªïi th·ªÉ lo·∫°i nh·∫°c anh ch∆°i): ƒêo·∫°n 2 n√≥i Jack mua <span class="highlight">"electric violin"</span> v√† b·∫Øt ƒë·∫ßu ƒë∆∞a ch·∫•t li·ªáu <span class="highlight">"rock music"</span> v√†o ti·∫øng ƒë√†n c·ªßa m√¨nh. ƒê√¢y l√† s·ª± thay ƒë·ªïi phong c√°ch.</li>
                        <li><strong>T·∫°i sao lo·∫°i A?</strong> Sai, b√†i kh√¥ng n√≥i nh·∫°c rock d·ªÖ ch∆°i.</li>
                        <li><strong>T·∫°i sao lo·∫°i B?</strong> Sai, kh√¥ng c√≥ th√¥ng tin v·ªÅ vi·ªác √≠t ng∆∞·ªùi th√≠ch nh·∫°c c·ªßa Jack trong ƒëo·∫°n n√†y.</li>
                    </ul>
                `
            },
            {
                id: 3,
                question: "3. What does Jack say about Ocean Blue?",
                options: [
                    { text: "Nobody in the band liked travelling far to play in a concert.", isCorrect: false },
                    { text: "The band members were interested in different kinds of music.", isCorrect: false },
                    { text: "Everyone wanted to stay friends when the band became successful.", isCorrect: true }
                ],
                explanation: `
                    <h4>Gi·∫£i th√≠ch chi ti·∫øt C√¢u 3:</h4>
                    <ul>
                        <li><strong>D·ªãch c√¢u h·ªèi:</strong> Jack n√≥i g√¨ v·ªÅ ban nh·∫°c Ocean Blue?</li>
                        <li><strong>T·∫°i sao ch·ªçn C?</strong> (M·ªçi ng∆∞·ªùi mu·ªën duy tr√¨ t√¨nh b·∫°n khi ban nh·∫°c th√†nh c√¥ng): D·∫´n ch·ª©ng: <span class="highlight">"our music was selling well... We didn‚Äôt want to stop being friends."</span></li>
                        <li><strong>T·∫°i sao lo·∫°i A?</strong> Sai, b√†i ch·ªâ n√≥i h·ªç "playing lots of concerts" (di·ªÖn nhi·ªÅu), kh√¥ng n√≥i h·ªç gh√©t ƒëi xa.</li>
                        <li><strong>T·∫°i sao lo·∫°i B?</strong> Sai, b√†i n√≥i <span class="highlight">"We all thought about music in the same way"</span> (T·∫•t c·∫£ ƒë·ªÅu c√≥ c√πng t∆∞ duy √¢m nh·∫°c).</li>
                    </ul>
                `
            },
            {
                id: 4,
                question: "4. Why does Jack think he is lucky?",
                options: [
                    { text: "He meets lots of people.", isCorrect: false },
                    { text: "He loves what he does.", isCorrect: true },
                    { text: "He has an unusual career.", isCorrect: false }
                ],
                explanation: `
                    <h4>Gi·∫£i th√≠ch chi ti·∫øt C√¢u 4:</h4>
                    <ul>
                        <li><strong>D·ªãch c√¢u h·ªèi:</strong> T·∫°i sao Jack nghƒ© anh ·∫•y may m·∫Øn?</li>
                        <li><strong>T·∫°i sao ch·ªçn B?</strong> (Anh ·∫•y y√™u c√¥ng vi·ªác m√¨nh l√†m): Jack n√≥i v·ªÅ vi·ªác ch∆°i violin: <span class="highlight">"I think it‚Äôs the best thing in the world. I guess I‚Äôm lucky that way."</span> (T√¥i nghƒ© ƒë√≥ l√† ƒëi·ªÅu tuy·ªát nh·∫•t tr√™n ƒë·ªùi -> T√¥i may m·∫Øn).</li>
                        <li><strong>T·∫°i sao lo·∫°i A & C?</strong> Jack c√≥ g·∫∑p nhi·ªÅu ng∆∞·ªùi v√† ng∆∞·ªùi ta n√≥i ngh·ªÅ n√†y l·∫° (unusual), nh∆∞ng ƒë√≥ kh√¥ng ph·∫£i l√Ω do anh th·∫•y m√¨nh may m·∫Øn.</li>
                    </ul>
                `
            },
            {
                id: 5,
                question: "5. Jack thinks it is a good idea...",
                options: [
                    { text: "to keep some things that people used in the past.", isCorrect: true },
                    { text: "to make more music available on the internet.", isCorrect: false },
                    { text: "to teach more people to play an instrument.", isCorrect: false }
                ],
                explanation: `
                    <h4>Gi·∫£i th√≠ch chi ti·∫øt C√¢u 5:</h4>
                    <ul>
                        <li><strong>D·ªãch c√¢u h·ªèi:</strong> Jack nghƒ© r·∫±ng ƒë√≥ l√† m·ªôt √Ω t∆∞·ªüng hay ƒë·ªÉ...</li>
                        <li><strong>T·∫°i sao ch·ªçn A?</strong> (gi·ªØ g√¨n nh·ªØng th·ª© ng∆∞·ªùi x∆∞a t·ª´ng d√πng): Jack ca ng·ª£i vi·ªác: <span class="highlight">"Someone has looked after these beautiful old instruments that are two or three hundred years old."</span> (Ai ƒë√≥ ƒë√£ chƒÉm s√≥c nh·ªØng nh·∫°c c·ª• c·ªï... T√¥i th·∫•y ƒëi·ªÅu ƒë√≥ th·∫≠t tuy·ªát).</li>
                        <li><strong>T·∫°i sao lo·∫°i B?</strong> Jack ch·ªâ n√≥i Internet ƒë√£ thay ƒë·ªïi √¢m nh·∫°c, kh√¥ng n√≥i c·∫ßn ƒë∆∞a th√™m nh·∫°c l√™n ƒë√≥.</li>
                        <li><strong>T·∫°i sao lo·∫°i C?</strong> Kh√¥ng c√≥ th√¥ng tin khuy√™n m·ªçi ng∆∞·ªùi n√™n h·ªçc nh·∫°c c·ª•.</li>
                    </ul>
                `
            }
        ];

        // --- LOGIC ---
        let score = 0;
        let answeredIds = new Set();
        let timerInterval;
        let timeLeft = 600;

        // Shuffle
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function initQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            
            quizData.forEach((q, idx) => {
                shuffle(q.options);
                
                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `<div class="question-text">${q.question}</div>`;

                const optContainer = document.createElement('div');
                q.options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt.text;
                    btn.onclick = () => checkAnswer(btn, opt.isCorrect, idx, optContainer, q.explanation);
                    optContainer.appendChild(btn);
                });
                card.appendChild(optContainer);

                // Explanation container
                const expDiv = document.createElement('div');
                expDiv.className = 'explanation-box';
                expDiv.id = `expl-${idx}`;
                expDiv.innerHTML = q.explanation;
                card.appendChild(expDiv);

                container.appendChild(card);
            });
        }

        // Updated Check Answer Logic: Show explanation ALWAYS
        function checkAnswer(btn, isCorrect, qIdx, container, explanation) {
            if (answeredIds.has(qIdx)) return;
            answeredIds.add(qIdx);

            const allBtns = container.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true);

            // Lu√¥n hi·ªán gi·∫£i th√≠ch
            document.getElementById(`expl-${qIdx}`).style.display = 'block';

            if (isCorrect) {
                btn.classList.add('correct');
                playSound('correct');
                fireConfetti();
                score++;
            } else {
                btn.classList.add('wrong');
                playSound('wrong');
                // Highlight ƒë√∫ng
                allBtns.forEach(b => {
                    // Logic t√¨m n√∫t ƒë√∫ng d·ª±a tr√™n text (ƒë∆°n gi·∫£n h√≥a)
                    const dataOpt = quizData[qIdx].options.find(o => o.text === b.innerText);
                    if (dataOpt && dataOpt.isCorrect) b.classList.add('correct');
                });
            }
        }

        // Audio
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            if (type === 'correct') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(440, audioCtx.currentTime); // A4
                osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.5);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // Timer
        function toggleTimer() {
            const btn = document.getElementById('btn-timer');
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
                btn.innerText = "TI·∫æP T·ª§C";
                btn.style.background = "#e17055";
            } else {
                btn.innerText = "T·∫†M D·ª™NG";
                btn.style.background = "#fdcb6e";
                timerInterval = setInterval(() => {
                    timeLeft--;
                    let m = Math.floor(timeLeft / 60);
                    let s = timeLeft % 60;
                    document.getElementById('timer-display').innerText = 
                        `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
                    if (timeLeft <= 0) clearInterval(timerInterval);
                }, 1000);
            }
        }

        function toggleTranslation(btn) {
            const div = btn.nextElementSibling;
            const isHidden = getComputedStyle(div).display === 'none';
            div.style.display = isHidden ? 'block' : 'none';
            btn.innerText = isHidden ? '·∫®N B·∫¢N D·ªäCH' : 'B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶';
        }

        function submitQuiz() {
            if (answeredIds.size < quizData.length) {
                if(!confirm("Ch∆∞a l√†m xong ƒë√¢u, n·ªôp th·∫≠t h·∫£?")) return;
            }
            clearInterval(timerInterval);
            document.getElementById('result-modal').style.display = 'flex';
            document.getElementById('final-score').innerText = `${score}/5`;
            
            const msg = score === 5 ? "üåü ƒê·ªàNH CAO! B·∫†N L√Ä TH·∫¶N ƒê·ªíNG! üåü" : 
                        score >= 3 ? "üëè KH√Å L·∫ÆM! C·ªê T√ç N·ªÆA L√Ä 10 ƒêI·ªÇM!" : 
                        "üòÖ C·∫¶N LUY·ªÜN TH√äM NHA!";
            document.getElementById('feedback-msg').innerText = msg;
            
            if (score >= 3) fireConfetti();
        }

        // Confetti
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];

        function fireConfetti() {
            for(let i=0; i<100; i++) {
                particles.push({
                    x: canvas.width/2, y: canvas.height/2,
                    vx: (Math.random()-0.5)*15, vy: (Math.random()-0.5)*15 - 5,
                    c: `hsl(${Math.random()*360}, 100%, 50%)`,
                    s: Math.random()*10 + 5
                });
            }
            requestAnimationFrame(drawConfetti);
        }

        function drawConfetti() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach((p,i) => {
                p.x += p.vx; p.y += p.vy; p.vy += 0.5;
                ctx.fillStyle = p.c;
                ctx.fillRect(p.x, p.y, p.s, p.s);
                if(p.y > canvas.height) particles.splice(i,1);
            });
            if(particles.length > 0) requestAnimationFrame(drawConfetti);
        }

        initQuiz();
    </script>
</body>
</html>