<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5f2c82;
            --secondary: #49a09d;
            --tertiary: #FF6B6B;
            --quaternary: #4ECDC4;
            --correct: #00D26A;
            --wrong: #FF4757;
            --text-main: #2d3436;
            --bg-card: #ffffff;
            --btn-text: #444;
        }

        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
            /* Cosmic Gradient */
            background: linear-gradient(-45deg, #1A2980, #26D0CE, #8E2DE2, #4A00E0);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--text-main);
            overflow-x: hidden;
            position: relative;
        }

        /* SVG Pattern Background: Space Theme (Rocket, Planet, Star) */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background-image: url('data:image/svg+xml;utf8,<svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path d="M 40 40 Q 50 20 60 40 L 80 50 Q 60 60 50 80 Q 40 60 20 50 Z" fill="rgba(255,234,167,0.4)"/><circle cx="150" cy="50" r="15" fill="rgba(255,118,117,0.4)"/><path d="M 130 50 Q 150 30 170 50 Q 150 70 130 50" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="3"/><path d="M 100 150 L 110 130 L 120 150 L 115 160 L 105 160 Z" fill="rgba(116,185,255,0.4)"/><path d="M 105 160 L 115 160 L 110 170 Z" fill="rgba(255,159,67,0.5)"/></svg>');
            background-size: 250px 250px;
            animation: floatPattern 60s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes floatPattern {
            0% { background-position: 0px 0px; }
            100% { background-position: 500px 500px; }
        }

        .container {
            max-width: 850px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            border-radius: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
            margin-bottom: 30px;
            display: inline-block;
            left: 50%;
            position: relative;
            transform: translateX(-50%);
            border: 4px solid #FFEAA7;
        }

        .header h1 {
            margin: 0; font-size: 26px; color: #6c5ce7;
            text-transform: uppercase; font-weight: 900; letter-spacing: 1px;
        }

        .header p { margin: 5px 0 0; font-weight: 700; color: #666; font-size: 15px; }

        .section-title {
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 25px;
            border-radius: 15px;
            margin: 35px 0 20px;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            font-size: 20px;
            font-weight: 900;
            color: #2c3e50;
            border-left: 8px solid #00cec9;
        }

        .question-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 25px 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 0 rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .question-card:hover { border-color: rgba(108, 92, 231, 0.3); }

        .q-text { font-size: 19px; font-weight: 700; margin-bottom: 20px; line-height: 1.6; }
        .q-text u { text-decoration-color: var(--wrong); text-decoration-thickness: 3px; }

        /* Options for ABCD */
        .options-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }

        .option-btn {
            background: #fff; border: 3px solid #eee; border-radius: 18px;
            padding: 16px 20px; font-size: 17px; font-family: 'Nunito', sans-serif;
            font-weight: 700; color: var(--btn-text); cursor: pointer; text-align: left;
            box-shadow: 0 6px 0 #eee; transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-4px); box-shadow: 0 10px 0 #dfe6e9; border-color: #dfe6e9;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px); box-shadow: 0 2px 0 #dfe6e9;
        }

        .option-btn.correct {
            background: #eaffea; border-color: var(--correct);
            box-shadow: 0 6px 0 var(--correct); color: #00944a;
        }

        .option-btn.wrong {
            background: #ffebee; border-color: var(--wrong);
            box-shadow: 0 6px 0 var(--wrong); color: #c0392b;
        }

        /* Animations */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-6px) rotate(-1deg); }
            40%, 80% { transform: translateX(6px) rotate(1deg); }
        }
        .shake { animation: shake 0.4s; }

        /* Inputs */
        .input-group { display: flex; gap: 12px; margin-bottom: 10px; flex-wrap: wrap; align-items: center; }
        .text-input {
            flex: 1; min-width: 200px; padding: 14px 20px;
            border: 3px solid #eee; border-radius: 15px;
            font-family: 'Nunito', sans-serif; font-size: 17px; font-weight: 700;
            outline: none; transition: 0.3s; box-shadow: inset 0 3px 5px rgba(0,0,0,0.02);
        }
        .text-input:focus { border-color: #00cec9; box-shadow: 0 0 0 4px rgba(0, 206, 201, 0.2); }
        
        .check-btn {
            background: #6c5ce7; color: white; border: none; border-radius: 15px;
            padding: 14px 28px; font-weight: 900; font-size: 17px; cursor: pointer;
            box-shadow: 0 6px 0 #4a3eb1; transition: 0.2s; font-family: 'Nunito', sans-serif;
        }
        .check-btn:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 9px 0 #4a3eb1; }
        .check-btn:active:not(:disabled) { transform: translateY(3px); box-shadow: 0 0 0 #4a3eb1; }
        .check-btn:disabled { background: #b2bec3; box-shadow: 0 6px 0 #636e72; cursor: not-allowed; transform: none; }

        /* Explanations */
        .explanation {
            margin-top: 25px; padding: 25px; background: #f8f9fa;
            border-left: 6px solid #fdcb6e; border-radius: 15px;
            display: none; animation: slideDown 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 16px; line-height: 1.7; color: #2d3436;
        }
        .explanation h4 { margin: 0 0 15px 0; color: #2c3e50; font-size: 18px; text-transform: uppercase; display: flex; align-items: center; gap: 8px;}
        .explanation h4::before { content: "üí°"; font-size: 22px; }
        .explanation p { margin: 8px 0; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-15px); } to { opacity: 1; transform: translateY(0); } }

        /* Submit Button */
        .submit-container { text-align: center; margin: 50px 0; }
        .submit-btn {
            background: linear-gradient(135deg, #0984e3, #6c5ce7); color: white;
            font-size: 24px; padding: 18px 50px; border: none; border-radius: 25px;
            font-weight: 900; cursor: pointer; box-shadow: 0 8px 0 #074b83;
            transition: 0.2s; font-family: 'Nunito', sans-serif; letter-spacing: 1px;
        }
        .submit-btn:hover { transform: translateY(-4px); box-shadow: 0 12px 0 #074b83; }

        #confetti-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 9999; }
        .confetti { position: absolute; width: 12px; height: 12px; opacity: 0; border-radius: 50%; }
        @keyframes fall { 0% { opacity: 1; transform: translateY(-10vh) rotate(0deg); } 100% { opacity: 0; transform: translateY(100vh) rotate(720deg); } }
    </style>
</head>
<body>

<div id="confetti-container"></div>

<div class="container">
    <div class="header">
        <h1>B√ÄI KI·ªÇM TRA TI·∫æNG ANH</h1>
        <p>Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</p>
    </div>

    <div id="quiz-container">
        </div>

    <div class="submit-container">
        <button class="submit-btn" onclick="submitTest()">N·ªòP B√ÄI & XEM ƒêI·ªÇM</button>
    </div>
</div>

<script>
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playSound(type) {
    if (audioCtx.state === 'suspended') audioCtx.resume();
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    
    if (type === 'correct') {
        osc.type = 'sine';
        osc.frequency.setValueAtTime(880, audioCtx.currentTime); // A5
        osc.frequency.exponentialRampToValueAtTime(1760, audioCtx.currentTime + 0.1); // A6
        gain.gain.setValueAtTime(0, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
        osc.start(audioCtx.currentTime);
        osc.stop(audioCtx.currentTime + 0.5);
    } else {
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(250, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
        gain.gain.setValueAtTime(0, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0.3, audioCtx.currentTime + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
        osc.start(audioCtx.currentTime);
        osc.stop(audioCtx.currentTime + 0.4);
    }
}

function fireConfetti() {
    const container = document.getElementById('confetti-container');
    const colors = ['#00cec9', '#fdcb6e', '#6c5ce7', '#00D26A', '#FF4757', '#0984e3'];
    for (let i = 0; i < 40; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animation = `fall ${Math.random() * 2 + 1.5}s linear forwards`;
        container.appendChild(confetti);
        setTimeout(() => confetti.remove(), 3500);
    }
}

// --- D·ªÆ LI·ªÜU ƒê·ªÄ B√ÄI ---
const quizData = [
    { sectionTitle: "I. Choose the word that has the underlined part pronounced differently from the rest." },
    {
        type: "mcq",
        qText: "1. A. na<u>tion</u> &nbsp;&nbsp; B. man<u>sion</u> &nbsp;&nbsp; C. inva<u>sion</u> &nbsp;&nbsp; D. transla<u>tion</u>",
        options: ["A. nation", "B. mansion", "C. invasion", "D. translation"],
        correctAnswer: 2,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ch·ªçn t·ª´ c√≥ ph·∫ßn ƒëu√¥i g·∫°ch ch√¢n ph√°t √¢m kh√°c.</p>
        <p><b>B∆∞·ªõc 2:</b> Ph√¢n t√≠ch t·ª´ v·ª±ng:<br>
        A. nation (n): qu·ªëc gia.<br>
        B. mansion (n): bi·ªát th·ª±.<br>
        C. invasion (n): s·ª± x√¢m l∆∞·ª£c.<br>
        D. translation (n): s·ª± d·ªãch thu·∫≠t.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn C? ƒêu√¥i "-sion" trong "invasion" ƒë·ª©ng sau nguy√™n √¢m, ƒë∆∞·ª£c ph√°t √¢m l√† √¢m h·ªØu thanh <b>/ ín/</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao 3 ƒë√°p √°n kia sai? C√°c t·ª´ c√≤n l·∫°i c√≥ ƒëu√¥i -tion/-sion ph√°t √¢m l√† √¢m v√¥ thanh <b>/ Én/</b>.</p>`
    },
    {
        type: "mcq",
        qText: "2. A. decl<u>are</u> &nbsp;&nbsp; B. <u>air</u>port &nbsp;&nbsp; C. wh<u>ere</u> &nbsp;&nbsp; D. engin<u>eer</u>",
        options: ["A. declare", "B. airport", "C. where", "D. engineer"],
        correctAnswer: 3,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ch·ªçn t·ª´ c√≥ ph·∫ßn nguy√™n √¢m g·∫°ch ch√¢n ph√°t √¢m kh√°c.</p>
        <p><b>B∆∞·ªõc 2:</b> Ph√¢n t√≠ch t·ª´ v·ª±ng:<br>
        A. declare (v): tuy√™n b·ªë.<br>
        B. airport (n): s√¢n bay.<br>
        C. where (adv): ·ªü ƒë√¢u.<br>
        D. engineer (n): k·ªπ s∆∞.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn D? ƒêu√¥i "-eer" trong "engineer" ƒë∆∞·ª£c ph√°t √¢m l√† nguy√™n √¢m ƒë√¥i <b>/…™…ô(r)/</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao 3 ƒë√°p √°n kia sai? A, B, C ƒë·ªÅu ch·ª©a ph·∫ßn nguy√™n √¢m ƒë∆∞·ª£c ph√°t √¢m l√† <b>/e…ô(r)/</b>.</p>`
    },
    {
        type: "mcq",
        qText: "3. A. <u>a</u>rea &nbsp;&nbsp; B. <u>a</u>rena &nbsp;&nbsp; C. p<u>a</u>rent &nbsp;&nbsp; D. v<u>a</u>rious",
        options: ["A. area", "B. arena", "C. parent", "D. various"],
        correctAnswer: 1,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ch·ªçn t·ª´ c√≥ ch·ªØ 'a' ph√°t √¢m kh√°c.</p>
        <p><b>B∆∞·ªõc 2:</b> Ph√¢n t√≠ch t·ª´ v·ª±ng:<br>
        A. area (n): khu v·ª±c.<br>
        B. arena (n): ƒë·∫•u tr∆∞·ªùng.<br>
        C. parent (n): cha/m·∫π.<br>
        D. various (adj): ƒëa d·∫°ng.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn B? Ch·ªØ 'a' trong "arena" kh√¥ng nh·∫≠n tr·ªçng √¢m n√™n b·ªã bi·∫øn √¢m th√†nh √¢m schwa y·∫øu <b>/…ô/</b> (/…ôÀàriÀê.n…ô/).</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao 3 ƒë√°p √°n kia sai? C√°c ch·ªØ 'a' trong A, C, D ƒë·ªÅu nh·∫≠n tr·ªçng √¢m v√† ƒë∆∞·ª£c ph√°t √¢m l√† <b>/e…ô/</b>.</p>`
    },
    {
        type: "mcq",
        qText: "4. A. tr<u>a</u>nsport &nbsp;&nbsp; B. p<u>a</u>ssenger &nbsp;&nbsp; C. tr<u>a</u>ffic &nbsp;&nbsp; D. st<u>a</u>tion",
        options: ["A. transport", "B. passenger", "C. traffic", "D. station"],
        correctAnswer: 3,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ch·ªçn t·ª´ c√≥ ch·ªØ 'a' ph√°t √¢m kh√°c.</p>
        <p><b>B∆∞·ªõc 2:</b> Ph√¢n t√≠ch t·ª´ v·ª±ng:<br>
        A. transport (n): giao th√¥ng.<br>
        B. passenger (n): h√†nh kh√°ch.<br>
        C. traffic (n): l∆∞u l∆∞·ª£ng giao th√¥ng.<br>
        D. station (n): nh√† ga.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn D? Ch·ªØ 'a' trong "station" ƒë∆∞·ª£c ph√°t √¢m l√† nguy√™n √¢m ƒë√¥i <b>/e…™/</b> (/Ààste…™. É…ôn/).</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao 3 ƒë√°p √°n kia sai? C√°c t·ª´ A, B, C ƒë·ªÅu c√≥ ch·ªØ 'a' ph√°t √¢m l√† √¢m a b·∫πt <b>/√¶/</b>.</p>`
    },

    { sectionTitle: "II. Circle the word with a different stress position." },
    {
        type: "mcq",
        qText: "1. A. traffic &nbsp;&nbsp; B. pedestrian &nbsp;&nbsp; C. safety &nbsp;&nbsp; D. pavement",
        options: ["A. traffic", "B. pedestrian", "C. safety", "D. pavement"],
        correctAnswer: 1,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ch·ªçn t·ª´ c√≥ tr·ªçng √¢m kh√°c.</p>
        <p><b>B∆∞·ªõc 2:</b> T·ª´ v·ª±ng:<br>A. traffic (n): giao th√¥ng.<br>B. pedestrian (n): ng∆∞·ªùi ƒëi b·ªô.<br>C. safety (n): s·ª± an to√†n.<br>D. pavement (n): v·ªâa h√®.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn B? "pedestrian" /p…ôÀàdestri…ôn/ c√≥ tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>2</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? A, C, D ƒë·ªÅu l√† danh t·ª´ 2 √¢m ti·∫øt, tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>1</b>.</p>`
    },
    {
        type: "mcq",
        qText: "2. A. convenient &nbsp;&nbsp; B. prohibitive &nbsp;&nbsp; C. crowded &nbsp;&nbsp; D. polluted",
        options: ["A. convenient", "B. prohibitive", "C. crowded", "D. polluted"],
        correctAnswer: 2,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ch·ªçn t·ª´ c√≥ v·ªã tr√≠ tr·ªçng √¢m kh√°c.</p>
        <p><b>B∆∞·ªõc 2:</b> T·ª´ v·ª±ng:<br>A. convenient (adj): ti·ªán l·ª£i.<br>B. prohibitive (adj): c·∫•m ƒëo√°n, ƒë·∫Øt ƒë·ªè.<br>C. crowded (adj): ƒë√¥ng ƒë√∫c.<br>D. polluted (adj): b·ªã √¥ nhi·ªÖm.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn C? "crowded" /Ààkra äd…™d/ c√≥ tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>1</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? C√°c t√≠nh t·ª´ A, B, D ƒë·ªÅu c√≥ tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>2</b> (con'venient, pro'hibitive, pol'luted).</p>`
    },
    {
        type: "mcq",
        qText: "3. A. symbol &nbsp;&nbsp; B. parade &nbsp;&nbsp; C. feature &nbsp;&nbsp; D. costume",
        options: ["A. symbol", "B. parade", "C. feature", "D. costume"],
        correctAnswer: 1,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ch·ªçn t·ª´ c√≥ tr·ªçng √¢m kh√°c.</p>
        <p><b>B∆∞·ªõc 2:</b> T·ª´ v·ª±ng:<br>A. symbol (n): bi·ªÉu t∆∞·ª£ng.<br>B. parade (n): cu·ªôc di·ªÖu h√†nh.<br>C. feature (n): ƒë·∫∑c ƒëi·ªÉm.<br>D. costume (n): trang ph·ª•c.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn B? "parade" /p…ôÀàre…™d/ c√≥ tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>2</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? A, C, D ƒë·ªÅu c√≥ tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>1</b>.</p>`
    },
    {
        type: "mcq",
        qText: "4. A. perform &nbsp;&nbsp; B. review &nbsp;&nbsp; C. happen &nbsp;&nbsp; D. obey",
        options: ["A. perform", "B. review", "C. happen", "D. obey"],
        correctAnswer: 2,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: X√°c ƒë·ªãnh tr·ªçng √¢m t·ª´.</p>
        <p><b>B∆∞·ªõc 2:</b> T·ª´ v·ª±ng:<br>A. perform (v): bi·ªÉu di·ªÖn.<br>B. review (v/n): ƒë√°nh gi√°.<br>C. happen (v): x·∫£y ra.<br>D. obey (v): v√¢ng l·ªùi.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn C? "happen" /Ààh√¶p…ôn/ c√≥ tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>1</b> (do √¢m ti·∫øt 2 l√† √¢m schwa y·∫øu /…ô/).</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? A, B, D ƒë·ªÅu l√† ƒë·ªông t·ª´ 2 √¢m ti·∫øt v√† tr·ªçng √¢m r∆°i v√†o √¢m ti·∫øt th·ª© <b>2</b>.</p>`
    },

    { sectionTitle: "III. Choose the best item among A, B, C or D to complete the sentences." },
    {
        type: "mcq",
        qText: "1. The ending of the film is ______. All audiences are very sad.",
        options: ["A. disappointed", "B. satisfying", "C. disappointing", "D. satisfied"],
        correctAnswer: 2,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: C√°i k·∫øt c·ªßa b·ªô phim th√¨ ______. T·∫•t c·∫£ kh√°n gi·∫£ ƒë·ªÅu r·∫•t bu·ªìn.</p>
        <p><b>B∆∞·ªõc 2:</b> Ph√¢n t√≠ch:<br>A. disappointed (adj): c·∫£m th·∫•y th·∫•t v·ªçng (ch·ªâ ng∆∞·ªùi).<br>B. satisfying (adj): ƒëem l·∫°i s·ª± h√†i l√≤ng.<br>C. disappointing (adj): g√¢y th·∫•t v·ªçng (ch·ªâ b·∫£n ch·∫•t s·ª± v·∫≠t).<br>D. satisfied (adj): c·∫£m th·∫•y h√†i l√≤ng.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn C? Ch·ªß ng·ªØ l√† "The ending of the film" (s·ª± v·∫≠t g√¢y ra c·∫£m x√∫c) n√™n ph·∫£i d√πng t√≠nh t·ª´ ƒëu√¥i <b>-ing</b>. Do kh√°n gi·∫£ bu·ªìn n√™n n√≥ "g√¢y th·∫•t v·ªçng" -> <b>disappointing</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? A sai v√¨ t√≠nh t·ª´ ƒëu√¥i -ed ch·ªâ c·∫£m x√∫c con ng∆∞·ªùi. B, D sai ng·ªØ nghƒ©a (kh√¥ng th·ªÉ h√†i l√≤ng m√† l·∫°i bu·ªìn).</p>`
    },
    {
        type: "mcq",
        qText: "2. This is a (n) ______ on real life during the wars in Vietnam in 1945.",
        options: ["A. horror film", "B. sci-fi", "C. comedy", "D. documentary"],
        correctAnswer: 3,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: ƒê√¢y l√† m·ªôt ______ v·ªÅ cu·ªôc s·ªëng th·ª±c trong nh·ªØng nƒÉm chi·∫øn tranh ·ªü VN 1945.</p>
        <p><b>B∆∞·ªõc 2:</b> D·ªãch ƒë√°p √°n:<br>A. phim kinh d·ªã.<br>B. phim khoa h·ªçc vi·ªÖn t∆∞·ªüng.<br>C. phim h√†i.<br>D. phim t√†i li·ªáu.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn D? D·∫•u hi·ªáu "real life" (cu·ªôc s·ªëng th·ª±c t·∫ø) v√† s·ª± ki·ªán l·ªãch s·ª≠ (wars in Vietnam) l√† ƒë·∫∑c tr∆∞ng c·ªßa <b>documentary</b> (phim t√†i li·ªáu).</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? C√°c th·ªÉ lo·∫°i phim A, B, C ƒë·ªÅu c√≥ y·∫øu t·ªë h∆∞ c·∫•u, kh√¥ng d√πng ƒë·ªÉ mi√™u t·∫£ c√°c t∆∞ li·ªáu s·ª± ki·ªán c√≥ th·∫≠t "on real life".</p>`
    },
    {
        type: "mcq",
        qText: "3. The figure of Santa Claus has a long history in ______ traditions.",
        options: ["A. Christmas", "B. Easter", "C. Thanksgiving", "D. Halloween"],
        correctAnswer: 0,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: H√¨nh t∆∞·ª£ng √îng gi√† Noel c√≥ m·ªôt l·ªãch s·ª≠ l√¢u ƒë·ªùi trong truy·ªÅn th·ªëng l·ªÖ ______.</p>
        <p><b>B∆∞·ªõc 2:</b> D·ªãch ƒë√°p √°n:<br>A. Gi√°ng sinh.<br>B. Ph·ª•c sinh.<br>C. L·ªÖ t·∫° ∆°n.<br>D. L·ªÖ h·ªôi ma qu·ª∑.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn A? Ki·∫øn th·ª©c th·ª±c t·∫ø: Santa Claus (√îng gi√† Noel) l√† bi·ªÉu t∆∞·ª£ng kh√¥ng th·ªÉ thi·∫øu c·ªßa l·ªÖ <b>Christmas</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? Easter c√≥ Th·ªè ph·ª•c sinh. Thanksgiving c√≥ G√† t√¢y. Halloween c√≥ B√≠ ng√¥. Kh√¥ng li√™n quan ƒë·∫øn √îng gi√† Noel.</p>`
    },
    {
        type: "mcq",
        qText: "4. Drivers have to ______ the seatbelt while they are driving.",
        options: ["A. fasten", "B. keep", "C. get on", "D. open"],
        correctAnswer: 0,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: T√†i x·∫ø ph·∫£i ______ d√¢y an to√†n trong khi h·ªç ƒëang l√°i xe.</p>
        <p><b>B∆∞·ªõc 2:</b> D·ªãch ƒë√°p √°n:<br>A. th·∫Øt (d√¢y).<br>B. gi·ªØ.<br>C. l√™n xe.<br>D. m·ªü.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn A? C·ª•m t·ª´ c·ªë ƒë·ªãnh (Collocation): <b>fasten the seatbelt</b> c√≥ nghƒ©a l√† th·∫Øt d√¢y an to√†n.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? C√°c t·ª´ c√≤n l·∫°i gh√©p v·ªõi "seatbelt" kh√¥ng t·∫°o th√†nh c·ª•m t·ª´ c√≥ nghƒ©a (kh√¥ng ai n√≥i m·ªü d√¢y an to√†n trong l√∫c ƒëang l√°i xe).</p>`
    },
    {
        type: "mcq",
        qText: "5. Countries around the world have many driving ______ that differ from Vietnam.",
        options: ["A. lights", "B. signs", "C. laws", "D. licenses"],
        correctAnswer: 2,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: C√°c qu·ªëc gia tr√™n th·∫ø gi·ªõi c√≥ nhi·ªÅu ______ l√°i xe kh√°c bi·ªát so v·ªõi Vi·ªát Nam.</p>
        <p><b>B∆∞·ªõc 2:</b> D·ªãch ƒë√°p √°n:<br>A. ƒë√®n.<br>B. bi·ªÉn b√°o.<br>C. lu·∫≠t l·ªá.<br>D. b·∫±ng l√°i.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn C? D·ª±a tr√™n ng·ªØ c·∫£nh chung tr·ªãnh tr·ªçng, <b>driving laws</b> (lu·∫≠t giao th√¥ng) mang t√≠nh bao qu√°t v√† kh√°c bi·ªát gi·ªØa c√°c qu·ªëc gia nh·∫•t (nh∆∞ l√°i xe b√™n tr√°i ·ªü Anh).</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? ƒê√®n giao th√¥ng (lights) hay b·∫±ng l√°i xe v·ªÅ c∆° b·∫£n ·ªü ƒë√¢u c≈©ng gi·ªëng nhau v·ªÅ ch·ª©c nƒÉng. Laws l√† ƒë√°p √°n ph√π h·ª£p nh·∫•t v·ªÅ m·∫∑t ng·ªØ nghƒ©a vƒ© m√¥.</p>`
    },
    {
        type: "mcq",
        qText: "6. Even if you're in a hurry, you ______ speed up and drive carelessly.",
        options: ["A. should", "B. can", "C. shouldn't", "D. can't"],
        correctAnswer: 2,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Ngay c·∫£ khi b·∫°n ƒëang v·ªôi, b·∫°n ______ tƒÉng t·ªëc v√† l√°i xe c·∫©u th·∫£.</p>
        <p><b>B∆∞·ªõc 2:</b> D·ªãch ƒë√°p √°n:<br>A. n√™n.<br>B. c√≥ th·ªÉ.<br>C. kh√¥ng n√™n.<br>D. kh√¥ng th·ªÉ.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn C? ƒê√¢y l√† c√¢u ƒë∆∞a ra l·ªùi khuy√™n. L√°i xe c·∫©u th·∫£ (carelessly) l√† vi·ªác x·∫•u, do ƒë√≥ c·∫ßn khuy√™n l√† <b>kh√¥ng n√™n (shouldn't)</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? Khuy√™n "n√™n" (A) l√† x√∫i b·∫≠y. B v√† D n√≥i v·ªÅ kh·∫£ nƒÉng (c√≥ th·ªÉ/kh√¥ng th·ªÉ l√†m g√¨), kh√¥ng ph√π h·ª£p v·ªõi ng·ªØ kh√≠ khuy√™n nh·ªß an to√†n giao th√¥ng.</p>`
    },
    {
        type: "mcq",
        qText: "7. On Christmas Eve, the ______ family gathers for dinner, usually at my grandmother‚Äôs house.",
        options: ["A. entire", "B. total", "C. mere", "D. complete"],
        correctAnswer: 0,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: V√†o ƒê√™m Gi√°ng Sinh, ______ gia ƒë√¨nh t·ª• t·∫≠p ƒÉn t·ªëi, th∆∞·ªùng l√† ·ªü nh√† b√† t√¥i.</p>
        <p><b>B∆∞·ªõc 2:</b> D·ªãch ƒë√°p √°n:<br>A. to√†n b·ªô (th∆∞·ªùng ƒëi v·ªõi c·ª•m danh t·ª´).<br>B. t·ªïng s·ªë.<br>C. ch·ªâ l√†.<br>D. ho√†n ch·ªânh.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn A? C·ª•m t·ª´ c·ªë ƒë·ªãnh <b>the entire family</b> (ho·∫∑c the whole family) d√πng ƒë·ªÉ ch·ªâ "to√†n th·ªÉ gia ƒë√¨nh / c·∫£ nh√†".</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? "total" d√πng cho con s·ªë t√≠nh to√°n. "complete" d√πng cho vi·ªác ho√†n th√†nh. "mere" sai nghƒ©a ho√†n to√†n.</p>`
    },
    {
        type: "mcq",
        qText: "8. Luckily, the rain ______ so we were able to play the match.",
        options: ["A. watered down", "B. gave out", "C. got away", "D. held off"],
        correctAnswer: 3,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: May m·∫Øn thay, c∆°n m∆∞a ƒë√£ ______ n√™n ch√∫ng t√¥i ƒë√£ c√≥ th·ªÉ ch∆°i tr·∫≠n ƒë·∫•u.</p>
        <p><b>B∆∞·ªõc 2:</b> Ph√¢n t√≠ch Phrasal verbs (C·ª•m ƒë·ªông t·ª´):<br>A. water down: l√†m lo√£ng (ch·∫•t l·ªèng) / l√†m d·ªãu ƒëi.<br>B. give out: c·∫°n ki·ªát, h·ªèng h√≥c.<br>C. get away: tr·ªën tho√°t.<br>D. hold off: ch∆∞a x·∫£y ra, tr√¨ ho√£n l·∫°i.</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn D? <b>hold off</b> khi n√≥i v·ªÅ th·ªùi ti·∫øt c√≥ nghƒ©a l√† tr·ªùi ch∆∞a ƒë·ªï m∆∞a (tr√¨ ho√£n l·∫°i). Nh·ªù v·∫≠y m·ªõi ch∆°i ƒë∆∞·ª£c tr·∫≠n ƒë·∫•u.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? A, B, C ho√†n to√†n kh√¥ng ph√π h·ª£p ng·ªØ c·∫£nh v·ªÅ th·ªùi ti·∫øt.</p>`
    },
    {
        type: "mcq",
        qText: "9. ______ being frightened by the images, Lan still liked the film so much.",
        options: ["A. In spite", "B. Despite", "C. Although", "D. Nevertheless"],
        correctAnswer: 1,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: ______ b·ªã ho·∫£ng s·ª£ b·ªüi c√°c h√¨nh ·∫£nh, Lan v·∫´n r·∫•t th√≠ch b·ªô phim.</p>
        <p><b>B∆∞·ªõc 2:</b> Ph√¢n t√≠ch ng·ªØ ph√°p:<br>A. In spite (sai v√¨ thi·∫øu 'of').<br>B. Despite (+ V-ing/N): M·∫∑c d√π.<br>C. Although (+ S + V): M·∫∑c d√π.<br>D. Nevertheless: Tuy nhi√™n (ƒë·ª©ng ƒë·∫ßu c√¢u ƒë·ªôc l·∫≠p).</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn B? Ngay sau √¥ tr·ªëng l√† m·ªôt ƒë·ªông t·ª´ th√™m ƒëu√¥i -ing (being). Theo c·∫•u tr√∫c ch·ªâ c√≥ <b>Despite + V-ing</b> l√† h·ª£p l·ªá.</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? A thi·∫øu 'of'. C ph·∫£i ƒëi v·ªõi m·ªôt m·ªánh ƒë·ªÅ ƒë·∫ßy ƒë·ªß (S+V). D sai nghƒ©a v√† d·∫•u c√¢u.</p>`
    },
    {
        type: "mcq",
        qText: "10. The festival ______ annually in August.",
        options: ["A. occurs", "B. helds", "C. takes place", "D. are held"],
        correctAnswer: 2,
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: L·ªÖ h·ªôi ______ h√†ng nƒÉm v√†o th√°ng T√°m.</p>
        <p><b>B∆∞·ªõc 2:</b> D·ªãch ƒë√°p √°n:<br>A. x·∫£y ra (d√πng cho tai n·∫°n/s·ª± c·ªë).<br>B. t·ªï ch·ª©c (sai ng·ªØ ph√°p).<br>C. di·ªÖn ra (d√πng cho s·ª± ki·ªán c√≥ k·∫ø ho·∫°ch).<br>D. ƒë∆∞·ª£c t·ªï ch·ª©c (chia s·ªë nhi·ªÅu).</p>
        <p><b>B∆∞·ªõc 3:</b> T·∫°i sao ch·ªçn C? S·ª± ki·ªán/l·ªÖ h·ªôi c√≥ s·ª± s·∫Øp x·∫øp l·ªãch tr√¨nh ta d√πng c·ª•m t·ª´ <b>takes place</b> (di·ªÖn ra).</p>
        <p><b>B∆∞·ªõc 4:</b> T·∫°i sao kia sai? A d√πng cho nh·ªØng vi·ªác ng·∫´u nhi√™n (tai n·∫°n). B sai v√¨ "hold" ph·∫£i d√πng b·ªã ƒë·ªông (is held). D sai v√¨ "the festival" l√† s·ªë √≠t, kh√¥ng d√πng "are".</p>`
    },

    { sectionTitle: "IV. Give the correct form of the words in brackets." },
    {
        type: "input",
        qText: "1. It is unsafe and <input type='text' class='text-input' placeholder='legal...'> to pass another vehicle on the left.",
        correctAnswers: ["illegal"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: Th·∫≠t kh√¥ng an to√†n v√† (tr√°i lu·∫≠t) khi v∆∞·ª£t m·ªôt ph∆∞∆°ng ti·ªán kh√°c ·ªü b√™n tr√°i.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> T·ª´ "and" n·ªëi 2 t·ª´ c√πng lo·∫°i. Ph√≠a tr∆∞·ªõc l√† "unsafe" (t√≠nh t·ª´ mang nghƒ©a ti√™u c·ª±c), ph√≠a sau c·∫ßn t√≠nh t·ª´ ph·∫£n nghƒ©a c·ªßa "legal" (h·ª£p ph√°p). Th√™m ti·ªÅn t·ªë il- ta ƒë∆∞·ª£c <b>illegal</b> (b·∫•t h·ª£p ph√°p).</p>
        <p><b>B∆∞·ªõc 4:</b> N·∫øu ƒë·ªÉ nguy√™n "legal" s·∫Ω sai logic (ƒë√£ kh√¥ng an to√†n sao l·∫°i c√≤n h·ª£p ph√°p?).</p>`
    },
    {
        type: "input",
        qText: "2. Signs with red circles are mostly <input type='text' class='text-input' placeholder='prohibit...'> ‚Äî that means you can‚Äôt do something.",
        correctAnswers: ["prohibitive", "prohibitions"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: C√°c bi·ªÉn b√°o c√≥ v√≤ng tr√≤n ƒë·ªè h·∫ßu h·∫øt ƒë·ªÅu mang t√≠nh (c·∫•m ƒëo√°n) ‚Äî ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† b·∫°n kh√¥ng ƒë∆∞·ª£c l√†m g√¨ ƒë√≥.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> ƒê·ª©ng sau ƒë·ªông t·ª´ to-be (are) v√† tr·∫°ng t·ª´ (mostly), ta c·∫ßn m·ªôt t√≠nh t·ª´ mi√™u t·∫£ t√≠nh ch·∫•t c·ªßa bi·ªÉn b√°o. T√≠nh t·ª´ c·ªßa "prohibit" l√† <b>prohibitive</b> (mang t√≠nh c·∫•m ƒëo√°n).</p>
        <p><b>B∆∞·ªõc 4:</b> (L∆∞u √Ω: M·ªôt s·ªë ƒë√°p √°n ch·∫•p nh·∫≠n danh t·ª´ s·ªë nhi·ªÅu "prohibitions" ƒë√≥ng vai tr√≤ b·ªï ng·ªØ, nh∆∞ng prohibitive chu·∫©n x√°c nh·∫•t cho b√†i thi form Word Formation).</p>`
    },
    {
        type: "input",
        qText: "3. This is a <input type='text' class='text-input' placeholder='frighten...'> story, you shouldn't read it alone.",
        correctAnswers: ["frightening"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: ƒê√¢y l√† m·ªôt c√¢u chuy·ªán (ƒë√°ng s·ª£), b·∫°n kh√¥ng n√™n ƒë·ªçc n√≥ m·ªôt m√¨nh.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> V·ªã tr√≠ tr∆∞·ªõc danh t·ª´ "story" (c√¢u chuy·ªán) c·∫ßn m·ªôt T√≠nh t·ª´ b·ªï nghƒ©a. V√¨ c√¢u chuy·ªán c√≥ t√≠nh ch·∫•t 'g√¢y ra s·ª± s·ª£ h√£i' cho ng∆∞·ªùi ƒë·ªçc, ta d√πng t√≠nh t·ª´ ƒëu√¥i -ing: <b>frightening</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> Kh√¥ng d√πng "frightened" v√¨ t√≠nh t·ª´ ƒëu√¥i -ed ch·ªâ d√πng mi√™u t·∫£ c·∫£m x√∫c con ng∆∞·ªùi (VD: I am frightened).</p>`
    },
    {
        type: "input",
        qText: "4. This film made a strong <input type='text' class='text-input' placeholder='impress...'> on me.",
        correctAnswers: ["impression"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: B·ªô phim n√†y ƒë√£ t·∫°o ra m·ªôt (·∫•n t∆∞·ª£ng) m·∫°nh m·∫Ω ƒë·ªëi v·ªõi t√¥i.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> C·∫•u tr√∫c <b>make an impression on sb</b> (t·∫°o ·∫•n t∆∞·ª£ng l√™n ai). Sau m·∫°o t·ª´ "a" v√† t√≠nh t·ª´ "strong" b·∫Øt bu·ªôc ph·∫£i l√† Danh t·ª´. Danh t·ª´ c·ªßa "impress" l√† <b>impression</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> ƒêi·ªÅn "impressive" (t√≠nh t·ª´) l√† sai v√¨ v·ªã tr√≠ n√†y ƒëang c·∫ßn danh t·ª´ l√†m t√¢n ng·ªØ.</p>`
    },
    {
        type: "input",
        qText: "5. The film was <input type='text' class='text-input' placeholder='succeed...'> though they spent millions of dollars making it.",
        correctAnswers: ["unsuccessful"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: B·ªô phim (kh√¥ng th√†nh c√¥ng) m·∫∑c d√π h·ªç ƒë√£ ti√™u t·ªën h√†ng tri·ªáu ƒë√¥ la ƒë·ªÉ s·∫£n xu·∫•t n√≥.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> ƒê·ª©ng sau to-be (was) c·∫ßn m·ªôt t√≠nh t·ª´. Tuy nhi√™n, v·∫ø sau b·∫Øt ƒë·∫ßu b·∫±ng "though" (m·∫∑c d√π) th·ªÉ hi·ªán s·ª± t∆∞∆°ng ph·∫£n. T·ªën nhi·ªÅu ti·ªÅn nh∆∞ng k·∫øt qu·∫£ l·∫°i th·∫•t b·∫°i. Th√™m ti·ªÅn t·ªë "un-" v√†o t√≠nh t·ª´ successful -> <b>unsuccessful</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> N·∫øu b·∫°n ch·ªâ ƒëi·ªÅn "successful" l√† b·∫°n ch∆∞a d·ªãch k·ªπ nghƒ©a t∆∞∆°ng ph·∫£n c·ªßa c√¢u (s·∫≠p b·∫´y!).</p>`
    },
    {
        type: "input",
        qText: "6. There is a great <input type='text' class='text-input' placeholder='celebrate...'> for women on March 3rd every year.",
        correctAnswers: ["celebration"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: C√≥ m·ªôt (s·ª± ki·ªán ƒÉn m·ª´ng/l·ªÖ k·ªâ ni·ªám) l·ªõn d√†nh cho ph·ª• n·ªØ v√†o ng√†y 3 th√°ng 3 h√†ng nƒÉm.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> Sau m·∫°o t·ª´ "a" v√† t√≠nh t·ª´ "great" c·∫ßn m·ªôt Danh t·ª´. Danh t·ª´ c·ªßa ƒë·ªông t·ª´ "celebrate" l√† <b>celebration</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> Kh√¥ng ƒë∆∞·ª£c chia s·ªë nhi·ªÅu (celebrations) v√¨ ph√≠a tr∆∞·ªõc c√≥ m·∫°o t·ª´ "a".</p>`
    },
    {
        type: "input",
        qText: "7. A festival includes many live <input type='text' class='text-input' placeholder='perform...'> of singing and musical instrument playing.",
        correctAnswers: ["performances"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: M·ªôt l·ªÖ h·ªôi bao g·ªìm nhi·ªÅu (ti·∫øt m·ª•c bi·ªÉu di·ªÖn) tr·ª±c ti·∫øp c·ªßa vi·ªác ca h√°t v√† ch∆°i nh·∫°c c·ª•.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> Sau l∆∞·ª£ng t·ª´ "many" (nhi·ªÅu) v√† t√≠nh t·ª´ "live" c·∫ßn m·ªôt Danh t·ª´ s·ªë nhi·ªÅu. Danh t·ª´ c·ªßa "perform" l√† "performance", th√™m -s th√†nh <b>performances</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> N·∫øu b·∫°n ch·ªâ vi·∫øt "performance" (s·ªë √≠t) th√¨ s·∫Ω b·ªã tr·ª´ ƒëi·ªÉm do sai ng·ªØ ph√°p ƒëi k√®m "many".</p>`
    },
    {
        type: "input",
        qText: "8. What I like about festivals is that they show the <input type='text' class='text-input' placeholder='culture...'> values of different communities.",
        correctAnswers: ["cultural"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: ƒêi·ªÅu t√¥i th√≠ch ·ªü c√°c l·ªÖ h·ªôi l√† ch√∫ng th·ªÉ hi·ªán c√°c gi√° tr·ªã (thu·ªôc v·ªÅ vƒÉn h√≥a) c·ªßa c√°c c·ªông ƒë·ªìng kh√°c nhau.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> Tr∆∞·ªõc danh t·ª´ "values" (gi√° tr·ªã) c·∫ßn m·ªôt T√≠nh t·ª´ b·ªï nghƒ©a. T√≠nh t·ª´ c·ªßa "culture" l√† <b>cultural</b> (thu·ªôc v·ªÅ vƒÉn h√≥a).</p>
        <p><b>B∆∞·ªõc 4:</b> N·∫øu ƒë·ªÉ nguy√™n danh t·ª´ "culture" (ki·ªÉu danh t·ª´ gh√©p culture values) s·∫Ω kh√¥ng t·ª± nhi√™n v√† kh√¥ng chu·∫©n x√°c b·∫±ng t√≠nh t·ª´ "cultural values" trong ch∆∞∆°ng tr√¨nh h·ªçc.</p>`
    },
    {
        type: "input",
        qText: "9. It's time to put away the Christmas <input type='text' class='text-input' placeholder='decorate...'>.",
        correctAnswers: ["decorations"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: ƒê√£ ƒë·∫øn l√∫c c·∫•t ƒëi c√°c (ƒë·ªì trang tr√≠) Gi√°ng sinh.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> Sau m·∫°o t·ª´ "the" v√† danh t·ª´ "Christmas" c·∫ßn m·ªôt Danh t·ª´ ch√≠nh. ƒê·ªì trang tr√≠ th∆∞·ªùng d√πng s·ªë nhi·ªÅu v√¨ c√≥ nhi·ªÅu m√≥n ƒë·ªì. Danh t·ª´ c·ªßa "decorate" l√† "decoration", th√™m -s -> <b>decorations</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> Thi·∫øu "s" c√≥ th·ªÉ b·ªã c√°c th·∫ßy c√¥ g·∫°ch ƒëi v√¨ ƒë·ªì trang tr√≠ Noel th∆∞·ªùng lu√¥n l√† m·ªôt t·∫≠p h·ª£p nhi·ªÅu v·∫≠t d·ª•ng.</p>`
    },
    {
        type: "input",
        qText: "10. That film is not <input type='text' class='text-input' placeholder='amuse...'> despite being a comedy.",
        correctAnswers: ["amusing"],
        explanation: `<h4>GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
        <p><b>B∆∞·ªõc 1:</b> D·ªãch: B·ªô phim ƒë√≥ kh√¥ng h·ªÅ (h√†i h∆∞·ªõc / th√∫ v·ªã) m·∫∑c d√π n√≥ l√† m·ªôt b·ªô phim h√†i.</p>
        <p><b>B∆∞·ªõc 2 & 3:</b> ƒê·ª©ng sau ƒë·ªông t·ª´ to-be (is) c·∫ßn t√≠nh t·ª´ mi√™u t·∫£ t√≠nh ch·∫•t c·ªßa b·ªô phim. B·ªô phim mang t√≠nh ch·∫•t g√¢y c∆∞·ªùi -> D√πng t√≠nh t·ª´ ƒëu√¥i -ing: <b>amusing</b>.</p>
        <p><b>B∆∞·ªõc 4:</b> Kh√¥ng d√πng "amused" v√¨ n√≥ mi√™u t·∫£ c·∫£m x√∫c con ng∆∞·ªùi (T√¥i c·∫£m th·∫•y bu·ªìn c∆∞·ªùi = I am amused).</p>`
    }
];

let totalScore = 0;
let answeredCount = 0;

function initQuiz() {
    const container = document.getElementById('quiz-container');
    quizData.forEach((item, index) => {
        if (item.sectionTitle) {
            const title = document.createElement('div');
            title.className = 'section-title';
            title.innerHTML = item.sectionTitle;
            container.appendChild(title);
            return;
        }

        const card = document.createElement('div');
        card.className = 'question-card';

        // MCQ ABCD
        if (item.type === 'mcq') {
            let optionsHTML = '';
            let shuffledOptions = item.options.map((opt, i) => ({ text: opt, isCorrect: i === item.correctAnswer }));
            shuffledOptions.sort(() => Math.random() - 0.5); // Shuffle A B C D text essentially

            shuffledOptions.forEach(opt => {
                optionsHTML += `<button class="option-btn" onclick="checkMCQ(this, ${opt.isCorrect}, 'exp_${index}')">${opt.text}</button>`;
            });

            card.innerHTML = `
                <div class="q-text">${item.qText}</div>
                <div class="options-grid">${optionsHTML}</div>
                <div class="explanation" id="exp_${index}">${item.explanation}</div>
            `;
        } 
        // Gap Fill
        else if (item.type === 'input') {
            card.innerHTML = `
                <div class="q-text">${item.qText}</div>
                <div class="input-group">
                    <button class="check-btn" onclick="checkInput(this, ${index}, 'exp_${index}')">Ki·ªÉm tra ngay</button>
                </div>
                <div class="explanation" id="exp_${index}">${item.explanation}</div>
            `;
        }

        container.appendChild(card);
    });
}

function checkMCQ(btn, isCorrect, expId) {
    const parent = btn.parentElement;
    Array.from(parent.children).forEach(child => child.disabled = true);

    if (isCorrect) {
        btn.classList.add('correct');
        playSound('correct');
        fireConfetti();
        totalScore++;
    } else {
        btn.classList.add('wrong');
        btn.classList.add('shake');
        playSound('wrong');
        Array.from(parent.children).forEach(child => {
            if(child.onclick.toString().includes('true')) child.classList.add('correct');
        });
    }

    document.getElementById(expId).style.display = 'block';
    answeredCount++;
}

function checkInput(btn, itemIndex, expId) {
    const card = btn.closest('.question-card');
    const input = card.querySelector('.text-input');
    const correctAnswers = quizData[itemIndex].correctAnswers;
    
    let userVal = input.value.trim().toLowerCase().replace(/[.]$/, '').replace(/\s+/g, ' '); 
    let match = correctAnswers.some(ans => ans.toLowerCase().replace(/[.]$/, '').replace(/\s+/g, ' ') === userVal);
    
    if (match) {
        input.style.borderColor = "var(--correct)";
        input.style.backgroundColor = "#eaffea";
        playSound('correct');
        fireConfetti();
        totalScore++;
    } else {
        input.style.borderColor = "var(--wrong)";
        input.style.backgroundColor = "#ffebee";
        playSound('wrong');
        btn.classList.add('shake');
        setTimeout(() => btn.classList.remove('shake'), 400);
    }
    
    input.disabled = true;
    btn.disabled = true;
    document.getElementById(expId).style.display = 'block';
    answeredCount++;
}

function submitTest() {
    let totalQuestions = quizData.filter(i => i.type).length;
    let percent = Math.round((totalScore / totalQuestions) * 100);
    
    let message = "";
    if (percent === 100) message = "B·∫†N ƒê·ªàNH QU√Å! 100 ƒêI·ªÇM XU·∫§T S·∫ÆC! üèÜüöÄ";
    else if (percent >= 80) message = "R·∫§T XU·∫§T S·∫ÆC! TI·∫æP T·ª§C PH√ÅT HUY NH√â! üåüüöÄ";
    else if (percent >= 50) message = "KH√Å L·∫ÆM! √îN TH√äM CH√öT N·ªÆA L√Ä BAY V√ÄO V≈® TR·ª§ LUN! üõ∏üëç";
    else message = "KH√îNG SAO ƒê√ÇU! ƒê·ªåC K·ª∏ GI·∫¢I TH√çCH V√Ä L√ÄM L·∫†I NH√â! üí™";

    alert(`B·∫†N ƒê√É L√ÄM XONG B√ÄI!\n\nS·ªë ƒëi·ªÉm: ${totalScore} / ${totalQuestions} (${percent}%)\n\n${message}`);
    if (percent >= 50) {
        fireConfetti();
        setTimeout(fireConfetti, 500);
    }
}

window.onload = initQuiz;
</script>

</body>
</html>