<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i t·∫≠p Li√™n t·ª´ - Ms Mai An ULIS</title>
    <!-- Google Fonts: Nunito & Quicksand -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-pastel: #F0F3F8;
            --text-dark: #2D3436;
            --card-shadow: 0 8px 0 rgba(0,0,0,0.15);
            --card-shadow-hover: 0 12px 0 rgba(0,0,0,0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #74b9ff;
            background-image: radial-gradient(#81ecec 20%, transparent 20%),
                              radial-gradient(#81ecec 20%, transparent 20%);
            background-position: 0 0, 50px 50px;
            background-size: 100px 100px;
            color: var(--text-dark);
            min-height: 100vh;
            padding-bottom: 50px;
        }

        /* Header Styles */
        header {
            background: #fff;
            padding: 20px;
            text-align: center;
            border-bottom: 5px solid rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1 {
            font-family: 'Quicksand', sans-serif;
            color: var(--primary-purple);
            font-weight: 800;
            font-size: 2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0px #dfe6e9;
        }

        .subtitle {
            color: var(--primary-teal);
            font-weight: 700;
            font-size: 1.1rem;
            margin-top: 5px;
        }

        /* Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Question Card */
        .quiz-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 0 rgba(0,0,0,0.05);
            border: 2px solid #dfe6e9;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .question-number {
            display: inline-block;
            background: var(--primary-purple);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: 800;
            margin-bottom: 15px;
            font-size: 0.9rem;
            box-shadow: 0 3px 0 rgba(0,0,0,0.2);
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 25px;
            line-height: 1.5;
            color: #2d3436;
        }

        /* Answer Options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            .question-text {
                font-size: 1.2rem;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: #636e72;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            box-shadow: 0 4px 0 #e0e0e0;
            text-align: left;
            display: flex;
            align-items: center;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #e0e0e0;
            border-color: var(--primary-teal);
            color: var(--primary-teal);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 0 0 #e0e0e0;
        }

        .option-label {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 30px;
            height: 30px;
            background: #f1f2f6;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: 800;
            font-size: 0.9rem;
            color: #b2bec3;
        }

        /* States */
        .option-btn.correct {
            background: var(--correct-green);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 4px 0 #00b85c;
        }
        .option-btn.correct .option-label {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn.wrong {
            background: var(--wrong-red);
            color: white;
            border-color: #e84118;
            box-shadow: 0 4px 0 #e84118;
            animation: shake 0.5s;
        }
        .option-btn.wrong .option-label {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }
        
        .option-btn.dimmed {
            opacity: 0.5;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #f8f9fa;
            border-left: 5px solid var(--primary-purple);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            display: none; /* Hidden by default */
            animation: popIn 0.4s ease-out forwards;
        }

        .explanation-header {
            font-weight: 800;
            color: var(--primary-purple);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #2d3436;
            white-space: pre-wrap; /* Keeps line breaks from data */
        }
        
        .explanation-content strong {
            color: #d63031;
            background: #ffeaa7;
            padding: 0 4px;
            border-radius: 4px;
        }

        /* Footer / Score */
        .finish-btn-container {
            text-align: center;
            margin-top: 40px;
        }

        .finish-btn {
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #6c429e;
            transition: all 0.2s;
            font-family: 'Quicksand', sans-serif;
        }

        .finish-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 0 #6c429e;
            background: #9c6ade;
        }

        .finish-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #6c429e;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        /* Score Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 0 rgba(0,0,0,0.1);
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .score-number {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary-teal);
            margin: 20px 0;
            text-shadow: 3px 3px 0 #b2bec3;
        }

        .feedback-text {
            font-size: 1.2rem;
            color: #636e72;
            margin-bottom: 30px;
        }

    </style>
</head>
<body>

    <header>
        <h1>Ms. Mai An ULIS</h1>
        <div class="subtitle">B√†i t·∫≠p Li√™n t·ª´ & Tr·∫°ng t·ª´ li√™n k·∫øt (Exercise 8, 9, 10)</div>
    </header>

    <div class="container" id="quiz-container">
        <!-- Questions will be injected here by JavaScript -->
    </div>

    <div class="finish-btn-container">
        <button class="finish-btn" onclick="showFinalScore()">N·ªòP B√ÄI & XEM ƒêI·ªÇM</button>
    </div>

    <!-- Score Modal -->
    <div class="modal-overlay" id="scoreModal">
        <div class="modal-content">
            <h2>K·∫æT QU·∫¢ C·ª¶A CON</h2>
            <div class="score-number" id="finalScoreDisplay">0/30</div>
            <p class="feedback-text" id="finalFeedback">C·ªë g·∫Øng l√™n nh√©!</p>
            <button class="finish-btn" onclick="closeModal()">L√†m l·∫°i b√†i</button>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <!-- Audio Elements using Base64 to keep single file -->
    <!-- Ding (Correct) -->
    <audio id="audio-correct" src="data:audio/mp3;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAG1xUAA5CAAOd86376kf/uQDAAABip9UEbIpC2OeOozRzFbdEP7lRIt12t2//+7UAIWthhD//+D0+gxEnRG5KB//uQDAAAAgFQD0a688EuJ1iOA7XgO///0Lf////66M7kHK/9IT+gH65k39PT15bb//uQDAAAAgF8Dw71419130mMg5Jb////80P////701/iTB8NCNlVHkv/3fZ5+e//uQDAAAAgF8Dw71419130mMg5Jb////80P////701/iTB8NCNlVHkv/3fZ5+e"></audio>
    <!-- Buzz (Wrong) -->
    <audio id="audio-wrong" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="></audio>

    <script>
        // --- DATA ---
        const quizData = [
    {
      "questionNumber": 1,
      "question": "I haven‚Äôt gone to a movie yet. ________, I don‚Äôt feel sad.",
      "answerOptions": [
        { "text": "However", "isCorrect": true },
        { "text": "Although", "isCorrect": false },
        { "text": "But", "isCorrect": false },
        { "text": "So", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. D√πng cho s·ª± t∆∞∆°ng ph·∫£n, ƒë·ª©ng sau d·∫•u ch·∫•m v√† tr∆∞·ªõc d·∫•u ph·∫©y.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. However: Tuy nhi√™n (ƒë·ª©ng ƒë·∫ßu c√¢u, c√≥ d·∫•u ph·∫©y ph√≠a sau)\n- B. Although: M·∫∑c d√π (ƒëi li·ªÅn v·ªõi m·ªánh ƒë·ªÅ, kh√¥ng c√≥ d·∫•u ph·∫©y ngay sau)\n- C. But: Nh∆∞ng (th∆∞·ªùng kh√¥ng ƒë·ª©ng ƒë·∫ßu c√¢u trong vƒÉn vi·∫øt trang tr·ªçng)\n- D. So: V√¨ v·∫≠y\n\n**Gi·∫£i th√≠ch:** C·∫•u tr√∫c: [C√¢u 1]. However, [C√¢u 2].\n\n**D·ªãch c√¢u:** T√¥i v·∫´n ch∆∞a ƒëi xem phim. Tuy nhi√™n, t√¥i kh√¥ng c·∫£m th·∫•y bu·ªìn."
    },
    {
      "questionNumber": 2,
      "question": "Happy ending is an old trend. ________, people enjoy it.",
      "answerOptions": [
        { "text": "But", "isCorrect": false },
        { "text": "However", "isCorrect": true },
        { "text": "Therefore", "isCorrect": false },
        { "text": "Although", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ s·ª± t∆∞∆°ng ph·∫£n.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. But: Nh∆∞ng\n- B. However: Tuy nhi√™n\n- C. Therefore: Do ƒë√≥\n- D. Although: M·∫∑c d√π\n\n**Gi·∫£i th√≠ch:** D·∫•u hi·ªáu: ƒê·ª©ng ƒë·∫ßu c√¢u v√† c√≥ d·∫•u ph·∫©y ( , ) ph√≠a sau.\n\n**D·ªãch c√¢u:** K·∫øt th√∫c c√≥ h·∫≠u l√† m·ªôt xu h∆∞·ªõng c≈©. Tuy nhi√™n, m·ªçi ng∆∞·ªùi v·∫´n th√≠ch n√≥."
    },
    {
      "questionNumber": 3,
      "question": "I really like the film ________ most critics say it‚Äôs not worth seeing.",
      "answerOptions": [
        { "text": "though", "isCorrect": true },
        { "text": "and", "isCorrect": false },
        { "text": "so", "isCorrect": false },
        { "text": "or", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. 'Though' = 'Although', ch·ªâ s·ª± nh∆∞·ª£ng b·ªô.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. and: v√†\n- B. though: m·∫∑c d√π\n- C. so: v√¨ v·∫≠y\n- D. or: ho·∫∑c\n\n**Gi·∫£i th√≠ch:** Hai v·∫ø ƒë·ªëi l·∫≠p: Th√≠ch phim (like) >< C√°c nh√† ph√™ b√¨nh ch√™ (not worth seeing).\n\n**D·ªãch c√¢u:** T√¥i th·ª±c s·ª± th√≠ch b·ªô phim n√†y m·∫∑c d√π h·∫ßu h·∫øt c√°c nh√† ph√™ b√¨nh n√≥i r·∫±ng n√≥ kh√¥ng ƒë√°ng xem."
    },
    {
      "questionNumber": 4,
      "question": "I feel as badly as you do, ________ we don‚Äôt have time for this.",
      "answerOptions": [
        { "text": "but", "isCorrect": true },
        { "text": "though", "isCorrect": false },
        { "text": "so", "isCorrect": false },
        { "text": "because", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. N·ªëi hai m·ªánh ƒë·ªÅ ƒë·ªëi l·∫≠p.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. though: m·∫∑c d√π (th∆∞·ªùng kh√¥ng ƒëi sau d·∫•u ph·∫©y theo c√°ch n√†y ƒë·ªÉ n·ªëi c√¢u ƒë·∫≥ng l·∫≠p)\n- B. but: nh∆∞ng\n- C. so: v√¨ v·∫≠y\n- D. because: b·ªüi v√¨\n\n**Gi·∫£i th√≠ch:** T√¥i c≈©ng bu·ªìn, NH∆ØNG ch√∫ng ta kh√¥ng c√≥ th·ªùi gian ƒë·ªÉ bu·ªìn ƒë√¢u.\n\n**D·ªãch c√¢u:** T√¥i c≈©ng c·∫£m th·∫•y t·ªìi t·ªá nh∆∞ b·∫°n, nh∆∞ng ch√∫ng ta kh√¥ng c√≥ th·ªùi gian cho vi·ªác n√†y ƒë√¢u."
    },
    {
      "questionNumber": 5,
      "question": "Linh can‚Äôt get tickets ________ she has queued for hours.",
      "answerOptions": [
        { "text": "although", "isCorrect": true },
        { "text": "or", "isCorrect": false },
        { "text": "so", "isCorrect": false },
        { "text": "because", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. M·ªánh ƒë·ªÅ ch·ªâ s·ª± nh∆∞·ª£ng b·ªô.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although: m·∫∑c d√π\n- B. or: ho·∫∑c\n- C. so: v√¨ v·∫≠y\n- D. because: b·ªüi v√¨\n\n**Gi·∫£i th√≠ch:** T∆∞∆°ng ph·∫£n: Kh√¥ng mua ƒë∆∞·ª£c v√© >< ƒê√£ x·∫øp h√†ng nhi·ªÅu gi·ªù.\n\n**D·ªãch c√¢u:** Linh kh√¥ng th·ªÉ mua v√© m·∫∑c d√π c√¥ ·∫•y ƒë√£ x·∫øp h√†ng nhi·ªÅu gi·ªù li·ªÅn."
    },
    {
      "questionNumber": 6,
      "question": "He knows Chinese, ________ he can watch the film without the subtitles.",
      "answerOptions": [
        { "text": "so", "isCorrect": true },
        { "text": "and", "isCorrect": false },
        { "text": "but", "isCorrect": false },
        { "text": "or", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ k·∫øt qu·∫£.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. and: v√†\n- B. so: v√¨ v·∫≠y, cho n√™n\n- C. but: nh∆∞ng\n- D. or: ho·∫∑c\n\n**Gi·∫£i th√≠ch:** Nguy√™n nh√¢n: Bi·∫øt ti·∫øng Trung -> K·∫øt qu·∫£: Xem phim kh√¥ng c·∫ßn ph·ª• ƒë·ªÅ.\n\n**D·ªãch c√¢u:** Anh ·∫•y bi·∫øt ti·∫øng Trung, v√¨ v·∫≠y anh ·∫•y c√≥ th·ªÉ xem phim m√† kh√¥ng c·∫ßn ph·ª• ƒë·ªÅ."
    },
    {
      "questionNumber": 7,
      "question": "Please be quiet, ________ you will wake the baby up.",
      "answerOptions": [
        { "text": "or", "isCorrect": true },
        { "text": "however", "isCorrect": false },
        { "text": "and", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ h·∫≠u qu·∫£/s·ª± l·ª±a ch·ªçn.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. however: tuy nhi√™n\n- B. or: ho·∫∑c, n·∫øu kh√¥ng th√¨ (trong c√¢u m·ªánh l·ªánh)\n- C. and: v√†\n- D. so: v√¨ v·∫≠y\n\n**Gi·∫£i th√≠ch:** Trong c√¢u m·ªánh l·ªánh, 'or' mang nghƒ©a c·∫£nh b√°o: 'H√£y l√†m ƒëi, n·∫øu kh√¥ng th√¨...'.\n\n**D·ªãch c√¢u:** L√†m ∆°n tr·∫≠t t·ª± ƒëi, n·∫øu kh√¥ng b·∫°n s·∫Ω ƒë√°nh th·ª©c em b√© d·∫≠y ƒë·∫•y."
    },
    {
      "questionNumber": 8,
      "question": "Leonardo was nominated for six films. ________, he only won one.",
      "answerOptions": [
        { "text": "However", "isCorrect": true },
        { "text": "Though", "isCorrect": false },
        { "text": "Therefore", "isCorrect": false },
        { "text": "But", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. ƒê·ª©ng ƒë·∫ßu c√¢u, c√≥ d·∫•u ph·∫©y.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. Though: M·∫∑c d√π (kh√¥ng ƒë·ª©ng ƒë·∫ßu c√¢u r·ªìi ph·∫©y ngay)\n- B. However: Tuy nhi√™n\n- C. Therefore: Do ƒë√≥\n- D. But: Nh∆∞ng\n\n**Gi·∫£i th√≠ch:** T∆∞∆°ng ph·∫£n: ƒê·ªÅ c·ª≠ 6 >< Th·∫Øng 1. C·∫•u tr√∫c [Ch·∫•m] + However + [Ph·∫©y].\n\n**D·ªãch c√¢u:** Leonardo ƒë∆∞·ª£c ƒë·ªÅ c·ª≠ cho 6 b·ªô phim. Tuy nhi√™n, anh ·∫•y ch·ªâ th·∫Øng m·ªôt gi·∫£i."
    },
    {
      "questionNumber": 9,
      "question": "The film is based on a story in the 19th century ________ it is set in modern time.",
      "answerOptions": [
        { "text": "though", "isCorrect": true },
        { "text": "so", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "or", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ s·ª± t∆∞∆°ng ph·∫£n.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. so: v√¨ v·∫≠y\n- B. though: m·∫∑c d√π\n- C. because: b·ªüi v√¨\n- D. or: ho·∫∑c\n\n**Gi·∫£i th√≠ch:** D·ª±a tr√™n truy·ªán th·∫ø k·ª∑ 19 >< B·ªëi c·∫£nh hi·ªán ƒë·∫°i. Hai √Ω ng∆∞·ª£c nhau.\n\n**D·ªãch c√¢u:** B·ªô phim d·ª±a tr√™n m·ªôt c√¢u chuy·ªán ·ªü th·∫ø k·ª∑ 19 m·∫∑c d√π n√≥ ƒë∆∞·ª£c ƒë·∫∑t trong b·ªëi c·∫£nh hi·ªán ƒë·∫°i."
    },
    {
      "questionNumber": 10,
      "question": "He can‚Äôt hear, ________ he can hardly speak either.",
      "answerOptions": [
        { "text": "and", "isCorrect": true },
        { "text": "because", "isCorrect": false },
        { "text": "but", "isCorrect": false },
        { "text": "or", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. B·ªï sung th√¥ng tin.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. and: v√†\n- B. because: b·ªüi v√¨\n- C. but: nh∆∞ng\n- D. or: ho·∫∑c\n\n**Gi·∫£i th√≠ch:** 'can hardly speak either' (c≈©ng h·∫ßu nh∆∞ kh√¥ng n√≥i ƒë∆∞·ª£c). T·ª´ 'either' ·ªü cu·ªëi c√¢u ph·ªß ƒë·ªãnh g·ª£i √Ω s·ª± b·ªï sung t∆∞∆°ng ƒë·ªìng -> d√πng 'and'.\n\n**D·ªãch c√¢u:** Anh ·∫•y kh√¥ng th·ªÉ nghe, v√† anh ·∫•y c≈©ng h·∫ßu nh∆∞ kh√¥ng th·ªÉ n√≥i."
    },
    {
      "questionNumber": 11,
      "question": "They went on holiday ________ they didn‚Äôt have much money.",
      "answerOptions": [
        { "text": "although", "isCorrect": true },
        { "text": "however", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "despite", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. ƒêi li·ªÅn v·ªõi m·ªánh ƒë·ªÅ nh∆∞·ª£ng b·ªô.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although: m·∫∑c d√π\n- B. however: tuy nhi√™n\n- C. because: b·ªüi v√¨\n- D. despite: m·∫∑c d√π\n\n**Gi·∫£i th√≠ch:** 'they didn't have much money' l√† m·ªánh ƒë·ªÅ. Nghƒ©a t∆∞∆°ng ph·∫£n (ƒêi ch∆°i >< √≠t ti·ªÅn). Kh√¥ng c√≥ d·∫•u ph·∫©y ngƒÉn c√°ch -> d√πng 'although'.\n\n**D·ªãch c√¢u:** H·ªç ƒë√£ ƒëi ngh·ªâ m√°t m·∫∑c d√π h·ªç kh√¥ng c√≥ nhi·ªÅu ti·ªÅn."
    },
    {
      "questionNumber": 12,
      "question": "He left on time; ________, heavy traffic caused him to be late.",
      "answerOptions": [
        { "text": "however", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "so", "isCorrect": false },
        { "text": "but", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. D·∫•u hi·ªáu: ; ____ ,\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. so\n- D. but\n\n**Gi·∫£i th√≠ch:** C√≥ d·∫•u ch·∫•m ph·∫©y tr∆∞·ªõc v√† d·∫•u ph·∫©y sau -> D√πng 'however' ƒë·ªÉ ch·ªâ s·ª± t∆∞∆°ng ph·∫£n.\n\n**D·ªãch c√¢u:** Anh ·∫•y ƒëi ƒë√∫ng gi·ªù; tuy nhi√™n, giao th√¥ng √πn t·∫Øc ƒë√£ khi·∫øn anh ·∫•y b·ªã mu·ªôn."
    },
    {
      "questionNumber": 13,
      "question": "________ he is a good personal trainer, they don‚Äôt like him very much.",
      "answerOptions": [
        { "text": "Although", "isCorrect": true },
        { "text": "However", "isCorrect": false },
        { "text": "Because", "isCorrect": false },
        { "text": "Despite", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. ƒê·ª©ng ƒë·∫ßu c√¢u, ƒëi v·ªõi m·ªánh ƒë·ªÅ.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. Although\n- B. However\n- C. Because\n- D. Despite\n\n**Gi·∫£i th√≠ch:** T∆∞∆°ng ph·∫£n: Gi·ªèi >< Kh√¥ng ƒë∆∞·ª£c th√≠ch. 'Although' ƒë·ª©ng ƒë·∫ßu c√¢u + M·ªánh ƒë·ªÅ + Ph·∫©y + M·ªánh ƒë·ªÅ ch√≠nh.\n\n**D·ªãch c√¢u:** M·∫∑c d√π anh ·∫•y l√† m·ªôt hu·∫•n luy·ªán vi√™n c√° nh√¢n gi·ªèi, h·ªç kh√¥ng th√≠ch anh ·∫•y l·∫Øm."
    },
    {
      "questionNumber": 14,
      "question": "She feels extremely tired ________ she went to bed early last night.",
      "answerOptions": [
        { "text": "although", "isCorrect": true },
        { "text": "however", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. M·ªánh ƒë·ªÅ nh∆∞·ª£ng b·ªô.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. because\n- D. so\n\n**Gi·∫£i th√≠ch:** M·ªát m·ªèi >< Ng·ªß s·ªõm. Kh√¥ng c√≥ d·∫•u ph·∫©y -> d√πng 'although'.\n\n**D·ªãch c√¢u:** C√¥ ·∫•y c·∫£m th·∫•y c·ª±c k·ª≥ m·ªát m·ªèi m·∫∑c d√π t·ªëi qua c√¥ ·∫•y ƒë√£ ƒëi ng·ªß s·ªõm."
    },
    {
      "questionNumber": 15,
      "question": "They‚Äôre still going camping ________ it will be raining all weekend.",
      "answerOptions": [
        { "text": "although", "isCorrect": true },
        { "text": "however", "isCorrect": false },
        { "text": "but", "isCorrect": false },
        { "text": "despite", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. but\n- D. despite\n\n**Gi·∫£i th√≠ch:** V·∫´n ƒëi c·∫Øm tr·∫°i >< Tr·ªùi m∆∞a. D√πng 'although' n·ªëi hai m·ªánh ƒë·ªÅ.\n\n**D·ªãch c√¢u:** H·ªç v·∫´n s·∫Ω ƒëi c·∫Øm tr·∫°i m·∫∑c d√π tr·ªùi s·∫Ω m∆∞a c·∫£ cu·ªëi tu·∫ßn."
    },
    {
      "questionNumber": 16,
      "question": "Kha Ly speaks English well ________ first language is Vietnamese.",
      "answerOptions": [
        { "text": "although", "isCorrect": true },
        { "text": "however", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. L∆∞u √Ω: c√¢u g·ªëc thi·∫øu t√≠nh t·ª´ s·ªü h·ªØu 'her', gi·∫£ ƒë·ªãnh l√† 'her first language'.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. because\n- D. so\n\n**Gi·∫£i th√≠ch:** N√≥i gi·ªèi >< Ti·∫øng m·∫π ƒë·∫ª l√† ti·∫øng Vi·ªát. D√πng 'although'.\n\n**D·ªãch c√¢u:** Kha Ly n√≥i ti·∫øng Anh t·ªët m·∫∑c d√π ti·∫øng m·∫π ƒë·∫ª l√† ti·∫øng Vi·ªát."
    },
    {
      "questionNumber": 17,
      "question": "Jolie speaks Vietnamese well; her first language, ________, is French.",
      "answerOptions": [
        { "text": "however", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "but", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. V·ªã tr√≠ xen gi·ªØa c√¢u, ngƒÉn c√°ch b·ªüi 2 d·∫•u ph·∫©y.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** Khi 'however' n·∫±m gi·ªØa m·ªôt m·ªánh ƒë·ªÅ, n√≥ ƒë∆∞·ª£c t√°ch b·ªüi hai d·∫•u ph·∫©y. Nghƒ©a t∆∞∆°ng ph·∫£n.\n\n**D·ªãch c√¢u:** Jolie n√≥i ti·∫øng Vi·ªát t·ªët; tuy nhi√™n, ng√¥n ng·ªØ m·∫π ƒë·∫ª c·ªßa c√¥ ·∫•y l√† ti·∫øng Ph√°p."
    },
    {
      "questionNumber": 18,
      "question": "My mother loves Bollywood movies ________ she doesn‚Äôt speak Hindi.",
      "answerOptions": [
        { "text": "although", "isCorrect": true },
        { "text": "however", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. because\n- D. so\n\n**Gi·∫£i th√≠ch:** Th√≠ch phim ·∫§n ƒê·ªô >< Kh√¥ng bi·∫øt ti·∫øng Hindi. D√πng 'although'.\n\n**D·ªãch c√¢u:** M·∫π t√¥i th√≠ch phim Bollywood m·∫∑c d√π b√† kh√¥ng n√≥i ti·∫øng Hindi."
    },
    {
      "questionNumber": 19,
      "question": "They will have dinner outside; ________, they will move inside in case of rain.",
      "answerOptions": [
        { "text": "however", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "but", "isCorrect": false },
        { "text": "or", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. D·∫•u hi·ªáu: ; ____ ,\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. but\n- D. or\n\n**Gi·∫£i th√≠ch:** D·ª± ƒë·ªãnh ƒÉn ngo√†i tr·ªùi, tuy nhi√™n, n·∫øu m∆∞a th√¨ v√†o trong.\n\n**D·ªãch c√¢u:** H·ªç s·∫Ω ƒÉn t·ªëi b√™n ngo√†i; tuy nhi√™n, h·ªç s·∫Ω chuy·ªÉn v√†o trong n·∫øu tr·ªùi m∆∞a."
    },
    {
      "questionNumber": 20,
      "question": "It‚Äôs a little late with the homework; ________, I manage to finish it by 5.30 pm.",
      "answerOptions": [
        { "text": "however", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "so", "isCorrect": false },
        { "text": "because", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. however\n- C. so\n- D. because\n\n**Gi·∫£i th√≠ch:** Mu·ªôn b√†i t·∫≠p >< V·∫´n xoay x·ªü xong. D·∫•u hi·ªáu: ; ____ ,\n\n**D·ªãch c√¢u:** ƒê√£ h∆°i tr·ªÖ b√†i t·∫≠p v·ªÅ nh√†; tuy nhi√™n, t√¥i xoay x·ªü xong tr∆∞·ªõc 5:30 chi·ªÅu."
    },
    {
      "questionNumber": 21,
      "question": "Everyone played well ________ we lost the game.",
      "answerOptions": [
        { "text": "but", "isCorrect": true },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false },
        { "text": "although", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. N·ªëi 2 √Ω tr√°i ng∆∞·ª£c.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** Ch∆°i hay >< Thua. D√πng 'but' (nh∆∞ng) l√† t·ª± nhi√™n nh·∫•t ƒë·ªÉ n·ªëi hai v·∫ø n√†y.\n\n**D·ªãch c√¢u:** M·ªçi ng∆∞·ªùi ƒë·ªÅu ch∆°i t·ªët nh∆∞ng ch√∫ng t√¥i ƒë√£ thua tr·∫≠n ƒë·∫•u."
    },
    {
      "questionNumber": 22,
      "question": "Our bus won‚Äôt start ________ the battery is flat.",
      "answerOptions": [
        { "text": "because", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "but", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ nguy√™n nh√¢n.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** Xe kh√¥ng n·ªï m√°y (k·∫øt qu·∫£) <- B√¨nh ·∫Øc quy h·∫øt ƒëi·ªán (nguy√™n nh√¢n).\n\n**D·ªãch c√¢u:** Xe bu√Ωt c·ªßa ch√∫ng t√¥i s·∫Ω kh√¥ng kh·ªüi ƒë·ªông v√¨ h·∫øt ·∫Øc quy."
    },
    {
      "questionNumber": 23,
      "question": "The new camera is expensive, ________ it is very good.",
      "answerOptions": [
        { "text": "but", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ t∆∞∆°ng ph·∫£n.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** ƒê·∫Øt ti·ªÅn >< Ch·∫•t l∆∞·ª£ng t·ªët (ƒë√°ng ti·ªÅn). C√≥ d·∫•u ph·∫©y tr∆∞·ªõc ƒë√≥ -> D√πng 'but'.\n\n**D·ªãch c√¢u:** Chi·∫øc m√°y ·∫£nh m·ªõi r·∫•t ƒë·∫Øt, nh∆∞ng n√≥ r·∫•t t·ªët."
    },
    {
      "questionNumber": 24,
      "question": "I love fast food a lot ________ it is not very healthy.",
      "answerOptions": [
        { "text": "although", "isCorrect": true },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false },
        { "text": "or", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ s·ª± nh∆∞·ª£ng b·ªô.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. so\n- D. or\n\n**Gi·∫£i th√≠ch:** Th√≠ch >< Kh√¥ng t·ªët cho s·ª©c kh·ªèe. 'Although' ph√π h·ª£p nh·∫•t ƒë·ªÉ ch·ªâ vi·ªác 'th√≠ch b·∫•t ch·∫•p l√Ω do'. ('But' c≈©ng ƒë√∫ng nh∆∞ng 'although' hay h∆°n trong ng·ªØ c·∫£nh trang tr·ªçng h∆°n m·ªôt ch√∫t).\n\n**D·ªãch c√¢u:** T√¥i th√≠ch ƒë·ªì ƒÉn nhanh r·∫•t nhi·ªÅu m·∫∑c d√π n√≥ kh√¥ng t·ªët cho s·ª©c kh·ªèe."
    },
    {
      "questionNumber": 25,
      "question": "I‚Äôd like to go with you, ________ I'm too busy right now.",
      "answerOptions": [
        { "text": "but", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. T·ª´ ch·ªëi l·ªãch s·ª±.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** Mu·ªën ƒëi (t√≠ch c·ª±c) >< B·∫≠n (ti√™u c·ª±c). C√≥ d·∫•u ph·∫©y -> D√πng 'but'.\n\n**D·ªãch c√¢u:** T√¥i mu·ªën ƒëi v·ªõi b·∫°n, nh∆∞ng hi·ªán t·∫°i t√¥i qu√° b·∫≠n."
    },
    {
      "questionNumber": 26,
      "question": "________ it was very cold, she wasn‚Äôt wearing a coat.",
      "answerOptions": [
        { "text": "Although", "isCorrect": true },
        { "text": "Because", "isCorrect": false },
        { "text": "But", "isCorrect": false },
        { "text": "So", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. ƒê·ª©ng ƒë·∫ßu c√¢u.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. Although\n- B. Because\n- C. But\n- D. So\n\n**Gi·∫£i th√≠ch:** L·∫°nh >< Kh√¥ng m·∫∑c √°o kho√°c. D√πng 'Although'.\n\n**D·ªãch c√¢u:** M·∫∑c d√π tr·ªùi r·∫•t l·∫°nh, c√¥ ·∫•y ƒë√£ kh√¥ng m·∫∑c √°o kho√°c."
    },
    {
      "questionNumber": 27,
      "question": "I invited her to the party, ________ she didn‚Äôt want to come.",
      "answerOptions": [
        { "text": "but", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** M·ªùi >< Kh√¥ng ƒë·∫øn. C√≥ d·∫•u ph·∫©y -> D√πng 'but'.\n\n**D·ªãch c√¢u:** T√¥i ƒë√£ m·ªùi c√¥ ·∫•y ƒë·∫øn b·ªØa ti·ªác, nh∆∞ng c√¥ ·∫•y kh√¥ng mu·ªën ƒë·∫øn."
    },
    {
      "questionNumber": 28,
      "question": "There are no buses this hour, ________ we need to catch a taxi.",
      "answerOptions": [
        { "text": "so", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "but", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ k·∫øt qu·∫£.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** H·∫øt xe bu√Ωt (nguy√™n nh√¢n) -> Ph·∫£i ƒëi taxi (k·∫øt qu·∫£).\n\n**D·ªãch c√¢u:** Gi·ªù n√†y kh√¥ng c√≤n xe bu√Ωt n√†o, v√¨ v·∫≠y ch√∫ng ta c·∫ßn b·∫Øt taxi."
    },
    {
      "questionNumber": 29,
      "question": "She bought a new laptop ________ she needs it for her job.",
      "answerOptions": [
        { "text": "because", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "but", "isCorrect": false },
        { "text": "so", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ m·ª•c ƒë√≠ch/nguy√™n nh√¢n.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** Mua laptop (h√†nh ƒë·ªông) <- C·∫ßn cho c√¥ng vi·ªác (l√Ω do).\n\n**D·ªãch c√¢u:** C√¥ ·∫•y ƒë√£ mua m·ªôt chi·∫øc laptop m·ªõi v√¨ c√¥ ·∫•y c·∫ßn n√≥ cho c√¥ng vi·ªác."
    },
    {
      "questionNumber": 30,
      "question": "It is warm and sunny today, ________ they are going to the beach.",
      "answerOptions": [
        { "text": "so", "isCorrect": true },
        { "text": "although", "isCorrect": false },
        { "text": "because", "isCorrect": false },
        { "text": "but", "isCorrect": false }
      ],
      "rationale": "‚úÖ ƒê√∫ng. Ch·ªâ k·∫øt qu·∫£.\n\n**Ph√¢n t√≠ch & D·ªãch:**\n- A. although\n- B. because\n- C. but\n- D. so\n\n**Gi·∫£i th√≠ch:** Tr·ªùi ƒë·∫πp (nguy√™n nh√¢n) -> ƒêi bi·ªÉn (k·∫øt qu·∫£).\n\n**D·ªãch c√¢u:** H√¥m nay tr·ªùi n·∫Øng ·∫•m, v√¨ v·∫≠y h·ªç s·∫Ω ƒëi bi·ªÉn."
    }
  ];

        let correctCount = 0;

        // --- HELPER FUNCTIONS ---
        function formatRationale(text) {
            // Converts newlines to <br> and **text** to <strong>text</strong>
            let formatted = text.replace(/\n/g, '<br>');
            formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            // Bold A., B., C., D. for clarity
            formatted = formatted.replace(/([ABCD]\.) /g, '<strong>$1</strong> ');
            return formatted;
        }

        // --- CONFETTI ENGINE ---
        const confettiCanvas = document.getElementById('confetti-canvas');
        const ctx = confettiCanvas.getContext('2d');
        confettiCanvas.width = window.innerWidth;
        confettiCanvas.height = window.innerHeight;

        let particles = [];
        const colors = ['#f1c40f', '#e74c3c', '#8e44ad', '#3498db', '#2ecc71'];

        function createConfetti() {
            particles = [];
            for (let i = 0; i < 150; i++) {
                particles.push({
                    x: Math.random() * confettiCanvas.width,
                    y: Math.random() * confettiCanvas.height - confettiCanvas.height,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 8 + 4,
                    speedY: Math.random() * 5 + 2,
                    speedX: Math.random() * 4 - 2,
                    angle: Math.random() * 360,
                    spin: Math.random() < 0.5 ? 1 : -1
                });
            }
            animateConfetti();
        }

        function animateConfetti() {
            if (particles.length === 0) {
                ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                return;
            }
            
            ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
            particles.forEach((p, index) => {
                p.y += p.speedY;
                p.x += p.speedX;
                p.angle += p.spin;
                
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.angle * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                ctx.restore();

                if (p.y > confettiCanvas.height) {
                    particles.splice(index, 1);
                }
            });
            requestAnimationFrame(animateConfetti);
        }

        // --- MAIN GAME LOGIC ---
        const container = document.getElementById('quiz-container');
        const dingSound = document.getElementById('audio-correct');
        const buzzSound = document.getElementById('audio-wrong');

        function renderQuiz() {
            quizData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.id = `card-${index}`;

                // Question
                const qNum = document.createElement('div');
                qNum.className = 'question-number';
                qNum.innerText = `C√¢u ${item.questionNumber}`;
                card.appendChild(qNum);

                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.innerText = item.question;
                card.appendChild(qText);

                // Options
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options-grid';
                
                const labels = ['A', 'B', 'C', 'D'];
                item.answerOptions.forEach((opt, optIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerHTML = `<span class="option-label">${labels[optIndex]}</span> ${opt.text}`;
                    btn.onclick = () => checkAnswer(index, optIndex, opt.isCorrect, btn);
                    optionsDiv.appendChild(btn);
                });
                card.appendChild(optionsDiv);

                // Explanation (Hidden initially)
                const expDiv = document.createElement('div');
                expDiv.className = 'explanation-box';
                expDiv.id = `exp-${index}`;
                expDiv.innerHTML = `
                    <div class="explanation-header">
                        <span>üë©‚Äçüè´</span> Gi·∫£i th√≠ch chi ti·∫øt t·ª´ Ms. Mai An:
                    </div>
                    <div class="explanation-content">
                        ${formatRationale(item.rationale)}
                    </div>
                `;
                card.appendChild(expDiv);

                container.appendChild(card);
            });
        }

        function checkAnswer(questionIndex, optIndex, isCorrect, btnElement) {
            const card = document.getElementById(`card-${questionIndex}`);
            const buttons = card.querySelectorAll('.option-btn');
            
            // Disable all buttons in this card
            buttons.forEach(b => {
                b.disabled = true;
                if(b !== btnElement) b.classList.add('dimmed');
            });

            if (isCorrect) {
                // Correct
                btnElement.classList.add('correct');
                dingSound.currentTime = 0;
                dingSound.play().catch(e => console.log("Audio requires interaction first"));
                createConfetti();
                correctCount++;
            } else {
                // Wrong: Highlight selected as wrong, and find the correct one
                btnElement.classList.add('wrong');
                // Fake buzzer sound needs to be created, using correct audio for demo
                // Ideally, use a different base64 for buzz
                // Re-using a dummy "wrong" sound loaded in HTML
                const buzz = new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU"+Array(100).join("A")); // Short buzz placeholder logic if needed, but using HTML tag instead
                // Actually playing the audio tag element
                try {
                    buzzSound.currentTime = 0;
                    buzzSound.play();
                } catch(e){}

                // Highlight the actual correct answer
                const options = quizData[questionIndex].answerOptions;
                options.forEach((opt, idx) => {
                    if (opt.isCorrect) {
                        buttons[idx].classList.remove('dimmed');
                        buttons[idx].classList.add('correct');
                    }
                });
            }

            // Show explanation
            const expBox = document.getElementById(`exp-${questionIndex}`);
            expBox.style.display = 'block';
        }

        function showFinalScore() {
            const modal = document.getElementById('scoreModal');
            const scoreDisplay = document.getElementById('finalScoreDisplay');
            const feedback = document.getElementById('finalFeedback');
            
            scoreDisplay.innerText = `${correctCount}/${quizData.length}`;
            
            const percentage = (correctCount / quizData.length) * 100;
            if (percentage === 100) {
                feedback.innerText = "Xu·∫•t s·∫Øc! Con l√† thi√™n t√†i ngo·∫°i ng·ªØ! üåü";
                createConfetti();
            } else if (percentage >= 80) {
                feedback.innerText = "Gi·ªèi l·∫Øm! Con l√†m b√†i r·∫•t t·ªët! üí™";
            } else if (percentage >= 50) {
                feedback.innerText = "Kh√° t·ªët, nh∆∞ng h√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch th√™m nh√©! üìö";
            } else {
                feedback.innerText = "ƒê·ª´ng bu·ªìn, h√£y √¥n t·∫≠p l·∫°i c√πng c√¥ Mai An n√†o! ‚ù§";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            location.reload();
        }

        // Initialize
        renderQuiz();

    </script>
</body>
</html>
