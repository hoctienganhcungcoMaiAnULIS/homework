<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 10: Error Correction & Word Forms - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-purple: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-pattern: #f0f3f9;
            --card-bg: #ffffff;
            --text-dark: #2c3e50;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-pattern);
            background-image: radial-gradient(var(--primary-purple) 0.5px, transparent 0.5px), radial-gradient(var(--primary-purple) 0.5px, #f0f3f9 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            margin: 0;
            padding: 0;
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- Header --- */
        header {
            background: white;
            width: 100%;
            padding: 15px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 5px solid var(--primary-teal);
        }

        .teacher-brand {
            font-family: 'Quicksand', sans-serif;
            font-size: 1.2rem;
            color: var(--primary-purple);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .exam-title {
            font-size: 1.5rem;
            color: var(--text-dark);
            margin: 5px 0 0 0;
            font-weight: 900;
        }

        /* --- Main Container --- */
        .container {
            width: 90%;
            max-width: 800px;
            margin: 30px auto 100px auto;
        }

        /* --- Question Card --- */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1), 0 0 20px rgba(0,0,0,0.05);
            position: relative;
            transition: transform 0.3s ease;
            border: 2px solid #eee;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .q-tag {
            background: var(--primary-purple);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            box-shadow: 0 3px 0 rgba(0,0,0,0.2);
        }

        .q-part {
            background: var(--primary-teal);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #333;
        }

        /* Highlight keywords inside question */
        .question-text span.highlight-q {
            color: var(--primary-purple);
            border-bottom: 2px dashed var(--primary-purple);
        }

        /* --- Options Grid --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            position: relative;
            box-shadow: 0 4px 0 #e0e0e0;
            display: flex;
            align-items: center;
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--primary-purple);
            background-color: #f8f0ff;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #dcdcdc;
        }

        .option-circle {
            width: 30px;
            height: 30px;
            background: #eee;
            color: #777;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: 800;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-green);
            color: white;
            border-color: #00a855;
            box-shadow: 0 4px 0 #00a855;
        }
        .option-btn.correct .option-circle {
            background: white;
            color: var(--correct-green);
        }

        .option-btn.incorrect {
            background-color: var(--wrong-red);
            color: white;
            border-color: #d63031;
            box-shadow: 0 4px 0 #d63031;
            animation: shake 0.5s;
        }
        .option-btn.incorrect .option-circle {
            background: white;
            color: var(--wrong-red);
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* --- Explanation Box --- */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 25px;
            background: #f0fcfeb0;
            border: 2px solid var(--primary-teal);
            border-radius: 15px;
            padding: 20px;
            animation: fadeIn 0.5s ease-out;
        }

        .exp-header {
            display: flex;
            align-items: center;
            color: var(--primary-teal);
            font-weight: 800;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .exp-header i {
            margin-right: 10px;
            font-size: 1.3rem;
        }

        .exp-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #444;
            white-space: pre-wrap; /* Preserve formatting from JSON */
        }
        
        .exp-content strong {
            color: var(--primary-purple);
        }

        /* --- Footer / Controls --- */
        .footer-controls {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            z-index: 99;
        }

        .submit-btn {
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 30px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 5px 0 #6c429c;
            transition: all 0.2s;
            font-family: 'Quicksand', sans-serif;
            text-transform: uppercase;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 0 #6c429c;
        }
        
        .submit-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #6c429c;
        }

        /* --- Animations --- */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Result Modal --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 5px solid var(--primary-purple);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-display {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-purple);
            margin: 20px 0;
            text-shadow: 3px 3px 0px #eee;
        }

        .feedback-msg {
            font-size: 1.4rem;
            color: #555;
            margin-bottom: 30px;
        }

        .reset-btn {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 0 #009e82;
        }
        
        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #009e82;
        }

    </style>
</head>
<body>

    <header>
        <div class="teacher-brand"><i class="fas fa-graduation-cap"></i> Ms Mai An ULIS</div>
        <div class="exam-title">UNIT 10: ERROR CORRECTION & WORD FORMS</div>
    </header>

    <div class="container" id="quiz-container">
        <!-- Questions will be injected here via JavaScript -->
    </div>

    <div class="footer-controls">
        <button class="submit-btn" onclick="finishExam()">N·ªôp B√†i & Xem ƒêi·ªÉm</button>
    </div>

    <!-- Result Modal -->
    <div class="modal-overlay" id="resultModal">
        <div class="modal-content">
            <h2 style="color: var(--primary-teal); margin:0;">K·∫æT QU·∫¢ B√ÄI THI</h2>
            <div class="score-display" id="finalScore">0/30</div>
            <p class="feedback-msg" id="feedbackMsg">B·∫°n l√†m r·∫•t t·ªët!</p>
            <button class="reset-btn" onclick="location.reload()"><i class="fas fa-redo"></i> L√†m l·∫°i b√†i</button>
            <button class="reset-btn" style="background: #ccc; box-shadow: 0 4px 0 #999; margin-left:10px" onclick="closeModal()">Xem l·∫°i b√†i</button>
        </div>
    </div>

    <!-- Audio Effects (Base64 placeholders to ensure single file function) -->
    <!-- Sound Effects using public URLs for reliability -->
    <audio id="sound-correct" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
    <audio id="sound-finish" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>

<script>
    // --- DATA SOURCE ---
    const quizData = [
        {
            "id": 1,
            "type": "Error Correction",
            "question": "Choose the mistake: A friend of [my] is very good at [making] [three-dimensional] [images].",
            "options": ["my", "is", "making", "images"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. my (t√≠nh t·ª´ s·ªü h·ªØu): c·ªßa t√¥i -> <b>Sai</b>, v√¨ 'my' lu√¥n ph·∫£i ƒëi k√®m danh t·ª´ ngay ph√≠a sau (v√≠ d·ª•: my friend).\n- B. making (V-ing): l√†m -> ƒê√∫ng (sau gi·ªõi t·ª´ 'at').\n- C. three-dimensional (adj): ba chi·ªÅu -> ƒê√∫ng.\n- D. images (noun): h√¨nh ·∫£nh -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"M·ªôt ng∆∞·ªùi b·∫°n c·ªßa t√¥i r·∫•t gi·ªèi trong vi·ªác t·∫°o ra c√°c h√¨nh ·∫£nh ba chi·ªÅu.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- C·∫•u tr√∫c s·ªü h·ªØu k√©p (Double Possessive): A friend of + ƒê·∫°i t·ª´ s·ªü h·ªØu (mine/yours/hers...) ho·∫∑c S·ªü h·ªØu c√°ch (Tom's).\n- <b>S·ª≠a:</b> my -> mine."
        },
        {
            "id": 2,
            "type": "Error Correction",
            "question": "Choose the mistake: The computer room, [where] you [take] your online test, is [in] the end of this [hall].",
            "options": ["in", "where", "take", "hall"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. where (tr·∫°ng t·ª´ quan h·ªá): n∆°i m√† -> ƒê√∫ng.\n- B. take (verb): l√†m (b√†i ki·ªÉm tra) -> ƒê√∫ng.\n- C. in (prep): trong -> <b>Sai</b>.\n- D. hall (noun): h√†nh lang -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Ph√≤ng m√°y t√≠nh, n∆°i b·∫°n l√†m b√†i ki·ªÉm tra tr·ª±c tuy·∫øn, n·∫±m ·ªü cu·ªëi h√†nh lang n√†y.\"\n\n<b>3. T·∫°i sao ch·ªçn C?</b>\n- C·ª•m t·ª´ c·ªë ƒë·ªãnh (Idiom): 'At the end of' (·ªü ƒëi·ªÉm cu·ªëi/t·∫≠n c√πng c·ªßa c√°i g√¨), kh√¥ng d√πng 'in the end of'. ('In the end' ƒë·ª©ng m·ªôt m√¨nh nghƒ©a l√† 'cu·ªëi c√πng th√¨/k·∫øt c·ª•c').\n- <b>S·ª≠a:</b> in -> at."
        },
        {
            "id": 3,
            "type": "Error Correction",
            "question": "Choose the mistake: Electronic mail is [the] [popular] method of communication these days because it's fast, [efficient], and [expensive].",
            "options": ["expensive", "the", "popular", "efficient"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. the (m·∫°o t·ª´) -> ƒê√∫ng.\n- B. popular (adj): ph·ªï bi·∫øn -> ƒê√∫ng.\n- C. efficient (adj): hi·ªáu qu·∫£ -> ƒê√∫ng.\n- D. expensive (adj): ƒë·∫Øt ƒë·ªè -> <b>Sai v·ªÅ logic nghƒ©a</b>.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Th∆∞ ƒëi·ªán t·ª≠ l√† ph∆∞∆°ng th·ª©c giao ti·∫øp ph·ªï bi·∫øn ng√†y nay v√¨ n√≥ nhanh, hi·ªáu qu·∫£ v√†... (ƒë·∫Øt ti·ªÅn??).\"\n\n<b>3. T·∫°i sao ch·ªçn D?</b>\n- Email ph·ªï bi·∫øn v√¨ n√≥ r·∫ª (cheap/inexpensive). H∆°n n·ªØa, c√°c t√≠nh t·ª´ 'fast', 'efficient' mang nghƒ©a t√≠ch c·ª±c, t·ª´ n·ªëi 'and' y√™u c·∫ßu t·ª´ ti·∫øp theo c≈©ng ph·∫£i c√πng tr∆∞·ªùng nghƒ©a t√≠ch c·ª±c/l·ª£i √≠ch.\n- <b>S·ª≠a:</b> expensive -> inexpensive / cheap."
        },
        {
            "id": 4,
            "type": "Error Correction",
            "question": "Choose the mistake: Two of [theirs] employees are [presenting] new [functions] of Facebook at the [moment].",
            "options": ["theirs", "presenting", "functions", "moment"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. theirs (ƒë·∫°i t·ª´ s·ªü h·ªØu): c√°i c·ªßa h·ªç -> <b>Sai</b>.\n- B. presenting (V-ing): ƒëang thuy·∫øt tr√¨nh -> ƒê√∫ng.\n- C. functions (noun): t√≠nh nƒÉng -> ƒê√∫ng.\n- D. moment (noun): l√∫c n√†y -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Hai trong s·ªë c√°c nh√¢n vi√™n c·ªßa h·ªç ƒëang tr√¨nh b√†y c√°c t√≠nh nƒÉng m·ªõi c·ªßa Facebook v√†o l√∫c n√†y.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- Ph√≠a sau l√† danh t·ª´ 'employees'. Tr∆∞·ªõc danh t·ª´ ph·∫£i d√πng T√≠nh t·ª´ s·ªü h·ªØu (Possessive Adjective).\n- <b>S·ª≠a:</b> theirs -> their."
        },
        {
            "id": 5,
            "type": "Error Correction",
            "question": "Choose the mistake: He decided [to not] apply [for] that job [because] he didn't meet all the qualifications.",
            "options": ["to not", "for", "because", "meet"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. to not -> <b>Sai tr·∫≠t t·ª± t·ª´</b>.\n- B. for (prep): ·ª©ng tuy·ªÉn cho -> ƒê√∫ng (apply for).\n- C. because (conj): b·ªüi v√¨ -> ƒê√∫ng.\n- D. meet (verb): ƒë√°p ·ª©ng -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Anh ·∫•y quy·∫øt ƒë·ªãnh kh√¥ng n·ªôp ƒë∆°n cho c√¥ng vi·ªác ƒë√≥ v√¨ anh ·∫•y kh√¥ng ƒë√°p ·ª©ng ƒë·ªß c√°c b·∫±ng c·∫•p.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- C·∫•u tr√∫c ph·ªß ƒë·ªãnh c·ªßa To-infinitive l√†: not + to V.\n- <b>S·ª≠a:</b> to not -> not to."
        },
        {
            "id": 6,
            "type": "Error Correction",
            "question": "Choose the mistake: [While] overseas, I use iMessage and FaceTime to keep [on] touch [with] family and [friends].",
            "options": ["on", "While", "with", "friends"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. While (conj): trong khi -> ƒê√∫ng.\n- B. on (prep) -> <b>Sai</b>.\n- C. with (prep) -> ƒê√∫ng.\n- D. friends (noun) -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Trong khi ·ªü n∆∞·ªõc ngo√†i, t√¥i d√πng iMessage v√† FaceTime ƒë·ªÉ gi·ªØ li√™n l·∫°c v·ªõi gia ƒë√¨nh v√† b·∫°n b√®.\"\n\n<b>3. T·∫°i sao ch·ªçn B?</b>\n- Th√†nh ng·ªØ (Idiom): 'keep in touch with' (gi·ªØ li√™n l·∫°c v·ªõi), kh√¥ng d√πng 'on'.\n- <b>S·ª≠a:</b> on -> in."
        },
        {
            "id": 7,
            "type": "Error Correction",
            "question": "Choose the mistake: [Most] teenagers say they'd rather [to talk] to their friends [online] than see them [in person].",
            "options": ["to talk", "Most", "online", "in person"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. Most (adj): H·∫ßu h·∫øt -> ƒê√∫ng.\n- B. to talk -> <b>Sai</b>.\n- C. online (adv/adj) -> ƒê√∫ng.\n- D. in person (idiom): tr·ª±c ti·∫øp -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"H·∫ßu h·∫øt thanh thi·∫øu ni√™n n√≥i r·∫±ng h·ªç th√† n√≥i chuy·ªán v·ªõi b·∫°n b√® tr·ª±c tuy·∫øn h∆°n l√† g·∫∑p m·∫∑t tr·ª±c ti·∫øp.\"\n\n<b>3. T·∫°i sao ch·ªçn B?</b>\n- C·∫•u tr√∫c: Would rather + V_bare (nguy√™n m·∫´u kh√¥ng to) ... than ...\n- <b>S·ª≠a:</b> to talk -> talk."
        },
        {
            "id": 8,
            "type": "Error Correction",
            "question": "Choose the mistake: [Because] social media networks, we are now able to [interact] [with] thousands of people all [over] the world.",
            "options": ["Because", "interact", "with", "over"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. Because (conj) -> <b>Sai</b>.\n- B. interact (verb): t∆∞∆°ng t√°c -> ƒê√∫ng.\n- C. with (prep) -> ƒê√∫ng.\n- D. over (prep) -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Nh·ªù c√≥ c√°c m·∫°ng x√£ h·ªôi, ch√∫ng ta gi·ªù ƒë√¢y c√≥ th·ªÉ t∆∞∆°ng t√°c v·ªõi h√†ng ng√†n ng∆∞·ªùi tr√™n kh·∫Øp th·∫ø gi·ªõi.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- 'social media networks' l√† m·ªôt c·ª•m danh t·ª´ (Noun Phrase). 'Because' ph·∫£i ƒëi v·ªõi m·ªôt m·ªánh ƒë·ªÅ (S + V). ƒêi v·ªõi c·ª•m danh t·ª´ ph·∫£i d√πng 'Because of' ho·∫∑c 'Due to'.\n- <b>S·ª≠a:</b> Because -> Because of."
        },
        {
            "id": 9,
            "type": "Error Correction",
            "question": "Choose the mistake: Emojis [and] abbreviations are [common] used [in] text messages [among] teenagers.",
            "options": ["common", "and", "in", "among"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. and (conj) -> ƒê√∫ng.\n- B. common (adj): ph·ªï bi·∫øn -> <b>Sai t·ª´ lo·∫°i</b>.\n- C. in (prep) -> ƒê√∫ng.\n- D. among (prep): gi·ªØa/trong s·ªë -> ƒê√∫ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Emoji v√† t·ª´ vi·∫øt t·∫Øt ƒë∆∞·ª£c s·ª≠ d·ª•ng ph·ªï bi·∫øn trong tin nh·∫Øn vƒÉn b·∫£n c·ªßa thanh thi·∫øu ni√™n.\"\n\n<b>3. T·∫°i sao ch·ªçn B?</b>\n- 'Used' ·ªü ƒë√¢y l√† ƒë·ªông t·ª´ (d·∫°ng b·ªã ƒë·ªông). ƒê·ªÉ b·ªï nghƒ©a cho ƒë·ªông t·ª´/t√≠nh t·ª´, ta c·∫ßn m·ªôt Tr·∫°ng t·ª´ (Adverb).\n- <b>S·ª≠a:</b> common -> commonly."
        },
        {
            "id": 10,
            "type": "Error Correction",
            "question": "Choose the mistake: We [planned] to stay [in the bay] [in] a few days, and then [sail] for New York.",
            "options": ["in", "planned", "in the bay", "sail"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch l·ªói sai:</b>\n- A. planned (verb) -> ƒê√∫ng.\n- B. in the bay (prep phrase) -> ƒê√∫ng (·ªü trong v·ªãnh).\n- C. in (prep) -> <b>Sai</b>.\n- D. sail (verb) -> ƒê√∫ng (planned to stay... and then [to] sail).\n\n<b>2. D·ªãch nghƒ©a:</b> \"Ch√∫ng t√¥i ƒë√£ l√™n k·∫ø ho·∫°ch ·ªü l·∫°i trong v·ªãnh v√†i ng√†y, v√† sau ƒë√≥ ƒëi thuy·ªÅn ƒë·∫øn New York.\"\n\n<b>3. T·∫°i sao ch·ªçn C?</b>\n- 'In a few days' th∆∞·ªùng d√πng cho t∆∞∆°ng lai (trong v√†i ng√†y t·ªõi s·∫Ω x·∫£y ra vi·ªác g√¨). ƒê·ªÉ ch·ªâ ƒë·ªô d√†i th·ªùi gian l∆∞u tr√∫ (duration), ta d√πng gi·ªõi t·ª´ 'for'.\n- <b>S·ª≠a:</b> in -> for (for a few days)."
        },
        {
            "id": 11,
            "type": "Verb Form",
            "question": "Thirty years ago, very few people ______ in the possibility of telepathy.",
            "options": ["believed", "believe", "have believed", "were believing"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- D·∫•u hi·ªáu: 'Thirty years ago' (30 nƒÉm tr∆∞·ªõc) -> Th·ªùi ƒëi·ªÉm x√°c ƒë·ªãnh trong qu√° kh·ª© -> Qu√° kh·ª© ƒë∆°n (Past Simple).\n\n<b>2. D·ªãch nghƒ©a:</b> \"30 nƒÉm tr∆∞·ªõc, r·∫•t √≠t ng∆∞·ªùi tin v√†o kh·∫£ nƒÉng c·ªßa th·∫ßn giao c√°ch c·∫£m.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- ƒê·ªông t·ª´ 'believe' (tin) ·ªü qu√° kh·ª© ƒë∆°n l√† 'believed'."
        },
        {
            "id": 12,
            "type": "Verb Form",
            "question": "While I ______ the email, the computer suddenly went off.",
            "options": ["was writing", "wrote", "am writing", "have written"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- C·∫•u tr√∫c: While + Past Continuous (h√†nh ƒë·ªông ƒëang x·∫£y ra), Past Simple (h√†nh ƒë·ªông xen v√†o).\n- H√†nh ƒë·ªông xen v√†o: 'went off' (t·∫Øt ng·∫•m - Qu√° kh·ª© ƒë∆°n).\n\n<b>2. D·ªãch nghƒ©a:</b> \"Trong khi t√¥i ƒëang vi·∫øt email, m√°y t√≠nh ƒë·ªôt nhi√™n t·∫Øt ng·∫•m.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- H√†nh ƒë·ªông 'vi·∫øt' ƒëang di·ªÖn ra trong qu√° kh·ª© -> was writing."
        },
        {
            "id": 13,
            "type": "Verb Form",
            "question": "I ______ your phone because I was taking a shower.",
            "options": ["didn't answer", "don't answer", "haven't answered", "not answer"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- V·∫ø sau: 'because I was taking a shower' (v√¨ t√¥i ƒëang t·∫Øm - Qu√° kh·ª© ti·∫øp di·ªÖn).\n- V·∫ø tr∆∞·ªõc: K·∫øt qu·∫£ trong qu√° kh·ª© -> Qu√° kh·ª© ƒë∆°n (Past Simple).\n\n<b>2. D·ªãch nghƒ©a:</b> \"T√¥i ƒë√£ kh√¥ng nghe ƒëi·ªán tho·∫°i c·ªßa b·∫°n v√¨ l√∫c ƒë√≥ t√¥i ƒëang t·∫Øm.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- Ph·ªß ƒë·ªãnh qu√° kh·ª© ƒë∆°n: didn't + V_inf -> didn't answer."
        },
        {
            "id": 14,
            "type": "Verb Form",
            "question": "You can visit me right now. I ______ anything important.",
            "options": ["am not doing", "don't do", "didn't do", "haven't done"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- D·∫•u hi·ªáu: 'right now' (ngay b√¢y gi·ªù) -> Hi·ªán t·∫°i ti·∫øp di·ªÖn (Present Continuous).\n\n<b>2. D·ªãch nghƒ©a:</b> \"B·∫°n c√≥ th·ªÉ ƒë·∫øn thƒÉm t√¥i ngay b√¢y gi·ªù. T√¥i ƒëang kh√¥ng l√†m g√¨ quan tr·ªçng c·∫£.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- C·∫•u tr√∫c: am/is/are + not + V-ing -> am not doing."
        },
        {
            "id": 15,
            "type": "Verb Form",
            "question": "The conference ______ at 8 a.m. Don't be late!",
            "options": ["begins", "is beginning", "began", "has begun"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- Ng·ªØ c·∫£nh: L·ªãch tr√¨nh, th·ªùi gian bi·ªÉu c·ªë ƒë·ªãnh (timetable/schedule) -> Hi·ªán t·∫°i ƒë∆°n (Present Simple) mang nghƒ©a t∆∞∆°ng lai.\n\n<b>2. D·ªãch nghƒ©a:</b> \"H·ªôi ngh·ªã b·∫Øt ƒë·∫ßu l√∫c 8 gi·ªù s√°ng. ƒê·ª´ng ƒë·∫øn mu·ªôn!\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- Conference (s·ªë √≠t) -> begins."
        },
        {
            "id": 16,
            "type": "Verb Form",
            "question": "In the future people ______ brain-to-brain using telepathy.",
            "options": ["will communicate", "communicate", "communicated", "are communicating"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- D·∫•u hi·ªáu: 'In the future' (Trong t∆∞∆°ng lai) -> T∆∞∆°ng lai ƒë∆°n (Future Simple).\n\n<b>2. D·ªãch nghƒ©a:</b> \"Trong t∆∞∆°ng lai, con ng∆∞·ªùi s·∫Ω giao ti·∫øp t·ª´ n√£o ƒë·∫øn n√£o b·∫±ng th·∫ßn giao c√°ch c·∫£m.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- C·∫•u tr√∫c: will + V_inf -> will communicate."
        },
        {
            "id": 17,
            "type": "Verb Form",
            "question": "Jimmy and I ______ games on my smartphone when my friend sent me a message.",
            "options": ["were playing", "played", "are playing", "was playing"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- C·∫•u tr√∫c: When + Past Simple (h√†nh ƒë·ªông c·∫Øt ngang - 'sent'), Past Continuous (h√†nh ƒë·ªông ƒëang x·∫£y ra).\n\n<b>2. D·ªãch nghƒ©a:</b> \"Jimmy v√† t√¥i ƒëang ch∆°i game tr√™n ƒëi·ªán tho·∫°i th√¨ b·∫°n t√¥i g·ª≠i tin nh·∫Øn.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- H√†nh ƒë·ªông ch∆°i ƒëang di·ªÖn ra -> were playing (Jimmy and I l√† s·ªë nhi·ªÅu)."
        },
        {
            "id": 18,
            "type": "Verb Form",
            "question": "At present, people ______ more time \"connecting\" online and less time engaging in face-to-face.",
            "options": ["are spending", "spend", "spent", "have spent"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch th√¨:</b>\n- D·∫•u hi·ªáu: 'At present' (Hi·ªán t·∫°i/L√∫c n√†y) -> Hi·ªán t·∫°i ti·∫øp di·ªÖn (Present Continuous) ƒë·ªÉ ch·ªâ xu h∆∞·ªõng ƒëang di·ªÖn ra.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Hi·ªán t·∫°i, m·ªçi ng∆∞·ªùi ƒëang d√†nh nhi·ªÅu th·ªùi gian 'k·∫øt n·ªëi' tr·ª±c tuy·∫øn h∆°n v√† √≠t th·ªùi gian tham gia g·∫∑p m·∫∑t tr·ª±c ti·∫øp h∆°n.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- C·∫•u tr√∫c: are + V-ing -> are spending."
        },
        {
            "id": 19,
            "type": "Verb Form",
            "question": "We intend ______ to Australia next year to visit our daughter.",
            "options": ["to go", "going", "go", "went"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch c·∫•u tr√∫c:</b>\n- Intend + to V: C√≥ √Ω ƒë·ªãnh l√†m g√¨.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Ch√∫ng t√¥i d·ª± ƒë·ªãnh ƒëi √öc v√†o nƒÉm t·ªõi ƒë·ªÉ thƒÉm con g√°i.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- Theo sau ƒë·ªông t·ª´ 'intend' l√† to-infinitive -> to go."
        },
        {
            "id": 20,
            "type": "Verb Form",
            "question": "There's no point ______ for her to change her mind.",
            "options": ["waiting", "to wait", "wait", "waited"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch c·∫•u tr√∫c:</b>\n- There's no point (in) + V-ing: Ch·∫≥ng c√≥ √≠ch g√¨ khi l√†m g√¨.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Ch·∫≥ng c√≥ √≠ch g√¨ khi ch·ªù ƒë·ª£i c√¥ ·∫•y thay ƒë·ªïi quy·∫øt ƒë·ªãnh.\"\n\n<b>3. T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b>\n- C·∫•u tr√∫c c·ªë ƒë·ªãnh y√™u c·∫ßu Gerund (V-ing) -> waiting."
        },
        {
            "id": 21,
            "type": "Word Form",
            "question": "Twitter or Facebook is like a small ______ where people can voice their opinion.",
            "options": ["society", "social", "socialize", "socialism"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. society (noun): x√£ h·ªôi.\n- B. social (adj): thu·ªôc x√£ h·ªôi.\n- C. socialize (verb): x√£ h·ªôi h√≥a/giao l∆∞u.\n- D. socialism (noun): ch·ªß nghƒ©a x√£ h·ªôi.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Twitter hay Facebook gi·ªëng nh∆∞ m·ªôt x√£ h·ªôi thu nh·ªè n∆°i m·ªçi ng∆∞·ªùi c√≥ th·ªÉ l√™n ti·∫øng.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: Sau 'a small...' -> C·∫ßn Danh t·ª´ (Noun) h·ª£p nghƒ©a 'm·ªôt x√£ h·ªôi'."
        },
        {
            "id": 22,
            "type": "Word Form",
            "question": "Don't pay any ______ to what they say.",
            "options": ["attention", "attend", "attendance", "attentive"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. attention (noun): s·ª± ch√∫ √Ω.\n- B. attend (verb): tham d·ª±/ch√∫ √Ω.\n- C. attendance (noun): s·ª± c√≥ m·∫∑t/ƒëi·ªÉm danh.\n- D. attentive (adj): chƒÉm ch√∫.\n\n<b>2. D·ªãch nghƒ©a:</b> \"ƒê·ª´ng ch√∫ √Ω ƒë·∫øn nh·ªØng g√¨ h·ªç n√≥i.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- C·ª•m t·ª´ c·ªë ƒë·ªãnh: Pay attention to (Ch√∫ √Ω ƒë·∫øn)."
        },
        {
            "id": 23,
            "type": "Word Form",
            "question": "Being able to communicate ______ is the most important of all life skills.",
            "options": ["effectively", "effective", "effect", "effectiveness"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. effectively (adv): m·ªôt c√°ch hi·ªáu qu·∫£.\n- B. effective (adj): hi·ªáu qu·∫£.\n- C. effect (noun): t√°c ƒë·ªông/hi·ªáu qu·∫£.\n- D. effectiveness (noun): s·ª± hi·ªáu qu·∫£.\n\n<b>2. D·ªãch nghƒ©a:</b> \"C√≥ kh·∫£ nƒÉng giao ti·∫øp hi·ªáu qu·∫£ l√† k·ªπ nƒÉng s·ªëng quan tr·ªçng nh·∫•t.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: B·ªï nghƒ©a cho ƒë·ªông t·ª´ 'communicate' -> C·∫ßn Tr·∫°ng t·ª´ (Adverb)."
        },
        {
            "id": 24,
            "type": "Word Form",
            "question": "All that ______ can be conveyed in a simple diagram.",
            "options": ["information", "inform", "informative", "informant"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. information (noun): th√¥ng tin.\n- B. inform (verb): th√¥ng b√°o.\n- C. informative (adj): nhi·ªÅu th√¥ng tin.\n- D. informant (noun): ng∆∞·ªùi cung c·∫•p tin.\n\n<b>2. D·ªãch nghƒ©a:</b> \"T·∫•t c·∫£ th√¥ng tin ƒë√≥ c√≥ th·ªÉ ƒë∆∞·ª£c truy·ªÅn t·∫£i trong m·ªôt s∆° ƒë·ªì ƒë∆°n gi·∫£n.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: Ch·ªß ng·ªØ c·ªßa m·ªánh ƒë·ªÅ quan h·ªá (that information) -> C·∫ßn Danh t·ª´ (Noun)."
        },
        {
            "id": 25,
            "type": "Word Form",
            "question": "______ with others online can be fun, as long as your teen knows how to stay safe.",
            "options": ["Chatting", "Chat", "Chatter", "Chatty"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. Chatting (Gerund): Vi·ªác t√°n g·∫´u.\n- B. Chat (Verb): t√°n g·∫´u.\n- C. Chatter (Noun): ti·∫øng h√≥t/n√≥i luy√™n thuy√™n.\n- D. Chatty (Adj): hay n√≥i.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Vi·ªác t√°n g·∫´u v·ªõi ng∆∞·ªùi kh√°c tr·ª±c tuy·∫øn c√≥ th·ªÉ r·∫•t vui, mi·ªÖn l√† con b·∫°n bi·∫øt c√°ch gi·ªØ an to√†n.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: Ch·ªß ng·ªØ c·ªßa c√¢u -> C·∫ßn Danh ƒë·ªông t·ª´ (Gerund/V-ing)."
        },
        {
            "id": 26,
            "type": "Word Form",
            "question": "Scientists are working on highly ______ technology to communicate with animals.",
            "options": ["advanced", "advance", "advancement", "advancing"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. advanced (adj): ti√™n ti·∫øn/cao c·∫•p.\n- B. advance (verb/noun): ti·∫øn b·ªô.\n- C. advancement (noun): s·ª± ti·∫øn b·ªô.\n- D. advancing (V-ing): ƒëang ti·∫øn l√™n.\n\n<b>2. D·ªãch nghƒ©a:</b> \"C√°c nh√† khoa h·ªçc ƒëang nghi√™n c·ª©u c√¥ng ngh·ªá ti√™n ti·∫øn cao ƒë·ªÉ giao ti·∫øp v·ªõi ƒë·ªông v·∫≠t.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: Sau tr·∫°ng t·ª´ 'highly' v√† tr∆∞·ªõc danh t·ª´ 'technology' -> C·∫ßn T√≠nh t·ª´ (Adj). 'Advanced' h·ª£p nghƒ©a h∆°n 'advancing'."
        },
        {
            "id": 27,
            "type": "Word Form",
            "question": "The speaker asked questions to maintain the ______ between him and his audience.",
            "options": ["interaction", "interact", "interactive", "interactively"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. interaction (noun): s·ª± t∆∞∆°ng t√°c.\n- B. interact (verb): t∆∞∆°ng t√°c.\n- C. interactive (adj): c√≥ t√≠nh t∆∞∆°ng t√°c.\n- D. interactively (adv): m·ªôt c√°ch t∆∞∆°ng t√°c.\n\n<b>2. D·ªãch nghƒ©a:</b> \"Di·ªÖn gi·∫£ ƒë√£ ƒë·∫∑t c√¢u h·ªèi ƒë·ªÉ duy tr√¨ s·ª± t∆∞∆°ng t√°c gi·ªØa √¥ng ·∫•y v√† kh√°n gi·∫£.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: Sau m·∫°o t·ª´ 'the' -> C·∫ßn Danh t·ª´ (Noun)."
        },
        {
            "id": 28,
            "type": "Word Form",
            "question": "Some animals, such as whales, have developed ______ ability.",
            "options": ["communicative", "communication", "communicate", "communicator"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. communicative (adj): thu·ªôc v·ªÅ giao ti·∫øp.\n- B. communication (noun): s·ª± giao ti·∫øp.\n- C. communicate (verb): giao ti·∫øp.\n- D. communicator (noun): ng∆∞·ªùi giao ti·∫øp.\n\n<b>2. D·ªãch nghƒ©a:</b> \"M·ªôt s·ªë lo√†i ƒë·ªông v·∫≠t, nh∆∞ c√° voi, ƒë√£ ph√°t tri·ªÉn kh·∫£ nƒÉng giao ti·∫øp.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: Tr∆∞·ªõc danh t·ª´ 'ability' -> C·∫ßn T√≠nh t·ª´ (Adj) ƒë·ªÉ b·ªï nghƒ©a."
        },
        {
            "id": 29,
            "type": "Word Form",
            "question": "Smiling and frowning are examples of facial ______.",
            "options": ["expressions", "expression", "expressive", "expressly"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. expressions (noun - plural): c√°c bi·ªÉu c·∫£m.\n- B. expression (noun - singular): s·ª± bi·ªÉu c·∫£m.\n- C. expressive (adj): bi·ªÉu c·∫£m.\n- D. expressly (adv): r√µ r√†ng.\n\n<b>2. D·ªãch nghƒ©a:</b> \"C∆∞·ªùi v√† cau m√†y l√† nh·ªØng v√≠ d·ª• c·ªßa bi·ªÉu c·∫£m khu√¥n m·∫∑t.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: Sau t√≠nh t·ª´ 'facial' -> C·∫ßn Danh t·ª´. C√≥ 2 v√≠ d·ª• (smiling v√† frowning) n√™n d√πng s·ªë nhi·ªÅu Expressions."
        },
        {
            "id": 30,
            "type": "Word Form",
            "question": "Video conferencing ______ people in various places to have a meeting.",
            "options": ["enables", "ability", "unable", "disable"],
            "correctIndex": 0,
            "explanation": "<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b>\n- A. enables (verb): l√†m cho c√≥ th·ªÉ/cho ph√©p.\n- B. ability (noun): kh·∫£ nƒÉng.\n- C. unable (adj): kh√¥ng th·ªÉ.\n- D. disable (verb): v√¥ hi·ªáu h√≥a.\n\n<b>2. D·ªãch nghƒ©a:</b> \"H·ªôi ngh·ªã truy·ªÅn h√¨nh cho ph√©p m·ªçi ng∆∞·ªùi ·ªü nhi·ªÅu n∆°i kh√°c nhau c√≥ th·ªÉ h·ªçp h√†nh.\"\n\n<b>3. T·∫°i sao ch·ªçn A?</b>\n- V·ªã tr√≠: ƒê·ª©ng sau ch·ªß ng·ªØ 'Video conferencing' -> C·∫ßn ƒê·ªông t·ª´ ch√≠nh (Verb). Ch·ªß ng·ªØ s·ªë √≠t -> Enables."
        }
    ];

    let userScore = 0;
    const totalQuestions = quizData.length;
    let answeredQuestions = new Array(totalQuestions).fill(false);

    const quizContainer = document.getElementById('quiz-container');
    const soundCorrect = document.getElementById('sound-correct');
    const soundWrong = document.getElementById('sound-wrong');
    const soundFinish = document.getElementById('sound-finish');

    // --- RENDER QUESTIONS ---
    function renderQuiz() {
        quizData.forEach((item, index) => {
            // Clean up question text for display (remove bracket markers for display if preferred, 
            // but keeping them helps identify the error parts. For Q1-10, bold the brackets).
            let displayQuestion = item.question.replace(/\[/g, '<span class="highlight-q">').replace(/\]/g, '</span>');

            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `question-${index}`;

            // Button Options Generation
            let optionsHTML = '';
            const labels = ['A', 'B', 'C', 'D'];
            item.options.forEach((opt, optIndex) => {
                optionsHTML += `
                    <div class="option-btn" onclick="checkAnswer(${index}, ${optIndex}, this)">
                        <div class="option-circle">${labels[optIndex]}</div>
                        ${opt}
                    </div>
                `;
            });

            card.innerHTML = `
                <div class="question-header">
                    <span class="q-tag">Question ${index + 1}</span>
                    <span class="q-part">${item.type}</span>
                </div>
                <div class="question-text">${displayQuestion}</div>
                <div class="options-grid" id="options-${index}">
                    ${optionsHTML}
                </div>
                <div class="explanation-box" id="explanation-${index}">
                    <div class="exp-header"><i class="fas fa-chalkboard-teacher"></i> Ms Mai An gi·∫£i th√≠ch:</div>
                    <div class="exp-content">${item.explanation}</div>
                </div>
            `;
            quizContainer.appendChild(card);
        });
    }

    // --- CHECK ANSWER LOGIC ---
    function checkAnswer(questionIndex, selectedIndex, btnElement) {
        if (answeredQuestions[questionIndex]) return; // Prevent re-answering
        answeredQuestions[questionIndex] = true;

        const currentQuestion = quizData[questionIndex];
        const optionsDiv = document.getElementById(`options-${questionIndex}`);
        const allButtons = optionsDiv.querySelectorAll('.option-btn');
        const explanationBox = document.getElementById(`explanation-${questionIndex}`);

        // Disable all buttons
        allButtons.forEach(btn => btn.classList.add('disabled'));

        if (selectedIndex === currentQuestion.correctIndex) {
            // CORRECT
            btnElement.classList.add('correct');
            userScore++;
            soundCorrect.currentTime = 0;
            soundCorrect.play();
            triggerConfetti(btnElement);
        } else {
            // WRONG
            btnElement.classList.add('incorrect');
            // Highlight the correct one
            allButtons[currentQuestion.correctIndex].classList.add('correct');
            soundWrong.currentTime = 0;
            soundWrong.play();
        }

        // Show Explanation
        explanationBox.style.display = 'block';
    }

    // --- CONFETTI EFFECT ---
    function triggerConfetti(element) {
        const rect = element.getBoundingClientRect();
        const x = (rect.left + rect.width / 2) / window.innerWidth;
        const y = (rect.top + rect.height / 2) / window.innerHeight;

        confetti({
            particleCount: 60,
            spread: 70,
            origin: { x: x, y: y },
            colors: ['#8854C0', '#00C9A7', '#FF4757'],
            disableForReducedMotion: true
        });
    }

    // --- FINISH EXAM ---
    function finishExam() {
        const unanswered = answeredQuestions.filter(x => x === false).length;
        if (unanswered > 0) {
            if(!confirm(`B·∫°n c√≤n ${unanswered} c√¢u ch∆∞a l√†m. B·∫°n c√≥ ch·∫Øc mu·ªën n·ªôp b√†i kh√¥ng?`)) {
                return;
            }
        }

        soundFinish.play();
        const scoreDisplay = document.getElementById('finalScore');
        const feedbackMsg = document.getElementById('feedbackMsg');
        const modal = document.getElementById('resultModal');

        scoreDisplay.innerText = `${userScore}/${totalQuestions}`;
        
        const percentage = (userScore / totalQuestions) * 100;
        if (percentage === 100) feedbackMsg.innerText = "Tuy·ªát v·ªùi! B·∫°n l√† thi√™n t√†i ti·∫øng Anh! üåü";
        else if (percentage >= 80) feedbackMsg.innerText = "L√†m t·ªët l·∫Øm! B·∫°n n·∫Øm r·∫•t ch·∫Øc ki·∫øn th·ª©c. üëè";
        else if (percentage >= 50) feedbackMsg.innerText = "Kh√° t·ªët! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ hi·ªÉu r√µ h∆°n nh√©. üí™";
        else feedbackMsg.innerText = "C·ªë g·∫Øng l√™n! H√£y √¥n t·∫≠p l·∫°i k·ªπ h∆°n nh√©. üìö";

        modal.style.display = 'flex';
        
        // Final big confetti
        confetti({
            particleCount: 200,
            spread: 160,
            origin: { y: 0.6 }
        });
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Initialize
    renderQuiz();

</script>
</body>
</html>
