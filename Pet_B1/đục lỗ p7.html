<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra: Art & Strategy - Ms Mai An ULIS</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Theme: Creative & Strategy (Purple/Gold) */
            --primary-color: #6c5ce7; /* Soft Purple */
            --secondary-color: #fdcb6e; /* Muted Gold */
            --accent-color: #00b894; /* Mint Green */
            --correct-color: #00D26A;
            --wrong-color: #FF4757;
            --text-color: #2d3436;
            --font-main: 'Nunito', sans-serif;
            --card-shadow: 0 8px 0 rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.1);
        }

        /* --- SVG Background: Palette & Chess Piece --- */
        body {
            font-family: var(--font-main);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            background-color: #dfe6e9;
            /* SVG Pattern: Palette, Pawn, Scroll */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Ctext x='10' y='40' font-size='25'%3Eüé®%3C/text%3E%3Ctext x='70' y='90' font-size='25'%3E‚ôüÔ∏è%3C/text%3E%3Ctext x='80' y='30' font-size='20'%3Eüìú%3C/text%3E%3C/svg%3E");
            background-attachment: fixed;
        }

        /* --- Top Control Bar --- */
        .top-bar {
            height: 70px;
            background: white;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .teacher-brand {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .teacher-brand span {
            font-size: 0.8rem;
            background: var(--secondary-color);
            padding: 4px 10px;
            border-radius: 20px;
            color: #2d3436;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 20px;
            background: #f1f2f6;
            padding: 5px 10px 5px 20px;
            border-radius: 30px;
        }

        .timer-display {
            font-size: 1.6rem;
            font-weight: 900;
            font-variant-numeric: tabular-nums;
            color: var(--wrong-color);
        }

        .btn-timer {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 20px;
            font-weight: 700;
            font-family: var(--font-main);
            cursor: pointer;
            box-shadow: 0 4px 0 #4834d4;
            transition: all 0.2s;
        }

        .btn-timer:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* --- Main Layout --- */
        .main-container {
            display: flex;
            height: calc(100vh - 70px);
            margin-top: 70px;
        }

        .left-panel, .right-panel {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        /* Reading Section */
        .left-panel {
            background: rgba(255, 255, 255, 0.95);
            border-right: 3px solid #b2bec3;
        }

        .passage-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 2px solid #eee;
            position: relative;
            overflow: hidden;
        }

        .passage-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; bottom: 0;
            width: 6px;
            background: var(--primary-color);
        }

        .passage-card h2 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 2px dashed #dfe6e9;
            padding-bottom: 15px;
            font-size: 1.5rem;
        }

        .passage-text {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #2d3436;
            text-align: justify;
        }

        .blank-num {
            background: var(--secondary-color);
            color: #2d3436;
            font-weight: 800;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.9rem;
            vertical-align: middle;
            margin: 0 3px;
        }

        /* Translation & Glossary */
        .btn-translate {
            background: white;
            border: 2px solid #b2bec3;
            color: #636e72;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            font-family: var(--font-main);
            margin-top: 20px;
            transition: 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-translate:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            background: #fdfdfd;
        }

        .trans-box {
            display: none;
            background: #f1f2f6;
            padding: 20px;
            border-radius: 15px;
            margin-top: 15px;
            border-left: 5px solid var(--accent-color);
            font-style: italic;
            line-height: 1.6;
        }

        .glossary-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
            margin-top: 25px;
        }

        .glossary-table th {
            text-align: left;
            padding: 10px;
            color: #b2bec3;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .glossary-table td {
            background: #f9f9f9;
            padding: 12px;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }
        
        .glossary-table tr td:first-child {
            border-left: 1px solid #eee;
            border-top-left-radius: 10px;
            border-bottom-left-radius: 10px;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .glossary-table tr td:last-child {
            border-right: 1px solid #eee;
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
        }

        .tag {
            font-size: 0.75rem;
            background: #dfe6e9;
            padding: 3px 8px;
            border-radius: 5px;
            color: #636e72;
            font-weight: 600;
        }

        /* Right Panel (Quiz) */
        .right-panel {
            background: rgba(223, 230, 233, 0.5);
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--card-shadow);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .q-header {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-color);
            display: flex;
            gap: 10px;
        }

        .q-badge {
            background: var(--primary-color);
            color: white;
            padding: 2px 10px;
            border-radius: 8px;
            height: fit-content;
            font-size: 0.9rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e1e1e1;
            padding: 15px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 700;
            color: #636e72;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #e1e1e1;
            text-align: left;
            font-family: var(--font-main);
        }

        .option-btn:hover {
            transform: scale(1.02);
            border-color: var(--primary-color);
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .option-btn.correct {
            background: var(--correct-color);
            color: white;
            border-color: var(--correct-color);
            box-shadow: 0 4px 0 #00b894;
        }

        .option-btn.wrong {
            background: var(--wrong-color);
            color: white;
            border-color: var(--wrong-color);
            box-shadow: 0 4px 0 #d63031;
            animation: shake 0.4s;
        }

        /* Explanation */
        .explain-box {
            display: none;
            margin-top: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #dfe6e9;
        }

        .avatar-ms {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            float: left;
            margin-right: 15px;
            box-shadow: 0 4px 10px rgba(108, 92, 231, 0.3);
        }

        .explain-content h4 {
            margin: 0 0 5px 0;
            color: var(--primary-color);
        }

        .explain-content p, .explain-content ul {
            margin: 5px 0;
            font-size: 0.95rem;
            color: #2d3436;
        }
        
        .explain-content li {
            margin-bottom: 5px;
        }

        /* Submit Section */
        .submit-area {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 60px;
        }

        .btn-submit {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            font-size: 1.3rem;
            padding: 18px 60px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.4);
            font-weight: 800;
            transition: transform 0.2s;
            font-family: var(--font-main);
        }

        .btn-submit:hover {
            transform: translateY(-5px) scale(1.05);
        }

        /* Modal */
        .modal-wrap {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(45, 52, 54, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(8px);
        }

        .modal-box {
            background: white;
            padding: 50px;
            border-radius: 40px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            animation: popUp 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        @keyframes popUp {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* Responsive */
        @media (max-width: 900px) {
            .main-container { flex-direction: column; height: auto; }
            .left-panel, .right-panel { height: auto; overflow: visible; }
            .top-bar { padding: 0 15px; }
            .teacher-brand span { display: none; }
        }

        canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 9999; }
    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <div class="top-bar">
        <div class="teacher-brand">
            Ms Mai An ULIS <span>Teacher</span>
        </div>
        <div class="timer-container">
            <div class="timer-display" id="timer">10:00</div>
            <button class="btn-timer" id="btnTimer" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U</button>
        </div>
    </div>

    <div class="main-container">
        <div class="left-panel">
            
            <div class="passage-card">
                <h2>PASSAGE 1: DRAWING üé®</h2>
                <div class="passage-text">
                    Drawing is one of the earliest forms of communication and goes back much <span class="blank-num">(1)</span> than the written word. However, despite its long history, it has not always been <span class="blank-num">(2)</span> of as a form of art.
                    <br><br>
                    When paper became easily <span class="blank-num">(3)</span> in the 14th century, the use of drawing in the arts increased. Some of the great artists of the Renaissance produced drawings of the highest <span class="blank-num">(4)</span> and presented the human body in a more realistic way than ever before. However, it was often practised <span class="blank-num">(5)</span> order to plan a larger painting and wasn‚Äôt taken very seriously as a form of art.
                    <br><br>
                    Today, drawing is regarded as a <span class="blank-num">(6)</span> skill and no less important than oil painting or other creative works.
                </div>
                
                <button class="btn-translate" onclick="toggleTrans('trans1')">üìñ B·∫¢N D·ªäCH (TRANSLATION)</button>
                <div id="trans1" class="trans-box">
                    <strong>V·∫Ω (Drawing):</strong><br>
                    V·∫Ω l√† m·ªôt trong nh·ªØng h√¨nh th·ª©c giao ti·∫øp s·ªõm nh·∫•t v√† c√≥ t·ª´ <strong>xa x∆∞a h∆°n nhi·ªÅu</strong> so v·ªõi ch·ªØ vi·∫øt. Tuy nhi√™n, b·∫•t ch·∫•p l·ªãch s·ª≠ l√¢u ƒë·ªùi c·ªßa n√≥, n√≥ kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ƒë∆∞·ª£c <strong>coi l√†</strong> m·ªôt lo·∫°i h√¨nh ngh·ªá thu·∫≠t.<br>
                    Khi gi·∫•y tr·ªü n√™n <strong>c√≥ s·∫µn (d·ªÖ ki·∫øm)</strong> v√†o th·∫ø k·ª∑ 14, vi·ªác s·ª≠ d·ª•ng h√¨nh v·∫Ω trong ngh·ªá thu·∫≠t ƒë√£ tƒÉng l√™n. M·ªôt s·ªë ngh·ªá sƒ© vƒ© ƒë·∫°i c·ªßa th·ªùi k·ª≥ Ph·ª•c h∆∞ng ƒë√£ t·∫°o ra nh·ªØng b·ª©c v·∫Ω c√≥ <strong>ch·∫•t l∆∞·ª£ng</strong> cao nh·∫•t v√† th·ªÉ hi·ªán c∆° th·ªÉ con ng∆∞·ªùi m·ªôt c√°ch ch√¢n th·ª±c h∆°n bao gi·ªù h·∫øt. Tuy nhi√™n, n√≥ th∆∞·ªùng ƒë∆∞·ª£c th·ª±c hi·ªán <strong>ƒë·ªÉ</strong> l√™n k·∫ø ho·∫°ch cho m·ªôt b·ª©c tranh l·ªõn h∆°n v√† kh√¥ng ƒë∆∞·ª£c coi tr·ªçng l·∫Øm nh∆∞ m·ªôt h√¨nh th·ª©c ngh·ªá thu·∫≠t.<br>
                    Ng√†y nay, v·∫Ω ƒë∆∞·ª£c coi l√† m·ªôt k·ªπ nƒÉng <strong>c√≥ gi√° tr·ªã</strong> v√† kh√¥ng k√©m ph·∫ßn quan tr·ªçng so v·ªõi tranh s∆°n d·∫ßu hay c√°c t√°c ph·∫©m s√°ng t·∫°o kh√°c.
                </div>

                <h3>üìö T·ª™ V·ª∞NG TINH HOA (GLOSSARY)</h3>
                <table class="glossary-table">
                    <tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a ti·∫øng Vi·ªát</th></tr>
                    <tr><td>Renaissance</td><td><span class="tag">noun</span></td><td>Th·ªùi k·ª≥ Ph·ª•c h∆∞ng</td></tr>
                    <tr><td>Realistic</td><td><span class="tag">adj</span></td><td>Ch√¢n th·ª±c, th·ª±c t·∫ø</td></tr>
                    <tr><td>Regarded (as)</td><td><span class="tag">verb</span></td><td>ƒê∆∞·ª£c xem nh∆∞ l√†</td></tr>
                    <tr><td>Communication</td><td><span class="tag">noun</span></td><td>S·ª± giao ti·∫øp</td></tr>
                </table>
            </div>

            <div class="passage-card" style="border-left-color: #fdcb6e;">
                <h2>PASSAGE 2: THE FIRST CHESS CHAMPION ‚ôüÔ∏è</h2>
                <div class="passage-text">
                    Most chess historians agree that the first chess world championship <span class="blank-num">(7)</span> place in 1886 in the United States. On one side was an Austrian chess champion Wilhelm Steinitz, who for many years was <span class="blank-num">(8)</span> to be one of the best in the world. Playing against him was Johannes Zukertort from Poland, living in the UK, and another player who many believed at the time was one of the world‚Äôs greats. 
                    <br><br>
                    According <span class="blank-num">(9)</span> the contract, the match would be for the championship of the world and would <span class="blank-num">(10)</span> of 20 games played in three different cities: New York, St Louis and New Orleans. Steinitz won 10-5 and was world champion until 1894. Steinitz was <span class="blank-num">(11)</span> in how the game should be played and many of his ideas had a big influence <span class="blank-num">(12)</span> the modern game.
                </div>

                <button class="btn-translate" onclick="toggleTrans('trans2')">üìñ B·∫¢N D·ªäCH (TRANSLATION)</button>
                <div id="trans2" class="trans-box">
                    <strong>Nh√† v√¥ ƒë·ªãch c·ªù vua ƒë·∫ßu ti√™n c·ªßa th·∫ø gi·ªõi:</strong><br>
                    H·∫ßu h·∫øt c√°c nh√† s·ª≠ h·ªçc c·ªù vua ƒë·ªÅu ƒë·ªìng √Ω r·∫±ng gi·∫£i v√¥ ƒë·ªãch c·ªù vua th·∫ø gi·ªõi ƒë·∫ßu ti√™n <strong>di·ªÖn ra</strong> v√†o nƒÉm 1886 t·∫°i Hoa K·ª≥. M·ªôt b√™n l√† nh√† v√¥ ƒë·ªãch c·ªù vua ng∆∞·ªùi √Åo Wilhelm Steinitz, ng∆∞·ªùi m√† trong nhi·ªÅu nƒÉm ƒë∆∞·ª£c <strong>cho l√†</strong> m·ªôt trong nh·ªØng ng∆∞·ªùi gi·ªèi nh·∫•t th·∫ø gi·ªõi...<br>
                    <strong>Theo</strong> h·ª£p ƒë·ªìng, tr·∫≠n ƒë·∫•u s·∫Ω gi√†nh ch·ª©c v√¥ ƒë·ªãch th·∫ø gi·ªõi v√† s·∫Ω <strong>bao g·ªìm</strong> 20 v√°n ƒë·∫•u di·ªÖn ra t·∫°i ba th√†nh ph·ªë kh√°c nhau... Steinitz ƒë√£ th·∫Øng 10-5 v√† l√† nh√† v√¥ ƒë·ªãch th·∫ø gi·ªõi cho ƒë·∫øn nƒÉm 1894. Steinitz <strong>quan t√¢m</strong> ƒë·∫øn c√°ch ch∆°i tr√≤ ch∆°i n√†y v√† nhi·ªÅu √Ω t∆∞·ªüng c·ªßa √¥ng ƒë√£ c√≥ ·∫£nh h∆∞·ªüng l·ªõn <strong>ƒë·∫øn</strong> tr√≤ ch∆°i hi·ªán ƒë·∫°i.
                </div>

                <h3>üìö T·ª™ V·ª∞NG TINH HOA (GLOSSARY)</h3>
                <table class="glossary-table">
                    <tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a ti·∫øng Vi·ªát</th></tr>
                    <tr><td>Historian</td><td><span class="tag">noun</span></td><td>Nh√† s·ª≠ h·ªçc</td></tr>
                    <tr><td>Championship</td><td><span class="tag">noun</span></td><td>Gi·∫£i v√¥ ƒë·ªãch</td></tr>
                    <tr><td>Contract</td><td><span class="tag">noun</span></td><td>H·ª£p ƒë·ªìng</td></tr>
                    <tr><td>Influence</td><td><span class="tag">noun</span></td><td>S·ª± ·∫£nh h∆∞·ªüng</td></tr>
                </table>
            </div>

        </div>

        <div class="right-panel">
            <h3 style="text-align: center; color: #636e72; margin-bottom: 30px;">üìù PH√íNG THI TR·∫ÆC NGHI·ªÜM</h3>
            
            <div id="quiz-area"></div>

            <div class="submit-area">
                <button class="btn-submit" onclick="finishTest()">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
            </div>
        </div>
    </div>

    <div class="modal-wrap" id="resultModal">
        <div class="modal-box">
            <h2 style="color: var(--primary-color)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div style="font-size: 5rem; font-weight: 900; color: var(--secondary-color); margin: 20px 0" id="finalScore">0/12</div>
            <p id="feedbackText" style="font-size: 1.2rem; color: #636e72;">...</p>
            <button class="btn-timer" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

    <audio id="sfx-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="sfx-wrong" src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"></audio>
    <audio id="sfx-win" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

    <script>
        // --- DATA ---
        const questions = [
            // PASSAGE 1: DRAWING
            {
                id: 1, blank: "(1)", q: "...goes back much (1)__ than the written word.",
                opts: ["A. wider", "B. further", "C. bigger", "D. greater"],
                ans: 1,
                exp: "<b>ƒê√°p √°n B: further</b><br><ul><li><b>Context:</b> N√≥i v·ªÅ th·ªùi gian (l·ªãch s·ª≠ l√¢u ƒë·ªùi h∆°n).</li><li><b>Further</b>: Xa h∆°n (d√πng cho c·∫£ kho·∫£ng c√°ch v√† th·ªùi gian/m·ª©c ƒë·ªô).</li><li>Wider (r·ªông h∆°n), Bigger (to h∆°n), Greater (l·ªõn h∆°n) kh√¥ng d√πng ƒë·ªÉ so s√°nh v·ªÅ m·ªëc th·ªùi gian trong qu√° kh·ª© theo c√°ch n√†y.</li></ul>"
            },
            {
                id: 2, blank: "(2)", q: "...has not always been (2)__ of as a form of art.",
                opts: ["A. taken", "B. seen", "C. thought", "D. made"],
                ans: 2,
                exp: "<b>ƒê√°p √°n C: thought</b><br><ul><li><b>C·∫•u tr√∫c:</b> To be thought of as... (ƒê∆∞·ª£c nghƒ© ƒë·∫øn nh∆∞ l√†/ƒë∆∞·ª£c coi l√†).</li><li>Seen as (ƒë∆∞·ª£c xem l√†) - nh∆∞ng 'seen' kh√¥ng ƒëi v·ªõi 'of'.</li><li>Made of (l√†m b·∫±ng g√¨).</li></ul>"
            },
            {
                id: 3, blank: "(3)", q: "When paper became easily (3)__ in the 14th century...",
                opts: ["A. free", "B. open", "C. around", "D. available"],
                ans: 3,
                exp: "<b>ƒê√°p √°n D: available</b><br><ul><li><b>Easily available:</b> D·ªÖ d√†ng c√≥ ƒë∆∞·ª£c/s·∫µn c√≥ ƒë·ªÉ s·ª≠ d·ª•ng.</li><li>Open (m·ªü), Free (mi·ªÖn ph√≠), Around (xung quanh) kh√¥ng s√°t nghƒ©a b·∫±ng 'available' trong ng·ªØ c·∫£nh l·ªãch s·ª≠ v·ªÅ v·∫≠t li·ªáu.</li></ul>"
            },
            {
                id: 4, blank: "(4)", q: "...produced drawings of the highest (4)__...",
                opts: ["A. quality", "B. type", "C. kind", "D. sort"],
                ans: 0,
                exp: "<b>ƒê√°p √°n A: quality</b><br><ul><li><b>Of the highest quality:</b> C√≥ ch·∫•t l∆∞·ª£ng cao nh·∫•t/th∆∞·ª£ng h·∫°ng.</li><li>Type/Kind/Sort (lo·∫°i) th∆∞·ªùng kh√¥ng ƒëi v·ªõi 'highest' ƒë·ªÉ ch·ªâ s·ª± tuy·ªát h·∫£o c·ªßa t√°c ph·∫©m.</li></ul>"
            },
            {
                id: 5, blank: "(5)", q: "...practised (5)__ order to plan a larger painting...",
                opts: ["A. for", "B. in", "C. on", "D. with"],
                ans: 1,
                exp: "<b>ƒê√°p √°n B: in</b><br><ul><li><b>Phrase:</b> In order to + V (ƒê·ªÉ m√†, nh·∫±m m·ª•c ƒë√≠ch...).</li><li>ƒê√¢y l√† c·ª•m c·ªë ƒë·ªãnh (Fixed phrase), kh√¥ng d√πng gi·ªõi t·ª´ kh√°c.</li></ul>"
            },
            {
                id: 6, blank: "(6)", q: "...drawing is regarded as a (6)__ skill...",
                opts: ["A. valuable", "B. correct", "C. dear", "D. likely"],
                ans: 0,
                exp: "<b>ƒê√°p √°n A: valuable</b><br><ul><li><b>Valuable:</b> C√≥ gi√° tr·ªã, qu√Ω gi√° (quan tr·ªçng).</li><li>Correct (ƒë√∫ng), Dear (th√¢n thi·∫øt/ƒë·∫Øt), Likely (c√≥ th·ªÉ) kh√¥ng ph√π h·ª£p ƒë·ªÉ m√¥ t·∫£ t·∫ßm quan tr·ªçng c·ªßa m·ªôt k·ªπ nƒÉng ngh·ªá thu·∫≠t.</li></ul>"
            },

            // PASSAGE 2: CHESS
            {
                id: 7, blank: "(7)", q: "...first chess world championship (1)__ place in 1886...",
                opts: ["A. took", "B. went", "C. laid", "D. set"],
                ans: 0,
                exp: "<b>ƒê√°p √°n A: took</b><br><ul><li><b>Collocation:</b> Take place = Happen (Di·ªÖn ra, x·∫£y ra).</li><li>Qu√° kh·ª© l√† 'Took place'. C√°c t·ª´ c√≤n l·∫°i kh√¥ng t·∫°o th√†nh c·ª•m t·ª´ c√≥ nghƒ©a t∆∞∆°ng ƒë∆∞∆°ng.</li></ul>"
            },
            {
                id: 8, blank: "(8)", q: "...who for many years was (2)__ to be one of the best...",
                opts: ["A. held", "B. thought", "C. placed", "D. looked"],
                ans: 1,
                exp: "<b>ƒê√°p √°n B: thought</b><br><ul><li><b>Passive Voice:</b> S + be + thought + to V (ƒê∆∞·ª£c cho l√†...).</li><li>Held (ƒë∆∞·ª£c t·ªï ch·ª©c), Placed (ƒë∆∞·ª£c ƒë·∫∑t), Looked (ƒë∆∞·ª£c nh√¨n) kh√¥ng h·ª£p l√Ω v·ªÅ ng·ªØ nghƒ©a 'ƒë∆∞·ª£c c√¥ng nh·∫≠n/tin l√†'.</li></ul>"
            },
            {
                id: 9, blank: "(9)", q: "According (3)__ the contract...",
                opts: ["A. for", "B. in", "C. with", "D. to"],
                ans: 3,
                exp: "<b>ƒê√°p √°n D: to</b><br><ul><li><b>Phrase:</b> According to... (Theo nh∆∞...).</li><li>ƒê√¢y l√† gi·ªõi t·ª´ b·∫Øt bu·ªôc ƒëi sau 'According'.</li></ul>"
            },
            {
                id: 10, blank: "(10)", q: "...would (4)__ of 20 games...",
                opts: ["A. contain", "B. consist", "C. make", "D. include"],
                ans: 1,
                exp: "<b>ƒê√°p √°n B: consist</b><br><ul><li><b>Phrase:</b> Consist of... (Bao g·ªìm...).</li><li>Contain/Include: Bao g·ªìm (nh∆∞ng kh√¥ng ƒëi v·ªõi gi·ªõi t·ª´ 'of').</li><li>Make of: L√†m b·∫±ng (ch·∫•t li·ªáu).</li></ul>"
            },
            {
                id: 11, blank: "(11)", q: "Steinitz was (5)__ in how the game should be played...",
                opts: ["A. interested", "B. excited", "C. keen", "D. attracted"],
                ans: 0,
                exp: "<b>ƒê√°p √°n A: interested</b><br><ul><li><b>Structure:</b> Interested in (Quan t√¢m ƒë·∫øn).</li><li>Keen on.</li><li>Excited about.</li><li>Attracted to.</li><li>Ch·ªâ c√≥ 'interested' ƒëi v·ªõi gi·ªõi t·ª´ 'in'.</li></ul>"
            },
            {
                id: 12, blank: "(12)", q: "...had a big influence (6)__ the modern game.",
                opts: ["A. to", "B. in", "C. on", "D. at"],
                ans: 2,
                exp: "<b>ƒê√°p √°n C: on</b><br><ul><li><b>Noun Phrase:</b> Have an influence on somebody/something (C√≥ ·∫£nh h∆∞·ªüng l√™n...).</li></ul>"
            }
        ];

        let score = 0;
        let timer;
        let timeLeft = 600; // 10 minutes
        let running = false;

        function init() {
            const container = document.getElementById('quiz-area');
            questions.forEach((q, idx) => {
                // Add separator for passage 2
                if (idx === 6) {
                    const sep = document.createElement('h3');
                    sep.innerHTML = "‚ôüÔ∏è CHESS PASSAGE QUESTIONS";
                    sep.style.textAlign = "center";
                    sep.style.color = "#fdcb6e";
                    sep.style.margin = "40px 0 20px 0";
                    sep.style.borderTop = "2px dashed #ccc";
                    sep.style.paddingTop = "20px";
                    container.appendChild(sep);
                }

                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `
                    <div class="q-header">
                        <div class="q-badge">${q.blank}</div>
                        <span>${q.q}</span>
                    </div>
                    <div class="options-grid" id="opt-grid-${q.id}">
                        ${q.opts.map((opt, i) => `
                            <button class="option-btn" onclick="checkAnswer(${q.id}, ${i}, ${q.ans}, this)">${opt}</button>
                        `).join('')}
                    </div>
                    <div class="explain-box" id="explain-${q.id}">
                        <div class="avatar-ms">Ms</div>
                        <div class="explain-content">
                            <h4>Gi·∫£i th√≠ch chi ti·∫øt:</h4>
                            ${q.exp}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function checkAnswer(qId, selectedIdx, correctIdx, btn) {
            const grid = document.getElementById(`opt-grid-${qId}`);
            if (grid.dataset.done) return; // Prevent re-click
            grid.dataset.done = "true";

            const btns = grid.getElementsByClassName('option-btn');
            const explain = document.getElementById(`explain-${qId}`);

            if (selectedIdx === correctIdx) {
                // Correct
                btn.classList.add('correct');
                score++;
                document.getElementById('sfx-correct').play();
                createConfetti(btn);
            } else {
                // Wrong
                btn.classList.add('wrong');
                btns[correctIdx].classList.add('correct');
                document.getElementById('sfx-wrong').play();
            }

            // Disable all
            for (let b of btns) b.style.cursor = 'default';

            // Show explanation
            explain.style.display = 'block';
            explain.style.animation = 'slideIn 0.3s';
        }

        function toggleTimer() {
            const btn = document.getElementById('btnTimer');
            if (running) {
                clearInterval(timer);
                btn.innerText = "TI·∫æP T·ª§C";
                btn.style.background = "#b2bec3";
            } else {
                timer = setInterval(() => {
                    timeLeft--;
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        alert("H·∫æT GI·ªú R·ªíI! N·ªôp b√†i th√¥i!");
                    }
                    let m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
                    let s = (timeLeft % 60).toString().padStart(2, '0');
                    document.getElementById('timer').innerText = `${m}:${s}`;
                }, 1000);
                btn.innerText = "T·∫†M D·ª™NG";
                btn.style.background = "#d63031";
            }
            running = !running;
        }

        function toggleTrans(id) {
            const box = document.getElementById(id);
            box.style.display = box.style.display === "block" ? "none" : "block";
        }

        function finishTest() {
            clearInterval(timer);
            document.getElementById('sfx-win').play();
            
            const modal = document.getElementById('resultModal');
            document.getElementById('finalScore').innerText = `${score}/12`;
            
            let msg = "";
            if (score === 12) msg = "TUY·ªÜT ƒê·ªêI! B·∫°n l√† thi√™n t√†i ng√¥n ng·ªØ! üåüüëë";
            else if (score >= 9) msg = "R·∫•t t·ªët! Ki·∫øn th·ª©c c·ªßa b·∫°n r·∫•t v·ªØng! üî•";
            else if (score >= 6) msg = "ƒê∆∞·ª£c r·ªìi, nh∆∞ng c·∫ßn c·ªë g·∫Øng h∆°n ·ªü ph·∫ßn t·ª´ v·ª±ng nh√©! üí™";
            else msg = "ƒê·ª´ng n·∫£n l√≤ng, h√£y xem k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch nh√©! ‚ù§Ô∏è";
            
            document.getElementById('feedbackText').innerText = msg;
            modal.style.display = 'flex';
            
            if (score >= 8) launchConfetti();
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // --- Confetti Effect (Simple Canvas) ---
        function createConfetti(element) {
            // Mini burst effect logic (simplified for single file)
            // In a full environment, we would use a library like canvas-confetti
        }

        function launchConfetti() {
            // Full screen confetti logic placeholder
        }

        window.onload = init;
    </script>
</body>
</html>