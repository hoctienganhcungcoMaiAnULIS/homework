<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Sport Quiz - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #8854C0;
            --secondary: #00C9A7;
            --correct: #00D26A;
            --wrong: #FF4757;
            --bg-light: #FDF2F8;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-light);
            background-image: radial-gradient(#8854c022 2px, transparent 2px);
            background-size: 30px 30px;
            color: #2D3436;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .author-tag {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            perspective: 1000px;
        }

        .card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 0px rgba(136, 84, 192, 0.2);
            border: 4px solid #F0E6FF;
            margin-bottom: 40px;
            transition: transform 0.3s ease;
        }

        .btn-option {
            width: 100%;
            text-align: left;
            padding: 15px 25px;
            margin-bottom: 12px;
            border-radius: 20px;
            background: white;
            border: 3px solid #E0E0E0;
            box-shadow: 0 6px 0px #E0E0E0;
            font-weight: 700;
            transition: all 0.2s;
            position: relative;
            cursor: pointer;
            outline: none;
        }

        .btn-option:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
            box-shadow: 0 9px 0px var(--primary);
            background-color: #F8F4FF;
        }

        .btn-option:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0px var(--primary);
        }

        .btn-option.correct {
            background-color: var(--correct) !important;
            color: white !important;
            border-color: #00A654 !important;
            box-shadow: 0 6px 0px #00A654 !important;
        }

        .btn-option.wrong {
            background-color: var(--wrong) !important;
            color: white !important;
            border-color: #D63031 !important;
            box-shadow: 0 6px 0px #D63031 !important;
        }

        .explanation {
            background-color: #F0F9FF;
            border-left: 8px solid #3498DB;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .progress-bar-container {
            width: 100%;
            height: 15px;
            background: #E0E0E0;
            border-radius: 10px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), #55efc4);
            width: 0%;
            transition: width 0.5s ease;
        }

        .glossary-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid #E0E0E0;
        }

        .glossary-table th {
            background-color: var(--primary);
            color: white;
            padding: 12px;
        }

        .glossary-table td {
            padding: 12px;
            border-bottom: 1px solid #E0E0E0;
            background: #FFF;
        }

        .submit-btn {
            background: var(--secondary);
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 900;
            border: none;
            box-shadow: 0 8px 0px #00A88B;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 30px;
        }

        .submit-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 0px #00A88B;
        }

        .submit-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0px #00A88B;
        }

        #result-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 30px;
            box-shadow: 0 0 100px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
            width: 90%;
            max-width: 500px;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
        }
    </style>
</head>
<body>

    <div class="author-tag">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</div>
    <h1 class="text-4xl font-black text-center mb-6 text-[#8854C0]">SPORT CHALLENGE üèÜ</h1>

    <div class="quiz-container">
        <div class="progress-bar-container">
            <div id="progress-fill" class="progress-fill"></div>
        </div>

        <div id="quiz-area">
            <!-- Questions will be injected here -->
        </div>

        <div class="text-center">
            <button onclick="calculateFinalScore()" class="submit-btn">N·ªòP B√ÄI XEM K·∫æT QU·∫¢</button>
        </div>
    </div>

    <div id="overlay" class="overlay"></div>
    <div id="result-popup">
        <h2 class="text-3xl font-black text-purple-600 mb-4">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
        <div id="score-text" class="text-5xl font-bold mb-4">0/34</div>
        <p id="praise-text" class="text-xl italic text-gray-600 mb-6"></p>
        <button onclick="location.reload()" class="submit-btn" style="background: var(--primary); box-shadow: 0 8px 0px #6C449E;">L√ÄM L·∫†I N√ÄO!</button>
    </div>

    <!-- Audio assets simulated via web audio or URLs -->
    <audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2105/2105-preview.mp3"></audio>

    <script>
        const quizData = [
            {
                number: 1,
                question: "II.1. Complete the second sentence so it has a similar meaning to the first:<br>'What sport do you like best?'<br>=> What is ________________?",
                options: ["your favorite sport", "your best sport", "the sport you like", "sport you like best"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch c√¢u h·ªèi:</b> M√¥n th·ªÉ thao n√†o b·∫°n th√≠ch nh·∫•t?</p>
                    <p><b>2. Ph√¢n t√≠ch ƒë√°p √°n:</b><br>
                    - A. your favorite sport (np): m√¥n th·ªÉ thao y√™u th√≠ch nh·∫•t.<br>
                    - B. your best sport: m√¥n b·∫°n ch∆°i gi·ªèi nh·∫•t (sai nghƒ©a).<br>
                    - C. the sport you like: thi·∫øu √Ω so s√°nh nh·∫•t.<br>
                    - D. sport you like best: sai ng·ªØ ph√°p (thi·∫øu s·ªü h·ªØu/m·∫°o t·ª´).</p>
                    <p><b>3. T·∫°i sao ƒë√∫ng:</b> "Like best" t∆∞∆°ng ƒë∆∞∆°ng v·ªõi "Favorite". C·∫•u tr√∫c h·ªèi s·ªü th√≠ch ph·ªï bi·∫øn: What is your favorite + N?</p>
                `
            },
            {
                number: 2,
                question: "II.2. Rewrite:<br>'Mark plays football better than Tim.'<br>=> Tim doesn‚Äôt ________________.",
                options: ["play football as well as Mark", "play football as good as Mark", "play football better than Mark", "plays football so well as Mark"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch c√¢u:</b> Mark ƒë√° b√≥ng gi·ªèi h∆°n Tim.</p>
                    <p><b>2. Ph√¢n t√≠ch:</b><br>
                    - A. play... as well as: kh√¥ng gi·ªèi b·∫±ng (ƒê√öNG).<br>
                    - B. as good as: Sai v√¨ "play" l√† ƒë·ªông t·ª´ th∆∞·ªùng c·∫ßn tr·∫°ng t·ª´ "well".<br>
                    - C. better than: Sai nghƒ©a.<br>
                    - D. plays...: Sau "doesn't" ƒë·ªông t·ª´ ph·∫£i nguy√™n m·∫´u.</p>
                `
            },
            {
                number: 3,
                question: "II.3. Rewrite:<br>'Beckham was a very good football player.'<br>=> Beckham played ________________.",
                options: ["football very well", "football very good", "very well football", "a football very well"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch:</b> Beckham l√† m·ªôt c·∫ßu th·ªß b√≥ng ƒë√° r·∫•t gi·ªèi.</p>
                    <p><b>2. C·∫•u tr√∫c:</b> S + be + adj + N = S + V + adv. <br> "Good" (adj) chuy·ªÉn sang "Well" (adv). </p>
                    <p><b>3. L∆∞u √Ω:</b> Tr·∫°ng t·ª´ th∆∞·ªùng ƒë·ª©ng sau t√¢n ng·ªØ (played football well).</p>
                `
            },
            {
                number: 4,
                question: "II.4. Rewrite:<br>'How long have you played basketball?'<br>=> When ________________?",
                options: ["did you start playing basketball", "have you played basketball", "do you play basketball", "did you played basketball"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch:</b> B·∫°n ƒë√£ ch∆°i b√≥ng r·ªï ƒë∆∞·ª£c bao l√¢u r·ªìi?</p>
                    <p><b>2. Ph√¢n t√≠ch:</b> C·∫•u tr√∫c "How long + hi·ªán t·∫°i ho√†n th√†nh" t∆∞∆°ng ƒë∆∞∆°ng "When + qu√° kh·ª© ƒë∆°n + start + Ving".</p>
                    <p><b>3. T·∫°i sao ch·ªçn A:</b> H·ªèi v·ªÅ m·ªëc th·ªùi gian b·∫Øt ƒë·∫ßu h√†nh ƒë·ªông trong qu√° kh·ª©.</p>
                `
            },
            {
                number: 5,
                question: "II.5. Rewrite:<br>'Shall we play badminton this weekend?'<br>=> How about ________________?",
                options: ["playing badminton this weekend", "to play badminton this weekend", "play badminton this weekend", "we play badminton this weekend"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch:</b> Ch√∫ng ta ch∆°i c·∫ßu l√¥ng cu·ªëi tu·∫ßn n√†y nh√©?</p>
                    <p><b>2. C·∫•u tr√∫c g·ª£i √Ω:</b> <br> - Shall we + V(bare)? <br> - How about + V-ing? (ƒê√öNG)</p>
                `
            },
            {
                number: 6,
                question: "II.6. Rewrite:<br>'No sport in Britain Is as popular as football.'<br>=> Football ________________.",
                options: ["is the most popular sport in Britain", "is more popular sport in Britain", "is the popularist sport in Britain", "is as popular as other sports"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch:</b> Kh√¥ng m√¥n th·ªÉ thao n√†o ·ªü Anh ph·ªï bi·∫øn b·∫±ng b√≥ng ƒë√°.</p>
                    <p><b>2. Logic:</b> Kh√¥ng c√°i n√†o b·∫±ng => N√≥ l√† nh·∫•t (Superlative).</p>
                    <p><b>3. Ph√¢n t√≠ch:</b> Popular l√† t√≠nh t·ª´ d√†i => The most popular.</p>
                `
            },
            {
                number: 7,
                question: "II.7. Rewrite:<br>'My brother is not so interested in basketball as I am.'<br>=> I ________________.",
                options: ["am more interested in basketball than my brother", "am as interested in basketball as my brother", "am not interested in basketball as my brother", "am less interested in basketball than my brother"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch:</b> Anh trai t√¥i kh√¥ng h·ª©ng th√∫ v·ªõi b√≥ng r·ªï b·∫±ng t√¥i.</p>
                    <p><b>2. Logic:</b> Anh kh√¥ng b·∫±ng t√¥i => T√¥i h∆°n anh. <br> So s√°nh h∆°n v·ªõi t√≠nh t·ª´ d√†i: more + adj + than.</p>
                `
            },
            {
                number: 8,
                question: "II.8. Rewrite:<br>'It‚Äôs good for you to do morning exercise regularly.'<br>=> You ________________.",
                options: ["should do morning exercise regularly", "can do morning exercise regularly", "may do morning exercise regularly", "would do morning exercise regularly"],
                correct: 0,
                explanation: `
                    <div class='font-bold text-blue-800 mb-2'>C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <p><b>1. D·ªãch:</b> Th·∫≠t t·ªët n·∫øu b·∫°n t·∫≠p th·ªÉ d·ª•c s√°ng ƒë·ªÅu ƒë·∫∑n.</p>
                    <p><b>2. C·∫•u tr√∫c:</b> "It's good to do..." l√† m·ªôt l·ªùi khuy√™n, t∆∞∆°ng ƒë∆∞∆°ng v·ªõi ƒë·ªông t·ª´ khuy·∫øt thi·∫øu "Should" (n√™n).</p>
                `
            },
            {
                number: 9,
                question: "III.1. Keywords: bike, helmet, ride, race. What is the sport?",
                options: ["Cycling", "Motorbiking", "Running", "Horse racing"],
                correct: 0,
                explanation: "<p>D·ª±a tr√™n t·ª´ kh√≥a 'bike' (xe ƒë·∫°p) v√† 'helmet' (m≈© b·∫£o hi·ªÉm), ƒë√¢y l√† m√¥n ƒê·∫°p xe.</p>"
            },
            {
                number: 10,
                question: "III.2. Keywords: ball, goal, kick, penalty. What is the sport?",
                options: ["Football", "Basketball", "Volleyball", "Tennis"],
                correct: 0,
                explanation: "<p>T·ª´ kh√≥a 'kick' (ƒë√°) v√† 'goal' (khung th√†nh) ch·ªâ c√≥ ·ªü m√¥n B√≥ng ƒë√°.</p>"
            },
            {
                number: 11,
                question: "III.3. Keywords: ring, gloves, punch, mouth guard. What is the sport?",
                options: ["Boxing", "Wrestling", "Karate", "Fencing"],
                correct: 0,
                explanation: "<p>'Punch' (ƒë·∫•m) v√† 'ring' (v√µ ƒë√†i) l√† ƒë·∫∑c tr∆∞ng c·ªßa Boxing (Quy·ªÅn Anh).</p>"
            },
            {
                number: 12,
                question: "III.4. Keywords: racket, net, shuttlecock, serve. What is the sport?",
                options: ["Badminton", "Tennis", "Table tennis", "Volleyball"],
                correct: 0,
                explanation: "<p>'Shuttlecock' ch√≠nh l√† qu·∫£ c·∫ßu l√¥ng, d·ª•ng c·ª• kh√¥ng th·ªÉ thi·∫øu c·ªßa m√¥n C·∫ßu l√¥ng.</p>"
            },
            {
                number: 13,
                question: "III.5. Keywords: goggles, snow, skis, poles. What is the sport?",
                options: ["Skiing", "Snowboarding", "Ice skating", "Hiking"],
                correct: 0,
                explanation: "<p>'Skis' l√† v√°n tr∆∞·ª£t tuy·∫øt v√† 'poles' l√† g·∫≠y ch·ªëng trong m√¥n Tr∆∞·ª£t tuy·∫øt.</p>"
            },
            {
                number: 14,
                question: "III.6. Keywords: court, racket, rubber ball, net, set. What is the sport?",
                options: ["Tennis", "Badminton", "Basketball", "Football"],
                correct: 0,
                explanation: "<p>Tennis d√πng 'rubber ball' (b√≥ng cao su b·ªçc n·ªâ) v√† thi ƒë·∫•u theo 'set' (hi·ªáp).</p>"
            },
            {
                number: 15,
                question: "III.7. Keywords: ball, table, paddle, serve. What is the sport?",
                options: ["Table tennis", "Tennis", "Billiards", "Badminton"],
                correct: 0,
                explanation: "<p>'Table' (b√†n) v√† 'paddle' (v·ª£t g·ªó nh·ªè) l√† d·ª•ng c·ª• c·ªßa m√¥n B√≥ng b√†n.</p>"
            },
            {
                number: 16,
                question: "III.8. Keywords: basket, ball, court, throw, points. What is the sport?",
                options: ["Basketball", "Volleyball", "Netball", "Football"],
                correct: 0,
                explanation: "<p>'Basket' (r·ªï) v√† 'throw' (n√©m) l√† h√†nh ƒë·ªông ghi ƒëi·ªÉm trong m√¥n B√≥ng r·ªï.</p>"
            },
            {
                number: 17,
                question: "IV.1. My friend Mark is very good ________ volleyball.",
                options: ["at", "in", "on", "with"],
                correct: 0,
                explanation: "<p>C·∫•u tr√∫c c·ªë ƒë·ªãnh: To be good AT something (Gi·ªèi v·ªÅ c√°i g√¨).</p>"
            },
            {
                number: 18,
                question: "IV.2. We often go swimming ________ Sunday morning.",
                options: ["on", "in", "at", "for"],
                correct: 0,
                explanation: "<p>D√πng gi·ªõi t·ª´ 'ON' cho c√°c ng√†y trong tu·∫ßn (Sunday).</p>"
            },
            {
                number: 19,
                question: "IV.3. Football is an example of a ________ sport where you play with several other people.",
                options: ["team", "individual", "indoor", "dangerous"],
                correct: 0,
                explanation: "<p>Team sport: m√¥n th·ªÉ thao ƒë·ªìng ƒë·ªôi (c√≥ nhi·ªÅu ng∆∞·ªùi ch∆°i c√πng nhau).</p>"
            },
            {
                number: 20,
                question: "IV.4. We were very upset when our favourite team didn‚Äôt ________ even one goal.",
                options: ["score", "play", "kick", "point"],
                correct: 0,
                explanation: "<p>Collocation: Score a goal (ghi b√†n th·∫Øng).</p>"
            },
            {
                number: 21,
                question: "IV.5. Badminton requires only a net, a racket, and a birdie or ________.",
                options: ["shuttlecock", "ball", "ski", "goggles"],
                correct: 0,
                explanation: "<p>'Birdie' l√† t√™n g·ªçi th√¢n m·∫≠t c·ªßa 'shuttlecock' (qu·∫£ c·∫ßu l√¥ng).</p>"
            },
            {
                number: 22,
                question: "IV.6. The person who makes sure that a game is played according to the rules is a ________.",
                options: ["referee", "coach", "judge", "player"],
                correct: 0,
                explanation: "<p>Referee: Tr·ªçng t√†i (ng∆∞·ªùi ƒëi·ªÅu khi·ªÉn lu·∫≠t ch∆°i tr√™n s√¢n).</p>"
            },
            {
                number: 23,
                question: "IV.7. ________ up the tree! You‚Äôll fall down.",
                options: ["Don‚Äôt climb", "Climb", "Climbing", "Not to climb"],
                correct: 0,
                explanation: "<p>C√¢u m·ªánh l·ªánh ph·ªß ƒë·ªãnh (Negative Imperative): Don't + V (ƒë·ªÉ c·∫£nh b√°o).</p>"
            },
            {
                number: 24,
                question: "IV.8. ________ spectator sports in Britain are cricket and football.",
                options: ["The most popular", "More popular", "Most popular", "The more popular"],
                correct: 0,
                explanation: "<p>So s√°nh nh·∫•t v·ªõi t√≠nh t·ª´ d√†i: The most + popular.</p>"
            },
            {
                number: 25,
                question: "IV.9. ________ are the Olympic Games held? - Every four years.",
                options: ["How often", "When", "Where", "How long"],
                correct: 0,
                explanation: "<p>'Every four years' ch·ªâ t·∫ßn su·∫•t, n√™n d√πng 'How often' (bao l√¢u m·ªôt l·∫ßn).</p>"
            },
            {
                number: 26,
                question: "IV.10. Which sport happens in a ring?",
                options: ["Boxing", "Basketball", "Aerobics", "Swimming"],
                correct: 0,
                explanation: "<p>Boxing ring: v√µ ƒë√†i quy·ªÅn anh.</p>"
            },
            {
                number: 27,
                question: "V.1. Sarah ______________ gymnastics on Saturday evenings.",
                options: ["does", "is doing", "plays", "goes"],
                correct: 0,
                explanation: "<p>'Gymnastics' lu√¥n ƒëi v·ªõi ƒë·ªông t·ª´ 'DO'. 'On Saturday evenings' ch·ªâ th√≥i quen n√™n chia hi·ªán t·∫°i ƒë∆°n (Sarah s·ªë √≠t -> does).</p>"
            },
            {
                number: 28,
                question: "V.2. Mark ______________ badminton with his friends at the moment.",
                options: ["is playing", "plays", "does", "goes"],
                correct: 0,
                explanation: "<p>'At the moment' (ngay b√¢y gi·ªù) c·∫ßn th√¨ hi·ªán t·∫°i ti·∫øp di·ªÖn. Badminton d√πng 'PLAY'.</p>"
            },
            {
                number: 29,
                question: "V.3. My friends and I ______________ climbing yesterday.",
                options: ["went", "played", "did", "go"],
                correct: 0,
                explanation: "<p>C√°c m√¥n c√≥ ƒëu√¥i -ing th∆∞·ªùng ƒëi v·ªõi 'GO'. Qu√° kh·ª© c·ªßa go l√† 'WENT' (v√¨ c√≥ yesterday).</p>"
            },
            {
                number: 30,
                question: "V.4. _________ you __________ table tennis last Sunday?",
                options: ["Did / play", "Do / play", "Did / played", "Were / play"],
                correct: 0,
                explanation: "<p>C√¢u h·ªèi qu√° kh·ª© ƒë∆°n (last Sunday) v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng: Did + S + V(nguy√™n th·ªÉ).</p>"
            },
            {
                number: 31,
                question: "V.5. Jim ______________ basketball because he wasn‚Äôt tall enough.",
                options: ["didn't play", "doesn't play", "wasn't playing", "didn't do"],
                correct: 0,
                explanation: "<p>L√Ω do ·ªü qu√° kh·ª© (wasn't), n√™n h√†nh ƒë·ªông ch∆°i c≈©ng ·ªü qu√° kh·ª© (didn't play).</p>"
            },
            {
                number: 32,
                question: "V.6. We ______________ sports together when we were kids.",
                options: ["played", "play", "went", "did"],
                correct: 0,
                explanation: "<p>'When we were kids' (khi c√≤n b√©) chia qu√° kh·ª© ƒë∆°n. Play sports: ch∆°i th·ªÉ thao.</p>"
            },
            {
                number: 33,
                question: "V.7. People often ______________ jogging in the park.",
                options: ["go", "went", "play", "do"],
                correct: 0,
                explanation: "<p>Go jogging: ƒëi ch·∫°y b·ªô.</p>"
            },
            {
                number: 34,
                question: "V.8. I ______________ judo now and I love it!",
                options: ["am doing", "do", "play", "go"],
                correct: 0,
                explanation: "<p>Do judo (t·∫≠p judo). 'Now' nh·∫•n m·∫°nh s·ª± vi·ªác ƒëang di·ªÖn ra n√™n d√πng hi·ªán t·∫°i ti·∫øp di·ªÖn.</p>"
            }
        ];

        let currentScore = 0;
        let answeredCount = 0;

        function initQuiz() {
            const quizArea = document.getElementById('quiz-area');
            quizData.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.id = `q-card-${index}`;
                card.innerHTML = `
                    <div class="text-gray-400 font-bold mb-2">C√ÇU H·ªéI ${index + 1}</div>
                    <div class="text-xl font-black mb-6">${q.question}</div>
                    <div class="options-grid">
                        ${q.options.map((opt, i) => `
                            <button class="btn-option" onclick="checkAnswer(${index}, ${i}, this)">
                                ${String.fromCharCode(65 + i)}. ${opt}
                            </button>
                        `).join('')}
                    </div>
                    <div id="exp-${index}" class="explanation">
                        ${q.explanation}
                    </div>
                `;
                quizArea.appendChild(card);
            });
        }

        function checkAnswer(qIdx, optIdx, btn) {
            const card = document.getElementById(`q-card-${qIdx}`);
            const buttons = card.querySelectorAll('.btn-option');
            const exp = document.getElementById(`exp-${qIdx}`);
            const isCorrect = optIdx === quizData[qIdx].correct;

            // Disable further clicks on this question
            buttons.forEach(b => b.onclick = null);

            if (isCorrect) {
                btn.classList.add('correct');
                currentScore++;
                playDing();
                confetti({
                    particleCount: 50,
                    spread: 40,
                    origin: { y: 0.7 }
                });
            } else {
                btn.classList.add('wrong');
                buttons[quizData[qIdx].correct].classList.add('correct');
                card.classList.add('shake');
                playFail();
                setTimeout(() => card.classList.remove('shake'), 500);
            }

            exp.style.display = 'block';
            answeredCount++;
            updateProgress();
        }

        function updateProgress() {
            const percent = (answeredCount / quizData.length) * 100;
            document.getElementById('progress-fill').style.width = percent + '%';
        }

        function playDing() {
            const sound = document.getElementById('sound-correct');
            sound.currentTime = 0;
            sound.play();
        }

        function playFail() {
            const sound = document.getElementById('sound-wrong');
            sound.currentTime = 0;
            sound.play();
        }

        function calculateFinalScore() {
            if (answeredCount < quizData.length) {
                if(!confirm("B·∫°n ch∆∞a l√†m h·∫øt c√°c c√¢u, v·∫´n mu·ªën n·ªôp b√†i ch·ª©?")) return;
            }

            const popup = document.getElementById('result-popup');
            const overlay = document.getElementById('overlay');
            const scoreText = document.getElementById('score-text');
            const praiseText = document.getElementById('praise-text');

            scoreText.innerText = `${currentScore}/${quizData.length}`;
            
            let message = "";
            const ratio = currentScore / quizData.length;
            if (ratio === 1) message = "XU·∫§T S·∫ÆC! B·∫°n l√† m·ªôt v·∫≠n ƒë·ªông vi√™n ti·∫øng Anh th·ª±c th·ª•! üèÖ";
            else if (ratio >= 0.8) message = "Tuy·ªát v·ªùi! C√¥ Mai An r·∫•t t·ª± h√†o v·ªÅ b·∫°n! üåü";
            else if (ratio >= 0.5) message = "Kh√° l·∫Øm! C·ªë g·∫Øng luy·ªán t·∫≠p th√™m ch√∫t n·ªØa nh√©! üí™";
            else message = "ƒê·ª´ng n·∫£n ch√≠! H√£y xem k·ªπ ph·∫ßn gi·∫£i th√≠ch c·ªßa c√¥ v√† l√†m l·∫°i nh√©! ‚ù§Ô∏è";

            praiseText.innerText = message;
            
            popup.style.display = 'block';
            overlay.style.display = 'block';

            if (ratio >= 0.7) {
                confetti({
                    particleCount: 200,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            }
        }

        window.onload = initQuiz;
    </script>
</body>
</html>
