<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i ki·ªÉm tra: Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Palette theo ch·ªß ƒë·ªÅ Movies/Hollywood: T√≠m, V√†ng, Xanh ng·ªçc */
            --primary: #8854C0;
            --secondary: #FDCB6E;
            --accent: #00C9A7;
            --correct: #00D26A;
            --wrong: #FF4757;
            --bg-card: #ffffff;
            --text-main: #2d3436;
        }

        * { box-sizing: border-box; font-family: 'Nunito', sans-serif; }

        body {
            margin: 0; padding: 0;
            background: linear-gradient(-45deg, #8854C0, #ff9a9e, #FDCB6E, #00C9A7);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--text-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* SVG Background Pattern ƒë·ªông */
        .pattern-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><text x="50" y="80" font-size="40" opacity="0.6">üé¨</text><text x="250" y="150" font-size="50" opacity="0.5">üçø</text><text x="100" y="300" font-size="30" opacity="0.7">üåü</text><text x="320" y="320" font-size="45" opacity="0.6">üé•</text></svg>');
            animation: floatPattern 30s linear infinite;
            mix-blend-mode: overlay;
        }

        @keyframes floatPattern {
            0% { background-position: 0 0; }
            100% { background-position: 400px 400px; }
        }

        /* Top Control Bar */
        .top-bar {
            height: 70px; background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 30px; z-index: 10;
            backdrop-filter: blur(10px);
        }

        .header-title { font-weight: 900; color: var(--primary); font-size: 24px; margin: 0; }
        .header-subtitle { font-size: 14px; color: #636e72; margin: 0; }

        .timer-container { display: flex; align-items: center; gap: 15px; }
        .timer-display { font-size: 28px; font-weight: 900; color: var(--text-main); min-width: 90px; text-align: center; }
        .btn-timer {
            padding: 10px 20px; font-size: 16px; font-weight: bold; cursor: pointer;
            border: none; border-radius: 15px; background: var(--accent); color: white;
            box-shadow: 0 5px 0 #009e82; transition: all 0.1s;
        }
        .btn-timer:active { transform: translateY(5px); box-shadow: 0 0 0 #009e82; }

        /* Split Screen Layout */
        .main-container {
            display: flex; flex: 1; overflow: hidden; position: relative; z-index: 1;
            padding: 20px; gap: 20px;
        }

        .pane {
            flex: 1; background: rgba(255, 255, 255, 0.95);
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            overflow-y: auto; padding: 30px;
            scroll-behavior: smooth;
        }
        
        /* T√πy ch·ªânh thanh cu·ªôn */
        .pane::-webkit-scrollbar { width: 10px; }
        .pane::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .pane::-webkit-scrollbar-thumb { background: var(--secondary); border-radius: 10px; }

        /* N·ªôi dung Reading */
        .passage { font-size: 18px; line-height: 1.8; margin-bottom: 20px; }
        .gap { display: inline-block; min-width: 40px; border-bottom: 2px solid var(--primary); text-align: center; font-weight: bold; color: var(--primary); }
        
        .btn-translate {
            background: var(--primary); color: white; border: none; padding: 10px 20px;
            border-radius: 12px; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 0 #5f3a87; margin-bottom: 10px; transition: 0.2s;
        }
        .btn-translate:active { transform: translateY(4px); box-shadow: none; }
        .translation-box {
            background: #f8f9fa; border-left: 5px solid var(--primary);
            padding: 15px; border-radius: 0 10px 10px 0; margin-bottom: 20px;
            display: none; font-style: italic; font-size: 16px;
        }

        /* B·∫£ng Glossary */
        .glossary-table {
            width: 100%; border-collapse: collapse; margin-top: 15px; margin-bottom: 30px;
            background: white; border-radius: 10px; overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .glossary-table th { background: var(--secondary); padding: 12px; text-align: left; }
        .glossary-table td { padding: 12px; border-bottom: 1px solid #eee; }
        .glossary-table tr:last-child td { border-bottom: none; }

        /* Khu v·ª±c b√†i t·∫≠p */
        .question-card {
            background: white; border: 2px solid #eee; border-radius: 15px;
            padding: 20px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .q-text { font-size: 18px; font-weight: bold; margin-bottom: 15px; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-btn {
            background: #f1f2f6; border: 2px solid transparent; padding: 15px;
            border-radius: 15px; font-size: 16px; font-weight: 600; cursor: pointer;
            text-align: left; transition: all 0.2s; position: relative;
            box-shadow: 0 4px 0 #dfe4ea;
        }
        .option-btn:hover { transform: scale(1.02); }
        .option-btn:active { transform: scale(0.98) translateY(4px); box-shadow: none; }
        
        .option-btn.correct { background: var(--correct); color: white; box-shadow: 0 4px 0 #00a854; border-color: #00a854; }
        .option-btn.wrong { background: var(--wrong); color: white; box-shadow: 0 4px 0 #d63031; border-color: #d63031; animation: shake 0.4s; }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* D·∫°ng True/False */
        .tf-container { margin-top: 10px; }
        .tf-dots {
            display: inline-block; padding: 10px 20px; background: #eee; border-radius: 15px;
            cursor: pointer; font-weight: bold; color: var(--primary); letter-spacing: 2px;
            box-shadow: 0 4px 0 #d1d8e0; transition: 0.2s;
        }
        .tf-dots:hover { background: #e1e1e1; }
        .tf-choices { display: none; gap: 10px; margin-top: 10px; }
        
        .explanation-box {
            margin-top: 15px; padding: 15px; background: #e3f2fd; border-radius: 12px;
            border-left: 5px solid #2196f3; font-size: 15px; display: none; line-height: 1.6;
        }
        .explanation-box.show { display: block; animation: fadeIn 0.5s; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* Submit & Result */
        .btn-submit {
            display: block; width: 100%; padding: 20px; font-size: 22px; font-weight: 900;
            background: var(--primary); color: white; border: none; border-radius: 20px;
            cursor: pointer; box-shadow: 0 8px 0 #5f3a87; margin-top: 30px; transition: 0.2s;
        }
        .btn-submit:active { transform: translateY(8px); box-shadow: none; }

        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 100; display: none;
            justify-content: center; align-items: center; flex-direction: column;
        }
        .modal-content {
            background: white; padding: 40px; border-radius: 30px; text-align: center;
            max-width: 500px; width: 90%; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: scaleUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes scaleUp { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .score-circle {
            width: 150px; height: 150px; background: var(--secondary); border-radius: 50%;
            display: flex; justify-content: center; align-items: center; margin: 0 auto 20px;
            font-size: 40px; font-weight: 900; color: white; border: 10px solid #ffeaa7;
        }

        /* Confetti */
        .confetti { position: fixed; width: 10px; height: 10px; background: red; z-index: 99; pointer-events: none; }
        
        /* Toast th√¥ng b√°o */
        #toast {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: #ff4757; color: white; padding: 15px 30px; border-radius: 30px;
            font-weight: bold; z-index: 1000; display: none; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

<div class="pattern-overlay"></div>
<div id="toast">ƒê√£ h·∫øt gi·ªù l√†m b√†i!</div>

<div class="top-bar">
    <div>
        <h1 class="header-title">English Test Gamified</h1>
        <p class="header-subtitle">Gi√°o vi√™n: Ms Mai An ULIS</p>
    </div>
    <div class="timer-container">
        <div class="timer-display" id="timer">10:00</div>
        <button class="btn-timer" id="btn-timer-control" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
    </div>
</div>

<div class="main-container">
    <div class="pane left-pane">
        <h2>V. Choose the word which best fits each gap.</h2>
        <div class="passage">
            We all know Katniss Everdeen in The Hunger Games, but <span class="gap">(1)</span> is the actress who plays her, Jennifer Lawrence?<br><br>
            Jennifer Lawrence was <span class="gap">(2)</span> on August 15, 1990 in Kentucky, U.S. When she was a child, Lawrence knew that she wanted to act, and she began performing in school plays and local theatre. <span class="gap">(3)</span> the age of 14, hoping to break into acting and modeling, she went with her mother to New York City to look for work. She <span class="gap">(4)</span> in advertisements for MTV and the fashion company H&M and got work as an actress on TV. Her family moved to Los Angeles to allow her to further her career.<br><br>
            In 2010, Lawrence played the <span class="gap">(5)</span> in the film Winter's Bone and she was nominated for many awards including an Oscar. In 2012, she starred in the film The Hunger Games <span class="gap">(6)</span> Katniss Everdeen. Lawrence also starred in another <span class="gap">(7)</span> film in 2012, director David O. Russell‚Äôs Silver Lining Playbook and at the age of 22 she became the second <span class="gap">(8)</span> woman to win the Academy Award for Best Actress for her performance in Silver Lining Playbook.
        </div>
        
        <button class="btn-translate" onclick="toggleTranslation('trans1')">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
        <div id="trans1" class="translation-box">
            Ch√∫ng ta ƒë·ªÅu bi·∫øt Katniss Everdeen trong ƒê·∫•u tr∆∞·ªùng sinh t·ª≠ (The Hunger Games), nh∆∞ng n·ªØ di·ªÖn vi√™n ƒë√≥ng vai c√¥ ·∫•y, Jennifer Lawrence, l√† ai?<br><br>
            Jennifer Lawrence sinh ng√†y 15 th√°ng 8 nƒÉm 1990 t·∫°i Kentucky, M·ªπ. Ngay t·ª´ khi c√≤n nh·ªè, Lawrence ƒë√£ bi·∫øt m√¨nh mu·ªën theo ƒëu·ªïi nghi·ªáp di·ªÖn, v√† c√¥ b·∫Øt ƒë·∫ßu bi·ªÉu di·ªÖn trong c√°c v·ªü k·ªãch c·ªßa tr∆∞·ªùng c≈©ng nh∆∞ nh√† h√°t ƒë·ªãa ph∆∞∆°ng. V√†o nƒÉm 14 tu·ªïi, v·ªõi hy v·ªçng b∆∞·ªõc ch√¢n v√†o ng√†nh di·ªÖn xu·∫•t v√† ng∆∞·ªùi m·∫´u, c√¥ c√πng m·∫π ƒë·∫øn th√†nh ph·ªë New York ƒë·ªÉ t√¨m vi·ªác. C√¥ ƒë√£ xu·∫•t hi·ªán trong c√°c qu·∫£ng c√°o cho MTV, c√¥ng ty th·ªùi trang H&M v√† nh·∫≠n ƒë∆∞·ª£c c√¥ng vi·ªác l√†m di·ªÖn vi√™n truy·ªÅn h√¨nh. Gia ƒë√¨nh c√¥ ƒë√£ chuy·ªÉn ƒë·∫øn Los Angeles ƒë·ªÉ gi√∫p c√¥ ph√°t tri·ªÉn xa h∆°n trong s·ª± nghi·ªáp.<br><br>
            NƒÉm 2010, Lawrence ƒë√≥ng vai ch√≠nh trong b·ªô phim Winter's Bone v√† ƒë∆∞·ª£c ƒë·ªÅ c·ª≠ cho nhi·ªÅu gi·∫£i th∆∞·ªüng trong ƒë√≥ c√≥ gi·∫£i Oscar. NƒÉm 2012, c√¥ ƒë·∫£m nh·∫≠n vai di·ªÖn Katniss Everdeen trong b·ªô phim The Hunger Games. Lawrence c≈©ng ƒë√≥ng vai ch√≠nh trong m·ªôt b·ªô phim ƒë√°ng ch√∫ √Ω kh√°c v√†o nƒÉm 2012, Silver Lining Playbook c·ªßa ƒë·∫°o di·ªÖn David O. Russell v√† ·ªü tu·ªïi 22, c√¥ tr·ªü th√†nh ng∆∞·ªùi ph·ª• n·ªØ tr·∫ª th·ª© hai trong l·ªãch s·ª≠ gi√†nh ƒë∆∞·ª£c gi·∫£i Oscar cho N·ªØ di·ªÖn vi√™n ch√≠nh xu·∫•t s·∫Øc nh·∫•t nh·ªù m√†n tr√¨nh di·ªÖn tuy·ªát v·ªùi c·ªßa m√¨nh trong b·ªô phim n√†y.
        </div>

        <table class="glossary-table">
            <tr><th>T·ª´ v·ª±ng (B1-C2)</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a ti·∫øng Vi·ªát</th></tr>
            <tr><td>1. Actress</td><td>Noun</td><td>N·ªØ di·ªÖn vi√™n</td></tr>
            <tr><td>2. Perform</td><td>Verb</td><td>Bi·ªÉu di·ªÖn, tr√¨nh di·ªÖn</td></tr>
            <tr><td>3. Local</td><td>Adj</td><td>Thu·ªôc ƒë·ªãa ph∆∞∆°ng</td></tr>
            <tr><td>4. Break into</td><td>Phrasal Verb</td><td>B·∫Øt ƒë·∫ßu tham gia (v√†o m·ªôt lƒ©nh v·ª±c)</td></tr>
            <tr><td>5. Advertisement</td><td>Noun</td><td>Qu·∫£ng c√°o</td></tr>
            <tr><td>6. Nominate</td><td>Verb</td><td>ƒê·ªÅ c·ª≠</td></tr>
            <tr><td>7. Lead</td><td>Noun</td><td>Vai ch√≠nh</td></tr>
            <tr><td>8. Star</td><td>Verb</td><td>ƒê√≥ng vai ch√≠nh</td></tr>
            <tr><td>9. Notable</td><td>Adj</td><td>ƒê√°ng ch√∫ √Ω, n·ªïi b·∫≠t</td></tr>
            <tr><td>10. Performance</td><td>Noun</td><td>M√†n tr√¨nh di·ªÖn</td></tr>
        </table>

        <hr style="border:1px dashed #ccc; margin: 40px 0;">

        <h2>VII. Read the text and decide whether the following statements are True (T) or False (F).</h2>
        <div class="passage">
            Everybody loves movies. We see them at theatres and we watch them on TV. They are popular with children and adults, too. We can learn from them or we can have a good time watching them. We also call movies ‚Äòmotion pictures‚Äô. ‚ÄòMotion‚Äô is a noun for ‚Äòmoving‚Äô. People tried to show motion in pictures for centuries. Even prehistoric artists showed animals running in their cave pictures. Near the end of the 19th century, several Europeans and Americans tried to make movies. No one knows who made the first one. New York City had the first movie theatre in 1894. People put money in a small machine and looked into it at the movies. By 1900, movies were popular all over Europe and the United States. They were not very good, but people liked them because they were new and different. Every year people invented ways to make movies better. They invented machines to show the pictures on a screen. Then everyone could see the motion pictures on the front wall of a theatre instead of inside a small machine. In 1927, inventors added sound to movies. Then they added color. Today it costs several million dollars to make a movie. However, moviemakers collect million dollars from people at movie theatres because everyone loves movies.
        </div>

        <button class="btn-translate" onclick="toggleTranslation('trans2')">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
        <div id="trans2" class="translation-box">
            M·ªçi ng∆∞·ªùi ƒë·ªÅu y√™u th√≠ch phim ·∫£nh. Ch√∫ng ta xem phim ·ªü r·∫°p v√† xem tr√™n TV. Phim ·∫£nh ph·ªï bi·∫øn v·ªõi c·∫£ tr·∫ª em v√† ng∆∞·ªùi l·ªõn. Ch√∫ng ta c√≥ th·ªÉ h·ªçc h·ªèi t·ª´ phim ho·∫∑c c√≥ kho·∫£ng th·ªùi gian vui v·∫ª khi xem ch√∫ng. Ch√∫ng ta c≈©ng g·ªçi phim l√† 'motion pictures' (h√¨nh ·∫£nh chuy·ªÉn ƒë·ªông). 'Motion' l√† danh t·ª´ c·ªßa 'moving' (chuy·ªÉn ƒë·ªông). Con ng∆∞·ªùi ƒë√£ c·ªë g·∫Øng th·ªÉ hi·ªán s·ª± chuy·ªÉn ƒë·ªông trong c√°c b·ª©c tranh t·ª´ nhi·ªÅu th·∫ø k·ª∑ tr∆∞·ªõc. Th·∫≠m ch√≠ c√°c h·ªça sƒ© th·ªùi ti·ªÅn s·ª≠ c≈©ng ƒë√£ v·∫Ω c·∫£nh ƒë·ªông v·∫≠t ƒëang ch·∫°y trong c√°c b·ª©c tranh hang ƒë·ªông c·ªßa h·ªç. G·∫ßn cu·ªëi th·∫ø k·ª∑ 19, m·ªôt v√†i ng∆∞·ªùi ch√¢u √Çu v√† ch√¢u M·ªπ ƒë√£ c·ªë g·∫Øng l√†m phim. Kh√¥ng ai bi·∫øt ai l√† ng∆∞·ªùi l√†m ra b·ªô phim ƒë·∫ßu ti√™n. Th√†nh ph·ªë New York c√≥ r·∫°p chi·∫øu phim ƒë·∫ßu ti√™n v√†o nƒÉm 1894. M·ªçi ng∆∞·ªùi b·ªè ti·ªÅn v√†o m·ªôt c·ªó m√°y nh·ªè v√† nh√¨n v√†o ƒë√≥ ƒë·ªÉ xem phim. ƒê·∫øn nƒÉm 1900, phim ·∫£nh ƒë√£ tr·ªü n√™n ph·ªï bi·∫øn kh·∫Øp ch√¢u √Çu v√† Hoa K·ª≥. Ch√∫ng kh√¥ng th·ª±c s·ª± qu√° xu·∫•t s·∫Øc, nh∆∞ng m·ªçi ng∆∞·ªùi th√≠ch ch√∫ng v√¨ ch√∫ng m·ªõi m·∫ª v√† kh√°c bi·ªát. M·ªói nƒÉm ng∆∞·ªùi ta l·∫°i ph√°t minh ra nh·ªØng c√°ch ƒë·ªÉ l√†m cho phim hay h∆°n. H·ªç ƒë√£ ph√°t minh ra m√°y m√≥c ƒë·ªÉ chi·∫øu h√¨nh ·∫£nh l√™n m·ªôt m√†n h√¨nh. Sau ƒë√≥, m·ªçi ng∆∞·ªùi c√≥ th·ªÉ xem nh·ªØng h√¨nh ·∫£nh chuy·ªÉn ƒë·ªông tr√™n b·ª©c t∆∞·ªùng ph√≠a tr∆∞·ªõc c·ªßa r·∫°p chi·∫øu phim thay v√¨ xem b√™n trong m·ªôt c·ªó m√°y nh·ªè. NƒÉm 1927, c√°c nh√† ph√°t minh ƒë√£ th√™m √¢m thanh v√†o phim. Sau ƒë√≥ h·ªç th√™m m√†u s·∫Øc. Ng√†y nay, vi·ªác l√†m m·ªôt b·ªô phim t·ªën v√†i tri·ªáu ƒë√¥ la. Tuy nhi√™n, c√°c nh√† l√†m phim thu v·ªÅ h√†ng tri·ªáu ƒë√¥ la t·ª´ kh√°n gi·∫£ t·∫°i c√°c r·∫°p chi·∫øu phim b·ªüi v√¨ m·ªçi ng∆∞·ªùi ƒë·ªÅu y√™u th√≠ch phim ·∫£nh.
        </div>

        <table class="glossary-table">
            <tr><th>T·ª´ v·ª±ng (B1-C2)</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a ti·∫øng Vi·ªát</th></tr>
            <tr><td>1. Popular</td><td>Adj</td><td>Ph·ªï bi·∫øn, ƒë∆∞·ª£c y√™u th√≠ch</td></tr>
            <tr><td>2. Adult</td><td>Noun</td><td>Ng∆∞·ªùi l·ªõn, ng∆∞·ªùi tr∆∞·ªüng th√†nh</td></tr>
            <tr><td>3. Motion</td><td>Noun</td><td>S·ª± chuy·ªÉn ƒë·ªông</td></tr>
            <tr><td>4. Century</td><td>Noun</td><td>Th·∫ø k·ª∑</td></tr>
            <tr><td>5. Prehistoric</td><td>Adj</td><td>Thu·ªôc th·ªùi ti·ªÅn s·ª≠</td></tr>
            <tr><td>6. Cave</td><td>Noun</td><td>Hang ƒë·ªông</td></tr>
            <tr><td>7. Machine</td><td>Noun</td><td>M√°y m√≥c</td></tr>
            <tr><td>8. Invent</td><td>Verb</td><td>Ph√°t minh, s√°ng ch·∫ø</td></tr>
            <tr><td>9. Screen</td><td>Noun</td><td>M√†n h√¨nh</td></tr>
            <tr><td>10. Collect</td><td>Verb</td><td>Thu th·∫≠p, thu v·ªÅ (ti·ªÅn)</td></tr>
        </table>
    </div>

    <div class="pane right-pane" id="exercise-pane">
        <button class="btn-submit" onclick="submitExam()">N·ªòP B√ÄI NH·∫¨N ƒêI·ªÇM!</button>
    </div>
</div>

<div class="modal" id="result-modal">
    <div class="modal-content">
        <h2 style="color: var(--primary); font-size: 30px;">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
        <div class="score-circle" id="final-score">0/15</div>
        <h3 id="feedback-msg" style="color: #636e72;"></h3>
        <button class="btn-submit" style="margin-top: 20px;" onclick="location.reload()">L√ÄM L·∫†I B√ÄI</button>
    </div>
</div>

<script>
    // --- D·ªÆ LI·ªÜU C√ÇU H·ªéI ---
    const mcqQuestions = [
        {
            id: 'q1',
            text: "Question 1: We all know Katniss Everdeen in The Hunger Games, but (1) ______ is the actress who plays her, Jennifer Lawrence?",
            options: [
                { id: 'A', text: 'what' },
                { id: 'B', text: 'who', isCorrect: true },
                { id: 'C', text: 'which' },
                { id: 'D', text: 'whom' }
            ],
            explanation: "<b>Ph√¢n t√≠ch:</b><br>- A. what: c√°i g√¨.<br>- B. who: ai (ƒë·∫°i t·ª´ quan h·ªá/nghi v·∫•n thay cho ng∆∞·ªùi ƒë√≥ng vai tr√≤ ch·ªß ng·ªØ).<br>- C. which: c√°i n√†o.<br>- D. whom: ai (thay cho ng∆∞·ªùi ƒë√≥ng vai tr√≤ t√¢n ng·ªØ).<br><b>Gi·∫£i th√≠ch:</b> ·ªû ƒë√¢y ta c·∫ßn m·ªôt ƒë·∫°i t·ª´ nghi v·∫•n ch·ªâ ng∆∞·ªùi, ƒë√≥ng vai tr√≤ ch·ªß ng·ªØ trong m·ªánh ƒë·ªÅ '... is the actress' (Ai l√† n·ªØ di·ªÖn vi√™n...). Do ƒë√≥ 'who' l√† ƒë√°p √°n ch√≠nh x√°c."
        },
        {
            id: 'q2',
            text: "Question 2: Jennifer Lawrence was (2)______ on August 15, 1990 in Kentucky, U.S.",
            options: [
                { id: 'A', text: 'bear' },
                { id: 'B', text: 'beared' },
                { id: 'C', text: 'born', isCorrect: true },
                { id: 'D', text: 'bore' }
            ],
            explanation: "<b>Ph√¢n t√≠ch c·∫•u tr√∫c:</b> To be born (ƒë∆∞·ª£c sinh ra).<br>ƒê√¢y l√† d·∫°ng b·ªã ƒë·ªông c·ªßa ƒë·ªông t·ª´ 'bear' (sinh ƒë·∫ª). C√°c d·∫°ng c·ªßa ƒë·ªông t·ª´ n√†y l√†: bear - bore - born.<br>V√¨ v·∫≠y, c·ª•m t·ª´ c·ªë ƒë·ªãnh ƒë·ªÉ ch·ªâ vi·ªác ai ƒë√≥ sinh ra l√† 'was/were born'. ƒê√°p √°n ƒë√∫ng l√† C."
        },
        {
            id: 'q3',
            text: "Question 3: (3) ______ the age of 14, hoping to break into acting and modeling...",
            options: [
                { id: 'A', text: 'of' },
                { id: 'B', text: 'in' },
                { id: 'C', text: 'By' },
                { id: 'D', text: 'At', isCorrect: true }
            ],
            explanation: "<b>Ki·∫øn th·ª©c gi·ªõi t·ª´:</b> C·ª•m t·ª´ c·ªë ƒë·ªãnh ch·ªâ ƒë·ªô tu·ªïi l√† 'At the age of + s·ªë tu·ªïi' (V√†o nƒÉm ... tu·ªïi).<br>Kh√¥ng d√πng In, On hay By cho c·∫•u tr√∫c n√†y. Do ƒë√≥ ch·ªçn D."
        },
        {
            id: 'q4',
            text: "Question 4: She (4) ______ in advertisements for MTV and the fashion company H&M...",
            options: [
                { id: 'A', text: 'appeared', isCorrect: true },
                { id: 'B', text: 'attended' },
                { id: 'C', text: 'starred' },
                { id: 'D', text: 'made' }
            ],
            explanation: "<b>Ph√¢n t√≠ch t·ª´ v·ª±ng:</b><br>- A. appeared in: xu·∫•t hi·ªán trong (phim, qu·∫£ng c√°o).<br>- B. attended: tham d·ª± (th∆∞·ªùng d√πng cho s·ª± ki·ªán, l·ªõp h·ªçc).<br>- C. starred in: ƒë√≥ng vai ch√≠nh (th∆∞·ªùng d√πng cho phim/k·ªãch l·ªõn, √≠t d√πng cho qu·∫£ng c√°o th√¥ng th∆∞·ªùng khi m·ªõi kh·ªüi nghi·ªáp).<br>- D. made: l√†m ra.<br><b>Gi·∫£i th√≠ch:</b> Ph√π h·ª£p nh·∫•t v·ªÅ m·∫∑t ng·ªØ nghƒ©a l√† 'xu·∫•t hi·ªán trong c√°c qu·∫£ng c√°o'. Ch·ªçn A."
        },
        {
            id: 'q5',
            text: "Question 5: In 2010, Lawrence played the (5) ______ in the film Winter's Bone...",
            options: [
                { id: 'A', text: 'acting' },
                { id: 'B', text: 'lead', isCorrect: true },
                { id: 'C', text: 'performance' },
                { id: 'D', text: 'scenery' }
            ],
            explanation: "<b>Ph√¢n t√≠ch t·ª´ v·ª±ng:</b><br>- A. acting (n): di·ªÖn xu·∫•t.<br>- B. lead (n): vai ch√≠nh (play the lead = ƒë√≥ng vai ch√≠nh).<br>- C. performance (n): m√†n tr√¨nh di·ªÖn.<br>- D. scenery (n): phong c·∫£nh.<br><b>Gi·∫£i th√≠ch:</b> C·ª•m t·ª´ 'play the lead' l√† m·ªôt collocation (c√°ch k·∫øt h·ª£p t·ª´) r·∫•t ph·ªï bi·∫øn trong ti·∫øng Anh, mang nghƒ©a l√† ƒë·∫£m nh·∫≠n vai di·ªÖn ch√≠nh trong m·ªôt b·ªô phim. Ch·ªçn B."
        },
        {
            id: 'q6',
            text: "Question 6: In 2012, she starred in the film The Hunger Games (6) ______ Katniss Everdeen.",
            options: [
                { id: 'A', text: 'a', isCorrect: true }, // D·ªØ li·ªáu g·ªëc g√µ l·ªói, gi·∫£i th√≠ch r√µ
                { id: 'B', text: 'for' },
                { id: 'C', text: 'with' },
                { id: 'D', text: 'of' }
            ],
            explanation: "<b>L∆∞u √Ω t·ª´ Ms. Mai An:</b> C√°c em ∆°i, ·ªü c√¢u n√†y ƒë·ªÅ b√†i g·ªëc ƒë√£ c√≥ m·ªôt ch√∫t l·ªói ƒë√°nh m√°y. C·∫•u tr√∫c ƒë√∫ng ph·∫£i l√† <b>'star as + t√™n nh√¢n v·∫≠t'</b> (ƒë√≥ng vai t∆∞ c√°ch l√†...). Trong 4 ƒë√°p √°n kh√¥ng c√≥ t·ª´ 'as', m√† ng∆∞·ªùi ra ƒë·ªÅ g√µ nh·∫ßm 'as' th√†nh 'a'.<br>C√¥ thi·∫øt l·∫≠p ƒë√°p √°n A ƒë·∫°i di·ªán cho t·ª´ 'as' nh√©. Nh·ªõ l√† trong ph√≤ng thi th·∫≠t n·∫øu g·∫∑p tr∆∞·ªùng h·ª£p n√†y, h√£y ch·ªçn ph∆∞∆°ng √°n c√≥ v·∫ª l√† l·ªói ƒë√°nh m√°y c·ªßa ƒë√°p √°n ƒë√∫ng nh·∫•t!"
        },
        {
            id: 'q7',
            text: "Question 7: Lawrence also starred in another (7) ______ film in 2012, director David O. Russell‚Äôs Silver Lining Playbook...",
            options: [
                { id: 'A', text: 'complicated' },
                { id: 'B', text: 'ordinary' },
                { id: 'C', text: 'infamous' },
                { id: 'D', text: 'notable', isCorrect: true }
            ],
            explanation: "<b>Ph√¢n t√≠ch nghƒ©a:</b><br>- A. complicated (adj): ph·ª©c t·∫°p.<br>- B. ordinary (adj): b√¨nh th∆∞·ªùng, t·∫ßm th∆∞·ªùng.<br>- C. infamous (adj): kh√©t ti·∫øng (n·ªïi ti·∫øng v√¨ ƒëi·ªÅu x·∫•u).<br>- D. notable (adj): ƒë√°ng ch√∫ √Ω, n·ªïi b·∫≠t.<br><b>Gi·∫£i th√≠ch:</b> B·ªô phim n√†y gi√∫p c√¥ gi√†nh gi·∫£i Oscar, n√™n ƒë√¢y ph·∫£i l√† m·ªôt b·ªô phim mang √Ω nghƒ©a t√≠ch c·ª±c v√† xu·∫•t s·∫Øc. T·ª´ 'notable' l√† l·ª±a ch·ªçn ch√≠nh x√°c nh·∫•t. Ch·ªçn D."
        },
        {
            id: 'q8',
            text: "Question 8: ...she became the second (8) ______ woman to win the Academy Award for Best Actress...",
            options: [
                { id: 'A', text: 'young' },
                { id: 'B', text: 'younger' },
                { id: 'C', text: 'youngest', isCorrect: true },
                { id: 'D', text: 'youth' }
            ],
            explanation: "<b>Ng·ªØ ph√°p:</b> C·∫•u tr√∫c so s√°nh nh·∫•t ƒëi k√®m s·ªë th·ª© t·ª±: 'the + s·ªë th·ª© t·ª± (second, third...) + t√≠nh t·ª´ so s√°nh nh·∫•t (youngest) + N'.<br>Nghƒ©a c·ªßa c√¢u l√† 'ng∆∞·ªùi ph·ª• n·ªØ tr·∫ª th·ª© hai gi√†nh ƒë∆∞·ª£c gi·∫£i Oscar'. Do ƒë√≥ ta c·∫ßn d·∫°ng so s√°nh nh·∫•t 'youngest'. Ch·ªçn C."
        }
    ];

    const tfQuestions = [
        {
            id: 'tf1', text: "1. Children like movies, but most adults do not.",
            answer: 'False',
            explanation: "<b>D·∫´n ch·ª©ng trong b√†i:</b> 'They are popular with children and adults, too.' (Ch√∫ng ph·ªï bi·∫øn v·ªõi c·∫£ tr·∫ª em v√† NG∆Ø·ªúI L·ªöN). Do ƒë√≥ nh·∫≠n ƒë·ªãnh ng∆∞·ªùi l·ªõn kh√¥ng th√≠ch l√† <b>Sai (False)</b>."
        },
        {
            id: 'tf2', text: "2. We can learn from motion pictures.",
            answer: 'True',
            explanation: "<b>D·∫´n ch·ª©ng trong b√†i:</b> 'We can learn from them or we can have a good time watching them.' (Ch√∫ng ta C√ì TH·ªÇ h·ªçc h·ªèi t·ª´ ch√∫ng...). Nh·∫≠n ƒë·ªãnh n√†y ho√†n to√†n kh·ªõp v·ªõi b√†i. <b>ƒê√∫ng (True)</b>."
        },
        {
            id: 'tf3', text: "3. Prehistoric artists showed motion in the cave paintings.",
            answer: 'True',
            explanation: "<b>D·∫´n ch·ª©ng:</b> 'Even prehistoric artists showed animals running in their cave pictures.' (Th·∫≠m ch√≠ c√°c h·ªça sƒ© th·ªùi ti·ªÅn s·ª≠ c≈©ng th·ªÉ hi·ªán c·∫£nh ƒë·ªông v·∫≠t ƒëang ch·∫°y...). ƒê·ªông v·∫≠t ƒëang ch·∫°y ch√≠nh l√† th·ªÉ hi·ªán s·ª± chuy·ªÉn ƒë·ªông (motion). <b>ƒê√∫ng (True)</b>."
        },
        {
            id: 'tf4', text: "4. An American made the first movie.",
            answer: 'False',
            explanation: "<b>D·∫´n ch·ª©ng:</b> 'No one knows who made the first one.' (Kh√¥ng ai bi·∫øt ai l√† ng∆∞·ªùi l√†m ra b·ªô phim ƒë·∫ßu ti√™n). Vi·ªác kh·∫≥ng ƒë·ªãnh m·ªôt ng∆∞·ªùi M·ªπ l√†m ra l√† kh√¥ng c√≥ c∆° s·ªü. <b>Sai (False)</b>."
        },
        {
            id: 'tf5', text: "5. Movies were popular in Europe at the end of the 19th century.",
            answer: 'True',
            explanation: "<b>D·∫´n ch·ª©ng:</b> 'By 1900, movies were popular all over Europe and the United States.' NƒÉm 1900 ch√≠nh l√† nƒÉm cu·ªëi c√πng c·ªßa th·∫ø k·ª∑ 19. Do ƒë√≥ nh·∫≠n ƒë·ªãnh phim ·∫£nh tr·ªü n√™n ph·ªï bi·∫øn ·ªü Ch√¢u √Çu v√†o cu·ªëi th·∫ø k·ª∑ 19 l√† <b>ƒê√∫ng (True)</b>."
        },
        {
            id: 'tf6', text: "6. Movies are the same today as they were in 1920.",
            answer: 'False',
            explanation: "<b>D·∫´n ch·ª©ng:</b> 'In 1927, inventors added sound to movies. Then they added color.' Phim nh·ªØng nƒÉm 1920 ch·ªß y·∫øu l√† phim c√¢m v√† ƒëen tr·∫Øng. Sau ƒë√≥ ƒë∆∞·ª£c th√™m √¢m thanh v√† m√†u s·∫Øc. V√¨ v·∫≠y phim ng√†y nay kh√¥ng h·ªÅ gi·ªëng v·ªõi nƒÉm 1920. <b>Sai (False)</b>."
        },
        {
            id: 'tf7', text: "7. Inventors added sounds and colors to movies at the same time.",
            answer: 'False',
            explanation: "<b>D·∫´n ch·ª©ng:</b> 'In 1927, inventors added sound to movies. THEN they added color.' T·ª´ 'Then' (sau ƒë√≥) ch·ªâ ra tr√¨nh t·ª± th·ªùi gian, √¢m thanh ƒë∆∞·ª£c th√™m v√†o tr∆∞·ªõc, m√†u s·∫Øc th√™m v√†o sau. Kh√¥ng ph·∫£i c√πng m·ªôt l√∫c (at the same time). <b>Sai (False)</b>."
        }
    ];

    // Tr·∫°ng th√°i b√†i l√†m
    let score = 0;
    const totalQuestions = mcqQuestions.length + tfQuestions.length;
    let answeredQuestions = {};

    // --- WEB AUDIO API (T·∫°o √¢m thanh kh√¥ng c·∫ßn file) ---
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    function playCorrectSound() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        osc.type = 'sine';
        osc.frequency.setValueAtTime(800, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
        gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        osc.start(); osc.stop(audioCtx.currentTime + 0.3);
    }

    function playWrongSound() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(300, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
        gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
        osc.start(); osc.stop(audioCtx.currentTime + 0.4);
    }

    // --- CONFETTI HI·ªÜU ·ª®NG ---
    function shootConfetti(x, y) {
        const colors = ['#00D26A', '#FDCB6E', '#8854C0', '#00C9A7', '#ff9a9e'];
        for(let i=0; i<30; i++) {
            const conf = document.createElement('div');
            conf.className = 'confetti';
            conf.style.left = x + 'px';
            conf.style.top = y + 'px';
            conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(conf);

            const angle = Math.random() * Math.PI * 2;
            const velocity = 5 + Math.random() * 10;
            let vx = Math.cos(angle) * velocity;
            let vy = Math.sin(angle) * velocity;

            let tick = 0;
            function animate() {
                tick++;
                vx *= 0.95; // ma s√°t
                vy += 0.5; // tr·ªçng l·ª±c
                const currentLeft = parseFloat(conf.style.left);
                const currentTop = parseFloat(conf.style.top);
                conf.style.left = (currentLeft + vx) + 'px';
                conf.style.top = (currentTop + vy) + 'px';
                conf.style.transform = `rotate(${tick * 10}deg)`;
                
                if(tick < 50) requestAnimationFrame(animate);
                else conf.remove();
            }
            animate();
        }
    }

    // --- H√ÄM TI·ªÜN √çCH ---
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function toggleTranslation(id) {
        const el = document.getElementById(id);
        el.style.display = el.style.display === 'block' ? 'none' : 'block';
    }

    // --- RENDER GIAO DI·ªÜN ---
    const exercisePane = document.getElementById('exercise-pane');
    
    // Kh·ªüi t·∫°o HTML cho b√†i t·∫≠p
    let htmlContent = `<h2>B√ÄI T·∫¨P TR·∫ÆC NGHI·ªÜM T∆Ø∆†NG T√ÅC</h2>`;
    
    // Render MCQs
    mcqQuestions.forEach((q, index) => {
        // Tr·ªôn ƒë√°p √°n ng·∫´u nhi√™n theo y√™u c·∫ßu
        const shuffledOptions = shuffleArray([...q.options]);
        
        let optionsHtml = '';
        shuffledOptions.forEach(opt => {
            optionsHtml += `<button class="option-btn" onclick="checkMCQ('${q.id}', this, ${opt.isCorrect || false}, event)">
                ${opt.text}
            </button>`;
        });

        htmlContent += `
        <div class="question-card" id="card-${q.id}">
            <div class="q-text">${q.text}</div>
            <div class="options-grid">${optionsHtml}</div>
            <div class="explanation-box" id="exp-${q.id}">${q.explanation}</div>
        </div>`;
    });

    htmlContent += `<hr style="border:1px solid #eee; margin: 30px 0;"><h2>B√ÄI T·∫¨P TRUE / FALSE</h2>`;

    // Render True/False
    tfQuestions.forEach(q => {
        htmlContent += `
        <div class="question-card" id="card-${q.id}">
            <div class="q-text">${q.text}</div>
            <div class="tf-container">
                <span class="tf-dots" id="dots-${q.id}" onclick="showTFOptions('${q.id}')">...................</span>
                <div class="tf-choices" id="choices-${q.id}">
                    <button class="option-btn" onclick="checkTF('${q.id}', 'True', '${q.answer}', event)">‚úÖ True</button>
                    <button class="option-btn" onclick="checkTF('${q.id}', 'False', '${q.answer}', event)">‚ùå False</button>
                </div>
            </div>
            <div class="explanation-box" id="exp-${q.id}">${q.explanation}</div>
        </div>`;
    });

    // Th√™m n√∫t submit ·ªü cu·ªëi (gi·ªØ nguy√™n n√∫t c≈©)
    const btnSubmitHTML = `<button class="btn-submit" onclick="submitExam()">N·ªòP B√ÄI NH·∫¨N ƒêI·ªÇM!</button>`;
    exercisePane.innerHTML = htmlContent + btnSubmitHTML;


    // --- LOGIC X·ª¨ L√ù ƒê√ÅP √ÅN ---
    function checkMCQ(qId, btnElement, isCorrect, event) {
        if(answeredQuestions[qId]) return; // ƒê√£ tr·∫£ l·ªùi r·ªìi th√¨ kho√°
        answeredQuestions[qId] = true;

        const parentGrid = btnElement.parentElement;
        const allBtns = parentGrid.querySelectorAll('.option-btn');
        const expBox = document.getElementById(`exp-${qId}`);

        if(isCorrect) {
            btnElement.classList.add('correct');
            playCorrectSound();
            shootConfetti(event.clientX, event.clientY);
            score++;
        } else {
            btnElement.classList.add('wrong');
            playWrongSound();
        }

        // Hi·ªán ƒë√°p √°n ƒë√∫ng v√† gi·∫£i th√≠ch
        allBtns.forEach(btn => {
            btn.style.pointerEvents = 'none'; // Kho√° c√°c n√∫t kh√°c
            // M·ªü n√∫t ·∫©n thu·ªôc t√≠nh isCorrect (do ta set html r·ªóng, ta d√πng logic bind l·∫°i ƒë·ªÉ t√¨m n√∫t ƒë√∫ng)
            // L·∫•y l·∫°i danh s√°ch ƒë√°p √°n g·ªëc
            const qData = mcqQuestions.find(x => x.id === qId);
            const correctText = qData.options.find(x => x.isCorrect).text;
            if(btn.innerText.trim() === correctText) {
                btn.classList.add('correct'); // Highlight n√∫t ƒë√∫ng
            }
        });
        
        expBox.classList.add('show');
    }

    function showTFOptions(qId) {
        if(answeredQuestions[qId]) return;
        document.getElementById(`dots-${qId}`).style.display = 'none';
        document.getElementById(`choices-${qId}`).style.display = 'flex';
    }

    function checkTF(qId, userChoice, correctChoice, event) {
        if(answeredQuestions[qId]) return;
        answeredQuestions[qId] = true;

        const choicesDiv = document.getElementById(`choices-${qId}`);
        const allBtns = choicesDiv.querySelectorAll('.option-btn');
        const expBox = document.getElementById(`exp-${qId}`);

        let isCorrect = (userChoice === correctChoice);

        allBtns.forEach(btn => {
            btn.style.pointerEvents = 'none';
            if(btn.innerText.includes(userChoice)) {
                btn.classList.add(isCorrect ? 'correct' : 'wrong');
            }
            if(!isCorrect && btn.innerText.includes(correctChoice)) {
                btn.classList.add('correct'); // Highlight ƒë√°p √°n ƒë√∫ng
            }
        });

        if(isCorrect) {
            playCorrectSound();
            shootConfetti(event.clientX, event.clientY);
            score++;
        } else {
            playWrongSound();
        }

        expBox.classList.add('show');
    }


    // --- LOGIC TIMER ƒê·∫æM NG∆Ø·ª¢C ---
    let timerInterval;
    let timeRemaining = 10 * 60; // 10 ph√∫t
    let isTimerRunning = false;

    function formatTime(seconds) {
        const m = Math.floor(seconds / 60);
        const s = seconds % 60;
        return `${m < 10 ? '0':''}${m}:${s < 10 ? '0':''}${s}`;
    }

    function toggleTimer() {
        const btn = document.getElementById('btn-timer-control');
        const display = document.getElementById('timer');

        if(isTimerRunning) {
            clearInterval(timerInterval);
            btn.innerText = "TI·∫æP T·ª§C B√ÄI THI";
            btn.style.background = "#FDCB6E"; // ƒê·ªïi m√†u v√†ng
        } else {
            btn.innerText = "T·∫†M D·ª™NG";
            btn.style.background = "#FF4757"; // ƒê·ªïi m√†u ƒë·ªè
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                display.innerText = formatTime(timeRemaining);
                
                if(timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    showToast();
                    btn.innerText = "H·∫æT GI·ªú";
                    btn.style.pointerEvents = 'none';
                    btn.style.background = "#636e72";
                }
            }, 1000);
        }
        isTimerRunning = !isTimerRunning;
    }

    function showToast() {
        const toast = document.getElementById('toast');
        toast.innerHTML = "ƒê√£ h·∫øt gi·ªù l√†m b√†i. B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.";
        toast.style.display = 'block';
        playWrongSound();
        setTimeout(() => { toast.style.display = 'none'; }, 6000);
    }

    // --- LOGIC N·ªòP B√ÄI ---
    function submitExam() {
        const modal = document.getElementById('result-modal');
        const scoreDisplay = document.getElementById('final-score');
        const feedback = document.getElementById('feedback-msg');

        scoreDisplay.innerText = `${score}/${totalQuestions}`;

        let ratio = score / totalQuestions;
        if(ratio === 1) {
            feedback.innerText = "üéâ Tuy·ªát ƒë·ªânh! B·∫°n ƒë√≠ch th·ªã l√† m·ªôt Thi√™n t√†i Ngo·∫°i ng·ªØ! üéâ";
            shootConfetti(window.innerWidth/2, window.innerHeight/2);
            setTimeout(() => shootConfetti(window.innerWidth/3, window.innerHeight/3), 500);
            setTimeout(() => shootConfetti(window.innerWidth/1.5, window.innerHeight/1.5), 1000);
        } else if(ratio >= 0.8) {
            feedback.innerText = "üåü L√†m t·ªët l·∫Øm! Ki·∫øn th·ª©c c·ªßa b·∫°n r·∫•t v·ªØng! üåü";
        } else if(ratio >= 0.5) {
            feedback.innerText = "üëç Kh√° l·∫Øm! H√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch c·ªßa Ms. Mai An ƒë·ªÉ gi·ªèi h∆°n nh√©!";
        } else {
            feedback.innerText = "üí™ C·ªë l√™n nh√©! Sai ·ªü ƒë√¢u m√¨nh s·ª≠a ·ªü ƒë√≥, h·ªçc ti·∫øng Anh l√† c·∫£ m·ªôt h√†nh tr√¨nh!";
        }

        modal.style.display = 'flex';
        playCorrectSound();
    }
</script>

</body>
</html>


