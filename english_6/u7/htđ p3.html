<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luy·ªán t·∫≠p Ti·∫øng Anh 6 - Ms Mai An ULIS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f4f8;
            background-image: radial-gradient(#8854C0 0.5px, transparent 0.5px), radial-gradient(#8854C0 0.5px, #f0f4f8 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .game-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 10px 0 rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            max-width: 650px;
            width: 95%;
            margin: 20px auto;
            padding: 24px;
            position: relative;
        }

        .option-btn {
            width: 100%;
            text-align: left;
            padding: 16px 20px;
            margin-bottom: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 18px;
            background: white;
            box-shadow: 0 5px 0 #e2e8f0;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.2s;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            transform: translateY(-2px);
            border-color: #8854C0;
            box-shadow: 0 7px 0 #8854C0;
        }

        .option-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #8854C0;
        }

        .option-btn.correct {
            background-color: #00D26A !important;
            color: white !important;
            border-color: #00a854 !important;
            box-shadow: 0 5px 0 #00a854 !important;
        }

        .option-btn.wrong {
            background-color: #FF4757 !important;
            color: white !important;
            border-color: #d63031 !important;
            box-shadow: 0 5px 0 #d63031 !important;
        }

        .explanation-box {
            background-color: #f8f0ff;
            border-left: 5px solid #8854C0;
            border-radius: 12px;
            margin-top: 15px;
            padding: 15px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .teacher-badge {
            background: #8854C0;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 800;
            display: inline-block;
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            width: 100%;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00C9A7, #8854C0);
            width: 0%;
            transition: width 0.5s ease;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 0 rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: #00C9A7;
            color: white;
            padding: 12px 30px;
            border-radius: 20px;
            font-weight: 800;
            box-shadow: 0 5px 0 #00a88b;
            cursor: pointer;
            border: none;
            margin-top: 20px;
        }

        .btn-primary:active { transform: translateY(3px); box-shadow: 0 2px 0 #00a88b; }
        
        .glossary-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .glossary-table th, .glossary-table td { border: 1px solid #e2e8f0; padding: 10px; text-align: left; }
        .glossary-table th { background-color: #f8f0ff; color: #8854C0; }

        #question-area { width: 100%; display: flex; flex-direction: column; align-items: center; }
    </style>
</head>
<body>

    <header class="w-full text-center py-6">
        <h1 class="text-4xl font-extrabold text-[#8854C0]">GRAMMAR CHALLENGE</h1>
        <div class="teacher-badge mt-2">Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</div>
        <div class="max-w-xl mx-auto px-4">
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <p id="stats" class="text-gray-600 font-bold">C√¢u 1/30 ‚Ä¢ ƒêi·ªÉm: 0</p>
        </div>
    </header>

    <main id="question-area">
        <!-- Question Card will be injected here -->
    </main>

    <div id="final-modal" class="modal">
        <div class="modal-content">
            <h2 class="text-3xl font-black text-[#8854C0] mb-4">K·∫æT QU·∫¢ TUY·ªÜT V·ªúI!</h2>
            <p id="final-score" class="text-5xl font-black text-[#00C9A7] my-4">0/30</p>
            <p id="final-comment" class="text-xl text-gray-700 font-bold mb-6"></p>
            <button onclick="location.reload()" class="btn-primary">L√ÄM L·∫†I N√ÄO!</button>
        </div>
    </div>

    <!-- Audio Effects -->
    <audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="snd-wrong" src="https://assets.mixkit.co/active_storage/sfx/2020/2020-preview.mp3"></audio>

    <script>
        const quizData = [
            {
                q: "My brother ______ to school by bike every day.",
                options: ["cycle", "cycles", "cycling", "is cycle"],
                correct: 1,
                hint: "Ch·ªß ng·ªØ s·ªë √≠t (He) -> ƒê·ªông t·ª´ th√™m 's'.",
                explanation: {
                    analysis: ["cycle (v): ƒë·∫°p xe", "cycles (v): ƒë·∫°p xe (s·ªë √≠t)", "cycling (v-ing): ƒëang ƒë·∫°p xe", "is cycle (sai c·∫•u tr√∫c)"],
                    translation: "Anh trai t√¥i ƒë·∫°p xe ƒë·∫øn tr∆∞·ªùng m·ªói ng√†y.",
                    logic: "Ch·ªß ng·ªØ 'My brother' l√† ng√¥i th·ª© 3 s·ªë √≠t (t∆∞∆°ng ƒë∆∞∆°ng 'He'), n√™n ƒë·ªông t·ª´ 'cycle' ph·∫£i th√™m 's'.",
                    whyNot: "A sai v√¨ thi·∫øu s; C sai th√¨; D sai c·∫•u tr√∫c k·∫øt h·ª£p."
                }
            },
            {
                q: "We ______ new subjects for this school year.",
                options: ["has", "have", "having", "haves"],
                correct: 1,
                hint: "Ch·ªß ng·ªØ 'We' ƒëi v·ªõi 'have'.",
                explanation: {
                    analysis: ["has (v): c√≥ (s·ªë √≠t)", "have (v): c√≥ (s·ªë nhi·ªÅu/nguy√™n m·∫´u)", "having (v-ing): ƒëang c√≥", "haves (sai ch√≠nh t·∫£)"],
                    translation: "Ch√∫ng t√¥i c√≥ nh·ªØng m√¥n h·ªçc m·ªõi cho nƒÉm h·ªçc n√†y.",
                    logic: "Ch·ªß ng·ªØ 'We' l√† ng√¥i th·ª© 1 s·ªë nhi·ªÅu, ƒë·ªông t·ª´ 'have' gi·ªØ nguy√™n m·∫´u.",
                    whyNot: "A d√πng cho s·ªë √≠t; C sai th√¨; D t·ª´ n√†y kh√¥ng t·ªìn t·∫°i."
                }
            },
            {
                q: "______ you often ______ in the school library?",
                options: ["Do / read", "Does / read", "Do / reads", "Are / read"],
                correct: 0,
                hint: "Do + You + V(nguy√™n th·ªÉ)?",
                explanation: {
                    analysis: ["Do / read: ƒê·ªçc (h·ªèi v·ªõi You)", "Does / read: ƒê·ªçc (h·ªèi v·ªõi s·ªë √≠t)", "Do / reads: Sai ng·ªØ ph√°p", "Are / read: Sai ng·ªØ ph√°p"],
                    translation: "B·∫°n c√≥ th∆∞·ªùng ƒë·ªçc s√°ch trong th∆∞ vi·ªán tr∆∞·ªùng kh√¥ng?",
                    logic: "C√¢u h·ªèi v·ªõi 'You', d√πng tr·ª£ ƒë·ªông t·ª´ 'Do'. ƒê·ªông t·ª´ ch√≠nh 'read' gi·ªØ nguy√™n.",
                    whyNot: "B sai tr·ª£ ƒë·ªông t·ª´; C sai v√¨ chia ƒë·ªông t·ª´ ch√≠nh; D sai v√¨ d√πng tobe."
                }
            },
            {
                q: "Mai ______ Judo at the gym on Mondays.",
                options: ["practices", "practice", "do", "is practice"],
                correct: 0,
                hint: "Mai l√† ng√¥i th·ª© 3 s·ªë √≠t.",
                explanation: {
                    analysis: ["practices (v): luy·ªán t·∫≠p (s·ªë √≠t)", "practice (v): nguy√™n m·∫´u", "do (v): l√†m/t·∫≠p", "is practice (sai c·∫•u tr√∫c)"],
                    translation: "Mai luy·ªán t·∫≠p Judo ·ªü ph√≤ng t·∫≠p v√†o c√°c ng√†y th·ª© Hai.",
                    logic: "Ch·ªß ng·ªØ 'Mai' l√† s·ªë √≠t -> th√™m 's'. C√¥ Mai An l∆∞u √Ω: S√°ch Global Success d√πng 'do Judo', n·∫øu d√πng 'do' ·ªü ƒë√¢y ph·∫£i l√† 'does'. Do ƒë√≥ ch·ªçn 'practices' l√† h·ª£p l√Ω nh·∫•t v·ªÅ ng·ªØ ph√°p chia ƒë·ªông t·ª´.",
                    whyNot: "B thi·∫øu s; C sai chia ƒë·ªông t·ª´; D sai c·∫•u tr√∫c."
                }
            },
            {
                q: "The students ______ their uniforms on Sundays.",
                options: ["doesn't wear", "don't wear", "not wear", "don't wears"],
                correct: 1,
                hint: "'The students' l√† s·ªë nhi·ªÅu -> d√πng don't.",
                explanation: {
                    analysis: ["doesn't wear: kh√¥ng m·∫∑c (s·ªë √≠t)", "don't wear: kh√¥ng m·∫∑c (s·ªë nhi·ªÅu)", "not wear: thi·∫øu tr·ª£ ƒë·ªông t·ª´", "don't wears: sai ng·ªØ ph√°p"],
                    translation: "C√°c h·ªçc sinh kh√¥ng m·∫∑c ƒë·ªìng ph·ª•c v√†o Ch·ªß nh·∫≠t.",
                    logic: "Ch·ªß ng·ªØ 'The students' l√† s·ªë nhi·ªÅu -> d√πng 'don't' + V nguy√™n m·∫´u.",
                    whyNot: "A d√πng cho s·ªë √≠t; C thi·∫øu 'do'; D sai v√¨ chia ƒë·ªông t·ª´ sau 'don't'."
                }
            },
            {
                q: "My father usually ______ up at 6 o'clock.",
                options: ["get", "gets", "getting", "is get"],
                correct: 1,
                explanation: {
                    analysis: ["get (v)", "gets (v) - chia s·ªë √≠t", "getting (v-ing)", "is get (sai)"],
                    translation: "B·ªë t√¥i th∆∞·ªùng th·ª©c d·∫≠y l√∫c 6 gi·ªù.",
                    logic: "Ch·ªß ng·ªØ 'My father' (He) -> ƒë·ªông t·ª´ 'get' th√™m 's'.",
                    whyNot: "A thi·∫øu s; C, D sai th√¨/c·∫•u tr√∫c."
                }
            },
            {
                q: "She ______ her homework in the evening.",
                options: ["do", "does", "dos", "doing"],
                correct: 1,
                explanation: {
                    analysis: ["do (v)", "does (v) - l√†m (s·ªë √≠t)", "dos (sai ch√≠nh t·∫£)", "doing (v-ing)"],
                    translation: "C√¥ ·∫•y l√†m b√†i t·∫≠p v·ªÅ nh√† v√†o bu·ªïi t·ªëi.",
                    logic: "Ch·ªß ng·ªØ 'She', ƒë·ªông t·ª´ 'do' k·∫øt th√∫c b·∫±ng 'o' n√™n th√™m 'es' th√†nh 'does'.",
                    whyNot: "A sai ng√¥i; C sai ch√≠nh t·∫£; D sai th√¨."
                }
            },
            {
                q: "______ Miss Lan teach English?",
                options: ["Do", "Does", "Is", "Are"],
                correct: 1,
                explanation: {
                    analysis: ["Do (aux)", "Does (aux)", "Is (tobe)", "Are (tobe)"],
                    translation: "C√¥ Lan c√≥ d·∫°y ti·∫øng Anh kh√¥ng?",
                    logic: "Miss Lan l√† ng√¥i th·ª© 3 s·ªë √≠t. C√¢u h·ªèi ƒë·ªông t·ª´ th∆∞·ªùng 'teach' d√πng tr·ª£ ƒë·ªông t·ª´ 'Does'.",
                    whyNot: "A sai ng√¥i; C, D kh√¥ng ƒëi v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng nguy√™n m·∫´u."
                }
            },
            {
                q: "We ______ in a town house.",
                options: ["live", "lives", "living", "are live"],
                correct: 0,
                explanation: {
                    analysis: ["live (v): s·ªëng", "lives (v): s·ªë √≠t", "living (v-ing)", "are live (sai)"],
                    translation: "Ch√∫ng t√¥i s·ªëng trong m·ªôt ng√¥i nh√† ph·ªë.",
                    logic: "Ch·ªß ng·ªØ 'We' l√† s·ªë nhi·ªÅu -> ƒê·ªông t·ª´ 'live' gi·ªØ nguy√™n.",
                    whyNot: "B d√πng cho s·ªë √≠t; C, D sai c·∫•u tr√∫c."
                }
            },
            {
                q: "He ______ TV before dinner.",
                options: ["watch", "watches", "watchs", "watching"],
                correct: 1,
                explanation: {
                    analysis: ["watch (v)", "watches (v) - xem (s·ªë √≠t)", "watchs (sai)", "watching (v-ing)"],
                    translation: "Anh ·∫•y xem TV tr∆∞·ªõc b·ªØa t·ªëi.",
                    logic: "Ch·ªß ng·ªØ 'He', ƒë·ªông t·ª´ 'watch' t·∫≠n c√πng 'ch' n√™n th√™m 'es'.",
                    whyNot: "A thi·∫øu es; C sai quy t·∫Øc ch√≠nh t·∫£; D sai th√¨."
                }
            },
            {
                q: "Lan and Mai ______ lunch at school.",
                options: ["has", "have", "haves", "having"],
                correct: 1,
                explanation: {
                    analysis: ["has (v)", "have (v) - ƒÉn/c√≥", "haves (sai)", "having (v-ing)"],
                    translation: "Lan v√† Mai ƒÉn tr∆∞a ·ªü tr∆∞·ªùng.",
                    logic: "Lan and Mai = 2 ng∆∞·ªùi (They) -> D√πng 'have' nguy√™n m·∫´u.",
                    whyNot: "A d√πng cho 1 ng∆∞·ªùi; C, D kh√¥ng t·ªìn t·∫°i/sai th√¨."
                }
            },
            {
                q: "My sister ______ her room every day.",
                options: ["don't clean", "doesn't clean", "doesn't cleans", "not clean"],
                correct: 1,
                explanation: {
                    analysis: ["don't clean", "doesn't clean: kh√¥ng d·ªçn d·∫πp", "doesn't cleans: sai", "not clean: sai"],
                    translation: "Ch·ªã g√°i t√¥i kh√¥ng d·ªçn ph√≤ng m·ªói ng√†y.",
                    logic: "My sister (s·ªë √≠t) -> D√πng 'doesn't' + V nguy√™n m·∫´u.",
                    whyNot: "A sai ng√¥i; C th·ª´a s; D thi·∫øu tr·ª£ ƒë·ªông t·ª´."
                }
            },
            {
                q: "How ______ Nam ______ to school?",
                options: ["do / go", "does / go", "does / goes", "is / go"],
                correct: 1,
                explanation: {
                    analysis: ["do / go", "does / go", "does / goes", "is / go"],
                    translation: "Nam ƒëi ƒë·∫øn tr∆∞·ªùng b·∫±ng c√°ch n√†o?",
                    logic: "Nam l√† s·ªë √≠t -> tr·ª£ ƒë·ªông t·ª´ 'does', ƒë·ªông t·ª´ ch√≠nh 'go' nguy√™n m·∫´u.",
                    whyNot: "A sai tr·ª£ ƒë·ªông t·ª´; C sai ƒë·ªông t·ª´ ch√≠nh; D sai c·∫•u tr√∫c."
                }
            },
            {
                q: "I ______ study History on Tuesdays.",
                options: ["doesn't", "don't", "not", "am not"],
                correct: 1,
                explanation: {
                    analysis: ["doesn't", "don't: kh√¥ng", "not", "am not"],
                    translation: "T√¥i kh√¥ng h·ªçc m√¥n L·ªãch s·ª≠ v√†o c√°c ng√†y th·ª© Ba.",
                    logic: "Ch·ªß ng·ªØ 'I' lu√¥n ƒëi v·ªõi 'don't' trong c√¢u ph·ªß ƒë·ªãnh th√¨ hi·ªán t·∫°i ƒë∆°n.",
                    whyNot: "A d√πng cho s·ªë √≠t; C thi·∫øu tr·ª£ ƒë·ªông t·ª´; D kh√¥ng ƒëi v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng study."
                }
            },
            {
                q: "Phong ______ hard for the exams.",
                options: ["study", "studies", "studys", "studying"],
                correct: 1,
                explanation: {
                    analysis: ["study (v)", "studies (v): h·ªçc (s·ªë √≠t)", "studys (sai)", "studying (v-ing)"],
                    translation: "Phong h·ªçc chƒÉm ch·ªâ cho c√°c k·ª≥ thi.",
                    logic: "Phong (s·ªë √≠t). T·∫≠n c√πng ph·ª• √¢m + y -> ƒë·ªïi y th√†nh i + es.",
                    whyNot: "A sai ng√¥i; C sai ch√≠nh t·∫£; D sai th√¨."
                }
            },
            {
                q: "______ they play football in the afternoon?",
                options: ["Do", "Does", "Are", "Is"],
                correct: 0,
                explanation: {
                    analysis: ["Do (aux)", "Does (aux)", "Are (tobe)", "Is (tobe)"],
                    translation: "H·ªç c√≥ ch∆°i b√≥ng ƒë√° v√†o bu·ªïi chi·ªÅu kh√¥ng?",
                    logic: "They ƒëi v·ªõi tr·ª£ ƒë·ªông t·ª´ 'Do'.",
                    whyNot: "B sai ng√¥i; C, D kh√¥ng ƒëi v·ªõi ƒë·ªông t·ª´ th∆∞·ªùng nguy√™n m·∫´u."
                }
            },
            {
                q: "My mom ______ the housework every weekend.",
                options: ["do", "does", "doing", "don't"],
                correct: 1,
                explanation: {
                    analysis: ["do", "does: l√†m", "doing", "don't"],
                    translation: "M·∫π t√¥i l√†m vi·ªác nh√† v√†o m·ªói cu·ªëi tu·∫ßn.",
                    logic: "My mom (She) -> do th√™m es th√†nh 'does'.",
                    whyNot: "A sai ng√¥i; C sai th√¨; D sai nghƒ©a."
                }
            },
            {
                q: "The children ______ video games too much.",
                options: ["doesn't play", "don't play", "not plays", "don't plays"],
                correct: 1,
                explanation: {
                    analysis: ["doesn't play", "don't play: kh√¥ng ch∆°i", "not plays", "don't plays"],
                    translation: "Nh·ªØng ƒë·ª©a tr·∫ª kh√¥ng ch∆°i tr√≤ ch∆°i ƒëi·ªán t·ª≠ qu√° nhi·ªÅu.",
                    logic: "The children l√† danh t·ª´ s·ªë nhi·ªÅu c·ªßa 'child' -> d√πng 'don't'.",
                    whyNot: "A d√πng cho s·ªë √≠t; C, D sai ng·ªØ ph√°p."
                }
            },
            {
                q: "Where ______ you ______?",
                options: ["do / live", "does / live", "do / lives", "are / live"],
                correct: 0,
                explanation: {
                    analysis: ["do / live", "does / live", "do / lives", "are / live"],
                    translation: "B·∫°n s·ªëng ·ªü ƒë√¢u?",
                    logic: "H·ªèi 'you' d√πng 'do'.",
                    whyNot: "B sai tr·ª£ ƒë·ªông t·ª´; C chia ƒë·ªông t·ª´ ch√≠nh sai; D d√πng tobe sai."
                }
            },
            {
                q: "My class ______ at 7:00 a.m.",
                options: ["start", "starts", "starting", "is start"],
                correct: 1,
                explanation: {
                    analysis: ["start", "starts: b·∫Øt ƒë·∫ßu", "starting", "is start"],
                    translation: "L·ªõp h·ªçc c·ªßa t√¥i b·∫Øt ƒë·∫ßu l√∫c 7 gi·ªù s√°ng.",
                    logic: "My class l√† danh t·ª´ s·ªë √≠t -> th√™m s.",
                    whyNot: "A sai ng√¥i; C, D sai c·∫•u tr√∫c."
                }
            },
            {
                q: "Vy ______ to music every night.",
                options: ["listens", "listen", "listening", "does listen"],
                correct: 0,
                explanation: {
                    analysis: ["listens (v): nghe", "listen (v)", "listening (v-ing)", "does listen"],
                    translation: "Vy nghe nh·∫°c m·ªói t·ªëi.",
                    logic: "Vy (She) -> th√™m s.",
                    whyNot: "B thi·∫øu s; C sai th√¨; D th∆∞·ªùng kh√¥ng d√πng 'does' trong c√¢u kh·∫≥ng ƒë·ªãnh th√¥ng th∆∞·ªùng."
                }
            },
            {
                q: "What time ______ school ______?",
                options: ["do / finish", "does / finishes", "does / finish", "is / finish"],
                correct: 2,
                explanation: {
                    analysis: ["do / finish", "does / finishes", "does / finish", "is / finish"],
                    translation: "Tr∆∞·ªùng h·ªçc tan h·ªçc l√∫c m·∫•y gi·ªù?",
                    logic: "School l√† danh t·ª´ s·ªë √≠t -> d√πng 'Does', ƒë·ªông t·ª´ ch√≠nh kh√¥ng chia.",
                    whyNot: "A sai tr·ª£ ƒë·ªông t·ª´; B chia ƒë·ªông t·ª´ ch√≠nh sai; D d√πng tobe sai."
                }
            },
            {
                q: "We usually ______ badminton at break time.",
                options: ["plays", "play", "playing", "are play"],
                correct: 1,
                explanation: {
                    analysis: ["plays", "play: ch∆°i", "playing", "are play"],
                    translation: "Ch√∫ng t√¥i th∆∞·ªùng ch∆°i c·∫ßu l√¥ng v√†o gi·ªù ra ch∆°i.",
                    logic: "We -> ƒë·ªông t·ª´ nguy√™n m·∫´u.",
                    whyNot: "A d√πng cho s·ªë √≠t; C, D sai th√¨/c·∫•u tr√∫c."
                }
            },
            {
                q: "He ______ his face in the morning.",
                options: ["wash", "washes", "washs", "washing"],
                correct: 1,
                explanation: {
                    analysis: ["wash", "washes: r·ª≠a", "washs", "washing"],
                    translation: "Anh ·∫•y r·ª≠a m·∫∑t v√†o bu·ªïi s√°ng.",
                    logic: "T·∫≠n c√πng sh -> th√™m es.",
                    whyNot: "A sai ng√¥i; C sai ch√≠nh t·∫£; D sai th√¨."
                }
            },
            {
                q: "______ your parents ______ to work by car?",
                options: ["Do / go", "Does / go", "Do / goes", "Are / go"],
                correct: 0,
                explanation: {
                    analysis: ["Do / go", "Does / go", "Do / goes", "Are / go"],
                    translation: "B·ªë m·∫π b·∫°n c√≥ ƒëi l√†m b·∫±ng √¥ t√¥ kh√¥ng?",
                    logic: "Parents (s·ªë nhi·ªÅu) -> d√πng Do.",
                    whyNot: "B sai tr·ª£ ƒë·ªông t·ª´; C chia ƒë·ªông t·ª´ ch√≠nh; D d√πng tobe."
                }
            },
            {
                q: "This bird ______ very high.",
                options: ["fly", "flies", "flys", "flying"],
                correct: 1,
                explanation: {
                    analysis: ["fly", "flies: bay", "flys", "flying"],
                    translation: "Ch√∫ chim n√†y bay r·∫•t cao.",
                    logic: "T·∫≠n c√πng ph·ª• √¢m + y -> ƒë·ªïi y th√†nh i + es.",
                    whyNot: "A sai ng√¥i; C sai ch√≠nh t·∫£; D sai th√¨."
                }
            },
            {
                q: "I ______ English, but I ______ Math.",
                options: ["like / doesn't like", "likes / don't like", "like / don't like", "like / not like"],
                correct: 2,
                explanation: {
                    analysis: ["like / doesn't like", "likes / don't like", "like / don't like", "like / not like"],
                    translation: "T√¥i th√≠ch ti·∫øng Anh, nh∆∞ng t√¥i kh√¥ng th√≠ch To√°n.",
                    logic: "I ƒëi v·ªõi like nguy√™n m·∫´u v√† don't like.",
                    whyNot: "A, B sai ng√¥i; D sai c·∫•u tr√∫c ph·ªß ƒë·ªãnh."
                }
            },
            {
                q: "When ______ we ______ Physics?",
                options: ["do / have", "does / have", "do / has", "are / having"],
                correct: 0,
                explanation: {
                    analysis: ["do / have", "does / have", "do / has", "are / having"],
                    translation: "Khi n√†o ch√∫ng ta c√≥ m√¥n V·∫≠t l√Ω?",
                    logic: "We d√πng tr·ª£ ƒë·ªông t·ª´ do.",
                    whyNot: "B sai tr·ª£ ƒë·ªông t·ª´; C chia ƒë·ªông t·ª´ ch√≠nh sai; D sai th√¨."
                }
            },
            {
                q: "My aunt ______ in a flat in Hanoi.",
                options: ["don't live", "doesn't live", "doesn't lives", "not live"],
                correct: 1,
                explanation: {
                    analysis: ["don't live", "doesn't live: kh√¥ng s·ªëng", "doesn't lives", "not live"],
                    translation: "D√¨ c·ªßa t√¥i kh√¥ng s·ªëng ·ªü cƒÉn h·ªô t·∫°i H√† N·ªôi.",
                    logic: "Aunt l√† s·ªë √≠t -> d√πng doesn't.",
                    whyNot: "A sai ng√¥i; C chia ƒë·ªông t·ª´ ch√≠nh; D thi·∫øu tr·ª£ ƒë·ªông t·ª´."
                }
            },
            {
                q: "She never ______ school late.",
                options: ["go to", "goes to", "going to", "is go to"],
                correct: 1,
                explanation: {
                    analysis: ["go to", "goes to: ƒëi ƒë·∫øn", "going to", "is go to"],
                    translation: "C√¥ ·∫•y kh√¥ng bao gi·ªù ƒëi h·ªçc mu·ªôn.",
                    logic: "She -> go th√™m es th√†nh 'goes'. Tr·∫°ng t·ª´ 'never' kh√¥ng l√†m thay ƒë·ªïi vi·ªác chia ƒë·ªông t·ª´.",
                    whyNot: "A sai ng√¥i; C, D sai th√¨/c·∫•u tr√∫c."
                }
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let canAnswer = true;

        function updateStats() {
            const progress = (currentQuestion / quizData.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            document.getElementById('stats').innerText = `C√¢u ${currentQuestion + 1}/${quizData.length} ‚Ä¢ ƒêi·ªÉm: ${score}`;
        }

        function renderQuestion() {
            canAnswer = true;
            const data = quizData[currentQuestion];
            const area = document.getElementById('question-area');
            
            area.innerHTML = `
                <div class="game-card" id="card-${currentQuestion}">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">${data.q}</h3>
                    <div id="options-container">
                        ${data.options.map((opt, i) => `
                            <button class="option-btn" onclick="checkAnswer(${i})">
                                <span class="bg-gray-100 px-3 py-1 rounded-lg mr-4 text-[#8854C0]">${String.fromCharCode(65 + i)}</span>
                                ${opt}
                            </button>
                        `).join('')}
                    </div>
                    <div id="explanation" class="explanation-box">
                        <div class="font-bold text-[#8854C0] mb-2">üí° C√¥ Mai An gi·∫£i th√≠ch:</div>
                        <div class="text-gray-700 text-sm space-y-2">
                            <p><strong>D·ªãch c√¢u:</strong> ${data.explanation.translation}</p>
                            <p><strong>Ph√¢n t√≠ch 4 ƒë√°p √°n:</strong></p>
                            <ul class="list-disc ml-5">
                                ${data.explanation.analysis.map(a => `<li>${a}</li>`).join('')}
                            </ul>
                            <p><strong>T·∫°i sao ƒë√∫ng?</strong> ${data.explanation.logic}</p>
                            <p><strong>T·∫°i sao lo·∫°i ƒë√°p √°n kh√°c?</strong> ${data.explanation.whyNot}</p>
                        </div>
                        <button class="btn-primary w-full mt-4" onclick="nextQuestion()">TI·∫æP THEO ‚ûú</button>
                    </div>
                </div>
            `;
            updateStats();
        }

        function checkAnswer(index) {
            if (!canAnswer) return;
            canAnswer = false;

            const data = quizData[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            const expBox = document.getElementById('explanation');
            const card = document.getElementById(`card-${currentQuestion}`);

            if (index === data.correct) {
                buttons[index].classList.add('correct');
                score++;
                document.getElementById('snd-correct').play();
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#8854C0', '#00C9A7', '#FFD700']
                });
            } else {
                buttons[index].classList.add('wrong');
                buttons[data.correct].classList.add('correct');
                card.classList.add('shake');
                document.getElementById('snd-wrong').play();
            }

            expBox.style.display = 'block';
            updateStats();
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < quizData.length) {
                renderQuestion();
            } else {
                showFinalResult();
            }
        }

        function showFinalResult() {
            const modal = document.getElementById('final-modal');
            const scoreText = document.getElementById('final-score');
            const commentText = document.getElementById('final-comment');
            
            modal.style.display = 'flex';
            scoreText.innerText = `${score}/${quizData.length}`;
            
            let comment = "";
            const percent = (score / quizData.length) * 100;
            if (percent === 100) comment = "Xu·∫•t s·∫Øc! Em l√† thi√™n t√†i ng·ªØ ph√°p!";
            else if (percent >= 80) comment = "Gi·ªèi qu√°! C·ªë g·∫Øng ph√°t huy nh√©!";
            else if (percent >= 50) comment = "Kh√° t·ªët, nh∆∞ng c·∫ßn √¥n t·∫≠p k·ªπ h∆°n m·ªôt ch√∫t!";
            else comment = "ƒê·ª´ng bu·ªìn, h√£y l√†m l·∫°i ƒë·ªÉ nh·ªõ ki·∫øn th·ª©c nh√©!";
            
            commentText.innerText = comment;
        }

        // Kh·ªüi t·∫°o
        window.onload = renderQuestion;
    </script>
</body>
</html>
