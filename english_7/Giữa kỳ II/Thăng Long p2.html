<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0;
            --secondary: #FDCB6E;
            --accent: #00C9A7;
            --correct: #00D26A;
            --wrong: #FF4757;
            --text-dark: #2d3436;
            --white: #ffffff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Quicksand', sans-serif;
        }

        body {
            /* Animated Gradient Background Pastel + Neon */
            background: linear-gradient(-45deg, #8854C0, #FDCB6E, #00C9A7, #FF9A9E);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--text-dark);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* SVG Pattern l∆° l·ª≠ng */
        .bg-pattern {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg width="250" height="250" xmlns="http://www.w3.org/2000/svg"><text x="20" y="40" font-size="28">‚≠ê</text><text x="140" y="90" font-size="28">üå∏</text><text x="50" y="180" font-size="28">üê±</text><text x="190" y="210" font-size="28">‚òÅÔ∏è</text><text x="100" y="40" font-size="28">üçé</text></svg>');
            background-size: 300px 300px;
            opacity: 0.2;
            z-index: 0;
            pointer-events: none;
            animation: floatPattern 50s linear infinite;
        }

        @keyframes floatPattern {
            from { background-position: 0 0; }
            to { background-position: 600px 600px; }
        }

        .container {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 12px 0 rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 4px solid var(--white);
        }

        .header h1 {
            color: var(--primary);
            font-weight: 900;
            font-size: 2.8rem;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.05);
        }

        .header h3 {
            color: var(--accent);
            margin-top: 10px;
            font-weight: 700;
            font-size: 1.5rem;
        }

        .section-title {
            background: var(--white);
            display: inline-block;
            padding: 12px 30px;
            border-radius: 20px;
            font-weight: 900;
            color: var(--primary);
            box-shadow: 0 6px 0 rgba(0,0,0,0.1);
            margin: 35px 0 20px 0;
            font-size: 1.5rem;
            border: 3px solid var(--primary);
        }

        .card {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 12px 0 rgba(0,0,0,0.12);
            border: 3px solid rgba(255,255,255,0.8);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid { grid-template-columns: 1fr; }
        }

        /* N√∫t Tr·∫Øc nghi·ªám 3D */
        .btn-option {
            background: var(--white);
            border: 3px solid #e0e0e0;
            padding: 15px 20px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 20px;
            cursor: pointer;
            box-shadow: 0 8px 0 #d1d1d1;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: left;
            color: var(--text-dark);
        }

        .btn-option:hover:not(:disabled) {
            transform: scale(1.03) translateY(-5px);
            box-shadow: 0 13px 0 #d1d1d1;
            border-color: var(--secondary);
        }

        .btn-option:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #d1d1d1;
        }

        .btn-option.correct {
            background: var(--correct);
            border-color: #00a855;
            color: white;
            box-shadow: 0 8px 0 #00a855;
        }

        .btn-option.wrong {
            background: var(--wrong);
            border-color: #d63031;
            color: white;
            box-shadow: 0 8px 0 #d63031;
        }

        /* Duolingo Style Builder cho Ex 14 */
        .build-area {
            background: #f0f4f8;
            border: 3px dashed var(--accent);
            border-radius: 20px;
            padding: 20px;
            min-height: 80px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        
        .build-area:empty::before {
            content: "B·∫•m v√†o c√°c t·ª´ b√™n d∆∞·ªõi ƒë·ªÉ x·∫øp th√†nh c√¢u...";
            color: #a0aec0;
            font-weight: 600;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .word-chip {
            background: var(--white);
            border: 2px solid #cbd5e0;
            padding: 10px 20px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 5px 0 #cbd5e0;
            transition: transform 0.1s;
            user-select: none;
        }

        .word-chip:hover { transform: translateY(-3px); }
        .word-chip:active { transform: translateY(2px); box-shadow: 0 3px 0 #cbd5e0; }
        .word-chip.hidden { visibility: hidden; }

        .btn-check-build {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 15px;
            box-shadow: 0 6px 0 #5f368e;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .btn-check-build:active { transform: translateY(4px); box-shadow: 0 2px 0 #5f368e; }

        /* H·ªôp Gi·∫£i th√≠ch SI√äU CHI TI·∫æT */
        .explanation {
            display: none;
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-left: 8px solid var(--accent);
            border-radius: 15px;
            font-size: 1.15rem;
            line-height: 1.6;
            animation: fadeIn 0.5s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .explanation.show { display: block; }
        .explanation h4 { color: var(--primary); margin-bottom: 15px; font-size: 1.3rem; border-bottom: 2px dashed #ccc; padding-bottom: 10px;}
        .step { margin-bottom: 12px; }
        .step-title { 
            display: inline-block; 
            background: var(--secondary); 
            color: #2d3436;
            padding: 4px 10px; 
            border-radius: 8px; 
            font-size: 0.95rem; 
            font-weight: 900;
            margin-right: 8px; 
            box-shadow: 0 3px 0 rgba(0,0,0,0.1); 
        }
        u { text-decoration-color: var(--wrong); text-decoration-thickness: 3px; font-weight: 900;}

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-5px, 0, 0); }
            20%, 80% { transform: translate3d(5px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-10px, 0, 0); }
            40%, 60% { transform: translate3d(10px, 0, 0); }
        }

        /* Ph√°o gi·∫•y Confetti */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            z-index: 9999;
            pointer-events: none;
            animation: fall 2.5s linear forwards;
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }

        .submit-btn {
            display: block; width: 100%; max-width: 450px; margin: 50px auto;
            padding: 20px; font-size: 1.6rem; font-weight: 900;
            background: var(--correct); color: white; border: none;
            border-radius: 20px; box-shadow: 0 10px 0 #00a855; cursor: pointer;
            text-transform: uppercase; transition: all 0.2s;
            position: relative; z-index: 10;
        }
        .submit-btn:hover { transform: scale(1.05); }
        .submit-btn:active { transform: translateY(5px); box-shadow: 0 5px 0 #00a855; }
    </style>
</head>
<body>

    <div class="bg-pattern"></div>

    <div class="container">
        <div class="header">
            <h1>Fun English Challenge üöÄ</h1>
            <h3>Gi√°o vi√™n t·∫°o: Ms Mai An ULIS</h3>
            <p style="margin-top:15px; font-weight:700; font-size:1.1rem; color:#555;">L√†m b√†i tr·ª±c ti·∫øp, xem gi·∫£i th√≠ch si√™u chi ti·∫øt ngay sau khi ch·ªçn!</p>
        </div>

        <div id="quiz-container"></div>
        
        <button class="submit-btn" onclick="submitQuiz()">üèÜ N·ªôp b√†i & Xem ƒëi·ªÉm</button>
    </div>

<script>
// ==================== D·ªÆ LI·ªÜU ƒê·ªÄ B√ÄI & GI·∫¢I TH√çCH CHI TI·∫æT ====================
const quizData = [
    // --- III. SYNONYM AND ANTONYM --- Ex 6 ---
    {
        type: "mcq",
        section: "III. SYNONYM AND ANTONYM<br><br>Ex 6. Mark the letter A, B, C or D to indicate the word that is CLOSEST in meaning to the underlined part.",
        q: "1. We were stuck in a <u>traffic jam</u> on the freeway for two hours.",
        options: [
            { text: "traffic congestion", correct: true },
            { text: "traffic rules", correct: false },
            { text: "situation", correct: false },
            { text: "highway", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> Ch√∫ng t√¥i b·ªã k·∫πt trong m·ªôt v·ª• <u>t·∫Øc ƒë∆∞·ªùng</u> tr√™n ƒë∆∞·ªùng cao t·ªëc su·ªët hai gi·ªù ƒë·ªìng h·ªì. (T√¨m t·ª´ ƒë·ªìng nghƒ©a v·ªõi "traffic jam").</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. traffic congestion (n): s·ª± √°ch t·∫Øc giao th√¥ng.<br>
               - B. traffic rules (n): lu·∫≠t giao th√¥ng.<br>
               - C. situation (n): t√¨nh hu·ªëng.<br>
               - D. highway (n): ƒë∆∞·ªùng qu·ªëc l·ªô.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> "traffic jam" (k·∫πt xe) ƒë·ªìng nghƒ©a ho√†n to√†n v·ªõi "traffic congestion".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> C√°c ƒë√°p √°n B, C, D c√≥ nghƒ©a ho√†n to√†n kh√°c, kh√¥ng li√™n quan ƒë·∫øn vi·ªác b·ªã k·∫πt xe.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "2. The end of the film was so <u>moving</u> that many people cried.",
        options: [
            { text: "scary", correct: false },
            { text: "shocking", correct: false },
            { text: "exciting", correct: false },
            { text: "touching", correct: true }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> K·∫øt th√∫c c·ªßa b·ªô phim qu√° <u>c·∫£m ƒë·ªông</u> ƒë·∫øn n·ªói nhi·ªÅu ng∆∞·ªùi ƒë√£ kh√≥c.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. scary (adj): ƒë√°ng s·ª£.<br>
               - B. shocking (adj): g√¢y s·ªëc.<br>
               - C. exciting (adj): th√∫ v·ªã, h√†o h·ª©ng.<br>
               - D. touching (adj): c·∫£m ƒë·ªông, ch·∫°m ƒë·∫øn tr√°i tim.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn D?</b> T·ª´ g·∫°ch ch√¢n "moving" c√≥ nghƒ©a l√† l√†m c·∫£m ƒë·ªông, ƒë·ªìng nghƒ©a v·ªõi "touching". Ph·∫£n ·ª©ng "nhi·ªÅu ng∆∞·ªùi kh√≥c" c≈©ng x√°c nh·∫≠n ƒëi·ªÅu n√†y.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> C√°c t·ª´ ƒë√°ng s·ª£ (A), g√¢y s·ªëc (B) hay h√†o h·ª©ng (C) ƒë·ªÅu kh√¥ng t·∫°o ra c·∫£m x√∫c r∆°i n∆∞·ªõc m·∫Øt do c·∫£m ƒë·ªông.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "3. I‚Äôll take the new job whose salary is <u>fantastic</u>.",
        options: [
            { text: "reasonable", correct: false },
            { text: "acceptable", correct: false },
            { text: "pretty high", correct: false },
            { text: "wonderful", correct: true }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> T√¥i s·∫Ω nh·∫≠n c√¥ng vi·ªác m·ªõi m√† m·ª©c l∆∞∆°ng c·ªßa n√≥ th·∫≠t <u>tuy·ªát v·ªùi</u>.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. reasonable (adj): h·ª£p l√Ω.<br>
               - B. acceptable (adj): c√≥ th·ªÉ ch·∫•p nh·∫≠n ƒë∆∞·ª£c.<br>
               - C. pretty high (adj): kh√° cao.<br>
               - D. wonderful (adj): tuy·ªát v·ªùi.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn D?</b> "fantastic" l√† m·ªôt t√≠nh t·ª´ mang nghƒ©a c·ª±c k·ª≥ t·ªët, tuy·ªát v·ªùi. ƒê·ªìng nghƒ©a m·∫°nh nh·∫•t v·ªõi n√≥ l√† "wonderful".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A, B ch·ªâ mang nghƒ©a m·ª©c ƒë·ªô trung b√¨nh (t·∫°m ·ªïn). C (kh√° cao) v·∫´n ch∆∞a l·ªôt t·∫£ ƒë∆∞·ª£c s·∫Øc th√°i c·∫£m x√∫c m·∫°nh m·∫Ω c·ªßa t·ª´ "fantastic".</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "4. The festial is held <u>once a year</u> at the end of August.",
        options: [
            { text: "weekly", correct: false },
            { text: "monthy", correct: false },
            { text: "annually", correct: true },
            { text: "every day", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> L·ªÖ h·ªôi ƒë∆∞·ª£c t·ªï ch·ª©c <u>m·ªói nƒÉm m·ªôt l·∫ßn</u> v√†o cu·ªëi th√°ng T√°m. (L∆∞u √Ω: t·ª´ 'festial' trong ƒë·ªÅ g·ªëc c√≥ l·ªói ƒë√°nh m√°y c·ªßa 'festival', c√¥ gi·ªØ nguy√™n t√¥n tr·ªçng ƒë·ªÅ).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. weekly (adv): h√†ng tu·∫ßn.<br>
               - B. monthy (adv): h√†ng th√°ng (l·ªói type g·ªëc 'monthly').<br>
               - C. annually (adv): h√†ng nƒÉm, th∆∞·ªùng ni√™n.<br>
               - D. every day (adv): m·ªói ng√†y.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn C?</b> "once a year" (1 l·∫ßn 1 nƒÉm) ch√≠nh l√† ƒë·ªãnh nghƒ©a c·ªßa t·ª´ "annually" (th∆∞·ªùng ni√™n).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A, B, D sai ho√†n to√†n v·ªÅ chu k·ª≥ th·ªùi gian.</div>`
    },

    // --- Ex 7 ---
    {
        type: "mcq",
        section: "Ex 7. Mark the letter A, B, C or D to indicate the word that is OPPOSITE in meaning to the underlined part.",
        q: "1. Signs with red circles are mostly <u>prohibitive</u> ‚Äì that means you can‚Äôt do something.",
        options: [
            { text: "banned", correct: false },
            { text: "allowed", correct: true },
            { text: "warning", correct: false },
            { text: "informative", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> Bi·ªÉn b√°o c√≥ v√≤ng tr√≤n ƒë·ªè th∆∞·ªùng mang t√≠nh <u>c·∫•m ƒëo√°n</u> - ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† b·∫°n kh√¥ng ƒë∆∞·ª£c l√†m g√¨ ƒë√≥. (Y√™u c·∫ßu t√¨m t·ª´ TR√ÅI NGHƒ®A).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. banned (adj): b·ªã c·∫•m.<br>
               - B. allowed (adj): ƒë∆∞·ª£c cho ph√©p.<br>
               - C. warning (n/adj): c·∫£nh b√°o.<br>
               - D. informative (adj): cung c·∫•p th√¥ng tin.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn B?</b> T·ª´ "prohibitive" nghƒ©a l√† c·∫•m ƒëo√°n. V√¨ ƒë·ªÅ b√†i y√™u c·∫ßu t√¨m t·ª´ TR√ÅI NGHƒ®A (Opposite), n√™n ƒë√°p √°n ph·∫£i l√† "allowed" (ƒë∆∞·ª£c ph√©p).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> H·ªçc sinh r·∫•t d·ªÖ b·ªã l·ª´a ch·ªçn A (banned) v√¨ n√≥ l√† t·ª´ ƒê·ªíNG NGHƒ®A. C v√† D sai ng·ªØ c·∫£nh.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "2. I found the plot of the film <u>exciting</u>.",
        options: [
            { text: "moving", correct: false },
            { text: "hilarious", correct: false },
            { text: "boring", correct: true },
            { text: "gripping", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> T√¥i th·∫•y c·ªët truy·ªán c·ªßa b·ªô phim r·∫•t <u>th√∫ v·ªã/h√†o h·ª©ng</u>. (T√¨m t·ª´ TR√ÅI NGHƒ®A).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. moving (adj): c·∫£m ƒë·ªông.<br>
               - B. hilarious (adj): c·ª±c k·ª≥ h√†i h∆∞·ªõc.<br>
               - C. boring (adj): nh√†m ch√°n.<br>
               - D. gripping (adj): l√¥i cu·ªën.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn C?</b> "exciting" l√† th√∫ v·ªã. Tr√°i nghƒ©a v·ªõi th√∫ v·ªã ch·∫Øc ch·∫Øn l√† "boring" (nh√†m ch√°n).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A, B, D ƒë·ªÅu l√† nh·ªØng t·ª´ mang t√≠nh ch·∫•t khen ng·ª£i, t√≠ch c·ª±c, kh√¥ng ph·∫£i t·ª´ tr√°i nghƒ©a.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "3. Although he spent much money on the film, it wasn‚Äôt a big <u>success</u>.",
        options: [
            { text: "failure", correct: true },
            { text: "victory", correct: false },
            { text: "false", correct: false },
            { text: "advance", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> M·∫∑c d√π anh ·∫•y ƒë√£ chi r·∫•t nhi·ªÅu ti·ªÅn cho b·ªô phim, n√≥ kh√¥ng ph·∫£i l√† m·ªôt <u>s·ª± th√†nh c√¥ng</u> l·ªõn. (T√¨m t·ª´ TR√ÅI NGHƒ®A).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. failure (n): s·ª± th·∫•t b·∫°i.<br>
               - B. victory (n): s·ª± chi·∫øn th·∫Øng.<br>
               - C. false (adj): sai l·ªách, gi·∫£.<br>
               - D. advance (n/v): s·ª± ti·∫øn b·ªô, ti·∫øn l√™n.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> Tr√°i nghƒ©a v·ªõi "success" (th√†nh c√¥ng) hi·ªÉn nhi√™n l√† "failure" (th·∫•t b·∫°i).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> Victory l√† t·ª´ ƒë·ªìng nghƒ©a. False l√† t√≠nh t·ª´ sai t·ª´ lo·∫°i v√† ng·ªØ nghƒ©a. Advance kh√¥ng li√™n quan.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "4. The movie is so <u>gripping</u> that we cannot stop watching it.",
        options: [
            { text: "boring", correct: true },
            { text: "excting", correct: false },
            { text: "moving", correct: false },
            { text: "frightening", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> B·ªô phim qu√° <u>l√¥i cu·ªën</u> ƒë·∫øn m·ª©c ch√∫ng t√¥i kh√¥ng th·ªÉ ng·ª´ng xem. (T√¨m t·ª´ TR√ÅI NGHƒ®A).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. boring (adj): nh√†m ch√°n.<br>
               - B. excting (adj): th√∫ v·ªã (l·ªói type g·ªëc 'exciting').<br>
               - C. moving (adj): c·∫£m ƒë·ªông.<br>
               - D. frightening (adj): ƒë√°ng s·ª£.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> "gripping" nghƒ©a l√† v√¥ c√πng h·∫•p d·∫´n, thu h√∫t s·ª± ch√∫ √Ω. Tr√°i nghƒ©a c·ªßa n√≥ l√† t·∫ª nh·∫°t, nh√†m ch√°n -> "boring".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> B l√† t·ª´ ƒë·ªìng nghƒ©a. C v√† D l√† c√°c th·ªÉ lo·∫°i c·∫£m x√∫c kh√°c, kh√¥ng mang nghƒ©a ng∆∞·ª£c l·∫°i c·ªßa s·ª± cu·ªën h√∫t.</div>`
    },

    // --- IV. COMMUNICATION --- Ex 8 ---
    {
        type: "mcq",
        section: "IV. COMMUNICATION<br><br>Ex 8. Choose the best answers.",
        q: "1. ‚ÄúWould you like me to turn off your computer?‚Äù<br>- ‚Äú_______________________. Thanks.‚Äù",
        options: [
            { text: "Don‚Äôt do it.", correct: false },
            { text: "Yes, please.", correct: true },
            { text: "Don‚Äôt do.", correct: false },
            { text: "Of course.", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> "B·∫°n c√≥ mu·ªën t√¥i t·∫Øt m√°y t√≠nh gi√∫p b·∫°n kh√¥ng?" - "_______________________. C·∫£m ∆°n."</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. ƒê·ª´ng l√†m v·∫≠y. (Th√¥ l·ªó, l·∫°i ƒëi k√®m ch·ªØ Thanks r·∫•t m√¢u thu·∫´n).<br>
               - B. V√¢ng, l√†m ∆°n gi√∫p t√¥i. (C√¢u tr·∫£ l·ªùi l·ªãch s·ª± chu·∫©n m·ª±c).<br>
               - C. ƒê·ª´ng l√†m. (Sai ng·ªØ ph√°p, thi·∫øu t√¢n ng·ªØ 'it').<br>
               - D. T·∫•t nhi√™n. (Nghe h∆°i h·ªëng h√°ch khi nh·ªù v·∫£).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn B?</b> Khi ai ƒë√≥ ƒë·ªÅ ngh·ªã gi√∫p ƒë·ª° m√¨nh b·∫±ng c·∫•u tr√∫c "Would you like me to...", c√°ch ƒë√°p l·∫°i l·ªãch s·ª± v√† ƒë·ªìng √Ω ph·ªï bi·∫øn nh·∫•t l√† "Yes, please."</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A v√† C t·ª´ ch·ªëi nh∆∞ng l·∫°i n√≥i c·∫£m ∆°n ngay l·∫≠p t·ª©c nghe r·∫•t b·∫•t l·ªãch s·ª± v√† sai logic giao ti·∫øp. D kh√¥ng ph·∫£i vƒÉn phong ti√™u chu·∫©n.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "2. ‚ÄúDo you like seeing a film?‚Äù<br>- ‚Äú_______________________.‚Äù",
        options: [
            { text: "Who is in this film?", correct: false },
            { text: "I‚Äôm sorry. I can‚Äôt.", correct: false },
            { text: "Sure. What film shall we see?", correct: false },
            { text: "No, I don‚Äôt like it at all.", correct: true }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> "B·∫°n c√≥ th√≠ch xem phim kh√¥ng?" (C√¢u h·ªèi v·ªÅ s·ªü th√≠ch chung).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. Ai ƒë√≥ng trong phim n√†y? (Ch∆∞a bi·∫øt phim g√¨ m√† ƒë√£ h·ªèi).<br>
               - B. Xin l·ªói. T√¥i kh√¥ng th·ªÉ. (D√πng ƒë·ªÉ t·ª´ ch·ªëi l·ªùi m·ªùi r·ªß ƒëi ƒë√¢u ƒë√≥).<br>
               - C. Ch·∫Øc ch·∫Øn r·ªìi. Ch√∫ng ta s·∫Ω xem phim g√¨? (C≈©ng d√πng ƒë·ªÉ ƒë√°p l·∫°i l·ªùi r·ªß r√™).<br>
               - D. Kh√¥ng, t√¥i kh√¥ng th√≠ch n√≥ ch√∫t n√†o. (Tr·∫£ l·ªùi th·∫≥ng v√†o c√¢u h·ªèi Yes/No).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn D?</b> C·∫•u tr√∫c "Do you like + Ving?" l√† h·ªèi v·ªÅ s·ªü th√≠ch. C√¢u tr·∫£ l·ªùi chu·∫©n nh·∫•t l√† Yes, I do ho·∫∑c No, I don't. ƒê√°p √°n D b√°m s√°t c·∫•u tr√∫c n√†y.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> B v√† C b·ªã b·∫´y nh·∫ßm sang m·∫´u c√¢u R·ª¶ R√ä "Would you like to see a film?". ƒê√¢y ch·ªâ l√† c√¢u h·ªèi s·ªü th√≠ch b√¨nh th∆∞·ªùng.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "3. ‚ÄúHow about seeing a film?‚Äù<br>- ‚Äú_______________________.‚Äù",
        options: [
            { text: "Good idea. What shall we see?", correct: true },
            { text: "It is nice of you to say so.", correct: false },
            { text: "You‚Äôre kidding.", correct: false },
            { text: "I don‚Äôt think so.", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> "Th·∫ø c√≤n vi·ªác ƒëi xem phim th√¨ sao?" (ƒê√¢y l√† m·ªôt c√¢u ƒë∆∞a ra l·ªùi r·ªß r√™/g·ª£i √Ω).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. √ù ki·∫øn hay ƒë·∫•y. Ch√∫ng ta s·∫Ω xem g√¨?<br>
               - B. B·∫°n th·∫≠t t·ªët khi n√≥i v·∫≠y. (D√πng ƒë·ªÉ ƒë√°p l·∫°i l·ªùi khen).<br>
               - C. B·∫°n ƒë√πa √†.<br>
               - D. T√¥i kh√¥ng nghƒ© v·∫≠y. (D√πng ƒë·ªÉ ph·∫£n ƒë·ªëi m·ªôt quan ƒëi·ªÉm).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> "How about + Ving?" l√† c·∫•u tr√∫c ƒë·ªÅ xu·∫•t, r·ªß r√™. ƒê·ªÉ ƒë·ªìng √Ω v·ªõi ƒë·ªÅ xu·∫•t, ng∆∞·ªùi ta hay d√πng "Good idea" (√ù ki·∫øn hay ƒë√≥).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> B sai ch·ª©c nƒÉng giao ti·∫øp (kh√¥ng c√≥ ai khen ng·ª£i ·ªü ƒë√¢y). C v√† D kh√¥ng t·ª± nhi√™n trong ng·ªØ c·∫£nh ƒë√°p l·∫°i l·ªùi g·ª£i √Ω ƒëi ch∆°i.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "4. How far is it from house to here?",
        options: [
            { text: "About 10 minutes.", correct: false },
            { text: "It‚Äôs about 2 kilometers.", correct: true },
            { text: "I walk to my house.", correct: false },
            { text: "My house 2 kilometers.", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> Kho·∫£ng c√°ch t·ª´ nh√† ƒë·∫øn ƒë√¢y l√† bao xa?</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch 4 ƒë√°p √°n:</b><br>
               - A. Kho·∫£ng 10 ph√∫t. (Tr·∫£ l·ªùi cho How long - th·ªùi gian).<br>
               - B. N√≥ kho·∫£ng 2 ki-l√¥-m√©t. (Tr·∫£ l·ªùi kho·∫£ng c√°ch).<br>
               - C. T√¥i ƒëi b·ªô v·ªÅ nh√†. (Tr·∫£ l·ªùi cho How do you go...).<br>
               - D. Nh√† t√¥i 2 ki-l√¥-m√©t. (Sai c·∫•u tr√∫c ng·ªØ ph√°p tr·∫ßm tr·ªçng).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn B?</b> C√¢u h·ªèi "How far..." d√πng ƒë·ªÉ h·ªèi kho·∫£ng c√°ch. C·∫•u tr√∫c tr·∫£ l·ªùi l√† "It is + (about) + kho·∫£ng c√°ch (meters, kilometers...)".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A tr·∫£ l·ªùi l·∫°c ƒë·ªÅ sang th·ªùi gian. C l·∫°c ƒë·ªÅ sang ph∆∞∆°ng ti·ªán. D thi·∫øu ƒë·ªông t·ª´ to be "is" v√† c√°ch di·ªÖn ƒë·∫°t b·ªã "word by word".</div>`
    },

    // --- V. FINDING ERROR --- Ex 9 ---
    {
        type: "mcq",
        section: "V. FINDING ERROR<br><br>Ex 9. Find the mistake in each of the following sentences.",
        q: "1. You <u>should to obey</u> (A) the rules <u>in</u> (B) the cinema <u>by turning</u> (C) off your <u>mobile phone</u> (D).",
        options: [
            { text: "A. should to obey", correct: true },
            { text: "B. in", correct: false },
            { text: "C. by turning", correct: false },
            { text: "D. mobile phone", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> B·∫°n n√™n tu√¢n th·ªß lu·∫≠t l·ªá trong r·∫°p chi·∫øu phim b·∫±ng c√°ch t·∫Øt ƒëi·ªán tho·∫°i di ƒë·ªông ƒëi. (T√¨m l·ªói sai).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch:</b><br>
               - A. should to obey: ƒê·ªông t·ª´ khuy·∫øt thi·∫øu should.<br>
               - B. in the cinema: gi·ªõi t·ª´ ch·ªâ ƒë·ªãa ƒëi·ªÉm (ƒë√∫ng).<br>
               - C. by + V-ing: b·∫±ng c√°ch l√†m g√¨ (ƒë√∫ng).<br>
               - D. mobile phone: ƒëi·ªán tho·∫°i di ƒë·ªông (c·ª•m danh t·ª´ ƒë√∫ng).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> Nguy√™n t·∫Øc ng·ªØ ph√°p c∆° b·∫£n: Sau ƒë·ªông t·ª´ khuy·∫øt thi·∫øu (Modal Verbs) nh∆∞ *should, can, could, must, may, might*, ƒë·ªông t·ª´ ph·∫£i lu√¥n ·ªü d·∫°ng **NGUY√äN TH·ªÇ KH√îNG TO (V-infinitive)**.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>S·ª≠a l·ªói:</b> B·ªè ch·ªØ "to" ƒëi. S·ª≠a th√†nh: <b>should obey</b>.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "2. Her teaching method is <u>amazed</u> (A). All <u>the</u> (B) students <u>like</u> (C) <u>it</u> (D).",
        options: [
            { text: "A. amazed", correct: true },
            { text: "B. the", correct: false },
            { text: "C. like", correct: false },
            { text: "D. it", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> Ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y c·ªßa c√¥ ·∫•y th·∫≠t ƒë√°ng kinh ng·∫°c. T·∫•t c·∫£ h·ªçc sinh ƒë·ªÅu th√≠ch n√≥.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch:</b><br>
               - A. amazed (t√≠nh t·ª´ ƒëu√¥i -ed): ch·ªâ c·∫£m x√∫c c·ªßa ng∆∞·ªùi.<br>
               - B. the students: m·∫°o t·ª´ x√°c ƒë·ªãnh ƒë√∫ng.<br>
               - C. like: ƒë·ªông t·ª´ chia s·ªë nhi·ªÅu theo 'students' ƒë√∫ng.<br>
               - D. it: ƒë·∫°i t·ª´ thay th·∫ø cho 'method' ƒë√∫ng.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> Ch·ªß ng·ªØ l√† "Her teaching method" (ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y) l√† S·ª∞ V·∫¨T, n√≥ mang T√çNH CH·∫§T g√¢y ng·∫°c nhi√™n cho ng∆∞·ªùi kh√°c. Do ƒë√≥ ph·∫£i d√πng t√≠nh t·ª´ ƒëu√¥i "-ing".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>S·ª≠a l·ªói:</b> S·ª≠a "amazed" th√†nh <b>amazing</b>. (Amazed ch·ªâ d√πng khi n√≥i: I am amazed - t√¥i b·ªã l√†m cho ng·∫°c nhi√™n).</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "3. When my baby sister <u>is younger</u> (A), she <u>didn‚Äôt</u> (B) <u>use to</u> (C) <u>eat</u> (D) pizza.",
        options: [
            { text: "A. is younger", correct: true },
            { text: "B. didn‚Äôt", correct: false },
            { text: "C. use to", correct: false },
            { text: "D. eat", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u h·ªèi:</b> Khi em g√°i t√¥i c√≤n nh·ªè h∆°n, em ·∫•y ƒë√£ t·ª´ng kh√¥ng ƒÉn pizza.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch:</b><br>
               - A. is younger: th√¨ Hi·ªán t·∫°i ƒë∆°n.<br>
               - B. didn't: tr·ª£ ƒë·ªông t·ª´ Qu√° kh·ª© ƒë∆°n (ƒë√∫ng).<br>
               - C. use to: ƒë√∫ng c·∫•u tr√∫c ph·ªß ƒë·ªãnh (didn't use to).<br>
               - D. eat: V-nguy√™n th·ªÉ ƒë·ª©ng sau 'use to' (ƒë√∫ng).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> V·∫ø sau s·ª≠ d·ª•ng "didn't use to" ch·ªâ m·ªôt th√≥i quen trong **QU√Å KH·ª®**. Do ƒë√≥, m·ªánh ƒë·ªÅ th·ªùi gian "When..." c≈©ng ph·∫£i chia ·ªü th√¨ Qu√° kh·ª© ƒë∆°n ƒë·ªÉ ƒë·∫£m b·∫£o s·ª± h√≤a h·ª£p v·ªÅ th√¨.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>S·ª≠a l·ªói:</b> S·ª≠a "is" th√†nh <b>was</b> -> "When my baby sister <b>was</b> younger".</div>`
    },

    // --- F. WRITING --- Ex 13 ---
    {
        type: "mcq",
        section: "F. WRITING<br><br>Ex 13. Mark the letter A, B, C or D to indicate the sentence that is closest in meaning.",
        q: "1. Many people came to enjoy the program in spite of the expensive entrance tickets.",
        options: [
            { text: "A. Many people came... despite the entrance tickets were expensive.", correct: false },
            { text: "B. Many people came... although the entrance tickets were expensive.", correct: true },
            { text: "C. Many people came... although the expensive entrance tickets.", correct: false },
            { text: "D. Many people came... because the entrance tickets were expensive.", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u g·ªëc:</b> Nhi·ªÅu ng∆∞·ªùi ƒë·∫øn th∆∞·ªüng th·ª©c ch∆∞∆°ng tr√¨nh B·∫§T CH·∫§P (in spite of) nh·ªØng t·∫•m v√© v√†o c·ª≠a ƒë·∫Øt ƒë·ªè.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch c·∫•u tr√∫c:</b> In spite of + C·ª•m danh t·ª´ (the expensive entrance tickets). Mu·ªën ƒë·ªïi sang m·ªánh ƒë·ªÅ, ta d√πng "Although + S + V".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn B?</b> C√¢u B s·ª≠ d·ª•ng ƒë√∫ng c·∫•u tr√∫c "Although + M·ªánh ƒë·ªÅ (the entrance tickets were expensive)" v√† gi·ªØ nguy√™n ƒë∆∞·ª£c √Ω nghƒ©a nh∆∞·ª£ng b·ªô c·ªßa c√¢u g·ªëc.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A sai v√¨ "despite" kh√¥ng ƒëi v·ªõi m·ªánh ƒë·ªÅ (S+V). C sai v√¨ "although" kh√¥ng ƒëi v·ªõi c·ª•m danh t·ª´. D sai nghƒ©a ho√†n to√†n (v√¨ v√© ƒë·∫Øt n√™n ƒë·∫øn xem -> v√¥ l√Ω).</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "2. Although it is not a rush hour, there is a lot of traffic now.",
        options: [
            { text: "A. It is not a rush hour. However, there is a lot of traffic now.", correct: true },
            { text: "B. It is not a rush hour because there is a lot of traffic now.", correct: false },
            { text: "C. It is not a rush hour, so there is a lot of traffic now.", correct: false },
            { text: "D. In spite of it is not a rush hour, there is a lot of traffic now.", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u g·ªëc:</b> M·∫∑c d√π kh√¥ng ph·∫£i gi·ªù cao ƒëi·ªÉm, nh∆∞ng b√¢y gi·ªù c√≥ r·∫•t nhi·ªÅu xe c·ªô.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch:</b> "Although + M·ªánh ƒë·ªÅ 1, M·ªánh ƒë·ªÅ 2" th·ªÉ hi·ªán s·ª± t∆∞∆°ng ph·∫£n. C√≥ th·ªÉ vi·∫øt l·∫°i b·∫±ng: "M·ªánh ƒë·ªÅ 1. However, M·ªánh ƒë·ªÅ 2."</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> C√¢u A ng·∫Øt th√†nh 2 c√¢u ƒë∆°n, d√πng tr·∫°ng t·ª´ li√™n k·∫øt "However" (Tuy nhi√™n) ·ªü ƒë·∫ßu c√¢u th·ª© hai, truy·ªÅn t·∫£i ho√†n h·∫£o √Ω nghƒ©a t∆∞∆°ng ph·∫£n c·ªßa c√¢u g·ªëc.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> B (b·ªüi v√¨) v√† C (v√¨ v·∫≠y) l√†m sai l·ªách ho√†n to√†n √Ω nghƒ©a logic c·ªßa c√¢u. D sai ng·ªØ ph√°p tr·∫ßm tr·ªçng v√¨ "In spite of" kh√¥ng ƒë∆∞·ª£c ph√©p ƒëi li·ªÅn v·ªõi m·ªôt m·ªánh ƒë·ªÅ (it is...).</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "3. I thought that the film would be boring, but in fact it was really good.",
        options: [
            { text: "A. I thought that the film would be boring despite it was really good.", correct: false },
            { text: "B. I thought that the film would be boring because it was really good.", correct: false },
            { text: "C. I thought that the film would be boring, so it was really good.", correct: false },
            { text: "D. I thought that the film would be boring. Nevertheless, it was really good.", correct: true }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u g·ªëc:</b> T√¥i ƒë√£ nghƒ© b·ªô phim s·∫Ω nh√†m ch√°n, nh∆∞ng th·ª±c t·∫ø th√¨ n√≥ r·∫•t hay.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch:</b> Li√™n t·ª´ "but" ch·ªâ s·ª± t∆∞∆°ng ph·∫£n. "Nevertheless" c≈©ng mang nghƒ©a "Tuy nhi√™n/D·∫´u v·∫≠y" gi·ªëng h·ªát "However".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn D?</b> D√πng "Nevertheless" ng·∫Øt gi·ªØa 2 c√¢u ƒë·ªÉ ch·ªâ s·ª± t∆∞∆°ng ph·∫£n l√† m·ªôt c√°ch vi·∫øt l·∫°i chu·∫©n x√°c v√† ng·ªØ ph√°p ho√†n h·∫£o.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A sai ng·ªØ ph√°p ("despite" kh√¥ng c·ªông m·ªánh ƒë·ªÅ). B (b·ªüi v√¨) v√† C (v√¨ v·∫≠y) sai ho√†n to√†n v·ªÅ m·∫∑t logic √Ω nghƒ©a.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "4. Watching this horror film made us feel terrified.",
        options: [
            { text: "A. It was terrifying for us to watching this horror film.", correct: false },
            { text: "B. It was terrified for us to watch this horror film.", correct: false },
            { text: "C. It was terrifying (for us) to watch this horror film.", correct: true },
            { text: "D. It was terrifying watch this horror film.", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u g·ªëc:</b> Vi·ªác xem b·ªô phim kinh d·ªã n√†y khi·∫øn ch√∫ng t√¥i c·∫£m th·∫•y khi·∫øp s·ª£.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch c·∫•u tr√∫c:</b> "V-ing + made SO + feel + adj" -> C√≥ th·ªÉ ƒë·ªïi sang c·∫•u tr√∫c ch·ªß ng·ªØ gi·∫£: "It was + adj(ing) + (for O) + to V". (Th·∫≠t l√†... ƒë·ªÉ l√†m g√¨).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn C?</b> "It was terrifying..." s·ª≠ d·ª•ng t√≠nh t·ª´ ƒëu√¥i -ing ƒë·ªÉ mi√™u t·∫£ t√≠nh ch·∫•t C·ª¶A S·ª∞ VI·ªÜC (vi·ªác xem phim). Sau ƒë√≥ tu√¢n th·ªß ƒë√∫ng c·∫•u tr√∫c "...to watch".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> A sai v√¨ "to watching". B sai v√¨ d√πng t√≠nh t·ª´ ƒëu√¥i -ed "terrified" ƒë·ªÉ mi√™u t·∫£ s·ª± v·∫≠t "It" l√† sai ng·ªØ ph√°p (ch·ªâ d√πng cho ng∆∞·ªùi). D thi·∫øu ch·ªØ "to" tr∆∞·ªõc ƒë·ªông t·ª´.</div>`
    },
    {
        type: "mcq",
        section: "",
        q: "5. Flying from Vietnam to Australia was so tiring to us.",
        options: [
            { text: "A. We were so tired to fly from Vietnam to Australia.", correct: true },
            { text: "B. We were so tiring to fly from Vietnam to Australia.", correct: false },
            { text: "C. We were so tired to flying from Vietnam to Australia.", correct: false },
            { text: "D. We were so tired fly from Vietnam to Australia.", correct: false }
        ],
        expl: `<div class="step"><span class="step-title">B∆∞·ªõc 1</span> <b>D·ªãch c√¢u g·ªëc:</b> Bay t·ª´ VN sang √öc qu√° m·ªát m·ªèi ƒë·ªëi v·ªõi ch√∫ng t√¥i.</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 2</span> <b>Ph√¢n t√≠ch:</b> "S·ª± vi·ªác + is/was tiring to us" -> "We were tired...". (Ch√∫ng t√¥i b·ªã m·ªát m·ªèi).</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 3</span> <b>T·∫°i sao ch·ªçn A?</b> D√πng t√≠nh t·ª´ ƒëu√¥i -ed "tired" ƒë·ªÉ di·ªÖn t·∫£ c·∫£m x√∫c c·ªßa con ng∆∞·ªùi "We" l√† ch√≠nh x√°c. C·∫•u tr√∫c "be tired to V" ƒë∆∞·ª£c s·ª≠ d·ª•ng trong b√†i thi n√†y ƒë·ªÉ th·ªÉ hi·ªán "m·ªát m·ªèi khi ph·∫£i l√†m g√¨".</div>
               <div class="step"><span class="step-title">B∆∞·ªõc 4</span> <b>T·∫°i sao sai?</b> B sai v√¨ d√πng "tiring" mi√™u t·∫£ c·∫£m x√∫c con ng∆∞·ªùi. C sai c·∫•u tr√∫c "to V-ing". D thi·∫øu ch·ªØ "to" tr∆∞·ªõc ƒë·ªông t·ª´ fly.</div>`
    }
];

// D·ªØ li·ªáu cho b√†i Sentence Building (Ex 14)
const buildData = [
    {
        section: "Ex 14. Rewrite the sentences (Sentence Builder Game). <br><span style='font-size:1rem; color:#555;'>H√£y ch·∫°m v√†o c√°c t·ª´ b√™n d∆∞·ªõi ƒë·ªÉ s·∫Øp x·∫øp th√†nh c√¢u vi·∫øt l·∫°i ch√≠nh x√°c!</span>",
        q: "1. I couldn‚Äôt sleep. I was tired. <i>(in spite of)</i>",
        words: ["I", "couldn't", "sleep", "in", "spite", "of", "being", "tired", "."],
        target: "I couldn't sleep in spite of being tired .",
        expl: "C·∫•u tr√∫c <b>in spite of + V-ing</b>. V√¨ ch·ªß ng·ªØ 2 v·∫ø gi·ªëng nhau (I), ƒë·ªông t·ª´ 'was' ƒë∆∞·ª£c bi·∫øn th√†nh V-ing l√† 'being'. -> T√¥i kh√¥ng th·ªÉ ng·ªß b·∫•t ch·∫•p vi·ªác b·ªã m·ªát."
    },
    {
        section: "",
        q: "2. They have little money. They are happy. <i>(despite)</i>",
        words: ["They", "are", "happy", "despite", "having", "little", "money", "."],
        target: "They are happy despite having little money .",
        expl: "C·∫•u tr√∫c <b>despite + V-ing</b>. Ch·ªß ng·ªØ gi·ªëng nhau, l·∫•y v·∫ø nguy√™n nh√¢n (have little money) chuy·ªÉn ƒë·ªông t·ª´ th√†nh V-ing (having). -> H·ªç r·∫•t vui v·∫ª m·∫∑c d√π c√≥ √≠t ti·ªÅn."
    },
    {
        section: "",
        q: "3. My foot was hurt. I managed to walk to the nearest village. <i>(although)</i>",
        words: ["Although", "my", "foot", "was", "hurt", ",", "I", "managed", "to", "walk", "to", "the", "nearest", "village", "."],
        target: "Although my foot was hurt , I managed to walk to the nearest village .",
        expl: "<b>Although + M·ªánh ƒë·ªÅ</b>. Ch·ªâ c·∫ßn ƒë·∫∑t Although l√™n ƒë·∫ßu c√¢u ch·ªâ s·ª± nh∆∞·ª£ng b·ªô, ƒë·ªïi d·∫•u ch·∫•m th√†nh d·∫•u ph·∫©y ƒë·ªÉ n·ªëi 2 v·∫ø. -> M·∫∑c d√π ch√¢n t√¥i b·ªã ƒëau, t√¥i ƒë√£ c·ªë g·∫Øng ƒëi b·ªô ƒë·∫øn ng√¥i l√†ng g·∫ßn nh·∫•t."
    },
    {
        section: "",
        q: "4. We planned to visit Petronas in the afternoon. We could not afford the fee. <i>(however)</i>",
        words: ["We", "planned", "to", "visit", "Petronas", "in", "the", "afternoon", ".", "However", ",", "we", "could", "not", "afford", "the", "fee", "."],
        target: "We planned to visit Petronas in the afternoon . However , we could not afford the fee .",
        expl: "<b>However</b> ƒë·ª©ng ƒë·∫ßu c√¢u th·ª© hai, ngƒÉn c√°ch b·ªüi d·∫•u ch·∫•m (.) v√† d·∫•u ph·∫©y (,) ƒë·ªÉ th·ªÉ hi·ªán s·ª± tr√°i ng∆∞·ª£c. -> Ch√∫ng t√¥i ƒë·ªãnh thƒÉm th√°p Petronas v√†o chi·ªÅu. Tuy nhi√™n, ch√∫ng t√¥i kh√¥ng ƒë·ªß ti·ªÅn tr·∫£ ph√≠."
    },
    {
        section: "",
        q: "9. Mr. Nam often went to work by motorbike, but now he goes to work by bus. <i>(used to)</i>",
        words: ["Mr.", "Nam", "used", "to", "go", "to", "work", "by", "motorbike", "."],
        target: "Mr. Nam used to go to work by motorbike .",
        expl: "C·∫•u tr√∫c <b>used to + V(nguy√™n th·ªÉ)</b> di·ªÖn t·∫£ m·ªôt th√≥i quen trong qu√° kh·ª© nay kh√¥ng c√≤n n·ªØa. Chuy·ªÉn 'went' th√†nh 'go'. -> √îng Nam ƒë√£ t·ª´ng ƒëi l√†m b·∫±ng xe m√°y."
    },
    {
        section: "",
        q: "10. There were traffic jams in this street during rush hours, but now the street becomes (clear). <i>(used to)</i>",
        words: ["There", "used", "to", "be", "traffic", "jams", "in", "this", "street", "during", "rush", "hours", "."],
        target: "There used to be traffic jams in this street during rush hours .",
        expl: "C·∫•u tr√∫c <b>There used to be + Noun</b> (ƒê√£ t·ª´ng c√≥...). Chuy·ªÉn 'There were' th√†nh 'There used to be'. -> ƒê√£ t·ª´ng c√≥ nh·ªØng v·ª• t·∫Øc ƒë∆∞·ªùng tr√™n con ph·ªë n√†y v√†o gi·ªù cao ƒëi·ªÉm."
    }
];

// ==================== LOGIC ·ª®NG D·ª§NG ====================

// 1. Audio System (Web Audio API)
const AudioContext = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioContext();

function playSound(type) {
    if(audioCtx.state === 'suspended') audioCtx.resume();
    const osc = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();
    osc.connect(gainNode);
    gainNode.connect(audioCtx.destination);

    if (type === 'correct') {
        osc.type = 'sine';
        osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); 
        osc.frequency.exponentialRampToValueAtTime(1046.50, audioCtx.currentTime + 0.1); 
        gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
        osc.start(); osc.stop(audioCtx.currentTime + 0.5);
    } else if (type === 'wrong') {
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(150, audioCtx.currentTime); 
        osc.frequency.exponentialRampToValueAtTime(80, audioCtx.currentTime + 0.3); 
        gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        osc.start(); osc.stop(audioCtx.currentTime + 0.3);
    }
}

// 2. Confetti System
function shootConfetti() {
    const colors = ['#00D26A', '#FDCB6E', '#FF4757', '#8854C0', '#00C9A7'];
    for(let i=0; i<40; i++) {
        let conf = document.createElement('div');
        conf.className = 'confetti';
        conf.style.left = Math.random() * 100 + 'vw';
        conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        conf.style.animationDuration = (Math.random() * 2 + 2) + 's';
        document.body.appendChild(conf);
        setTimeout(() => conf.remove(), 4000);
    }
}

// 3. X√°o tr·ªôn ng·∫´u nhi√™n
function shuffleArray(array) {
    let arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

// Bi·∫øn t√≠nh ƒëi·ªÉm
let totalScore = 0;
let totalQuestions = quizData.length + buildData.length;

function renderQuiz() {
    const container = document.getElementById('quiz-container');
    let currentSection = "";

    // ---------------- RENDER MCQ ----------------
    quizData.forEach((qData, index) => {
        if (qData.section && qData.section !== currentSection) {
            currentSection = qData.section;
            let sectionHTML = `<div class="section-title">${currentSection}</div>`;
            container.insertAdjacentHTML('beforeend', sectionHTML);
        }

        const card = document.createElement('div');
        card.className = 'card';
        card.id = `mcq-${index}`;

        const question = document.createElement('div');
        question.className = 'question-text';
        question.innerHTML = qData.q;
        card.appendChild(question);

        const optionsGrid = document.createElement('div');
        optionsGrid.className = 'options-grid';
        
        let shuffledOptions = shuffleArray(qData.options);

        shuffledOptions.forEach((opt, oIdx) => {
            const btn = document.createElement('button');
            btn.className = 'btn-option';
            btn.innerHTML = opt.text;
            btn.onclick = () => handleMCQ(btn, opt.correct, index, optionsGrid, qData.options);
            optionsGrid.appendChild(btn);
        });
        card.appendChild(optionsGrid);

        const explBox = document.createElement('div');
        explBox.className = 'explanation';
        explBox.id = `expl-${index}`;
        explBox.innerHTML = `<h4>üí° Gi·∫£i th√≠ch chi ti·∫øt t·ª´ C√¥ Mai An ULIS:</h4>${qData.expl}`;
        card.appendChild(explBox);

        container.appendChild(card);
    });

    // ---------------- RENDER SENTENCE BUILDER ----------------
    buildData.forEach((bData, bIdx) => {
        if (bData.section) {
            let sectionHTML = `<div class="section-title">${bData.section}</div>`;
            container.insertAdjacentHTML('beforeend', sectionHTML);
        }

        const card = document.createElement('div');
        card.className = 'card';

        const question = document.createElement('div');
        question.className = 'question-text';
        question.innerHTML = bData.q;
        card.appendChild(question);

        // V√πng ƒë√≠ch ƒë·ªÉ x·∫øp t·ª´
        const buildArea = document.createElement('div');
        buildArea.className = 'build-area';
        buildArea.id = `build-area-${bIdx}`;
        card.appendChild(buildArea);

        // N∆°i ch·ª©a t·ª´ x√°o tr·ªôn
        const wordBank = document.createElement('div');
        wordBank.className = 'word-bank';
        wordBank.id = `word-bank-${bIdx}`;
        
        let shuffledWords = shuffleArray(bData.words);
        shuffledWords.forEach((word, wIdx) => {
            let chip = document.createElement('div');
            chip.className = 'word-chip';
            chip.innerText = word;
            chip.id = `chip-${bIdx}-${wIdx}`;
            chip.onclick = () => moveWord(chip, bIdx);
            wordBank.appendChild(chip);
        });
        card.appendChild(wordBank);

        // N√∫t check
        const btnCheck = document.createElement('button');
        btnCheck.className = 'btn-check-build';
        btnCheck.innerText = 'Ki·ªÉm tra c√¢u';
        btnCheck.onclick = () => checkBuiltSentence(bIdx, bData.target, btnCheck);
        card.appendChild(btnCheck);

        // L·ªùi gi·∫£i
        const explBox = document.createElement('div');
        explBox.className = 'explanation';
        explBox.id = `expl-build-${bIdx}`;
        explBox.innerHTML = `<h4>üí° L·ªùi gi·∫£i chi ti·∫øt:</h4><div class="step"><b>C√¢u ho√†n ch·ªânh:</b> <span style="color:var(--correct); font-weight:bold;">${bData.target.replace(/ \./g, '.').replace(/ ,/g, ',')}</span></div><div class="step"><b>Gi·∫£i th√≠ch:</b> ${bData.expl}</div>`;
        card.appendChild(explBox);

        container.appendChild(card);
    });
}

// ---------------- LOGIC TR·∫ÆC NGHI·ªÜM ----------------
function handleMCQ(btn, isCorrect, qIndex, grid, originalOptions) {
    const buttons = grid.querySelectorAll('.btn-option');
    buttons.forEach(b => b.disabled = true);

    if (isCorrect) {
        btn.classList.add('correct');
        playSound('correct');
        shootConfetti();
        totalScore++;
    } else {
        btn.classList.add('wrong');
        btn.classList.add('shake');
        playSound('wrong');
        // Hi·ªán ƒë√°p √°n ƒë√∫ng
        buttons.forEach(b => {
            let originalData = originalOptions.find(o => o.text === b.innerHTML);
            if(originalData && originalData.correct) b.classList.add('correct');
        });
    }

    document.getElementById(`expl-${qIndex}`).classList.add('show');
}

// ---------------- LOGIC SENTENCE BUILDER ----------------
function moveWord(chip, bIdx) {
    const buildArea = document.getElementById(`build-area-${bIdx}`);
    const wordBank = document.getElementById(`word-bank-${bIdx}`);
    
    if (chip.parentElement === wordBank) {
        // Chuy·ªÉn l√™n v√πng gh√©p c√¢u
        buildArea.appendChild(chip);
    } else {
        // Chuy·ªÉn v·ªÅ kho t·ª´
        wordBank.appendChild(chip);
    }
}

function checkBuiltSentence(bIdx, targetPhrase, btnCheck) {
    const buildArea = document.getElementById(`build-area-${bIdx}`);
    const chips = buildArea.querySelectorAll('.word-chip');
    
    // G·ªôp c√°c t·ª´ ƒë√£ x·∫øp l·∫°i v·ªõi kho·∫£ng tr·∫Øng
    let builtArr = [];
    chips.forEach(c => builtArr.push(c.innerText));
    let builtSentence = builtArr.join(" ");

    // So s√°nh v·ªõi target
    if (builtSentence === targetPhrase) {
        playSound('correct');
        shootConfetti();
        buildArea.style.borderColor = "var(--correct)";
        buildArea.style.backgroundColor = "#e8f9f0";
        btnCheck.innerText = "Tuy·ªát v·ªùi!";
        btnCheck.style.background = "var(--correct)";
        btnCheck.disabled = true;
        totalScore++;
    } else {
        playSound('wrong');
        buildArea.classList.remove('shake');
        void buildArea.offsetWidth; // trigger reflow
        buildArea.classList.add('shake');
        buildArea.style.borderColor = "var(--wrong)";
        alert("Ch∆∞a ƒë√∫ng th·ª© t·ª± r·ªìi con ∆°i! H√£y g·ª° t·ª´ ra v√† th·ª≠ x·∫øp l·∫°i xem sao nh√©.");
        return; // D·ª´ng l·∫°i cho h·ªçc sinh th·ª≠ l·∫°i
    }

    // Hi·ªán gi·∫£i th√≠ch khi l√†m ƒë√∫ng
    document.getElementById(`expl-build-${bIdx}`).classList.add('show');
}

// ---------------- SUBMIT FORM ----------------
function submitQuiz() {
    let percentage = Math.round((totalScore / totalQuestions) * 100);
    let message = "";
    if (percentage === 100) message = "Tuy·ªát ƒë·ªânh! Con l√† thi√™n t√†i Ti·∫øng Anh th·ª±c s·ª±! üèÜ";
    else if (percentage >= 80) message = "Qu√° xu·∫•t s·∫Øc! C√¥ Mai An r·∫•t t·ª± h√†o v·ªÅ con! üåü";
    else if (percentage >= 50) message = "C·ªë g·∫Øng r·∫•t t·ªët! Nh·ªõ ƒë·ªçc k·ªπ ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt c·ªßa c√¥ nh√©! üëç";
    else message = "Kh√¥ng sao ƒë√¢u, sai ·ªü ƒë√¢u m√¨nh h·ªçc ·ªü ƒë√≥. K√©o l√™n xem l·ªùi gi·∫£i ƒë·ªÉ nh·ªõ l√¢u h∆°n nh√©! üí™";

    alert(`B√ÅO C√ÅO K·∫æT QU·∫¢:\n\n- ƒêi·ªÉm s·ªë c·ªßa b·∫°n: ${totalScore} / ${totalQuestions} (${percentage}%)\n- L·ªùi khen: ${message}\n\nH√£y k√©o l√™n xem l·∫°i c√°c c√¢u sai c√πng ph·∫ßn Gi·∫£i Th√≠ch Chi Ti·∫øt nh√©!`);
}

// Kh·ªüi ch·∫°y khi t·∫£i trang
window.onload = () => {
    renderQuiz();
};

</script>
</body>
</html>