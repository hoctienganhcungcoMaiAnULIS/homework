<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coasteering Adventure - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-color: #00a8ff;
            --secondary-color: #f5f6fa;
            --correct-color: #00D26A;
            --wrong-color: #FF4757;
            --text-color: #2f3640;
            --accent-color: #fbc531;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e0f7fa;
            /* Auto-generated Background SVG with Ocean & Rock emojis */
            background-image: 
                radial-gradient(circle at center, rgba(255,255,255,0.8) 0%, rgba(224,247,250,0.4) 100%),
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ctext x='10' y='30' font-size='20'%3Eüåä%3C/text%3E%3Ctext x='60' y='80' font-size='20'%3Eüßó%3C/text%3E%3Ctext x='40' y='50' font-size='15'%3Eüê†%3C/text%3E%3C/svg%3E");
            color: var(--text-color);
            overflow: hidden;
            height: 100vh;
        }

        /* Header Area */
        header {
            height: 60px;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1000;
        }

        .teacher-info h4 { margin: 0; color: var(--primary-color); font-size: 14px; }
        
        #timer-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-timer {
            background: var(--accent-color);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #d39e00;
            transition: all 0.2s;
        }

        .btn-timer:active { transform: translateY(2px); box-shadow: 0 2px 0 #d39e00; }

        /* Main Layout */
        main {
            display: flex;
            height: calc(100vh - 60px);
        }

        .pane {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
        }

        .left-pane { border-right: 4px solid #dcdde1; background: rgba(255, 255, 255, 0.7); }
        .right-pane { background: rgba(255, 255, 255, 0.5); }

        /* Reading Content */
        .passage-card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            line-height: 1.8;
            font-size: 17px;
        }

        .translation-box {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f0f9ff;
            border-left: 5px solid var(--primary-color);
            border-radius: 10px;
            font-style: italic;
        }

        .btn-translate {
            background: #3498db;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Glossary Table */
        .glossary-table {
            width: 100%;
            margin-top: 30px;
            border-collapse: collapse;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .glossary-table th { background: var(--primary-color); color: white; padding: 12px; }
        .glossary-table td { background: white; padding: 10px; border-bottom: 1px solid #eee; text-align: center;}

        /* Question Cards */
        .question-card {
            background: white;
            margin-bottom: 40px;
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border-bottom: 6px solid #ddd;
            transition: transform 0.3s;
        }

        .options-container {
            display: grid;
            gap: 12px;
            margin-top: 20px;
        }

        .option {
            padding: 15px 20px;
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #e1e8ed;
            display: flex;
            align-items: center;
        }

        .option:hover { transform: scale(1.02); background-color: #f8f9fa; }

        .option.correct {
            background-color: var(--correct-color) !important;
            color: white;
            border-color: #00b35a;
            box-shadow: 0 4px 0 #009e50;
        }

        .option.wrong {
            background-color: var(--wrong-color) !important;
            color: white;
            border-color: #e84118;
            box-shadow: 0 4px 0 #c23616;
            animation: shake 0.4s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Support Buttons */
        .support-tools {
            display: none;
            margin-top: 20px;
            gap: 10px;
            border-top: 1px dashed #ccc;
            padding-top: 15px;
        }

        .btn-support {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            font-size: 13px;
        }

        .btn-explain { background: #9b59b6; }
        .btn-dict { background: #34495e; }
        .btn-vocab { background: #e67e22; }

        .detail-info {
            display: none;
            background: #fff9e6;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            font-size: 14px;
            border-left: 4px solid #f1c40f;
        }

        /* Final Result Modal */
        #result-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 0 var(--primary-color);
        }

        .submit-all-container {
            text-align: center;
            margin: 40px 0;
        }

        .btn-submit-test {
            padding: 15px 40px;
            font-size: 20px;
            background: #e67e22;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 6px 0 #d35400;
        }
    </style>
</head>
<body>

    <header>
        <div class="teacher-info">
            <h4>Gi√°o vi√™n: Ms Mai An ULIS</h4>
        </div>
        <div id="timer-container">
            <button class="btn-timer" id="timer-toggle" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
            <span id="time-display" style="font-weight: bold; font-size: 20px; display:none;">10:00</span>
        </div>
        <div></div>
    </header>

    <main>
        <div class="pane left-pane">
            <div class="passage-card">
                <h1 style="color: var(--primary-color);">Coasteering</h1>
                <p>Lily Carter had no idea what present she wanted for her 14th birthday. But she‚Äôd always been keen on challenging sports, especially to do with water, like surfing and sailing. So when her parents heard about an activity called coasteering ‚Äì exploring rocks along the coast by climbing and swimming ‚Äì they thought Lily would love it. They found a course offered at an activity centre called Porthdean, just along the coast from the family home, which was perfect. So after checking it was led by experienced instructors, they signed her up.</p>
                
                <button class="btn-translate" onclick="toggleParaTrans(1)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div id="trans-1" class="translation-box">
                    Lily Carter kh√¥ng h·ªÅ bi·∫øt m√¨nh mu·ªën qu√† g√¨ cho sinh nh·∫≠t l·∫ßn th·ª© 14. Nh∆∞ng c√¥ lu√¥n y√™u th√≠ch c√°c m√¥n th·ªÉ thao th·ª≠ th√°ch, ƒë·∫∑c bi·ªát l√† nh·ªØng m√¥n li√™n quan ƒë·∫øn n∆∞·ªõc nh∆∞ l∆∞·ªõt s√≥ng v√† l∆∞·ªõt v√°n bu·ªìm. V√¨ v·∫≠y, khi b·ªë m·∫π c√¥ nghe n√≥i v·ªÅ m·ªôt ho·∫°t ƒë·ªông g·ªçi l√† coasteering ‚Äì kh√°m ph√° c√°c v√°ch ƒë√° d·ªçc b·ªù bi·ªÉn b·∫±ng c√°ch leo tr√®o v√† b∆°i l·ªôi ‚Äì h·ªç nghƒ© Lily s·∫Ω th√≠ch n√≥. H·ªç t√¨m th·∫•y m·ªôt kh√≥a h·ªçc t·∫°i trung t√¢m ho·∫°t ƒë·ªông Porthdean, n·∫±m ngay d·ªçc b·ªù bi·ªÉn g·∫ßn nh√†, ƒëi·ªÅu n√†y th·∫≠t ho√†n h·∫£o. Sau khi ki·ªÉm tra k·ªπ r·∫±ng kh√≥a h·ªçc ƒë∆∞·ª£c d·∫´n d·∫Øt b·ªüi c√°c h∆∞·ªõng d·∫´n vi√™n gi√†u kinh nghi·ªám, h·ªç ƒë√£ ƒëƒÉng k√Ω cho c√¥.
                </div>

                <p>Lily had seen a TV show about coasteering, and was interested in doing it, although she‚Äôd thought only adults could take part. But then she discovered that on courses at Porthdean, there‚Äôd also be people her age jumping from rocks into the sea, and also exploring caves ‚Äì which she was never normally allowed to do, so she really wanted to go. But she still asked her dad to go along too and, although he wondered whether he‚Äôd like coasteering himself, he knew how much Lily wanted someone to accompany her, so he agreed.</p>
                
                <button class="btn-translate" onclick="toggleParaTrans(2)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div id="trans-2" class="translation-box">
                    Lily t·ª´ng xem m·ªôt ch∆∞∆°ng tr√¨nh truy·ªÅn h√¨nh v·ªÅ coasteering v√† th·∫•y h·ª©ng th√∫, d√π c√¥ t·ª´ng nghƒ© ch·ªâ ng∆∞·ªùi l·ªõn m·ªõi ƒë∆∞·ª£c tham gia. Nh∆∞ng r·ªìi c√¥ ph√°t hi·ªán ra t·∫°i c√°c kh√≥a h·ªçc ·ªü Porthdean, c≈©ng c√≥ nh·ªØng ng∆∞·ªùi b·∫±ng tu·ªïi c√¥ nh·∫£y t·ª´ v√°ch ƒë√° xu·ªëng bi·ªÉn v√† kh√°m ph√° hang ƒë·ªông ‚Äì nh·ªØng vi·ªác c√¥ th∆∞·ªùng kh√¥ng ƒë∆∞·ª£c ph√©p l√†m, n√™n c√¥ r·∫•t mu·ªën ƒëi. Tuy nhi√™n, c√¥ v·∫´n nh·ªù b·ªë ƒëi c√πng v√† m·∫∑c d√π √¥ng bƒÉn khoƒÉn kh√¥ng bi·∫øt m√¨nh c√≥ th√≠ch m√¥n n√†y kh√¥ng, √¥ng bi·∫øt Lily r·∫•t mu·ªën c√≥ ng∆∞·ªùi ƒëi c√πng n√™n ƒë√£ ƒë·ªìng √Ω.
                </div>

                <p>Lily and her dad drove to Porthdean, where they attended a session with their instructors to learn basic safety and techniques and be given helmets and special wetsuits to keep the cold out. The group they joined was quite small, which meant they got lots of individual attention. Says Lily, ‚ÄòThe entire trip was awesome ‚Äì although the water was freezing! But our instructors encouraged the whole group so much, we were ready to try absolutely all the challenges, even stuff we hadn‚Äôt expected at all, like jumping off high cliffs! I must admit, the one I jumped off wasn‚Äôt that high, but Dad went much higher!‚Äô</p>
                
                <button class="btn-translate" onclick="toggleParaTrans(3)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div id="trans-3" class="translation-box">
                    Lily v√† b·ªë l√°i xe ƒë·∫øn Porthdean, n∆°i h·ªç tham gia m·ªôt bu·ªïi h·ªçc v·ªõi h∆∞·ªõng d·∫´n vi√™n ƒë·ªÉ h·ªçc c√°c k·ªπ thu·∫≠t v√† an to√†n c∆° b·∫£n, ƒë·ªìng th·ªùi ƒë∆∞·ª£c c·∫•p m≈© b·∫£o hi·ªÉm v√† b·ªô ƒë·ªì l·∫∑n ƒë·∫∑c bi·ªát ƒë·ªÉ gi·ªØ ·∫•m. Nh√≥m h·ªç tham gia kh√° nh·ªè, nghƒ©a l√† h·ªç nh·∫≠n ƒë∆∞·ª£c r·∫•t nhi·ªÅu s·ª± quan t√¢m c√° nh√¢n. Lily n√≥i: "To√†n b·ªô chuy·∫øn ƒëi th·∫≠t tuy·ªát v·ªùi ‚Äì m·∫∑c d√π n∆∞·ªõc l·∫°nh bu·ªët! Nh∆∞ng c√°c h∆∞·ªõng d·∫´n vi√™n ƒë√£ kh√≠ch l·ªá c·∫£ nh√≥m r·∫•t nhi·ªÅu, ch√∫ng t√¥i s·∫µn s√†ng th·ª≠ tuy·ªát ƒë·ªëi m·ªçi th·ª≠ th√°ch, ngay c·∫£ nh·ªØng th·ª© ch√∫ng t√¥i ho√†n to√†n kh√¥ng ng·ªù t·ªõi, nh∆∞ nh·∫£y t·ª´ v√°ch ƒë√° cao! T√¥i ph·∫£i th·ª´a nh·∫≠n r·∫±ng v√°ch ƒë√° t√¥i nh·∫£y kh√¥ng cao l·∫Øm, nh∆∞ng b·ªë t√¥i ƒë√£ nh·∫£y t·ª´ n∆°i cao h∆°n nhi·ªÅu!"
                </div>

                <p>‚ÄòAnyway, Dad and I hadn‚Äôt realised how hard it would be physically, so we were glad we were fit,‚Äô explains Lily. ‚ÄòEven so, afterwards, we actually felt like we‚Äôd done loads of hard exercise in the gym! But I‚Äôll keep the memories of that trip forever, I reckon. And the instructors are going to put a video of it onto the website, so my friends will see it. They‚Äôd never believe me otherwise!‚Äô</p>
                
                <button class="btn-translate" onclick="toggleParaTrans(4)">B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div id="trans-4" class="translation-box">
                    "D√π sao th√¨, t√¥i v√† b·ªë ƒë√£ kh√¥ng nh·∫≠n ra n√≥ ƒë√≤i h·ªèi th·ªÉ l·ª±c ƒë·∫øn m·ª©c n√†o, v√¨ v·∫≠y ch√∫ng t√¥i m·ª´ng l√† m√¨nh kh·ªèe m·∫°nh," Lily gi·∫£i th√≠ch. "M·∫∑c d√π v·∫≠y, sau ƒë√≥, ch√∫ng t√¥i th·ª±c s·ª± c·∫£m th·∫•y nh∆∞ v·ª´a t·∫≠p th·ªÉ d·ª•c c∆∞·ªùng ƒë·ªô cao trong ph√≤ng gym! Nh∆∞ng t√¥i nghƒ© m√¨nh s·∫Ω gi·ªØ m√£i nh·ªØng k·ª∑ ni·ªám v·ªÅ chuy·∫øn ƒëi ƒë√≥. V√† c√°c h∆∞·ªõng d·∫´n vi√™n s·∫Ω ƒëƒÉng m·ªôt video v·ªÅ n√≥ l√™n trang web ƒë·ªÉ b·∫°n b√® t√¥i c√≥ th·ªÉ xem. N·∫øu kh√¥ng h·ªç s·∫Ω ch·∫≥ng bao gi·ªù tin t√¥i ƒë√¢u!"
                </div>

                <h3 style="margin-top:40px; border-bottom: 2px solid var(--primary-color);">Vocabulary Glossary</h3>
                <table class="glossary-table">
                    <thead>
                        <tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a ti·∫øng Vi·ªát</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Coasteering</td><td>(n)</td><td>M√¥n th·ªÉ thao kh√°m ph√° b·ªù bi·ªÉn</td></tr>
                        <tr><td>Experienced</td><td>(adj)</td><td>Gi√†u kinh nghi·ªám</td></tr>
                        <tr><td>Instructor</td><td>(n)</td><td>H∆∞·ªõng d·∫´n vi√™n / Ng∆∞·ªùi d·∫°y</td></tr>
                        <tr><td>Explore</td><td>(v)</td><td>Kh√°m ph√°</td></tr>
                        <tr><td>Accompany</td><td>(v)</td><td>ƒêi c√πng, h·ªô t·ªëng</td></tr>
                        <tr><td>Technique</td><td>(n)</td><td>K·ªπ thu·∫≠t</td></tr>
                        <tr><td>Wetsuit</td><td>(n)</td><td>B·ªô ƒë·ªì l·∫∑n (gi·ªØ nhi·ªát)</td></tr>
                        <tr><td>Freezing</td><td>(adj)</td><td>L·∫°nh gi√° / L·∫°nh bu·ªët</td></tr>
                        <tr><td>Physically</td><td>(adv)</td><td>V·ªÅ m·∫∑t th·ªÉ ch·∫•t</td></tr>
                        <tr><td>Memory</td><td>(n)</td><td>K·ª∑ ni·ªám / Tr√≠ nh·ªõ</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="pane right-pane">
            <div id="quiz-container">
                <div class="question-card" id="q1" data-answer="C">
                    <h3>Question 1: Why did Lily‚Äôs parents choose Porthdean for her coasteering present?</h3>
                    <div class="options-container">
                        <div class="option" onclick="checkAnswer(this, 'A', 1)">A. It offered various courses in her favourite watersport.</div>
                        <div class="option" onclick="checkAnswer(this, 'B', 1)">B. The instructors there were highly recommended.</div>
                        <div class="option" onclick="checkAnswer(this, 'C', 1)">C. It wasn‚Äôt too far away from where they lived.</div>
                        <div class="option" onclick="checkAnswer(this, 'D', 1)">D. She had already tried some activities there.</div>
                    </div>
                    <div class="support-tools" id="support-1">
                        <button class="btn-support btn-explain" onclick="showDetail(1, 'explain')">Gi·∫£i th√≠ch</button>
                        <button class="btn-support btn-dict" onclick="showDetail(1, 'dict')">D·ªãch</button>
                        <button class="btn-support btn-vocab" onclick="showDetail(1, 'vocab')">T·ª´ v·ª±ng</button>
                    </div>
                    <div class="detail-info" id="detail-1"></div>
                </div>

                <div class="question-card" id="q2" data-answer="A">
                    <h3>Question 2: How did Lily feel about the coasteering course?</h3>
                    <div class="options-container">
                        <div class="option" onclick="checkAnswer(this, 'A', 2)">A. pleased that it included something she‚Äôd always wanted to try</div>
                        <div class="option" onclick="checkAnswer(this, 'B', 2)">B. excited about doing the experience all on her own</div>
                        <div class="option" onclick="checkAnswer(this, 'C', 2)">C. keen to find out more about what it involved</div>
                        <div class="option" onclick="checkAnswer(this, 'D', 2)">D. interested to see whether she was the only teenager</div>
                    </div>
                    <div class="support-tools" id="support-2">
                        <button class="btn-support btn-explain" onclick="showDetail(2, 'explain')">Gi·∫£i th√≠ch</button>
                        <button class="btn-support btn-dict" onclick="showDetail(2, 'dict')">D·ªãch</button>
                        <button class="btn-support btn-vocab" onclick="showDetail(2, 'vocab')">T·ª´ v·ª±ng</button>
                    </div>
                    <div class="detail-info" id="detail-2"></div>
                </div>

                <div class="question-card" id="q3" data-answer="B">
                    <h3>Question 3: Lily particularly liked her instructors because they made sure everyone</h3>
                    <div class="options-container">
                        <div class="option" onclick="checkAnswer(this, 'A', 3)">A. was comfortable with the kit they were given.</div>
                        <div class="option" onclick="checkAnswer(this, 'B', 3)">B. felt confident about the new things they would attempt.</div>
                        <div class="option" onclick="checkAnswer(this, 'C', 3)">C. got the same amount of attention.</div>
                        <div class="option" onclick="checkAnswer(this, 'D', 3)">D. knew all the activities they would take part in.</div>
                    </div>
                    <div class="support-tools" id="support-3">
                        <button class="btn-support btn-explain" onclick="showDetail(3, 'explain')">Gi·∫£i th√≠ch</button>
                        <button class="btn-support btn-dict" onclick="showDetail(3, 'dict')">D·ªãch</button>
                        <button class="btn-support btn-vocab" onclick="showDetail(3, 'vocab')">T·ª´ v·ª±ng</button>
                    </div>
                    <div class="detail-info" id="detail-3"></div>
                </div>

                <div class="question-card" id="q4" data-answer="D">
                    <h3>Question 4: Lily says that after the course, she was</h3>
                    <div class="options-container">
                        <div class="option" onclick="checkAnswer(this, 'A', 4)">A. happy she‚Äôd shared something so exciting with her dad.</div>
                        <div class="option" onclick="checkAnswer(this, 'B', 4)">B. sorry she hadn‚Äôt worked at getting fitter before she went.</div>
                        <div class="option" onclick="checkAnswer(this, 'C', 4)">C. proud that her friends all thought she‚Äôd done well.</div>
                        <div class="option" onclick="checkAnswer(this, 'D', 4)">D. surprised at how exhausted she was by the activities.</div>
                    </div>
                    <div class="support-tools" id="support-4">
                        <button class="btn-support btn-explain" onclick="showDetail(4, 'explain')">Gi·∫£i th√≠ch</button>
                        <button class="btn-support btn-dict" onclick="showDetail(4, 'dict')">D·ªãch</button>
                        <button class="btn-support btn-vocab" onclick="showDetail(4, 'vocab')">T·ª´ v·ª±ng</button>
                    </div>
                    <div class="detail-info" id="detail-4"></div>
                </div>

                <div class="question-card" id="q5" data-answer="A">
                    <h3>Question 5: What would Lily text to a friend while she was away on the course?</h3>
                    <div class="options-container">
                        <div class="option" onclick="checkAnswer(this, 'A', 5)">A. I don‚Äôt think Dad was sure before he came that he‚Äôd enjoy it ‚Äì but actually, he‚Äôs been braver than me!</div>
                        <div class="option" onclick="checkAnswer(this, 'B', 5)">B. I wanted to do the coasteering course, and mentioned it to my parents before my birthday. But I never expected they‚Äôd let me go!</div>
                        <div class="option" onclick="checkAnswer(this, 'C', 5)">C. Our session before the activities was great, although I really didn‚Äôt think I‚Äôd need a wetsuit for the cold ‚Äì and I was right!</div>
                        <div class="option" onclick="checkAnswer(this, 'D', 5)">D. Going into caves was amazing. I‚Äôd love to explore them by myself when we‚Äôre next at the beach ‚Äì I‚Äôm sure my parents will let me!</div>
                    </div>
                    <div class="support-tools" id="support-5">
                        <button class="btn-support btn-explain" onclick="showDetail(5, 'explain')">Gi·∫£i th√≠ch</button>
                        <button class="btn-support btn-dict" onclick="showDetail(5, 'dict')">D·ªãch</button>
                        <button class="btn-support btn-vocab" onclick="showDetail(5, 'vocab')">T·ª´ v·ª±ng</button>
                    </div>
                    <div class="detail-info" id="detail-5"></div>
                </div>

                <div class="submit-all-container">
                    <button class="btn-submit-test" onclick="finishTest()">N·ªòP B√ÄI (FINISH)</button>
                </div>
            </div>
        </div>
    </main>

    <div id="result-modal">
        <div class="modal-content">
            <h1 id="score-text">0/5</h1>
            <p id="comment-text" style="font-size: 1.2rem;"></p>
            <button class="btn-submit-test" onclick="location.reload()">L√ÄM L·∫†I</button>
        </div>
    </div>

    <audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2108/2108-preview.mp3"></audio>

    <script>
        let timeLeft = 600;
        let timerId = null;
        let score = 0;
        const totalQuestions = 5;
        let answeredQuestions = new Set();

        const dataDetails = {
            1: {
                explain: "D·∫´n ch·ª©ng trong b√†i: '...found a course offered at an activity centre called Porthdean, just along the coast from the family home, which was perfect.' -> G·∫ßn nh√† l√† l√Ω do h·ªç ch·ªçn Porthdean. C√°c ƒë√°p √°n kh√°c sai v√¨: A (kh√¥ng n√≥i nhi·ªÅu kh√≥a h·ªçc), B (kh√¥ng n√≥i ƒë∆∞·ª£c gi·ªõi thi·ªáu cao), D (ch∆∞a t·ª´ng th·ª≠ ·ªü ƒë√¢y).",
                dict: "T·∫°i sao b·ªë m·∫π Lily ch·ªçn Porthdean? A. N√≥ cung c·∫•p nhi·ªÅu kh√≥a h·ªçc. B. H∆∞·ªõng d·∫´n vi√™n ƒë∆∞·ª£c ƒë·ªÅ xu·∫•t. C. N√≥ kh√¥ng qu√° xa nh√†. D. C√¥ ·∫•y ƒë√£ th·ª≠ ho·∫°t ƒë·ªông ·ªü ƒë√≥.",
                vocab: "Perfect (adj): ho√†n h·∫£o; Just along (prep): ngay d·ªçc theo; Sign up (phr v): ƒëƒÉng k√Ω."
            },
            2: {
                explain: "D·∫´n ch·ª©ng: 'exploring caves ‚Äì which she was never normally allowed to do, so she really wanted to go.' -> C√¥ ·∫•y h√†i l√≤ng v√¨ ƒë∆∞·ª£c kh√°m ph√° hang ƒë·ªông, th·ª© m√† b√¨nh th∆∞·ªùng kh√¥ng ƒë∆∞·ª£c ph√©p. A ƒë√∫ng.",
                dict: "Lily c·∫£m th·∫•y th·∫ø n√†o? A. Vui v√¨ c√≥ th·ª© c√¥ lu√¥n mu·ªën th·ª≠. B. H√†o h·ª©ng v√¨ t·ª± tr·∫£i nghi·ªám 1 m√¨nh. C. Mu·ªën bi·∫øt th√™m th√¥ng tin. D. Mu·ªën xem c√≥ thi·∫øu ni√™n n√†o kh√°c kh√¥ng.",
                vocab: "Discover (v): kh√°m ph√°; Allowed (adj): ƒë∆∞·ª£c cho ph√©p; Accompany (v): ƒëi c√πng."
            },
            3: {
                explain: "D·∫´n ch·ª©ng: 'our instructors encouraged the whole group so much, we were ready to try absolutely all the challenges...' -> S·ª± kh√≠ch l·ªá (encouragement) gi√∫p m·ªçi ng∆∞·ªùi t·ª± tin (confident) ƒë·ªÉ th·ª≠ c√°i m·ªõi. Ch·ªçn B.",
                dict: "Lily th√≠ch h∆∞·ªõng d·∫´n vi√™n v√¨ h·ªç ƒë·∫£m b·∫£o m·ªçi ng∆∞·ªùi: A. Tho·∫£i m√°i v·ªõi ƒë·ªì b·∫£o h·ªô. B. T·ª± tin v·ªõi nh·ªØng th·ª© m·ªõi. C. Nh·∫≠n s·ª± ch√∫ √Ω nh∆∞ nhau. D. Bi·∫øt h·∫øt c√°c ho·∫°t ƒë·ªông.",
                vocab: "Encourage (v): kh√≠ch l·ªá; Confidence (n): s·ª± t·ª± tin; Attempt (v/n): th·ª≠ s·ª©c/n·ªó l·ª±c."
            },
            4: {
                explain: "D·∫´n ch·ª©ng: 'afterwards, we actually felt like we‚Äôd done loads of hard exercise in the gym!' -> So s√°nh v·ªõi vi·ªác t·∫≠p gym c·ª±c kh·ªï cho th·∫•y c√¥ ·∫•y ng·∫°c nhi√™n v√¨ s·ª± ki·ªát s·ª©c (exhausted). Ch·ªçn D.",
                dict: "Sau kh√≥a h·ªçc, Lily th·∫•y: A. H·∫°nh ph√∫c v√¨ chia s·∫ª v·ªõi b·ªë. B. Ti·∫øc v√¨ kh√¥ng t·∫≠p th·ªÉ d·ª•c tr∆∞·ªõc. C. T·ª± h√†o v√¨ b·∫°n b√® khen. D. Ng·∫°c nhi√™n v√¨ s·ª± m·ªát m·ªèi.",
                vocab: "Exhausted (adj): ki·ªát s·ª©c; Physically (adv): th·ªÉ ch·∫•t; Memory (n): k·ª∑ ni·ªám."
            },
            5: {
                explain: "D·∫´n ch·ª©ng: 'Dad went much higher!' -> B·ªë c√¥ ·∫•y d≈©ng c·∫£m h∆°n c√¥ ·∫•y khi nh·∫£y t·ª´ v√°ch ƒë√° cao. ƒêo·∫°n 2 c≈©ng n√≥i b·ªë bƒÉn khoƒÉn l√∫c ƒë·∫ßu nh∆∞ng sau ƒë√≥ r·∫•t hƒÉng h√°i. Ch·ªçn A.",
                dict: "Lily s·∫Ω nh·∫Øn g√¨ cho b·∫°n? A. B·ªë t·ªõ ban ƒë·∫ßu kh√¥ng ch·∫Øc s·∫Ω th√≠ch nh∆∞ng th·ª±c ra √¥ng ·∫•y c√≤n d≈©ng c·∫£m h∆°n t·ªõ! B. T·ªõ kh√¥ng ng·ªù b·ªë m·∫π cho ƒëi. C. T·ªõ ƒë√∫ng khi nghƒ© kh√¥ng c·∫ßn wetsuit (Lily sai, n∆∞·ªõc r·∫•t l·∫°nh). D. B·ªë m·∫π s·∫Ω cho t·ªõ ƒëi hang ƒë·ªông m·ªôt m√¨nh (Lily n√≥i b√¨nh th∆∞·ªùng kh√¥ng ƒë∆∞·ª£c cho ph√©p).",
                vocab: "Brave (adj): d≈©ng c·∫£m; Mention (v): ƒë·ªÅ c·∫≠p; Expected (v): k·ª≥ v·ªçng."
            }
        };

        function toggleTimer() {
            const btn = document.getElementById('timer-toggle');
            const display = document.getElementById('time-display');
            if (!timerId) {
                display.style.display = 'inline';
                btn.innerText = 'T·∫†M D·ª™NG';
                timerId = setInterval(() => {
                    timeLeft--;
                    let m = Math.floor(timeLeft / 60);
                    let s = timeLeft % 60;
                    display.innerText = `${m}:${s < 10 ? '0'+s : s}`;
                    if (timeLeft <= 0) {
                        clearInterval(timerId);
                        alert("ƒê√£ h·∫øt gi·ªù l√†m b√†i. B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                    }
                }, 1000);
            } else {
                clearInterval(timerId);
                timerId = null;
                btn.innerText = 'TI·∫æP T·ª§C';
            }
        }

        function toggleParaTrans(id) {
            const el = document.getElementById(`trans-${id}`);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }

        function checkAnswer(element, choice, qNum) {
            if (answeredQuestions.has(qNum)) return;

            const card = document.getElementById(`q${qNum}`);
            const correctAnswer = card.getAttribute('data-answer');
            const options = card.querySelectorAll('.option');

            if (choice === correctAnswer) {
                element.classList.add('correct');
                document.getElementById('sound-correct').play();
                score++;
                confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
            } else {
                element.classList.add('wrong');
                document.getElementById('sound-wrong').play();
                options.forEach(opt => {
                    if (opt.innerText.startsWith(correctAnswer)) opt.classList.add('correct');
                });
            }

            answeredQuestions.add(qNum);
            document.getElementById(`support-${qNum}`).style.display = 'flex';
        }

        function showDetail(qNum, type) {
            const detailBox = document.getElementById(`detail-${qNum}`);
            detailBox.style.display = 'block';
            let content = "";
            if(type === 'explain') content = "<strong>üë©‚Äçüè´ Gi·∫£i th√≠ch:</strong> " + dataDetails[qNum].explain;
            if(type === 'dict') content = "<strong>üìñ D·ªãch c√¢u h·ªèi:</strong> " + dataDetails[qNum].dict;
            if(type === 'vocab') content = "<strong>üí° T·ª´ v·ª±ng:</strong> " + dataDetails[qNum].vocab;
            detailBox.innerHTML = content;
        }

        function finishTest() {
            const modal = document.getElementById('result-modal');
            const scoreTxt = document.getElementById('score-text');
            const commentTxt = document.getElementById('comment-text');
            
            modal.style.display = 'flex';
            scoreTxt.innerText = `${score}/${totalQuestions}`;
            
            if (score === 5) commentTxt.innerText = "THI√äN T√ÄI! B·∫°n th·∫≠t xu·∫•t s·∫Øc! üåü";
            else if (score >= 3) commentTxt.innerText = "L√†m t·ªët l·∫Øm! C·ªë g·∫Øng ph√°t huy nh√©! üëç";
            else commentTxt.innerText = "C·ªë l√™n nh√©! Luy·ªán t·∫≠p th√™m m·ªôt ch√∫t n·ªØa th√¥i! üí™";
        }
    </script>
</body>
</html>