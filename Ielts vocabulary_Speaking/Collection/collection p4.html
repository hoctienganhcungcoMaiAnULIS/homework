<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Gamified Quiz - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3799;
            --secondary: #f6b93b;
            --accent: #00C9A7;
            --correct: #00D26A;
            --wrong: #FF4757;
            --text-dark: #2d3436;
            --bg-light: #f9f9f9;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Nunito', sans-serif;
            color: var(--text-dark);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background: linear-gradient(-45deg, #1e3799, #f6b93b, #e55039, #4a69bd);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Auto-generated Dynamic Pattern: Movie & Office Drama */
        .bg-pattern {
            position: fixed; top: 0; left: 0; width: 100%; height: 200%;
            background-image: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Ctext x='20' y='50' font-size='35'%3E%F0%9F%8E%AC%3C/text%3E%3Ctext x='90' y='100' font-size='35'%3E%F0%9F%8F%A2%3C/text%3E%3Ctext x='40' y='150' font-size='35'%3E%F0%9F%92%A5%3C/text%3E%3C/svg%3E");
            opacity: 0.18; z-index: -1; pointer-events: none;
            animation: floatUp 35s linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0); }
            100% { transform: translateY(-50%); }
        }

        /* Top Bar */
        .top-bar {
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .teacher-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 14px;
            font-weight: 700;
            color: var(--primary);
            background: rgba(30, 55, 153, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        #timer { font-size: 24px; font-weight: 800; color: var(--wrong); width: 80px; text-align: center; }
        .btn-control {
            background: var(--primary); color: white; border: none; padding: 10px 20px;
            font-family: 'Quicksand', sans-serif; font-weight: 700; font-size: 14px;
            border-radius: 12px; cursor: pointer;
            box-shadow: 0 4px 0 #0c2461; transition: all 0.1s;
        }
        .btn-control:active { transform: translateY(4px); box-shadow: 0 0 0 #0c2461; }

        /* Split Screen Content */
        .main-container {
            display: flex; flex: 1; padding: 20px; gap: 20px; overflow: hidden;
        }

        .pane {
            flex: 1; background: rgba(255, 255, 255, 0.95);
            border-radius: 25px; padding: 30px; overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .pane::-webkit-scrollbar { width: 8px; }
        .pane::-webkit-scrollbar-thumb { background: #ccc; border-radius: 10px; }

        /* Left Pane - Reading */
        .reading-text { font-size: 18px; line-height: 1.8; margin-bottom: 20px; }
        .reading-title { color: var(--primary); font-size: 22px; font-weight: 800; margin-top: 20px; margin-bottom: 10px; }
        .word-bank { background: #eee; padding: 15px; border-radius: 15px; font-weight: bold; color: #555; margin-bottom: 15px; font-size: 14px; }
        .blank-space { font-weight: bold; color: var(--primary); }
        
        .btn-translate {
            background: #ffeaa7; color: #d63031; border: none; padding: 8px 15px;
            border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 14px;
            box-shadow: 0 4px 0 #fdcb6e; margin-bottom: 20px; display: inline-flex; align-items: center; gap: 5px;
        }
        .btn-translate:active { transform: translateY(4px); box-shadow: none; }
        .translation-box {
            display: none; background: #fff3cd; border-left: 4px solid #ffc107;
            padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 16px; color: #555;
        }

        .glossary-table { width: 100%; border-collapse: collapse; margin-top: 30px; }
        .glossary-table th { background: var(--primary); color: white; padding: 10px; text-align: left; border-radius: 8px 8px 0 0; }
        .glossary-table td { padding: 10px; border-bottom: 1px solid #ddd; }
        .glossary-table tr:last-child td { border-bottom: none; }

        /* Right Pane - Quiz */
        .question-card {
            background: white; border: 2px solid #e5e5e5; border-radius: 20px;
            padding: 25px; margin-bottom: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .question-text { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #2d3436; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-btn {
            background: white; border: 2px solid #e5e5e5; border-radius: 16px;
            padding: 15px; font-size: 16px; font-family: 'Nunito', sans-serif; font-weight: 700;
            color: #2d3436; cursor: pointer; text-align: left;
            box-shadow: 0 6px 0 #e5e5e5; transition: all 0.1s ease;
            display: flex; align-items: center; gap: 10px;
        }
        .option-btn:hover { transform: scale(1.02); }
        .option-btn:active { transform: translateY(6px); box-shadow: 0 0 0 #e5e5e5; }
        
        .option-btn.correct { background: var(--correct); border-color: #00b359; box-shadow: 0 6px 0 #00b359; color: white; }
        .option-btn.wrong { background: var(--wrong); border-color: #d63031; box-shadow: 0 6px 0 #d63031; color: white; animation: shake 0.4s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }

        .explanation-box {
            display: none; margin-top: 20px; padding: 20px;
            background: #f1f8ff; border-left: 5px solid #0984e3; border-radius: 10px; font-size: 15px; line-height: 1.6;
        }
        .explanation-box h4 { color: #0984e3; margin-bottom: 10px; }
        .exp-vocab { white-space: pre-line; margin-bottom: 10px; font-family: 'Quicksand', sans-serif;}
        .exp-trans { font-style: italic; color: #555; margin-bottom: 10px; }

        .submit-btn {
            display: block; width: 100%; background: var(--secondary); color: var(--primary);
            font-size: 20px; font-weight: 800; padding: 20px; border: none; border-radius: 20px;
            cursor: pointer; box-shadow: 0 8px 0 #e1b12c; margin-top: 30px; transition: 0.1s;
        }
        .submit-btn:active { transform: translateY(8px); box-shadow: 0 0 0 #e1b12c; }

        /* Modal Result */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 100; justify-content: center; align-items: center;
        }
        .modal-content {
            background: white; padding: 40px; border-radius: 30px; text-align: center;
            width: 400px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); animation: popUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popUp { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .score-text { font-size: 48px; font-weight: 800; color: var(--primary); margin: 20px 0; }
        .msg-text { font-size: 20px; color: #555; margin-bottom: 30px; }
        .close-btn {
            background: var(--wrong); color: white; border: none; padding: 12px 30px; border-radius: 15px;
            font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 5px 0 #d63031;
        }

        .confetti { position: fixed; top: -10px; width: 12px; height: 12px; z-index: 999; animation: fall 2s linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }

    </style>
</head>
<body>

    <div class="bg-pattern"></div>

    <div class="top-bar">
        <div class="teacher-title">üë©‚Äçüè´ Ms Mai An ULIS</div>
        <div class="timer-container">
            <div id="timer">10:00</div>
            <button class="btn-control" id="start-btn" onclick="startTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
        </div>
    </div>

    <div class="main-container">
        <div class="pane left-pane">
            <h2>üß© ƒê·ªÄ B√ÄI: ƒêI·ªÄN T·ª™ V√ÄO CH·ªñ TR·ªêNG</h2>
            <p>IELTS SPEAKING PART 2: THE TOXIC WORKPLACE</p>

            <div class="reading-title">Ph·∫ßn 1: Kh·ªüi ƒë·∫ßu ng√¢y th∆° v√† Th·ª±c t·∫ø ph≈© ph√†ng</div>
            <div class="word-bank">Word Bank 1: make trade-offs | get traction | veteran | do a movie extra work | facebooking | college grad | undertake an entry-level job | bury yourself in something</div>
            <div class="reading-text">
                "As a fresh and naive <span class="blank-space">(1) .........</span>, I was desperate to build my resume, so I decided to <span class="blank-space">(2) .........</span> at an independent film studio. Initially, I thought I would just fetch coffee or <span class="blank-space">(3) .........</span> in the background. However, a kindly industry <span class="blank-space">(4) .........</span> warned me early on. He said if I wanted my career to <span class="blank-space">(5) .........</span>, I had to stop <span class="blank-space">(6) .........</span> during office hours and truly <span class="blank-space">(7) .........</span> (bury myself in my tasks). I realized I had to <span class="blank-space">(8) .........</span> regarding my free time if I wanted to survive there."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans1')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans1">
                "L√† m·ªôt sinh vi√™n m·ªõi t·ªët nghi·ªáp t∆∞∆°i tr·∫ª v√† ng√¢y th∆°, t√¥i r·∫•t khao kh√°t x√¢y d·ª±ng b·∫£n l√Ω l·ªãch c·ªßa m√¨nh, v√¨ v·∫≠y t√¥i quy·∫øt ƒë·ªãnh ƒë·∫£m nh·∫≠n m·ªôt c√¥ng vi·ªác c·∫•p th·∫•p t·∫°i m·ªôt x∆∞·ªüng phim ƒë·ªôc l·∫≠p. Ban ƒë·∫ßu, t√¥i nghƒ© m√¨nh s·∫Ω ch·ªâ ƒëi l·∫•y c√† ph√™ ho·∫∑c l√†m di·ªÖn vi√™n qu·∫ßn ch√∫ng ·ªü h·∫≠u c·∫£nh. Tuy nhi√™n, m·ªôt ng∆∞·ªùi k·ª≥ c·ª±u t·ªët b·ª•ng trong ng√†nh ƒë√£ c·∫£nh b√°o t√¥i t·ª´ s·ªõm. Anh ·∫•y n√≥i n·∫øu t√¥i mu·ªën s·ª± nghi·ªáp c·ªßa m√¨nh c√≥ b∆∞·ªõc ƒë√† ph√°t tri·ªÉn, t√¥i ph·∫£i ng·ª´ng l∆∞·ªõt Facebook trong gi·ªù l√†m vi·ªác v√† th·ª±c s·ª± v√πi m√¨nh v√†o c√¥ng vi·ªác. T√¥i nh·∫≠n ra m√¨nh ph·∫£i ƒë√°nh ƒë·ªïi th·ªùi gian r·∫£nh r·ªói n·∫øu mu·ªën t·ªìn t·∫°i ·ªü ƒë√≥."
            </div>

            <div class="reading-title">Ph·∫ßn 2: "Gia m√¥n b·∫•t h·∫°nh" v√† S·∫øp t·ªìi</div>
            <div class="word-bank">Word Bank 2: subjugate | estranged from | estranged wife | agenda | con | dysfunctional family | the epitome of something | coerce</div>
            <div class="reading-text">
                "The problem was the company itself. It was run by an incredibly <span class="blank-space">(9) .........</span>. The director was going through a bitter divorce and was completely <span class="blank-space">(10) .........</span> his <span class="blank-space">(11) .........</span>, which made him take his anger out on us. He always had a hidden <span class="blank-space">(12) .........</span> behind every decision. Honestly, he was <span class="blank-space">(13) .........</span> (the epitome of a toxic boss). He would constantly try to <span class="blank-space">(14) .........</span> the junior staff to assert dominance. He wouldn't hesitate to <span class="blank-space">(15) .........</span> employees into working unpaid overtime, and he would even <span class="blank-space">(16) .........</span> clients into paying for services we couldn't deliver."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans2')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans2">
                "V·∫•n ƒë·ªÅ n·∫±m ·ªü ch√≠nh c√¥ng ty. N√≥ ƒë∆∞·ª£c ƒëi·ªÅu h√†nh b·ªüi m·ªôt gia ƒë√¨nh c·ª±c k·ª≥ ph·ª©c t·∫°p v√† r·ªëi lo·∫°n. V·ªã ƒë·∫°o di·ªÖn ƒëang tr·∫£i qua m·ªôt cu·ªôc ly h√¥n cay ƒë·∫Øng v√† ho√†n to√†n xa c√°ch v·ªõi ng∆∞·ªùi v·ª£ ly th√¢n c·ªßa m√¨nh, ƒëi·ªÅu ƒë√≥ khi·∫øn √¥ng ta tr√∫t gi·∫≠n l√™n ch√∫ng t√¥i. √îng ta lu√¥n c√≥ m·ªôt ƒë·ªông c∆°/m·ª•c ƒë√≠ch n·∫•p sau m·ªçi quy·∫øt ƒë·ªãnh. Th√†nh th·∫≠t m√† n√≥i, √¥ng ta l√† hi·ªán th√¢n c·ªßa m·ªôt ng∆∞·ªùi s·∫øp ƒë·ªôc h·∫°i. √îng ta s·∫Ω li√™n t·ª•c c·ªë g·∫Øng khu·∫•t ph·ª•c c√°c nh√¢n vi√™n c·∫•p d∆∞·ªõi ƒë·ªÉ kh·∫≥ng ƒë·ªãnh s·ª± th·ªëng tr·ªã. √îng ta kh√¥ng ng·∫ßn ng·∫°i √©p bu·ªôc nh√¢n vi√™n l√†m th√™m gi·ªù kh√¥ng l∆∞∆°ng, v√† th·∫≠m ch√≠ c√≤n l·ª´a g·∫°t kh√°ch h√†ng tr·∫£ ti·ªÅn cho nh·ªØng d·ªãch v·ª• m√† ch√∫ng t√¥i kh√¥ng th·ªÉ cung c·∫•p."
            </div>

            <div class="reading-title">Ph·∫ßn 3: Nh·ªØng l·ªùi l∆∞∆°n l·∫πo v√† Tr√≤ ch∆°i khƒÉm</div>
            <div class="word-bank">Word Bank 3: convoluted | badger | a load of crap | sabotage | preach to sb | bring something up | escort | appease</div>
            <div class="reading-text">
                "Communication was impossible. Whenever I dared to <span class="blank-space">(17) .........</span> regarding my unpaid hours, he would give these ridiculously <span class="blank-space">(18) .........</span> explanations that were frankly just <span class="blank-space">(19) .........</span>. Instead of solving the issue, he would just <span class="blank-space">(20) .........</span> (preach to us) about 'passion and dedication' to <span class="blank-space">(21) .........</span> the angry crew. If you disagreed, he would <span class="blank-space">(22) .........</span> you with passive-aggressive emails or actively <span class="blank-space">(23) .........</span> your work. Once, I was assigned to <span class="blank-space">(24) .........</span> a VIP guest to the set, but he purposely gave me the wrong address to make me look incompetent."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans3')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans3">
                "Giao ti·∫øp l√† ƒëi·ªÅu kh√¥ng th·ªÉ. B·∫•t c·ª© khi n√†o t√¥i d√°m ƒë·ªÅ c·∫≠p ƒë·∫øn s·ªë gi·ªù l√†m vi·ªác kh√¥ng c√¥ng c·ªßa m√¨nh, √¥ng ta s·∫Ω ƒë∆∞a ra nh·ªØng l·ªùi gi·∫£i th√≠ch ph·ª©c t·∫°p n·ª±c c∆∞·ªùi m√† th·∫≥ng th·∫Øn m√† n√≥i th√¨ to√†n l√† r√°c r∆∞·ªüi v√¥ l√Ω. Thay v√¨ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ, √¥ng ta s·∫Ω ch·ªâ thuy·∫øt gi√°o ch√∫ng t√¥i v·ªÅ 'ƒëam m√™ v√† c·ªëng hi·∫øn' ƒë·ªÉ xoa d·ªãu ƒëo√†n l√†m phim ƒëang t·ª©c gi·∫≠n. N·∫øu b·∫°n kh√¥ng ƒë·ªìng √Ω, √¥ng ta s·∫Ω qu·∫•y r·∫ßy b·∫°n b·∫±ng nh·ªØng email g√¢y h·∫•n th·ª• ƒë·ªông ho·∫∑c ch·ªß ƒë·ªông ph√° ho·∫°i c√¥ng vi·ªác c·ªßa b·∫°n. C√≥ l·∫ßn, t√¥i ƒë∆∞·ª£c giao nhi·ªám v·ª• h·ªô t·ªëng m·ªôt v·ªã kh√°ch VIP ƒë·∫øn tr∆∞·ªùng quay, nh∆∞ng √¥ng ta c·ªë t√¨nh ƒë∆∞a sai ƒë·ªãa ch·ªâ ƒë·ªÉ khi·∫øn t√¥i tr√¥ng c√≥ v·∫ª b·∫•t t√†i."
            </div>

            <div class="reading-title">Ph·∫ßn 4: Ph·∫£n kh√°ng v√† Th√†nh qu·∫£</div>
            <div class="word-bank">Word Bank 4: take heed of | rock | by extension | accomplishment | all-time high | let it slide | take the consequences | barricade | boot</div>
            <div class="reading-text">
                "Eventually, I couldn't just <span class="blank-space">(25) .........</span> anymore. I decided to <span class="blank-space">(26) .........</span> my mentor's advice. When the boss threatened to <span class="blank-space">(27) .........</span> me off the project, I had to mentally <span class="blank-space">(28) .........</span> myself against his verbal abuse. I stood my ground, fully prepared to <span class="blank-space">(29) .........</span>. Surprisingly, standing up to a bully became my proudest personal <span class="blank-space">(30) .........</span> that year. Despite the drama, the final movie actually turned out to <span class="blank-space">(31) .........</span>! My confidence reached an <span class="blank-space">(32) .........</span>, and <span class="blank-space">(33) .........</span>, the experience made me much tougher and ready for any future career challenges."
            </div>
            <button class="btn-translate" onclick="toggleTranslation('trans4')">M·ªü d·ªãch ƒëo·∫°n n√†y üåü</button>
            <div class="translation-box" id="trans4">
                "Cu·ªëi c√πng, t√¥i kh√¥ng th·ªÉ c·ª© nh·∫Øm m·∫Øt cho qua th√™m n·ªØa. T√¥i quy·∫øt ƒë·ªãnh ch√∫ √Ω/nghe theo l·ªùi khuy√™n c·ªßa ng∆∞·ªùi c·ªë v·∫•n c·ªßa m√¨nh. Khi s·∫øp ƒëe d·ªça ƒëu·ªïi t√¥i kh·ªèi d·ª± √°n, t√¥i ƒë√£ ph·∫£i chu·∫©n b·ªã tinh th·∫ßn d·ª±ng l√™n r√†o ch·∫Øn ch·ªëng l·∫°i s·ª± l·∫°m d·ª•ng b·∫±ng l·ªùi n√≥i c·ªßa √¥ng ta. T√¥i gi·ªØ v·ªØng l·∫≠p tr∆∞·ªùng, ho√†n to√†n chu·∫©n b·ªã s·∫µn s√†ng ƒë·ªÉ g√°nh ch·ªãu h·∫≠u qu·∫£. ƒê√°ng ng·∫°c nhi√™n l√† vi·ªác ƒë·ª©ng l√™n ch·ªëng l·∫°i k·∫ª b·∫Øt n·∫°t ƒë√£ tr·ªü th√†nh th√†nh t·ª±u c√° nh√¢n ƒë√°ng t·ª± h√†o nh·∫•t c·ªßa t√¥i nƒÉm ƒë√≥. M·∫∑c d√π c√≥ nhi·ªÅu drama, nh∆∞ng b·ªô phim cu·ªëi c√πng h√≥a ra l·∫°i c·ª±c k·ª≥ th√†nh c√¥ng/tuy·ªát v·ªùi! S·ª± t·ª± tin c·ªßa t√¥i ƒë·∫°t m·ª©c cao nh·∫•t m·ªçi th·ªùi ƒë·∫°i, v√† suy r·ªông ra, tr·∫£i nghi·ªám n√†y ƒë√£ l√†m t√¥i tr·ªü n√™n c·ª©ng c·ªèi h∆°n r·∫•t nhi·ªÅu v√† s·∫µn s√†ng cho b·∫•t k·ª≥ th·ª≠ th√°ch ngh·ªÅ nghi·ªáp n√†o trong t∆∞∆°ng lai."
            </div>

            <h3 style="margin-top: 30px; color: var(--primary);">üìö Glossary (T·ª´ v·ª±ng h·ªçc thu·∫≠t B2-C2)</h3>
            <table class="glossary-table">
                <tr><th>Vocabulary</th><th>POS</th><th>Meaning (Vietnamese)</th></tr>
                <tr><td>Subjugate</td><td>Verb (v)</td><td>Khu·∫•t ph·ª•c, n√¥ d·ªãch h√≥a</td></tr>
                <tr><td>Coerce</td><td>Verb (v)</td><td>√âp bu·ªôc (b·∫±ng ƒëe d·ªça/√°p l·ª±c)</td></tr>
                <tr><td>Sabotage</td><td>Verb (v)</td><td>Ph√° ho·∫°i ng·∫ßm, c·ªë t√¨nh l√†m h·ªèng</td></tr>
                <tr><td>Convoluted</td><td>Adj</td><td>R·∫•t ph·ª©c t·∫°p, r·∫Øc r·ªëi, kh√≥ hi·ªÉu</td></tr>
                <tr><td>Epitome</td><td>Noun (n)</td><td>T·∫•m g∆∞∆°ng ho√†n h·∫£o, h√¨nh ·∫£nh thu nh·ªè</td></tr>
                <tr><td>Estranged</td><td>Adj</td><td>Xa c√°ch, ly th√¢n (v·ª£/ch·ªìng)</td></tr>
                <tr><td>Dysfunctional</td><td>Adj</td><td>R·ªëi lo·∫°n, kh√¥ng b√¨nh th∆∞·ªùng (ch·ªâ gia ƒë√¨nh)</td></tr>
                <tr><td>Appease</td><td>Verb (v)</td><td>Xoa d·ªãu, d·ªó d√†nh, nh∆∞·ª£ng b·ªô</td></tr>
                <tr><td>Badger</td><td>Verb (v)</td><td>Qu·∫•y r·∫ßy, l√†m phi·ªÅn li√™n t·ª•c</td></tr>
                <tr><td>Barricade</td><td>Verb (v)</td><td>L·∫≠p r√†o ch·∫Øn, ngƒÉn ch·∫∑n (nghƒ©a b√≥ng: t·ª± b·∫£o v·ªá)</td></tr>
                <tr><td>Con</td><td>Verb (v)</td><td>L·ª´a ƒë·∫£o, l·ª´a g·∫°t l·∫•y ti·ªÅn</td></tr>
            </table>
        </div>

        <div class="pane right-pane">
            <h2 style="color: var(--primary); margin-bottom: 20px;">üéÆ TR·∫ÆC NGHI·ªÜM T∆Ø∆†NG T√ÅC</h2>
            <div id="quiz-container"></div>
            <button class="submit-btn" onclick="submitQuiz()">N·ªòP B√ÄI T·ªîNG K·∫æT üèÜ</button>
        </div>
    </div>

    <div class="modal-overlay" id="resultModal">
        <div class="modal-content">
            <h2>üéâ HO√ÄN TH√ÄNH B√ÄI TEST üéâ</h2>
            <div class="score-text" id="finalScore">0/33</div>
            <div class="msg-text" id="feedbackMsg">L√†m t·ªët l·∫Øm!</div>
            <button class="close-btn" onclick="closeModal()">Xem l·∫°i ƒë√°p √°n</button>
        </div>
    </div>

<script>
    // --- AUDIO SYSTEM ---
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    function playCorrect() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode); gainNode.connect(audioCtx.destination);
        osc.type = 'sine';
        osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
        osc.frequency.setValueAtTime(659.25, audioCtx.currentTime + 0.1); // E5
        gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.05);
        gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3);
        osc.start(); osc.stop(audioCtx.currentTime + 0.3);
    }

    function playWrong() {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode); gainNode.connect(audioCtx.destination);
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(300, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.4);
        gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.1);
        gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.4);
        osc.start(); osc.stop(audioCtx.currentTime + 0.4);
    }

    // --- EFFECTS ---
    function triggerConfetti() {
        const colors = ['#f6b93b', '#00D26A', '#e55039', '#1e3799', '#4a69bd'];
        for(let i=0; i<40; i++) {
            let conf = document.createElement('div');
            conf.className = 'confetti';
            conf.style.left = Math.random() * 100 + 'vw';
            conf.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
            conf.style.animationDuration = (Math.random() * 1 + 1.5) + 's';
            document.body.appendChild(conf);
            setTimeout(() => conf.remove(), 3000);
        }
    }

    // --- TIMER SYSTEM ---
    let time = 600; 
    let timerInterval;
    let isRunning = false;

    function startTimer() {
        const btn = document.getElementById('start-btn');
        if(!isRunning) {
            isRunning = true;
            btn.innerText = "T·∫†M D·ª™NG";
            btn.style.background = "#FF4757";
            btn.style.boxShadow = "0 4px 0 #d63031";
            timerInterval = setInterval(() => {
                time--;
                let m = Math.floor(time / 60);
                let s = time % 60;
                document.getElementById('timer').innerText = `${m}:${s<10?'0':''}${s}`;
                if(time <= 0) {
                    clearInterval(timerInterval);
                    alert("‚è∞ ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha.");
                }
            }, 1000);
        } else {
            isRunning = false;
            clearInterval(timerInterval);
            btn.innerText = "TI·∫æP T·ª§C";
            btn.style.background = "var(--primary)";
            btn.style.boxShadow = "0 4px 0 #0c2461";
        }
    }

    function toggleTranslation(id) {
        let el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    // --- QUIZ DATA & LOGIC ---
    const rawData = [
        { q: "As a fresh and naive (1) _________,", a: "college grad", f: ["veteran", "estranged wife", "con"], trans: "L√† m·ªôt sinh vi√™n m·ªõi t·ªët nghi·ªáp t∆∞∆°i tr·∫ª v√† ng√¢y th∆°,", r: "C·ª•m 'fresh and naive' (t∆∞∆°i tr·∫ª/m·ªõi m·∫ª v√† ng√¢y th∆°) th∆∞·ªùng ƒëi c√πng v·ªõi sinh vi√™n m·ªõi ra tr∆∞·ªùng (college grad)." },
        { q: "I was desperate to build my resume, so I decided to (2) _________ at an independent film studio.", a: "undertake an entry-level job", f: ["get traction", "make trade-offs", "do a movie extra work"], trans: "t√¥i r·∫•t khao kh√°t x√¢y d·ª±ng l√Ω l·ªãch, v√¨ v·∫≠y t√¥i quy·∫øt ƒë·ªãnh ƒë·∫£m nh·∫≠n m·ªôt c√¥ng vi·ªác c·∫•p th·∫•p t·∫°i m·ªôt x∆∞·ªüng phim.", r: "ƒê·ªÉ x√¢y d·ª±ng CV (build resume) khi m·ªõi ra tr∆∞·ªùng, ng∆∞·ªùi ta th∆∞·ªùng ƒë·∫£m nh·∫≠n c√¥ng vi·ªác c·∫•p th·∫•p nh·∫•t (entry-level job)." },
        { q: "Initially, I thought I would just fetch coffee or (3) _________ in the background.", a: "do a movie extra work", f: ["bring something up", "bury yourself in something", "let it slide"], trans: "Ban ƒë·∫ßu, t√¥i nghƒ© m√¨nh s·∫Ω ch·ªâ ƒëi l·∫•y c√† ph√™ ho·∫∑c l√†m di·ªÖn vi√™n qu·∫ßn ch√∫ng ·ªü h·∫≠u c·∫£nh.", r: "L√†m vi·ªác t·∫°i x∆∞·ªüng phim, vi·ªác ƒëi l·∫°i ·ªü 'h·∫≠u c·∫£nh' (background) √°m ch·ªâ l√†m di·ªÖn vi√™n qu·∫ßn ch√∫ng (movie extra work)." },
        { q: "However, a kindly industry (4) _________ warned me early on.", a: "veteran", f: ["college grad", "dysfunctional family", "agenda"], trans: "Tuy nhi√™n, m·ªôt ng∆∞·ªùi k·ª≥ c·ª±u t·ªët b·ª•ng trong ng√†nh ƒë√£ c·∫£nh b√°o t√¥i t·ª´ s·ªõm.", r: "Tr√°i ng∆∞·ª£c v·ªõi l√≠nh m·ªõi (college grad) l√† ng∆∞·ªùi k·ª≥ c·ª±u c√≥ kinh nghi·ªám trong ng√†nh (industry veteran)." },
        { q: "He said if I wanted my career to (5) _________,", a: "get traction", f: ["rock", "sabotage", "badger"], trans: "Anh ·∫•y n√≥i n·∫øu t√¥i mu·ªën s·ª± nghi·ªáp c·ªßa m√¨nh c√≥ b∆∞·ªõc ƒë√† ph√°t tri·ªÉn,", r: "Idiom 'get traction' (ƒë·∫°t ƒë∆∞·ª£c l·ª±c k√©o) nghƒ©a b√≥ng l√† b·∫Øt ƒë·∫ßu c√≥ s·ª± ch√∫ √Ω, c√≥ ƒë√† ph√°t tri·ªÉn." },
        { q: "I had to stop (6) _________ during office hours", a: "facebooking", f: ["freeloading", "sabotaging", "coercing"], trans: "t√¥i ph·∫£i ng·ª´ng l∆∞·ªõt Facebook trong gi·ªù l√†m vi·ªác", r: "H√†nh ƒë·ªông l∆∞·ªõt m·∫°ng x√£ h·ªôi l√†m m·∫•t t·∫≠p trung: 'facebooking'." },
        { q: "and truly (7) _________ (bury myself in my tasks).", a: "bury yourself in something", f: ["make trade-offs", "let it slide", "take heed of"], trans: "v√† th·ª±c s·ª± v√πi m√¨nh v√†o c√¥ng vi·ªác.", r: "Th√†nh ng·ªØ 'bury yourself in something' nghƒ©a l√† c·∫Øm ƒë·∫ßu/v√πi m√¨nh t·∫≠p trung cao ƒë·ªô v√†o vi·ªác g√¨." },
        { q: "I realized I had to (8) _________ regarding my free time if I wanted to survive there.", a: "make trade-offs", f: ["take the consequences", "get traction", "appease"], trans: "T√¥i nh·∫≠n ra m√¨nh ph·∫£i ƒë√°nh ƒë·ªïi th·ªùi gian r·∫£nh r·ªói n·∫øu mu·ªën t·ªìn t·∫°i ·ªü ƒë√≥.", r: "'Make trade-offs' nghƒ©a l√† th·ª±c hi·ªán s·ª± ƒë√°nh ƒë·ªïi (ch·∫•p nh·∫≠n m·∫•t c√°i n√†y ƒë·ªÉ ƒë∆∞·ª£c c√°i kia)." },
        { q: "The problem was the company itself. It was run by an incredibly (9) _________.", a: "dysfunctional family", f: ["veteran", "college grad", "the epitome of something"], trans: "N√≥ ƒë∆∞·ª£c ƒëi·ªÅu h√†nh b·ªüi m·ªôt gia ƒë√¨nh c·ª±c k·ª≥ ph·ª©c t·∫°p v√† r·ªëi lo·∫°n.", r: "M√¥i tr∆∞·ªùng ƒë·ªôc h·∫°i do ƒëi·ªÅu h√†nh b·ªüi gia ƒë√¨nh c√≥ nhi·ªÅu v·∫•n ƒë·ªÅ: 'dysfunctional family'." },
        { q: "The director was going through a bitter divorce and was completely (10) _________ his...", a: "estranged from", f: ["petrified of", "short of", "badgering"], trans: "V·ªã ƒë·∫°o di·ªÖn ƒëang tr·∫£i qua ly h√¥n v√† ho√†n to√†n xa c√°ch/ly th√¢n v·ªõi...", r: "Gi·ªõi t·ª´ 'from' ƒëi k√®m 'estranged from' nghƒ©a l√† ly th√¢n, c·∫Øt ƒë·ª©t quan h·ªá." },
        { q: "...his (11) _________, which made him take his anger out on us.", a: "estranged wife", f: ["dysfunctional family", "veteran", "college grad"], trans: "...ng∆∞·ªùi v·ª£ ly th√¢n c·ªßa m√¨nh, ƒëi·ªÅu ƒë√≥ khi·∫øn √¥ng ta tr√∫t gi·∫≠n l√™n ch√∫ng t√¥i.", r: "Ti·∫øp n·ªëi c√¢u tr∆∞·ªõc, 'estranged wife' l√† ng∆∞·ªùi v·ª£ ly th√¢n." },
        { q: "He always had a hidden (12) _________ behind every decision.", a: "agenda", f: ["accomplishment", "trade-off", "barricade"], trans: "√îng ta lu√¥n c√≥ m·ªôt ƒë·ªông c∆°/m·ª•c ƒë√≠ch n·∫•p sau m·ªçi quy·∫øt ƒë·ªãnh.", r: "C·ª•m 'hidden agenda' l√† m·ªôt c·ª•m c·ªë ƒë·ªãnh ch·ªâ m·ª•c ƒë√≠ch m·ªù √°m, √Ω ƒë·ªì ·∫©n gi·∫•u." },
        { q: "Honestly, he was (13) _________ (the epitome of a toxic boss).", a: "the epitome of something", f: ["a load of crap", "dysfunctional family", "all-time high"], trans: "Th√†nh th·∫≠t m√† n√≥i, √¥ng ta l√† hi·ªán th√¢n c·ªßa m·ªôt ng∆∞·ªùi s·∫øp ƒë·ªôc h·∫°i.", r: "'The epitome of' nghƒ©a l√† v√≠ d·ª• ho√†n h·∫£o, hi·ªán th√¢n c·ªßa ƒëi·ªÅu g√¨ ƒë√≥." },
        { q: "He would constantly try to (14) _________ the junior staff to assert dominance.", a: "subjugate", f: ["escort", "appease", "coerce"], trans: "√îng ta s·∫Ω li√™n t·ª•c c·ªë g·∫Øng khu·∫•t ph·ª•c c√°c nh√¢n vi√™n c·∫•p d∆∞·ªõi ƒë·ªÉ kh·∫≥ng ƒë·ªãnh s·ª± th·ªëng tr·ªã.", r: "'Subjugate' (khu·∫•t ph·ª•c/b·∫Øt ph·ª•c t√πng) ƒëi chung v·ªõi √Ω nghƒ©a assert dominance (kh·∫≥ng ƒë·ªãnh th·ªëng tr·ªã)." },
        { q: "He wouldn't hesitate to (15) _________ employees into working unpaid overtime,", a: "coerce", f: ["con", "badger", "sabotage"], trans: "√îng ta kh√¥ng ng·∫ßn ng·∫°i √©p bu·ªôc nh√¢n vi√™n l√†m th√™m gi·ªù kh√¥ng l∆∞∆°ng,", r: "C·∫•u tr√∫c 'coerce sb into doing sth' (√©p bu·ªôc ai l√†m g√¨ b·∫±ng √°p l·ª±c/ƒëe d·ªça)." },
        { q: "and he would even (16) _________ clients into paying for services we couldn't deliver.", a: "con", f: ["boot", "rock", "appease"], trans: "v√† th·∫≠m ch√≠ c√≤n l·ª´a g·∫°t kh√°ch h√†ng tr·∫£ ti·ªÅn cho nh·ªØng d·ªãch v·ª• kh√¥ng th·ªÉ cung c·∫•p.", r: "'Con sb into doing sth' (l·ª´a g·∫°t ai ƒë√≥ l√†m g√¨ l·∫•y ti·ªÅn)." },
        { q: "Whenever I dared to (17) _________ regarding my unpaid hours,", a: "bring something up", f: ["let it slide", "take heed of", "take the consequences"], trans: "B·∫•t c·ª© khi n√†o t√¥i d√°m ƒë·ªÅ c·∫≠p ƒë·∫øn s·ªë gi·ªù l√†m vi·ªác kh√¥ng c√¥ng c·ªßa m√¨nh,", r: "Phrasal verb 'bring up' mang nghƒ©a ƒë·ªÅ c·∫≠p/n√™u ra m·ªôt v·∫•n ƒë·ªÅ ƒë·ªÉ th·∫£o lu·∫≠n." },
        { q: "he would give these ridiculously (18) _________ explanations", a: "convoluted", f: ["estranged", "dysfunctional", "dingy"], trans: "√¥ng ta s·∫Ω ƒë∆∞a ra nh·ªØng l·ªùi gi·∫£i th√≠ch ph·ª©c t·∫°p n·ª±c c∆∞·ªùi", r: "T√≠nh t·ª´ 'convoluted' ch·ªâ s·ª± r∆∞·ªùm r√†, v·∫∑n v·∫πo, ph·ª©c t·∫°p kh√≥ hi·ªÉu (c·ªßa l·ªùi n√≥i/l·ªùi gi·∫£i th√≠ch)." },
        { q: "that were frankly just (19) _________.", a: "a load of crap", f: ["all-time high", "the epitome of something", "pure conscience"], trans: "m√† th·∫≥ng th·∫Øn m√† n√≥i th√¨ to√†n l√† r√°c r∆∞·ªüi v√¥ l√Ω.", r: "Idiom 'a load of crap' (slang) mang nghƒ©a l√† l·ªùi d·ªëi tr√°, v√¥ nghƒ©a, r√°c r∆∞·ªüi." },
        { q: "Instead of solving the issue, he would just (20) _________ (preach to us) about 'passion'", a: "preach to sb", f: ["badger", "subjugate", "con"], trans: "Thay v√¨ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ, √¥ng ta s·∫Ω ch·ªâ thuy·∫øt gi√°o ch√∫ng t√¥i v·ªÅ 'ƒëam m√™'", r: "'Preach to sb' l√† gi·∫£ng ƒë·∫°o, thuy·∫øt gi√°o (th∆∞·ªùng mang √Ω ti√™u c·ª±c ch√¢m bi·∫øm)." },
        { q: "to (21) _________ the angry crew.", a: "appease", f: ["sabotage", "escort", "coerce"], trans: "ƒë·ªÉ xoa d·ªãu ƒëo√†n l√†m phim ƒëang t·ª©c gi·∫≠n.", r: "'Appease' mang nghƒ©a xoa d·ªãu (s·ª± t·ª©c gi·∫≠n) b·∫±ng c√°ch nh∆∞·ª£ng b·ªô ho·∫∑c h·ª©a h·∫πn." },
        { q: "If you disagreed, he would (22) _________ you with passive-aggressive emails", a: "badger", f: ["escort", "con", "appease"], trans: "N·∫øu b·∫°n kh√¥ng ƒë·ªìng √Ω, √¥ng ta s·∫Ω qu·∫•y r·∫ßy b·∫°n b·∫±ng nh·ªØng email g√¢y h·∫•n th·ª• ƒë·ªông", r: "'Badger' l√† ƒë·ªông t·ª´ mang nghƒ©a qu·∫•y r·∫ßy, l√†m phi·ªÅn ai ƒë√≥ li√™n t·ª•c." },
        { q: "or actively (23) _________ your work.", a: "sabotage", f: ["barricade", "rock", "boot"], trans: "ho·∫∑c ch·ªß ƒë·ªông ph√° ho·∫°i c√¥ng vi·ªác c·ªßa b·∫°n.", r: "'Sabotage' nghƒ©a l√† c·ªë √Ω ph√° ho·∫°i, l√†m h·ªèng." },
        { q: "Once, I was assigned to (24) _________ a VIP guest to the set,", a: "escort", f: ["con", "subjugate", "coerce"], trans: "C√≥ l·∫ßn, t√¥i ƒë∆∞·ª£c giao nhi·ªám v·ª• h·ªô t·ªëng m·ªôt v·ªã kh√°ch VIP ƒë·∫øn tr∆∞·ªùng quay,", r: "'Escort' (h·ªô t·ªëng/d·∫´n ƒë∆∞·ªùng) ph√π h·ª£p v·ªõi b·ªëi c·∫£nh ƒë∆∞a ƒë√≥n kh√°ch VIP." },
        { q: "Eventually, I couldn't just (25) _________ anymore.", a: "let it slide", f: ["make trade-offs", "take the consequences", "get traction"], trans: "Cu·ªëi c√πng, t√¥i kh√¥ng th·ªÉ c·ª© nh·∫Øm m·∫Øt cho qua th√™m n·ªØa.", r: "Idiom 'let it slide' nghƒ©a l√† l√†m ng∆°, b·ªè qua kh√¥ng x·ª≠ l√Ω v·∫•n ƒë·ªÅ." },
        { q: "I decided to (26) _________ my mentor's advice.", a: "take heed of", f: ["bring something up", "let it slide", "preach to sb"], trans: "T√¥i quy·∫øt ƒë·ªãnh ch√∫ √Ω/nghe theo l·ªùi khuy√™n c·ªßa ng∆∞·ªùi c·ªë v·∫•n.", r: "Th√†nh ng·ªØ 'take heed of' = pay attention to (ch√∫ √Ω ƒë·∫øn/l√†m theo l·ªùi khuy√™n)." },
        { q: "When the boss threatened to (27) _________ me off the project,", a: "boot", f: ["escort", "sabotage", "badger"], trans: "Khi s·∫øp ƒëe d·ªça ƒë√°/ƒëu·ªïi t√¥i kh·ªèi d·ª± √°n,", r: "'Boot sb off/out' l√† t·ª´ l√≥ng mang nghƒ©a ƒëu·ªïi c·ªï, sa th·∫£i." },
        { q: "I had to mentally (28) _________ myself against his verbal abuse.", a: "barricade", f: ["subjugate", "appease", "coerce"], trans: "t√¥i ƒë√£ ph·∫£i chu·∫©n b·ªã tinh th·∫ßn d·ª±ng l√™n r√†o ch·∫Øn ch·ªëng l·∫°i s·ª± l·∫°m d·ª•ng b·∫±ng l·ªùi n√≥i.", r: "'Barricade' (d·ª±ng r√†o ch·∫Øn) ·ªü ƒë√¢y d√πng theo nghƒ©a b√≥ng l√† t·ª± b·∫£o v·ªá t√¢m l√Ω b·∫£n th√¢n." },
        { q: "I stood my ground, fully prepared to (29) _________.", a: "take the consequences", f: ["make trade-offs", "get traction", "let it slide"], trans: "T√¥i gi·ªØ v·ªØng l·∫≠p tr∆∞·ªùng, ho√†n to√†n chu·∫©n b·ªã s·∫µn s√†ng ƒë·ªÉ g√°nh ch·ªãu h·∫≠u qu·∫£.", r: "C·ª•m 'take the consequences' (ch·ªãu h·∫≠u qu·∫£) ƒëi v·ªõi √Ω th·ª©c tr√°ch nhi·ªám." },
        { q: "Surprisingly, standing up to a bully became my proudest personal (30) _________ that year.", a: "accomplishment", f: ["agenda", "trade-off", "load of crap"], trans: "ƒê√°ng ng·∫°c nhi√™n l√† vi·ªác ƒë·ª©ng l√™n... ƒë√£ tr·ªü th√†nh th√†nh t·ª±u c√° nh√¢n ƒë√°ng t·ª± h√†o nh·∫•t.", r: "'Accomplishment' (th√†nh t·ª±u) ph√π h·ª£p sau t√≠nh t·ª´ 'proudest personal'." },
        { q: "Despite the drama, the final movie actually turned out to (31) _________!", a: "rock", f: ["get traction", "boot", "let it slide"], trans: "M·∫∑c d√π c√≥ nhi·ªÅu drama, nh∆∞ng b·ªô phim cu·ªëi c√πng h√≥a ra l·∫°i c·ª±c k·ª≥ tuy·ªát v·ªùi!", r: "ƒê·ªông t·ª´ 'rock' trong vƒÉn phong th√¢n m·∫≠t nghƒ©a l√† r·∫•t tuy·ªát, r·∫•t th√†nh c√¥ng (The movie rocks!)." },
        { q: "My confidence reached an (32) _________,", a: "all-time high", f: ["accomplishment", "epitome", "agenda"], trans: "S·ª± t·ª± tin c·ªßa t√¥i ƒë·∫°t m·ª©c cao nh·∫•t m·ªçi th·ªùi ƒë·∫°i,", r: "C·ª•m 'reach an all-time high' ch·ªâ m·ª©c ƒë·ªô cao k·ª∑ l·ª•c ch∆∞a t·ª´ng c√≥." },
        { q: "and (33) _________, the experience made me much tougher...", a: "by extension", f: ["as of late", "off and on", "purely"], trans: "v√† suy r·ªông ra, tr·∫£i nghi·ªám n√†y ƒë√£ l√†m t√¥i tr·ªü n√™n c·ª©ng c·ªèi h∆°n r·∫•t nhi·ªÅu...", r: "C·ª•m 'by extension' mang √Ω nghƒ©a suy r·ªông ra, k√©o theo ƒë√≥." }
    ];

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    let userAnswers = {}; 

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        rawData.forEach((item, index) => {
            let qNum = index + 1;
            let options = [item.a, ...item.f];
            options = shuffleArray(options); 

            let card = document.createElement('div');
            card.className = 'question-card';
            card.id = `qcard-${qNum}`;
            
            let html = `<div class="question-text">C√¢u ${qNum}: ${item.q.replace(`(${qNum}) _________`, `<span style="color:var(--primary)">(${qNum}) .........</span>`)}</div>
                        <div class="options-grid">`;
            
            let labels = ['A', 'B', 'C', 'D'];
            options.forEach((opt, i) => {
                html += `<button class="option-btn" onclick="checkAnswer(${qNum}, this, '${opt}', '${item.a}')">
                            <b>${labels[i]}.</b> ${opt}
                         </button>`;
            });

            html += `</div>
                     <div class="explanation-box" id="exp-${qNum}">
                        <h4>üìò GI·∫¢I TH√çCH CHI TI·∫æT:</h4>
                        <div class="exp-trans"><b>D·ªãch c√¢u:</b> "${item.trans}"</div>
                        <div class="exp-vocab"><b>T·∫°i sao ch·ªçn ƒë√°p √°n n√†y?</b><br>${item.r}</div>
                     </div>`;
            card.innerHTML = html;
            container.appendChild(card);
        });
    }

    function checkAnswer(qNum, btn, selected, correct) {
        if(userAnswers[qNum] !== undefined) return; 

        let buttons = btn.parentElement.querySelectorAll('.option-btn');
        
        if(selected === correct) {
            btn.classList.add('correct');
            playCorrect();
            triggerConfetti();
            userAnswers[qNum] = 1;
        } else {
            btn.classList.add('wrong');
            playWrong();
            userAnswers[qNum] = 0;
            buttons.forEach(b => {
                if(b.innerText.includes(correct)) {
                    b.classList.add('correct');
                }
            });
        }
        
        buttons.forEach(b => b.style.pointerEvents = 'none');
        document.getElementById(`exp-${qNum}`).style.display = 'block';
        
        let blanks = document.querySelectorAll('.blank-space');
        if(blanks[qNum-1]) {
            blanks[qNum-1].innerText = `(${qNum}) ${correct}`;
            blanks[qNum-1].style.color = (selected === correct) ? 'var(--correct)' : 'var(--wrong)';
        }
    }

    function submitQuiz() {
        let totalAnswered = Object.keys(userAnswers).length;
        if(totalAnswered < rawData.length) {
            let c = confirm(`B·∫°n m·ªõi l√†m ${totalAnswered}/${rawData.length} c√¢u. B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i?`);
            if(!c) return;
        }

        clearInterval(timerInterval);

        let score = 0;
        for(let key in userAnswers) { score += userAnswers[key]; }
        
        document.getElementById('finalScore').innerText = `${score}/${rawData.length}`;
        let msg = "";
        let pct = score / rawData.length;
        if(pct === 1) msg = "Qu√° ƒë·ªânh! C·∫•p ƒë·ªô B·∫≠c th·∫ßy (Master Level) üåü";
        else if(pct >= 0.8) msg = "L√†m t·ªët l·∫Øm! Ki·∫øn th·ª©c c·ªßa b·∫°n r·∫•t v·ªØng! üî•";
        else if(pct >= 0.5) msg = "C·ªë l√™n nh√©! H√£y ƒë·ªçc k·ªπ gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n! üí™";
        else msg = "ƒê·ª´ng n·∫£n ch√≠! H·ªçc t·ª´ v·ª±ng l√† m·ªôt qu√° tr√¨nh d√†i! üê¢";

        document.getElementById('feedbackMsg').innerText = msg;
        document.getElementById('resultModal').style.display = 'flex';
        triggerConfetti();
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

    window.onload = renderQuiz;
</script>

</body>
</html>