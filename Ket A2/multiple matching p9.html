<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms Mai An ULIS - TV Shows Reading</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Cinema & Entertainment Theme */
            --primary: #8e44ad;      /* Midnight Purple */
            --secondary: #e74c3c;    /* Red Carpet */
            --accent: #f1c40f;       /* Popcorn Yellow */
            --correct: #27ae60;      /* Emerald Green */
            --wrong: #c0392b;        /* Dark Red */
            --text-dark: #2c3e50;
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
        }

        /* 1. L·ªöP N·ªÄN ANIMATED GRADIENT (M∆Ø·ª¢T M√Ä) */
        body {
            overflow: hidden;
            color: var(--text-dark);
            background: linear-gradient(-45deg, #9b59b6, #34495e, #e74c3c, #f39c12);
            background-size: 400% 400%;
            animation: smoothGradient 20s ease infinite;
            height: 100vh;
            position: relative;
        }

        @keyframes smoothGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 2. L·ªöP H·ªåA TI·∫æT SVG TR√îI N·ªîI ƒê·ªòC L·∫¨P */
        .pattern-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Emojis: TV, Popcorn, Clapperboard, Drama Masks */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='250'%3E%3Ctext x='20' y='60' font-size='45'%3Eüì∫%3C/text%3E%3Ctext x='150' y='120' font-size='40'%3Eüçø%3C/text%3E%3Ctext x='40' y='210' font-size='45'%3Eüé¨%3C/text%3E%3Ctext x='180' y='230' font-size='35'%3Eüé≠%3C/text%3E%3C/svg%3E");
            opacity: 0.25;
            pointer-events: none;
            z-index: 1;
            animation: floatSVG 45s linear infinite;
        }

        @keyframes floatSVG {
            from { background-position: 0 0; }
            to { background-position: 600px 600px; }
        }

        /* TOP CONTROL BAR */
        header {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 6px 20px rgba(142, 68, 173, 0.3);
            border-bottom: 5px solid var(--accent);
        }

        .header-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn-action {
            padding: 12px 25px;
            border: none;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 rgba(0,0,0,0.15);
        }

        .btn-start { background-color: var(--accent); color: #d35400; text-shadow: 1px 1px 0 rgba(255,255,255,0.5); }
        .btn-start:active { transform: translateY(6px); box-shadow: none; }

        #timer-display {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
            background: #f5eef8;
            padding: 5px 20px;
            border-radius: 15px;
            border: 3px dashed var(--primary);
            min-width: 120px;
            text-align: center;
        }

        /* SPLIT SCREEN */
        .main-container {
            display: flex;
            height: calc(100vh - 85px);
            position: relative;
            z-index: 5;
        }

        .panel {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
        }

        .left-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(15px);
            border-right: 4px dashed var(--primary);
        }

        /* READING CONTENT */
        .passage-title {
            font-size: 2.8rem;
            color: var(--primary);
            margin-bottom: 25px;
            text-align: center;
            font-weight: 900;
            text-shadow: 2px 2px 0px white;
        }

        .show-card {
            background: white;
            padding: 25px;
            border-radius: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 15px rgba(0,0,0,0.05);
            border-left: 6px solid var(--secondary);
            font-size: 1.2rem;
            line-height: 1.7;
        }

        .show-name {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 20px;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: 900;
            margin-bottom: 15px;
            box-shadow: 0 4px 0 #5b2c6f;
        }

        .btn-translate {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1rem;
            margin-top: 15px;
            cursor: pointer;
            box-shadow: 0 5px 0 #922b21;
            transition: 0.2s;
        }
        .btn-translate:active { transform: translateY(5px); box-shadow: none; }

        .translation-text {
            display: none;
            margin-top: 20px;
            padding: 15px 20px;
            background: #fdf2e9;
            border-radius: 10px;
            font-size: 1.15rem;
            color: #922b21;
            font-weight: 700;
            border: 2px dashed var(--accent);
        }

        /* GLOSSARY */
        .glossary-wrapper {
            background: white;
            border-radius: 25px;
            padding: 25px;
            margin-top: 40px;
            border: 4px solid var(--primary);
            box-shadow: 0 10px 0 rgba(142, 68, 173, 0.2);
        }
        .glossary-title {
            color: var(--primary);
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 900;
        }
        table { width: 100%; border-collapse: collapse; font-size: 1.1rem; }
        th, td { padding: 15px; text-align: left; border-bottom: 2px dashed #bdc3c7; }
        th { background: var(--primary); color: white; border-radius: 10px; font-size: 1.2rem;}
        tr:hover td { background: #f5eef8; font-weight: 700; color: var(--primary); cursor: pointer; }

        /* QUIZ CARDS */
        .question-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 12px 0 rgba(0,0,0,0.08);
            border: 4px solid #fff;
            transition: all 0.3s;
        }
        .question-card:hover { transform: translateY(-5px); border-color: var(--primary); }

        .question-text {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--text-dark);
            margin-bottom: 25px;
        }

        .options-grid { display: flex; flex-direction: row; flex-wrap: wrap; gap: 15px; }

        .option-btn {
            flex: 1;
            min-width: 130px;
            background: #ecf0f1;
            border: 3px solid #bdc3c7;
            padding: 18px 20px;
            border-radius: 18px;
            font-size: 1.25rem;
            font-weight: 900;
            color: #2c3e50;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 #bdc3c7;
        }
        
        .option-btn:hover:not(:disabled) {
            transform: scale(1.05);
            background: white;
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: 0 6px 0 var(--primary);
        }

        .option-btn:active:not(:disabled) { transform: translateY(6px); box-shadow: none; }
        .option-btn.correct { background: var(--correct); border-color: #1e8449; color: white; box-shadow: 0 6px 0 #1e8449; }
        .option-btn.wrong { background: var(--wrong); border-color: #922b21; color: white; box-shadow: 0 6px 0 #922b21; animation: shake 0.4s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-2deg); }
            75% { transform: translateX(10px) rotate(2deg); }
        }

        /* DETAILED EXPLANATION BOX */
        .explanation-box {
            display: none;
            margin-top: 25px;
            padding: 20px;
            background: #fff9c4;
            border: 4px dashed var(--accent);
            border-radius: 15px;
            animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }
        .explanation-box h4 { color: #d35400; margin-bottom: 15px; font-size: 1.3rem; font-weight: 900; }
        .explanation-box p { margin-bottom: 10px; font-size: 1.15rem; line-height: 1.6; color: #2d3436;}
        .explanation-box .highlight { background: var(--accent); color: #2d3436; padding: 2px 8px; border-radius: 5px; font-weight: bold; }

        /* SUBMIT BUTTON */
        .btn-submit {
            display: block; width: 100%;
            background: var(--primary); color: white;
            font-size: 1.8rem; font-weight: 900;
            padding: 25px; border: none; border-radius: 25px;
            cursor: pointer; box-shadow: 0 10px 0 #5b2c6f;
            margin-top: 30px; transition: all 0.2s;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .btn-submit:hover { transform: scale(1.02); }
        .btn-submit:active { transform: translateY(10px); box-shadow: none; }

        /* MODAL POPUP */
        #result-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 100; justify-content: center; align-items: center; backdrop-filter: blur(8px);
        }
        .modal-content {
            background: white; padding: 50px; border-radius: 40px; text-align: center;
            max-width: 550px; width: 90%; border: 8px solid var(--accent);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes popIn { 0% { transform: scale(0.3) rotate(-10deg); opacity: 0; } 100% { transform: scale(1) rotate(0); opacity: 1; } }
        
        .score-circle {
            width: 180px; height: 180px; background: var(--primary); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 4.5rem; font-weight: 900; color: white; margin: 0 auto 25px;
            border: 10px solid var(--accent); box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar { width: 14px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 20px; border: 3px solid white; }
        ::-webkit-scrollbar-thumb:hover { background: #5b2c6f; }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
    </style>
</head>
<body>

    <div class="pattern-overlay"></div>
    <canvas id="confetti-canvas"></canvas>

    <header>
        <div class="header-title">üé¨ Ms Mai An ULIS | Cinema Challenge</div>
        <div class="timer-container">
            <div id="timer-display">10:00</div>
            <button class="btn-action btn-start" id="btn-timer" onclick="toggleTimer()">‚ñ∂ B·∫ÆT ƒê·∫¶U XEM PHIM</button>
        </div>
    </header>

    <div class="main-container">
        <div class="panel left-panel">
            <h1 class="passage-title">Three great TV shows</h1>

            <div class="show-card">
                <div class="show-name">üé® A. Active Art</div>
                <p><em>Active Art</em> is a new show for 12‚Äì15-year-olds. Each week, the world-famous artist Tony Moldino shows viewers how to make an amazing work of art. He‚Äôs great in front of the camera and surprisingly funny. Last week‚Äôs show was all about painting faces. This week, it‚Äôs drawing with pencil and next week, it‚Äôs digital photography. You can see <em>Active Art</em> every Tuesday and Thursday at 5.00 p.m.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text"><em>Active Art</em> l√† m·ªôt ch∆∞∆°ng tr√¨nh m·ªõi d√†nh cho thanh thi·∫øu ni√™n t·ª´ 12-15 tu·ªïi. M·ªói tu·∫ßn, ngh·ªá sƒ© n·ªïi ti·∫øng th·∫ø gi·ªõi Tony Moldino s·∫Ω h∆∞·ªõng d·∫´n kh√°n gi·∫£ c√°ch t·∫°o ra m·ªôt t√°c ph·∫©m ngh·ªá thu·∫≠t tuy·ªát v·ªùi. Ch√∫ ·∫•y r·∫•t tuy·ªát v·ªùi tr∆∞·ªõc ·ªëng k√≠nh v√† h√†i h∆∞·ªõc m·ªôt c√°ch ƒë√°ng ng·∫°c nhi√™n. Ch∆∞∆°ng tr√¨nh tu·∫ßn tr∆∞·ªõc ho√†n to√†n v·ªÅ vi·ªác v·∫Ω m·∫∑t. Tu·∫ßn n√†y, ƒë√≥ l√† v·∫Ω b·∫±ng b√∫t ch√¨ v√† tu·∫ßn t·ªõi s·∫Ω l√† nhi·∫øp ·∫£nh k·ªπ thu·∫≠t s·ªë. B·∫°n c√≥ th·ªÉ xem <em>Active Art</em> v√†o m·ªói th·ª© Ba v√† th·ª© NƒÉm l√∫c 5 gi·ªù chi·ªÅu.</div>
            </div>

            <div class="show-card">
                <div class="show-name">üíÉ B. Dance!</div>
                <p><em>Dance!</em> is a new drama for teenagers, about the lives of teachers and students at a dance school in New York. The most important person in the story is Tina Giles, a young girl from a poor part of town who dreams of becoming a big star. On her first day at the school she meets Joe, Heather and John. They become close and together they have many exciting adventures. <em>Dance!</em> is on every Monday night at 7.00.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text"><em>Dance!</em> l√† m·ªôt b·ªô phim truy·ªÅn h√¨nh (drama) m·ªõi d√†nh cho tu·ªïi teen, k·ªÉ v·ªÅ cu·ªôc s·ªëng c·ªßa c√°c gi√°o vi√™n v√† h·ªçc sinh t·∫°i m·ªôt tr∆∞·ªùng d·∫°y khi√™u v≈© ·ªü New York. Nh√¢n v·∫≠t quan tr·ªçng nh·∫•t trong c√¢u chuy·ªán l√† Tina Giles, m·ªôt c√¥ g√°i tr·∫ª ƒë·∫øn t·ª´ m·ªôt khu ph·ªë ngh√®o c√≥ ∆∞·ªõc m∆° tr·ªü th√†nh m·ªôt ng√¥i sao l·ªõn. V√†o ng√†y ƒë·∫ßu ti√™n ·ªü tr∆∞·ªùng, c√¥ g·∫∑p Joe, Heather v√† John. H·ªç tr·ªü n√™n th√¢n thi·∫øt v√† c√πng nhau tr·∫£i qua nhi·ªÅu cu·ªôc phi√™u l∆∞u th√∫ v·ªã. <em>Dance!</em> ƒë∆∞·ª£c ph√°t s√≥ng v√†o m·ªói t·ªëi th·ª© Hai l√∫c 7 gi·ªù.</div>
            </div>

            <div class="show-card">
                <div class="show-name">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ C. You and Me</div>
                <p>The new series of <em>You and Me</em> returns this Saturday at 16.00 p.m. with a special show that‚Äôs twice as long as usual. This show is perfect for the whole family to watch together, as everyone will find something to laugh at. Each week, we get a different story about the life of Harriet, a high school student. In this week‚Äôs episode, her younger brother gets a part in the school play. Harriet wants to be in the play too and does everything she can think of to make this happen!</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">Ph·∫ßn m·ªõi c·ªßa lo·∫°t phim <em>You and Me</em> s·∫Ω quay tr·ªü l·∫°i v√†o th·ª© B·∫£y tu·∫ßn n√†y l√∫c 16:00 chi·ªÅu v·ªõi m·ªôt ch∆∞∆°ng tr√¨nh ƒë·∫∑c bi·ªát d√†i g·∫•p ƒë√¥i b√¨nh th∆∞·ªùng. Ch∆∞∆°ng tr√¨nh n√†y ho√†n h·∫£o ƒë·ªÉ c·∫£ gia ƒë√¨nh c√πng xem, v√¨ ai c≈©ng s·∫Ω t√¨m th·∫•y ƒëi·ªÅu g√¨ ƒë√≥ ƒë·ªÉ c∆∞·ªùi s·∫£ng kho√°i. M·ªói tu·∫ßn, ch√∫ng ta l·∫°i ƒë∆∞·ª£c theo d√µi m·ªôt c√¢u chuy·ªán kh√°c nhau v·ªÅ cu·ªôc s·ªëng c·ªßa Harriet, m·ªôt n·ªØ sinh trung h·ªçc. Trong t·∫≠p tu·∫ßn n√†y, em trai c√¥ nh·∫≠n ƒë∆∞·ª£c m·ªôt vai trong v·ªü k·ªãch c·ªßa tr∆∞·ªùng. Harriet c≈©ng mu·ªën tham gia v·ªü k·ªãch v√† l√†m m·ªçi c√°ch c√¥ c√≥ th·ªÉ nghƒ© ra ƒë·ªÉ bi·∫øn ƒëi·ªÅu n√†y th√†nh hi·ªán th·ª±c!</div>
            </div>

            <div class="glossary-wrapper">
                <h3 class="glossary-title">üçø Entertainment Vocabulary (A2-B2)</h3>
                <table>
                    <thead><tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a Ti·∫øng Vi·ªát</th></tr></thead>
                    <tbody>
                        <tr><td>1. Viewer</td><td>Noun</td><td>Kh√°n gi·∫£ truy·ªÅn h√¨nh</td></tr>
                        <tr><td>2. Digital photography</td><td>Noun Phrase</td><td>Nhi·∫øp ·∫£nh k·ªπ thu·∫≠t s·ªë</td></tr>
                        <tr><td>3. Drama</td><td>Noun</td><td>Phim truy·ªÅn h√¨nh, k·ªãch</td></tr>
                        <tr><td>4. Dream of (+ V-ing)</td><td>Verb Phrase</td><td>M∆° ∆∞·ªõc v·ªÅ vi·ªác g√¨</td></tr>
                        <tr><td>5. Adventure</td><td>Noun</td><td>Chuy·∫øn phi√™u l∆∞u</td></tr>
                        <tr><td>6. Series</td><td>Noun</td><td>Phim/Ch∆∞∆°ng tr√¨nh nhi·ªÅu t·∫≠p</td></tr>
                        <tr><td>7. Episode</td><td>Noun</td><td>T·∫≠p phim</td></tr>
                        <tr><td>8. Comedy</td><td>Noun</td><td>Phim h√†i, h√†i k·ªãch</td></tr>
                        <tr><td>9. World-famous</td><td>Adjective</td><td>N·ªïi ti·∫øng to√†n th·∫ø gi·ªõi</td></tr>
                        <tr><td>10. Well-known</td><td>Adjective</td><td>N·ªïi ti·∫øng (T·ª´ ƒë·ªìng nghƒ©a)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel right-panel">
            <div id="quiz-container"></div>
            <button class="btn-submit" onclick="submitQuiz()">üèÜ CH·ªêT ƒê√ÅP √ÅN! üèÜ</button>
        </div>
    </div>

    <div id="result-modal">
        <div class="modal-content">
            <h2 style="color: var(--primary); font-size: 2.5rem; margin-bottom: 20px;">T·ªîNG K·∫æT R·∫†P PHIM</h2>
            <div class="score-circle" id="final-score">0/7</div>
            <h3 id="feedback-msg" style="color: #2c3e50; margin-bottom: 20px; font-size: 1.6rem; line-height: 1.5;"></h3>
            <button class="btn-action btn-start" onclick="location.reload()" style="width: 100%; font-size: 1.3rem; padding: 18px; border-radius: 15px;">üîÑ CH∆†I L·∫†I T·ª™ ƒê·∫¶U</button>
        </div>
    </div>

    <script>
        // --- 1. QUIZ DATA CHU·∫®N K√àM GI·∫¢I TH√çCH (B√îI ƒê·∫¨M D·∫™N CH·ª®NG) ---
        const quizData = [
            {
                id: 1, question: "1. Which show is on twice a week?", answer: "Active Art",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ch∆∞∆°ng tr√¨nh n√†o chi·∫øu 2 l·∫ßn m·ªôt tu·∫ßn?</p>
                <p><strong>D·∫•u v·∫øt Paraphrase:</strong> Ph·∫ßn A vi·∫øt: <span class="highlight">"You can see Active Art every Tuesday and Thursday at 5.00 p.m."</span> (B·∫°n c√≥ th·ªÉ xem v√†o m·ªói th·ª© Ba v√† th·ª© NƒÉm). Th·ª© Ba v√† th·ª© NƒÉm t·ª©c l√† 2 l·∫ßn/tu·∫ßn (twice a week).</p>`
            },
            {
                id: 2, question: "2. Which show is about a group of friends?", answer: "Dance!",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ch∆∞∆°ng tr√¨nh n√†o n√≥i v·ªÅ m·ªôt nh√≥m b·∫°n?</p>
                <p><strong>D·∫•u v·∫øt Paraphrase:</strong> Ph·∫ßn B m√¥ t·∫£ v·ªÅ Tina: <span class="highlight">"On her first day at the school she meets Joe, Heather and John. They become close..."</span> (C√¥ ·∫•y g·∫∑p Joe, Heather v√† John. H·ªç tr·ªü n√™n th√¢n thi·∫øt). Nh·ªØng ng∆∞·ªùi tr·ªü n√™n th√¢n thi·∫øt ch√≠nh l√† m·ªôt nh√≥m b·∫°n (a group of friends).</p>`
            },
            {
                id: 3, question: "3. Which show teaches you how to do something?", answer: "Active Art",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ch∆∞∆°ng tr√¨nh n√†o d·∫°y b·∫°n c√°ch l√†m m·ªôt vi·ªác g√¨ ƒë√≥?</p>
                <p><strong>D·∫•u v·∫øt Paraphrase:</strong> Ph·∫ßn A gi·ªõi thi·ªáu ngh·ªá sƒ© Tony: <span class="highlight">"...shows viewers how to make an amazing work of art."</span> (...h∆∞·ªõng d·∫´n kh√°n gi·∫£ c√°ch t·∫°o ra t√°c ph·∫©m ngh·ªá thu·∫≠t). Ch·ªØ "shows... how to make" ƒë·ªìng nghƒ©a ho√†n to√†n v·ªõi "teaches you how to do something".</p>`
            },
            {
                id: 4, question: "4. Which show is a comedy?", answer: "You and Me",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ch∆∞∆°ng tr√¨nh n√†o l√† m·ªôt b·ªô phim h√†i?</p>
                <p><strong>D·∫•u v·∫øt Paraphrase:</strong> Ph·∫ßn C kh·∫≥ng ƒë·ªãnh: <span class="highlight">"...everyone will find something to laugh at."</span> (...ai c≈©ng s·∫Ω t√¨m th·∫•y ƒëi·ªÅu g√¨ ƒë√≥ ƒë·ªÉ c∆∞·ªùi). Th·ªÉ lo·∫°i mang l·∫°i ti·∫øng c∆∞·ªùi ch√≠nh l√† phim h√†i (a comedy).</p>`
            },
            {
                id: 5, question: "5. Which show is about someone who wants to change her life?", answer: "Dance!",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ch∆∞∆°ng tr√¨nh n√†o n√≥i v·ªÅ m·ªôt ng∆∞·ªùi mu·ªën thay ƒë·ªïi cu·ªôc ƒë·ªùi m√¨nh?</p>
                <p><strong>D·∫•u v·∫øt Paraphrase:</strong> Ph·∫ßn B k·ªÉ v·ªÅ c√¥ g√°i Tina: <span class="highlight">"...a young girl from a poor part of town who dreams of becoming a big star."</span> (...c√¥ g√°i tr·∫ª ƒë·∫øn t·ª´ khu ph·ªë ngh√®o m∆° ∆∞·ªõc tr·ªü th√†nh ng√¥i sao l·ªõn). Mong ∆∞·ªõc tho√°t ngh√®o v√† l√†m ng√¥i sao ch√≠nh l√† mu·ªën thay ƒë·ªïi cu·ªôc ƒë·ªùi (wants to change her life).</p>`
            },
            {
                id: 6, question: "6. Which show has a well-known star?", answer: "Active Art",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ch∆∞∆°ng tr√¨nh n√†o c√≥ s·ª± g√≥p m·∫∑t c·ªßa m·ªôt ng√¥i sao n·ªïi ti·∫øng?</p>
                <p><strong>D·∫•u v·∫øt Paraphrase:</strong> Ph·∫ßn A gi·ªõi thi·ªáu ng∆∞·ªùi d·∫´n ch∆∞∆°ng tr√¨nh l√†: <span class="highlight">"the world-famous artist Tony Moldino"</span> (Ngh·ªá sƒ© n·ªïi ti·∫øng to√†n th·∫ø gi·ªõi Tony). T·ª´ "world-famous" l√† t·ª´ ƒë·ªìng nghƒ©a si√™u chu·∫©n c·ªßa "well-known".</p>`
            },
            {
                id: 7, question: "7. Which show is good for people of all ages?", answer: "You and Me",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ch∆∞∆°ng tr√¨nh n√†o ph√π h·ª£p cho ng∆∞·ªùi ·ªü m·ªçi l·ª©a tu·ªïi?</p>
                <p><strong>D·∫•u v·∫øt Paraphrase:</strong> Ph·∫ßn C ƒë·ªÅ xu·∫•t: <span class="highlight">"This show is perfect for the whole family to watch together..."</span> (Ch∆∞∆°ng tr√¨nh n√†y ho√†n h·∫£o ƒë·ªÉ c·∫£ gia ƒë√¨nh c√πng xem). C·∫£ gia ƒë√¨nh (the whole family) bao h√†m √¥ng b√†, cha m·∫π, con c√°i -> M·ªçi l·ª©a tu·ªïi (people of all ages).</p>`
            }
        ];

        let score = 0;
        let answeredQuestions = new Set();
        const showNames = ["Active Art", "Dance!", "You and Me"];

        // Thu·∫≠t to√°n x√°o tr·ªôn v·ªã tr√≠ n√∫t b·∫•m
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- 2. RENDER GIAO DI·ªÜN C√ÇU H·ªéI ---
        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            quizData.forEach((q, index) => {
                const shuffledNames = shuffleArray([...showNames]);

                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `<div class="question-text">${q.question}</div>`;

                const optionsGrid = document.createElement('div');
                optionsGrid.className = 'options-grid';

                shuffledNames.forEach(name => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = name;
                    btn.onclick = () => handleAnswer(btn, name === q.answer, index, q.explanation, optionsGrid, q.answer);
                    optionsGrid.appendChild(btn);
                });
                card.appendChild(optionsGrid);

                // H·ªôp gi·∫£i th√≠ch (·∫®n ƒëi, ch·ªâ hi·ªán khi click)
                const explBox = document.createElement('div');
                explBox.className = 'explanation-box';
                explBox.id = `expl-${index}`;
                explBox.innerHTML = `<h4>üí° T·∫°i sao l·∫°i l√† ƒë√°p √°n n√†y?</h4>` + q.explanation;
                card.appendChild(explBox);

                container.appendChild(card);
            });
        }

        // --- 3. H·ªÜ TH·ªêNG √ÇM THANH WEB AUDIO API ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;

        function playSound(type) {
            if (!audioCtx) audioCtx = new AudioContext();
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(587.33, audioCtx.currentTime); 
                osc.frequency.exponentialRampToValueAtTime(1174.66, audioCtx.currentTime + 0.15); 
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                osc.start(); osc.stop(audioCtx.currentTime + 0.4);
            } else {
                osc.type = 'sawtooth'; // √Çm b√°o l·ªói
                osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(120, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.4, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- 4. X·ª¨ L√ù L∆Ø·ª¢T CH∆†I (T·ª∞ ƒê·ªòNG HI·ªÜN GI·∫¢I TH√çCH) ---
        function handleAnswer(btn, isCorrect, qIndex, explanationHTML, grid, correctAnswer) {
            if (answeredQuestions.has(qIndex)) return; 
            answeredQuestions.add(qIndex);

            const allBtns = grid.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true); 

            // B·∫¨T B·∫¢NG GI·∫¢I TH√çCH NGAY L·∫¨P T·ª®C ƒê·ªÇ H·ªåC SINH ƒê·ªåC
            document.getElementById(`expl-${qIndex}`).style.display = 'block';

            if (isCorrect) {
                btn.classList.add('correct');
                playSound('correct');
                fireConfetti();
                score++;
            } else {
                btn.classList.add('wrong');
                playSound('wrong');
                // T·ª± ƒë·ªông highlight m√†u xanh cho ƒë√°p √°n ƒë√∫ng
                allBtns.forEach(b => {
                    if (b.innerText === correctAnswer) {
                        b.classList.add('correct');
                        b.style.opacity = '0.7';
                    }
                });
            }
        }

        // --- 5. B·ªò ƒê·∫æM TH·ªúI GIAN ---
        let timerInterval;
        let timeLeft = 600; // 10 ph√∫t
        let isRunning = false;

        function toggleTimer() {
            const btn = document.getElementById('btn-timer');
            if (isRunning) {
                clearInterval(timerInterval);
                btn.innerText = "‚ñ∂ TI·∫æP T·ª§C XEM PHIM";
                btn.style.backgroundColor = "#f1c40f";
            } else {
                btn.innerText = "‚è∏ D·ª™NG T·∫†M NGH·ªà";
                btn.style.backgroundColor = "#e74c3c"; 
                btn.style.color = "white";
                timerInterval = setInterval(() => {
                    timeLeft--;
                    let m = Math.floor(timeLeft / 60);
                    let s = timeLeft % 60;
                    document.getElementById('timer-display').innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert("‚è∞ ƒê√£ h·∫øt gi·ªù xem phim! Trong ph√≤ng thi th·∫≠t b·∫°n h√£y c·ªë g·∫Øng ƒë·ªçc l∆∞·ªõt nhanh h∆°n nh√©!");
                    }
                }, 1000);
            }
            isRunning = !isRunning;
        }

        // B·∫≠t t·∫Øt d·ªãch thu·∫≠t
        function toggleTranslation(btn) {
            const div = btn.nextElementSibling;
            const isHidden = getComputedStyle(div).display === 'none';
            div.style.display = isHidden ? 'block' : 'none';
            btn.innerHTML = isHidden ? 'üôà ·∫®N B·∫¢N D·ªäCH' : 'üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶';
        }

        // --- 6. T·ªîNG K·∫æT N·ªòP B√ÄI ---
        function submitQuiz() {
            if (answeredQuestions.size < quizData.length) {
                if(!confirm("Ch∆∞∆°ng tr√¨nh ch∆∞a k·∫øt th√∫c, b·∫°n ch∆∞a tr·∫£ l·ªùi h·∫øt c√°c c√¢u h·ªèi. V·∫´n mu·ªën n·ªôp b√†i ch·ª©?")) return;
            }
            clearInterval(timerInterval);
            
            const modal = document.getElementById('result-modal');
            document.getElementById('final-score').innerText = `${score}/7`;
            
            const msgObj = document.getElementById('feedback-msg');
            if (score === 7) {
                msgObj.innerText = "üèÜ XU·∫§T S·∫ÆC! B·∫†N L√Ä SI√äU SAO ƒê·ªåC HI·ªÇU!";
                for(let i=0; i<4; i++) setTimeout(fireConfetti, i*300);
            } else if (score >= 4) {
                msgObj.innerText = "‚ú® R·∫§T T·ªêT! H√£y nh·ªõ ƒë·ªçc k·ªπ ph·∫ßn ph√¢n t√≠ch b√¥i v√†ng ƒë·ªÉ hi·ªÉu s√¢u h∆°n v·ªÅ t∆∞ duy ra ƒë·ªÅ nh√©.";
                fireConfetti();
            } else {
                msgObj.innerText = "üí™ ƒê·ª™NG B·ªé CU·ªòC! B√†i n√†y c√≥ nhi·ªÅu t·ª´ ƒë·ªìng nghƒ©a (paraphrase), h√£y xem k·ªπ b·∫£ng t·ª´ v·ª±ng nh√©!";
            }
            modal.style.display = 'flex';
        }

        // --- 7. HI·ªÜU ·ª®NG PH√ÅO GI·∫§Y CONFETTI ---
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];
        const colors = ['#8e44ad', '#e74c3c', '#f1c40f', '#27ae60'];

        function fireConfetti() {
            for(let i=0; i<80; i++) {
                particles.push({
                    x: canvas.width / 2, y: canvas.height / 2 + 100,
                    r: Math.random() * 8 + 4,
                    dx: (Math.random() - 0.5) * 20, dy: Math.random() * -20 - 5,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    tilt: Math.random() * 10 - 10, tiltAngleInc: (Math.random() * 0.07) + 0.05, tiltAngle: 0
                });
            }
            requestAnimationFrame(animateConfetti);
        }

        function animateConfetti() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach((p, i) => {
                p.tiltAngle += p.tiltAngleInc;
                p.y += (Math.cos(p.tiltAngle) + 1 + p.r / 2) / 2;
                p.x += Math.sin(p.tiltAngle) * 2;
                p.dy += 0.3; p.y += p.dy;
                ctx.beginPath(); ctx.lineWidth = p.r; ctx.strokeStyle = p.color;
                ctx.moveTo(p.x + p.tilt + p.r, p.y); ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r); ctx.stroke();
                if (p.y > canvas.height) particles.splice(i,1);
            });
            if(particles.length > 0) requestAnimationFrame(animateConfetti);
        }

        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
        window.onload = renderQuiz;
    </script>
</body>
</html>