<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 7: Word Forms - Ms Mai An ULIS</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-bg: #f0f4f8;
            --main-pink: #8854C0;
            --main-teal: #00C9A7;
            --correct-green: #00D26A;
            --correct-shadow: #00a352;
            --wrong-red: #FF4757;
            --wrong-shadow: #d6303e;
            --card-bg: #ffffff;
            --text-color: #2f3542;
            --btn-shadow: 0 5px 0 rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--primary-bg);
            background-image: radial-gradient(#e2e8f0 10%, transparent 10%), radial-gradient(#e2e8f0 10%, transparent 10%);
            background-position: 0 0, 20px 20px;
            background-size: 40px 40px;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            padding-bottom: 80px; /* Space for footer */
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--main-pink), #a29bfe);
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(136, 84, 192, 0.3);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            margin: 0;
            font-size: 2rem;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .header p {
            margin: 10px 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .badge-teacher {
            background: white;
            color: var(--main-pink);
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 10px;
            box-shadow: 0 3px 0 rgba(0,0,0,0.1);
        }

        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Card Style */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 #dfe4ea, 0 15px 20px rgba(0,0,0,0.1);
            position: relative;
            transition: transform 0.3s ease;
            border: 2px solid #f1f2f6;
        }

        .question-number {
            background: var(--main-teal);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: 800;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 15px;
            box-shadow: 0 3px 0 #009e82;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.5;
            margin-bottom: 25px;
            color: #2f3542;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 3D Button Style */
        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-bottom: 5px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: #57606f;
            cursor: pointer;
            transition: all 0.1s ease;
            text-align: left;
            position: relative;
            outline: none;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: #ced6e0;
            background-color: #f8f9fa;
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(4px);
            border-bottom-width: 0px;
            margin-top: 5px;
        }

        /* Correct State */
        .option-btn.correct {
            background-color: var(--correct-green) !important;
            border-color: var(--correct-shadow) !important;
            border-bottom-color: var(--correct-shadow) !important;
            color: white !important;
            transform: translateY(4px);
            border-bottom-width: 0px;
            margin-bottom: 5px; /* Offset margin because border is gone */
        }

        /* Wrong State */
        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            border-color: var(--wrong-shadow) !important;
            border-bottom-color: var(--wrong-shadow) !important;
            color: white !important;
            animation: shake 0.5s;
        }

        /* Dim other options */
        .question-card.answered .option-btn:not(.correct):not(.wrong) {
            opacity: 0.5;
            cursor: not-allowed;
            background: #f1f2f6;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 25px;
            background: #f8f0ff; /* Light purple tint */
            border: 2px solid var(--main-pink);
            border-radius: 15px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-header {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--main-pink);
            font-weight: 800;
            margin-bottom: 10px;
            font-size: 1.1rem;
            border-bottom: 1px dashed rgba(136, 84, 192, 0.3);
            padding-bottom: 10px;
        }

        .explanation-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #4a4a4a;
            white-space: pre-wrap; /* Preserve formatting from JSON */
        }

        /* Footer Control */
        .footer-control {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .score-display {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--main-teal);
        }

        .submit-btn {
            background: var(--main-pink);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 4px 0 #6c429c;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .submit-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Modal for Final Result */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            animation: zoomIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .modal-score {
            font-size: 4rem;
            font-weight: 900;
            color: var(--main-pink);
            margin: 20px 0;
        }

        .modal-message {
            font-size: 1.2rem;
            color: #57606f;
            margin-bottom: 30px;
        }

        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Utility for underlined text in Phonetics/general */
        u {
            text-decoration-color: var(--main-pink);
            text-decoration-thickness: 3px;
            text-underline-offset: 3px;
        }
    </style>
</head>
<body>

    <div class="header">
        <span class="badge-teacher"><i class="fas fa-chalkboard-teacher"></i> Ms Mai An ULIS</span>
        <h1>Exercise 7: Word Forms</h1>
        <p>Global Success 9 - √în thi v√†o 10 chuy√™n s√¢u</p>
    </div>

    <div class="quiz-container" id="quiz-container">
        <!-- Questions will be injected here by JS -->
    </div>

    <!-- Padding for footer -->
    <div style="height: 60px;"></div>

    <div class="footer-control">
        <div class="score-display">
            <i class="fas fa-star text-yellow-400"></i> ƒêi·ªÉm: <span id="current-score">0</span> / <span id="total-questions">0</span>
        </div>
        <button class="submit-btn" onclick="finishQuiz()">
            <i class="fas fa-flag-checkered"></i> N·ªôp B√†i
        </button>
    </div>

    <!-- Modal Result -->
    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <h2 style="color: var(--main-teal); font-weight: 800;">T·ªîNG K·∫æT</h2>
            <div class="modal-score" id="final-score">0/0</div>
            <p class="modal-message" id="final-message">B·∫°n l√†m r·∫•t t·ªët!</p>
            <button class="submit-btn" onclick="location.reload()">L√†m l·∫°i b√†i</button>
        </div>
    </div>

    <!-- Sound Effects -->
    <audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3"></audio>
    <audio id="sound-finish" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

    <script>
        // Data from the provided JSON
        const quizData = [
    {
      "questionNumber": 1,
      "question": "When a person is ___________________ in a language, they can speak a language easily and well. (fluency)",
      "answerOptions": [
        { "text": "fluent", "isCorrect": true },
        { "text": "fluency", "isCorrect": false },
        { "text": "fluently", "isCorrect": false },
        { "text": "fluencies", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. fluent (adj): tr√¥i ch·∫£y, l∆∞u lo√°t.\nB. fluency (noun): s·ª± tr√¥i ch·∫£y.\nC. fluently (adv): m·ªôt c√°ch tr√¥i ch·∫£y.\nD. fluencies (noun - s·ªë nhi·ªÅu): c√°c s·ª± tr√¥i ch·∫£y.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Khi m·ªôt ng∆∞·ªùi l∆∞u lo√°t m·ªôt ng√¥n ng·ªØ, h·ªç c√≥ th·ªÉ n√≥i ng√¥n ng·ªØ ƒë√≥ m·ªôt c√°ch d·ªÖ d√†ng v√† t·ªët.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- V·ªã tr√≠ c·∫ßn ƒëi·ªÅn ƒë·ª©ng sau ƒë·ªông t·ª´ to be \"is\" v√† n√≥i v·ªÅ t√≠nh ch·∫•t c·ªßa \"a person\".\n- C·∫ßn m·ªôt t√≠nh t·ª´ (Adjective).\n- C·∫•u tr√∫c: be + fluent + in + language."
    },
    {
      "questionNumber": 2,
      "question": "The government has decided that ___________________ is the official language. (England)",
      "answerOptions": [
        { "text": "English", "isCorrect": true },
        { "text": "England", "isCorrect": false },
        { "text": "Englander", "isCorrect": false },
        { "text": "Englishness", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. England (noun): N∆∞·ªõc Anh.\nB. English (noun/adj): Ti·∫øng Anh / Ng∆∞·ªùi Anh / Thu·ªôc v·ªÅ n∆∞·ªõc Anh.\nC. Englander (noun): Ng∆∞·ªùi Anh (√≠t d√πng).\nD. Englishness (noun): T√≠nh ch·∫•t Anh.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Ch√≠nh ph·ªß ƒë√£ quy·∫øt ƒë·ªãnh r·∫±ng Ti·∫øng Anh l√† ng√¥n ng·ªØ ch√≠nh th·ª©c.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Ng·ªØ c·∫£nh n√≥i v·ªÅ \"official language\" (ng√¥n ng·ªØ ch√≠nh th·ª©c).\n- T·ª´ c·∫ßn ƒëi·ªÅn l√† t√™n m·ªôt ng√¥n ng·ªØ -> English."
    },
    {
      "questionNumber": 3,
      "question": "The new student is a recent ___________________ to the US from Germany. (immigrate)",
      "answerOptions": [
        { "text": "immigrant", "isCorrect": true },
        { "text": "immigration", "isCorrect": false },
        { "text": "immigrate", "isCorrect": false },
        { "text": "immigrated", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. immigrate (verb): nh·∫≠p c∆∞.\nB. immigrant (noun): ng∆∞·ªùi nh·∫≠p c∆∞.\nC. immigration (noun): s·ª± nh·∫≠p c∆∞.\nD. immigrated (verb - past): ƒë√£ nh·∫≠p c∆∞.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"H·ªçc sinh m·ªõi l√† m·ªôt ng∆∞·ªùi nh·∫≠p c∆∞ g·∫ßn ƒë√¢y ƒë·∫øn M·ªπ t·ª´ ƒê·ª©c.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Tr∆∞·ªõc ch·ªó tr·ªëng l√† m·∫°o t·ª´ \"a\" v√† t√≠nh t·ª´ \"recent\".\n- C·∫ßn m·ªôt Danh t·ª´ ch·ªâ ng∆∞·ªùi (v√¨ ch·ªß ng·ªØ l√† \"The new student\"). -> Immigrant."
    },
    {
      "questionNumber": 4,
      "question": "When English borrowed words, it kept the original ___________________ from the original languages. (spell)",
      "answerOptions": [
        { "text": "spelling", "isCorrect": true },
        { "text": "spell", "isCorrect": false },
        { "text": "speller", "isCorrect": false },
        { "text": "spelled", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. spell (verb): ƒë√°nh v·∫ßn.\nB. spelling (noun): c√°ch vi·∫øt/ch√≠nh t·∫£.\nC. speller (noun): ng∆∞·ªùi ƒë√°nh v·∫ßn.\nD. spelled (verb - past): ƒë√£ ƒë√°nh v·∫ßn.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Khi ti·∫øng Anh vay m∆∞·ª£n t·ª´ v·ª±ng, n√≥ gi·ªØ nguy√™n c√°ch vi·∫øt g·ªëc t·ª´ c√°c ng√¥n ng·ªØ g·ªëc.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Sau t√≠nh t·ª´ \"original\" (g·ªëc) c·∫ßn m·ªôt Danh t·ª´.\n- \"Spelling\" l√† danh t·ª´ ch·ªâ c√°ch vi·∫øt ho·∫∑c ch√≠nh t·∫£ c·ªßa t·ª´."
    },
    {
      "questionNumber": 5,
      "question": "My cousin specialises in ___________________ from Danish into English. (translate)",
      "answerOptions": [
        { "text": "translation", "isCorrect": true },
        { "text": "translator", "isCorrect": false },
        { "text": "translate", "isCorrect": false },
        { "text": "translated", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. translate (verb): d·ªãch.\nB. translation (noun): vi·ªác d·ªãch thu·∫≠t / b·∫£n d·ªãch.\nC. translator (noun): bi√™n d·ªãch vi√™n.\nD. translated (verb - past): ƒë√£ d·ªãch.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Em h·ªç t√¥i chuy√™n v·ªÅ vi·ªác d·ªãch thu·∫≠t t·ª´ ti·∫øng ƒêan M·∫°ch sang ti·∫øng Anh.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Sau gi·ªõi t·ª´ \"in\" c·∫ßn m·ªôt Danh t·ª´ (Noun) ho·∫∑c V-ing.\n- \"Translation\" (lƒ©nh v·ª±c d·ªãch thu·∫≠t) l√† t·ª´ ph√π h·ª£p nh·∫•t khi n√≥i v·ªÅ chuy√™n m√¥n (specialises in)."
    },
    {
      "questionNumber": 6,
      "question": "A good translator needs to pay ___________________ to people‚Äôs tone when they speak as well. (attend)",
      "answerOptions": [
        { "text": "attention", "isCorrect": true },
        { "text": "attentive", "isCorrect": false },
        { "text": "attend", "isCorrect": false },
        { "text": "attendant", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. attend (verb): tham d·ª±/ch√∫ √Ω.\nB. attention (noun): s·ª± ch√∫ √Ω.\nC. attentive (adj): chƒÉm ch√∫.\nD. attendant (noun): ng∆∞·ªùi ph·ª•c v·ª•.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"M·ªôt bi√™n d·ªãch vi√™n gi·ªèi c·∫ßn ph·∫£i ch√∫ √Ω ƒë·∫øn gi·ªçng ƒëi·ªáu c·ªßa m·ªçi ng∆∞·ªùi khi h·ªç n√≥i n·ªØa.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C·∫•u tr√∫c c·ªë ƒë·ªãnh (Collocation): \"Pay attention to\" (Ch√∫ √Ω ƒë·∫øn c√°i g√¨)."
    },
    {
      "questionNumber": 7,
      "question": "She is ___________________ in three languages, which allows her to easily communicate with people from different countries. (fluency)",
      "answerOptions": [
        { "text": "fluent", "isCorrect": true },
        { "text": "fluency", "isCorrect": false },
        { "text": "fluently", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. fluent (adj): l∆∞u lo√°t.\nB. fluency (noun): s·ª± l∆∞u lo√°t.\nC. fluently (adv): m·ªôt c√°ch l∆∞u lo√°t.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"C√¥ ·∫•y l∆∞u lo√°t 3 ng√¥n ng·ªØ, ƒëi·ªÅu n√†y cho ph√©p c√¥ ·∫•y d·ªÖ d√†ng giao ti·∫øp v·ªõi m·ªçi ng∆∞·ªùi t·ª´ c√°c qu·ªëc gia kh√°c nhau.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Sau ƒë·ªông t·ª´ to be \"is\", c·∫ßn m·ªôt T√≠nh t·ª´ ƒë·ªÉ mi√™u t·∫£ c√¥ ·∫•y.\n- C·∫•u tr√∫c: to be fluent in (th√†nh th·∫°o/l∆∞u lo√°t ng√¥n ng·ªØ n√†o)."
    },
    {
      "questionNumber": 8,
      "question": "The city has a diverse population, with ___________________ from various countries contributing to its cultural richness. (immigrate)",
      "answerOptions": [
        { "text": "immigrants", "isCorrect": true },
        { "text": "immigration", "isCorrect": false },
        { "text": "immigrates", "isCorrect": false },
        { "text": "immigrant", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. immigrants (noun - s·ªë nhi·ªÅu): nh·ªØng ng∆∞·ªùi nh·∫≠p c∆∞.\nB. immigration (noun): s·ª± nh·∫≠p c∆∞.\nC. immigrates (verb): nh·∫≠p c∆∞.\nD. immigrant (noun - s·ªë √≠t): ng∆∞·ªùi nh·∫≠p c∆∞.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Th√†nh ph·ªë c√≥ d√¢n s·ªë ƒëa d·∫°ng, v·ªõi nh·ªØng ng∆∞·ªùi nh·∫≠p c∆∞ t·ª´ nhi·ªÅu qu·ªëc gia kh√°c nhau ƒë√≥ng g√≥p v√†o s·ª± phong ph√∫ vƒÉn h√≥a c·ªßa n√≥.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Sau gi·ªõi t·ª´ \"with\" c·∫ßn danh t·ª´.\n- Ng·ªØ c·∫£nh \"from various countries\" (t·ª´ nhi·ªÅu qu·ªëc gia) g·ª£i √Ω s·ªë nhi·ªÅu.\n- Ch·ªâ ng∆∞·ªùi (people) n√™n d√πng \"immigrants\"."
    },
    {
      "questionNumber": 9,
      "question": "The conference featured renowned ___________________ who shared their expertise on a wide range of topics. (speak)",
      "answerOptions": [
        { "text": "speakers", "isCorrect": true },
        { "text": "speech", "isCorrect": false },
        { "text": "speaking", "isCorrect": false },
        { "text": "speak", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. speak (verb): n√≥i.\nB. speakers (noun - s·ªë nhi·ªÅu): di·ªÖn gi·∫£/ng∆∞·ªùi n√≥i.\nC. speaking (noun/verb): vi·ªác n√≥i.\nD. speech (noun): b√†i ph√°t bi·ªÉu.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"H·ªôi ngh·ªã c√≥ s·ª± g√≥p m·∫∑t c·ªßa c√°c di·ªÖn gi·∫£ n·ªïi ti·∫øng, nh·ªØng ng∆∞·ªùi ƒë√£ chia s·∫ª chuy√™n m√¥n c·ªßa h·ªç v·ªÅ nhi·ªÅu ch·ªß ƒë·ªÅ.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- C·∫ßn danh t·ª´ ch·ªâ ng∆∞·ªùi (v√¨ ph√≠a sau c√≥ ƒë·∫°i t·ª´ quan h·ªá \"who\").\n- \"Renowned\" (n·ªïi ti·∫øng) b·ªï nghƒ©a cho danh t·ª´.\n- Nhi·ªÅu ng∆∞·ªùi (their expertise) -> S·ªë nhi·ªÅu: Speakers."
    },
    {
      "questionNumber": 10,
      "question": "English is the ___________________ language of many countries, including the United Kingdom and the United States. (office)",
      "answerOptions": [
        { "text": "official", "isCorrect": true },
        { "text": "office", "isCorrect": false },
        { "text": "officer", "isCorrect": false },
        { "text": "officially", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. office (noun): vƒÉn ph√≤ng.\nB. official (adj): ch√≠nh th·ª©c / thu·ªôc v·ªÅ ch√≠nh quy·ªÅn.\nC. officer (noun): sƒ© quan/vi√™n ch·ª©c.\nD. officially (adv): m·ªôt c√°ch ch√≠nh th·ª©c.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Ti·∫øng Anh l√† ng√¥n ng·ªØ ch√≠nh th·ª©c c·ªßa nhi·ªÅu qu·ªëc gia, bao g·ªìm V∆∞∆°ng qu·ªëc Anh v√† Hoa K·ª≥.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- ƒê·ª©ng tr∆∞·ªõc danh t·ª´ \"language\" c·∫ßn m·ªôt T√≠nh t·ª´ b·ªï nghƒ©a.\n- \"Official language\" l√† c·ª•m t·ª´ c·ªë ƒë·ªãnh (ng√¥n ng·ªØ ch√≠nh th·ª©c/h√†nh ch√≠nh)."
    },
    {
      "questionNumber": 11,
      "question": "English, with its numerous ___________________ like British, American, and Australian, is widely spoken as an international language. (various)",
      "answerOptions": [
        { "text": "varieties", "isCorrect": true },
        { "text": "variety", "isCorrect": false },
        { "text": "various", "isCorrect": false },
        { "text": "vary", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. various (adj): ƒëa d·∫°ng/nhi·ªÅu.\nB. varieties (noun - s·ªë nhi·ªÅu): c√°c bi·∫øn th·ªÉ/lo·∫°i.\nC. vary (verb): thay ƒë·ªïi/kh√°c nhau.\nD. variety (noun - s·ªë √≠t): s·ª± ƒëa d·∫°ng.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Ti·∫øng Anh, v·ªõi v√¥ s·ªë c√°c bi·∫øn th·ªÉ nh∆∞ Anh-Anh, Anh-M·ªπ v√† Anh-√öc, ƒë∆∞·ª£c n√≥i r·ªông r√£i nh∆∞ m·ªôt ng√¥n ng·ªØ qu·ªëc t·∫ø.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Sau \"numerous\" (nhi·ªÅu) c·∫ßn m·ªôt Danh t·ª´ s·ªë nhi·ªÅu.\n- C√°c lo·∫°i ti·∫øng Anh (British, American...) ƒë∆∞·ª£c g·ªçi l√† \"varieties of English\"."
    },
    {
      "questionNumber": 12,
      "question": "Our English teachers advise us not to translate all things from our first language because ___________________ is not always a good learning method... (translate)",
      "answerOptions": [
        { "text": "translation", "isCorrect": true },
        { "text": "translate", "isCorrect": false },
        { "text": "translator", "isCorrect": false },
        { "text": "translated", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. translation (noun): vi·ªác d·ªãch thu·∫≠t.\nB. translate (verb): d·ªãch.\nC. translator (noun): ng∆∞·ªùi d·ªãch.\nD. translated (verb - past): ƒë√£ d·ªãch.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Gi√°o vi√™n ti·∫øng Anh khuy√™n ch√∫ng t√¥i kh√¥ng n√™n d·ªãch m·ªçi th·ª© t·ª´ ti·∫øng m·∫π ƒë·∫ª v√¨ vi·ªác d·ªãch thu·∫≠t kh√¥ng ph·∫£i l√∫c n√†o c≈©ng l√† ph∆∞∆°ng ph√°p h·ªçc t·ªët...\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- V·ªã tr√≠ c·∫ßn ƒëi·ªÅn l√† Ch·ªß ng·ªØ c·ªßa m·ªánh ƒë·ªÅ \"...is not always a good learning method\".\n- C·∫ßn m·ªôt Danh t·ª´ ch·ªâ h√†nh ƒë·ªông/s·ª± vi·ªác -> Translation."
    },
    {
      "questionNumber": 13,
      "question": "English has become a(n) ___________________ language, or international language... (globe)",
      "answerOptions": [
        { "text": "global", "isCorrect": true },
        { "text": "globe", "isCorrect": false },
        { "text": "globally", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. globe (noun): qu·∫£ ƒë·ªãa c·∫ßu.\nB. global (adj): to√†n c·∫ßu.\nC. globally (adv): tr√™n to√†n c·∫ßu.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Ti·∫øng Anh ƒë√£ tr·ªü th√†nh m·ªôt ng√¥n ng·ªØ to√†n c·∫ßu, hay ng√¥n ng·ªØ qu·ªëc t·∫ø...\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Tr∆∞·ªõc danh t·ª´ \"language\" c·∫ßn m·ªôt T√≠nh t·ª´ b·ªï nghƒ©a.\n- Global language = Ng√¥n ng·ªØ to√†n c·∫ßu."
    },
    {
      "questionNumber": 14,
      "question": "A rich ___________________ in language can enhance communication by offering multiple ways to express ideas and emotions. (vary)",
      "answerOptions": [
        { "text": "variety", "isCorrect": true },
        { "text": "various", "isCorrect": false },
        { "text": "vary", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. vary (verb): thay ƒë·ªïi/bi·∫øn ƒë·ªïi.\nB. variety (noun): s·ª± ƒëa d·∫°ng.\nC. various (adj): ƒëa d·∫°ng.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"S·ª± ƒëa d·∫°ng phong ph√∫ trong ng√¥n ng·ªØ c√≥ th·ªÉ n√¢ng cao kh·∫£ nƒÉng giao ti·∫øp b·∫±ng c√°ch cung c·∫•p nhi·ªÅu c√°ch ƒë·ªÉ di·ªÖn ƒë·∫°t √Ω t∆∞·ªüng v√† c·∫£m x√∫c.\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Sau \"A rich\" (t√≠nh t·ª´) c·∫ßn m·ªôt Danh t·ª´.\n- \"A rich variety\" l√† c·ª•m t·ª´ hay d√πng (s·ª± ƒëa d·∫°ng phong ph√∫)."
    },
    {
      "questionNumber": 15,
      "question": "The country‚Äôs ___________________ language is used in all government documents... (office)",
      "answerOptions": [
        { "text": "official", "isCorrect": true },
        { "text": "office", "isCorrect": false },
        { "text": "officer", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. office (noun): vƒÉn ph√≤ng.\nB. official (adj): ch√≠nh th·ª©c.\nC. officer (noun): quan ch·ª©c.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Ng√¥n ng·ªØ ch√≠nh th·ª©c c·ªßa ƒë·∫•t n∆∞·ªõc ƒë∆∞·ª£c s·ª≠ d·ª•ng trong t·∫•t c·∫£ c√°c t√†i li·ªáu ch√≠nh ph·ªß, gi√°o d·ª•c...\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- T∆∞∆°ng t·ª± c√¢u 10, c·∫ßn t√≠nh t·ª´ b·ªï nghƒ©a cho \"language\" -> official."
    },
    {
      "questionNumber": 16,
      "question": "Many ___________________ from Asia and Africa bring diverse cultural traditions and customs... (immigrate)",
      "answerOptions": [
        { "text": "immigrants", "isCorrect": true },
        { "text": "immigration", "isCorrect": false },
        { "text": "immigrate", "isCorrect": false }
      ],
      "explanation": "1. Ph√¢n t√≠ch t·ª´ v·ª±ng:\nA. immigrate (verb): nh·∫≠p c∆∞.\nB. immigrants (noun - s·ªë nhi·ªÅu): ng∆∞·ªùi nh·∫≠p c∆∞.\nC. immigration (noun): s·ª± nh·∫≠p c∆∞.\n\n2. D·ªãch nghƒ©a to√†n c√¢u: \"Nhi·ªÅu ng∆∞·ªùi nh·∫≠p c∆∞ t·ª´ Ch√¢u √Å v√† Ch√¢u Phi mang ƒë·∫øn c√°c truy·ªÅn th·ªëng vƒÉn h√≥a v√† phong t·ª•c ƒëa d·∫°ng...\"\n\n3. Gi·∫£i th√≠ch chi ti·∫øt:\n- Sau \"Many\" c·∫ßn Danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu.\n- Ch·ªâ ng∆∞·ªùi (v√¨ h·ªç \"bring diverse cultural traditions\") -> Immigrants."
    }
  ];

        // Shuffle function
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        let score = 0;
        let answeredCount = 0;
        const totalQuestions = quizData.length;

        // Shuffle questions initially
        shuffleArray(quizData);

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            document.getElementById('total-questions').innerText = totalQuestions;
            
            quizData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `card-${index}`;

                // Header of card
                const qNum = document.createElement('div');
                qNum.className = 'question-number';
                qNum.innerHTML = `<i class="fas fa-question-circle"></i> C√¢u ${index + 1}`;
                
                const qText = document.createElement('div');
                qText.className = 'question-text';
                // Replace blank lines with a more visible underscore line
                let displayText = item.question.replace(/_+/g, '_______________');
                qText.innerText = displayText;

                // Options Container
                const optionsGrid = document.createElement('div');
                optionsGrid.className = 'options-grid';

                // Shuffle options
                // Create a copy to shuffle options without affecting answer checking logic via index if we used index
                // But here we use 'text' and 'isCorrect' directly.
                // We need to keep track of the original index or just shuffle the object array.
                // Since options are objects, we can shuffle them.
                const shuffledOptions = [...item.answerOptions];
                shuffleArray(shuffledOptions);

                shuffledOptions.forEach((opt, optIndex) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt.text;
                    btn.onclick = (e) => handleAnswer(index, opt.isCorrect, e.target, item.explanation);
                    optionsGrid.appendChild(btn);
                });

                // Explanation Container
                const expBox = document.createElement('div');
                expBox.className = 'explanation-box';
                expBox.id = `exp-${index}`;
                expBox.innerHTML = `
                    <div class="explanation-header"><i class="fas fa-glasses"></i> C√¥ Mai An gi·∫£i th√≠ch chi ti·∫øt:</div>
                    <div class="explanation-content">${item.explanation}</div>
                `;

                card.appendChild(qNum);
                card.appendChild(qText);
                card.appendChild(optionsGrid);
                card.appendChild(expBox);
                container.appendChild(card);
            });
        }

        function handleAnswer(cardIndex, isCorrect, btnElement, explanation) {
            const card = document.getElementById(`card-${cardIndex}`);
            
            // Prevent re-answering
            if (card.classList.contains('answered')) return;
            card.classList.add('answered');
            answeredCount++;

            const allBtns = card.querySelectorAll('.option-btn');
            
            if (isCorrect) {
                // Logic Correct
                btnElement.classList.add('correct');
                playAudio('sound-correct');
                score++;
                updateScore();
                triggerConfetti(btnElement);
            } else {
                // Logic Wrong
                btnElement.classList.add('wrong');
                playAudio('sound-wrong');
                // Highlight the correct one
                allBtns.forEach(btn => {
                    // Find the button text that corresponds to correct option in data
                    // Since we passed isCorrect, we need to find which button has isCorrect=true attached logic
                    // But wait, the closure has 'opt.isCorrect'. We need to find the correct button visually.
                    // Let's iterate options data again? Or easier:
                    // In the render loop, we didn't add data attribute. Let's fix that conceptually.
                    // Actually, we can just find the button with the text that is correct.
                    // A simpler way:
                    // We need to know which text was correct.
                    const questionObj = quizData[cardIndex]; // Note: quizData is shuffled. 
                    // This index logic matches render order because render iterates quizData.
                    const correctOption = questionObj.answerOptions.find(o => o.isCorrect);
                    
                    if (btn.innerText === correctOption.text) {
                        btn.classList.add('correct');
                    }
                });
            }

            // Show explanation
            const expBox = document.getElementById(`exp-${cardIndex}`);
            expBox.style.display = 'block';
        }

        function updateScore() {
            const scoreEl = document.getElementById('current-score');
            // Animate number
            let start = parseInt(scoreEl.innerText);
            scoreEl.innerText = score;
        }

        function playAudio(id) {
            const audio = document.getElementById(id);
            if (audio) {
                audio.currentTime = 0;
                audio.play().catch(e => console.log("Audio play failed interaction required"));
            }
        }

        function triggerConfetti(element) {
            const rect = element.getBoundingClientRect();
            // Normalized coordinates (0 to 1)
            const x = (rect.left + rect.width / 2) / window.innerWidth;
            const y = (rect.top + rect.height / 2) / window.innerHeight;

            confetti({
                particleCount: 100,
                spread: 70,
                origin: { x: x, y: y },
                colors: ['#8854C0', '#00C9A7', '#ffeb3b']
            });
        }

        function finishQuiz() {
            const modal = document.getElementById('result-modal');
            const scoreText = document.getElementById('final-score');
            const msg = document.getElementById('final-message');

            scoreText.innerText = `${score}/${totalQuestions}`;
            
            const percentage = (score / totalQuestions) * 100;
            if (percentage === 100) {
                msg.innerText = "Tuy·ªát v·ªùi! B·∫°n l√† thi√™n t√†i ng√¥n ng·ªØ! üèÜ";
                playAudio('sound-finish');
                confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
            } else if (percentage >= 80) {
                msg.innerText = "Gi·ªèi l·∫Øm! Ch·ªâ sai m·ªôt ch√∫t x√≠u th√¥i! üåü";
                playAudio('sound-finish');
            } else if (percentage >= 50) {
                msg.innerText = "C·ªë g·∫Øng l√™n! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch nh√©! üí™";
            } else {
                msg.innerText = "ƒê·ª´ng bu·ªìn! H√£y l√†m l·∫°i b√†i ƒë·ªÉ n·∫Øm ch·∫Øc ki·∫øn th·ª©c h∆°n! üìö";
            }

            modal.style.display = 'flex';
        }

        // Initialize
        window.onload = renderQuiz;

    </script>
</body>
</html>
