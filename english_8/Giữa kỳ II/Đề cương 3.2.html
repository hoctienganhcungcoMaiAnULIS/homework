<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ki·ªÉm Tra Ti·∫øng Anh - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* T·ª∞ ƒê·ªòNG H√ìA GIAO DI·ªÜN THEO CH·ª¶ ƒê·ªÄ (DYNAMIC THEME) - CH·ª¶ ƒê·ªÄ: EARTH & LIFE (üåç üåø üåßÔ∏è) */
        :root {
            --primary-color: #2D9CDB; /* Xanh d∆∞∆°ng c·ªßa n∆∞·ªõc/tr·ªùi */
            --secondary-color: #27AE60; /* Xanh l√° c·ªßa c√¢y c·ªè */
            --correct-color: #00D26A;
            --incorrect-color: #FF4757;
            --bg-light: #F0F9FF;
            --text-main: #2C3E50;
            --card-bg: #FFFFFF;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Nunito', sans-serif;
        }

        body {
            background-color: var(--bg-light);
            /* SVG Background T·ª± ƒë·ªông sinh v·ªõi Emoji ch·ªß ƒë·ªÅ M√¥i tr∆∞·ªùng / ƒê·ªùi s·ªëng */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.8) 0%, rgba(240,249,255,0.9) 100%),
                url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='30' font-size='20'%3Eüåç%3C/text%3E%3Ctext x='70' y='80' font-size='25'%3Eüåø%3C/text%3E%3Ctext x='30' y='100' font-size='15'%3EüåßÔ∏è%3C/text%3E%3Ctext x='90' y='20' font-size='18'%3Eüì±%3C/text%3E%3C/svg%3E");
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* TOP BAR */
        .top-bar {
            background: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            z-index: 10;
        }
        .header-title {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        #timer-display {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--text-main);
            background: #f1f2f6;
            padding: 5px 20px;
            border-radius: 15px;
            border: 2px solid #dfe4ea;
            width: 130px;
            text-align: center;
        }
        .btn {
            padding: 10px 20px;
            font-size: 1.1rem;
            font-weight: 800;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
        }
        .btn-start {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 5px 0 #1A73E8;
        }
        .btn-start:active { transform: translateY(5px); box-shadow: none; }
        
        .btn-submit {
            background: #FFA502;
            color: white;
            box-shadow: 0 5px 0 #E58E26;
        }
        .btn-submit:active { transform: translateY(5px); box-shadow: none; }

        /* SPLIT SCREEN */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        .left-panel, .right-panel {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        .left-panel {
            border-right: 3px dashed #dfe4ea;
            background: rgba(255, 255, 255, 0.6);
        }

        /* PASSAGE STYLES */
        .passage-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 0 #dfe4ea, 0 15px 20px rgba(0,0,0,0.05);
            margin-bottom: 30px;
            border: 2px solid #f1f2f6;
            line-height: 1.8;
            font-size: 1.15rem;
        }
        .passage-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 15px;
            text-align: center;
        }
        .passage-content {
            text-align: justify;
        }
        .btn-translate {
            background: #7BED9F;
            color: #2F3542;
            font-weight: 800;
            border: none;
            padding: 8px 15px;
            border-radius: 12px;
            box-shadow: 0 4px 0 #2ED573;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1rem;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .btn-translate:active { transform: translateY(4px); box-shadow: none; }
        .translation-box {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #E8F8F5;
            border-left: 5px solid var(--secondary-color);
            border-radius: 10px;
            font-size: 1.05rem;
            color: #2C3E50;
        }

        /* GLOSSARY TABLE */
        .glossary-wrapper {
            margin-top: 25px;
        }
        .glossary-title {
            font-weight: 800;
            color: #E15F41;
            margin-bottom: 10px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #f1f2f6;
        }
        th {
            background: #F8EFBA;
            color: #D4A106;
            font-weight: 800;
        }
        tr:last-child td { border-bottom: none; }
        .word-col { font-weight: 800; color: var(--primary-color); }
        .pos-col { font-style: italic; color: #747d8c; }

        /* QUESTION STYLES */
        .question-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 0 #dfe4ea, 0 15px 20px rgba(0,0,0,0.05);
            margin-bottom: 25px;
            border: 2px solid #f1f2f6;
        }
        .question-text {
            font-size: 1.25rem;
            font-weight: 800;
            margin-bottom: 20px;
        }
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .option-btn {
            background: white;
            border: 2px solid #dfe4ea;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-main);
            cursor: pointer;
            box-shadow: 0 6px 0 #dfe4ea;
            transition: all 0.2s ease;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .option-btn:hover:not(:disabled) {
            transform: scale(1.02);
            border-color: var(--primary-color);
        }
        .option-btn:active:not(:disabled) {
            transform: translateY(6px);
            box-shadow: none;
        }
        .option-btn.correct {
            background: var(--correct-color);
            color: white;
            border-color: var(--correct-color);
            box-shadow: 0 6px 0 #00A855;
        }
        .option-btn.wrong {
            background: var(--incorrect-color);
            color: white;
            border-color: var(--incorrect-color);
            box-shadow: 0 6px 0 #D03A47;
            animation: shake 0.4s;
        }
        .option-btn:disabled { cursor: not-allowed; }

        /* EXPLANATION BOX */
        .explanation-box {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #FFF3CD;
            border: 2px dashed #FFC107;
            border-radius: 15px;
            animation: fadeIn 0.5s ease;
        }
        .explanation-title {
            font-weight: 900;
            color: #D35400;
            margin-bottom: 10px;
            font-size: 1.2rem;
            text-transform: uppercase;
        }
        .explanation-content {
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .explanation-content b { color: #C0392B; }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-8px); }
            100% { transform: translateX(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* MODAL */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            animation: fadeIn 0.4s;
        }
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 900;
            margin: 0 auto 20px auto;
            box-shadow: 0 10px 0 #1A73E8;
        }
        .modal-message {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-main);
            margin-bottom: 20px;
        }

        /* CONFETTI CANVAS */
        #confetti-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #f1f2f6; }
        ::-webkit-scrollbar-thumb { background: #ced6e0; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #a4b0be; }

        .full-width { grid-column: span 2; }
    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <header class="top-bar">
        <div class="header-title">üë®‚Äçüè´ Ms Mai An ULIS - English Test</div>
        <div class="timer-container">
            <button class="btn btn-start" id="btn-timer" onclick="toggleTimer()">B·∫ÆT ƒê·∫¶U T√çNH GI·ªú</button>
            <div id="timer-display">10:00</div>
            <button class="btn btn-submit" onclick="submitTest()">N·ªòP B√ÄI</button>
        </div>
    </header>

    <main class="main-container">
        <div class="left-panel" id="left-panel">
            </div>

        <div class="right-panel" id="right-panel">
            </div>
    </main>

    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <div class="score-circle" id="score-circle">0/0</div>
            <div class="modal-message" id="modal-message">Tuy·ªát v·ªùi!</div>
            <p id="modal-submessage" style="margin-bottom: 20px; font-size: 1.1rem; color: #747d8c;"></p>
            <button class="btn btn-start" onclick="closeModal()">Xem L·∫°i B√†i</button>
        </div>
    </div>

    <div class="modal-overlay" id="timeout-modal">
        <div class="modal-content">
            <h2 style="color: #E15F41; font-weight: 900; font-size: 2rem; margin-bottom: 15px;">‚è∞ ƒê√£ H·∫øt Gi·ªù!</h2>
            <p style="font-size: 1.2rem; line-height: 1.6; margin-bottom: 25px;">B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c l√†m b√†i ƒë·∫ª ki·ªÉm tra ki·∫øn th·ª©c, nh∆∞ng nh·ªõ l√† trong ph√≤ng thi th·∫≠t, b·∫°n ch·ªâ n√™n l√†m m·ªôt b√†i nh∆∞ th·∫ø n√†y trong 10 ph√∫t th√¥i nha!</p>
            <button class="btn btn-start" onclick="document.getElementById('timeout-modal').style.display='none'">Ti·∫øp T·ª•c L√†m B√†i</button>
        </div>
    </div>

    <script>
        // ==========================================
        // D·ªÆ LI·ªÜU ƒê·ªÄ B√ÄI CHU·∫®N (GI·ªÆ 100% N·ªòI DUNG)
        // ==========================================
        const passagesData = [
            {
                id: "p1",
                title: "NOTICE ABOUT THE GRADUATION CEREMONY",
                content: `The School Youth Union announces the following information:<br><br>
                All Grade 12 students (13) ...... be present at the school hall by 5:00 p.m. on June 29, 2024.<br>
                Female students are requested to wear traditional (14) ......, while male students should wear white shirts with dark trousers.<br>
                (15) ...... parents require more details, please contact Mr. Cuong at 0356.211.439.<br>
                Kindly inform us if you (16) ...... anyone with you.`,
                translation: `ƒêo√†n Thanh ni√™n Tr∆∞·ªùng xin th√¥ng b√°o th√¥ng tin sau:<br><br>T·∫•t c·∫£ h·ªçc sinh kh·ªëi 12 ph·∫£i c√≥ m·∫∑t t·∫°i h·ªôi tr∆∞·ªùng nh√† tr∆∞·ªùng tr∆∞·ªõc 5:00 chi·ªÅu ng√†y 29 th√°ng 6 nƒÉm 2024.<br>H·ªçc sinh n·ªØ ƒë∆∞·ª£c y√™u c·∫ßu m·∫∑c trang ph·ª•c truy·ªÅn th·ªëng, trong khi h·ªçc sinh nam n√™n m·∫∑c √°o s∆° mi tr·∫Øng v·ªõi qu·∫ßn √¢u s·∫´m m√†u.<br>N·∫øu ph·ª• huynh c·∫ßn th√™m th√¥ng tin chi ti·∫øt, vui l√≤ng li√™n h·ªá Th·∫ßy C∆∞·ªùng qua s·ªë 0356.211.439.<br>Vui l√≤ng th√¥ng b√°o cho ch√∫ng t√¥i n·∫øu b·∫°n d·∫´n theo b·∫•t k·ª≥ ai.`,
                glossary: [
                    { word: "Announce", pos: "v", meaning: "Th√¥ng b√°o" },
                    { word: "Present", pos: "adj", meaning: "C√≥ m·∫∑t, hi·ªán di·ªán" },
                    { word: "Request", pos: "v", meaning: "Y√™u c·∫ßu, th·ªânh c·∫ßu" },
                    { word: "Traditional", pos: "adj", meaning: "Thu·ªôc v·ªÅ truy·ªÅn th·ªëng" },
                    { word: "Costume", pos: "n", meaning: "Trang ph·ª•c (ƒë·∫∑c tr∆∞ng)" },
                    { word: "Require", pos: "v", meaning: "ƒê√≤i h·ªèi, c·∫ßn ƒë·∫øn" },
                    { word: "Detail", pos: "n", meaning: "Chi ti·∫øt" },
                    { word: "Contact", pos: "v", meaning: "Li√™n l·∫°c, li√™n h·ªá" },
                    { word: "Kindly", pos: "adv", meaning: "Vui l√≤ng, l√†m ∆°n" },
                    { word: "Inform", pos: "v", meaning: "B√°o cho bi·∫øt, cung c·∫•p th√¥ng tin" }
                ]
            },
            {
                id: "p2",
                title: "SHOPPING APPLICATIONS",
                content: `If you often shop at certain stores or websites, you may already have their shopping applications installed on your phone. In some cases, you might (19) ...... an app to receive a discount on your first order or get early access to special sales. Many shopping apps offer multiple features. They can allow you (20) ...... a shopping list and send notifications such as sale alerts, (21) ...... codes, coupons, special offers, or other rewards depending on how much you (22) ...... <br><br>
                When creating an account or making your first purchase through a shopping app, you will probably be asked to save or link your (23) ...... information. Some applications automatically charge your credit card, debit card, or bank account whenever you make a purchase. (24) ...... apps allow users to add money in advance and spend that balance each time they shop. Always check the app description or user agreement before installing to understand how payments are handled and what steps to take if there is a billing issue.`,
                translation: `N·∫øu b·∫°n th∆∞·ªùng xuy√™n mua s·∫Øm t·∫°i m·ªôt s·ªë c·ª≠a h√†ng ho·∫∑c trang web nh·∫•t ƒë·ªãnh, b·∫°n c√≥ th·ªÉ ƒë√£ c√†i ƒë·∫∑t ·ª©ng d·ª•ng mua s·∫Øm c·ªßa h·ªç tr√™n ƒëi·ªán tho·∫°i. Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, b·∫°n c√≥ th·ªÉ t·∫£i xu·ªëng m·ªôt ·ª©ng d·ª•ng ƒë·ªÉ nh·∫≠n ƒë∆∞·ª£c gi·∫£m gi√° cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n ho·∫∑c c√≥ quy·ªÅn truy c·∫≠p s·ªõm v√†o c√°c ch∆∞∆°ng tr√¨nh gi·∫£m gi√° ƒë·∫∑c bi·ªát. Nhi·ªÅu ·ª©ng d·ª•ng mua s·∫Øm cung c·∫•p nhi·ªÅu t√≠nh nƒÉng. Ch√∫ng c√≥ th·ªÉ cho ph√©p b·∫°n l∆∞u tr·ªØ danh s√°ch mua s·∫Øm v√† g·ª≠i c√°c th√¥ng b√°o nh∆∞ c·∫£nh b√°o gi·∫£m gi√°, m√£ gi·∫£m gi√°, phi·∫øu gi·∫£m gi√°, ∆∞u ƒë√£i ƒë·∫∑c bi·ªát ho·∫∑c c√°c ph·∫ßn th∆∞·ªüng kh√°c t√πy thu·ªôc v√†o m·ª©c ƒë·ªô b·∫°n mua s·∫Øm.<br><br>Khi t·∫°o t√†i kho·∫£n ho·∫∑c th·ª±c hi·ªán giao d·ªãch mua h√†ng ƒë·∫ßu ti√™n qua m·ªôt ·ª©ng d·ª•ng mua s·∫Øm, b·∫°n c√≥ th·ªÉ s·∫Ω ƒë∆∞·ª£c y√™u c·∫ßu l∆∞u ho·∫∑c li√™n k·∫øt th√¥ng tin thanh to√°n c·ªßa m√¨nh. M·ªôt s·ªë ·ª©ng d·ª•ng t·ª± ƒë·ªông t√≠nh ph√≠ th·∫ª t√≠n d·ª•ng, th·∫ª ghi n·ª£ ho·∫∑c t√†i kho·∫£n ng√¢n h√†ng c·ªßa b·∫°n b·∫•t c·ª© khi n√†o b·∫°n mua h√†ng. C√°c ·ª©ng d·ª•ng kh√°c cho ph√©p ng∆∞·ªùi d√πng n·∫°p ti·ªÅn tr∆∞·ªõc v√† ti√™u s·ªë d∆∞ ƒë√≥ m·ªói l·∫ßn h·ªç mua s·∫Øm. Lu√¥n ki·ªÉm tra m√¥ t·∫£ ·ª©ng d·ª•ng ho·∫∑c th·ªèa thu·∫≠n ng∆∞·ªùi d√πng tr∆∞·ªõc khi c√†i ƒë·∫∑t ƒë·ªÉ hi·ªÉu c√°ch c√°c kho·∫£n thanh to√°n ƒë∆∞·ª£c x·ª≠ l√Ω v√† c·∫ßn th·ª±c hi·ªán c√°c b∆∞·ªõc n√†o n·∫øu c√≥ v·∫•n ƒë·ªÅ v·ªÅ thanh to√°n.`,
                glossary: [
                    { word: "Install", pos: "v", meaning: "C√†i ƒë·∫∑t" },
                    { word: "Discount", pos: "n", meaning: "S·ª± gi·∫£m gi√°, chi·∫øt kh·∫•u" },
                    { word: "Multiple", pos: "adj", meaning: "Nhi·ªÅu, ƒëa d·∫°ng" },
                    { word: "Feature", pos: "n", meaning: "T√≠nh nƒÉng, ƒë·∫∑c ƒëi·ªÉm" },
                    { word: "Notification", pos: "n", meaning: "Th√¥ng b√°o" },
                    { word: "Purchase", pos: "n/v", meaning: "S·ª± mua s·∫Øm / Mua" },
                    { word: "Link", pos: "v", meaning: "Li√™n k·∫øt, k·∫øt n·ªëi" },
                    { word: "Charge", pos: "v", meaning: "T√≠nh ph√≠" },
                    { word: "Debit card", pos: "n", meaning: "Th·∫ª ghi n·ª£" },
                    { word: "Balance", pos: "n", meaning: "S·ªë d∆∞ (t√†i kho·∫£n)" },
                    { word: "Advance", pos: "n", meaning: "(in advance) Tr∆∞·ªõc" },
                    { word: "Agreement", pos: "n", meaning: "Th·ªèa thu·∫≠n, h·ª£p ƒë·ªìng" }
                ]
            },
            {
                id: "p3",
                title: "PROTECTING THE ENVIRONMENT STARTS AT HOME",
                content: `Environmental pollution exists not only on a global scale but also inside our own homes. It is caused by household chemicals, excessive water consumption, and the large amount of waste people create and throw away every day. So what can we do to reduce this pollution? In fact, individuals can make a difference by taking simple actions in daily life.<br><br>
                First of all, recycling should be practiced regularly. Recycling allows materials to be reused many times and helps reduce the number of trees cut down to make paper products. It requires little effort. Simply placing plastic bottles, glass containers, aluminum cans, and paper into recycling bins is easy and something everyone can do.<br><br>
                Secondly, people should manage their water use more carefully at home. Water can be saved by taking quick showers instead of baths, fixing leaking taps, running dishwashers or washing machines only when they are full, and turning off the tap while brushing teeth.<br><br>
                Thirdly, reducing waste is also essential. Besides recycling, waste should be used effectively in a useful way whenever possible. For instance, food leftovers and grass cuttings can be turned into compost to nourish plants. On average, a person produces about 4.3 pounds of waste each day, but this amount can be reduced through recycling and reuse.<br><br>
                If each household does its part, we can help prevent the Earth from becoming increasingly polluted.`,
                translation: `√î nhi·ªÖm m√¥i tr∆∞·ªùng kh√¥ng ch·ªâ t·ªìn t·∫°i ·ªü quy m√¥ to√†n c·∫ßu m√† c√≤n ·ªü ngay b√™n trong ng√¥i nh√† c·ªßa ch√∫ng ta. N√≥ ƒë∆∞·ª£c g√¢y ra b·ªüi h√≥a ch·∫•t gia d·ª•ng, ti√™u th·ª• n∆∞·ªõc qu√° m·ª©c v√† l∆∞·ª£ng r√°c kh·ªïng l·ªì m√† con ng∆∞·ªùi t·∫°o ra v√† v·ª©t b·ªè m·ªói ng√†y. V·∫≠y ch√∫ng ta c√≥ th·ªÉ l√†m g√¨ ƒë·ªÉ gi·∫£m b·ªõt s·ª± √¥ nhi·ªÖm n√†y? Th·ª±c t·∫ø, c√°c c√° nh√¢n c√≥ th·ªÉ t·∫°o ra s·ª± kh√°c bi·ªát b·∫±ng c√°ch th·ª±c hi·ªán nh·ªØng h√†nh ƒë·ªông ƒë∆°n gi·∫£n trong cu·ªôc s·ªëng h√†ng ng√†y.<br><br>Tr∆∞·ªõc h·∫øt, vi·ªác t√°i ch·∫ø n√™n ƒë∆∞·ª£c th·ª±c h√†nh th∆∞·ªùng xuy√™n. T√°i ch·∫ø cho ph√©p c√°c v·∫≠t li·ªáu ƒë∆∞·ª£c t√°i s·ª≠ d·ª•ng nhi·ªÅu l·∫ßn v√† gi√∫p gi·∫£m s·ªë l∆∞·ª£ng c√¢y b·ªã ch·∫∑t ƒë·ªÉ l√†m c√°c s·∫£n ph·∫©m gi·∫•y. N√≥ ƒë√≤i h·ªèi r·∫•t √≠t n·ªó l·ª±c. ƒê∆°n gi·∫£n ch·ªâ c·∫ßn ƒë·∫∑t chai nh·ª±a, h·ªôp th·ªßy tinh, lon nh√¥m v√† gi·∫•y v√†o th√πng r√°c t√°i ch·∫ø l√† m·ªôt vi·ªác d·ªÖ d√†ng v√† ai c≈©ng c√≥ th·ªÉ l√†m ƒë∆∞·ª£c.<br><br>Th·ª© hai, m·ªçi ng∆∞·ªùi n√™n qu·∫£n l√Ω vi·ªác s·ª≠ d·ª•ng n∆∞·ªõc c·∫©n th·∫≠n h∆°n ·ªü nh√†. C√≥ th·ªÉ ti·∫øt ki·ªám n∆∞·ªõc b·∫±ng c√°ch t·∫Øm v√≤i sen nhanh thay v√¨ t·∫Øm b·ªìn, s·ª≠a v√≤i n∆∞·ªõc b·ªã r·ªâ, ch·ªâ ch·∫°y m√°y r·ª≠a b√°t ho·∫∑c m√°y gi·∫∑t khi ch√∫ng ƒë√£ ƒë·∫ßy v√† t·∫Øt v√≤i n∆∞·ªõc khi ƒëang ƒë√°nh rƒÉng.<br><br>Th·ª© ba, gi·∫£m thi·ªÉu r√°c th·∫£i c≈©ng r·∫•t thi·∫øt y·∫øu. B√™n c·∫°nh t√°i ch·∫ø, r√°c th·∫£i n√™n ƒë∆∞·ª£c s·ª≠ d·ª•ng hi·ªáu qu·∫£ m·ªôt c√°ch h·ªØu √≠ch b·∫•t c·ª© khi n√†o c√≥ th·ªÉ. V√≠ d·ª•, th·ª©c ƒÉn th·ª´a v√† c·ªè c·∫Øt b·ªè c√≥ th·ªÉ bi·∫øn th√†nh ph√¢n tr·ªôn ƒë·ªÉ nu√¥i d∆∞·ª°ng c√¢y tr·ªìng. Trung b√¨nh, m·ªôt ng∆∞·ªùi t·∫°o ra kho·∫£ng 4,3 pound r√°c m·ªói ng√†y, nh∆∞ng l∆∞·ª£ng n√†y c√≥ th·ªÉ gi·∫£m xu·ªëng th√¥ng qua t√°i ch·∫ø v√† t√°i s·ª≠ d·ª•ng.<br><br>N·∫øu m·ªói h·ªô gia ƒë√¨nh l√†m t·ªët ph·∫ßn vi·ªác c·ªßa m√¨nh, ch√∫ng ta c√≥ th·ªÉ gi√∫p ngƒÉn ch·∫∑n Tr√°i ƒê·∫•t ng√†y c√†ng tr·ªü n√™n √¥ nhi·ªÖm.`,
                glossary: [
                    { word: "Environmental", pos: "adj", meaning: "Thu·ªôc v·ªÅ m√¥i tr∆∞·ªùng" },
                    { word: "Pollution", pos: "n", meaning: "S·ª± √¥ nhi·ªÖm" },
                    { word: "Excessive", pos: "adj", meaning: "Qu√° m·ª©c, th·ª´a th√£i" },
                    { word: "Consumption", pos: "n", meaning: "S·ª± ti√™u th·ª•" },
                    { word: "Individual", pos: "n", meaning: "C√° nh√¢n" },
                    { word: "Recycle", pos: "v", meaning: "T√°i ch·∫ø" },
                    { word: "Material", pos: "n", meaning: "V·∫≠t li·ªáu, ch·∫•t li·ªáu" },
                    { word: "Essential", pos: "adj", meaning: "Thi·∫øt y·∫øu, quan tr·ªçng" },
                    { word: "Leftover", pos: "n", meaning: "Th·ª©c ƒÉn th·ª´a" },
                    { word: "Compost", pos: "n", meaning: "Ph√¢n xanh, ph√¢n h·ªØu c∆°" },
                    { word: "Nourish", pos: "v", meaning: "Nu√¥i d∆∞·ª°ng, chƒÉm s√≥c" },
                    { word: "Household", pos: "n", meaning: "H·ªô gia ƒë√¨nh" }
                ]
            },
            {
                id: "p4",
                title: "TYPHOON NARI IN VIETNAM",
                content: `Vietnam is one of the countries most affected by tropical storms each year, especially between July and October. On October 15th, 2013, (37) ................... Typhoon Nari was one of the strongest storms to hit central Vietnam in decades. (38) ..................., the storm grew rapidly and moved toward the mainland. (39) ................... More than 200 people were killed or went missing, and thousands of homes were damaged or destroyed. After hitting Vietnam, the storm continued its path to Laos, (40) ...................`,
                translation: `Vi·ªát Nam l√† m·ªôt trong nh·ªØng qu·ªëc gia b·ªã ·∫£nh h∆∞·ªüng nhi·ªÅu nh·∫•t b·ªüi c√°c c∆°n b√£o nhi·ªát ƒë·ªõi m·ªói nƒÉm, ƒë·∫∑c bi·ªát l√† t·ª´ th√°ng 7 ƒë·∫øn th√°ng 10. V√†o ng√†y 15 th√°ng 10 nƒÉm 2013, m·ªôt c∆°n b√£o m·∫°nh ƒë√£ b·∫•t ng·ªù h√¨nh th√†nh tr√™n Bi·ªÉn ƒê√¥ng. B√£o Nari l√† m·ªôt trong nh·ªØng c∆°n b√£o m·∫°nh nh·∫•t t·∫•n c√¥ng mi·ªÅn Trung Vi·ªát Nam trong nhi·ªÅu th·∫≠p k·ª∑. Mang theo s·ª©c gi√≥ m·∫°nh l√™n t·ªõi 150 km/gi·ªù, c∆°n b√£o l·ªõn nhanh ch√≥ng v√† di chuy·ªÉn v·ªÅ ph√≠a ƒë·∫•t li·ªÅn. N√≥ ƒë√£ g√¢y ra m∆∞a l·ªõn v√† l≈© l·ª•t nghi√™m tr·ªçng ·ªü nhi·ªÅu khu v·ª±c. H∆°n 200 ng∆∞·ªùi ƒë√£ thi·ªát m·∫°ng ho·∫∑c m·∫•t t√≠ch, v√† h√†ng ng√†n ng√¥i nh√† b·ªã h∆∞ h·ªèng ho·∫∑c ph√° h·ªßy. Sau khi ƒë·ªï b·ªô v√†o Vi·ªát Nam, c∆°n b√£o ti·∫øp t·ª•c ƒë∆∞·ªùng ƒëi t·ªõi L√†o, n∆°i n√≥ suy y·∫øu nh∆∞ng v·∫´n g√¢y ra thi·ªát h·∫°i ƒë√°ng k·ªÉ.`,
                glossary: [
                    { word: "Tropical", pos: "adj", meaning: "Nhi·ªát ƒë·ªõi" },
                    { word: "Typhoon", pos: "n", meaning: "B√£o nhi·ªát ƒë·ªõi (·ªü Ch√¢u √Å)" },
                    { word: "Decade", pos: "n", meaning: "Th·∫≠p k·ª∑ (10 nƒÉm)" },
                    { word: "Rapidly", pos: "adv", meaning: "M·ªôt c√°ch nhanh ch√≥ng" },
                    { word: "Mainland", pos: "n", meaning: "ƒê·∫•t li·ªÅn, l·ª•c ƒë·ªãa" },
                    { word: "Damage", pos: "v/n", meaning: "G√¢y thi·ªát h·∫°i / S·ª± thi·ªát h·∫°i" },
                    { word: "Destroy", pos: "v", meaning: "Ph√° h·ªßy, t√†n ph√°" },
                    { word: "Weaken", pos: "v", meaning: "Tr·ªü n√™n y·∫øu ƒëi, suy y·∫øu" },
                    { word: "Considerable", pos: "adj", meaning: "ƒê√°ng k·ªÉ, l·ªõn lao" }
                ]
            }
        ];

        const questionsData = [
            // PASSAGE 1
            {
                id: 13, passageId: "p1", text: "Question 13: All Grade 12 students (13) ______ be present at the school hall by 5:00 p.m.",
                options: [
                    { text: "must", isCorrect: true },
                    { text: "have to be", isCorrect: false },
                    { text: "due to", isCorrect: false },
                    { text: "going to", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ ph√°p & t·ª´ v·ª±ng:</b><br>
                - <b>must + V(nguy√™n th·ªÉ):</b> ph·∫£i l√†m g√¨ (di·ªÖn t·∫£ s·ª± b·∫Øt bu·ªôc, n·ªôi quy t·ª´ ng∆∞·ªùi n√≥i/nh√† tr∆∞·ªùng). Trang tr·ªçng v√† ph√π h·ª£p nh·∫•t trong vƒÉn b·∫£n th√¥ng b√°o.<br>
                - <b>have to be:</b> ph·∫£i c√≥ m·∫∑t. (Grammar ok nh∆∞ng "must" mang t√≠nh n·ªôi quy th√¥ng b√°o chu·∫©n h∆°n, ƒë·ªìng th·ªùi ƒë·ªÅ ƒë√£ c√≥ ch·ªØ "be present" n√™n gh√©p "have to be" th√†nh "have to be be present" l√† sai ng·ªØ ph√°p).<br>
                - <b>due to (prep):</b> b·ªüi v√¨.<br>
                - <b>going to:</b> d·ª± ƒë·ªãnh (thi·∫øu to be: are going to).<br>
                <b>2. D·ªãch c√¢u:</b> "T·∫•t c·∫£ h·ªçc sinh kh·ªëi 12 <b>ph·∫£i</b> c√≥ m·∫∑t t·∫°i h·ªôi tr∆∞·ªùng nh√† tr∆∞·ªùng tr∆∞·ªõc 5:00 chi·ªÅu."<br>
                <b>3. Ch·ªët ƒë√°p √°n: A.</b>`
            },
            {
                id: 14, passageId: "p1", text: "Question 14: Female students are requested to wear traditional (14) ______",
                options: [
                    { text: "customs", isCorrect: false },
                    { text: "activities", isCorrect: false },
                    { text: "cultures", isCorrect: false },
                    { text: "costumes", isCorrect: true }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b><br>
                - <b>customs (n):</b> phong t·ª•c t·∫≠p qu√°n.<br>
                - <b>activities (n):</b> c√°c ho·∫°t ƒë·ªông.<br>
                - <b>cultures (n):</b> vƒÉn h√≥a.<br>
                - <b>costumes (n):</b> trang ph·ª•c (nh·∫•t l√† trang ph·ª•c truy·ªÅn th·ªëng, h√≥a trang).<br>
                <b>2. D·ªãch c√¢u:</b> "H·ªçc sinh n·ªØ ƒë∆∞·ª£c y√™u c·∫ßu m·∫∑c <b>trang ph·ª•c</b> truy·ªÅn th·ªëng."<br>
                <b>3. T·∫°i sao ch·ªçn D?</b> C·ª•m t·ª´ c·ªë ƒë·ªãnh "traditional costumes" (trang ph·ª•c truy·ªÅn th·ªëng) ho√†n to√†n h·ª£p l√Ω v·ªÅ nghƒ©a khi n√≥i v·ªÅ quy ƒë·ªãnh ƒÉn m·∫∑c.`
            },
            {
                id: 15, passageId: "p1", text: "Question 15: (15) _____ parents require more details, please contact Mr. Cuong...",
                options: [
                    { text: "Had", isCorrect: false },
                    { text: "Should", isCorrect: true },
                    { text: "Were", isCorrect: false },
                    { text: "Do", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ ph√°p:</b><br>
                C√¢u n√†y l√† <b>ƒê·∫£o ng·ªØ c·ªßa c√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1</b>.<br>
                C·∫•u tr√∫c g·ªëc: <i>If parents require more details...</i><br>
                C·∫•u tr√∫c ƒë·∫£o ng·ªØ: <i><b>Should</b> + S + V(nguy√™n th·ªÉ)...</i><br>
                <b>2. Ph√¢n t√≠ch ƒë√°p √°n sai:</b><br>
                - ƒê·∫£o ng·ªØ lo·∫°i 2 d√πng "Were", lo·∫°i 3 d√πng "Had". ·ªû ƒë√¢y ƒë·ªông t·ª´ "require" nguy√™n th·ªÉ, v√† v·∫ø sau l√† m·ªánh l·ªánh (please contact) -> Ch·ªâ c√≥ th·ªÉ l√† lo·∫°i 1.<br>
                <b>3. D·ªãch c√¢u:</b> "<b>N·∫øu</b> ph·ª• huynh c·∫ßn th√™m chi ti·∫øt, vui l√≤ng li√™n h·ªá Th·∫ßy C∆∞·ªùng..."<br>
                <b>4. Ch·ªët ƒë√°p √°n: B.</b>`
            },
            {
                id: 16, passageId: "p1", text: "Question 16: Kindly inform us if you (16) _____ anyone with you.",
                options: [
                    { text: "brings", isCorrect: false },
                    { text: "bring", isCorrect: true },
                    { text: "bringing", isCorrect: false },
                    { text: "have brought", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ ph√°p:</b><br>
                ƒê√¢y l√† c√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1, v·∫ø ch√≠nh l√† c√¢u m·ªánh l·ªánh "Kindly inform us...". M·ªánh ƒë·ªÅ If s·∫Ω d√πng th√¨ Hi·ªán t·∫°i ƒë∆°n.<br>
                Ch·ªß ng·ªØ l√† "you" (ng√¥i th·ª© 2) -> ƒê·ªông t·ª´ kh√¥ng chia (V_nguy√™n th·ªÉ).<br>
                <b>2. Ph√¢n t√≠ch ƒë√°p √°n:</b><br>
                - A. brings: sai v√¨ "you" kh√¥ng c·ªông V-s.<br>
                - B. bring: ch√≠nh x√°c.<br>
                - C. bringing: sai c·∫•u tr√∫c.<br>
                <b>3. D·ªãch c√¢u:</b> "Vui l√≤ng th√¥ng b√°o cho ch√∫ng t√¥i n·∫øu b·∫°n <b>d·∫´n theo</b> b·∫•t k·ª≥ ai."`
            },

            // PASSAGE 2
            {
                id: 19, passageId: "p2", text: "Question 19: In some cases, you might (19) ____ an app to receive a discount...",
                options: [
                    { text: "upload", isCorrect: false },
                    { text: "download", isCorrect: true },
                    { text: "report", isCorrect: false },
                    { text: "uninstall", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b><br>
                - A. upload (v): t·∫£i l√™n.<br>
                - B. download (v): t·∫£i xu·ªëng.<br>
                - C. report (v): b√°o c√°o.<br>
                - D. uninstall (v): g·ª° c√†i ƒë·∫∑t.<br>
                <b>2. D·ªãch c√¢u:</b> "Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, b·∫°n c√≥ th·ªÉ <b>t·∫£i xu·ªëng</b> m·ªôt ·ª©ng d·ª•ng ƒë·ªÉ nh·∫≠n ƒë∆∞·ª£c gi·∫£m gi√°..."<br>
                <b>3. T·∫°i sao ch·ªçn B?</b> D·ª±a v√†o ng·ªØ c·∫£nh ƒë·ªÉ nh·∫≠n ƒë∆∞·ª£c gi·∫£m gi√° th√¨ ng∆∞·ªùi d√πng ph·∫£i "t·∫£i" (download) app v·ªÅ m√°y t√≠nh/ƒëi·ªán tho·∫°i c·ªßa m√¨nh.`
            },
            {
                id: 20, passageId: "p2", text: "Question 20: They can allow you (20) ____ a shopping list...",
                options: [
                    { text: "store", isCorrect: false },
                    { text: "to store", isCorrect: true },
                    { text: "storing", isCorrect: false },
                    { text: "stored", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ ph√°p:</b><br>
                C·∫•u tr√∫c: <b>allow somebody TO do something</b> (cho ph√©p ai l√†m g√¨).<br>
                <b>2. D·ªãch c√¢u:</b> "Ch√∫ng c√≥ th·ªÉ cho ph√©p b·∫°n <b>l∆∞u tr·ªØ</b> danh s√°ch mua s·∫Øm..."<br>
                <b>3. T·∫°i sao ch·ªçn B?</b> ƒê√¢y l√† ng·ªØ ph√°p c∆° b·∫£n, sau 'allow you' b·∫Øt bu·ªôc d√πng ƒë·ªông t·ª´ nguy√™n th·ªÉ c√≥ 'to' (to store).`
            },
            {
                id: 21, passageId: "p2", text: "Question 21: ...send notifications such as sale alerts, (21) ____ codes, coupons...",
                options: [
                    { text: "password", isCorrect: false },
                    { text: "recovery", isCorrect: false },
                    { text: "account", isCorrect: false },
                    { text: "discount", isCorrect: true }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng (S·ª± k·∫øt h·ª£p t·ª´ - Collocation):</b><br>
                - A. password (m·∫≠t kh·∫©u).<br>
                - B. recovery (kh√¥i ph·ª•c).<br>
                - C. account (t√†i kho·∫£n).<br>
                - D. discount (gi·∫£m gi√°).<br>
                <b>2. D·ªãch c√¢u:</b> "...g·ª≠i c√°c th√¥ng b√°o nh∆∞ c·∫£nh b√°o gi·∫£m gi√°, m√£ <b>gi·∫£m gi√°</b>, phi·∫øu gi·∫£m gi√°..."<br>
                <b>3. T·∫°i sao ch·ªçn D?</b> "Discount codes" l√† m·ªôt c·ª•m t·ª´ c·ªë ƒë·ªãnh nghƒ©a l√† "m√£ gi·∫£m gi√°", ho√†n to√†n ph√π h·ª£p v·ªõi b·ªëi c·∫£nh ·ª©ng d·ª•ng mua s·∫Øm (sale alerts, coupons).`
            },
            {
                id: 22, passageId: "p2", text: "Question 22: ...or other rewards depending on how much you (22) ____.",
                options: [
                    { text: "buy", isCorrect: true },
                    { text: "make", isCorrect: false },
                    { text: "sell", isCorrect: false },
                    { text: "take", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch t·ª´ v·ª±ng d·ª±a v√†o ng·ªØ c·∫£nh:</b><br>
                B√†i vi·∫øt ƒëang n√≥i v·ªÅ "Shopping applications" (·ª©ng d·ª•ng mua s·∫Øm) v√† g√≥c nh√¨n c·ªßa ng∆∞·ªùi d√πng (kh√°ch h√†ng).<br>
                - buy (v): mua.<br>
                - sell (v): b√°n (ch·ªâ d√†nh cho ng∆∞·ªùi b√°n).<br>
                <b>2. D·ªãch c√¢u:</b> "...ho·∫∑c c√°c ph·∫ßn th∆∞·ªüng kh√°c t√πy thu·ªôc v√†o m·ª©c ƒë·ªô b·∫°n <b>mua s·∫Øm</b>."<br>
                <b>3. T·∫°i sao ch·ªçn A?</b> Kh√°ch h√†ng th√¨ ph·∫£i l√† ng∆∞·ªùi "buy" (mua), nh·∫≠n ph·∫ßn th∆∞·ªüng d·ª±a tr√™n s·ªë l∆∞·ª£ng h√†ng h√≥a h·ªç ƒë√£ mua.`
            },
            {
                id: 23, passageId: "p2", text: "Question 23: ...be asked to save or link your (23) ____ information.",
                options: [
                    { text: "paid", isCorrect: false },
                    { text: "payment", isCorrect: true },
                    { text: "paying", isCorrect: false },
                    { text: "payer", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch t·ª´ lo·∫°i & T·ª´ gh√©p (Compound Noun):</b><br>
                C·∫ßn m·ªôt danh t·ª´ ƒë·ª©ng tr∆∞·ªõc "information" ƒë·ªÉ t·∫°o th√†nh danh t·ª´ gh√©p c√≥ nghƒ©a.<br>
                - payment (n): s·ª± thanh to√°n -> <b>payment information</b>: th√¥ng tin thanh to√°n (bao g·ªìm s·ªë th·∫ª, ng√¢n h√†ng...).<br>
                <b>2. D·ªãch c√¢u:</b> "...b·∫°n c√≥ th·ªÉ s·∫Ω ƒë∆∞·ª£c y√™u c·∫ßu l∆∞u ho·∫∑c li√™n k·∫øt th√¥ng tin <b>thanh to√°n</b> c·ªßa m√¨nh."<br>
                <b>3. T·∫°i sao ch·ªçn B?</b> C√¢u sau nh·∫Øc ƒë·∫øn "credit card, debit card" (th·∫ª t√≠n d·ª•ng, th·∫ª ghi n·ª£) n√™n ch·∫Øc ch·∫Øn ƒë√¢y l√† th√¥ng tin thanh to√°n.`
            },
            {
                id: 24, passageId: "p2", text: "Question 24: (24) ____ apps allow users to add money in advance...",
                options: [
                    { text: "Other", isCorrect: true },
                    { text: "Another", isCorrect: false },
                    { text: "Others", isCorrect: false },
                    { text: "One another", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ ph√°p L∆∞·ª£ng t·ª´:</b><br>
                - <b>Other + N(s·ªë nhi·ªÅu):</b> nh·ªØng c√°i kh√°c. (·ªû ƒë√¢y "apps" c√≥ 's').<br>
                - <b>Another + N(s·ªë √≠t):</b> m·ªôt c√°i kh√°c.<br>
                - <b>Others:</b> = Other + N(s·ªë nhi·ªÅu), ƒë√≥ng vai tr√≤ l√†m ƒê·∫°i t·ª´, kh√¥ng ƒë·ª©ng tr∆∞·ªõc danh t·ª´ n·ªØa.<br>
                <b>2. D·ªãch c√¢u:</b> "C√°c ·ª©ng d·ª•ng <b>kh√°c</b> cho ph√©p ng∆∞·ªùi d√πng n·∫°p ti·ªÅn tr∆∞·ªõc..."<br>
                <b>3. T·∫°i sao ch·ªçn A?</b> ƒê·ª©ng tr∆∞·ªõc danh t·ª´ s·ªë nhi·ªÅu "apps", ta b·∫Øt bu·ªôc d√πng t√≠nh t·ª´ "Other".`
            },

            // PASSAGE 3
            {
                id: 31, passageId: "p3", text: "Question 31. What is the passage mainly about?",
                options: [
                    { text: "A. Recycling is the only way to help the environment.", isCorrect: false },
                    { text: "B. Reducing water usage and waste are more important than recycling.", isCorrect: false },
                    { text: "C. Individuals can help reduce pollution through simple actions at home.", isCorrect: true },
                    { text: "D. Pollution in homes is caused only by household chemicals.", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch c√¢u h·ªèi:</b> √ù ch√≠nh c·ªßa ƒëo·∫°n vƒÉn l√† g√¨?<br>
                <b>2. D·∫´n ch·ª©ng trong b√†i:</b> Ngay ƒëo·∫°n 1 c√≥ c√¢u ch·ªß ƒë·ªÅ ch·ªët √Ω: <i>"So what can we do to reduce this pollution? In fact, <b>individuals can make a difference by taking simple actions in daily life.</b>"</i> (Th·ª±c t·∫ø, c√°c c√° nh√¢n c√≥ th·ªÉ t·∫°o ra s·ª± kh√°c bi·ªát b·∫±ng c√°ch th·ª±c hi·ªán nh·ªØng h√†nh ƒë·ªông ƒë∆°n gi·∫£n trong cu·ªôc s·ªëng h√†ng ng√†y).<br>
                <b>3. Ph√¢n t√≠ch c√°c ƒë√°p √°n sai:</b><br>
                - A sai v√¨ c√≥ ch·ªØ "only way" (c√°ch duy nh·∫•t) -> qu√° tuy·ªát ƒë·ªëi.<br>
                - B sai v√¨ b√†i kh√¥ng h·ªÅ so s√°nh c√°i n√†o "more important" (quan tr·ªçng h∆°n).<br>
                - D sai v√¨ ƒëo·∫°n 1 n√≥i √¥ nhi·ªÖm c√≤n do "excessive water consumption... waste" ch·ª© kh√¥ng ph·∫£i "only by household chemicals".<br>
                <b>4. Ch·ªët ƒë√°p √°n C.</b>`
            },
            {
                id: 32, passageId: "p3", text: "Question 32. How does recycling help to reduce waste according to the passage?",
                options: [
                    { text: "A. Plants need to develop", isCorrect: false },
                    { text: "B. Waste can be recycled and reused", isCorrect: true },
                    { text: "C. A person can do it in his home", isCorrect: false },
                    { text: "D. An average man produces compost for plants", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch c√¢u h·ªèi:</b> T√°i ch·∫ø gi√∫p gi·∫£m r√°c th·∫£i nh∆∞ th·∫ø n√†o theo ƒëo·∫°n vƒÉn?<br>
                <b>2. D·∫´n ch·ª©ng trong b√†i (ƒêo·∫°n 2 & 4):</b> <i>"Recycling allows materials to be reused many times..."</i> (T√°i ch·∫ø cho ph√©p v·∫≠t li·ªáu ƒë∆∞·ª£c t√°i s·ª≠ d·ª•ng nhi·ªÅu l·∫ßn) v√† <i>"...this amount can be reduced through recycling and reuse"</i> (l∆∞·ª£ng r√°c n√†y c√≥ th·ªÉ gi·∫£m xu·ªëng th√¥ng qua t√°i ch·∫ø v√† t√°i s·ª≠ d·ª•ng).<br>
                <b>3. T·∫°i sao ch·ªçn B?</b> ƒê√°p √°n B "R√°c th·∫£i c√≥ th·ªÉ ƒë∆∞·ª£c t√°i ch·∫ø v√† t√°i s·ª≠ d·ª•ng" t√≥m t·∫Øt ch√≠nh x√°c logic c·ªßa b√†i ƒë·ªçc v·ªÅ vi·ªác l√†m sao l∆∞·ª£ng r√°c b·ªã gi·∫£m ƒëi.`
            },
            {
                id: 33, passageId: "p3", text: "Question 33. Recycling helps people to ____.",
                options: [
                    { text: "A. Never cut down trees", isCorrect: false },
                    { text: "B. Place garbage bins easily", isCorrect: false },
                    { text: "C. produce more paper products", isCorrect: false },
                    { text: "D. use products again and again", isCorrect: true }
                ],
                explanation: `<b>1. D·∫´n ch·ª©ng trong b√†i (ƒêo·∫°n 2):</b> <i>"Recycling allows materials to be <b>reused many times</b>..."</i><br>
                <b>2. Ph√¢n t√≠ch t·ª´ ƒë·ªìng nghƒ©a (Paraphrase):</b><br>
                - "reused many times" (t√°i s·ª≠ d·ª•ng nhi·ªÅu l·∫ßn) = "use products again and again" (s·ª≠ d·ª•ng s·∫£n ph·∫©m l·∫∑p ƒëi l·∫∑p l·∫°i).<br>
                <b>3. Ph√¢n t√≠ch ƒë√°p √°n sai:</b><br>
                - A sai v√¨ b√†i n√≥i "reduce the number of trees" (gi·∫£m s·ªë c√¢y) ch·ª© kh√¥ng ph·∫£i "Never" (kh√¥ng bao gi·ªù ch·∫∑t).<br>
                - C sai v√¨ t√°i ch·∫ø gi√∫p GI·∫¢M vi·ªác s·∫£n xu·∫•t m·ªõi ch·ª© kh√¥ng ph·∫£i "produce more" (s·∫£n xu·∫•t th√™m).<br>
                <b>4. Ch·ªët ƒë√°p √°n D.</b>`
            },
            {
                id: 34, passageId: "p3", text: "Question 34. Which of the following is NOT mentioned as a cause of pollution?",
                options: [
                    { text: "A. Water in rivers", isCorrect: true },
                    { text: "B. water from households", isCorrect: false },
                    { text: "C. wastes", isCorrect: false },
                    { text: "D. house chemicals", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch c√¢u h·ªèi:</b> ƒêi·ªÅu n√†o KH√îNG ƒê∆Ø·ª¢C NH·∫ÆC ƒê·∫æN nh∆∞ m·ªôt nguy√™n nh√¢n g√¢y √¥ nhi·ªÖm?<br>
                <b>2. D·∫´n ch·ª©ng trong b√†i (ƒêo·∫°n 1):</b> <i>"It is caused by <b>household chemicals</b>, excessive <b>water consumption</b>, and the large amount of <b>waste</b>..."</i> (N√≥ ƒë∆∞·ª£c g√¢y ra b·ªüi h√≥a ch·∫•t gia d·ª•ng, ti√™u th·ª• n∆∞·ªõc qu√° m·ª©c, v√† l∆∞·ª£ng r√°c kh·ªïng l·ªì...)<br>
                <b>3. ƒê·ªëi chi·∫øu ƒë√°p √°n:</b><br>
                - B t∆∞∆°ng ·ª©ng v·ªõi "water consumption" (t·∫°i nh√†).<br>
                - C t∆∞∆°ng ·ª©ng v·ªõi "waste".<br>
                - D t∆∞∆°ng ·ª©ng v·ªõi "household chemicals".<br>
                -> Xuy√™n su·ªët b√†i kh√¥ng h·ªÅ nh·∫Øc ƒë·∫øn "Water in rivers" (N∆∞·ªõc s√¥ng).<br>
                <b>4. Ch·ªët ƒë√°p √°n A.</b>`
            },
            {
                id: 35, passageId: "p3", text: "Question 35. The word ‚ÄúIt‚Äù in paragraph 2 refers to ______.",
                options: [
                    { text: "A. Cutting down", isCorrect: false },
                    { text: "B. the number", isCorrect: false },
                    { text: "C. recycling", isCorrect: true },
                    { text: "D. effort", isCorrect: false }
                ],
                explanation: `<b>1. D·∫´n ch·ª©ng trong b√†i (ƒêo·∫°n 2):</b> <i>"<b>Recycling</b> allows materials to be reused... <b>It</b> requires little effort."</i><br>
                <b>2. D·ªãch nghƒ©a:</b> "<b>T√°i ch·∫ø</b> cho ph√©p v·∫≠t li·ªáu ƒë∆∞·ª£c t√°i s·ª≠ d·ª•ng... <b>N√≥</b> (Vi·ªác t√°i ch·∫ø) ƒë√≤i h·ªèi r·∫•t √≠t n·ªó l·ª±c."<br>
                <b>3. Suy lu·∫≠n:</b> ƒê·∫°i t·ª´ "It" lu√¥n thay th·∫ø cho danh t·ª´ s·ªë √≠t ho·∫∑c danh ƒë·ªông t·ª´ xu·∫•t hi·ªán ngay c√¢u tr∆∞·ªõc ƒë√≥ ƒë·ªÉ tr√°nh l·∫∑p t·ª´. Ch·ªß th·ªÉ h√†nh ƒë·ªông ch√≠nh ƒëang ƒë∆∞·ª£c n√≥i t·ªõi ·ªü ƒë√¢y l√† "Recycling".<br>
                <b>4. Ch·ªët ƒë√°p √°n C.</b>`
            },
            {
                id: 36, passageId: "p3", text: "Question 36. The word ‚Äúeffectively‚Äù in paragraph 4 is closest in meaning to the opposite of ______.",
                options: [
                    { text: "A. Attractively", isCorrect: false },
                    { text: "B. worthlessly", isCorrect: true },
                    { text: "C. harmfully", isCorrect: false },
                    { text: "D. efficiently", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch y√™u c·∫ßu TRICKY c·ªßa ƒë·ªÅ:</b> "closest in meaning to the <b>opposite</b> of" -> T√¨m T·ª™ TR√ÅI NGHƒ®A v·ªõi t·ª´ "effectively".<br>
                <b>2. Ph√¢n t√≠ch t·ª´ v·ª±ng:</b><br>
                - effectively (adv): m·ªôt c√°ch hi·ªáu qu·∫£, h·ªØu √≠ch.<br>
                - attractively (adv): h·∫•p d·∫´n.<br>
                - worthlessly (adv): v√¥ gi√° tr·ªã, kh√¥ng c√≥ t√°c d·ª•ng.<br>
                - harmfully (adv): c√≥ h·∫°i.<br>
                - efficiently (adv): hi·ªáu qu·∫£ (ƒê√¢y l√† t·ª´ ƒê·ªíNG NGHƒ®A).<br>
                <b>3. T·∫°i sao ch·ªçn B?</b> Tr√°i nghƒ©a v·ªõi "hi·ªáu qu·∫£/h·ªØu √≠ch" ch√≠nh l√† "v√¥ gi√° tr·ªã/kh√¥ng mang l·∫°i l·ª£i √≠ch g√¨" (worthlessly). R·∫•t nhi·ªÅu h·ªçc sinh b·ªã l·ª´a ch·ªçn D v√¨ kh√¥ng ƒë·ªçc k·ªπ ch·ªØ "opposite".`
            },

            // PASSAGE 4
            {
                id: 37, passageId: "p4", text: "Question 37. On October 15th, 2013, (37) ________.",
                options: [
                    { text: "A. It caused heavy rainfall and serious flooding in many areas", isCorrect: false },
                    { text: "B. a powerful storm suddenly formed over the East Sea", isCorrect: true },
                    { text: "C. Bringing strong winds of up to 150 kilometres an hour", isCorrect: false },
                    { text: "D. where it weakened but still caused considerable damage", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ c·∫£nh:</b> V·ªã tr√≠ 37 n·∫±m ·ªü ƒë·∫ßu chu·ªói s·ª± ki·ªán, ngay sau m·ªëc th·ªùi gian "On October 15th, 2013". C·∫ßn m·ªôt m·ªánh ƒë·ªÅ gi·ªõi thi·ªáu s·ª± xu·∫•t hi·ªán c·ªßa c∆°n b√£o Nari.<br>
                <b>2. Ph√¢n t√≠ch ƒë√°p √°n:</b><br>
                - B. "m·ªôt c∆°n b√£o m·∫°nh b·∫•t ng·ªù h√¨nh th√†nh tr√™n Bi·ªÉn ƒê√¥ng" -> R·∫•t h·ª£p l√Ω ƒë·ªÉ m·ªü ƒë·∫ßu c√¢u chuy·ªán v·ªÅ b√£o Nari xu·∫•t hi·ªán.<br>
                - C√°c ƒë√°p √°n kh√°c: A (g√¢y l≈© l·ª•t - ch∆∞a b√£o ƒë√£ l≈©), C (mang theo gi√≥ - sai ng·ªØ ph√°p v√¨ thi·∫øu ch·ªß ng·ªØ n·∫øu ƒë·ª©ng ƒë·ªôc l·∫≠p sau d·∫•u ph·∫©y c·ªßa tr·∫°ng ng·ªØ th·ªùi gian), D (n∆°i n√≥ suy y·∫øu - sai logic).<br>
                <b>3. Ch·ªët ƒë√°p √°n B.</b>`
            },
            {
                id: 38, passageId: "p4", text: "Question 38. (38) ________, the storm grew rapidly and moved toward the mainland.",
                options: [
                    { text: "A. It caused heavy rainfall and serious flooding in many areas", isCorrect: false },
                    { text: "B. a powerful storm suddenly formed over the East Sea", isCorrect: false },
                    { text: "C. Bringing strong winds of up to 150 kilometres an hour", isCorrect: true },
                    { text: "D. where it weakened but still caused considerable damage", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ ph√°p:</b> V·ªã tr√≠ 38 n·∫±m ƒë·∫ßu c√¢u, ngƒÉn c√°ch v·ªõi m·ªánh ƒë·ªÅ ch√≠nh b·∫±ng d·∫•u ph·∫©y. ƒê√¢y l√† v·ªã tr√≠ l√Ω t∆∞·ªüng cho m·ªôt c·ª•m Ph√¢n t·ª´ hi·ªán t·∫°i (V-ing) ƒë√≥ng vai tr√≤ tr·∫°ng ng·ªØ ch·ªâ s·ª± ƒë·ªìng th·ªùi ho·∫∑c nguy√™n nh√¢n.<br>
                <b>2. D·ªãch nghƒ©a:</b> "<b>Mang theo s·ª©c gi√≥ m·∫°nh l√™n t·ªõi 150 km/gi·ªù</b>, c∆°n b√£o l·ªõn nhanh ch√≥ng v√† di chuy·ªÉn v·ªÅ ph√≠a ƒë·∫•t li·ªÅn."<br>
                <b>3. Ch·ªët ƒë√°p √°n C.</b>`
            },
            {
                id: 39, passageId: "p4", text: "Question 39. (39) ________. More than 200 people were killed or went missing...",
                options: [
                    { text: "A. It caused heavy rainfall and serious flooding in many areas", isCorrect: true },
                    { text: "B. a powerful storm suddenly formed over the East Sea", isCorrect: false },
                    { text: "C. Bringing strong winds of up to 150 kilometres an hour", isCorrect: false },
                    { text: "D. where it weakened but still caused considerable damage", isCorrect: false }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch logic:</b> C√¢u tr∆∞·ªõc n√≥i b√£o di chuy·ªÉn v√†o ƒë·∫•t li·ªÅn. C√¢u sau n√≥i h·∫≠u qu·∫£ "H∆°n 200 ng∆∞·ªùi ch·∫øt ho·∫∑c m·∫•t t√≠ch, nh√† c·ª≠a b·ªã ph√° h·ªßy". V·ªã tr√≠ 39 c·∫ßn m·ªôt c√¢u mi√™u t·∫£ s·ª©c t√†n ph√° tr·ª±c ti·∫øp c·ªßa b√£o khi v√†o ƒë·∫•t li·ªÅn.<br>
                <b>2. D·ªãch nghƒ©a:</b> "<b>N√≥ ƒë√£ g√¢y ra m∆∞a l·ªõn v√† l≈© l·ª•t nghi√™m tr·ªçng ·ªü nhi·ªÅu khu v·ª±c.</b> H∆°n 200 ng∆∞·ªùi ƒë√£ thi·ªát m·∫°ng..." S·ª± li√™n k·∫øt nh√¢n qu·∫£ c·ª±c k·ª≥ m∆∞·ª£t m√†.<br>
                <b>3. Ch·ªët ƒë√°p √°n A.</b>`
            },
            {
                id: 40, passageId: "p4", text: "Question 40. ...the storm continued its path to Laos, (40) ________.",
                options: [
                    { text: "A. It caused heavy rainfall and serious flooding in many areas", isCorrect: false },
                    { text: "B. a powerful storm suddenly formed over the East Sea", isCorrect: false },
                    { text: "C. Bringing strong winds of up to 150 kilometres an hour", isCorrect: false },
                    { text: "D. where it weakened but still caused considerable damage", isCorrect: true }
                ],
                explanation: `<b>1. Ph√¢n t√≠ch ng·ªØ ph√°p:</b> V·ªã tr√≠ 40 ƒë·ª©ng ngay sau m·ªôt ƒë·ªãa ƒëi·ªÉm "Laos" (L√†o) v√† c√≥ d·∫•u ph·∫©y. C·∫ßn m·ªôt M·ªánh ƒë·ªÅ quan h·ªá b·∫Øt ƒë·∫ßu b·∫±ng ƒë·∫°i t·ª´ quan h·ªá ch·ªâ n∆°i ch·ªën "where" (t·∫°i n∆°i ƒë√≥).<br>
                <b>2. D·ªãch nghƒ©a:</b> "...c∆°n b√£o ti·∫øp t·ª•c ƒë∆∞·ªùng ƒëi t·ªõi L√†o, <b>n∆°i n√≥ suy y·∫øu nh∆∞ng v·∫´n g√¢y ra thi·ªát h·∫°i ƒë√°ng k·ªÉ.</b>"<br>
                <b>3. Ch·ªët ƒë√°p √°n D.</b> Tuy·ªát ƒë·ªëi ch√≠nh x√°c v·ªÅ c·∫£ ng·ªØ ph√°p l·∫´n nghƒ©a.`
            }
        ];

        let score = 0;
        let totalQuestions = questionsData.length;
        let answeredQuestions = 0;

        // ==========================================
        // KH·ªûI T·∫†O GIAO DI·ªÜN
        // ==========================================
        function initApp() {
            const leftPanel = document.getElementById('left-panel');
            const rightPanel = document.getElementById('right-panel');

            // Render Passages
            passagesData.forEach(p => {
                let glossaryHtml = '';
                if (p.glossary.length > 0) {
                    glossaryHtml = `
                        <div class="glossary-wrapper">
                            <div class="glossary-title">üìö Vocabulary Glossary (T·ª´ v·ª±ng B1-C2)</div>
                            <table>
                                <tr><th>Word</th><th>Part of Speech</th><th>Meaning</th></tr>
                                ${p.glossary.map(g => `
                                    <tr>
                                        <td class="word-col">${g.word}</td>
                                        <td class="pos-col">${g.pos}</td>
                                        <td>${g.meaning}</td>
                                    </tr>
                                `).join('')}
                            </table>
                        </div>
                    `;
                }

                const passageHtml = `
                    <div class="passage-card" id="passage-${p.id}">
                        <div class="passage-title">${p.title}</div>
                        <div class="passage-content">${p.content}</div>
                        <button class="btn-translate" onclick="toggleTranslation('${p.id}')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 8l6 6M4 14l6-6 2-3M2 5h12M7 2h1M22 22l-5-10-5 10M14 18h6"></path></svg>
                            B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶
                        </button>
                        <div class="translation-box" id="trans-${p.id}">
                            <b>B·∫£n d·ªãch ti·∫øng Vi·ªát:</b><br><br>
                            ${p.translation}
                        </div>
                        ${glossaryHtml}
                    </div>
                `;
                leftPanel.innerHTML += passageHtml;
            });

            // Render Questions
            questionsData.forEach((q, index) => {
                // Thu·∫≠t to√°n x√°o tr·ªôn ƒë√°p √°n (Shuffle)
                let shuffledOptions = [...q.options];
                for (let i = shuffledOptions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
                }

                // Ch·ªØ c√°i A, B, C, D ƒë·ªông
                const labels = ['A', 'B', 'C', 'D'];

                let optionsHtml = '';
                shuffledOptions.forEach((opt, optIdx) => {
                    // N·∫øu l√† c√¢u 37-40 (text d√†i), cho n√∫t d√†i full width
                    const isLongText = opt.text.length > 30 ? 'full-width' : '';
                    
                    // N·∫øu l√† c√¢u ƒëi·ªÅn khuy·∫øt ABCD, render nh√£n ABCD
                    let displayLabel = labels[optIdx] + ". ";
                    if(opt.text.startsWith("A.") || opt.text.startsWith("B.") || opt.text.startsWith("C.") || opt.text.startsWith("D.")) {
                        displayLabel = ""; // Tr√°nh tr√πng l·∫∑p n·∫øu ƒë√°p √°n ƒë√£ c√≥ s·∫µn A. B. C. D.
                    }

                    optionsHtml += `
                        <button class="option-btn ${isLongText}" id="btn-${q.id}-${optIdx}" onclick="checkAnswer(${q.id}, ${optIdx}, ${opt.isCorrect})">
                            ${displayLabel}${opt.text}
                        </button>
                    `;
                });

                const qHtml = `
                    <div class="question-card" id="qcard-${q.id}">
                        <div class="question-text">${q.text}</div>
                        <div class="options-grid" id="options-${q.id}">
                            ${optionsHtml}
                        </div>
                        <div class="explanation-box" id="exp-${q.id}">
                            <div class="explanation-title">üí° Gi·∫£i th√≠ch chi ti·∫øt t·ª´ Th·∫°c sƒ© Mai An:</div>
                            <div class="explanation-content">${q.explanation}</div>
                        </div>
                    </div>
                `;
                rightPanel.innerHTML += qHtml;
            });
        }

        // ==========================================
        // LOGIC T∆Ø∆†NG T√ÅC
        // ==========================================
        function toggleTranslation(id) {
            const box = document.getElementById(`trans-${id}`);
            if (box.style.display === 'block') {
                box.style.display = 'none';
            } else {
                box.style.display = 'block';
                box.style.animation = 'fadeIn 0.4s';
            }
        }

        function checkAnswer(qId, optIdx, isCorrect) {
            const qCard = document.getElementById(`qcard-${qId}`);
            const buttons = document.querySelectorAll(`#options-${qId} .option-btn`);
            
            // Kh√≥a c√°c n√∫t sau khi ch·ªçn
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.style.cursor = 'default';
            });

            const clickedBtn = document.getElementById(`btn-${qId}-${optIdx}`);

            if (isCorrect) {
                clickedBtn.classList.add('correct');
                playDing();
                fireConfetti();
                score++;
            } else {
                clickedBtn.classList.add('wrong');
                playWrong();
                // T√¨m n√∫t ƒë√∫ng ƒë·ªÉ b√¥i xanh
                const qData = questionsData.find(q => q.id === qId);
                // V√¨ ƒë√£ x√°o tr·ªôn, ph·∫£i t√¨m l·∫°i trong DOM n√∫t n√†o ƒëang ch·ª©a text c·ªßa ƒë√°p √°n ƒë√∫ng.
                // C√°ch an to√†n h∆°n: Duy·ªát m·∫£ng buttons, ta truy·ªÅn isCorrect v√†o onclick, nh∆∞ng kh√¥ng truy·ªÅn v·ªã tr√≠ th·∫≠t.
                // X·ª≠ l√Ω t√¨m n√∫t ƒë√∫ng:
                buttons.forEach(btn => {
                    const btnHtml = btn.innerHTML;
                    const correctText = qData.options.find(o => o.isCorrect).text;
                    if (btnHtml.includes(correctText)) {
                        btn.classList.add('correct');
                        btn.style.boxShadow = '0 0 15px #00D26A';
                    }
                });
            }

            // Hi·ªán gi·∫£i th√≠ch chi ti·∫øt
            const expBox = document.getElementById(`exp-${qId}`);
            expBox.style.display = 'block';

            // Cu·ªôn ƒëo·∫°n vƒÉn t∆∞∆°ng ·ª©ng b√™n tr√°i
            const passageId = questionsData.find(q => q.id === qId).passageId;
            const passageEl = document.getElementById(`passage-${passageId}`);
            document.getElementById('left-panel').scrollTo({
                top: passageEl.offsetTop - 30,
                behavior: 'smooth'
            });

            answeredQuestions++;
        }

        // ==========================================
        // WEB AUDIO API (KH√îNG D√ôNG FILE NGO√ÄI)
        // ==========================================
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playDing() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(1, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        }

        function playWrong() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(300, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(150, audioCtx.currentTime + 0.5);
            gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        }

        // ==========================================
        // JS CONFETTI (KH√îNG D√ôNG TH∆Ø VI·ªÜN NGO√ÄI)
        // ==========================================
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];

        function fireConfetti() {
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height / 2 - canvas.height/2,
                    r: Math.random() * 6 + 2,
                    dx: Math.random() * 4 - 2,
                    dy: Math.random() * 5 + 2,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`
                });
            }
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particles.length; i++) {
                let p = particles[i];
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                ctx.fillStyle = p.color;
                ctx.fill();
                p.x += p.dx;
                p.y += p.dy;
                if (p.y > canvas.height) particles.splice(i, 1);
            }
            requestAnimationFrame(animateConfetti);
        }
        animateConfetti();

        // ==========================================
        // TIMER & SUBMIT
        // ==========================================
        let timeLeft = 600; // 10 minutes = 600 seconds
        let timerInterval;
        let isRunning = false;

        function updateTimerDisplay() {
            let m = Math.floor(timeLeft / 60);
            let s = timeLeft % 60;
            document.getElementById('timer-display').innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        function toggleTimer() {
            const btn = document.getElementById('btn-timer');
            if (isRunning) {
                clearInterval(timerInterval);
                btn.innerText = "TI·∫æP T·ª§C B√ÄI THI";
                btn.style.background = "#95a5a6";
                btn.style.boxShadow = "0 5px 0 #7f8c8d";
            } else {
                if(timeLeft === 0) return; // N·∫øu h·∫øt gi·ªù kh cho b·∫•m
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        document.getElementById('timeout-modal').style.display = 'flex';
                        btn.innerText = "ƒê√É H·∫æT GI·ªú";
                        btn.style.background = "#e74c3c";
                        btn.style.boxShadow = "0 5px 0 #c0392b";
                        btn.disabled = true;
                    }
                }, 1000);
                btn.innerText = "T·∫†M D·ª™NG TH·ªúI GIAN";
                btn.style.background = "#E15F41";
                btn.style.boxShadow = "0 5px 0 #c44569";
            }
            isRunning = !isRunning;
        }

        function submitTest() {
            if (timerInterval) clearInterval(timerInterval);
            
            const modal = document.getElementById('result-modal');
            const scoreDiv = document.getElementById('score-circle');
            const msgDiv = document.getElementById('modal-message');
            const subMsg = document.getElementById('modal-submessage');

            scoreDiv.innerText = `${score}/${totalQuestions}`;
            
            let ratio = score / totalQuestions;
            if (ratio === 1) {
                msgDiv.innerText = "Thi√™n T√†i Ng√¥n Ng·ªØ! üèÜ";
                msgDiv.style.color = "#FFC312";
                subMsg.innerText = "Wow, 100% ch√≠nh x√°c! C√¥ Mai An r·∫•t t·ª± h√†o v·ªÅ b·∫°n!";
                for(let i=0; i<3; i++) setTimeout(fireConfetti, i*300); // B·∫Øn ph√°o gi·∫•y 3 l·∫ßn
                playDing();
            } else if (ratio >= 0.7) {
                msgDiv.innerText = "L√†m T·ªët L·∫Øm! üåü";
                msgDiv.style.color = "#009432";
                subMsg.innerText = "B·∫°n n·∫Øm ki·∫øn th·ª©c r·∫•t v·ªØng. ƒê·ªçc k·ªπ th√™m ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ v∆∞∆°n t·ªõi ƒëi·ªÉm tuy·ªát ƒë·ªëi nh√©!";
                fireConfetti();
            } else if (ratio >= 0.4) {
                msgDiv.innerText = "Kh√° ·ªîn ƒê√≥! üëç";
                msgDiv.style.color = "#0652DD";
                subMsg.innerText = "C·ªë g·∫Øng l√™n m·ªôt ch√∫t n·ªØa. H√£y xem l·∫°i b·∫£ng t·ª´ v·ª±ng v√† l·ªùi gi·∫£i th√≠ch nh√©.";
            } else {
                msgDiv.innerText = "C·∫ßn C·ªë G·∫Øng H∆°n! üí™";
                msgDiv.style.color = "#EA2027";
                subMsg.innerText = "ƒê·ª´ng bu·ªìn, h·ªçc ng√¥n ng·ªØ c·∫ßn th·ªùi gian. B·∫°n h√£y ƒë·ªçc k·ªπ l·∫°i ph·∫ßn d·ªãch nghƒ©a v√† gi·∫£i th√≠ch chi ti·∫øt nha!";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('result-modal').style.display = 'none';
        }

        // Initialize
        window.onload = () => {
            initApp();
            updateTimerDisplay();
        };

    </script>
</body>
</html>