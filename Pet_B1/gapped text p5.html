<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i ki·ªÉm tra: Digging into the past - Ms Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* DYNAMIC THEME: Archaeology / History */
            --primary-color: #795548; /* N√¢u ƒë·∫•t */
            --primary-light: #A1887F;
            --secondary-color: #FFF3E0; /* M√†u c√°t nh·∫°t */
            --accent-color: #FF6F00; /* M√†u cam ƒë·∫•t nung */
            --success-color: #00C853; /* Xanh l√° */
            --error-color: #FF5252; /* ƒê·ªè */
            --text-color: #3E2723;
            --glass-bg: rgba(255, 255, 255, 0.95);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none; /* NgƒÉn b√¥i ƒëen ƒë·ªÉ t·∫≠p trung l√†m b√†i */
        }

        body {
            font-family: 'Nunito', sans-serif;
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
            background-color: var(--secondary-color);
            /* Auto-generated SVG Background with Emojis: üè∫ ‚õèÔ∏è ü¶¥ üó∫Ô∏è */
            background-image: radial-gradient(circle at center, rgba(255,255,255,0.8), rgba(255,243,224,0.4)), url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='30' font-size='20'%3Eüè∫%3C/text%3E%3Ctext x='60' y='70' font-size='20'%3E‚õèÔ∏è%3C/text%3E%3Ctext x='80' y='20' font-size='15'%3Eü¶¥%3C/text%3E%3C/svg%3E");
        }

        /* --- TOP BAR --- */
        .top-bar {
            height: 60px;
            background: var(--glass-bg);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        .teacher-brand {
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .timer-container {
            background: #fff;
            padding: 8px 20px;
            border-radius: 30px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .timer-container:hover {
            transform: scale(1.05);
        }

        .timer-controls {
            font-size: 0.8rem;
            color: #888;
        }

        /* --- MAIN LAYOUT (SPLIT SCREEN) --- */
        .main-container {
            display: flex;
            height: calc(100vh - 60px);
            margin-top: 60px;
        }

        .panel {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
        }

        /* --- LEFT PANEL: READING --- */
        .left-panel {
            border-right: 2px solid rgba(121, 85, 72, 0.1);
            background: rgba(255, 255, 255, 0.6);
        }

        h1.passage-title {
            font-family: 'Quicksand', sans-serif;
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .reading-text p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 25px;
            text-align: justify;
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            position: relative;
        }

        .gap-marker {
            background: var(--accent-color);
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-weight: bold;
            margin: 0 5px;
            cursor: help;
        }

        .translate-btn {
            display: block;
            margin-top: 10px;
            font-size: 0.85rem;
            color: var(--primary-light);
            background: none;
            border: 1px dashed var(--primary-light);
            padding: 5px 10px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .translate-btn:hover {
            background: var(--primary-light);
            color: white;
        }

        .translation-text {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: #EFEBE9;
            border-left: 4px solid var(--primary-color);
            font-style: italic;
            color: #5D4037;
            border-radius: 0 10px 10px 0;
            animation: fadeIn 0.5s ease;
        }

        /* GLOSSARY */
        .glossary-box {
            margin-top: 40px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            border-top: 5px solid var(--accent-color);
        }

        .glossary-title {
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .glossary-table {
            width: 100%;
            border-collapse: collapse;
        }

        .glossary-table th, .glossary-table td {
            text-align: left;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .glossary-table th {
            color: var(--accent-color);
        }

        /* --- RIGHT PANEL: EXERCISES --- */
        .right-panel {
            background: transparent;
            padding-bottom: 100px;
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            transition: transform 0.3s;
            border-bottom: 6px solid #E0E0E0;
        }

        .question-card:hover {
            transform: translateY(-5px);
        }

        .q-header {
            font-weight: 800;
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .q-header .badge {
            background: var(--primary-color);
            color: white;
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.9rem;
        }

        .options-grid {
            display: grid;
            gap: 12px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #EEE;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            text-align: left;
            transition: all 0.2s;
            position: relative;
            box-shadow: 0 4px 0 #EEE;
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--primary-light);
            background-color: #FAFAFA;
            transform: scale(1.02);
        }

        /* STATES */
        .option-btn.correct {
            background-color: var(--success-color) !important;
            color: white !important;
            border-color: #00A040 !important;
            box-shadow: 0 4px 0 #008030 !important;
        }

        .option-btn.wrong {
            background-color: var(--error-color) !important;
            color: white !important;
            border-color: #D32F2F !important;
            box-shadow: 0 4px 0 #B71C1C !important;
            animation: shake 0.5s;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* FEEDBACK SECTION */
        .feedback-panel {
            margin-top: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            color: white;
            transition: opacity 0.2s;
        }

        .btn-explain { background: #5C6BC0; }
        .btn-trans { background: #FFA726; }
        .btn-vocab { background: #26A69A; }

        .feedback-content {
            background: #F5F7FA;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #E0E0E0;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .teacher-avatar {
            width: 40px;
            height: 40px;
            background: #FFD54F;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 20px;
            vertical-align: middle;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .submit-all-btn {
            display: block;
            width: 100%;
            padding: 20px;
            margin-top: 30px;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            font-size: 1.5rem;
            font-weight: 800;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(121, 85, 72, 0.4);
            transition: transform 0.3s;
        }

        .submit-all-btn:hover {
            transform: scale(1.05) translateY(-5px);
        }

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            position: relative;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            background: var(--accent-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 900;
            margin: 0 auto 20px;
            box-shadow: 0 10px 20px rgba(255, 111, 0, 0.4);
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: var(--primary-light); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-color); }
        
        /* MOBILE RESPONSIVE */
        @media (max-width: 768px) {
            .main-container { flex-direction: column; overflow: hidden; }
            .panel { height: 50%; border: none; border-bottom: 2px solid #ddd; }
            .top-bar { font-size: 0.8rem; }
        }
    </style>
</head>
<body>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // Ding sound (High pitch, sine wave)
                osc.type = 'sine';
                osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
                osc.frequency.exponentialRampToValueAtTime(1046.5, audioCtx.currentTime + 0.1); // C6
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else if (type === 'wrong') {
                // Fail sound (Low pitch, sawtooth)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'win') {
                // Fanfare snippet
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(440, audioCtx.currentTime);
                gainNode.gain.value = 0.3;
                osc.start();
                osc.stop(audioCtx.currentTime + 0.1);
            }
        }
    </script>

    <div class="top-bar">
        <div class="teacher-brand">
            <span>üë©‚Äçüè´</span> Ms Mai An ULIS
        </div>
        <div class="timer-container" onclick="toggleTimer()">
            <span id="timer">10:00</span>
            <span class="timer-controls">‚èØÔ∏è</span>
        </div>
    </div>

    <div class="main-container">
        
        <div class="left-panel panel">
            <h1 class="passage-title">üè∫ Digging into the past</h1>
            
            <div class="reading-text">
                <p>
                    Last year, Kate Marshall was given a very exciting opportunity ‚Äì to help her father, who‚Äôs a history lecturer, at a historical site! He was leading a team to dig up and explore the area.
                    <button class="translate-btn" onclick="toggleTrans('p1')">üëÅÔ∏è B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <span id="p1" class="translation-text">NƒÉm ngo√°i, Kate Marshall ƒë√£ ƒë∆∞·ª£c trao m·ªôt c∆° h·ªôi v√¥ c√πng th√∫ v·ªã ‚Äì gi√∫p ƒë·ª° cha m√¨nh, m·ªôt gi·∫£ng vi√™n l·ªãch s·ª≠, t·∫°i m·ªôt di t√≠ch l·ªãch s·ª≠! √îng ƒëang d·∫´n ƒë·∫ßu m·ªôt nh√≥m khai qu·∫≠t v√† kh√°m ph√° khu v·ª±c n√†y.</span>
                </p>

                <p>
                    When they arrived, though, the site wasn‚Äôt quite what Kate had expected. <span class="gap-marker">(1)</span> So the first job was to remove it all and prepare the land for digging. Says Kate, ‚ÄòDad hadn‚Äôt warned me I‚Äôd have to work so hard as soon as we got there!‚Äô
                    <button class="translate-btn" onclick="toggleTrans('p2')">üëÅÔ∏è B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <span id="p2" class="translation-text">Tuy nhi√™n, khi h·ªç ƒë·∫øn n∆°i, khu di t√≠ch kh√¥ng ho√†n to√†n gi·ªëng nh∆∞ nh·ªØng g√¨ Kate ƒë√£ mong ƒë·ª£i. <span class="gap-marker">(1)</span> V√¨ v·∫≠y, c√¥ng vi·ªác ƒë·∫ßu ti√™n l√† d·ªçn s·∫°ch t·∫•t c·∫£ v√† chu·∫©n b·ªã ƒë·∫•t ƒë·ªÉ ƒë√†o. Kate n√≥i: "B·ªë ƒë√£ kh√¥ng c·∫£nh b√°o t√¥i r·∫±ng t√¥i s·∫Ω ph·∫£i l√†m vi·ªác v·∫•t v·∫£ nh∆∞ v·∫≠y ngay khi ch√∫ng t√¥i ƒë·∫øn ƒë√≥!"</span>
                </p>

                <p>
                    But when the site was completely cleared, the team found pieces of ancient pots on the ground. However, those weren‚Äôt as exciting as everyone had thought. Kate‚Äôs dad told them that the important pots were still under the ground. And because no-one had touched them for centuries, the team would learn far more about their history ‚Äì but first they would have to dig deeper. Says Kate, <span class="gap-marker">(2)</span> But we all knew Dad was right!‚Äô
                    <button class="translate-btn" onclick="toggleTrans('p3')">üëÅÔ∏è B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <span id="p3" class="translation-text">Nh∆∞ng khi khu v·ª±c n√†y ƒë√£ ƒë∆∞·ª£c d·ªçn s·∫°ch ho√†n to√†n, nh√≥m ƒë√£ t√¨m th·∫•y nh·ªØng m·∫£nh b√¨nh g·ªëm c·ªï tr√™n m·∫∑t ƒë·∫•t. Tuy nhi√™n, ch√∫ng kh√¥ng th√∫ v·ªã nh∆∞ m·ªçi ng∆∞·ªùi nghƒ©. Cha c·ªßa Kate b·∫£o h·ªç r·∫±ng nh·ªØng chi·∫øc b√¨nh quan tr·ªçng v·∫´n c√≤n n·∫±m d∆∞·ªõi l√≤ng ƒë·∫•t. V√† v√¨ ch∆∞a ai ch·∫°m v√†o ch√∫ng trong nhi·ªÅu th·∫ø k·ª∑, nh√≥m s·∫Ω t√¨m hi·ªÉu ƒë∆∞·ª£c nhi·ªÅu h∆°n v·ªÅ l·ªãch s·ª≠ c·ªßa ch√∫ng ‚Äì nh∆∞ng tr∆∞·ªõc ti√™n h·ªç ph·∫£i ƒë√†o s√¢u h∆°n. Kate n√≥i, <span class="gap-marker">(2)</span> Nh∆∞ng t·∫•t c·∫£ ch√∫ng t√¥i ƒë·ªÅu bi·∫øt b·ªë ƒë√£ ƒë√∫ng!"</span>
                </p>

                <p>
                    The site was divided into small squares, with a leader for each square, who told everyone how to dig. ‚ÄòThat wasn‚Äôt as easy as it sounded, either,‚Äô Kate reports. ‚ÄòInstead of just digging great big holes, we all had to dig really carefully, and remove small amounts of soil each time. <span class="gap-marker">(3)</span> So it made sense.‚Äô
                    <button class="translate-btn" onclick="toggleTrans('p4')">üëÅÔ∏è B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <span id="p4" class="translation-text">Khu v·ª±c ƒë∆∞·ª£c chia th√†nh c√°c √¥ vu√¥ng nh·ªè, v·ªõi m·ªôt ng∆∞·ªùi ph·ª• tr√°ch cho m·ªói √¥, ng∆∞·ªùi n√†y h∆∞·ªõng d·∫´n m·ªçi ng∆∞·ªùi c√°ch ƒë√†o. "Vi·ªác ƒë√≥ c≈©ng kh√¥ng d·ªÖ d√†ng nh∆∞ c√°i t√™n c·ªßa n√≥ ƒë√¢u," Kate k·ªÉ l·∫°i. "Thay v√¨ ch·ªâ ƒë√†o nh·ªØng c√°i h·ªë to ƒë√πng, t·∫•t c·∫£ ch√∫ng t√¥i ph·∫£i ƒë√†o th·∫≠t c·∫©n th·∫≠n v√† lo·∫°i b·ªè t·ª´ng l∆∞·ª£ng ƒë·∫•t nh·ªè m·ªói l·∫ßn. <span class="gap-marker">(3)</span> V√¨ v·∫≠y ƒëi·ªÅu ƒë√≥ ho√†n to√†n h·ª£p l√Ω."</span>
                </p>

                <p>
                    ‚ÄòMy friends at home were really interested in what I was doing,‚Äô Kate explains. ‚ÄòThey kept texting me to ask what I‚Äôd found. <span class="gap-marker">(4)</span> But actually, we were looking for ordinary, everyday objects that could tell us about the people who‚Äôd lived in the area centuries ago.‚Äô
                    <button class="translate-btn" onclick="toggleTrans('p5')">üëÅÔ∏è B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <span id="p5" class="translation-text">"B·∫°n b√® ·ªü nh√† th·ª±c s·ª± quan t√¢m ƒë·∫øn nh·ªØng g√¨ t√¥i ƒëang l√†m," Kate gi·∫£i th√≠ch. "H·ªç li√™n t·ª•c nh·∫Øn tin h·ªèi t√¥i ƒë√£ t√¨m th·∫•y g√¨. <span class="gap-marker">(4)</span> Nh∆∞ng th·ª±c ra, ch√∫ng t√¥i ƒëang t√¨m ki·∫øm nh·ªØng v·∫≠t d·ª•ng b√¨nh th∆∞·ªùng, h√†ng ng√†y c√≥ th·ªÉ cho ch√∫ng t√¥i bi·∫øt v·ªÅ nh·ªØng ng∆∞·ªùi ƒë√£ s·ªëng ·ªü khu v·ª±c n√†y t·ª´ nhi·ªÅu th·∫ø k·ª∑ tr∆∞·ªõc."</span>
                </p>

                <p>
                    In the end, though, Kate wasn‚Äôt disappointed by what she found. ‚ÄòOne day, when I was digging away, I found a stone with a strange shape. <span class="gap-marker">(5)</span> Someone had obviously made it hundreds of years ago, which meant it was really important. So Dad cleaned it up, and said it would go to the nearby museum. So I was pleased that at last, I‚Äôd found something interesting!
                    <button class="translate-btn" onclick="toggleTrans('p6')">üëÅÔ∏è B·∫£n d·ªãch ƒë·∫ßy ƒë·ªß</button>
                    <span id="p6" class="translation-text">Tuy nhi√™n, cu·ªëi c√πng, Kate kh√¥ng th·∫•t v·ªçng v·ªõi nh·ªØng g√¨ m√¨nh t√¨m th·∫•y. "M·ªôt ng√†y n·ªç, khi t√¥i ƒëang m·∫£i mi·∫øt ƒë√†o, t√¥i t√¨m th·∫•y m·ªôt h√≤n ƒë√° c√≥ h√¨nh th√π k·ª≥ l·∫°. <span class="gap-marker">(5)</span> R√µ r√†ng ai ƒë√≥ ƒë√£ l√†m ra n√≥ h√†ng trƒÉm nƒÉm tr∆∞·ªõc, ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† n√≥ th·ª±c s·ª± quan tr·ªçng. V√¨ v·∫≠y, b·ªë ƒë√£ l√†m s·∫°ch n√≥ v√† n√≥i r·∫±ng n√≥ s·∫Ω ƒë∆∞·ª£c ƒë∆∞a ƒë·∫øn b·∫£o t√†ng g·∫ßn ƒë√≥. Th·∫ø n√™n t√¥i r·∫•t vui v√¨ cu·ªëi c√πng t√¥i ƒë√£ t√¨m th·∫•y th·ª© g√¨ ƒë√≥ th√∫ v·ªã!"</span>
                </p>
            </div>

            <div class="glossary-box">
                <div class="glossary-title">üìñ Glossary - T·ª´ v·ª±ng c·∫ßn nh·ªõ</div>
                <table class="glossary-table">
                    <tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a ti·∫øng Vi·ªát</th></tr>
                    <tr><td>Exciting opportunity</td><td>NP</td><td>C∆° h·ªôi th√∫ v·ªã</td></tr>
                    <tr><td>Historical site</td><td>NP</td><td>Di t√≠ch l·ªãch s·ª≠</td></tr>
                    <tr><td>Ancient</td><td>Adj</td><td>C·ªï ƒë·∫°i, x∆∞a</td></tr>
                    <tr><td>Lecturer</td><td>N</td><td>Gi·∫£ng vi√™n</td></tr>
                    <tr><td>Disappointed</td><td>Adj</td><td>Th·∫•t v·ªçng</td></tr>
                    <tr><td>Ordinary</td><td>Adj</td><td>B√¨nh th∆∞·ªùng</td></tr>
                    <tr><td>Dig up</td><td>Phr.V</td><td>ƒê√†o l√™n, khai qu·∫≠t</td></tr>
                    <tr><td>Obviously</td><td>Adv</td><td>R√µ r√†ng l√†</td></tr>
                    <tr><td>Jewellery</td><td>N</td><td>Trang s·ª©c</td></tr>
                    <tr><td>Figure</td><td>N</td><td>B·ª©c t∆∞·ª£ng nh·ªè / H√¨nh d√°ng</td></tr>
                </table>
            </div>
        </div>

        <div class="right-panel panel" id="quiz-container">
            </div>
    </div>

    <div class="modal-overlay" id="scoreModal">
        <div class="modal-content">
            <div class="score-circle" id="finalScore">0/5</div>
            <h2 id="finalMessage" style="color: var(--primary-color); margin-bottom: 10px;"></h2>
            <p id="finalSubMessage" style="color: #666;"></p>
            <button class="submit-all-btn" onclick="location.reload()">L√†m l·∫°i b√†i thi</button>
        </div>
    </div>

    <canvas id="confetti" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:999;"></canvas>

    <script>
        // --- DATA ---
        const quizData = [
            {
                id: 1,
                gap: "(1)",
                correct: "D",
                options: [
                    { id: "C", text: "That way, everyone made sure they didn‚Äôt miss anything." },
                    { id: "D", text: "In fact, the whole area was actually still covered in grass." },
                    { id: "H", text: "It was a new experience for me, too." },
                    { id: "B", text: "No-one made that mistake, luckily." }
                ],
                explain: "D·ª±a v√†o c√¢u sau: 'So the first job was to remove it all' (C√¥ng vi·ªác ƒë·∫ßu ti√™n l√† d·ªçn s·∫°ch n√≥). 'It' ·ªü ƒë√¢y thay th·∫ø cho 'grass' (c·ªè) ·ªü ƒë√°p √°n D. Ng·ªØ c·∫£nh: ƒê·∫øn n∆°i th·∫•y ƒë·∫•t ƒë·∫ßy c·ªè -> ph·∫£i d·ªçn c·ªè m·ªõi ƒë√†o ƒë∆∞·ª£c.",
                transQ: "Kho·∫£ng tr·ªëng (1) c·∫ßn ƒëi·ªÅn g√¨?",
                transA: "D: Th·ª±c t·∫ø l√† to√†n b·ªô khu v·ª±c v·∫´n b·ªã bao ph·ªß b·ªüi c·ªè.",
                vocab: "Covered in (ƒë∆∞·ª£c bao ph·ªß b·ªüi), Remove (lo·∫°i b·ªè)."
            },
            {
                id: 2,
                gap: "(2)",
                correct: "F",
                options: [
                    { id: "F", text: "Some people were a bit disappointed by that news." },
                    { id: "A", text: "It turned out to be a small figure of a horse." },
                    { id: "E", text: "It was a bit sad to see it disappear." },
                    { id: "G", text: "They probably imagined it was things like gold jewellery." }
                ],
                explain: "Tr∆∞·ªõc ƒë√≥, b·ªë b·∫£o 'important pots were still under' (b√¨nh quan tr·ªçng v·∫´n ·ªü d∆∞·ªõi) -> ph·∫£i 'dig deeper' (ƒë√†o s√¢u h∆°n). ƒê√°p √°n F 'disappointed' (th·∫•t v·ªçng) ph√π h·ª£p v√¨ h·ªç mu·ªën t√¨m th·∫•y ngay nh∆∞ng l·∫°i ph·∫£i ƒë√†o ti·∫øp. C√¢u sau 'But we all knew Dad was right' c·ªßng c·ªë vi·ªác h·ªç ch·∫•p nh·∫≠n n·ªói th·∫•t v·ªçng ƒë√≥.",
                transQ: "Kho·∫£ng tr·ªëng (2) c·∫ßn ƒëi·ªÅn g√¨?",
                transA: "F: M·ªôt s·ªë ng∆∞·ªùi h∆°i th·∫•t v·ªçng khi nghe tin ƒë√≥.",
                vocab: "Disappointed (th·∫•t v·ªçng), News (tin t·ª©c)."
            },
            {
                id: 3,
                gap: "(3)",
                correct: "C",
                options: [
                    { id: "B", text: "No-one made that mistake, luckily." },
                    { id: "C", text: "That way, everyone made sure they didn‚Äôt miss anything." },
                    { id: "D", text: "In fact, the whole area was actually still covered in grass." },
                    { id: "H", text: "It was a new experience for me, too." }
                ],
                explain: "C√¢u tr∆∞·ªõc m√¥ t·∫£ c√°ch ƒë√†o: 'remove small amounts of soil' (lo·∫°i b·ªè t·ª´ng l∆∞·ª£ng ƒë·∫•t nh·ªè). T·∫°i sao? ƒê·ªÉ kh√¥ng b·ªè s√≥t g√¨ c·∫£. ƒê√°p √°n C kh·ªõp ho√†n to√†n v·ªÅ m·∫∑t logic.",
                transQ: "Kho·∫£ng tr·ªëng (3) c·∫ßn ƒëi·ªÅn g√¨?",
                transA: "C: B·∫±ng c√°ch ƒë√≥, m·ªçi ng∆∞·ªùi ƒë·∫£m b·∫£o r·∫±ng h·ªç kh√¥ng b·ªè s√≥t b·∫•t c·ª© th·ª© g√¨.",
                vocab: "Miss (b·ªè l·ª°/b·ªè s√≥t), Make sure (ƒë·∫£m b·∫£o)."
            },
            {
                id: 4,
                gap: "(4)",
                correct: "G",
                options: [
                    { id: "G", text: "They probably imagined it was things like gold jewellery." },
                    { id: "A", text: "It turned out to be a small figure of a horse." },
                    { id: "F", text: "Some people were a bit disappointed by that news." },
                    { id: "E", text: "It was a bit sad to see it disappear." }
                ],
                explain: "B·∫°n b√® nh·∫Øn tin h·ªèi t√¨m ƒë∆∞·ª£c g√¨. C√¢u sau 'But actually... looking for ordinary objects' (Nh∆∞ng th·ª±c ra... t√¨m ƒë·ªì b√¨nh th∆∞·ªùng). Ch·ªØ 'But' cho th·∫•y s·ª± t∆∞∆°ng ph·∫£n v·ªõi s·ª± k·ª≥ v·ªçng 'ho√†nh tr√°ng' ·ªü ƒë√°p √°n G (v√†ng b·∫°c ch√¢u b√°u).",
                transQ: "Kho·∫£ng tr·ªëng (4) c·∫ßn ƒëi·ªÅn g√¨?",
                transA: "G: H·ªç c√≥ l·∫Ω ƒë√£ t∆∞·ªüng t∆∞·ª£ng ƒë√≥ l√† nh·ªØng th·ª© nh∆∞ ƒë·ªì trang s·ª©c b·∫±ng v√†ng.",
                vocab: "Imagine (t∆∞·ªüng t∆∞·ª£ng), Jewellery (trang s·ª©c)."
            },
            {
                id: 5,
                gap: "(5)",
                correct: "A",
                options: [
                    { id: "H", text: "It was a new experience for me, too." },
                    { id: "B", text: "No-one made that mistake, luckily." },
                    { id: "A", text: "It turned out to be a small figure of a horse." },
                    { id: "C", text: "That way, everyone made sure they didn‚Äôt miss anything." }
                ],
                explain: "C√¢u tr∆∞·ªõc: 'found a stone with a strange shape' (t√¨m th·∫•y h√≤n ƒë√° h√¨nh th√π l·∫°). ƒê√°p √°n A gi·∫£i th√≠ch h√¨nh th√π ƒë√≥ l√† g√¨: 'figure of a horse' (t∆∞·ª£ng con ng·ª±a).",
                transQ: "Kho·∫£ng tr·ªëng (5) c·∫ßn ƒëi·ªÅn g√¨?",
                transA: "A: H√≥a ra ƒë√≥ l√† m·ªôt b·ª©c t∆∞·ª£ng nh·ªè h√¨nh con ng·ª±a.",
                vocab: "Turn out (h√≥a ra l√†), Figure (t∆∞·ª£ng/h√¨nh d√°ng)."
            }
        ];

        let score = 0;
        let answeredCount = 0;
        let timerInterval;
        let timeRemaining = 600; // 10 minutes
        let isPaused = false;

        // --- INIT ---
        window.onload = function() {
            renderQuiz();
            startTimer();
        };

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            let html = '';
            
            quizData.forEach((q, index) => {
                html += `
                <div class="question-card" id="card-${q.id}">
                    <div class="q-header">
                        <span class="badge">C√¢u ${index + 1}</span>
                        <span>Ch·ªçn c√¢u ph√π h·ª£p ƒëi·ªÅn v√†o √¥ tr·ªëng <strong>${q.gap}</strong>:</span>
                    </div>
                    
                    <div class="options-grid" id="options-${q.id}">
                        ${q.options.map(opt => `
                            <div class="option-btn" onclick="checkAnswer(${q.id}, '${opt.id}', '${q.correct}', this)">
                                <strong>${opt.id}.</strong> ${opt.text}
                            </div>
                        `).join('')}
                    </div>

                    <div class="feedback-panel" id="feedback-${q.id}">
                        <div class="action-buttons">
                            <button class="action-btn btn-explain" onclick="showContent(${q.id}, 'explain')">üë©‚Äçüè´ Gi·∫£i th√≠ch</button>
                            <button class="action-btn btn-trans" onclick="showContent(${q.id}, 'trans')">üìù D·ªãch nghƒ©a</button>
                            <button class="action-btn btn-vocab" onclick="showContent(${q.id}, 'vocab')">üìö T·ª´ v·ª±ng</button>
                        </div>
                        <div class="feedback-content" id="content-${q.id}">
                            <em>B·∫•m v√†o c√°c n√∫t tr√™n ƒë·ªÉ xem chi ti·∫øt nha!</em>
                        </div>
                    </div>
                </div>
                `;
            });

            html += `<button class="submit-all-btn" onclick="finishQuiz()">N·ªòP B√ÄI & XEM ƒêI·ªÇM</button>`;
            container.innerHTML = html;
        }

        // --- LOGIC ---
        function checkAnswer(qId, selectedId, correctId, btnElement) {
            const card = document.getElementById(`card-${qId}`);
            const feedback = document.getElementById(`feedback-${qId}`);
            const optionsDiv = document.getElementById(`options-${qId}`);
            const allOpts = optionsDiv.querySelectorAll('.option-btn');

            // Disable further clicks
            allOpts.forEach(btn => btn.classList.add('disabled'));

            if (selectedId === correctId) {
                // CORRECT
                btnElement.classList.add('correct');
                playSound('correct');
                score++;
                fireConfetti(btnElement);
                // M·ªü feedback ngay ƒë·ªãnh d·∫°ng "Gi·∫£i th√≠ch"
                feedback.style.display = 'block';
                showContent(qId, 'explain');
            } else {
                // WRONG
                btnElement.classList.add('wrong');
                playSound('wrong');
                // Highlight correct one
                allOpts.forEach(btn => {
                    if(btn.innerText.startsWith(correctId + '.')) {
                        btn.classList.add('correct');
                    }
                });
                feedback.style.display = 'block';
                showContent(qId, 'explain');
            }
            answeredCount++;
        }

        function showContent(qId, type) {
            const contentDiv = document.getElementById(`content-${qId}`);
            const qData = quizData.find(q => q.id === qId);
            
            let html = '';
            if (type === 'explain') {
                html = `<p><span class="teacher-avatar">üë©‚Äçüè´</span> <strong>C√¥ Mai An gi·∫£i th√≠ch:</strong><br>${qData.explain}</p>`;
            } else if (type === 'trans') {
                html = `<p><strong>D·ªãch c√¢u h·ªèi:</strong> ${qData.transQ}<br><br><strong>D·ªãch ƒë√°p √°n ƒë√∫ng:</strong> ${qData.transA}</p>`;
            } else if (type === 'vocab') {
                html = `<p><strong>T·ª´ v·ª±ng hay:</strong> ${qData.vocab}</p>`;
            }
            contentDiv.innerHTML = html;
        }

        function toggleTrans(id) {
            const el = document.getElementById(id);
            if (el.style.display === 'block') {
                el.style.display = 'none';
            } else {
                el.style.display = 'block';
            }
        }

        // --- TIMER ---
        function startTimer() {
            timerInterval = setInterval(() => {
                if (!isPaused) {
                    timeRemaining--;
                    updateTimerDisplay();
                    if (timeRemaining <= 0) {
                        clearInterval(timerInterval);
                        alert("ƒê√£ h·∫øt gi·ªù l√†m b√†i! B·∫°n v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c, nh∆∞ng h√£y nh·ªõ luy·ªán t·∫≠p t·ªëc ƒë·ªô nh√©.");
                    }
                }
            }, 1000);
        }

        function toggleTimer() {
            isPaused = !isPaused;
            const btn = document.querySelector('.timer-controls');
            btn.innerText = isPaused ? '‚ñ∂Ô∏è' : '‚èØÔ∏è';
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer').innerText = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        // --- FINISH ---
        function finishQuiz() {
            const modal = document.getElementById('scoreModal');
            const scoreText = document.getElementById('finalScore');
            const msg = document.getElementById('finalMessage');
            const sub = document.getElementById('finalSubMessage');
            
            scoreText.innerText = `${score}/5`;
            
            if (score === 5) {
                msg.innerText = "Tuy·ªát v·ªùi! Thi√™n t√†i kh·∫£o c·ªï h·ªçc! üè∫";
                sub.innerText = "B·∫°n ƒë√£ hi·ªÉu r·∫•t s√¢u b√†i ƒë·ªçc. Xu·∫•t s·∫Øc!";
                playSound('win');
                fireConfettiGlobal();
            } else if (score >= 3) {
                msg.innerText = "L√†m t·ªët l·∫Øm! üëç";
                sub.innerText = "B·∫°n n·∫Øm kh√° v·ªØng n·ªôi dung, ch·ªâ c·∫ßn c·∫©n th·∫≠n h∆°n ch√∫t x√≠u th√¥i.";
            } else {
                msg.innerText = "C·ªë l√™n nh√©! üí™";
                sub.innerText = "ƒê·ª´ng n·∫£n l√≤ng, h√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt ƒë·ªÉ hi·ªÉu r√µ h∆°n nha.";
            }

            modal.style.display = 'flex';
        }

        // --- CONFETTI EFFECT (Simple Implementation) ---
        function fireConfetti(element) {
            const rect = element.getBoundingClientRect();
            const x = (rect.left + rect.width / 2) / window.innerWidth;
            const y = (rect.top + rect.height / 2) / window.innerHeight;
            // Simple logic placeholder: In a real complex lib we'd use canvas. 
            // For single file simplicity, we rely on the global confetti below.
        }

        function fireConfettiGlobal() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#00ffff', '#ff00ff'];
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            let particles = [];
            for(let i=0; i<100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: Math.random() * 4 - 2,
                    vy: Math.random() * 4 + 2,
                    color: colors[Math.floor(Math.random() * colors.length)]
                });
            }

            function animate() {
                ctx.clearRect(0,0,canvas.width, canvas.height);
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, 5, 5);
                    if(p.y > canvas.height) p.y = -10;
                });
                requestAnimationFrame(animate);
            }
            animate();
            setTimeout(() => { canvas.width=0; }, 3000);
        }
    </script>
</body>
</html>