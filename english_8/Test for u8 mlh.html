<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Ti·∫øng Anh - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8854C0; /* H·ªìng t√≠m pastel */
            --secondary: #00C9A7; /* Xanh ng·ªçc */
            --accent: #FF9FF3;
            --correct: #00D26A; /* Xanh l√° */
            --wrong: #FF4757; /* ƒê·ªè cam */
            --bg: #f0f2f5;
            --text: #2f3542;
            --card-bg: #ffffff;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* Ch·ªëng copy ƒë·ªÉ t·∫≠p trung l√†m b√†i */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(var(--primary) 0.5px, transparent 0.5px), radial-gradient(var(--secondary) 0.5px, var(--bg) 0.5px);
            background-size: 20px 20px;
            color: var(--text);
            margin: 0;
            padding-bottom: 80px; /* Space for sticky footer */
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER */
        header {
            text-align: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px 20px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        header h1 {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            font-size: 2.2rem;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        header p {
            margin-top: 10px;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .teacher-badge {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
            font-weight: bold;
        }

        /* CARD STYLE */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05);
            border: 2px solid rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .section-title {
            color: var(--primary);
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            border-bottom: 2px dashed #eee;
            padding-bottom: 10px;
        }

        .section-title span {
            background: var(--accent);
            color: white;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-right: 15px;
            font-size: 1.2rem;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* QUESTIONS */
        .question-block {
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }
        
        .question-block:last-child {
            border-bottom: none;
        }

        .question-text {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #2d3436;
        }

        /* MATCHING STYLE */
        .matching-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }
        
        .match-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        select.match-select {
            padding: 8px;
            border-radius: 8px;
            border: 2px solid var(--secondary);
            font-family: 'Nunito', sans-serif;
            font-weight: bold;
            color: var(--primary);
            cursor: pointer;
        }

        /* MULTIPLE CHOICE BUTTONS */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e1e1e1;
            padding: 15px;
            border-radius: 15px;
            text-align: left;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            transition: all 0.2s;
            position: relative;
            box-shadow: 0 4px 0 #e1e1e1;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            transform: translateY(-2px);
            border-color: var(--secondary);
        }

        .option-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        .option-btn.selected {
            border-color: var(--primary);
            background-color: #f3e5f5;
        }

        .option-btn.correct-answer {
            background-color: var(--correct);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 4px 0 #00b85c;
        }

        .option-btn.wrong-answer {
            background-color: var(--wrong);
            color: white;
            border-color: #d63031;
            box-shadow: 0 4px 0 #d63031;
            animation: shake 0.5s;
        }

        /* CHECK BUTTON */
        .check-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 800;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 4px 0 #009e83;
            margin-top: 15px;
            transition: all 0.2s;
            display: inline-block;
        }
        
        .check-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }
        
        .check-btn:disabled {
            background: #ccc;
            box-shadow: none;
            cursor: not-allowed;
        }

        /* EXPLANATION BOX */
        .explanation {
            margin-top: 20px;
            background: #f1f8e9;
            border-left: 5px solid var(--correct);
            padding: 15px;
            border-radius: 8px;
            display: none; /* Hidden by default */
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .explanation strong {
            color: #2d3436;
        }
        
        .explanation-title {
            color: var(--correct);
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 10px;
            display: block;
        }

        /* READING PASSAGE */
        .reading-passage {
            background: #fff3e0;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #ffe0b2;
            line-height: 1.8;
            margin-bottom: 20px;
            font-family: 'Georgia', serif;
            color: #4a4a4a;
        }

        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .glossary-table th {
            background: var(--primary);
            color: white;
            padding: 10px;
            text-align: left;
        }

        .glossary-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
        }
        
        .tag-type {
            font-style: italic;
            color: #888;
            font-size: 0.8rem;
        }

        /* STICKY FOOTER */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .score-display {
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .submit-all-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-weight: 800;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 6px 0 #5f27cd;
            transition: all 0.2s;
        }

        .submit-all-btn:hover {
            transform: translateY(-2px);
        }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        /* POPUP MODAL */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: pop 0.3s ease-out;
        }

        @keyframes pop {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .result-score {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary);
            margin: 20px 0;
        }

        .result-message {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 30px;
        }
        
        .close-modal {
            background: #ddd;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
        }

        /* UTILITIES */
        .highlight { background-color: yellow; padding: 0 2px; }
        u { text-decoration: underline; text-underline-offset: 3px; text-decoration-thickness: 2px; }

    </style>
</head>
<body>

<header>
    <h1>B√ÄI KI·ªÇM TRA T∆Ø∆†NG T√ÅC</h1>
    <div class="teacher-badge">Gi√°o vi√™n: Ms. Mai An ULIS</div>
    <p>Ch·ªß ƒë·ªÅ: Shopping & Festivals (English Grade 8-9 Level)</p>
</header>

<div class="container">

    <div class="card" id="part-viii">
        <div class="section-title"><span>01</span> Part VIII: Match the questions to the answers</div>
        <p><em>N·ªëi c√¢u h·ªèi ·ªü c·ªôt tr√°i v·ªõi c√¢u tr·∫£ l·ªùi ph√π h·ª£p ·ªü c·ªôt ph·∫£i.</em></p>
        
        <div class="matching-grid">
            <div id="matching-questions">
                </div>
            
            <div style="background: #eef; padding: 15px; border-radius: 10px;">
                <h4 style="margin-top:0; color:var(--primary)">Options:</h4>
                <ul style="list-style: none; padding: 0; font-size: 0.9rem;">
                    <li><strong>a.</strong> About 500 metres.</li>
                    <li><strong>b.</strong> It's 15 December.</li>
                    <li><strong>c.</strong> It's Japan.</li>
                    <li><strong>d.</strong> I rarely do that.</li>
                    <li><strong>e.</strong> It's VivoCity.</li>
                    <li><strong>f.</strong> Around 200 shops.</li>
                    <li><strong>g.</strong> Circle K.</li>
                    <li><strong>h.</strong> Alex will.</li>
                    <li><strong>i.</strong> On the bank of Chao Phraya river.</li>
                    <li><strong>j.</strong> Because I can bargain there.</li>
                </ul>
            </div>
        </div>
        <button class="check-btn" onclick="checkPart8()">CHECK PART VIII</button>
        <div id="explanation-part8" class="explanation"></div>
    </div>

    <div class="card" id="part-ix">
        <div class="section-title"><span>02</span> Part IX: Christmas Market Cloze Test</div>
        <p><em>ƒê·ªçc ƒëo·∫°n vƒÉn v√† ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t ƒë·ªÉ ƒëi·ªÅn v√†o ch·ªó tr·ªëng.</em></p>
        
        <div style="text-align:center; margin-bottom:15px;">
           <img src="https://images.unsplash.com/photo-1512470876302-972faa2aa9a4?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="Christmas Market" style="max-width:100%; border-radius:10px; height: 200px; object-fit: cover;">
           <p style="font-size:0.8rem; color:#888;">Image of Christmas Market</p>
        </div>

        <div class="reading-passage">
            Open-air winter street markets have long been associated with Germany, and the European country is home <strong>(1) _____</strong> some of the oldest and most <strong>(2) _____</strong> festive markets. Capital city Berlin has around 80 to choose from, <strong>(3) _____</strong> Gendarmenmark is perhaps its most renowned. Positioned between the Franzosischer Dom and Deutscher Dom, it's a maze of wooden huts with Bratwurst, mulled wine, and gingerbread for <strong>(4) _____</strong>, along with unique Christmas gifts. At night, visitors can enjoy nightly concerts with dance and musical <strong>(5) _____</strong>.
            <br><br>
            In Nuremberg, Bavaria's <strong>(6) _____</strong> city, the famous Christkindlesmarkt has been around since the 16th century. During the Christmas period, around 180 stands are <strong>(7) _____</strong> in the city's central market square and the whole area is abuzz with activity. The market usually draws in around two million people every year and is undoubtedly one of Nuremberg's annual highlights. The market <strong>(8) _____</strong> runs from November 22 to December 31.
        </div>

        <div id="questions-part-ix"></div>
    </div>

    <div class="card" id="part-x">
        <div class="section-title"><span>03</span> Part X: Reading Comprehension (Shopee)</div>
        <p><em>ƒê·ªçc k·ªπ ƒëo·∫°n vƒÉn v·ªÅ Shopee v√† tr·∫£ l·ªùi c√¢u h·ªèi.</em></p>

        <div style="text-align:center; margin-bottom:15px;">
            <img src="https://images.unsplash.com/photo-1556742049-0cfed4f7a07d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="E-commerce Shopping" style="max-width:100%; border-radius:10px; height: 150px; object-fit: cover;">
         </div>

        <div class="reading-passage">
            Shopee is an e-commerce company based in Singapore that came into service in 2015. This company is now the largest e-commerce platform in Southeast Asia, catering to consumers and sellers. It allows you to buy and sell your goods in many countries across East Asia, Latin America, and Europe.
            <br><br>
            Like all other online retail portals, Shopee is also prone to risk as frauds and scams rob customers and try to get their bank details, payment account, and parcel score. However, luckily Shopee educates its customers about all these situations on how to deal with fraud. Due to this, the customers remain alert and do not fall into the trap. Shopee provides many safety measures and recommendations to its customers, alerting them of the sale of fake items and banning and suspending users who break the rules if the system flags them.
            <br><br>
            The "Shopee Guarantee" ensures that the customer does not face any payment related problems. Shopee frequently notifies its consumers to change their password and warns them to read sellers' feedback before buying any product. To avoid scams, the e-commerce platform advises its consumers to buy products only from those sellers who have social proof to ensure safety. It further advises its customers to check the customer rating before buying any item, so they know more about the product from previous customers. This helps the customer make an informed decision. Apart from this, customers can also click on the name of the sellers to get every detail about their shop to gain more trust and have a satisfactory shopping experience.
        </div>

        <table class="glossary-table">
            <thead>
                <tr>
                    <th>Word</th>
                    <th>Type</th>
                    <th>Meaning</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>E-commerce</td><td class="tag-type">n</td><td>Th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠</td></tr>
                <tr><td>Cater to</td><td class="tag-type">v</td><td>Ph·ª•c v·ª•, cung c·∫•p cho</td></tr>
                <tr><td>Prone to</td><td class="tag-type">adj</td><td>D·ªÖ b·ªã, c√≥ khuynh h∆∞·ªõng (x·∫•u)</td></tr>
                <tr><td>Fraud / Scam</td><td class="tag-type">n</td><td>L·ª´a ƒë·∫£o, gian l·∫≠n</td></tr>
                <tr><td>Social proof</td><td class="tag-type">n</td><td>B·∫±ng ch·ª©ng x√£ h·ªôi (uy t√≠n ƒë∆∞·ª£c c·ªông ƒë·ªìng x√°c nh·∫≠n)</td></tr>
            </tbody>
        </table>

        <div id="questions-part-x" style="margin-top: 30px;"></div>
    </div>

    <div class="card" id="part-xi">
        <div class="section-title"><span>04</span> Part XI: Sentence Combination</div>
        <p><em>Ch·ªçn c√¢u vi·∫øt l·∫°i ƒë√∫ng nh·∫•t s·ª≠ d·ª•ng t·ª´ trong ngo·∫∑c.</em></p>
        <div id="questions-part-xi"></div>
    </div>

</div>

<div class="sticky-footer">
    <div class="score-display">Score: <span id="current-score">0</span></div>
    <button class="submit-all-btn" onclick="submitAll()">N·ªòP B√ÄI (SUBMIT)</button>
</div>

<div id="resultModal" class="modal">
    <div class="modal-content">
        <h2>K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
        <div class="result-score" id="final-score">0/0</div>
        <p class="result-message" id="feedback-message">B·∫°n h√£y c·ªë g·∫Øng h∆°n nh√©!</p>
        <button class="close-modal" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
    </div>
</div>

<script>
    // --- DATA ---
    const dataPart8 = [
        { id: "8-1", q: "1. What is the biggest shopping mall in Singapore?", ans: "e", exp: "VivoCity l√† trung t√¢m mua s·∫Øm l·ªõn nh·∫•t Singapore (Ki·∫øn th·ª©c th·ª±c t·∫ø/Trong b√†i)." },
        { id: "8-2", q: "2. Who will come with me to Aeon Mall tomorrow?", ans: "h", exp: "C√¢u h·ªèi 'Who' (Ai) -> Tr·∫£ l·ªùi b·∫±ng t√™n ng∆∞·ªùi 'Alex will'." },
        { id: "8-3", q: "3. How many shops are there in Van Hanh Mall?", ans: "f", exp: "C√¢u h·ªèi 'How many' (Bao nhi√™u) -> Tr·∫£ l·ªùi b·∫±ng s·ªë l∆∞·ª£ng 'Around 200 shops'." },
        { id: "8-4", q: "4. Why do you like open-air markets?", ans: "j", exp: "C√¢u h·ªèi 'Why' (T·∫°i sao) -> Tr·∫£ l·ªùi l√Ω do 'Because I can bargain there' (V√¨ t√¥i c√≥ th·ªÉ tr·∫£ gi√°)." },
        { id: "8-5", q: "5. Where is Iconsiam located?", ans: "i", exp: "C√¢u h·ªèi 'Where' (·ªû ƒë√¢u) -> Tr·∫£ l·ªùi v·ªã tr√≠ 'On the bank of Chao Phraya river' (B√™n b·ªù s√¥ng)." },
        { id: "8-6", q: "6. Which one do you prefer, Circle K or GS25?", ans: "g", exp: "C√¢u h·ªèi l·ª±a ch·ªçn (Which one) -> Tr·∫£ l·ªùi ch·ªçn 1 c√°i 'Circle K'." },
        { id: "8-7", q: "7. When does the online sale end?", ans: "b", exp: "C√¢u h·ªèi 'When' (Khi n√†o) -> Tr·∫£ l·ªùi th·ªùi gian 'It's 15 December'." },
        { id: "8-8", q: "8. How far is it from your house to the florist's?", ans: "a", exp: "C√¢u h·ªèi 'How far' (Bao xa) -> Tr·∫£ l·ªùi kho·∫£ng c√°ch 'About 500 metres'." },
        { id: "8-9", q: "9. What country does Muji come from?", ans: "c", exp: "C√¢u h·ªèi 'What country' -> Tr·∫£ l·ªùi t√™n n∆∞·ªõc 'It's Japan'." },
        { id: "8-10", q: "10. How often do you return things you buy online?", ans: "d", exp: "C√¢u h·ªèi 'How often' (T·∫ßn su·∫•t) -> Tr·∫£ l·ªùi 'I rarely do that' (Hi·∫øm khi)." }
    ];

    const dataPart9 = [
        {
            id: "9-1",
            q: "1. ...the European country is home (1) ____ some of the oldest...",
            options: {a: "for", b: "to", c: "with", d: "at"},
            correct: "b",
            exp: "<strong>ƒê√°p √°n B: to</strong>. <br>C·ª•m t·ª´: <em>be home to something</em> (l√† n∆°i c∆∞ tr√∫/qu√™ h∆∞∆°ng c·ªßa c√°i g√¨). <br>D·ªãch: N∆∞·ªõc ƒê·ª©c l√† qu√™ h∆∞∆°ng c·ªßa nh·ªØng ch·ª£ l√¢u ƒë·ªùi nh·∫•t."
        },
        {
            id: "9-2",
            q: "2. ...some of the oldest and most (2) ____ festive markets.",
            options: {a: "visit", b: "visiting", c: "visited", d: "to visit"},
            correct: "c",
            exp: "<strong>ƒê√°p √°n C: visited</strong>. <br>C·∫•u tr√∫c so s√°nh nh·∫•t c·ªßa t√≠nh t·ª´ gh√©p: <em>most visited</em> (ƒë∆∞·ª£c gh√© thƒÉm nhi·ªÅu nh·∫•t). <br>D·ªãch: Nh·ªØng khu ch·ª£ l·ªÖ h·ªôi ƒë∆∞·ª£c gh√© thƒÉm nhi·ªÅu nh·∫•t."
        },
        {
            id: "9-3",
            q: "3. Berlin has around 80 to choose from, (3) ____ Gendarmenmark is perhaps its most renowned.",
            options: {a: "but", b: "so", c: "or", d: "although"},
            correct: "a",
            exp: "<strong>ƒê√°p √°n A: but</strong>. <br>Li√™n t·ª´ ch·ªâ s·ª± t∆∞∆°ng ph·∫£n. C√≥ 80 c√°i (s·ªë l∆∞·ª£ng nhi·ªÅu), <strong>nh∆∞ng</strong> c√°i n√†y n·ªïi ti·∫øng nh·∫•t (nh·∫•n m·∫°nh s·ª± ƒë·∫∑c bi·ªát). <br>D·ªãch: C√≥ 80 c√°i ƒë·ªÉ ch·ªçn, nh∆∞ng Gendarmenmark l√† n·ªïi nh·∫•t."
        },
        {
            id: "9-4",
            q: "4. ...wooden huts with Bratwurst... and gingerbread for (4) ____.",
            options: {a: "sell", b: "sold", c: "selling", d: "sale"},
            correct: "d",
            exp: "<strong>ƒê√°p √°n D: sale</strong>. <br>C·ª•m t·ª´: <em>for sale</em> (ƒë·ªÉ b√°n). <br>C√°c t·ª´ kh√°c: Sell (v), Sold (v-ed), Selling (v-ing) kh√¥ng ƒëi v·ªõi 'for' trong ng·ªØ c·∫£nh n√†y."
        },
        {
            id: "9-5",
            q: "5. ...nightly concerts with dance and musical (5) ____.",
            options: {a: "performances", b: "displays", c: "presentations", d: "events"},
            correct: "a",
            exp: "<strong>ƒê√°p √°n A: performances</strong>. <br>Collocation: <em>Musical performances</em> (C√°c m√†n bi·ªÉu di·ªÖn √¢m nh·∫°c). <br>Displays (tr∆∞ng b√†y), Presentations (thuy·∫øt tr√¨nh) kh√¥ng ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh h√≤a nh·∫°c."
        },
        {
            id: "9-6",
            q: "6. In Nuremberg, Bavaria's (6) ____ city...",
            options: {a: "second-large", b: "second-largest", c: "largest-second", d: "large-second"},
            correct: "b",
            exp: "<strong>ƒê√°p √°n B: second-largest</strong>. <br>Ng·ªØ ph√°p: S·ªë th·ª© t·ª± + So s√°nh nh·∫•t (Th·ª© nh√¨, th·ª© ba...). <br>D·ªãch: Th√†nh ph·ªë l·ªõn th·ª© hai c·ªßa bang Bavaria."
        },
        {
            id: "9-7",
            q: "7. During the Christmas period, around 180 stands are (7) ____ in the city's central market...",
            options: {a: "put", b: "shown", c: "hold", d: "erected"},
            correct: "d",
            exp: "<strong>ƒê√°p √°n D: erected</strong>. <br>T·ª´ v·ª±ng: <em>Erect a stand/building</em> (D·ª±ng l√™n, x√¢y d·ª±ng). <br>'Put' c·∫ßn ƒëi v·ªõi 'up' (put up). 'Shown' (ƒë∆∞·ª£c chi·∫øu/xem). 'Hold' (t·ªï ch·ª©c - d√πng cho s·ª± ki·ªán h∆°n l√† qu·∫ßy h√†ng v·∫≠t l√Ω)."
        },
        {
            id: "9-8",
            q: "8. The market (8) ____ runs from November 22 to December 31.",
            options: {a: "rarely", b: "sometimes", c: "usually", d: "never"},
            correct: "c",
            exp: "<strong>ƒê√°p √°n C: usually</strong>. <br>Ng·ªØ c·∫£nh: S·ª± ki·ªán th∆∞·ªùng ni√™n, di·ªÖn ra theo l·ªãch c·ªë ƒë·ªãnh. <br>D·ªãch: Ch·ª£ <strong>th∆∞·ªùng</strong> ho·∫°t ƒë·ªông t·ª´ 22/11 ƒë·∫øn 31/12."
        }
    ];

    const dataPart10 = [
        {
            id: "10-1",
            q: "1. In the first paragraph, what is NOT true about Shopee?",
            options: {
                a: "It was established in 2015 in Singapore.",
                b: "It is an e-commerce platform for both consumers and sellers.",
                c: "In Southeast Asia, Shopee is the largest e-commerce platform.",
                d: "People in countries outside Asia can't use Shopee."
            },
            correct: "d",
            exp: "<strong>ƒê√°p √°n D l√† Sai (NOT True) -> Ch·ªçn D</strong>.<br>D·∫´n ch·ª©ng: 'buy and sell your goods in many countries across East Asia, Latin America, and Europe.' (Ch√¢u M·ªπ Latin v√† Ch√¢u √Çu n·∫±m ngo√†i Ch√¢u √Å). <br>A, B, C ƒë·ªÅu ƒë√∫ng theo ƒëo·∫°n 1."
        },
        {
            id: "10-2",
            q: "2. What does the phrase 'prone to risk' most nearly mean?",
            options: {
                a: "impossible to be at risk",
                b: "likely to suffer from risk",
                c: "willing to risk",
                d: "difficult to face risk"
            },
            correct: "b",
            exp: "<strong>ƒê√°p √°n B: likely to suffer from risk</strong>.<br>T·ª´ v·ª±ng: <em>Prone to something</em> = D·ªÖ b·ªã, c√≥ khuynh h∆∞·ªõng b·ªã ·∫£nh h∆∞·ªüng b·ªüi c√°i g√¨ (th∆∞·ªùng l√† ti√™u c·ª±c)."
        },
        {
            id: "10-3",
            q: "3. What kind of risks can customers face when buying online?",
            options: {
                a: "They may get banned by Shopee.",
                b: "Their payment account is fake.",
                c: "Their bank details get stolen.",
                d: "They are not educated about fraud."
            },
            correct: "c",
            exp: "<strong>ƒê√°p √°n C: Their bank details get stolen.</strong><br>D·∫´n ch·ª©ng: 'frauds and scams rob customers and try to get their bank details...' (L·ª´a ƒë·∫£o c·ªë g·∫Øng l·∫•y tr·ªôm th√¥ng tin ng√¢n h√†ng)."
        },
        {
            id: "10-4",
            q: "4. What will happen if the system flags a user?",
            options: {
                a: "Shopee will alert customers.",
                b: "The user will break the rules.",
                c: "The user will be banned.",
                d: "Shopee will provide safety measures."
            },
            correct: "c",
            exp: "<strong>ƒê√°p √°n C: The user will be banned.</strong><br>D·∫´n ch·ª©ng: '...banning and suspending users who break the rules if the system flags them.' (C·∫•m v√† ƒë√¨nh ch·ªâ ng∆∞·ªùi d√πng n·∫øu h·ªá th·ªëng g·∫Øn c·ªù h·ªç)."
        },
        {
            id: "10-5",
            q: "5. The aim of the 'Shopee Guarantee' is ____",
            options: {
                a: "to ensure that customers can buy product",
                b: "to give sellers feedbacks",
                c: "to change customers' passwords",
                d: "to make sure there are no troubles with payment"
            },
            correct: "d",
            exp: "<strong>ƒê√°p √°n D: to make sure there are no troubles with payment.</strong><br>D·∫´n ch·ª©ng: 'The Shopee Guarantee ensures that the customer does not face any payment related problems.'"
        },
        {
            id: "10-6",
            q: "6. What can customers do to gain more trust in an online shop?",
            options: {
                a: "They can check the name of the sellers.",
                b: "They can check rating from previous customers.",
                c: "They can get detail about previous customers.",
                d: "They can give their social proof to seller."
            },
            correct: "b",
            exp: "<strong>ƒê√°p √°n B: They can check rating from previous customers.</strong><br>D·∫´n ch·ª©ng: 'check the customer rating before buying... so they know more about the product from previous customers.' (Ki·ªÉm tra ƒë√°nh gi√° ƒë·ªÉ tin t∆∞·ªüng h∆°n)."
        },
        {
            id: "10-7",
            q: "7. What is the main idea of this passage?",
            options: {
                a: "How Shopee assists customers in avoiding scams.",
                b: "What makes Shopee the largest e-commerce platform.",
                c: "Why customers often get scammed when buying online.",
                d: "The relationship between Shopee and its customers."
            },
            correct: "a",
            exp: "<strong>ƒê√°p √°n A: How Shopee assists customers in avoiding scams.</strong><br>Gi·∫£i th√≠ch: B√†i vƒÉn n√≥i v·ªÅ r·ªßi ro l·ª´a ƒë·∫£o v√† t·∫≠p trung li·ªát k√™ c√°c bi·ªán ph√°p Shopee th·ª±c hi·ªán (gi√°o d·ª•c kh√°ch, Shopee Guarantee, c·∫£nh b√°o password, khuy√™n check rating) ƒë·ªÉ b·∫£o v·ªá kh√°ch."
        }
    ];

    const dataPart11 = [
        {
            id: "11-1",
            q: "1. We studied in secondary school. We often went to the bookshop nearby. (When)",
            options: {
                a: "When we studied in secondary school, we often went to the bookshop nearby.",
                b: "We studied in secondary school when we often went to the bookshop nearby.",
                c: "We often went to the bookshop nearby, when we studied in secondary school."
            },
            correct: "a",
            exp: "<strong>ƒê√°p √°n A</strong>. <br>C·∫•u tr√∫c: <em>When + Past Simple (m·ªánh ƒë·ªÅ th·ªùi gian), Past Simple (m·ªánh ƒë·ªÅ ch√≠nh)</em>. H√†nh ƒë·ªông h·ªçc ·ªü tr∆∞·ªùng l√† ng·ªØ c·∫£nh th·ªùi gian cho h√†nh ƒë·ªông ƒëi hi·ªáu s√°ch."
        },
        {
            id: "11-2",
            q: "2. You want to exchange this shirt for a larger size. You pay for the shipping fee. (if)",
            options: {
                a: "You want to exchange this shirt if you pay for the shipping fee.",
                b: "If you want to exchange this shirt for a larger size, you pay for the shipping fee.",
                c: "You can exchange this shirt for a larger size if you pay for the shipping fee."
            },
            correct: "c",
            exp: "<strong>ƒê√°p √°n C</strong>. <br>C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1 ho·∫∑c c√¢u m·ªánh l·ªánh/ch·ªâ d·∫´n. 'B·∫°n c√≥ th·ªÉ ƒë·ªïi... n·∫øu b·∫°n tr·∫£ ti·ªÅn ship'. C√¢u g·ªëc thi·∫øu ƒë·ªông t·ª´ khuy·∫øt thi·∫øu nh∆∞ng ng·ªØ c·∫£nh ng·ª• √Ω 'Can'. (L∆∞u √Ω: ƒê√°p √°n B c≈©ng ƒë√∫ng v·ªÅ ng·ªØ ph√°p nh∆∞ng C t·ª± nhi√™n h∆°n v·ªÅ nghƒ©a cho ph√©p)."
        },
        {
            id: "11-3",
            q: "3. Customers can buy these products at our shop. They can check our website. (or)",
            options: {
                a: "Customers can buy these products at our shop or check our website.",
                b: "Customers can buy these products or at our shop check our website.",
                c: "Customers can buy these products at our shop or they can checking our website."
            },
            correct: "a",
            exp: "<strong>ƒê√°p √°n A</strong>. <br>R√∫t g·ªçn ch·ªß ng·ªØ khi n·ªëi b·∫±ng 'or'. Customers can [buy...] or [check...]."
        },
        {
            id: "11-4",
            q: "4. The mother is shopping at the supermarket. The children are playing at the arcade. (while)",
            options: {
                a: "The mother is shopping while the children are playing.",
                b: "The mother is shopping at the supermarket while the children are playing at the arcade.",
                c: "While the mother is shopping at the supermarket the children are playing at the arcade."
            },
            correct: "b",
            exp: "<strong>ƒê√°p √°n B</strong>. <br>Di·ªÖn t·∫£ 2 h√†nh ƒë·ªông song song x·∫£y ra c√πng l√∫c ·ªü hi·ªán t·∫°i ti·∫øp di·ªÖn. (ƒê√°p √°n C thi·∫øu d·∫•u ph·∫©y ngƒÉn c√°ch)."
        },
        {
            id: "11-5",
            q: "5. Katherine makes a lot of money. She spends everything on shopping for shoes. (Although)",
            options: {
                a: "Although Katherine makes a lot of money, she spends everything on shopping for shoes.",
                b: "Katherine makes a lot of money although she spends everything.",
                c: "Although she spends everything, Katherine makes a lot of money."
            },
            correct: "a",
            exp: "<strong>ƒê√°p √°n A</strong>. <br>M·ªánh ƒë·ªÅ nh∆∞·ª£ng b·ªô: M·∫∑c d√π ki·∫øm nhi·ªÅu ti·ªÅn (v·∫ø 1), nh∆∞ng ti√™u h·∫øt (v·∫ø 2)."
        },
        {
            id: "11-6",
            q: "6. There were buy one get one free deals. Everyone bought two backpacks. (so)",
            options: {
                a: "There were buy one get one free deals so everyone bought two backpacks.",
                b: "There were buy one get one free deals, so everyone bought two backpacks.",
                c: "Everyone bought two backpacks so there were buy one get one free deals."
            },
            correct: "b",
            exp: "<strong>ƒê√°p √°n B</strong>. <br>Nguy√™n nh√¢n - K·∫øt qu·∫£. C√≥ khuy·∫øn m√£i (nguy√™n nh√¢n) -> M·ªçi ng∆∞·ªùi mua (k·∫øt qu·∫£). D√πng d·∫•u ph·∫©y tr∆∞·ªõc 'so'."
        },
        {
            id: "11-7",
            q: "7. My grandmother stopped by an open-air market. Then she came to my house. (After)",
            options: {
                a: "After my grandmother stopped by an open-air market, she came to my house.",
                b: "My grandmother stopped by an open-air market after she came to my house.",
                c: "After she came to my house, my grandmother stopped by an open-air market."
            },
            correct: "a",
            exp: "<strong>ƒê√°p √°n A</strong>. <br>Tr·∫≠t t·ª± th·ªùi gian: D·ª´ng ·ªü ch·ª£ tr∆∞·ªõc -> ƒê·∫øn nh√† sau. <em>After + h√†nh ƒë·ªông x·∫£y ra tr∆∞·ªõc</em>."
        },
        {
            id: "11-8",
            q: "8. You don't buy from that speciality shop. You won't get overpriced items. (Unless)",
            options: {
                a: "Unless you buy from that speciality shop, you won't get overpriced items.",
                b: "Unless you don't buy from that speciality shop, you won't get overpriced items.",
                c: "You won't get overpriced items unless you buy from that speciality shop."
            },
            correct: "a",
            exp: "<strong>ƒê√°p √°n A</strong>. <br>Unless = If... not. <br>C√¢u g·ªëc: If you don't buy..., you won't get... <br>Vi·∫øt l·∫°i: Unless you buy..., you won't get... (Tr·ª´ khi b·∫°n mua ·ªü ƒë√≥, c√≤n kh√¥ng th√¨ b·∫°n s·∫Ω kh√¥ng b·ªã mua ƒë·∫Øt -> Ch·ªâ khi mua ·ªü ƒë√≥ m·ªõi b·ªã ƒë·∫Øt)."
        },
        {
            id: "11-9",
            q: "9. I won't buy anything. The Black Friday supersale starts in November. (until)",
            options: {
                a: "I won't buy anything until the Black Friday supersale starts in November.",
                b: "I won't buy anything until the Black Friday supersale will start.",
                c: "Until I won't buy anything, the Black Friday supersale starts."
            },
            correct: "a",
            exp: "<strong>ƒê√°p √°n A</strong>. <br>C·∫•u tr√∫c: <em>Not ... until ...</em> (Kh√¥ng l√†m g√¨ cho ƒë·∫øn khi...). M·ªánh ƒë·ªÅ sau until chia hi·ªán t·∫°i ƒë∆°n."
        },
        {
            id: "11-10",
            q: "10. Shopping centres offer a wide range of products. That's also a place for entertainment. (and)",
            options: {
                a: "Shopping centres offer a wide range of products and that's also a place for entertainment.",
                b: "Shopping centres offer a wide range of products, and they are also places for entertainment.",
                c: "Shopping centres offer a wide range of products and entertainment."
            },
            correct: "b",
            exp: "<strong>ƒê√°p √°n B</strong>. <br>N·ªëi 2 m·ªánh ƒë·ªÅ ƒë·ªôc l·∫≠p ƒë·∫ßy ƒë·ªß. C·∫ßn s·ª≠a 'That's' th√†nh 'they are' ƒë·ªÉ ph√π h·ª£p v·ªõi ch·ªß ng·ªØ s·ªë nhi·ªÅu 'Shopping centres' v√† tr√°nh l·∫∑p l·∫°i v·ª•ng v·ªÅ. (ƒê√°p √°n C g·ªçn nh∆∞ng ƒë·ªÅ b√†i y√™u c·∫ßu n·ªëi c√¢u gi·ªØ √Ω)."
        }
    ];

    // --- INITIALIZATION ---
    function init() {
        renderPart8();
        renderMultipleChoice("questions-part-ix", dataPart9);
        renderMultipleChoice("questions-part-x", dataPart10);
        renderMultipleChoice("questions-part-xi", dataPart11);
    }

    // --- RENDER FUNCTIONS ---
    function renderPart8() {
        const container = document.getElementById("matching-questions");
        let html = '';
        dataPart8.forEach(item => {
            html += `
                <div class="match-item">
                    <span style="flex:1;">${item.q}</span>
                    <select class="match-select" id="sel-${item.id}">
                        <option value="">Choose...</option>
                        <option value="a">a</option>
                        <option value="b">b</option>
                        <option value="c">c</option>
                        <option value="d">d</option>
                        <option value="e">e</option>
                        <option value="f">f</option>
                        <option value="g">g</option>
                        <option value="h">h</option>
                        <option value="i">i</option>
                        <option value="j">j</option>
                    </select>
                </div>
            `;
        });
        container.innerHTML = html;
    }

    function renderMultipleChoice(containerId, data) {
        const container = document.getElementById(containerId);
        data.forEach(item => {
            let optionsHtml = '';
            // Handle array options (for part 11) or object options (part 9, 10)
            const keys = Object.keys(item.options);
            
            keys.forEach(key => {
                optionsHtml += `
                    <div class="option-btn" onclick="selectOption('${item.id}', '${key}', this)">
                        <div style="font-weight:bold; margin-right:10px; color:var(--primary)">${key.toUpperCase()}.</div>
                        <div>${item.options[key]}</div>
                    </div>
                `;
            });

            container.innerHTML += `
                <div class="question-block" id="block-${item.id}">
                    <div class="question-text">${item.q}</div>
                    <div class="options-grid" id="opts-${item.id}">
                        ${optionsHtml}
                    </div>
                    <button class="check-btn" onclick="checkItem('${item.id}', '${item.correct}')">CHECK</button>
                    <div id="exp-${item.id}" class="explanation">
                        <span class="explanation-title">Gi·∫£i th√≠ch chi ti·∫øt:</span>
                        ${item.exp}
                    </div>
                </div>
            `;
        });
    }

    // --- LOGIC HANDLERS ---
    
    // Store user selections
    let userAnswers = {};
    let totalScore = 0;
    const TOTAL_QUESTIONS = 10 + 8 + 7 + 10; // 35 questions

    function selectOption(qId, val, btnElement) {
        // Remove selected class from siblings
        const parent = document.getElementById(`opts-${qId}`);
        const btns = parent.getElementsByClassName('option-btn');
        for (let btn of btns) {
            btn.classList.remove('selected');
        }
        // Add to clicked
        btnElement.classList.add('selected');
        userAnswers[qId] = val;
    }

    function playSound(type) {
        // Simple Audio Context beep implementation to avoid external assets
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        if (!AudioContext) return;
        
        const ctx = new AudioContext();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        
        osc.connect(gain);
        gain.connect(ctx.destination);
        
        if (type === 'correct') {
            osc.type = 'sine';
            osc.frequency.setValueAtTime(600, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
            osc.start();
            osc.stop(ctx.currentTime + 0.3);
            
            // Confetti effect
            fireConfetti();
        } else {
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(200, ctx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, ctx.currentTime + 0.2);
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0.01, ctx.currentTime + 0.3);
            osc.start();
            osc.stop(ctx.currentTime + 0.3);
        }
    }

    function checkItem(qId, correctVal) {
        if (!userAnswers[qId]) {
            alert("Em h√£y ch·ªçn m·ªôt ƒë√°p √°n tr∆∞·ªõc nh√©!");
            return;
        }

        const block = document.getElementById(`block-${qId}`);
        const expBox = document.getElementById(`exp-${qId}`);
        const checkBtn = block.querySelector('.check-btn');
        const optsParent = document.getElementById(`opts-${qId}`);
        const btns = optsParent.getElementsByClassName('option-btn');

        let isCorrect = userAnswers[qId] === correctVal;

        // Visual Feedback
        for (let btn of btns) {
            // Find the text content corresponding to the value to identify button
            // But we stored value in closure. 
            // Better: loop and check text. Or simply, find the one with 'selected'
            if (btn.classList.contains('selected')) {
                if (isCorrect) {
                    btn.classList.add('correct-answer');
                } else {
                    btn.classList.add('wrong-answer');
                }
            }
            // Always show correct answer
            // Finding the correct button is tricky without ID.
            // Let's rely on index logic or simple text check. 
            // Using a simple trick: The buttons are generated in order a,b,c,d
            // We can match based on the text inside the "B." "C." labels?
            // Let's use the index map: a=0, b=1, c=2, d=3
            const map = {a:0, b:1, c:2, d:3};
            if (map[correctVal] !== undefined) {
                 if (Array.from(btns).indexOf(btn) === map[correctVal]) {
                     if (!isCorrect) btn.style.border = "2px solid #00b85c"; // Hint green border
                 }
            }
        }

        if (isCorrect) {
            playSound('correct');
            checkBtn.innerText = "CORRECT! üéâ";
            checkBtn.style.background = "var(--correct)";
            updateScore(1);
        } else {
            playSound('wrong');
            checkBtn.innerText = "OOPS! üòÖ";
            checkBtn.style.background = "var(--wrong)";
        }

        // Disable interaction
        checkBtn.disabled = true;
        
        // Show explanation
        expBox.style.display = "block";
    }

    function checkPart8() {
        let correctCount = 0;
        let explanationHtml = "<span class='explanation-title'>ƒê√ÅP √ÅN CHI TI·∫æT:</span><ul>";
        
        dataPart8.forEach(item => {
            const select = document.getElementById(`sel-${item.id}`);
            const val = select.value;
            
            if (val === item.ans) {
                select.style.border = "2px solid var(--correct)";
                select.style.background = "#e8f5e9";
                correctCount++;
            } else {
                select.style.border = "2px solid var(--wrong)";
                select.style.background = "#ffebee";
            }
            select.disabled = true;
            
            explanationHtml += `<li><strong>${item.q}</strong> -> ƒê√°p √°n: <strong style="color:var(--primary)">${item.ans}</strong>. ${item.exp}</li>`;
        });
        
        explanationHtml += "</ul>";
        
        const expBox = document.getElementById("explanation-part8");
        expBox.innerHTML = explanationHtml;
        expBox.style.display = "block";
        
        updateScore(correctCount);
        
        if (correctCount === 10) {
            playSound('correct');
        } else {
            playSound('wrong');
        }
    }

    function updateScore(points) {
        // This is a visual running score. The final Submit calculates everything again or sums up.
        // For simplicity, let's just increment a global variable for display
        // But to be accurate for "Submit All", we should probably recalculate.
        // Let's just use the current score display as a motivator.
        const scoreEl = document.getElementById('current-score');
        let current = parseInt(scoreEl.innerText);
        scoreEl.innerText = current + points;
    }

    function submitAll() {
        // Calculate total score based on locked states or user answers
        // Since we have individual check buttons, "Submit All" acts as a summary/reveal.
        // It will count correct answers.
        
        let finalScore = 0;
        
        // Count Part 8
        dataPart8.forEach(item => {
            const select = document.getElementById(`sel-${item.id}`);
            if (select.value === item.ans) finalScore++;
        });

        // Count others
        const allMC = [...dataPart9, ...dataPart10, ...dataPart11];
        allMC.forEach(item => {
            if (userAnswers[item.id] === item.correct) finalScore++;
        });

        const modal = document.getElementById('resultModal');
        const scoreText = document.getElementById('final-score');
        const feedback = document.getElementById('feedback-message');
        
        scoreText.innerText = `${finalScore}/${TOTAL_QUESTIONS}`;
        
        const percentage = (finalScore / TOTAL_QUESTIONS) * 100;
        
        if (percentage >= 90) {
            feedback.innerText = "Tuy·ªát v·ªùi! Em ƒë√∫ng l√† h·ªçc sinh xu·∫•t s·∫Øc c·ªßa c√¥ Mai An! üåü";
            fireConfetti();
        } else if (percentage >= 70) {
            feedback.innerText = "L√†m t·ªët l·∫Øm! Ch·ªâ c·∫ßn c·∫©n th·∫≠n h∆°n m·ªôt ch√∫t n·ªØa th√¥i! üí™";
        } else {
            feedback.innerText = "ƒê·ª´ng n·∫£n l√≤ng! H√£y xem k·ªπ ph·∫ßn gi·∫£i th√≠ch v√† th·ª≠ l·∫°i nh√©! üìö";
        }
        
        modal.style.display = "flex";
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = "none";
    }

    // --- CONFETTI EFFECT (Simple implementation) ---
    function fireConfetti() {
        const colors = ['#8854C0', '#00C9A7', '#FF9FF3', '#FECA57', '#FF6B6B'];
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.style.position = 'fixed';
            confetti.style.width = '10px';
            confetti.style.height = '10px';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-10px';
            confetti.style.zIndex = '9999';
            confetti.style.borderRadius = '50%';
            document.body.appendChild(confetti);

            const anim = confetti.animate([
                { transform: `translate(0, 0) rotate(0)`, opacity: 1 },
                { transform: `translate(${Math.random()*200 - 100}px, 100vh) rotate(${Math.random()*720}deg)`, opacity: 0 }
            ], {
                duration: 2000 + Math.random() * 1000,
                easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
            });

            anim.onfinish = () => confetti.remove();
        }
    }

    // Run
    init();

</script>
</body>
</html>