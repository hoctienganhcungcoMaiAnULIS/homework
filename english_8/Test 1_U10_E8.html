<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIT 10 – COMMUNICATION | TEST 01</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --success-color: #28a745;
            --error-color: #dc3545;
            --warning-color: #ffc107;
            --light-bg: #f8f9fa;
            --card-shadow: 0 4px 6px rgba(0,0,0,0.1);
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            font-family: var(--font-main);
            background-color: #e9ecef;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        /* Header */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        header h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        header h2 {
            margin: 5px 0 0;
            font-size: 1rem;
            font-weight: 400;
            opacity: 0.9;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
            padding-bottom: 100px;
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            padding: 20px;
            transition: transform 0.2s;
            border-left: 5px solid var(--primary-color);
            position: relative;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .question-number {
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: block;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 20px;
            font-weight: 500;
        }

        /* Data Box for Reading Passages */
        .data-box {
            background-color: #e3f2fd;
            border: 1px solid #90caf9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-family: Georgia, serif;
            line-height: 1.8;
            font-size: 1.05rem;
            color: #2c3e50;
        }

        .data-box h3 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.1rem;
            text-align: center;
            text-transform: uppercase;
        }

        /* Glossary Styles */
        .glossary-box {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 6px;
            padding: 10px 15px;
            margin-bottom: 15px;
            font-family: var(--font-main);
            font-size: 0.9rem;
        }

        .glossary-box h5 {
            margin: 0 0 5px 0;
            color: #856404;
            text-transform: uppercase;
            font-weight: bold;
            border-bottom: 1px solid #ffeeba;
            padding-bottom: 3px;
        }

        .glossary-box ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .glossary-box li {
            background: rgba(255,255,255,0.6);
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px solid #e0d0a0;
        }

        .glossary-box b {
            color: #d32f2f;
        }

        /* Options */
        .options-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            transition: all 0.2s;
            background-color: #fff;
        }

        .option-label:hover {
            background-color: var(--light-bg);
            border-color: #cbd3da;
        }

        .option-label input {
            margin-right: 15px;
            margin-top: 5px;
            accent-color: var(--primary-color);
            transform: scale(1.2);
        }

        .option-text {
            flex: 1;
        }

        /* Gap Fill Layout */
        .gap-fill-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .gap-fill-options-box {
            background-color: #f8f9fa;
            border: 2px dashed #0056b3;
            padding: 15px;
            border-radius: 8px;
            font-weight: 500;
            margin-bottom: 15px;
        }

        /* Sign & Notice Simulation */
        .sign-wrapper {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .sign-no-exit {
            width: 160px;
            height: 160px;
            background-color: #cc0000;
            border-radius: 12px;
            border: 4px solid white;
            box-shadow: 0 0 0 2px #cc0000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-family: Impact, sans-serif;
            text-align: center;
        }

        .sign-circle {
            width: 70px;
            height: 70px;
            background: #cc0000;
            border-radius: 50%;
            border: 8px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 5px 0;
        }

        .sign-bar {
            width: 50px;
            height: 10px;
            background-color: white;
        }

        .sign-top-text { font-size: 1.5rem; line-height: 1; }
        .sign-btm-text { font-size: 1rem; line-height: 1; }

        .notice-box {
            border: 2px solid #dc3545;
            padding: 15px;
            background: white;
            color: #dc3545;
            font-weight: bold;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            box-shadow: 3px 3px 0px rgba(0,0,0,0.1);
        }

        /* Buttons */
        .btn-check {
            margin-top: 20px;
            background-color: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-check:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* Explanation */
        .explanation {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            background-color: #e8f5e9;
            border: 1px solid #c3e6cb;
            display: none;
            font-size: 0.95rem;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            margin-top: 0;
            color: var(--success-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-detail {
            margin-top: 10px;
            border-top: 1px dashed #ccc;
            padding-top: 10px;
        }
        
        .vocab-tag {
            font-size: 0.8em;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .tag-n { background: #cce5ff; color: #004085; }
        .tag-v { background: #d4edda; color: #155724; }
        .tag-adj { background: #fff3cd; color: #856404; }
        .tag-adv { background: #f8d7da; color: #721c24; }

        /* Sticky Footer */
        .sticky-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
            padding: 15px 0;
            text-align: center;
            z-index: 999;
        }

        .btn-submit {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
            transition: all 0.3s;
        }

        .btn-submit:hover {
            transform: scale(1.05);
            background-color: #218838;
        }

        /* Result States */
        .correct-answer {
            background-color: #d4edda !important;
            border-color: #c3e6cb !important;
            color: #155724;
        }

        .wrong-answer {
            background-color: #f8d7da !important;
            border-color: #f5c6cb !important;
            color: #721c24;
        }

        /* Popup */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(3px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .popup {
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: popIn 0.3s;
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-display {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 20px 0;
        }

        u {
            text-decoration: underline;
            text-underline-offset: 3px;
            font-weight: bold;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container { padding: 10px; padding-bottom: 90px; }
            .card { padding: 15px; }
            .btn-submit { padding: 12px 30px; font-size: 1rem; }
            .glossary-box ul { flex-direction: column; gap: 5px; }
        }
    </style>
</head>
<body>

<header>
    <h1>UNIT 10 – COMMUNICATION</h1>
    <h2>TEST 01 - Teacher: Ms Mai An ULIS</h2>
</header>

<div class="container" id="quiz-container">
    </div>

<div class="sticky-footer">
    <button class="btn-submit" onclick="submitAll()">NỘP BÀI & XEM KẾT QUẢ</button>
</div>

<div class="overlay" id="resultOverlay">
    <div class="popup">
        <h2>Kết Quả Bài Làm</h2>
        <div class="score-display" id="scoreDisplay">0/40</div>
        <p id="scoreMessage" style="font-size: 1.1rem; color: #666;">Bạn chưa hoàn thành bài thi.</p>
        <button class="btn-check" style="background: var(--primary-color); color: white;" onclick="closePopup()">Xem chi tiết lời giải</button>
    </div>
</div>

<script>
    const questions = [
        // --- PRONUNCIATION ---
        {
            id: 1,
            type: "phonetics",
            text: "Mark the letter A, B, C or D to indicate the word whose underlined part differs from the other three in pronunciation.",
            options: [
                { text: "l<u>a</u>nguage", value: "A" },
                { text: "c<u>u</u>ltural", value: "B" },
                { text: "inter<u>a</u>ct", value: "C" },
                { text: "l<u>a</u>ndline", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: cultural</h4>
                <div class="explanation-detail">
                    <strong>Giải thích chi tiết:</strong>
                    <ul>
                        <li>A. l<u>a</u>nguage /ˈlæŋ.ɡwɪdʒ/ -> Âm <strong>/æ/</strong></li>
                        <li>B. c<u>u</u>ltural /ˈkʌl.tʃər.əl/ -> Âm <strong>/ʌ/</strong> (âm á)</li>
                        <li>C. inter<u>a</u>ct /ˌɪn.təˈrækt/ -> Âm <strong>/æ/</strong></li>
                        <li>D. l<u>a</u>ndline /ˈlænd.laɪn/ -> Âm <strong>/æ/</strong></li>
                    </ul>
                </div>
            `
        },
        {
            id: 2,
            type: "phonetics",
            text: "Mark the letter A, B, C or D to indicate the word whose underlined part differs from the other three in pronunciation.",
            options: [
                { text: "priv<u>a</u>te", value: "A" },
                { text: "communic<u>a</u>te", value: "B" },
                { text: "classm<u>a</u>te", value: "C" },
                { text: "transl<u>a</u>te", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A: private</h4>
                <div class="explanation-detail">
                    <ul>
                        <li>A. priv<u>a</u>te /ˈpraɪ.vət/ -> Âm <strong>/ə/</strong> (âm schwa/âm yếu).</li>
                        <li>B. communic<u>a</u>te /kəˈmjuː.nɪ.keɪt/ -> Âm <strong>/eɪ/</strong>.</li>
                        <li>C. classm<u>a</u>te /ˈklɑːs.meɪt/ -> Âm <strong>/eɪ/</strong>.</li>
                        <li>D. transl<u>a</u>te /trænzˈleɪt/ -> Âm <strong>/eɪ/</strong>.</li>
                    </ul>
                </div>
            `
        },
        // --- STRESS ---
        {
            id: 3,
            type: "stress",
            text: "Mark the letter A, B, C or D to indicate the word that differs from the other three in the position of primary stress.",
            options: [
                { text: "holography", value: "A" },
                { text: "communicate", value: "B" },
                { text: "disadvantage", value: "C" },
                { text: "technology", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: disadvantage</h4>
                <div class="explanation-detail">
                    <ul>
                        <li>A. holography /hɒˈlɒɡ.rə.fi/ -> Trọng âm <strong>2</strong>.</li>
                        <li>B. communicate /kəˈmjuː.nɪ.keɪt/ -> Trọng âm <strong>2</strong>.</li>
                        <li>C. disadvantage /ˌdɪs.ədˈvɑːn.tɪdʒ/ -> Trọng âm <strong>3</strong>.</li>
                        <li>D. technology /tekˈnɒl.ə.dʒi/ -> Trọng âm <strong>2</strong>.</li>
                    </ul>
                </div>
            `
        },
        {
            id: 4,
            type: "stress",
            text: "Mark the letter A, B, C or D to indicate the word that differs from the other three in the position of primary stress.",
            options: [
                { text: "trainee", value: "A" },
                { text: "media", value: "B" },
                { text: "oversea", value: "C" },
                { text: "bamboo", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: media</h4>
                <div class="explanation-detail">
                    <ul>
                        <li>A. trainee /treɪˈniː/ -> Trọng âm <strong>2</strong> (nhấn vào đuôi -ee).</li>
                        <li>B. media /ˈmiː.di.ə/ -> Trọng âm <strong>1</strong>.</li>
                        <li>C. oversea(s) /ˌəʊ.vəˈsiːz/ -> Trọng âm <strong>3</strong>.</li>
                        <li>D. bamboo /bæmˈbuː/ -> Trọng âm <strong>2</strong>.</li>
                    </ul>
                </div>
            `
        },
        // --- MULTIPLE CHOICE ---
        {
            id: 5,
            text: "We took part in a lot of interesting _____ to make acquaintances with each other in the chat room.",
            options: [
                { text: "communities", value: "A" },
                { text: "activities", value: "B" },
                { text: "conferences", value: "C" },
                { text: "contests", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: activities</h4>
                <div class="explanation-detail">
                    <strong>Dịch nghĩa:</strong> Chúng tôi tham gia nhiều <em>hoạt động</em> thú vị để làm quen với nhau trong phòng chat.
                    <ul>
                        <li><span class="vocab-tag tag-n">N</span> A. communities: cộng đồng.</li>
                        <li><span class="vocab-tag tag-n">N</span> B. activities: hoạt động (Đi với cụm "took part in" - tham gia).</li>
                        <li><span class="vocab-tag tag-n">N</span> C. conferences: hội nghị.</li>
                        <li><span class="vocab-tag tag-n">N</span> D. contests: cuộc thi.</li>
                    </ul>
                </div>
            `
        },
        {
            id: 6,
            text: "_____ communication is the use of gestures, tone of voice, expression, body posture, and so on to send a message.",
            options: [
                { text: "Nonverbal", value: "A" },
                { text: "gestural", value: "B" },
                { text: "verbal", value: "C" },
                { text: "visual", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A: Nonverbal</h4>
                <div class="explanation-detail">
                    <strong>Định nghĩa:</strong> <em>Nonverbal communication</em> (Giao tiếp phi ngôn ngữ) bao gồm cử chỉ, giọng điệu, biểu cảm...
                    <ul>
                        <li><span class="vocab-tag tag-adj">Adj</span> A. Nonverbal: Phi ngôn ngữ.</li>
                        <li><span class="vocab-tag tag-adj">Adj</span> B. gestural: thuộc về cử chỉ.</li>
                        <li><span class="vocab-tag tag-adj">Adj</span> C. verbal: bằng lời nói.</li>
                    </ul>
                </div>
            `
        },
        {
            id: 7,
            text: "The future will bring a slew of new products that will change the way we ____ each other and with machines.",
            options: [
                { text: "Communicated", value: "A" },
                { text: "communicating", value: "B" },
                { text: "communication", value: "C" },
                { text: "communicate", value: "D" }
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D: communicate</h4>
                <div class="explanation-detail">
                    <strong>Ngữ pháp:</strong> Cấu trúc "The way we + V(inf)".
                    <br>Cần động từ nguyên thể cho chủ ngữ "we".
                    <br>Cụm từ: <em>communicate with</em> (giao tiếp với).
                </div>
            `
        },
        {
            id: 8,
            text: "My school is _____ the bookstore and the restaurant.",
            options: [
                { text: "Behind", value: "A" },
                { text: "under", value: "B" },
                { text: "between", value: "C" },
                { text: "next to", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: between</h4>
                <div class="explanation-detail">
                    <strong>Dấu hiệu:</strong> "_______ A <strong>and</strong> B".
                    <br>Giới từ <strong>between</strong> luôn đi với <strong>and</strong> để chỉ vị trí nằm giữa hai vật.
                </div>
            `
        },
        {
            id: 9,
            text: "They are rarely ______ home at lunch time.",
            options: [
                { text: "On", value: "A" },
                { text: "in", value: "B" },
                { text: "at", value: "C" },
                { text: "by", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: at</h4>
                <div class="explanation-detail">
                    <strong>Collocation:</strong> <em>at home</em> (ở nhà).
                </div>
            `
        },
        {
            id: 10,
            text: "These are the children’s shoes. They’re ______.",
            options: [
                { text: "Their", value: "A" },
                { text: "they", value: "B" },
                { text: "theirs", value: "C" },
                { text: "them", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: theirs</h4>
                <div class="explanation-detail">
                    <strong>Ngữ pháp:</strong> Đại từ sở hữu (Possessive Pronoun).
                    <br>Thay thế cho "their shoes" để tránh lặp lại.
                    <br>They're <strong>theirs</strong> (Chúng là của họ).
                </div>
            `
        },
        {
            id: 11,
            text: "We don’t know how we can ____ with him. He’s too far away.",
            options: [
                { text: "Keep in touch", value: "A" },
                { text: "cope", value: "B" },
                { text: "catch up", value: "C" },
                { text: "keep pace", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A: Keep in touch</h4>
                <div class="explanation-detail">
                    <strong>Dịch nghĩa:</strong> Chúng tôi không biết làm sao để <em>giữ liên lạc</em> với anh ấy.
                    <ul>
                        <li><span class="vocab-tag tag-v">Idiom</span> A. Keep in touch: giữ liên lạc.</li>
                        <li><span class="vocab-tag tag-v">V</span> B. cope (with): đối phó.</li>
                        <li><span class="vocab-tag tag-v">V</span> C. catch up (with): bắt kịp.</li>
                    </ul>
                </div>
            `
        },
        {
            id: 12,
            text: "Army: “I think smartphones are very useful. They help students to prepare for their studies.” <br> Mike: “_________. Students should be limited in using”",
            options: [
                { text: "I couldn’t agree with you more", value: "A" },
                { text: "That’s a good idea", value: "B" },
                { text: "But they also do harm", value: "C" },
                { text: "You’re welcome", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: But they also do harm</h4>
                <div class="explanation-detail">
                    <strong>Ngữ cảnh:</strong> Army khen smartphone hữu ích, nhưng Mike nói "Học sinh nên bị giới hạn sử dụng".
                    <br>=> Mike đang đưa ra mặt trái của vấn đề.
                    <br>"Nhưng chúng cũng gây hại" là câu dẫn dắt hợp lý nhất.
                </div>
            `
        },
        // --- GAP FILL (FOOTBALL) ---
        {
            id: 13,
            isGapFill: true,
            context: `
                <div class="data-box">
                    <h3>ANNOUNCEMENT</h3>
                    <p>THE NATIONAL FOOTBALL CHAMPIONSHIP ORGANIZING COMMITTEE Wishes to announce that the match between: Nam Dinh and Binh Duong on Sunday, April 18 (13) _____ due to severe weather (14) _____.</p>
                    <p>(15) _____the weather is fine, the match will now be played at 3 p.m (16) ____ Sunday, April 25 at My Dinh National Stadium.</p>
                </div>
            `,
            text: "Question 13:",
            options: [
                { text: "has postponed", value: "A" },
                { text: "posted", value: "B" },
                { text: "has been postponed", value: "C" },
                { text: "postpones", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: has been postponed</h4>
                <div class="explanation-detail">
                    <em>(Lưu ý: Đề bài gốc dùng từ "posted" nhưng ngữ cảnh là "postponed" - bị hoãn).</em>
                    <br><strong>Ngữ pháp:</strong> Câu bị động (Passive Voice). Trận đấu bị hoãn.
                </div>
            `
        },
        {
            id: 14,
            text: "Question 14:",
            options: [
                { text: "habitants", value: "A" },
                { text: "conditions", value: "B" },
                { text: "pollution", value: "C" },
                { text: "living", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: conditions</h4>
                <div class="explanation-detail">
                    <strong>Collocation:</strong> <em>Weather conditions</em> (Điều kiện thời tiết).
                </div>
            `
        },
        {
            id: 15,
            text: "Question 15:",
            options: [
                { text: "Had", value: "A" },
                { text: "Were", value: "B" },
                { text: "Do", value: "C" },
                { text: "If", value: "D" }
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D: If</h4>
                <div class="explanation-detail">
                    <strong>Ngữ pháp:</strong> Câu điều kiện loại 1. "<strong>If</strong> the weather is fine..." (Nếu thời tiết đẹp).
                </div>
            `
        },
        {
            id: 16,
            text: "Question 16:",
            options: [
                { text: "on", value: "A" },
                { text: "in", value: "B" },
                { text: "at", value: "C" },
                { text: "from", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A: on</h4>
                <div class="explanation-detail">
                    <strong>Ngữ pháp:</strong> Giới từ chỉ thời gian đi với Thứ/Ngày -> Dùng <strong>ON</strong>.
                </div>
            `
        },
        // --- SENTENCE ARRANGEMENT ---
        {
            id: 17,
            text: "Mark the letter A, B, C or D to indicate the correct arrangement of the sentences to make a meaningful letter.",
            context: `
                <div class="data-box">
                    <p>a. Shall we meet at 10 am?</p>
                    <p>b. Hi Mai,</p>
                    <p>c. Please tell me if I need to buy something in advance to prepare for the meal.</p>
                    <p>d. See you soon. Linda</p>
                    <p>e. I am so glad to come to try some recipes from the book with you</p>
                    <p>f. Thank you for inviting me to your house this Sunday.</p>
                </div>
            `,
            options: [
                { text: "a-c-d-e-f-b", value: "A" },
                { text: "b-f-e-a-c-d", value: "B" },
                { text: "c-a-e-b-d-f", value: "C" },
                { text: "f-b-a-c-d-e", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: b-f-e-a-c-d</h4>
                <div class="explanation-detail">
                    <strong>Trật tự logic:</strong> Chào hỏi (b) -> Cảm ơn lời mời (f) -> Bày tỏ sự hào hứng (e) -> Hẹn giờ (a) -> Hỏi cần chuẩn bị gì (c) -> Chào tạm biệt (d).
                </div>
            `
        },
        {
            id: 18,
            text: "Mark the letter A, B, C or D to indicate the correct arrangement.",
            context: `
                <div class="data-box">
                    <p>a. Firstly, smart technologies make people’s lives easier by reducing household chores.</p>
                    <p>b. There are some good things about living in a smart city.</p>
                    <p>c. Besides, smart technologies help the city operate more efficiently</p>
                    <p>d. Finally, the negative impact on the environment is less</p>
                    <p>e. Secondly, the city infrastructure which includes sensors and cameras collects information...</p>
                </div>
            `,
            options: [
                { text: "b-a-e-c-d", value: "A" },
                { text: "a-b-e-c-d", value: "B" },
                { text: "b-c-a-e-d", value: "C" },
                { text: "a-c-b-e-d", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A: b-a-e-c-d</h4>
                <div class="explanation-detail">
                    <strong>Trật tự:</strong> Câu chủ đề (b) -> Firstly (a) -> Secondly (e) -> Besides (c) -> Finally (d).
                </div>
            `
        },
        // --- CLOZE TEXT ---
        {
            id: 19,
            isGapFill: true,
            context: `
                <div class="data-box">
                    <h3>WAYS OF COMMUNICATION</h3>
                    <div class="glossary-box">
                        <h5>GLOSSARY (Từ vựng)</h5>
                        <ul>
                            <li><b>Subtle</b> (adj): tinh tế, tế nhị</li>
                            <li><b>Unintentionally</b> (adv): vô tình</li>
                            <li><b>Clues</b> (n): manh mối</li>
                            <li><b>Explosion</b> (n): sự bùng nổ</li>
                            <li><b>Visualizations</b> (n): trực quan hóa</li>
                        </ul>
                    </div>
                    <p>There are a wide range of ways in which we communicate. Here are some major ways of communication. Spoken or (19) ________communication, which includes face-to-face or telephone conversations, news and stories on the radio or television. Non-verbal communication, which covers (20) ______ - language, how we dress or act, where we stand, and even our scent. There are many subtle ways that we communicate (sometimes unintentionally) with others. For example, the tone of voice can give clues to mood or emotional state (21) _____ hand signals or facial gestures communication, which includes letters, emails, social media, books, (22)______ the Internet and other media. Until recently, several writers and publishers were very (23) _____  when it came to communicating the written word. Today, we can all write and publish our ideas online, which has led to an explosion of information and communication possibilities. Visualizations, which (24) _____ graphs, charts, maps, logos, pictures, and many other visual objects to communicate messages. </p>
                </div>
            `,
            text: "Question 19:",
            options: [
                { text: "written", value: "A" },
                { text: "verbal", value: "B" },
                { text: "physical", value: "C" },
                { text: "visual", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: verbal</h4>
                <div class="explanation-detail">
                    <strong>Dịch nghĩa:</strong> Giao tiếp bằng lời nói (Spoken or verbal communication).
                    <br>Đoạn văn liệt kê các hình thức như hội thoại trực tiếp, điện thoại, đài phát thanh... đều thuộc giao tiếp ngôn ngữ/lời nói.
                </div>
            `
        },
        {
            id: 20,
            text: "Question 20:",
            options: [
                { text: "spoken", value: "A" },
                { text: "foreign", value: "B" },
                { text: "sign", value: "C" },
                { text: "body", value: "D" }
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D: body</h4>
                <div class="explanation-detail">
                    <strong>Collocation:</strong> <em>Body language</em> (Ngôn ngữ cơ thể).
                    <br>Phù hợp với nhóm Non-verbal (phi ngôn ngữ) như cách ăn mặc, hành động, tư thế...
                </div>
            `
        },
        {
            id: 21,
            text: "Question 21: ...the tone of voice can give clues to mood or emotional state (21) _____ hand signals...",
            options: [
                { text: "while", value: "A" },
                { text: "so", value: "B" },
                { text: "during", value: "C" },
                { text: "when", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A: while</h4>
                <div class="explanation-detail">
                    <strong>Ngữ cảnh:</strong> So sánh/liệt kê hai sự việc song song.
                    <br>"Giọng điệu cho thấy cảm xúc <strong>trong khi</strong> (while) tín hiệu tay hoặc biểu cảm..."
                </div>
            `
        },
        {
            id: 22,
            text: "Question 22: ...which includes letters, emails, social media, books, (22)______ the Internet and other media.",
            options: [
                { text: "talks", value: "A" },
                { text: "paintings", value: "B" },
                { text: "recordings", value: "C" },
                { text: "magazines", value: "D" }
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D: magazines</h4>
                <div class="explanation-detail">
                    <strong>Phân loại:</strong> Nhóm giao tiếp văn bản (Written/Visual media).
                    <br>Liệt kê: Thư, email, sách, <strong>tạp chí</strong> (magazines) và Internet.
                </div>
            `
        },
        {
            id: 23,
            text: "Question 23: ...publishers were very (23) _____ when it came to communicating the written word.",
            options: [
                { text: "power", value: "A" },
                { text: "powerful", value: "B" },
                { text: "powering", value: "C" },
                { text: "empower", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: powerful</h4>
                <div class="explanation-detail">
                    <strong>Ngữ pháp:</strong> Sau <em>to be</em> (were) + trạng từ (very), cần một <strong>Tính từ</strong>.
                    <ul>
                        <li><span class="vocab-tag tag-adj">Adj</span> powerful: mạnh mẽ, quyền lực.</li>
                    </ul>
                </div>
            `
        },
        {
            id: 24,
            text: "Question 24: Visualizations, which (24) _____ graphs, charts, maps...",
            options: [
                { text: "drawns", value: "A" },
                { text: "affects", value: "B" },
                { text: "uses", value: "C" },
                { text: "communicates", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: uses</h4>
                <div class="explanation-detail">
                    <strong>Dịch nghĩa:</strong> Trực quan hóa, cái mà <em>sử dụng</em> (uses) biểu đồ, bản đồ...
                </div>
            `
        },
        // --- SENTENCE TRANSFORMATION ---
        {
            id: 25,
            text: "Question 25: My close friend gave me a wonderful present on my birthday.",
            options: [
                { text: "I gave my friend a wonderful present on my birthday.", value: "A" },
                { text: "A wonderful present was given me on my birthday.", value: "B" },
                { text: "I was given a wonderful present on my birthday.", value: "C" },
                { text: "My birthday gave me a wonderful present.", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C: I was given a wonderful present on my birthday.</h4>
                <div class="explanation-detail">
                    <strong>Ngữ pháp:</strong> Chuyển câu bị động (Passive Voice).
                    <br>Câu gốc: Bạn tặng tôi quà.
                    <br>Bị động: Tôi được tặng quà (I was given...).
                </div>
            `
        },
        {
            id: 26,
            text: "Question 26: He hates playing board games.",
            options: [
                { text: "He doesn’t want playing board games.", value: "A" },
                { text: "He doesn’t detest playing board games.", value: "B" },
                { text: "He doesn’t dislike playing board games.", value: "C" },
                { text: "He doesn’t like playing board games.", value: "D" }
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D: He doesn’t like playing board games.</h4>
                <div class="explanation-detail">
                    <strong>Đồng nghĩa:</strong> <em>Hates</em> (ghét) tương đương với <em>doesn't like</em> (không thích).
                </div>
            `
        },
        // --- SENTENCE BUILDING ---
        {
            id: 27,
            text: "Question 27: Telepathy/ way/ communicate/ instantly/ thought",
            options: [
                { text: "Telepathy is a way to communicate instantly by thought.", value: "A" },
                { text: "Telepathy is a way communicate instantly by thought", value: "B" },
                { text: "Telepathy is a way communicate instantly through through", value: "C" },
                { text: "Telepathy is a way to communicate instantly thought.", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A</h4>
                <div class="explanation-detail">
                    <strong>Cấu trúc:</strong> S + be + a way + to V + by + N.
                    <br>Thần giao cách cảm là một cách để giao tiếp tức thì bằng ý nghĩ.
                </div>
            `
        },
        {
            id: 28,
            text: "Question 28: Chatting/ webcam/ friends/ allow/ watch/ body language.",
            options: [
                { text: "Chatting via webcam with friends allows you watch their body language", value: "A" },
                { text: "Chatting via webcam with friends allows you to watch their body language.", value: "B" },
                { text: "Chatting via webcam with friends allows you watching their body language.", value: "C" },
                { text: "Chatting via webcam with friends allow you to watch their body language.", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B</h4>
                <div class="explanation-detail">
                    <strong>Cấu trúc:</strong> Allow + sb + <strong>to V</strong> (cho phép ai làm gì).
                    <br>Chủ ngữ "Chatting" (V-ing) là số ít nên động từ chia "allows".
                </div>
            `
        },
        // --- SIGN & NOTICE ---
        {
            id: 29,
            text: "Question 29: What does the sign say?",
            context: `
                <div class="sign-wrapper">
                    <div class="sign-no-exit">
                        <div class="sign-top-text">NO EXIT</div>
                        <div class="sign-circle">
                            <div class="sign-bar"></div>
                        </div>
                        <div class="sign-btm-text">ENTRANCE<br>ONLY</div>
                    </div>
                </div>
            `,
            options: [
                { text: "You are allowed to enter and exit through this door", value: "A" },
                { text: "This door is meant only for entering and not for exiting", value: "B" },
                { text: "This door is used for both entering and exiting purposes", value: "C" },
                { text: "This door is locked and cannot be used", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B</h4>
                <div class="explanation-detail">
                    Biển báo ghi: <strong>NO EXIT</strong> (Không lối ra) và <strong>ENTRANCE ONLY</strong> (Chỉ lối vào).
                    <br>=> Cửa này chỉ dành cho việc đi vào, không được đi ra.
                </div>
            `
        },
        {
            id: 30,
            text: "Question 30: What does the notice say?",
            context: `
                <div class="sign-wrapper">
                    <div class="notice-box">
                        The restaurant will have a new menu starting next week.<br>
                        Check online for updates and new dishes.
                    </div>
                </div>
            `,
            options: [
                { text: "The restaurant has a new menu next week", value: "A" },
                { text: "Check online for the new menu next week", value: "B" },
                { text: "The new menu starts this month, check online for updated dishes", value: "C" },
                { text: "The restaurant will stay the same.", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B: Check online for the new menu next week</h4>
                <div class="explanation-detail">
                    Thông báo yêu cầu hành động chính: "Check online for updates" (Kiểm tra trực tuyến để biết cập nhật).
                </div>
            `
        },
        // --- READING COMPREHENSION (VIDEO CONFERENCE) ---
        {
            id: 31,
            isGapFill: true,
            context: `
                <div class="data-box">
                    <h3>BENEFITS OF VIDEO CONFERENCING</h3>
                     <div class="glossary-box">
                        <h5>GLOSSARY (Từ vựng)</h5>
                        <ul>
                            <li><b>Real time</b> (n phrase): thời gian thực</li>
                            <li><b>Complex</b> (adj): phức tạp</li>
                            <li><b>Connectivity</b> (n): khả năng kết nối</li>
                            <li><b>Remote</b> (adj): xa xôi</li>
                            <li><b>Mountainous</b> (adj): miền núi</li>
                        </ul>
                    </div>
                    <p>Video conferencing is the technology that allows you to hold meetings with people who are in different places while seeing them and talking to them in real time. It is different from simple video calling, which is often one-to-one video communication. In the past, video conferencing needed complex and expensive equipment. Today, it's easy to join in a video conference on your computer or smart phone with Internet connectivity. Moreover, video conferencing is also an important tool for people who work away from the office, often at home because it helps to save time and money for them.</p>
                    <p>Video conferencing can help teachers in teaching, too. Video conferencing is a great way of learning and sharing knowledge beyond distance. Courses can take place with the teacher and each different student living in a different location. This will help education spread even to remote mountainous areas.</p>
                </div>
            `,
            text: "Question 31: Video conferencing helps people ____.",
            options: [
                { text: "Send message", value: "A" },
                { text: "send snail mail", value: "B" },
                { text: "hold meetings", value: "C" },
                { text: "hold meetings", value: "D" } // Dữ liệu gốc có 2 đáp án hold meetings, chọn D theo mạch trước
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D: hold meetings</h4>
                <div class="explanation-detail">
                    <strong>Dẫn chứng:</strong> "Video conferencing is the technology that allows you to <strong>hold meetings</strong>..."
                    <br>Dịch: Công nghệ cho phép bạn tổ chức cuộc họp.
                </div>
            `
        },
        {
            id: 32,
            text: "Question 32: How does video conferencing help people?",
            options: [
                { text: "It helps connect people in different places in real time", value: "A" },
                { text: "It helps connect people in different places in future time", value: "B" },
                { text: "It helps connect people in same places in real time", value: "C" },
                { text: "It helps connect people in same places in future time", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A</h4>
                <div class="explanation-detail">
                    <strong>Dẫn chứng:</strong> "...with people who are in <strong>different places</strong> while seeing them and talking to them in <strong>real time</strong>."
                </div>
            `
        },
        {
            id: 33,
            text: "Question 33: What can people do with video conferencing?",
            options: [
                { text: "People can see and touch each other", value: "A" },
                { text: "People can see and use telepathy", value: "B" },
                { text: "People can see and talk to each other", value: "C" },
                { text: "People can talk and touch each other", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C</h4>
                <div class="explanation-detail">
                    <strong>Dẫn chứng:</strong> "...seeing them and talking to them..." (Nhìn thấy và nói chuyện).
                </div>
            `
        },
        {
            id: 34,
            text: "Question 34: Which statement below is NOT TRUE?",
            options: [
                { text: "Video calling is often one-to-one communication", value: "A" },
                { text: "Video conferencing can happen between many people", value: "B" },
                { text: "In the past, video conferencing needed simple equipment", value: "C" },
                { text: "Today, video conferencing only requires a smartphone with Internet connectivity.", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C</h4>
                <div class="explanation-detail">
                    <strong>Dẫn chứng sai:</strong> Bài đọc nói "In the past, video conferencing needed <strong>complex and expensive</strong> equipment" (Phức tạp và đắt tiền).
                    <br>=> Đáp án C nói "simple" (đơn giản) là SAI.
                </div>
            `
        },
        {
            id: 35,
            text: "Question 35: The word 'allow' is OPPOSITE in meaning to ____.",
            options: [
                { text: "Enable", value: "A" },
                { text: "permit", value: "B" },
                { text: "let", value: "C" },
                { text: "prevent", value: "D" }
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D: prevent</h4>
                <div class="explanation-detail">
                    <strong>Từ vựng:</strong> Allow (cho phép) >< Prevent (ngăn cản).
                </div>
            `
        },
        {
            id: 36,
            text: "Question 36: The word 'expensive' is CLOSEST in meaning to ____.",
            options: [
                { text: "Unaffordable", value: "A" },
                { text: "cheap", value: "B" },
                { text: "reasonable", value: "C" },
                { text: "consumable", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A: Unaffordable</h4>
                <div class="explanation-detail">
                    <strong>Từ vựng:</strong> Expensive (đắt) ≈ Unaffordable (quá đắt/không thể chi trả).
                </div>
            `
        },
        // --- GAP FILL SENTENCES ---
        {
            id: 37,
            isGapFill: true,
            context: `
                <div class="data-box">
                    <h3>ONLINE SAFETY</h3>
                    <div class="glossary-box">
                        <h5>GLOSSARY (Từ vựng)</h5>
                        <ul>
                            <li><b>Attached</b> (v): đính kèm</li>
                            <li><b>In person</b> (idiom): trực tiếp, ngoài đời</li>
                            <li><b>Wary</b> (adj): cảnh giác, thận trọng</li>
                            <li><b>Hang-out spots</b> (n): địa điểm tụ tập</li>
                            <li><b>Inappropriate</b> (adj): không phù hợp</li>
                        </ul>
                    </div>
                    <div class="gap-fill-options-box">
                        A - These messages may also have text, audio, and picture files attached.<br>
                        B - They can also allow children to connect with people that they have never met in person.<br>
                        C - so it is important that parents keep a close eye on the content of any conversations.<br>
                        D - current events, books, and other common interests
                    </div>
                    <p>Email and chat rooms let children communicate with friends and family members. (37) _____. Knowing a little about each of these communication services can help parents keep children safer while online. Through email, users can easily send and receive messages. (38) _____. Signing up for an email account is simple because most services offer them for free. Sometimes these messages contain viruses, or other inappropriate content, so parents should warn children to be wary of emails from unknown people. Chat rooms are online hang-out spots where anyone can talk about anything – (39) _____. Users often do not know each other in real life, (40) _____. </p>
                </div>
            `,
            text: "Question 37",
            options: [
                { text: "A", value: "A" },
                { text: "B", value: "B" },
                { text: "C", value: "C" },
                { text: "D", value: "D" }
            ],
            correct: "B",
            explanation: `
                <h4>Đáp án B</h4>
                <div class="explanation-detail">
                    Câu trước nói về giao tiếp với người quen. Câu sau nói về "giữ an toàn".
                    <br>=> Câu 37 cần nói về rủi ro: "Chúng cũng cho phép trẻ kết nối với người lạ (never met in person)".
                </div>
            `
        },
        {
            id: 38,
            text: "Question 38",
            options: [
                { text: "A", value: "A" },
                { text: "B", value: "B" },
                { text: "C", value: "C" },
                { text: "D", value: "D" }
            ],
            correct: "A",
            explanation: `
                <h4>Đáp án A</h4>
                <div class="explanation-detail">
                    Câu trước nói về "gửi nhận tin nhắn".
                    <br>Câu A mô tả chi tiết: "Tin nhắn có thể đính kèm văn bản, âm thanh, hình ảnh...".
                </div>
            `
        },
        {
            id: 39,
            text: "Question 39",
            options: [
                { text: "A", value: "A" },
                { text: "B", value: "B" },
                { text: "C", value: "C" },
                { text: "D", value: "D" }
            ],
            correct: "D",
            explanation: `
                <h4>Đáp án D</h4>
                <div class="explanation-detail">
                    Liệt kê chủ đề trò chuyện: "talk about anything – (39) sự kiện thời sự, sách, và sở thích chung".
                </div>
            `
        },
        {
            id: 40,
            text: "Question 40",
            options: [
                { text: "A", value: "A" },
                { text: "B", value: "B" },
                { text: "C", value: "C" },
                { text: "D", value: "D" }
            ],
            correct: "C",
            explanation: `
                <h4>Đáp án C</h4>
                <div class="explanation-detail">
                    Nguyên nhân: Người dùng không biết nhau ngoài đời.
                    <br>=> Kết quả: "vì vậy cha mẹ cần để mắt kỹ đến nội dung trò chuyện".
                </div>
            `
        }
    ];

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        
        questions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${index}`;

            let html = '';
            
            // Reading Context
            if (q.context) {
                html += q.context;
            }

            // Question Text
            html += `<span class="question-number">QUESTION ${q.id}</span>`;
            html += `<div class="question-text">${q.text}</div>`;

            // Options
            html += `<div class="options-group">`;
            q.options.forEach(opt => {
                html += `
                    <label class="option-label" id="label-${index}-${opt.value}">
                        <input type="radio" name="q${index}" value="${opt.value}" onchange="resetCardState(${index})">
                        <span class="option-text"><strong>${opt.value}.</strong> ${opt.text}</span>
                    </label>
                `;
            });
            html += `</div>`;

            // Check Button & Explanation
            html += `<button class="btn-check" onclick="checkAnswer(${index})">Kiểm tra đáp án</button>`;
            html += `<div class="explanation" id="exp-${index}">
                        ${q.explanation}
                     </div>`;

            card.innerHTML = html;
            container.appendChild(card);
        });
    }

    function resetCardState(index) {
        // Có thể thêm logic reset trạng thái tại đây
    }

    function checkAnswer(index) {
        const q = questions[index];
        const selected = document.querySelector(`input[name="q${index}"]:checked`);
        const expDiv = document.getElementById(`exp-${index}`);
        
        if (!selected) {
            alert("Vui lòng chọn một đáp án trước khi kiểm tra!");
            return;
        }

        const userVal = selected.value;
        const labels = document.querySelectorAll(`#card-${index} .option-label`);
        
        labels.forEach(l => l.classList.remove('correct-answer', 'wrong-answer'));

        const selectedLabel = document.getElementById(`label-${index}-${userVal}`);
        const correctLabel = document.getElementById(`label-${index}-${q.correct}`);

        if (userVal === q.correct) {
            selectedLabel.classList.add('correct-answer');
        } else {
            selectedLabel.classList.add('wrong-answer');
            correctLabel.classList.add('correct-answer');
        }

        expDiv.style.display = 'block';
    }

    function submitAll() {
        let score = 0;
        let unanswered = 0;

        questions.forEach((q, index) => {
            const selected = document.querySelector(`input[name="q${index}"]:checked`);
            
            if (selected) {
                const userVal = selected.value;
                const labels = document.querySelectorAll(`#card-${index} .option-label`);
                labels.forEach(l => l.classList.remove('correct-answer', 'wrong-answer'));
                
                const selectedLabel = document.getElementById(`label-${index}-${userVal}`);
                const correctLabel = document.getElementById(`label-${index}-${q.correct}`);
                
                if (userVal === q.correct) {
                    score++;
                    selectedLabel.classList.add('correct-answer');
                } else {
                    selectedLabel.classList.add('wrong-answer');
                    correctLabel.classList.add('correct-answer');
                }
                document.getElementById(`exp-${index}`).style.display = 'block';

            } else {
                unanswered++;
                document.getElementById(`card-${index}`).style.borderLeftColor = "#ffc107";
                document.getElementById(`label-${index}-${q.correct}`).classList.add('correct-answer');
                document.getElementById(`exp-${index}`).style.display = 'block';
            }
        });

        const overlay = document.getElementById('resultOverlay');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const scoreMessage = document.getElementById('scoreMessage');
        
        scoreDisplay.innerText = `${score}/${questions.length}`;
        
        let msg = "";
        if (score === questions.length) msg = "Xuất sắc! Bạn đã làm đúng tuyệt đối.";
        else if (score >= 30) msg = "Rất tốt! Kiến thức của bạn rất vững.";
        else if (score >= 20) msg = "Khá tốt. Hãy xem lại các lỗi sai nhé.";
        else msg = "Cần cố gắng hơn. Đừng quên đọc kỹ giải thích chi tiết.";
        
        if (unanswered > 0) msg += `<br>(Lưu ý: Bạn đã bỏ qua ${unanswered} câu)`;

        scoreMessage.innerHTML = msg;
        overlay.style.display = 'flex';
    }

    function closePopup() {
        document.getElementById('resultOverlay').style.display = 'none';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    renderQuiz();
</script>

</body>
</html>