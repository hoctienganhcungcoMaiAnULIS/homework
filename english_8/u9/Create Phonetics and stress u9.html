<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms. Mai An ULIS - Tr·∫Øc nghi·ªám Ng·ªØ √¢m & Tr·ªçng √¢m</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #8854C0; /* T√≠m Pastel */
            --accent-color: #00C9A7; /* Xanh ng·ªçc */
            --correct-color: #00D26A; /* Xanh l√° */
            --wrong-color: #FF4757; /* ƒê·ªè cam */
            --bg-pattern: #f0f4f8;
            --card-shadow: 0 8px 0 rgba(0,0,0,0.1);
            --btn-shadow: 0 5px 0 rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #e5e5f7;
            background-image:  radial-gradient(#8854C0 0.8px, transparent 0.8px), radial-gradient(#8854C0 0.8px, #e5e5f7 0.8px);
            background-size: 32px 32px;
            background-position: 0 0, 16px 16px;
            color: #2d3436;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        header {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            border-bottom: 5px solid var(--primary-color);
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
        }

        .subtitle {
            color: #636e72;
            font-size: 1rem;
            margin-top: 5px;
        }

        /* Quiz Container */
        #quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Question Card */
        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            border: 2px solid #fff;
            position: relative;
            transition: transform 0.3s ease;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .q-badge {
            background: var(--primary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 25px;
            color: #2d3436;
            line-height: 1.5;
        }

        .question-text u {
            color: var(--primary-color);
            text-decoration-thickness: 3px;
            text-underline-offset: 4px;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe6e9;
            border-radius: 15px;
            padding: 15px 20px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3436;
            cursor: pointer;
            box-shadow: 0 4px 0 #dfe6e9;
            transition: all 0.1s;
            text-align: left;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary-color);
            transform: scale(1.02);
        }

        .option-letter {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 30px;
            height: 30px;
            background: #f1f2f6;
            border-radius: 8px;
            margin-right: 10px;
            font-weight: 800;
            color: #636e72;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: #00b85c;
            box-shadow: 0 4px 0 #00b85c;
        }

        .option-btn.correct .option-letter {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn.wrong {
            background-color: var(--wrong-color);
            color: white;
            border-color: #ff3f34;
            box-shadow: 0 4px 0 #ff3f34;
            animation: shake 0.5s;
        }

        .option-btn.wrong .option-letter {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.9;
        }

        /* Explanation Box */
        .explanation-box {
            margin-top: 20px;
            background: #fff4e6; /* M√†u cam nh·∫°t n·ªÅn n√£ */
            border-left: 5px solid #FF9F43;
            border-radius: 10px;
            padding: 20px;
            display: none; /* Hidden by default */
            animation: slideDown 0.4s ease-out;
        }

        .explanation-box.visible {
            display: block;
        }

        .exp-header {
            font-weight: 800;
            color: #e67e22;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exp-content {
            font-size: 1rem;
            color: #2d3436;
            line-height: 1.6;
            white-space: pre-line; /* Gi·ªØ nguy√™n xu·ªëng d√≤ng */
        }

        .exp-content strong {
            color: #d35400;
        }

        /* Footer */
        .quiz-footer {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 40px;
        }

        .submit-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 6px 0 #00a388;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 0 #00a388;
        }

        .submit-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            50% { transform: translateX(5px) rotate(2deg); }
            75% { transform: translateX(-5px) rotate(-2deg); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Result Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popUp {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-circle {
            width: 120px;
            height: 120px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-weight: 800;
            margin: 0 auto 20px;
            box-shadow: 0 10px 0 #6c429c;
        }

        .modal h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .modal p {
            font-size: 1.1rem;
            color: #636e72;
            margin-bottom: 25px;
        }

        /* Canvas for confetti */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }
    </style>
</head>
<body>

    <header>
        <h1>Ms. Mai An ULIS</h1>
        <div class="subtitle">üéì Tr·∫Øc nghi·ªám Ng·ªØ √¢m & Tr·ªçng √¢m: Disasters Topic üå™Ô∏è</div>
    </header>

    <div id="quiz-container">
        <!-- Javascript will render questions here -->
    </div>

    <div class="quiz-footer">
        <button class="submit-btn" onclick="showFinalResult()">N·ªôp b√†i & Xem ƒëi·ªÉm üìù</button>
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <div class="score-circle" id="final-score">0/0</div>
            <h2 id="result-title">Tuy·ªát v·ªùi!</h2>
            <p id="result-message">B·∫°n ƒë√£ l√†m r·∫•t t·ªët!</p>
            <button class="submit-btn" onclick="closeModal()">L√†m l·∫°i b√†i n√†y üîÑ</button>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <script>
        // --- DATA ---
        const quizData = [
    {
      "questionNumber": 1,
      "question": "Choose the word whose underlined part is pronounced differently: A. m<u>u</u>d B. n<u>u</u>merous C. th<u>u</u>nderstorm D. s<u>u</u>ddenly",
      "answerOptions": [
        { "text": "numerous", "isCorrect": true },
        { "text": "mud", "isCorrect": false },
        { "text": "thunderstorm", "isCorrect": false },
        { "text": "suddenly", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'u'.\n- A. mud /m åd/ (n): b√πn\n- B. numerous /ÀànjuÀêm…ôr…ôs/ (adj): nhi·ªÅu, ƒë√¥ng ƒë·∫£o -> Ph√°t √¢m l√† /juÀê/ (ho·∫∑c /uÀê/)\n- C. thunderstorm /ÀàŒ∏ ånd…ôst…îÀêm/ (n): b√£o c√≥ s·∫•m s√©t -> Ph√°t √¢m l√† / å/\n- D. suddenly /Ààs ådnli/ (adv): ƒë·ªôt ng·ªôt -> Ph√°t √¢m l√† / å/\n=> ƒê√°p √°n B kh√°c bi·ªát (/juÀê/ so v·ªõi / å/)."
    },
    {
      "questionNumber": 2,
      "question": "Choose the word whose underlined part is pronounced differently: A. <u>t</u>sunami B. <u>t</u>ropical C. vic<u>t</u>im D. violen<u>t</u>",
      "answerOptions": [
        { "text": "tsunami", "isCorrect": true },
        { "text": "tropical", "isCorrect": false },
        { "text": "victim", "isCorrect": false },
        { "text": "violent", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 't'.\n- A. tsunami /tsuÀêÀàn…ëÀêmi/ (n): s√≥ng th·∫ßn -> Ch·ªØ 't' k·∫øt h·ª£p v·ªõi 's' t·∫°o th√†nh √¢m t·∫Øc x√°t /ts/.\n- B. tropical /Ààtr…íp…™kl/ (adj): nhi·ªát ƒë·ªõi -> Ph√°t √¢m l√† /t/\n- C. victim /Ààv…™kt…™m/ (n): n·∫°n nh√¢n -> Ph√°t √¢m l√† /t/\n- D. violent /Ààva…™…ôl…ônt/ (adj): b·∫°o l·ª±c, d·ªØ d·ªôi -> Ph√°t √¢m l√† /t/\n=> ƒê√°p √°n A kh√°c bi·ªát."
    },
    {
      "questionNumber": 3,
      "question": "Choose the word whose underlined part is pronounced differently: A. sou<u>th</u> B. streng<u>th</u>en C. brea<u>th</u>e D. <u>th</u>eology",
      "answerOptions": [
        { "text": "breathe", "isCorrect": true },
        { "text": "south", "isCorrect": false },
        { "text": "strengthen", "isCorrect": false },
        { "text": "theology", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'th'.\n- A. south /sa äŒ∏/ (n): h∆∞·ªõng nam -> √Çm v√¥ thanh /Œ∏/\n- B. strengthen /Ààstre≈ãŒ∏n/ (v): l√†m m·∫°nh th√™m -> √Çm v√¥ thanh /Œ∏/\n- C. breathe /briÀê√∞/ (v): th·ªü -> √Çm h·ªØu thanh /√∞/ (rung c·ªï h·ªçng)\n- D. theology /Œ∏iÀà…íl…ôd íi/ (n): th·∫ßn h·ªçc -> √Çm v√¥ thanh /Œ∏/\n=> ƒê√°p √°n C kh√°c bi·ªát."
    },
    {
      "questionNumber": 4,
      "question": "Choose the word whose underlined part is pronounced differently: A. r<u>e</u>scue B. eff<u>e</u>ct C. marv<u>e</u>lous D. tr<u>e</u>mble",
      "answerOptions": [
        { "text": "marvelous", "isCorrect": true },
        { "text": "rescue", "isCorrect": false },
        { "text": "effect", "isCorrect": false },
        { "text": "tremble", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'e'.\n- A. rescue /ÀàreskjuÀê/ (v/n): gi·∫£i c·ª©u -> Ph√°t √¢m l√† /e/\n- B. effect /…™Ààfekt/ (n): hi·ªáu ·ª©ng, t√°c ƒë·ªông -> Ch·ªØ 'e' th·ª© 2 (ƒë∆∞·ª£c nh·∫•n tr·ªçng √¢m) ph√°t √¢m l√† /e/.\n- C. marvelous /Ààm…ëÀêv…ôl…ôs/ (adj): tuy·ªát v·ªùi -> Ch·ªØ 'e' kh√¥ng nh·∫•n tr·ªçng √¢m, ph√°t √¢m l√† √¢m schwa /…ô/.\n- D. tremble /Ààtrembl/ (v): run r·∫©y -> Ph√°t √¢m l√† /e/\n=> ƒê√°p √°n C kh√°c bi·ªát."
    },
    {
      "questionNumber": 5,
      "question": "Choose the word whose underlined part is pronounced differently: A. tornad<u>o</u> B. pr<u>o</u>perty C. v<u>o</u>lcanic D. cr<u>o</u>p",
      "answerOptions": [
        { "text": "tornado", "isCorrect": true },
        { "text": "property", "isCorrect": false },
        { "text": "volcanic", "isCorrect": false },
        { "text": "crop", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'o'.\n- A. tornado /t…îÀêÀàne…™d…ô ä/ (n): l·ªëc xo√°y -> Ph√°t √¢m l√† √¢m o d√†i /…îÀê/\n- B. property /Ààpr…íp…ôti/ (n): t√†i s·∫£n -> Ph√°t √¢m l√† √¢m o ng·∫Øn /…í/\n- C. volcanic /v…ílÀàk√¶n…™k/ (adj): thu·ªôc n√∫i l·ª≠a -> Ph√°t √¢m l√† √¢m o ng·∫Øn /…í/\n- D. crop /kr…íp/ (n): m√πa m√†ng -> Ph√°t √¢m l√† √¢m o ng·∫Øn /…í/\n=> ƒê√°p √°n A kh√°c bi·ªát."
    },
    {
      "questionNumber": 6,
      "question": "Choose the word whose underlined part is pronounced differently: A. authorit<u>y</u> B. fortunatel<u>y</u> C. tr<u>y</u> D. propert<u>y</u>",
      "answerOptions": [
        { "text": "try", "isCorrect": true },
        { "text": "authority", "isCorrect": false },
        { "text": "fortunately", "isCorrect": false },
        { "text": "property", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'y'.\n- A. authority /…îÀêÀàŒ∏…ír…ôti/ (n): ch√≠nh quy·ªÅn -> Ph√°t √¢m l√† /i/\n- B. fortunately /Ààf…îÀêt É…ôn…ôtli/ (adv): may m·∫Øn thay -> Ph√°t √¢m l√† /i/\n- C. try /tra…™/ (v): c·ªë g·∫Øng, th·ª≠ -> Ph√°t √¢m l√† /a…™/\n- D. property /Ààpr…íp…ôti/ (n): t√†i s·∫£n -> Ph√°t √¢m l√† /i/\n=> ƒê√°p √°n C kh√°c bi·ªát."
    },
    {
      "questionNumber": 7,
      "question": "Choose the word whose underlined part is pronounced differently: A. toward<u>s</u> B. disa<u>s</u>ter C. de<u>s</u>troy D. circle<u>s</u>",
      "answerOptions": [
        { "text": "destroy", "isCorrect": true },
        { "text": "towards", "isCorrect": false },
        { "text": "disaster", "isCorrect": false },
        { "text": "circles", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 's'.\n- A. towards /t…ôÀàw…îÀêdz/ (prep): h∆∞·ªõng v·ªÅ -> Ph√°t √¢m l√† /z/\n- B. disaster /d…™Ààz…ëÀêst…ôr/ (n): th·∫£m h·ªça -> Ph√°t √¢m l√† /z/\n- C. destroy /d…™Ààstr…î…™/ (v): ph√° h·ªßy -> Ph√°t √¢m l√† /s/ (do ƒë·ª©ng tr∆∞·ªõc √¢m v√¥ thanh /t/)\n- D. circles /Ààs…úÀêklz/ (n): nh·ªØng v√≤ng tr√≤n -> Ph√°t √¢m l√† /z/ (sau √¢m h·ªØu thanh /l/)\n=> ƒê√°p √°n C kh√°c bi·ªát."
    },
    {
      "questionNumber": 8,
      "question": "Choose the word whose underlined part is pronounced differently: A. violen<u>t</u> B. whis<u>t</u>le C. prac<u>t</u>ical D. ligh<u>t</u>ning",
      "answerOptions": [
        { "text": "whistle", "isCorrect": true },
        { "text": "violent", "isCorrect": false },
        { "text": "practical", "isCorrect": false },
        { "text": "lightning", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 't'.\n- A. violent /Ààva…™…ôl…ônt/ (adj): b·∫°o l·ª±c -> Ph√°t √¢m l√† /t/\n- B. whistle /Ààw…™sl/ (v/n): hu√Ωt s√°o, c√°i c√≤i -> √Çm c√¢m (silent t)\n- C. practical /Ààpr√¶kt…™kl/ (adj): th·ª±c t·∫ø -> Ph√°t √¢m l√† /t/\n- D. lightning /Ààla…™tn…™≈ã/ (n): tia s√©t -> Ph√°t √¢m l√† /t/\n=> ƒê√°p √°n B kh√°c bi·ªát."
    },
    {
      "questionNumber": 9,
      "question": "Choose the word whose underlined part is pronounced differently: A. w<u>a</u>ve B. l<u>a</u>ndslide C. d<u>a</u>mage D. n<u>a</u>tural",
      "answerOptions": [
        { "text": "wave", "isCorrect": true },
        { "text": "landslide", "isCorrect": false },
        { "text": "damage", "isCorrect": false },
        { "text": "natural", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† ch·ªØ 'a'.\n- A. wave /we…™v/ (n): con s√≥ng -> Ph√°t √¢m l√† /e…™/\n- B. landslide /Ààl√¶ndsla…™d/ (n): s·∫°t l·ªü ƒë·∫•t -> Ph√°t √¢m l√† /√¶/\n- C. damage /Ààd√¶m…™d í/ (n/v): thi·ªát h·∫°i -> Ph√°t √¢m l√† /√¶/\n- D. natural /Ààn√¶t Ér…ôl/ (adj): t·ª± nhi√™n -> Ph√°t √¢m l√† /√¶/\n=> ƒê√°p √°n A kh√°c bi·ªát."
    },
    {
      "questionNumber": 10,
      "question": "Choose the word whose underlined part is pronounced differently: A. em<u>er</u>gency B. litt<u>er</u> C. sudd<u>en</u>ly D. syst<u>em</u>",
      "answerOptions": [
        { "text": "emergency", "isCorrect": true },
        { "text": "litter", "isCorrect": false },
        { "text": "suddenly", "isCorrect": false },
        { "text": "system", "isCorrect": false }
      ],
      "rationale": "Ph·∫ßn g·∫°ch ch√¢n l√† nguy√™n √¢m trong √¢m ti·∫øt th·ª© 2 (ho·∫∑c √¢m cu·ªëi c·ªßa c√°c t·ª´ c√≤n l·∫°i).\n- A. emergency /iÀàm…úÀêd í…ônsi/ (n): kh·∫©n c·∫•p -> √Çm 'er' l√† √¢m d√†i c√≥ tr·ªçng √¢m /…úÀê/\n- B. litter /Ààl…™t…ôr/ (n): r√°c -> √Çm 'er' l√† √¢m l∆∞·ªõt /…ô/ (schwa)\n- C. suddenly /Ààs ådnli/ (adv): ƒë·ªôt ng·ªôt -> √Çm 'en' l√† √¢m l∆∞·ªõt /…ô/\n- D. system /Ààs…™st…ôm/ (n): h·ªá th·ªëng -> √Çm 'em' l√† √¢m l∆∞·ªõt /…ô/\n=> ƒê√°p √°n A kh√°c bi·ªát (√¢m d√†i, nh·∫•n tr·ªçng √¢m)."
    },
    {
      "questionNumber": 11,
      "question": "Choose the word whose main stress is different: A. develop B. marvelous C. funnel D. damage",
      "answerOptions": [
        { "text": "develop", "isCorrect": true },
        { "text": "marvelous", "isCorrect": false },
        { "text": "funnel", "isCorrect": false },
        { "text": "damage", "isCorrect": false }
      ],
      "rationale": "- A. develop /d…™Ààvel…ôp/ (v): ph√°t tri·ªÉn -> Tr·ªçng √¢m 2\n- B. marvelous /Ààm…ëÀêv…ôl…ôs/ (adj): k·ª≥ di·ªáu -> Tr·ªçng √¢m 1\n- C. funnel /Ààf ånl/ (n): c√°i ph·ªÖu (h√¨nh d·∫°ng l·ªëc xo√°y) -> Tr·ªçng √¢m 1\n- D. damage /Ààd√¶m…™d í/ (n/v): thi·ªát h·∫°i -> Tr·ªçng √¢m 1\n=> ƒê√°p √°n A kh√°c bi·ªát."
    },
    {
      "questionNumber": 12,
      "question": "Choose the word whose main stress is different: A. government B. landslide C. lightning D. effect",
      "answerOptions": [
        { "text": "effect", "isCorrect": true },
        { "text": "government", "isCorrect": false },
        { "text": "landslide", "isCorrect": false },
        { "text": "lightning", "isCorrect": false }
      ],
      "rationale": "- A. government /Àà…° åv…ônm…ônt/ (n): ch√≠nh ph·ªß -> Tr·ªçng √¢m 1\n- B. landslide /Ààl√¶ndsla…™d/ (n): s·∫°t l·ªü ƒë·∫•t -> Tr·ªçng √¢m 1\n- C. lightning /Ààla…™tn…™≈ã/ (n): tia s√©t -> Tr·ªçng √¢m 1\n- D. effect /…™Ààfekt/ (n): hi·ªáu qu·∫£, t√°c ƒë·ªông -> Tr·ªçng √¢m 2\n=> ƒê√°p √°n D kh√°c bi·ªát."
    },
    {
      "questionNumber": 13,
      "question": "Choose the word whose main stress is different: A. fortunate B. donate C. pacific D. tornado",
      "answerOptions": [
        { "text": "fortunate", "isCorrect": true },
        { "text": "donate", "isCorrect": false },
        { "text": "pacific", "isCorrect": false },
        { "text": "tornado", "isCorrect": false }
      ],
      "rationale": "- A. fortunate /Ààf…îÀêt É…ôn…ôt/ (adj): may m·∫Øn -> Tr·ªçng √¢m 1\n- B. donate /d…ô äÀàne…™t/ (v): quy√™n g√≥p -> Tr·ªçng √¢m 2\n- C. pacific /p…ôÀàs…™f…™k/ (adj/n): th√°i b√¨nh d∆∞∆°ng -> Tr·ªçng √¢m 2\n- D. tornado /t…îÀêÀàne…™d…ô ä/ (n): l·ªëc xo√°y -> Tr·ªçng √¢m 2\n=> ƒê√°p √°n A kh√°c bi·ªát."
    },
    {
      "questionNumber": 14,
      "question": "Choose the word whose main stress is different: A. destroy B. emergency C. government D. disaster",
      "answerOptions": [
        { "text": "government", "isCorrect": true },
        { "text": "destroy", "isCorrect": false },
        { "text": "emergency", "isCorrect": false },
        { "text": "disaster", "isCorrect": false }
      ],
      "rationale": "- A. destroy /d…™Ààstr…î…™/ (v): ph√° h·ªßy -> Tr·ªçng √¢m 2\n- B. emergency /iÀàm…úÀêd í…ônsi/ (n): kh·∫©n c·∫•p -> Tr·ªçng √¢m 2\n- C. government /Àà…° åv…ônm…ônt/ (n): ch√≠nh ph·ªß -> Tr·ªçng √¢m 1\n- D. disaster /d…™Ààz…ëÀêst…ôr/ (n): th·∫£m h·ªça -> Tr·ªçng √¢m 2\n=> ƒê√°p √°n C kh√°c bi·ªát."
    },
    {
      "questionNumber": 15,
      "question": "Choose the word whose main stress is different: A. rescue B. strengthen C. system D. towards",
      "answerOptions": [
        { "text": "towards", "isCorrect": true },
        { "text": "rescue", "isCorrect": false },
        { "text": "strengthen", "isCorrect": false },
        { "text": "system", "isCorrect": false }
      ],
      "rationale": "- A. rescue /ÀàreskjuÀê/ (v/n): gi·∫£i c·ª©u -> Tr·ªçng √¢m 1\n- B. strengthen /Ààstre≈ãŒ∏n/ (v): c·ªßng c·ªë, l√†m m·∫°nh -> Tr·ªçng √¢m 1\n- C. system /Ààs…™st…ôm/ (n): h·ªá th·ªëng -> Tr·ªçng √¢m 1\n- D. towards /t…ôÀàw…îÀêdz/ (prep): h∆∞·ªõng v·ªÅ -> Tr·ªçng √¢m 2\n=> ƒê√°p √°n D kh√°c bi·ªát."
    },
    {
      "questionNumber": 16,
      "question": "Choose the word whose main stress is different: A. practical B. numerous C. property D. tsunami",
      "answerOptions": [
        { "text": "tsunami", "isCorrect": true },
        { "text": "practical", "isCorrect": false },
        { "text": "numerous", "isCorrect": false },
        { "text": "property", "isCorrect": false }
      ],
      "rationale": "- A. practical /Ààpr√¶kt…™kl/ (adj): th·ª±c t·∫ø -> Tr·ªçng √¢m 1\n- B. numerous /ÀànjuÀêm…ôr…ôs/ (adj): nhi·ªÅu -> Tr·ªçng √¢m 1\n- C. property /Ààpr…íp…ôti/ (n): t√†i s·∫£n -> Tr·ªçng √¢m 1\n- D. tsunami /tsuÀêÀàn…ëÀêmi/ (n): s√≥ng th·∫ßn -> Tr·ªçng √¢m 2\n=> ƒê√°p √°n D kh√°c bi·ªát."
    },
    {
      "questionNumber": 17,
      "question": "Choose the word whose main stress is different: A. whistle B. victim C. authority D. violent",
      "answerOptions": [
        { "text": "authority", "isCorrect": true },
        { "text": "whistle", "isCorrect": false },
        { "text": "victim", "isCorrect": false },
        { "text": "violent", "isCorrect": false }
      ],
      "rationale": "- A. whistle /Ààw…™sl/ (n/v): c√°i c√≤i -> Tr·ªçng √¢m 1\n- B. victim /Ààv…™kt…™m/ (n): n·∫°n nh√¢n -> Tr·ªçng √¢m 1\n- C. authority /…îÀêÀàŒ∏…ír…ôti/ (n): ch√≠nh quy·ªÅn -> Tr·ªçng √¢m 2\n- D. violent /Ààva…™…ôl…ônt/ (adj): b·∫°o l·ª±c -> Tr·ªçng √¢m 1\n=> ƒê√°p √°n C kh√°c bi·ªát."
    },
    {
      "questionNumber": 18,
      "question": "Choose the word whose main stress is different: A. litter B. mountainous C. worker D. volcanic",
      "answerOptions": [
        { "text": "volcanic", "isCorrect": true },
        { "text": "litter", "isCorrect": false },
        { "text": "mountainous", "isCorrect": false },
        { "text": "worker", "isCorrect": false }
      ],
      "rationale": "- A. litter /Ààl…™t…ôr/ (n): r√°c -> Tr·ªçng √¢m 1\n- B. mountainous /Ààma änt…ôn…ôs/ (adj): mi·ªÅn n√∫i -> Tr·ªçng √¢m 1\n- C. worker /Ààw…úÀêk…ôr/ (n): c√¥ng nh√¢n -> Tr·ªçng √¢m 1\n- D. volcanic /v…ílÀàk√¶n…™k/ (adj): thu·ªôc n√∫i l·ª≠a -> Tr·ªçng √¢m 2 (quy t·∫Øc nh·∫•n tr∆∞·ªõc ƒëu√¥i -ic)\n=> ƒê√°p √°n D kh√°c bi·ªát."
    },
    {
      "questionNumber": 19,
      "question": "Choose the word whose main stress is different: A. example B. circle C. matter D. humour",
      "answerOptions": [
        { "text": "example", "isCorrect": true },
        { "text": "circle", "isCorrect": false },
        { "text": "matter", "isCorrect": false },
        { "text": "humour", "isCorrect": false }
      ],
      "rationale": "- A. example /…™…°Ààz…ëÀêmpl/ (n): v√≠ d·ª• -> Tr·ªçng √¢m 2\n- B. circle /Ààs…úÀêkl/ (n): v√≤ng tr√≤n -> Tr·ªçng √¢m 1\n- C. matter /Ààm√¶t…ôr/ (n): v·∫•n ƒë·ªÅ -> Tr·ªçng √¢m 1\n- D. humour /ÀàhjuÀêm…ôr/ (n): s·ª± h√†i h∆∞·ªõc -> Tr·ªçng √¢m 1\n=> ƒê√°p √°n A kh√°c bi·ªát."
    },
    {
      "questionNumber": 20,
      "question": "Choose the word whose main stress is different: A. nation B. person C. resident D. scientific",
      "answerOptions": [
        { "text": "scientific", "isCorrect": true },
        { "text": "nation", "isCorrect": false },
        { "text": "person", "isCorrect": false },
        { "text": "resident", "isCorrect": false }
      ],
      "rationale": "- A. nation /Ààne…™ Én/ (n): qu·ªëc gia -> Tr·ªçng √¢m 1\n- B. person /Ààp…úÀêsn/ (n): ng∆∞·ªùi -> Tr·ªçng √¢m 1\n- C. resident /Ààrez…™d…ônt/ (n): c∆∞ d√¢n -> Tr·ªçng √¢m 1\n- D. scientific /Àåsa…™…ônÀàt…™f…™k/ (adj): thu·ªôc khoa h·ªçc -> Tr·ªçng √¢m 3 (nh·∫•n tr∆∞·ªõc ƒëu√¥i -ic)\n=> ƒê√°p √°n D kh√°c bi·ªát."
    }
  ];

        let score = 0;
        const totalQuestions = quizData.length;

        // --- AUDIO ENGINE (No external files needed) ---
        const AudioEngine = {
            ctx: null,
            init: function() {
                if (!this.ctx) {
                    this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                }
            },
            playDing: function() {
                this.init();
                const oscillator = this.ctx.createOscillator();
                const gainNode = this.ctx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.ctx.destination);
                
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, this.ctx.currentTime); // C5
                oscillator.frequency.exponentialRampToValueAtTime(1046.5, this.ctx.currentTime + 0.1); // C6
                
                gainNode.gain.setValueAtTime(0.3, this.ctx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.4);
                
                oscillator.start();
                oscillator.stop(this.ctx.currentTime + 0.4);
            },
            playBuzz: function() {
                this.init();
                const oscillator = this.ctx.createOscillator();
                const gainNode = this.ctx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.ctx.destination);
                
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(150, this.ctx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(100, this.ctx.currentTime + 0.3);
                
                gainNode.gain.setValueAtTime(0.3, this.ctx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, this.ctx.currentTime + 0.3);
                
                oscillator.start();
                oscillator.stop(this.ctx.currentTime + 0.3);
            }
        };

        // --- RENDER QUIZ ---
        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            
            quizData.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-card-${index}`;
                
                // Shuffle options for randomness (Optional, but kept A,B,C,D order for this specific test structure is better)
                // We keep original order to match the "A, B, C, D" labels in the text
                
                let optionsHtml = '';
                // Since the JSON data doesn't have explicit A, B, C, D labels in the answerOptions array but implies them
                // We will map index 0->A, 1->B, 2->C, 3->D based on order in source
                // *However*, we need to match the specific order in the question text.
                // The provided JSON 'answerOptions' order might not match A, B, C, D text order in some datasets,
                // but looking at the JSON, they seem to be randomized in the answerOptions list itself?
                // Wait, looking at Q1: A. mud, B. numerous. Options list: numerous, mud...
                // The Options list is scrambled vs the question text.
                // WE NEED TO FIND THE OPTION THAT MATCHES THE TEXT A, B, C, D TO DISPLAY CORRECTLY?
                // Actually, for this specific format, simpler is to just display the options provided in the list
                // and assign them letters A, B, C, D dynamically based on their rendered order.
                // OR, since the question text says "A. mud", we should probably try to find "mud" in the options.
                // Let's just render the buttons as they are in the array, and give them letters A, B, C, D based on the array order.
                // This might slightly mismatch the question text if the array order is different from the text string.
                // Let's check Question 1: Question text says "A. mud...". Options array[0] is "numerous". 
                // If I render array[0] as "A. numerous", it conflicts with question text.
                // FIX: I will render the text inside the button simply as the word, and let the user match it.
                // BETTER FIX: The prompt asks to "Li·ªát k√™ 4 ƒë√°p √°n A, B, C, D".
                // I will render them with dynamic letters A, B, C, D based on the grid.
                
                const letters = ['A', 'B', 'C', 'D'];
                
                // Sort options based on the question text to align A, B, C, D correctly?
                // It's hard to parse "A. word" reliably from the question string.
                // So I will just render the options as given in the JSON array, but label them A, B, C, D sequentially.
                // Note: The explanation explains specific words like "A. mud", so the order MATTERS.
                // I need to ensure the options displayed match the order in the explanation/question text.
                // Since I cannot easily re-sort the JSON array to match the string "A. ... B. ...", 
                // I will rely on the `answerOptions` array. 
                // OBSERVATION: In the JSON provided:
                // Q1 text: A. mud, B. numerous...
                // Q1 options: [numerous, mud, thunderstorm, suddenly]
                // If I render Option 0 as A, it will be "A. numerous". This contradicts the text "A. mud".
                // SOLUTION: I will NOT put "A", "B", "C" prefixes on the buttons to avoid confusion.
                // I will just put the word. The user sees "A. mud" in the question, finds the button "mud", and clicks it.
                
                q.answerOptions.forEach((opt, optIndex) => {
                    optionsHtml += `
                        <button class="option-btn" onclick="checkAnswer(${index}, ${optIndex}, this, ${opt.isCorrect})">
                            <span class="option-letter">${letters[optIndex]}</span>
                            ${opt.text}
                        </button>
                    `;
                });

                card.innerHTML = `
                    <div class="question-header">
                        <span class="q-badge">Question ${q.questionNumber}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                    <div class="options-grid">
                        ${optionsHtml}
                    </div>
                    <div class="explanation-box" id="exp-${index}">
                        <div class="exp-header">üë©‚Äçüè´ C√¥ Mai An gi·∫£i th√≠ch:</div>
                        <div class="exp-content">${q.rationale.replace(/\n/g, '<br>')}</div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // --- LOGIC ---
        function checkAnswer(qIndex, optIndex, btnElement, isCorrect) {
            // Prevent multiple clicks
            const card = document.getElementById(`q-card-${qIndex}`);
            if (card.classList.contains('answered')) return;
            card.classList.add('answered');

            const explanationBox = document.getElementById(`exp-${qIndex}`);
            const buttons = card.querySelectorAll('.option-btn');

            if (isCorrect) {
                // CORRECT
                score++;
                btnElement.classList.add('correct');
                AudioEngine.playDing();
                fireConfetti(btnElement);
            } else {
                // WRONG
                btnElement.classList.add('wrong');
                AudioEngine.playBuzz();
                // Highlight the correct one automatically
                // We need to find the correct button. We know isCorrect is passed, 
                // but we need the index of the correct one.
                // Let's loop through buttons/data again.
                const options = quizData[qIndex].answerOptions;
                options.forEach((opt, idx) => {
                    if (opt.isCorrect) {
                        buttons[idx].classList.add('correct');
                    }
                });
            }

            // Disable all buttons
            buttons.forEach(btn => btn.disabled = true);

            // Show Explanation immediately
            explanationBox.classList.add('visible');
        }

        function showFinalResult() {
            const modal = document.getElementById('result-modal');
            const scoreDisplay = document.getElementById('final-score');
            const title = document.getElementById('result-title');
            const msg = document.getElementById('result-message');
            
            scoreDisplay.innerText = `${score}/${totalQuestions}`;
            
            const percentage = (score / totalQuestions) * 100;
            if (percentage === 100) {
                title.innerText = "Xu·∫•t s·∫Øc! üèÜ";
                msg.innerText = "B·∫°n l√† thi√™n t√†i ng·ªØ √¢m! C√¥ Mai An r·∫•t t·ª± h√†o!";
                fireConfetti(scoreDisplay);
            } else if (percentage >= 80) {
                title.innerText = "L√†m t·ªët l·∫Øm! üåü";
                msg.innerText = "Ki·∫øn th·ª©c c·ªßa b·∫°n r·∫•t v·ªØng ch·∫Øc.";
            } else if (percentage >= 50) {
                title.innerText = "C·ªë g·∫Øng th√™m nh√©! üí™";
                msg.innerText = "H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ hi·ªÉu r√µ h∆°n nha.";
            } else {
                title.innerText = "ƒê·ª´ng bu·ªìn nh√©! üå±";
                msg.innerText = "M·ªói l·ªói sai l√† m·ªôt b√†i h·ªçc. H√£y l√†m l·∫°i ƒë·ªÉ nh·ªõ l√¢u h∆°n!";
            }
            
            modal.style.display = 'flex';
        }

        function closeModal() {
            location.reload();
        }

        // --- CONFETTI EFFECT ---
        function fireConfetti(element) {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const pieces = [];
            const numberOfPieces = 100;
            const colors = ['#f1c40f', '#e74c3c', '#8e44ad', '#3498db', '#2ecc71'];

            // Get coordinates of the element that triggered it
            const rect = element.getBoundingClientRect();
            const originX = rect.left + rect.width / 2;
            const originY = rect.top + rect.height / 2;

            for (let i = 0; i < numberOfPieces; i++) {
                pieces.push({
                    x: originX,
                    y: originY,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    radius: Math.random() * 5 + 2,
                    speed: Math.random() * 5 + 2,
                    angle: Math.random() * Math.PI * 2,
                    gravity: 0.1,
                    vy: (Math.random() - 0.5) * 10
                });
            }

            function update() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let activePieces = 0;

                pieces.forEach(p => {
                    p.x += Math.cos(p.angle) * p.speed;
                    p.y += Math.sin(p.angle) * p.speed + p.vy;
                    p.vy += p.gravity;
                    
                    if (p.y < canvas.height) {
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                        ctx.fillStyle = p.color;
                        ctx.fill();
                        activePieces++;
                    }
                });

                if (activePieces > 0) {
                    requestAnimationFrame(update);
                } else {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }

            update();
        }

        // --- INITIALIZATION ---
        window.onload = function() {
            renderQuiz();
        };

    </script>
</body>
</html>
