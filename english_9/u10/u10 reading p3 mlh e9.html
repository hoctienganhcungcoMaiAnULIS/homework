<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Mastery - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-pink: #8854C0;
            --primary-teal: #00C9A7;
            --correct-green: #00D26A;
            --wrong-red: #FF4757;
            --bg-color: #F0F4F8;
            --text-color: #2D3436;
            --card-bg: #FFFFFF;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* H·∫°n ch·∫ø b√¥i ƒëen ƒë·ªÉ t·∫≠p trung click */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #E0F7FA;
            /* H·ªça ti·∫øt ch·∫•m bi m·ªù ki·ªÉu Blooket */
            background-image: radial-gradient(#00C9A7 15%, transparent 16%), radial-gradient(#8854C0 15%, transparent 16%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            padding-bottom: 100px;
        }

        h1, h2, h3 {
            font-family: 'Quicksand', sans-serif;
            text-align: center;
            color: var(--primary-pink);
            text-shadow: 2px 2px 0px #fff;
            margin: 10px 0;
        }

        .header-title {
            background: #fff;
            display: inline-block;
            padding: 8px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border: 3px solid var(--primary-teal);
        }

        .teacher-badge {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            font-weight: 700;
        }

        /* --- Layout Styles --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .section-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 10px 0 rgba(136, 84, 192, 0.2);
            border: 4px solid #fff;
            position: relative;
            overflow: hidden;
        }

        .section-header {
            background: var(--primary-pink);
            color: white;
            padding: 10px 25px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: 800;
            font-size: 1.2rem;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
            border: 2px solid white;
        }

        /* --- Reading Passage Styling --- */
        .reading-passage {
            font-size: 1.1rem;
            line-height: 1.8;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 6px solid var(--primary-teal);
            margin-bottom: 25px;
            color: #444;
            white-space: pre-wrap; /* Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng xu·ªëng d√≤ng */
            text-align: justify;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        /* --- Glossary Table --- */
        .glossary-container {
            margin-top: 15px;
            margin-bottom: 30px;
            border: 2px dashed #ccc;
            border-radius: 15px;
            padding: 15px;
            background: #fff;
        }
        
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
        }

        .glossary-table th {
            background: var(--primary-teal);
            color: white;
            padding: 10px;
            text-align: left;
            font-family: 'Quicksand', sans-serif;
        }

        .glossary-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        
        .type-tag {
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            color: #555;
            font-family: monospace;
        }

        /* --- Question Card --- */
        .question-block {
            margin-bottom: 25px;
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #eee;
            box-shadow: 0 4px 0 #eee;
        }

        .question-text {
            font-weight: 800;
            color: var(--primary-pink);
            font-size: 1.15rem;
            margin-bottom: 15px;
            display: block;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr; /* Default 1 column for long text */
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px 0 #ccc;
            text-align: left;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            border-color: var(--primary-pink);
        }

        .option-btn:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: 0 0 0 #ccc;
        }

        /* States */
        .option-btn.correct {
            background-color: var(--correct-green) !important;
            color: white !important;
            border-color: #00A653 !important;
            box-shadow: 0 5px 0 #008E47 !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-red) !important;
            color: white !important;
            border-color: #D63031 !important;
            box-shadow: 0 5px 0 #B82829 !important;
            animation: shake 0.5s;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* --- Explanation Box --- */
        .explanation-box {
            display: none; /* Hidden by default */
            margin-top: 20px;
            background: #FFFDE7; /* Very light yellow */
            border: 2px solid #FBC02D;
            padding: 20px;
            border-radius: 15px;
            animation: slideDown 0.4s ease-out;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .exp-header {
            font-weight: 800;
            color: #F57F17;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px dashed #FBC02D;
            padding-bottom: 10px;
        }

        .exp-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .exp-content p {
            margin: 8px 0;
            line-height: 1.6;
        }

        .exp-label {
            font-weight: 800;
            color: var(--primary-pink);
            text-transform: uppercase;
            font-size: 0.8rem;
            background: #E1D4F9;
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 5px;
        }

        /* --- Footer / Result --- */
        .submit-section {
            text-align: center;
            margin-top: 40px;
        }

        .submit-btn {
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: 800;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #5E328F;
            transition: transform 0.2s;
            font-family: 'Quicksand', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-btn:active {
            transform: translateY(8px);
            box-shadow: 0 0 0 #5E328F;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* Popup Score */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            border: 6px solid var(--primary-teal);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        .score-display {
            font-size: 4rem;
            color: var(--primary-pink);
            font-weight: 900;
            font-family: 'Quicksand', sans-serif;
            margin: 10px 0;
            text-shadow: 3px 3px 0 #eee;
        }

        .comment-text {
            font-size: 1.3rem;
            margin-top: 10px;
            margin-bottom: 20px;
            color: #555;
            font-weight: 600;
        }

    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <center>
            <div class="header-title">
                <h1>READING COMPREHENSION CHALLENGE</h1>
                <div class="teacher-badge">Created by: Ms. Mai An ULIS</div>
            </div>
            <p style="font-weight: 600; color: #555; margin-bottom: 30px;">Exercise 4: Read the passage and mark the letter A, B, C, or D to indicate the correct answer.</p>
        </center>

        <div class="section-card" id="section-1">
            <div class="section-header">PASSAGE 1: Planet Earth & Life üåç</div>
            
            <div class="reading-passage">
Planet Earth is the third rock from the sun and the only known planet in our solar system. Unlike any other planet we know, Earth provides the perfect conditions for life to exist. From the hot deserts to the icy poles, Earth is home to a diverse range of habitats, each full of unique life forms.
These life forms can be broadly divided into two groups: flora and fauna. Flora refers to all the plant life on Earth, from the tall trees in the rainforest to the very small algae floating in the oceans. Fauna, on the other hand, includes all the animal life, from the majestic lions roaming the grassland to the microscopic insects hidden in the soil.
All these plants and animals are interconnected in a complex web called the food chain. Plants, using sunlight and nutrients, produce their own food. Herbivores, or plant-eaters, consume these plants for energy. Carnivores, or meat-eaters, then feed on the herbivores. This cycle ensures the survival of various species and maintains a healthy balance in Earth's ecosystems.
Planet Earth is truly a remarkable haven. Its diverse habitats, vibrant flora and fauna, and interconnected food chain all contribute to making it a haven for life. It's our responsibility to protect this incredible planet and ensure its continued existence for future generations.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Flora</td><td><span class="type-tag">n</span></td><td>H·ªá th·ª±c v·∫≠t</td></tr>
                    <tr><td>Fauna</td><td><span class="type-tag">n</span></td><td>H·ªá ƒë·ªông v·∫≠t</td></tr>
                    <tr><td>Habitat</td><td><span class="type-tag">n</span></td><td>M√¥i tr∆∞·ªùng s·ªëng</td></tr>
                    <tr><td>Ecosystem</td><td><span class="type-tag">n</span></td><td>H·ªá sinh th√°i</td></tr>
                    <tr><td>Interconnected</td><td><span class="type-tag">adj</span></td><td>C√≥ m·ªëi li√™n k·∫øt v·ªõi nhau</td></tr>
                    <tr><td>Herbivore</td><td><span class="type-tag">n</span></td><td>ƒê·ªông v·∫≠t ƒÉn c·ªè</td></tr>
                    <tr><td>Carnivore</td><td><span class="type-tag">n</span></td><td>ƒê·ªông v·∫≠t ƒÉn th·ªãt</td></tr>
                    <tr><td>Haven</td><td><span class="type-tag">n</span></td><td>N∆°i tr√∫ ·∫©n an to√†n, thi√™n ƒë∆∞·ªùng</td></tr>
                    <tr><td>Existence</td><td><span class="type-tag">n</span></td><td>S·ª± t·ªìn t·∫°i</td></tr>
                    <tr><td>Survive</td><td><span class="type-tag">v</span></td><td>Sinh t·ªìn, s·ªëng s√≥t</td></tr>
                </table>
            </div>

            <div id="questions-area-1"></div>
        </div>

        <div class="section-card" id="section-2">
            <div class="section-header">PASSAGE 2: Habitat Loss & Conservation üêÜ</div>
            
            <div class="reading-passage">
A hundred years ago, jaguars ranged from the south-western United States to Argentina, in South America. Today their territory has shrunk by more than half, and they live mostly in the Amazon rainforest. And jaguars aren‚Äôt the only animals losing their homes - according to the International Union for Conservation of Nature, habitat loss is the main threat to about 85 percent of all endangered plant and animal species.
Tropical rainforests cover only about 7 percent of Earth‚Äôs land, but they‚Äôre home to an estimated half of all known plant and animal species. Most experts agree that about 80,000 acres disappear every day when trees are cut down for lumber and land is cleared for farms. Trees also play an important role in absorbing the carbon dioxide that contributes to climate change. Fewer forests mean that more greenhouse gases remain trapped in the atmosphere.
Grasslands, underwater habitats, and wetlands are also at risk of habitat loss. For instance, the World Wildlife Fund estimates that about half of the world‚Äôs wetlands have disappeared in the last hundred years due to being drained for farmland or other industries. That means less space for animals to feed, breed, and raise their young.
Finding a balance between what humans and animals need will help prevent habitat destruction. Some scientists think that if we put aside half of Earth‚Äôs land and water for nature, we could save up to 90 percent of all species. In the meantime, your everyday actions can build a better planet.
            </div>

            <div class="glossary-container">
                <h3>üìö Ms. Mai An's Academic Glossary</h3>
                <table class="glossary-table">
                    <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
                    <tr><td>Territory</td><td><span class="type-tag">n</span></td><td>L√£nh th·ªï</td></tr>
                    <tr><td>Shrink (Shrunk)</td><td><span class="type-tag">v</span></td><td>Co l·∫°i, thu h·∫πp</td></tr>
                    <tr><td>Endangered</td><td><span class="type-tag">adj</span></td><td>C√≥ nguy c∆° tuy·ªát ch·ªßng</td></tr>
                    <tr><td>Lumber</td><td><span class="type-tag">n</span></td><td>G·ªó x·∫ª (ƒë·ªÉ x√¢y d·ª±ng)</td></tr>
                    <tr><td>Absorb</td><td><span class="type-tag">v</span></td><td>H·∫•p th·ª•</td></tr>
                    <tr><td>Atmosphere</td><td><span class="type-tag">n</span></td><td>B·∫ßu kh√≠ quy·ªÉn</td></tr>
                    <tr><td>Wetland</td><td><span class="type-tag">n</span></td><td>V√πng ƒë·∫•t ng·∫≠p n∆∞·ªõc</td></tr>
                    <tr><td>Drain</td><td><span class="type-tag">v</span></td><td>R√∫t n∆∞·ªõc, l√†m r√°o n∆∞·ªõc</td></tr>
                    <tr><td>Breed</td><td><span class="type-tag">v</span></td><td>Sinh s·∫£n</td></tr>
                    <tr><td>Destruction</td><td><span class="type-tag">n</span></td><td>S·ª± ph√° h·ªßy</td></tr>
                </table>
            </div>

            <div id="questions-area-2"></div>
        </div>

        <div class="submit-section">
            <button class="submit-btn" onclick="showFinalResult()">N·ªòP B√ÄI & XEM ƒêI·ªÇM üèÜ</button>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 style="color: var(--primary-pink)">K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>
            <div class="score-display" id="finalScore">0/10</div>
            <p class="comment-text" id="finalComment">C·ªë g·∫Øng l√™n nh√©!</p>
            <button class="submit-btn" style="font-size: 1rem; padding: 10px 30px;" onclick="closeModal()">Xem l·∫°i b√†i l√†m</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const quizData = {
            section1: [
                {
                    id: "1-1",
                    q: "What is the main topic of the passage?",
                    options: { 
                        A: "The different types of planets in outer space.", 
                        B: "The importance of protecting Earth.", 
                        C: "The history of life on Earth.", 
                        D: "The comparison of Earth to other planets." 
                    },
                    correct: "B",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> Ch·ªß ƒë·ªÅ ch√≠nh c·ªßa ƒëo·∫°n vƒÉn l√† g√¨?</p>
                        <p><span class="exp-label">Ph√¢n t√≠ch:</span><br>
                        A. C√°c lo·∫°i h√†nh tinh kh√°c nhau ngo√†i v≈© tr·ª•.<br>
                        B. T·∫ßm quan tr·ªçng c·ªßa vi·ªác b·∫£o v·ªá Tr√°i ƒë·∫•t.<br>
                        C. L·ªãch s·ª≠ s·ª± s·ªëng tr√™n Tr√°i ƒë·∫•t.<br>
                        D. S·ª± so s√°nh Tr√°i ƒë·∫•t v·ªõi c√°c h√†nh tinh kh√°c.</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (B):</span> B√†i vi·∫øt m√¥ t·∫£ Tr√°i ƒë·∫•t l√† "haven for life" (thi√™n ƒë∆∞·ªùng cho s·ª± s·ªëng) v√† k·∫øt th√∫c b·∫±ng l·ªùi k√™u g·ªçi: "It's our responsibility to protect this incredible planet" (Tr√°ch nhi·ªám c·ªßa ch√∫ng ta l√† b·∫£o v·ªá h√†nh tinh tuy·ªát v·ªùi n√†y). ƒê√¢y l√† th√¥ng ƒëi·ªáp bao tr√πm nh·∫•t.</p>
                        <p><span class="exp-label">T·∫°i sao SAI:</span> A, C, D l√† nh·ªØng chi ti·∫øt nh·ªè ho·∫∑c kh√¥ng ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p ch√≠nh (b√†i kh√¥ng li·ªát k√™ c√°c h√†nh tinh kh√°c, kh√¥ng n√≥i v·ªÅ l·ªãch s·ª≠ hay so s√°nh chi ti·∫øt).</p>
                    `
                },
                {
                    id: "1-2",
                    q: "What word refers to all the plant life on Earth?",
                    options: { A: "habitat", B: "fauna", C: "flora", D: "food chain" },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> T·ª´ n√†o ch·ªâ to√†n b·ªô ƒë·ªùi s·ªëng th·ª±c v·∫≠t tr√™n Tr√°i ƒë·∫•t?</p>
                        <p><span class="exp-label">Ph√¢n t√≠ch:</span> A. M√¥i tr∆∞·ªùng s·ªëng; B. H·ªá ƒë·ªông v·∫≠t; C. H·ªá th·ª±c v·∫≠t; D. Chu·ªói th·ª©c ƒÉn.</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span> D·∫´n ch·ª©ng ƒëo·∫°n 2: "Flora refers to all the plant life on Earth" (H·ªá th·ª±c v·∫≠t ƒë·ªÅ c·∫≠p ƒë·∫øn t·∫•t c·∫£ ƒë·ªùi s·ªëng th·ª±c v·∫≠t tr√™n Tr√°i ƒë·∫•t).</p>
                    `
                },
                {
                    id: "1-3",
                    q: "What is an example of a habitat mentioned in the passage?",
                    options: { A: "outer space", B: "food chain", C: "rainforest", D: "flora" },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> V√≠ d·ª• n√†o v·ªÅ m√¥i tr∆∞·ªùng s·ªëng ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p trong ƒëo·∫°n vƒÉn?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span> D·∫´n ch·ª©ng ƒëo·∫°n 2: "...from the tall trees in the rainforest..." (t·ª´ nh·ªØng c√¢y cao trong <strong>r·ª´ng nhi·ªát ƒë·ªõi</strong>). Rainforest l√† m·ªôt m√¥i tr∆∞·ªùng s·ªëng.</p>
                        <p><span class="exp-label">T·∫°i sao SAI:</span> Outer space l√† v≈© tr·ª• (ch·ª©a Tr√°i ƒë·∫•t), food chain l√† chu·ªói th·ª©c ƒÉn, flora l√† h·ªá th·ª±c v·∫≠t (th√†nh ph·∫ßn s·ªëng trong habitat).</p>
                    `
                },
                {
                    id: "1-4",
                    q: "What is the interdependent web of plants and animals called in the passage?",
                    options: { A: "planet", B: "habitat", C: "flora and fauna", D: "food chain" },
                    correct: "D",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> M·∫°ng l∆∞·ªõi ph·ª• thu·ªôc l·∫´n nhau c·ªßa th·ª±c v·∫≠t v√† ƒë·ªông v·∫≠t ƒë∆∞·ª£c g·ªçi l√† g√¨?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span> D·∫´n ch·ª©ng ƒëo·∫°n 3: "All these plants and animals are interconnected in a complex web called the food chain." (T·∫•t c·∫£ th·ª±c v·∫≠t v√† ƒë·ªông v·∫≠t ƒë∆∞·ª£c li√™n k·∫øt trong m·ªôt m·∫°ng l∆∞·ªõi ph·ª©c t·∫°p g·ªçi l√† chu·ªói th·ª©c ƒÉn).</p>
                    `
                },
                {
                    id: "1-5",
                    q: "Which of the following statements can be inferred from the reading?",
                    options: { 
                        A: "Earth's diverse habitats support a variety of plant and animal life.", 
                        B: "Animals and plants on Earth can provide energy and support carnivores.", 
                        C: "Plants are the only living things on Earth and need to be protected.", 
                        D: "Herbivores on Earth are at the top of the food chain." 
                    },
                    correct: "A",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> ƒêi·ªÅu n√†o sau ƒë√¢y c√≥ th·ªÉ ƒë∆∞·ª£c suy ra t·ª´ b√†i ƒë·ªçc?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (A):</span> B√†i ƒë·ªçc ƒë·ªÅ c·∫≠p Tr√°i ƒë·∫•t c√≥ "diverse range of habitats" (ƒëa d·∫°ng m√¥i tr∆∞·ªùng s·ªëng) v√† m·ªói n∆°i "full of unique life forms" (ƒë·∫ßy c√°c d·∫°ng s·ªëng ƒë·ªôc ƒë√°o) -> Suy ra m√¥i tr∆∞·ªùng ƒëa d·∫°ng h·ªó tr·ª£ s·ª± s·ªëng ƒëa d·∫°ng.</p>
                        <p><span class="exp-label">T·∫°i sao SAI:</span><br>
                        B. Sai v√¨ ch·ªâ c√≥ Plants cung c·∫•p nƒÉng l∆∞·ª£ng g·ªëc, Carnivores kh√¥ng ƒë∆∞·ª£c support b·ªüi Plants tr·ª±c ti·∫øp.<br>
                        C. Sai v√¨ Animals c≈©ng l√† living things.<br>
                        D. Sai v√¨ Carnivores ƒÉn Herbivores, n√™n Herbivores kh√¥ng th·ªÉ ƒë·ª©ng ƒë·∫ßu chu·ªói th·ª©c ƒÉn.</p>
                    `
                }
            ],
            section2: [
                {
                    id: "2-1",
                    q: "What can be the best title for the passage?",
                    options: { 
                        A: "Jaguars: Losing Their Homes", 
                        B: "The Importance of Trees", 
                        C: "Habitat Loss: A Threat to Wildlife", 
                        D: "How to Save the Planet" 
                    },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> Ti√™u ƒë·ªÅ t·ªët nh·∫•t cho ƒëo·∫°n vƒÉn l√† g√¨?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span> B√†i vƒÉn b·∫Øt ƒë·∫ßu b·∫±ng v√≠ d·ª• v·ªÅ Jaguar m·∫•t nh√†, sau ƒë√≥ m·ªü r·ªông ra "habitat loss is the main threat" (m·∫•t m√¥i tr∆∞·ªùng s·ªëng l√† m·ªëi ƒëe d·ªça ch√≠nh), r·ªìi li·ªát k√™ r·ª´ng m∆∞a, ƒë·∫•t ng·∫≠p n∆∞·ªõc b·ªã m·∫•t ƒëi. Ti√™u ƒë·ªÅ "M·∫•t m√¥i tr∆∞·ªùng s·ªëng: M·ªëi ƒëe d·ªça v·ªõi ƒë·ªông v·∫≠t hoang d√£" bao qu√°t nh·∫•t.</p>
                        <p><span class="exp-label">T·∫°i sao SAI:</span> A ch·ªâ n√≥i v·ªÅ b√°o ƒë·ªëm (ch·ªâ l√† v√≠ d·ª• m·ªü b√†i). B v√† D qu√° r·ªông ho·∫∑c ch·ªâ l√† m·ªôt ph·∫ßn nh·ªè.</p>
                    `
                },
                {
                    id: "2-2",
                    q: "The word ‚Äúshrunk‚Äù in the first paragraph is closest in meaning to __________.",
                    options: { A: "grown", B: "expanded", C: "reduced", D: "disappeared" },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> T·ª´ "shrunk" (qu√° kh·ª© c·ªßa shrink) g·∫ßn nghƒ©a nh·∫•t v·ªõi t·ª´ n√†o?</p>
                        <p><span class="exp-label">Ph√¢n t√≠ch:</span> A. L·ªõn l√™n; B. M·ªü r·ªông; C. Gi·∫£m b·ªõt/Thu h·∫πp; D. Bi·∫øn m·∫•t.</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span> Ng·ªØ c·∫£nh "territory has shrunk by more than half" (l√£nh th·ªï ƒë√£ b·ªã thu h·∫πp h∆°n m·ªôt n·ª≠a) -> ƒê·ªìng nghƒ©a v·ªõi <strong>Reduced</strong>.</p>
                    `
                },
                {
                    id: "2-3",
                    q: "The word ‚Äúthey‚Äù in paragraph 2 refers to _______.",
                    options: { A: "Earth‚Äôs land", B: "plant and animal species", C: "most experts", D: "tropical rainforests" },
                    correct: "D",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> T·ª´ "they" trong ƒëo·∫°n 2 √°m ch·ªâ ƒëi·ªÅu g√¨?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span> C√¢u g·ªëc: "Tropical rainforests cover only about 7 percent..., but <strong>they</strong>‚Äôre home to..." (R·ª´ng m∆∞a nhi·ªát ƒë·ªõi ch·ªâ chi·∫øm 7%..., nh∆∞ng <strong>ch√∫ng</strong> l√† nh√† c·ªßa...). "They" thay th·∫ø cho ch·ªß ng·ªØ <strong>Tropical rainforests</strong>.</p>
                    `
                },
                {
                    id: "2-4",
                    q: "Which of the following is NOT true according to the passage?",
                    options: { 
                        A: "Jaguars now live mainly in the Amazon rainforest.", 
                        B: "Habitat loss is a major threat to many endangered species.", 
                        C: "Trees help to reduce climate change.", 
                        D: "Most of Earth‚Äôs land is covered by tropical rainforests." 
                    },
                    correct: "D",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> ƒêi·ªÅu n√†o sau ƒë√¢y KH√îNG ƒë√∫ng?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (D):</span> (L√† c√¢u sai so v·ªõi b√†i). B√†i ƒë·ªçc n√≥i: "Tropical rainforests cover only about 7 percent of Earth‚Äôs land" (Ch·ªâ chi·∫øm kho·∫£ng 7%). ƒê√°p √°n D n√≥i "H·∫ßu h·∫øt di·ªán t√≠ch ƒë·∫•t" -> SAI.</p>
                        <p><span class="exp-label">T·∫°i sao A, B, C ƒë√∫ng:</span><br>
                        A: C√≥ trong ƒëo·∫°n 1.<br>
                        B: C√≥ trong ƒëo·∫°n 1 (main threat to 85%).<br>
                        C: C√≥ trong ƒëo·∫°n 2 (absorbing carbon dioxide).</p>
                    `
                },
                {
                    id: "2-5",
                    q: "According to the passage, what is one way humans can help prevent habitat destruction?",
                    options: { 
                        A: "Cut down more trees for farmland.", 
                        B: "Drain wetlands for industrial use.", 
                        C: "Set aside land and water for nature.", 
                        D: "Increase their carbon footprint." 
                    },
                    correct: "C",
                    explanation: `
                        <p><span class="exp-label">D·ªãch c√¢u h·ªèi:</span> Theo ƒëo·∫°n vƒÉn, m·ªôt c√°ch con ng∆∞·ªùi c√≥ th·ªÉ gi√∫p ngƒÉn ch·∫∑n s·ª± ph√° h·ªßy m√¥i tr∆∞·ªùng s·ªëng l√† g√¨?</p>
                        <p><span class="exp-label">T·∫°i sao ƒê√öNG (C):</span> D·∫´n ch·ª©ng ƒëo·∫°n cu·ªëi: "Some scientists think that if we <strong>put aside half of Earth‚Äôs land and water for nature</strong>..." (d√†nh ri√™ng m·ªôt n·ª≠a ƒë·∫•t v√† n∆∞·ªõc cho thi√™n nhi√™n).</p>
                        <p><span class="exp-label">T·∫°i sao SAI:</span> A, B, D ƒë·ªÅu l√† h√†nh ƒë·ªông ph√° ho·∫°i m√¥i tr∆∞·ªùng ƒë∆∞·ª£c nh·∫Øc ƒë·∫øn nh∆∞ nguy√™n nh√¢n ti√™u c·ª±c.</p>
                    `
                }
            ]
        };

        // --- SOUNDS (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // Ding sound (High pitch sine wave)
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else {
                // Buzz sound (Low pitch sawtooth)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderSection(sectionId, data) {
            const container = document.getElementById(`questions-area-${sectionId}`);
            data.forEach((item, index) => {
                const questionNum = index + 1;
                const html = `
                    <div class="question-block" id="q-${item.id}">
                        <span class="question-text">Question ${questionNum}: ${item.q}</span>
                        <div class="options-grid">
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'A', '${item.correct}')">A. ${item.options.A}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'B', '${item.correct}')">B. ${item.options.B}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'C', '${item.correct}')">C. ${item.options.C}</button>
                            <button class="option-btn" onclick="checkAnswer('${item.id}', 'D', '${item.correct}')">D. ${item.options.D}</button>
                        </div>
                        <div class="explanation-box" id="exp-${item.id}">
                            <div class="exp-header">
                                <div class="exp-avatar">Ms</div>
                                <span>C√¥ Mai An gi·∫£i th√≠ch:</span>
                            </div>
                            <div class="exp-content">
                                ${item.explanation}
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // Initialize Rendering
        renderSection('1', quizData.section1);
        renderSection('2', quizData.section2);

        // --- LOGIC FUNCTIONS ---
        let score = 0;
        const totalQuestions = 10;

        function checkAnswer(id, selected, correct) {
            const questionBlock = document.getElementById(`q-${id}`);
            const buttons = questionBlock.querySelectorAll('.option-btn');
            const expBox = document.getElementById(`exp-${id}`);

            // Disable all buttons in this question
            buttons.forEach(btn => {
                btn.disabled = true;
                const btnText = btn.innerText;
                const btnLetter = btnText.charAt(0); // Gets 'A', 'B', 'C', 'D'

                // Check matches
                if (btnLetter === correct) {
                    btn.classList.add('correct');
                }
                if (btnLetter === selected && selected !== correct) {
                    btn.classList.add('wrong');
                }
            });

            // Logic
            if (selected === correct) {
                score++;
                playSound('correct');
                fireConfetti();
            } else {
                playSound('wrong');
            }

            // Show Explanation immediately
            expBox.style.display = 'block';
        }

        function showFinalResult() {
            const modal = document.getElementById('resultModal');
            const scoreText = document.getElementById('finalScore');
            const comment = document.getElementById('finalComment');
            
            scoreText.innerText = `${score} / ${totalQuestions}`;
            
            if(score === totalQuestions) {
                comment.innerText = "Tuy·ªát v·ªùi! Em l√† thi√™n t√†i ti·∫øng Anh! üåü";
                fireConfetti();
            } else if (score >= 7) {
                comment.innerText = "L√†m t·ªët l·∫Øm! Em r·∫•t c√≥ nƒÉng khi·∫øu! üî•";
            } else {
                comment.innerText = "C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! H√£y xem k·ªπ gi·∫£i th√≠ch c·ªßa c√¥! üí™";
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        // --- CONFETTI EFFECT ---
        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for (let i = 0; i < 80; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: Math.random() * 4 - 2,
                    vy: Math.random() * 4 + 2,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                    size: Math.random() * 8 + 4
                });
            }

            let animationId;
            function update() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let active = false;
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.y < canvas.height) {
                        ctx.fillStyle = p.color;
                        ctx.fillRect(p.x, p.y, p.size, p.size);
                        active = true;
                    }
                });

                if (active) {
                    animationId = requestAnimationFrame(update);
                } else {
                    cancelAnimationFrame(animationId);
                }
            }
            update();
        }

        // Resize canvas
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

    </script>
</body>
</html>


