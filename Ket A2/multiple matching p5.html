<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms Mai An ULIS - Part-time Jobs Reading</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Gamification Pastel/Neon Palette cho ch·ªß ƒë·ªÅ Shopping/Jobs */
            --primary: #FF6B6B;      /* Pastel Red/Pink */
            --secondary: #48DBFB;    /* Bright Blue */
            --accent: #FFA502;       /* Warm Orange */
            --correct: #1DD1A1;      /* Mint Green */
            --wrong: #FF4757;        /* Vibrant Red */
            --text-dark: #2F3640;
        }

        * {
            box-sizing: border-box;
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            padding: 0;
        }

        /* 1. L·ªöP N·ªÄN LOANG M√ÄU CHUY·ªÇN ƒê·ªòNG (ANIMATED GRADIENT) */
        body {
            overflow: hidden;
            color: var(--text-dark);
            background: linear-gradient(-45deg, #FF9A9E, #FECFEF, #FDCB6E, #1DD1A1, #48DBFB);
            background-size: 400% 400%;
            animation: smoothGradient 15s ease infinite;
            height: 100vh;
            position: relative;
        }

        @keyframes smoothGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 2. L·ªöP H·ªåA TI·∫æT SVG TR√îI N·ªîI ƒê·ªòC L·∫¨P (FLOATING PATTERN) */
        .pattern-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Ch√®n Emoji: Cafe, Si√™u th·ªã, Qu√† t·∫∑ng, Nh√£n gi√° */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='250'%3E%3Ctext x='30' y='50' font-size='35'%3E‚òï%3C/text%3E%3Ctext x='150' y='100' font-size='40'%3Eüõí%3C/text%3E%3Ctext x='50' y='200' font-size='35'%3EüéÅ%3C/text%3E%3Ctext x='180' y='220' font-size='30'%3Eüè∑Ô∏è%3C/text%3E%3C/svg%3E");
            opacity: 0.4;
            pointer-events: none;
            z-index: 1; /* N·ªïi tr√™n n·ªÅn m√†u, ch√¨m d∆∞·ªõi n·ªôi dung */
            animation: floatSVG 40s linear infinite;
        }

        @keyframes floatSVG {
            from { background-position: 0 0; }
            to { background-position: 500px 500px; }
        }

        /* Top Control Bar */
        header {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border-bottom: 5px solid var(--accent);
        }

        .header-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 900;
            text-shadow: 1px 1px 0px rgba(0,0,0,0.1);
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn-action {
            padding: 12px 25px;
            border: none;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 rgba(0,0,0,0.15);
        }

        .btn-start { background-color: var(--accent); color: white; }
        .btn-start:active { transform: translateY(6px); box-shadow: none; }

        #timer-display {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
            background: rgba(255,255,255,0.8);
            padding: 5px 20px;
            border-radius: 15px;
            border: 3px dashed var(--accent);
            min-width: 120px;
            text-align: center;
        }

        /* Split Screen */
        .main-container {
            display: flex;
            height: calc(100vh - 85px);
            position: relative;
            z-index: 5;
        }

        .panel {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
        }

        .left-panel {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(15px);
            border-right: 4px dashed var(--primary);
        }

        .right-panel { background: transparent; }

        /* Reading Content */
        .passage-title {
            font-size: 2.8rem;
            color: var(--primary);
            margin-bottom: 25px;
            text-align: center;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 0px white;
        }

        .person-card {
            background: white;
            padding: 25px;
            border-radius: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05);
            border: 3px solid #f1f2f6;
            font-size: 1.25rem;
            line-height: 1.7;
            position: relative;
        }
        
        .person-name {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 5px 20px;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: 900;
            margin-bottom: 15px;
            box-shadow: 0 4px 0 #0abde3;
        }

        .btn-translate {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1rem;
            margin-top: 15px;
            cursor: pointer;
            box-shadow: 0 5px 0 #e17055;
            transition: 0.2s;
        }
        .btn-translate:active { transform: translateY(5px); box-shadow: none; }

        .translation-text {
            display: none;
            margin-top: 20px;
            padding: 15px 20px;
            background: #fff3e0;
            border-left: 6px solid var(--accent);
            border-radius: 10px;
            font-size: 1.15rem;
            color: #d35400;
            font-weight: 700;
        }

        /* Glossary */
        .glossary-wrapper {
            background: white;
            border-radius: 25px;
            padding: 25px;
            margin-top: 40px;
            border: 4px solid var(--secondary);
            box-shadow: 0 10px 0 rgba(72, 219, 251, 0.3);
        }
        .glossary-title {
            color: var(--secondary);
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 900;
        }
        table { width: 100%; border-collapse: collapse; font-size: 1.1rem; }
        th, td { padding: 15px; text-align: left; border-bottom: 2px dashed #f1f2f6; }
        th { background: var(--secondary); color: white; border-radius: 10px; font-size: 1.2rem;}
        tr:hover td { background: #f8fbfe; font-weight: 700; color: var(--secondary); cursor: pointer; }

        /* Quiz Cards */
        .question-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 12px 0 rgba(0,0,0,0.08);
            border: 4px solid #fff;
            transition: all 0.3s;
        }
        .question-card:hover { transform: translateY(-5px); border-color: var(--secondary); }

        .question-text {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--text-dark);
            margin-bottom: 25px;
        }

        .options-grid { display: flex; gap: 15px; flex-wrap: wrap; }

        .option-btn {
            flex: 1;
            min-width: 120px;
            background: #f1f2f6;
            border: 3px solid #dfe4ea;
            padding: 15px 20px;
            border-radius: 18px;
            font-size: 1.3rem;
            font-weight: 800;
            color: #2f3542;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 #dfe4ea;
        }
        
        .option-btn:hover:not(:disabled) {
            transform: scale(1.05);
            background: white;
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: 0 6px 0 var(--primary);
        }

        .option-btn:active:not(:disabled) { transform: translateY(6px); box-shadow: none; }

        .option-btn.correct {
            background: var(--correct);
            border-color: #10ac84;
            color: white;
            box-shadow: 0 6px 0 #10ac84;
        }

        .option-btn.wrong {
            background: var(--wrong);
            border-color: #c0392b;
            color: white;
            box-shadow: 0 6px 0 #c0392b;
            animation: shake 0.4s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-2deg); }
            75% { transform: translateX(10px) rotate(2deg); }
        }

        /* Detailed Explanation Box */
        .explanation-box {
            display: none;
            margin-top: 25px;
            padding: 20px;
            background: #f8efba;
            border: 4px dashed var(--accent);
            border-radius: 15px;
            animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }
        .explanation-box h4 { color: #e15f41; margin-bottom: 15px; font-size: 1.3rem; font-weight: 900; }
        .explanation-box p { margin-bottom: 10px; font-size: 1.15rem; line-height: 1.6; }
        .explanation-box .highlight { background: var(--accent); color: white; padding: 2px 8px; border-radius: 5px; font-weight: bold; }

        /* Submit Button */
        .btn-submit {
            display: block;
            width: 100%;
            background: var(--primary);
            color: white;
            font-size: 1.8rem;
            font-weight: 900;
            padding: 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 10px 0 #d63031;
            margin-top: 30px;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .btn-submit:hover { transform: scale(1.02); }
        .btn-submit:active { transform: translateY(10px); box-shadow: none; }

        /* Modal Result */
        #result-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
        }
        .modal-content {
            background: white;
            padding: 50px;
            border-radius: 40px;
            text-align: center;
            max-width: 550px;
            width: 90%;
            border: 8px solid var(--primary);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes popIn { 0% { transform: scale(0.3) rotate(-10deg); opacity: 0; } 100% { transform: scale(1) rotate(0); opacity: 1; } }
        
        .score-circle {
            width: 180px; height: 180px;
            background: var(--secondary);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 4rem; font-weight: 900; color: white;
            margin: 0 auto 25px;
            border: 10px solid #0abde3;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        ::-webkit-scrollbar { width: 14px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 20px; border: 3px solid white; }
        ::-webkit-scrollbar-thumb:hover { background: #ff4757; }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
    </style>
</head>
<body>

    <div class="pattern-overlay"></div>
    <canvas id="confetti-canvas"></canvas>

    <header>
        <div class="header-title">üíº Ms Mai An ULIS | Part-time Jobs Reading</div>
        <div class="timer-container">
            <div id="timer-display">10:00</div>
            <button class="btn-action btn-start" id="btn-timer" onclick="toggleTimer()">‚ñ∂ B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI</button>
        </div>
    </header>

    <div class="main-container">
        <div class="panel left-panel">
            <h1 class="passage-title">Part-time jobs</h1>

            <div class="person-card">
                <div class="person-name">üë©‚Äçüç≥ Helena</div>
                <p>I have a part-time job in a caf√© in the city centre. I work there every Saturday from 9.00 to 5.00 and I have worked there every week for almost a year. I like working there ‚Äì the customers are really friendly and they always ask how I am. We get to eat the caf√©‚Äôs food for lunch ‚Äì it‚Äôs all delicious. My favourite is the cheese sandwiches with chips! When I‚Äôm older, I‚Äôd like to have my own caf√©.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">T√¥i c√≥ m·ªôt c√¥ng vi·ªác b√°n th·ªùi gian t·∫°i m·ªôt qu√°n c√† ph√™ ·ªü trung t√¢m th√†nh ph·ªë. T√¥i l√†m vi·ªác ·ªü ƒë√≥ m·ªói th·ª© B·∫£y t·ª´ 9 gi·ªù s√°ng ƒë·∫øn 5 gi·ªù chi·ªÅu v√† t√¥i ƒë√£ l√†m vi·ªác ·ªü ƒë√≥ h√†ng tu·∫ßn trong g·∫ßn m·ªôt nƒÉm. T√¥i th√≠ch l√†m vi·ªác ·ªü ƒë√≥ ‚Äì kh√°ch h√†ng r·∫•t th√¢n thi·ªán v√† h·ªç lu√¥n h·ªèi thƒÉm t√¥i. Ch√∫ng t√¥i ƒë∆∞·ª£c ƒÉn ƒë·ªì ƒÉn c·ªßa qu√°n v√†o b·ªØa tr∆∞a ‚Äì t·∫•t c·∫£ ƒë·ªÅu r·∫•t ngon. M√≥n y√™u th√≠ch c·ªßa t√¥i l√† b√°nh m√¨ k·∫πp ph√¥ mai v·ªõi khoai t√¢y chi√™n! Khi l·ªõn l√™n, t√¥i mu·ªën c√≥ m·ªôt qu√°n c√† ph√™ c·ªßa ri√™ng m√¨nh.</div>
            </div>

            <div class="person-card">
                <div class="person-name">üõí Katja</div>
                <p>I have worked in the local supermarket since last summer now and I really enjoy it. I work two evenings a week and a full day on either Saturday or Sunday. Saturdays are the best day for me to work so I can go out with my friends after work and have a rest the day after. It‚Äôs often very busy at work so the time goes quickly. I prefer it when I‚Äôm busy.</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">T√¥i ƒë√£ l√†m vi·ªác t·∫°i si√™u th·ªã ƒë·ªãa ph∆∞∆°ng t·ª´ m√πa h√® nƒÉm ngo√°i cho ƒë·∫øn nay v√† t√¥i th·ª±c s·ª± th√≠ch n√≥. T√¥i l√†m vi·ªác hai bu·ªïi t·ªëi m·ªôt tu·∫ßn v√† tr·ªçn m·ªôt ng√†y v√†o th·ª© B·∫£y ho·∫∑c Ch·ªß Nh·∫≠t. Th·ª© B·∫£y l√† ng√†y l√†m vi·ªác tuy·ªát v·ªùi nh·∫•t ƒë·ªëi v·ªõi t√¥i v√¨ t√¥i c√≥ th·ªÉ ƒëi ch∆°i v·ªõi b·∫°n b√® sau gi·ªù l√†m v√† ngh·ªâ ng∆°i v√†o ng√†y h√¥m sau. C√¥ng vi·ªác th∆∞·ªùng r·∫•t b·∫≠n r·ªôn n√™n th·ªùi gian tr√¥i qua r·∫•t nhanh. T√¥i th√≠ch khi m√¨nh b·∫≠n r·ªôn h∆°n.</div>
            </div>

            <div class="person-card">
                <div class="person-name">üéÅ Paula</div>
                <p>I‚Äôve got a part-time job in a gift shop. It sells cards and birthday presents and it also has presents for days like Mother‚Äôs Day. I‚Äôve worked there for two years and get on well with the other staff. I work on Saturdays, but in the summer holidays I work on some days during the week as well. We sometimes get people asking what to buy for their family ‚Äì I like giving them ideas. It‚Äôs a great job!</p>
                <button class="btn-translate" onclick="toggleTranslation(this)">üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶</button>
                <div class="translation-text">T√¥i c√≥ m·ªôt c√¥ng vi·ªác b√°n th·ªùi gian trong m·ªôt c·ª≠a h√†ng qu√† t·∫∑ng. N∆°i ƒë√¢y b√°n thi·ªáp, qu√† sinh nh·∫≠t v√† c≈©ng c√≥ nh·ªØng m√≥n qu√† cho c√°c d·ªãp nh∆∞ Ng√†y c·ªßa M·∫π. T√¥i ƒë√£ l√†m vi·ªác ·ªü ƒë√≥ ƒë∆∞·ª£c hai nƒÉm v√† c√≥ m·ªëi quan h·ªá r·∫•t t·ªët v·ªõi c√°c nh√¢n vi√™n kh√°c. T√¥i l√†m vi·ªác v√†o c√°c ng√†y th·ª© B·∫£y, nh∆∞ng v√†o k·ª≥ ngh·ªâ h√® t√¥i c≈©ng l√†m th√™m m·ªôt v√†i ng√†y trong tu·∫ßn n·ªØa. ƒê√¥i khi c√≥ nh·ªØng ng∆∞·ªùi h·ªèi n√™n mua g√¨ cho gia ƒë√¨nh h·ªç ‚Äì t√¥i r·∫•t th√≠ch ƒë∆∞a ra √Ω t∆∞·ªüng cho h·ªç. ƒê√≥ l√† m·ªôt c√¥ng vi·ªác tuy·ªát v·ªùi!</div>
            </div>

            <div class="glossary-wrapper">
                <h3 class="glossary-title">üî• Job Vocabulary (A2-B2)</h3>
                <table>
                    <thead><tr><th>T·ª´ v·ª±ng</th><th>Lo·∫°i t·ª´</th><th>Nghƒ©a Ti·∫øng Vi·ªát</th></tr></thead>
                    <tbody>
                        <tr><td>1. Part-time</td><td>Adjective</td><td>B√°n th·ªùi gian</td></tr>
                        <tr><td>2. Customer</td><td>Noun</td><td>Kh√°ch h√†ng</td></tr>
                        <tr><td>3. Local</td><td>Adjective</td><td>(Thu·ªôc) ƒê·ªãa ph∆∞∆°ng</td></tr>
                        <tr><td>4. Delicious</td><td>Adjective</td><td>Th∆°m ngon, tuy·ªát v·ªùi</td></tr>
                        <tr><td>5. Gift shop</td><td>Noun Phrase</td><td>C·ª≠a h√†ng qu√† t·∫∑ng / l∆∞u ni·ªám</td></tr>
                        <tr><td>6. Staff</td><td>Noun</td><td>Nh√¢n vi√™n (n√≥i chung)</td></tr>
                        <tr><td>7. Get on well with</td><td>Phrasal Verb</td><td>H√≤a ƒë·ªìng, c√≥ quan h·ªá t·ªët v·ªõi...</td></tr>
                        <tr><td>8. Decision</td><td>Noun</td><td>S·ª± quy·∫øt ƒë·ªãnh</td></tr>
                        <tr><td>9. Field</td><td>Noun</td><td>Lƒ©nh v·ª±c (ng√†nh ngh·ªÅ)</td></tr>
                        <tr><td>10. Prefer</td><td>Verb</td><td>Th√≠ch ... h∆°n</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel right-panel">
            <div id="quiz-container"></div>
            <button class="btn-submit" onclick="submitQuiz()">üèÜ CH·ªêT ƒê√ÅP √ÅN! üèÜ</button>
        </div>
    </div>

    <div id="result-modal">
        <div class="modal-content">
            <h2 style="color: var(--primary); font-size: 2.5rem; margin-bottom: 20px;">T·ªîNG K·∫æT</h2>
            <div class="score-circle" id="final-score">0/7</div>
            <h3 id="feedback-msg" style="color: #2F3640; margin-bottom: 20px; font-size: 1.6rem; line-height: 1.5;"></h3>
            <button class="btn-action btn-start" onclick="location.reload()" style="width: 100%; font-size: 1.3rem; padding: 18px;">üîÑ L√ÄM L·∫†I B√ÄI</button>
        </div>
    </div>

    <script>
        // --- 1. QUIZ DATA CHU·∫®N K√àM GI·∫¢I TH√çCH SI√äU CHI TI·∫æT ---
        const quizData = [
            {
                id: 1, question: "1. Who wants to work in the same field later in life?",
                answer: "Helena",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ai mu·ªën l√†m vi·ªác trong c√πng m·ªôt lƒ©nh v·ª±c (c√πng ng√†nh) sau n√†y?</p>
                <p><strong>T·∫°i sao ch·ªçn Helena?</strong> ·ªû cu·ªëi ƒëo·∫°n 1, Helena n√≥i: <span class="highlight">"When I‚Äôm older, I‚Äôd like to have my own caf√©."</span> (Khi l·ªõn l√™n, t√¥i mu·ªën c√≥ qu√°n c√† ph√™ c·ªßa ri√™ng m√¨nh). Hi·ªán t·∫°i c√¥ ·∫•y ƒëang l√†m ·ªü qu√°n c√† ph√™, v√† t∆∞∆°ng lai c√¥ ·∫•y mu·ªën m·ªü qu√°n c√† ph√™ -> Ch√≠nh l√† "c√πng m·ªôt lƒ©nh v·ª±c" (same field).</p>`
            },
            {
                id: 2, question: "2. Who likes to have a lot to do at work?",
                answer: "Katja",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ai th√≠ch c√≥ nhi·ªÅu vi·ªác ƒë·ªÉ l√†m (b·∫≠n r·ªôn) t·∫°i n∆°i l√†m vi·ªác?</p>
                <p><strong>T·∫°i sao ch·ªçn Katja?</strong> ·ªû cu·ªëi ƒëo·∫°n 2, Katja chia s·∫ª: <span class="highlight">"It‚Äôs often very busy at work so the time goes quickly. I prefer it when I‚Äôm busy."</span> (C√¥ng vi·ªác th∆∞·ªùng r·∫•t b·∫≠n r·ªôn n√™n th·ªùi gian tr√¥i nhanh. T√¥i th√≠ch khi m√¨nh b·∫≠n r·ªôn h∆°n). "Have a lot to do" ƒë·ªìng nghƒ©a v·ªõi "busy".</p>`
            },
            {
                id: 3, question: "3. Who helps people make decisions at work?",
                answer: "Paula",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ai gi√∫p m·ªçi ng∆∞·ªùi ƒë∆∞a ra quy·∫øt ƒë·ªãnh t·∫°i n∆°i l√†m vi·ªác?</p>
                <p><strong>T·∫°i sao ch·ªçn Paula?</strong> Trong ƒëo·∫°n 3, Paula k·ªÉ: <span class="highlight">"We sometimes get people asking what to buy for their family ‚Äì I like giving them ideas."</span> (ƒê√¥i khi c√≥ ng∆∞·ªùi h·ªèi n√™n mua g√¨ cho gia ƒë√¨nh h·ªç ‚Äì t√¥i r·∫•t th√≠ch ƒë∆∞a ra √Ω t∆∞·ªüng cho h·ªç). ƒê∆∞a ra √Ω t∆∞·ªüng t∆∞ v·∫•n ch√≠nh l√† gi√∫p kh√°ch h√†ng "ƒë∆∞a ra quy·∫øt ƒë·ªãnh" (make decisions).</p>`
            },
            {
                id: 4, question: "4. Who works only at the weekend?",
                answer: "Helena",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ai CH·ªà l√†m vi·ªác v√†o cu·ªëi tu·∫ßn?</p>
                <p><strong>T·∫°i sao ch·ªçn Helena?</strong> Helena kh·∫≥ng ƒë·ªãnh c√¥ l√†m vi·ªác <span class="highlight">"every Saturday from 9.00 to 5.00"</span> (m·ªói th·ª© B·∫£y).<br>
                - T·∫°i sao Katja sai? Katja l√†m th√™m "two evenings a week" (2 bu·ªïi t·ªëi trong tu·∫ßn).<br>
                - T·∫°i sao Paula sai? Paula l√†m th√™m "on some days during the week" v√†o d·ªãp h√® (v√†i ng√†y trong tu·∫ßn).</p>`
            },
            {
                id: 5, question: "5. Who prefers to work on Saturdays?",
                answer: "Katja",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ai TH√çCH l√†m vi·ªác v√†o c√°c ng√†y th·ª© B·∫£y h∆°n?</p>
                <p><strong>T·∫°i sao ch·ªçn Katja?</strong> Katja n√≥i r√µ: <span class="highlight">"Saturdays are the best day for me to work"</span> (Th·ª© B·∫£y l√† ng√†y l√†m vi·ªác tuy·ªát nh·∫•t ƒë·ªëi v·ªõi t√¥i). "Best day" mang nghƒ©a t∆∞∆°ng ƒë·ªìng v·ªõi "prefers" (th√≠ch nh·∫•t/th√≠ch h∆°n).</p>`
            },
            {
                id: 6, question: "6. Who has worked in their job for the longest time?",
                answer: "Paula",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ai ƒë√£ l√†m c√¥ng vi·ªác c·ªßa m√¨nh trong kho·∫£ng th·ªùi gian l√¢u nh·∫•t?</p>
                <p><strong>Ph√¢n t√≠ch d·ªØ li·ªáu th·ªùi gian:</strong><br>
                - Helena: "for almost a year" (g·∫ßn 1 nƒÉm).<br>
                - Katja: "since last summer" (t·ª´ m√πa h√® nƒÉm ngo√°i).<br>
                - <strong>Paula:</strong> <span class="highlight">"I‚Äôve worked there for two years"</span> (T√¥i ƒë√£ l√†m vi·ªác ·ªü ƒë√≥ ƒë∆∞·ª£c 2 nƒÉm). V·∫≠y Paula l√† ng∆∞·ªùi l√†m l√¢u nh·∫•t!</p>`
            },
            {
                id: 7, question: "7. Who works more in the summer?",
                answer: "Paula",
                explanation: `<p><strong>D·ªãch c√¢u h·ªèi:</strong> Ai l√†m vi·ªác NHI·ªÄU H∆†N v√†o m√πa h√®?</p>
                <p><strong>T·∫°i sao ch·ªçn Paula?</strong> B√¨nh th∆∞·ªùng c√¥ ·∫•y l√†m th·ª© B·∫£y, nh∆∞ng ƒëo·∫°n 3 vi·∫øt: <span class="highlight">"but in the summer holidays I work on some days during the week as well."</span> (...nh∆∞ng v√†o k·ª≥ ngh·ªâ h√® t√¥i l√†m th√™m m·ªôt v√†i ng√†y trong tu·∫ßn N·ªÆA). Ch·ªØ "as well" ch·ª©ng t·ªè kh·ªëi l∆∞·ª£ng c√¥ng vi·ªác tƒÉng l√™n v√†o m√πa h√®.</p>`
            }
        ];

        let score = 0;
        let answeredQuestions = new Set();
        const baseOptions = ["Helena", "Katja", "Paula"];

        // Thu·∫≠t to√°n x√°o tr·ªôn ƒë√°p √°n ng·∫´u nhi√™n
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            quizData.forEach((q, index) => {
                const shuffledNames = shuffleArray([...baseOptions]);

                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `<div class="question-text">${q.question}</div>`;

                const optionsGrid = document.createElement('div');
                optionsGrid.className = 'options-grid';

                shuffledNames.forEach(name => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = name;
                    btn.onclick = () => handleAnswer(btn, name === q.answer, index, q.explanation, optionsGrid, q.answer);
                    optionsGrid.appendChild(btn);
                });
                card.appendChild(optionsGrid);

                // Box gi·∫£i th√≠ch (·∫©n ƒëi ban ƒë·∫ßu)
                const explBox = document.createElement('div');
                explBox.className = 'explanation-box';
                explBox.id = `expl-${index}`;
                explBox.innerHTML = `<h4>üí° T·∫°i sao l·∫°i ch·ªçn ${q.answer}?</h4>` + q.explanation;
                card.appendChild(explBox);

                container.appendChild(card);
            });
        }

        // --- 2. H·ªÜ TH·ªêNG √ÇM THANH Web Audio API ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;

        function playSound(type) {
            if (!audioCtx) audioCtx = new AudioContext();
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // Note C5
                osc.frequency.exponentialRampToValueAtTime(1046.50, audioCtx.currentTime + 0.15); // Note C6
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
                osc.start(); osc.stop(audioCtx.currentTime + 0.4);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(120, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.4, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        // X·ª≠ l√Ω khi ch·ªçn ƒë√°p √°n (B·∫•m ƒë√∫ng/sai ƒë·ªÅu ra gi·∫£i th√≠ch ngay)
        function handleAnswer(btn, isCorrect, qIndex, explanationHTML, grid, correctAnswer) {
            if (answeredQuestions.has(qIndex)) return;
            answeredQuestions.add(qIndex);

            const allBtns = grid.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true);

            document.getElementById(`expl-${qIndex}`).style.display = 'block';

            if (isCorrect) {
                btn.classList.add('correct');
                playSound('correct');
                fireConfetti();
                score++;
            } else {
                btn.classList.add('wrong');
                playSound('wrong');
                // T·ª± ƒë·ªông highlight ƒë√°p √°n ƒë√∫ng
                allBtns.forEach(b => {
                    if (b.innerText === correctAnswer) {
                        b.classList.add('correct');
                        b.style.opacity = '0.7';
                    }
                });
            }
        }

        // --- 3. B·ªò ƒê·∫æM TH·ªúI GIAN ---
        let timerInterval;
        let timeLeft = 600; // 10 ph√∫t
        let isRunning = false;

        function toggleTimer() {
            const btn = document.getElementById('btn-timer');
            if (isRunning) {
                clearInterval(timerInterval);
                btn.innerText = "‚ñ∂ TI·∫æP T·ª§C L√ÄM B√ÄI";
                btn.style.backgroundColor = "#FFA502";
            } else {
                btn.innerText = "‚è∏ T·∫†M D·ª™NG";
                btn.style.backgroundColor = "#FF4757";
                timerInterval = setInterval(() => {
                    timeLeft--;
                    let m = Math.floor(timeLeft / 60);
                    let s = timeLeft % 60;
                    document.getElementById('timer-display').innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert("‚è∞ ƒê√£ h·∫øt gi·ªù! B·∫°n v·∫´n c√≥ th·ªÉ l√†m ti·∫øp, nh∆∞ng h√£y c·ªë g·∫Øng ƒë·∫©y nhanh t·ªëc ƒë·ªô nh∆∞ thi th·∫≠t nh√©!");
                    }
                }, 1000);
            }
            isRunning = !isRunning;
        }

        function toggleTranslation(btn) {
            const div = btn.nextElementSibling;
            const isHidden = getComputedStyle(div).display === 'none';
            div.style.display = isHidden ? 'block' : 'none';
            btn.innerHTML = isHidden ? 'üôà ·∫®N B·∫¢N D·ªäCH' : 'üìñ B·∫¢N D·ªäCH ƒê·∫¶Y ƒê·ª¶';
        }

        // --- 4. T·ªîNG K·∫æT B√ÄI ---
        function submitQuiz() {
            if (answeredQuestions.size < quizData.length) {
                if(!confirm("B·∫°n ch∆∞a l√†m h·∫øt c√°c c√¢u h·ªèi. V·∫´n quy·∫øt ƒë·ªãnh n·ªôp b√†i ch·ª©?")) return;
            }
            clearInterval(timerInterval);
            
            const modal = document.getElementById('result-modal');
            document.getElementById('final-score').innerText = `${score}/7`;
            
            const msgObj = document.getElementById('feedback-msg');
            if (score === 7) {
                msgObj.innerText = "üèÜ TUY·ªÜT V·ªúI! K·ª∏ NƒÇNG SCANNING C·ª¶A B·∫†N ƒê·∫†T ƒêI·ªÇM TUY·ªÜT ƒê·ªêI!";
                for(let i=0; i<4; i++) setTimeout(fireConfetti, i*300);
            } else if (score >= 4) {
                msgObj.innerText = "‚ú® R·∫§T KH√Å! Nh·ªõ xem k·ªπ l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ kh·∫Øc ph·ª•c nh·ªØng l·ªói sai nh√©.";
                fireConfetti();
            } else {
                msgObj.innerText = "üí™ C·ªê L√äN! B√†i n√†y c√≥ nhi·ªÅu b·∫´y t·ª´ v·ª±ng, h√£y tra b·∫£ng Glossary b√™n d∆∞·ªõi v√† th·ª≠ l·∫°i nha!";
            }
            modal.style.display = 'flex';
        }

        // --- 5. HI·ªÜU ·ª®NG PH√ÅO GI·∫§Y CONFETTI ---
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];
        const colors = ['#FF6B6B', '#48DBFB', '#FFA502', '#1DD1A1'];

        function fireConfetti() {
            for(let i=0; i<80; i++) {
                particles.push({
                    x: canvas.width / 2, y: canvas.height / 2 + 100,
                    r: Math.random() * 8 + 4,
                    dx: (Math.random() - 0.5) * 20, dy: Math.random() * -20 - 5,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    tilt: Math.random() * 10 - 10, tiltAngleInc: (Math.random() * 0.07) + 0.05, tiltAngle: 0
                });
            }
            requestAnimationFrame(animateConfetti);
        }

        function animateConfetti() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach((p, i) => {
                p.tiltAngle += p.tiltAngleInc;
                p.y += (Math.cos(p.tiltAngle) + 1 + p.r / 2) / 2;
                p.x += Math.sin(p.tiltAngle) * 2;
                p.dy += 0.3; p.y += p.dy;
                ctx.beginPath(); ctx.lineWidth = p.r; ctx.strokeStyle = p.color;
                ctx.moveTo(p.x + p.tilt + p.r, p.y); ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r); ctx.stroke();
                if (p.y > canvas.height) particles.splice(i,1);
            });
            if(particles.length > 0) requestAnimationFrame(animateConfetti);
        }

        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
        window.onload = renderQuiz;
    </script>
</body>
</html>