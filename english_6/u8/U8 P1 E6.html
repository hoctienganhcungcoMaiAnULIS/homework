<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Test - Ms. Mai An ULIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #8854C0; /* T√≠m h·ªìng */
            --secondary: #00C9A7; /* Xanh ng·ªçc */
            --correct: #00D26A;
            --wrong: #FF4757;
            --bg-pattern: radial-gradient(#e5e5f7 1px, transparent 1px);
            --card-bg: #ffffff;
            --text-main: #2c3e50;
        }

        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f3f8;
            background-image: var(--bg-pattern);
            background-size: 20px 20px;
            margin: 0;
            padding: 20px;
            color: var(--text-main);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 20px;
            border-radius: 20px;
            color: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 800;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        .header p {
            margin: 5px 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
            font-family: 'Quicksand', sans-serif;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Section Styling */
        .section-title {
            background: #fff;
            padding: 15px 25px;
            border-radius: 15px;
            margin: 40px 0 20px;
            border-left: 8px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Reading Passage Style */
        .reading-passage {
            background: #fff;
            padding: 25px;
            border-radius: 15px;
            border: 2px dashed var(--secondary);
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.8;
            position: relative;
        }
        
        .reading-passage::before {
            content: "üìñ Reading Passage";
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--secondary);
            color: white;
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Glossary Table */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .glossary-table th {
            background: var(--primary);
            color: white;
            padding: 12px;
            text-align: left;
        }

        .glossary-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }

        .glossary-table tr:last-child td { border-bottom: none; }
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: bold;
            background: #eee;
            color: #555;
        }

        /* Question Card */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.05), 0 15px 20px rgba(0,0,0,0.05);
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-main);
        }
        
        /* Phonetic Underline Style */
        .question-text u {
            text-decoration: none;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 2px;
        }

        /* Image Simulation for Ex 11 */
        .sign-image {
            width: 120px;
            height: 120px;
            margin: 10px auto 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 4px solid #333;
            border-radius: 10px;
            font-size: 3rem;
            position: relative;
            background: white;
        }
        .sign-no-ball { border-color: #d00; color: #d00; flex-direction: column; font-size: 1rem; font-weight: bold; text-align: center;}
        .sign-no-ball span { font-size: 2.5rem; }
        .sign-swim { background: black; color: white; border: none; border-radius: 10px;}
        .sign-bike { border: 4px solid black; flex-direction: column; font-size: 1rem; font-weight: 800;}
        .sign-bike span { font-size: 2.5rem; }
        .sign-run { border: 5px solid #d00; border-radius: 50%; color: black; position: relative; width: 100px; height: 100px;}
        .sign-run::after { content: ''; position: absolute; width: 100%; height: 5px; background: #d00; transform: rotate(-45deg); }
        .sign-play { background: #FFD700; transform: rotate(45deg); width: 80px; height: 80px; border: 4px solid black; display:flex; justify-content:center; align-items:center;}
        .sign-play i { transform: rotate(-45deg); font-size: 2rem; color: black; font-style: normal;}

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        @media (max-width: 600px) {
            .options-grid { grid-template-columns: 1fr; }
        }

        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            border-bottom: 5px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            font-size: 1rem;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            color: #555;
            cursor: pointer;
            transition: all 0.1s;
            text-align: left;
            position: relative;
        }

        .option-btn:active {
            transform: translateY(3px);
            border-bottom-width: 2px;
        }

        .option-btn:hover:not(.disabled) {
            border-color: var(--primary);
            color: var(--primary);
            transform: scale(1.02);
        }

        .option-btn.correct {
            background: var(--correct);
            border-color: #00A653;
            border-bottom-color: #00A653;
            color: white;
        }

        .option-btn.wrong {
            background: var(--wrong);
            border-color: #D63031;
            border-bottom-color: #D63031;
            color: white;
            animation: shake 0.5s;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* Detailed Explanation Box */
        .explanation-box {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 5px solid var(--primary);
            animation: slideDown 0.3s ease-out;
        }

        .expl-title {
            font-weight: 800;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 10px;
        }

        .expl-content {
            font-size: 0.95rem;
            color: #444;
        }
        
        .expl-item { margin-bottom: 8px; }
        .expl-tag-correct { color: var(--correct); font-weight: bold; }
        .expl-tag-wrong { color: var(--wrong); font-weight: bold; }

        /* Floating Score */
        .score-board {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--primary);
            border: 2px solid var(--primary);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .submit-btn {
            display: block;
            width: 100%;
            padding: 20px;
            background: var(--secondary);
            color: white;
            font-size: 1.5rem;
            font-weight: 800;
            border: none;
            border-radius: 20px;
            margin-top: 40px;
            cursor: pointer;
            box-shadow: 0 10px 0 #009e82;
            transition: transform 0.1s;
        }
        
        .submit-btn:active {
            transform: translateY(5px);
            box-shadow: 0 5px 0 #009e82;
        }

        /* Animations */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

<div class="header">
    <h1>ENGLISH TEST</h1>
    <p>Gi√°o vi√™n: Ms. Mai An ULIS</p>
</div>

<div class="container" id="quiz-container">
    </div>

<div class="score-board">
    <span>üèÜ Score: <span id="score">0</span></span>
</div>

<audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3"></audio>

<script>
// --- DATA ---
const quizData = [
    // --- EXERCISE 11: SIGNS ---
    {
        section: "Exercise 11: Signs & Notices",
        type: "sign",
        questions: [
            {
                id: "11-1",
                signType: "no-ball",
                question: "What does the sign mean?",
                options: ["A. You can play football here.", "B. Ball games are not allowed.", "C. This place sells balls.", "D. A football match is on TV."],
                correct: 1, // B
                explanation: {
                    vn_q: "Bi·ªÉn b√°o n√†y c√≥ √Ω nghƒ©a g√¨?",
                    items: [
                        { opt: "A", vn: "B·∫°n c√≥ th·ªÉ ch∆°i b√≥ng ƒë√° ·ªü ƒë√¢y.", status: "wrong", reason: "Bi·ªÉn c·∫•m (v√≤ng tr√≤n ƒë·ªè g·∫°ch ch√©o) mang nghƒ©a ph·ªß ƒë·ªãnh." },
                        { opt: "B", vn: "C√°c tr√≤ ch∆°i v·ªõi b√≥ng kh√¥ng ƒë∆∞·ª£c ph√©p.", status: "correct", reason: "ƒê√¢y l√† bi·ªÉn b√°o 'No Ball Games' ti√™u chu·∫©n. H√¨nh qu·∫£ b√≥ng b·ªã g·∫°ch ch√©o." },
                        { opt: "C", vn: "N∆°i n√†y b√°n b√≥ng.", status: "wrong", reason: "Kh√¥ng c√≥ th√¥ng tin v·ªÅ mua b√°n." },
                        { opt: "D", vn: "M·ªôt tr·∫≠n b√≥ng ƒë√° ƒëang chi·∫øu tr√™n TV.", status: "wrong", reason: "Sai ng·ªØ c·∫£nh." }
                    ]
                }
            },
            {
                id: "11-2",
                signType: "swim",
                question: "What does the sign mean?",
                options: ["A. You can swim here.", "B. You must not swim here.", "C. This is a football field.", "D. The pool is closed."],
                correct: 0, // A
                explanation: {
                    vn_q: "Bi·ªÉn b√°o n√†y c√≥ √Ω nghƒ©a g√¨?",
                    items: [
                        { opt: "A", vn: "B·∫°n c√≥ th·ªÉ b∆°i ·ªü ƒë√¢y.", status: "correct", reason: "H√¨nh ·∫£nh ng∆∞·ªùi ƒëang b∆°i tr√™n n·ªÅn ƒëen/xanh l√† bi·ªÉn ch·ªâ d·∫´n khu v·ª±c ƒë∆∞·ª£c ph√©p b∆°i (Swimming Area)." },
                        { opt: "B", vn: "B·∫°n kh√¥ng ƒë∆∞·ª£c b∆°i ·ªü ƒë√¢y.", status: "wrong", reason: "N·∫øu c·∫•m s·∫Ω c√≥ g·∫°ch ch√©o ƒë·ªè." },
                        { opt: "C", vn: "ƒê√¢y l√† s√¢n b√≥ng ƒë√°.", status: "wrong", reason: "Sai h√¨nh ·∫£nh." },
                        { opt: "D", vn: "H·ªì b∆°i ƒë√£ ƒë√≥ng c·ª≠a.", status: "wrong", reason: "Kh√¥ng c√≥ ch·ªØ Closed." }
                    ]
                }
            },
            {
                id: "11-3",
                signType: "bike",
                question: "What does the sign mean?",
                options: ["A. Only bicycles are allowed.", "B. Cars can park here.", "C. This is a bus stop.", "D. People must walk here."],
                correct: 0, // A
                explanation: {
                    vn_q: "Bi·ªÉn b√°o n√†y c√≥ √Ω nghƒ©a g√¨?",
                    items: [
                        { opt: "A", vn: "Ch·ªâ xe ƒë·∫°p ƒë∆∞·ª£c ph√©p ƒëi v√†o.", status: "correct", reason: "H√¨nh xe ƒë·∫°p k√®m ch·ªØ ONLY (Duy nh·∫•t)." },
                        { opt: "B", vn: "√î t√¥ c√≥ th·ªÉ ƒë·ªó ·ªü ƒë√¢y.", status: "wrong", reason: "Sai ƒë·ªëi t∆∞·ª£ng." },
                        { opt: "C", vn: "ƒê√¢y l√† tr·∫°m xe bu√Ωt.", status: "wrong", reason: "Sai ƒë·ªëi t∆∞·ª£ng." },
                        { opt: "D", vn: "M·ªçi ng∆∞·ªùi ph·∫£i ƒëi b·ªô ·ªü ƒë√¢y.", status: "wrong", reason: "Bi·ªÉn d√†nh cho xe ƒë·∫°p." }
                    ]
                }
            },
            {
                id: "11-4",
                signType: "run",
                question: "What does the sign mean?",
                options: ["A. You should run fast.", "B. Running is not allowed.", "C. This is a race.", "D. You must play games here."],
                correct: 1, // B
                explanation: {
                    vn_q: "Bi·ªÉn b√°o n√†y c√≥ √Ω nghƒ©a g√¨?",
                    items: [
                        { opt: "A", vn: "B·∫°n n√™n ch·∫°y nhanh.", status: "wrong", reason: "Bi·ªÉn c·∫•m (v√≤ng tr√≤n ƒë·ªè g·∫°ch ch√©o)." },
                        { opt: "B", vn: "Ch·∫°y b·ªô kh√¥ng ƒë∆∞·ª£c ph√©p.", status: "correct", reason: "H√¨nh ng∆∞·ªùi ƒëang ch·∫°y b·ªã g·∫°ch ch√©o ƒë·ªè => C·∫•m ch·∫°y." },
                        { opt: "C", vn: "ƒê√¢y l√† m·ªôt cu·ªôc ƒëua.", status: "wrong", reason: "Sai √Ω nghƒ©a." },
                        { opt: "D", vn: "B·∫°n ph·∫£i ch∆°i tr√≤ ch∆°i ·ªü ƒë√¢y.", status: "wrong", reason: "Kh√¥ng li√™n quan." }
                    ]
                }
            },
            {
                id: "11-5",
                signType: "play",
                question: "What does the sign mean?",
                options: ["A. This is a place for children to play.", "B. You cannot play here.", "C. This is a classroom.", "D. Food is sold here."],
                correct: 0, // A
                explanation: {
                    vn_q: "Bi·ªÉn b√°o n√†y c√≥ √Ω nghƒ©a g√¨?",
                    items: [
                        { opt: "A", vn: "ƒê√¢y l√† n∆°i cho tr·∫ª em vui ch∆°i.", status: "correct", reason: "Bi·ªÉn b√°o h√¨nh thoi v√†ng c·∫£nh b√°o khu v·ª±c c√≥ tr·∫ª em/s√¢n ch∆°i (h√¨nh b·∫≠p b√™nh)." },
                        { opt: "B", vn: "B·∫°n kh√¥ng ƒë∆∞·ª£c ch∆°i ·ªü ƒë√¢y.", status: "wrong", reason: "ƒê√¢y kh√¥ng ph·∫£i bi·ªÉn c·∫•m." },
                        { opt: "C", vn: "ƒê√¢y l√† l·ªõp h·ªçc.", status: "wrong", reason: "H√¨nh ·∫£nh b·∫≠p b√™nh g·ª£i √Ω s√¢n ch∆°i." },
                        { opt: "D", vn: "ƒê·ªì ƒÉn ƒë∆∞·ª£c b√°n ·ªü ƒë√¢y.", status: "wrong", reason: "Kh√¥ng li√™n quan." }
                    ]
                }
            }
        ]
    },
    // --- EXERCISE 1: PRONUNCIATION ---
    {
        section: "Exercise 1: Pronunciation (Odd one out)",
        type: "phonetics",
        questions: [
            {
                id: "1-1",
                text: "A. g<u>a</u>me B. st<u>a</u>dium C. b<u>a</u>ll D. pl<u>a</u>yer",
                options: ["A. game", "B. stadium", "C. ball", "D. player"],
                correct: 2,
                explanation: {
                    vn_q: "Ch·ªçn t·ª´ c√≥ ph·∫ßn g·∫°ch ch√¢n ph√°t √¢m kh√°c.",
                    items: [
                        { opt: "A", vn: "/e…™/", status: "same", reason: "game" },
                        { opt: "B", vn: "/e…™/", status: "same", reason: "stadium" },
                        { opt: "C", vn: "/…îÀê/", status: "diff", reason: "ball (Kh√°c bi·ªát)" },
                        { opt: "D", vn: "/e…™/", status: "same", reason: "player" }
                    ]
                }
            },
            {
                id: "1-2",
                text: "A. <u>c</u>oach B. <u>c</u>atch C. <u>ch</u>eer D. <u>c</u>ycle",
                options: ["A. coach", "B. catch", "C. cheer", "D. cycle"],
                correct: 2,
                explanation: {
                    vn_q: "L∆∞u √Ω: ƒê·ªÅ b√†i n√†y ki·ªÉm tra √¢m ƒë·∫ßu. C v√† CH.",
                    items: [
                        { opt: "A", vn: "/k/", status: "same", reason: "coach" },
                        { opt: "B", vn: "/k/", status: "same", reason: "catch" },
                        { opt: "C", vn: "/t É/", status: "diff", reason: "cheer (√Çm 'ch' b·∫≠t h∆°i, kh√°c v·ªõi √¢m 'k' v√† 's'). N·∫øu x√©t theo ch·ªØ c√°i 'c' ƒë∆°n l·∫ª th√¨ Cycle (/s/) kh√°c Coach/Catch (/k/). Tuy nhi√™n Cheer l√† c·ª•m 'ch' r√µ r·ªát nh·∫•t." },
                        { opt: "D", vn: "/s/", status: "same", reason: "cycle (√Çm gi√≥)" }
                    ],
                    note: "ƒê√°p √°n C ƒë∆∞·ª£c ch·ªçn v√¨ l√† ph·ª• √¢m gh√©p /t É/ kh√°c bi·ªát ho√†n to√†n v·ªõi nh√≥m ch·ªØ c√°i ƒë∆°n."
                }
            },
            {
                id: "1-3",
                text: "A. <u>ch</u>ess B. mat<u>ch</u> C. <u>ch</u>ampion D. s<u>ch</u>ool",
                options: ["A. chess", "B. match", "C. champion", "D. school"],
                correct: 3,
                explanation: {
                    vn_q: "Ki·ªÉm tra ph√°t √¢m 'ch'.",
                    items: [
                        { opt: "A", vn: "/t É/", status: "same", reason: "chess" },
                        { opt: "B", vn: "/t É/", status: "same", reason: "match" },
                        { opt: "C", vn: "/t É/", status: "same", reason: "champion" },
                        { opt: "D", vn: "/k/", status: "diff", reason: "school (√Çm /k/)" }
                    ]
                }
            },
            {
                id: "1-4",
                text: "A. k<u>i</u>ck B. w<u>i</u>n C. b<u>i</u>ke D. sw<u>i</u>m",
                options: ["A. kick", "B. win", "C. bike", "D. swim"],
                correct: 2,
                explanation: {
                    vn_q: "Ki·ªÉm tra ph√°t √¢m nguy√™n √¢m 'i'.",
                    items: [
                        { opt: "A", vn: "/…™/", status: "same", reason: "kick" },
                        { opt: "B", vn: "/…™/", status: "same", reason: "win" },
                        { opt: "C", vn: "/a…™/", status: "diff", reason: "bike (√Çm /ai/)" },
                        { opt: "D", vn: "/…™/", status: "same", reason: "swim" }
                    ]
                }
            },
            {
                id: "1-5",
                text: "A. c<u>oa</u>ch B. g<u>oa</u>l C. b<u>oa</u>t D. br<u>oa</u>d",
                options: ["A. coach", "B. goal", "C. boat", "D. broad"],
                correct: 3,
                explanation: {
                    vn_q: "Ki·ªÉm tra ph√°t √¢m 'oa'.",
                    items: [
                        { opt: "A", vn: "/…ô ä/", status: "same", reason: "coach" },
                        { opt: "B", vn: "/…ô ä/", status: "same", reason: "goal" },
                        { opt: "C", vn: "/…ô ä/", status: "same", reason: "boat" },
                        { opt: "D", vn: "/…îÀê/", status: "diff", reason: "broad (√Çm o d√†i)" }
                    ]
                }
            },
            {
                id: "1-6",
                text: "A. heal<u>th</u>y B. <u>th</u>row C. <u>th</u>ink D. <u>th</u>at",
                options: ["A. healthy", "B. throw", "C. think", "D. that"],
                correct: 3,
                explanation: {
                    vn_q: "Ki·ªÉm tra ph√°t √¢m 'th'.",
                    items: [
                        { opt: "A", vn: "/Œ∏/", status: "same", reason: "healthy (th·ªù nh·∫π)" },
                        { opt: "B", vn: "/Œ∏/", status: "same", reason: "throw" },
                        { opt: "C", vn: "/Œ∏/", status: "same", reason: "think" },
                        { opt: "D", vn: "/√∞/", status: "diff", reason: "that (th·ªù n·∫∑ng/rung c·ªï)" }
                    ]
                }
            },
            {
                id: "1-7",
                text: "A. t<u>e</u>nnis B. m<u>e</u>dal C. t<u>ea</u>m D. r<u>e</u>feree",
                options: ["A. tennis", "B. medal", "C. team", "D. referee"],
                correct: 2,
                explanation: {
                    vn_q: "L∆∞u √Ω ph·∫ßn g·∫°ch ch√¢n t·ª´ 'team' l√† 'ea'.",
                    items: [
                        { opt: "A", vn: "/e/", status: "same", reason: "tennis" },
                        { opt: "B", vn: "/e/", status: "same", reason: "medal" },
                        { opt: "C", vn: "/iÀê/", status: "diff", reason: "team (√Çm i d√†i)" },
                        { opt: "D", vn: "/e/", status: "same", reason: "referee (√¢m ƒë·∫ßu)" }
                    ]
                }
            },
            {
                id: "1-8",
                text: "A. p<u>u</u>sh B. r<u>u</u>n C. j<u>u</u>mp D. cl<u>u</u>b",
                options: ["A. push", "B. run", "C. jump", "D. club"],
                correct: 0,
                explanation: {
                    vn_q: "Ki·ªÉm tra ph√°t √¢m 'u'.",
                    items: [
                        { opt: "A", vn: "/ ä/", status: "diff", reason: "push (u ng·∫Øn, gi·ªëng 'put')" },
                        { opt: "B", vn: "/ å/", status: "same", reason: "run (√°)" },
                        { opt: "C", vn: "/ å/", status: "same", reason: "jump" },
                        { opt: "D", vn: "/ å/", status: "same", reason: "club" }
                    ]
                }
            },
            {
                id: "1-9",
                text: "A. play<u>ed</u> B. watch<u>ed</u> C. help<u>ed</u> D. kick<u>ed</u>",
                options: ["A. played", "B. watched", "C. helped", "D. kicked"],
                correct: 0,
                explanation: {
                    vn_q: "Quy t·∫Øc ph√°t √¢m ƒëu√¥i -ed.",
                    items: [
                        { opt: "A", vn: "/d/", status: "diff", reason: "played (Sau nguy√™n √¢m/h·ªØu thanh -> /d/)" },
                        { opt: "B", vn: "/t/", status: "same", reason: "watched (Sau 'ch' -> /t/)" },
                        { opt: "C", vn: "/t/", status: "same", reason: "helped (Sau 'p' -> /t/)" },
                        { opt: "D", vn: "/t/", status: "same", reason: "kicked (Sau 'k' -> /t/)" }
                    ]
                }
            },
            {
                id: "1-10",
                text: "A. ra<u>c</u>e B. <u>c</u>ycle C. exer<u>c</u>ise D. skateboarder",
                options: ["A. race", "B. cycle", "C. exercise", "D. skateboarder"],
                correct: 3,
                explanation: {
                    vn_q: "Ki·ªÉm tra √¢m 'c' (s) so v·ªõi √¢m trong t·ª´ c√≤n l·∫°i.",
                    items: [
                        { opt: "A", vn: "/s/", status: "same", reason: "race" },
                        { opt: "B", vn: "/s/", status: "same", reason: "cycle" },
                        { opt: "C", vn: "/s/", status: "same", reason: "exercise" },
                        { opt: "D", vn: "/k/", status: "diff", reason: "skateboarder (ch·ª©a √¢m k, kh√¥ng c√≥ √¢m s nh∆∞ c√°c t·ª´ kia)" }
                    ]
                }
            }
        ]
    },
    // --- EXERCISE 2: STRESS ---
    {
        section: "Exercise 2: Stress (Tr·ªçng √¢m)",
        type: "stress",
        questions: [
            {
                id: "2-1",
                text: "A. football B. tennis C. swimming D. compete",
                options: ["A. football", "B. tennis", "C. swimming", "D. compete"],
                correct: 3,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'FOOT-ball'" },
                        { opt: "B", vn: "1", status: "same", reason: "'TEN-nis'" },
                        { opt: "C", vn: "1", status: "same", reason: "'SWIM-ming'" },
                        { opt: "D", vn: "2", status: "diff", reason: "com-'PETE'" }
                    ]
                }
            },
            {
                id: "2-2",
                text: "A. player B. winner C. defeat D. trainer",
                options: ["A. player", "B. winner", "C. defeat", "D. trainer"],
                correct: 2,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'PLAY-er'" },
                        { opt: "B", vn: "1", status: "same", reason: "'WIN-ner'" },
                        { opt: "C", vn: "2", status: "diff", reason: "de-'FEAT'" },
                        { opt: "D", vn: "1", status: "same", reason: "'TRAIN-er'" }
                    ]
                }
            },
            {
                id: "2-3",
                text: "A. hobby B. practice C. enjoy D. fitness",
                options: ["A. hobby", "B. practice", "C. enjoy", "D. fitness"],
                correct: 2,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'HOB-by'" },
                        { opt: "B", vn: "1", status: "same", reason: "'PRAC-tice'" },
                        { opt: "C", vn: "2", status: "diff", reason: "en-'JOY'" },
                        { opt: "D", vn: "1", status: "same", reason: "'FIT-ness'" }
                    ]
                }
            },
            {
                id: "2-4",
                text: "A. stadium B. basketball C. badminton D. referee",
                options: ["A. stadium", "B. basketball", "C. badminton", "D. referee"],
                correct: 3,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'STA-dium'" },
                        { opt: "B", vn: "1", status: "same", reason: "'BAS-ket-ball'" },
                        { opt: "C", vn: "1", status: "same", reason: "'BAD-min-ton'" },
                        { opt: "D", vn: "3", status: "diff", reason: "re-fe-'REE' (ƒêu√¥i -ee nh·∫≠n tr·ªçng √¢m)" }
                    ]
                }
            },
            {
                id: "2-5",
                text: "A. champion B. tournament C. athletic D. bicycle",
                options: ["A. champion", "B. tournament", "C. athletic", "D. bicycle"],
                correct: 2,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'CHAM-pion'" },
                        { opt: "B", vn: "1", status: "same", reason: "'TOUR-na-ment'" },
                        { opt: "C", vn: "2", status: "diff", reason: "ath-'LE-tic' (ƒêu√¥i -ic tr·ªçng √¢m r∆°i v√†o √¢m tr∆∞·ªõc n√≥)" },
                        { opt: "D", vn: "1", status: "same", reason: "'BI-cy-cle'" }
                    ]
                }
            },
            {
                id: "2-6",
                text: "A. medal B. trophy C. winner D. succeed",
                options: ["A. medal", "B. trophy", "C. winner", "D. succeed"],
                correct: 3,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'ME-dal'" },
                        { opt: "B", vn: "1", status: "same", reason: "'TRO-phy'" },
                        { opt: "C", vn: "1", status: "same", reason: "'WIN-ner'" },
                        { opt: "D", vn: "2", status: "diff", reason: "suc-'CEED' (ƒê·ªông t·ª´ 2 √¢m ti·∫øt)" }
                    ]
                }
            },
            {
                id: "2-7",
                text: "A. begin B. finish C. practise D. winning",
                options: ["A. begin", "B. finish", "C. practise", "D. winning"],
                correct: 0,
                explanation: {
                    items: [
                        { opt: "A", vn: "2", status: "diff", reason: "be-'GIN' (ƒê·ªông t·ª´ 2 √¢m ti·∫øt)" },
                        { opt: "B", vn: "1", status: "same", reason: "'FI-nish' (Ngo·∫°i l·ªá)" },
                        { opt: "C", vn: "1", status: "same", reason: "'PRAC-tise'" },
                        { opt: "D", vn: "1", status: "same", reason: "'WIN-ning'" }
                    ]
                }
            },
            {
                id: "2-8",
                text: "A. volleyball B. exercise C. equipment D. skateboarding",
                options: ["A. volleyball", "B. exercise", "C. equipment", "D. skateboarding"],
                correct: 2,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'VOL-ley-ball'" },
                        { opt: "B", vn: "1", status: "same", reason: "'EX-er-cise'" },
                        { opt: "C", vn: "2", status: "diff", reason: "e-'QUIP-ment'" },
                        { opt: "D", vn: "1", status: "same", reason: "'SKATE-board-ing'" }
                    ]
                }
            },
            {
                id: "2-9",
                text: "A. healthy B. active C. indoor D. result",
                options: ["A. healthy", "B. active", "C. indoor", "D. result"],
                correct: 3,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'HEAL-thy'" },
                        { opt: "B", vn: "1", status: "same", reason: "'AC-tive'" },
                        { opt: "C", vn: "1", status: "same", reason: "'IN-door'" },
                        { opt: "D", vn: "2", status: "diff", reason: "re-'SULT'" }
                    ]
                }
            },
            {
                id: "2-10",
                text: "A. racing B. skiing C. boxing D. parade",
                options: ["A. racing", "B. skiing", "C. boxing", "D. parade"],
                correct: 3,
                explanation: {
                    items: [
                        { opt: "A", vn: "1", status: "same", reason: "'RA-cing'" },
                        { opt: "B", vn: "1", status: "same", reason: "'SKII-ing'" },
                        { opt: "C", vn: "1", status: "same", reason: "'BOX-ing'" },
                        { opt: "D", vn: "2", status: "diff", reason: "pa-'RADE'" }
                    ]
                }
            }
        ]
    },
    // --- EXERCISE 12: READING GAP FILL 1 ---
    {
        section: "Exercise 12: Reading 1 - Family Sports",
        type: "reading",
        passage: `My family loves sports and games. Every weekend, we play together in the park near our house. It is very <b>(1) ______</b> for our health.<br><br>
        My father plays badminton <b>(2) ______</b> Saturday mornings. He is really good at it. My mother <b>(3) ______</b> swimming at the local pool. She goes there three times a week. My brother and I play football with our friends. There are <b>(4) ______</b> children in our neighborhood who love football too.<br><br>
        On rainy days, we stay home and play board games. We have chess, monopoly, and card games. Playing games together makes us happy. Sometimes we have <b>(5) ______</b> friendly competition to see who wins the most games. The winner gets to choose the next movie we watch!<br><br>
        Sports and games help my family stay healthy and close. We always have fun together!`,
        glossary: [
            { w: "Neighborhood", t: "noun", m: "Khu h√†ng x√≥m" },
            { w: "Monopoly", t: "noun", m: "C·ªù t·ª∑ ph√∫" },
            { w: "Competition", t: "noun", m: "Cu·ªôc thi ƒë·∫•u" },
            { w: "Healthy", t: "adj", m: "Kh·ªèe m·∫°nh" }
        ],
        questions: [
            {
                id: "12-1-1",
                text: "Question 1",
                options: ["A. good", "B. nice", "C. important", "D. helpful"],
                correct: 0,
                explanation: {
                    vn_q: "Ch·ªçn t·ª´ ƒëi·ªÅn v√†o ch·ªó tr·ªëng (1): It is very ___ for our health.",
                    items: [
                        { opt: "A", vn: "T·ªët", status: "correct", reason: "C·ª•m t·ª´ c·ªë ƒë·ªãnh: 'Good for health' (T·ªët cho s·ª©c kh·ªèe)." },
                        { opt: "B", vn: "T·ªët/ƒê·∫πp", status: "wrong", reason: "√çt d√πng 'nice for health'." },
                        { opt: "C", vn: "Quan tr·ªçng", status: "wrong", reason: "Th∆∞·ªùng d√πng 'important to'." },
                        { opt: "D", vn: "H·ªØu √≠ch", status: "wrong", reason: "Th∆∞·ªùng d√πng 'helpful to/in'." }
                    ]
                }
            },
            {
                id: "12-1-2",
                text: "Question 2",
                options: ["A. in", "B. on", "C. at", "D. for"],
                correct: 1,
                explanation: {
                    vn_q: "Ch·ªçn gi·ªõi t·ª´ cho '___ Saturday mornings'.",
                    items: [
                        { opt: "A", vn: "Trong", status: "wrong", reason: "In d√πng cho th√°ng/nƒÉm/bu·ªïi." },
                        { opt: "B", vn: "V√†o", status: "correct", reason: "D√πng 'On' tr∆∞·ªõc c√°c ng√†y trong tu·∫ßn ho·∫∑c bu·ªïi c·ªßa ng√†y c·ª• th·ªÉ (On Saturday mornings)." },
                        { opt: "C", vn: "T·∫°i", status: "wrong", reason: "At d√πng cho gi·ªù." },
                        { opt: "D", vn: "Cho", status: "wrong", reason: "Sai nghƒ©a." }
                    ]
                }
            },
            {
                id: "12-1-3",
                text: "Question 3",
                options: ["A. enjoy", "B. enjoying", "C. enjoys", "D. enjoyed"],
                correct: 2,
                explanation: {
                    vn_q: "Chia ƒë·ªông t·ª´: My mother (ng√¥i 3 s·ªë √≠t) ___ swimming.",
                    items: [
                        { opt: "A", vn: "Th√≠ch (nguy√™n th·ªÉ)", status: "wrong", reason: "Sai chia ng√¥i." },
                        { opt: "B", vn: "ƒêang th√≠ch", status: "wrong", reason: "Thi·∫øu tobe/Sai th√¨." },
                        { opt: "C", vn: "Th√≠ch (th√™m s)", status: "correct", reason: "Hi·ªán t·∫°i ƒë∆°n, ch·ªß ng·ªØ s·ªë √≠t (Mother) -> ƒê·ªông t·ª´ th√™m 's'." },
                        { opt: "D", vn: "ƒê√£ th√≠ch", status: "wrong", reason: "B√†i vƒÉn ƒëang k·ªÉ ·ªü hi·ªán t·∫°i." }
                    ]
                }
            },
            {
                id: "12-1-4",
                text: "Question 4",
                options: ["A. much", "B. little", "C. many", "D. any"],
                correct: 2,
                explanation: {
                    vn_q: "Ch·ªçn l∆∞·ª£ng t·ª´: There are ___ children.",
                    items: [
                        { opt: "A", vn: "Nhi·ªÅu (kh√¥ng ƒë·∫øm ƒë∆∞·ª£c)", status: "wrong", reason: "Children l√† danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu." },
                        { opt: "B", vn: "√çt", status: "wrong", reason: "Little d√πng cho kh√¥ng ƒë·∫øm ƒë∆∞·ª£c." },
                        { opt: "C", vn: "Nhi·ªÅu", status: "correct", reason: "Many + Danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë nhi·ªÅu (Children)." },
                        { opt: "D", vn: "B·∫•t k·ª≥", status: "wrong", reason: "Th∆∞·ªùng d√πng trong c√¢u ph·ªß ƒë·ªãnh/nghi v·∫•n." }
                    ]
                }
            },
            {
                id: "12-1-5",
                text: "Question 5",
                options: ["A. a", "B. an", "C. the", "D. some"],
                correct: 0,
                explanation: {
                    vn_q: "Ch·ªçn m·∫°o t·ª´: ...have ___ friendly competition.",
                    items: [
                        { opt: "A", vn: "M·ªôt", status: "correct", reason: "Competition ·ªü ƒë√¢y l√† danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë √≠t (m·ªôt cu·ªôc thi ƒë·∫•u), 'friendly' b·∫Øt ƒë·∫ßu b·∫±ng ph·ª• √¢m -> D√πng 'A'." },
                        { opt: "B", vn: "M·ªôt", status: "wrong", reason: "D√πng tr∆∞·ªõc nguy√™n √¢m." },
                        { opt: "C", vn: "·∫§y/ƒê√≥", status: "wrong", reason: "Ch∆∞a x√°c ƒë·ªãnh c·ª• th·ªÉ." },
                        { opt: "D", vn: "M·ªôt v√†i", status: "wrong", reason: "Competition ƒëang ·ªü s·ªë √≠t." }
                    ]
                }
            }
        ]
    },
    // --- EXERCISE 12: READING GAP FILL 2 ---
    {
        section: "Exercise 12: Reading 2 - My Favorite Sport",
        type: "reading",
        passage: `Playing basketball is my favorite sport, and it gives me great <b>(1) ______</b>. I joined the school basketball team when I was ten years old. My coach is <b>(2) ______</b> excellent teacher who helps us improve.<br><br>
        I practice basketball three times a week after school. We <b>(3) ______</b> play for two hours each time. Our coach teaches us different skills like shooting and passing. The game becomes <b>(4) ______</b> when all team members work together.<br><br>
        My parents always support me. They buy me <b>(5) ______</b> sports equipment when I need it. Last month, they got me new basketball shoes. I was so happy!<br><br>
        Our team won the school championship last year. It was amazing! Basketball teaches me teamwork and discipline. I want to play for the national team someday. My coach says I need to practice hard every day.`,
        glossary: [
            { w: "Discipline", t: "noun", m: "K·ª∑ lu·∫≠t" },
            { w: "Championship", t: "noun", m: "Gi·∫£i v√¥ ƒë·ªãch" },
            { w: "Improve", t: "verb", m: "C·∫£i thi·ªán/Ti·∫øn b·ªô" },
            { w: "Equipment", t: "noun", m: "D·ª•ng c·ª•/Thi·∫øt b·ªã" }
        ],
        questions: [
            {
                id: "12-2-1",
                text: "Question 1",
                options: ["A. energy", "B. energetic", "C. energize", "D. energetically"],
                correct: 0,
                explanation: {
                    vn_q: "Ch·ªçn t·ª´ lo·∫°i: gives me great ___ (mang l·∫°i nƒÉng l∆∞·ª£ng l·ªõn).",
                    items: [
                        { opt: "A", vn: "NƒÉng l∆∞·ª£ng (Danh t·ª´)", status: "correct", reason: "Sau t√≠nh t·ª´ 'great' c·∫ßn m·ªôt danh t·ª´." },
                        { opt: "B", vn: "Tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng (T√≠nh t·ª´)", status: "wrong", reason: "Sai t·ª´ lo·∫°i." },
                        { opt: "C", vn: "Ti·∫øp nƒÉng l∆∞·ª£ng (ƒê·ªông t·ª´)", status: "wrong", reason: "Sai t·ª´ lo·∫°i." },
                        { opt: "D", vn: "M·ªôt c√°ch m·∫°nh m·∫Ω (Tr·∫°ng t·ª´)", status: "wrong", reason: "Sai t·ª´ lo·∫°i." }
                    ]
                }
            },
            {
                id: "12-2-2",
                text: "Question 2",
                options: ["A. a", "B. an", "C. the", "D. no article"],
                correct: 1,
                explanation: {
                    vn_q: "Ch·ªçn m·∫°o t·ª´: ...is ___ excellent teacher.",
                    items: [
                        { opt: "A", vn: "M·ªôt", status: "wrong", reason: "Excellent b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m 'E'." },
                        { opt: "B", vn: "M·ªôt", status: "correct", reason: "D√πng 'An' tr∆∞·ªõc t√≠nh t·ª´ b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m (Excellent)." },
                        { opt: "C", vn: "·∫§y/ƒê√≥", status: "wrong", reason: "L·∫ßn ƒë·∫ßu nh·∫Øc ƒë·∫øn danh hi·ªáu gi√°o vi√™n." },
                        { opt: "D", vn: "Kh√¥ng m·∫°o t·ª´", status: "wrong", reason: "Teacher l√† danh t·ª´ ƒë·∫øm ƒë∆∞·ª£c s·ªë √≠t, b·∫Øt bu·ªôc c√≥ m·∫°o t·ª´." }
                    ]
                }
            },
            {
                id: "12-2-3",
                text: "Question 3",
                options: ["A. never", "B. rarely", "C. usually", "D. couldn't"],
                correct: 2,
                explanation: {
                    vn_q: "Ch·ªçn tr·∫°ng t·ª´ t·∫ßn su·∫•t: We ___ play for two hours.",
                    items: [
                        { opt: "A", vn: "Kh√¥ng bao gi·ªù", status: "wrong", reason: "M√¢u thu·∫´n v·ªõi vi·ªác t·∫≠p 3 l·∫ßn/tu·∫ßn." },
                        { opt: "B", vn: "Hi·∫øm khi", status: "wrong", reason: "M√¢u thu·∫´n ng·ªØ c·∫£nh." },
                        { opt: "C", vn: "Th∆∞·ªùng xuy√™n", status: "correct", reason: "H·ª£p l√Ω v·ªõi ng·ªØ c·∫£nh t·∫≠p luy·ªán ƒë·ªÅu ƒë·∫∑n." },
                        { opt: "D", vn: "Kh√¥ng th·ªÉ", status: "wrong", reason: "Sai ng·ªØ ph√°p/nghƒ©a." }
                    ]
                }
            },
            {
                id: "12-2-4",
                text: "Question 4",
                options: ["A. difficult", "B. boring", "C. exciting", "D. tired"],
                correct: 2,
                explanation: {
                    vn_q: "Ch·ªçn t√≠nh t·ª´: The game becomes ___ (Tr√≤ ch∆°i tr·ªü n√™n...).",
                    items: [
                        { opt: "A", vn: "Kh√≥ khƒÉn", status: "wrong", reason: "Kh√¥ng h·ª£p nghƒ©a t√≠ch c·ª±c 'work together'." },
                        { opt: "B", vn: "Nh√†m ch√°n", status: "wrong", reason: "Kh√¥ng h·ª£p ng·ªØ c·∫£nh." },
                        { opt: "C", vn: "H√†o h·ª©ng/Th√∫ v·ªã", status: "correct", reason: "Khi ƒë·ªìng ƒë·ªôi ph·ªëi h·ª£p, game s·∫Ω vui/th√∫ v·ªã h∆°n." },
                        { opt: "D", vn: "M·ªát m·ªèi", status: "wrong", reason: "Game kh√¥ng th·ªÉ 'm·ªát' (tired d√πng cho ng∆∞·ªùi), ph·∫£i d√πng Tiring n·∫øu mu·ªën n√≥i g√¢y m·ªát." }
                    ]
                }
            },
            {
                id: "12-2-5",
                text: "Question 5",
                options: ["A. a", "B. an", "C. any", "D. some"],
                correct: 3,
                explanation: {
                    vn_q: "Ch·ªçn l∆∞·ª£ng t·ª´: Buy me ___ sports equipment.",
                    items: [
                        { opt: "A", vn: "M·ªôt", status: "wrong", reason: "Equipment l√† danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c." },
                        { opt: "B", vn: "M·ªôt", status: "wrong", reason: "Nh∆∞ tr√™n." },
                        { opt: "C", vn: "B·∫•t k·ª≥", status: "wrong", reason: "Th∆∞·ªùng d√πng trong ph·ªß ƒë·ªãnh/nghi v·∫•n." },
                        { opt: "D", vn: "M·ªôt v√†i/M·ªôt √≠t", status: "correct", reason: "Some + Danh t·ª´ kh√¥ng ƒë·∫øm ƒë∆∞·ª£c trong c√¢u kh·∫≥ng ƒë·ªãnh." }
                    ]
                }
            }
        ]
    }
];

// --- APP LOGIC ---

let score = 0;
const container = document.getElementById('quiz-container');
const scoreDisplay = document.getElementById('score');
const correctSound = document.getElementById('sound-correct');
const wrongSound = document.getElementById('sound-wrong');

function renderQuiz() {
    quizData.forEach((section, sIndex) => {
        // Render Section Title
        const sectionTitle = document.createElement('div');
        sectionTitle.className = 'section-title';
        sectionTitle.innerHTML = `<span>üîñ</span> ${section.section}`;
        container.appendChild(sectionTitle);

        // Render Reading Passage if exists
        if (section.type === 'reading') {
            const passageBox = document.createElement('div');
            passageBox.className = 'reading-passage';
            passageBox.innerHTML = section.passage;
            container.appendChild(passageBox);
            
            // Render Glossary
            if(section.glossary) {
                const table = document.createElement('table');
                table.className = 'glossary-table';
                let rows = `<tr><th>Word</th><th>Type</th><th>Meaning</th></tr>`;
                section.glossary.forEach(word => {
                    rows += `<tr>
                        <td><strong>${word.w}</strong></td>
                        <td><span class="tag">${word.t}</span></td>
                        <td>${word.m}</td>
                    </tr>`;
                });
                table.innerHTML = rows;
                container.appendChild(table);
            }
        }

        // Render Questions
        section.questions.forEach((q, qIndex) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${q.id}`;

            // Image for Sign questions
            let imageHTML = '';
            if (section.type === 'sign') {
                if (q.signType === 'no-ball') imageHTML = `<div class="sign-image sign-no-ball"><span>‚öΩ</span>NO BALL<br>GAMES</div>`;
                if (q.signType === 'swim') imageHTML = `<div class="sign-image sign-swim">üèä</div>`;
                if (q.signType === 'bike') imageHTML = `<div class="sign-image sign-bike">üö≤<span>ONLY</span></div>`;
                if (q.signType === 'run') imageHTML = `<div class="sign-image sign-run">üèÉ</div>`;
                if (q.signType === 'play') imageHTML = `<div class="sign-image sign-play"><i>üèÑ</i></div>`;
            }

            const qText = q.text || q.question; // Handle different text keys

            card.innerHTML = `
                ${imageHTML}
                <div class="question-text">${sIndex + 1}.${qIndex + 1}. ${qText}</div>
                <div class="options-grid" id="opts-${q.id}">
                    ${q.options.map((opt, i) => `
                        <button class="option-btn" onclick="checkAnswer('${q.id}', ${i}, ${q.correct})">${opt}</button>
                    `).join('')}
                </div>
                <div class="explanation-box" id="expl-${q.id}">
                    <div class="expl-title">üë©‚Äçüè´ C√¥ Mai An gi·∫£i th√≠ch:</div>
                    <div class="expl-content">
                        <p><strong>D·ªãch:</strong> ${q.explanation.vn_q}</p>
                        ${q.explanation.items.map(item => `
                            <div class="expl-item">
                                <span class="${item.status === 'correct' ? 'expl-tag-correct' : 'expl-tag-wrong'}">
                                    ${item.status === 'correct' ? '‚úî ƒê√öNG:' : '‚úñ SAI:'}
                                </span> 
                                <strong>${item.opt}</strong> (${item.vn}) - ${item.reason}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            container.appendChild(card);
        });
    });

    // Add Submit Button at the end
    const submitBtn = document.createElement('button');
    submitBtn.className = 'submit-btn';
    submitBtn.innerText = 'N·ªòP B√ÄI (SUBMIT)';
    submitBtn.onclick = finishQuiz;
    container.appendChild(submitBtn);
}

function checkAnswer(qId, selectedIndex, correctIndex) {
    const optsDiv = document.getElementById(`opts-${qId}`);
    const buttons = optsDiv.getElementsByClassName('option-btn');
    const explDiv = document.getElementById(`expl-${qId}`);

    // Prevent re-clicking
    if (optsDiv.getAttribute('data-answered')) return;
    optsDiv.setAttribute('data-answered', 'true');

    // Visual Feedback
    if (selectedIndex === correctIndex) {
        buttons[selectedIndex].classList.add('correct');
        score += 10;
        scoreDisplay.innerText = score;
        scoreDisplay.parentElement.style.transform = 'scale(1.2)';
        setTimeout(() => scoreDisplay.parentElement.style.transform = 'scale(1)', 200);
        triggerConfetti();
        playSound('correct');
    } else {
        buttons[selectedIndex].classList.add('wrong');
        buttons[correctIndex].classList.add('correct'); // Show correct one
        playSound('wrong');
    }

    // Disable all buttons
    Array.from(buttons).forEach(btn => btn.classList.add('disabled'));

    // Show Explanation
    explDiv.style.display = 'block';
}

function playSound(type) {
    if(type === 'correct') {
        correctSound.currentTime = 0;
        correctSound.play().catch(e => console.log('Audio blocked'));
    } else {
        wrongSound.currentTime = 0;
        wrongSound.play().catch(e => console.log('Audio blocked'));
    }
}

function triggerConfetti() {
    confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 },
        colors: ['#8854C0', '#00C9A7', '#FFD700']
    });
}

function finishQuiz() {
    const totalQuestions = document.querySelectorAll('.card').length;
    const finalScore = score;
    const maxScore = totalQuestions * 10;
    
    let message = "";
    if (finalScore === maxScore) message = "Xu·∫•t s·∫Øc! C√¥ Mai An r·∫•t t·ª± h√†o v·ªÅ em! üåü";
    else if (finalScore > maxScore * 0.7) message = "L√†m t·ªët l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! üí™";
    else message = "ƒê·ª´ng bu·ªìn nh√©! H√£y xem l·∫°i ph·∫ßn gi·∫£i th√≠ch ƒë·ªÉ ti·∫øn b·ªô h∆°n! ‚ù§";

    alert(`T·ªîNG K·∫æT:\nƒêi·ªÉm s·ªë: ${finalScore}/${maxScore}\n\n${message}`);
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Start
renderQuiz();

</script>
</body>
</html>