<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 12 – Career Choices | Test 02 - Ms Mai An ULIS</title>
    <style>
        :root {
            --primary: #0056b3;
            --secondary: #eef4fa;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --text: #333;
            --white: #fff;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        * { box-sizing: border-box; }
        body {
            font-family: var(--font-main);
            background-color: #f4f7f6;
            color: var(--text);
            margin: 0;
            padding-bottom: 80px; /* Space for footer */
        }

        /* HEADER */
        header {
            background: var(--primary);
            color: var(--white);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow);
        }
        header h1 { margin: 0; font-size: 1.5rem; }
        header h2 { margin: 5px 0 0; font-size: 1rem; font-weight: normal; opacity: 0.9; }

        /* CONTAINER */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* CARD STYLES */
        .card {
            background: var(--white);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--primary);
        }

        .question-text {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* PHONETICS */
        u { text-decoration: underline; text-underline-offset: 3px; font-weight: bold; }

        /* OPTIONS */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        @media (min-width: 600px) {
            .options-grid { grid-template-columns: 1fr 1fr; }
        }

        .option-btn {
            background: var(--secondary);
            border: 1px solid #ddd;
            padding: 12px 15px;
            border-radius: 6px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
        }
        .option-btn:hover { background: #dcebf9; }
        .option-btn.selected { background: var(--primary); color: var(--white); border-color: var(--primary); }
        
        /* FEEDBACK COLORS */
        .option-btn.correct { background: var(--success) !important; color: white !important; border-color: var(--success); }
        .option-btn.wrong { background: var(--danger) !important; color: white !important; border-color: var(--danger); opacity: 0.6; }
        .option-btn.missed { border: 2px dashed var(--success); background: #e8f5e9; }

        /* EXPLANATION */
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-top: 2px solid var(--warning);
            border-radius: 0 0 6px 6px;
            font-size: 0.95rem;
        }
        .explanation h4 { margin: 0 0 10px; color: var(--primary); display: flex; align-items: center; gap: 5px; }
        .exp-detail { margin-bottom: 8px; line-height: 1.6; }
        .tag { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-right: 5px; }
        .tag.noun { background: #e3f2fd; color: #0d47a1; }
        .tag.verb { background: #e8f5e9; color: #1b5e20; }
        .tag.adj { background: #fff3e0; color: #e65100; }
        .tag.adv { background: #f3e5f5; color: #4a148c; }

        /* DATA BOX (Reading/Gap Fill) */
        .data-box {
            background: #fff8e1;
            border: 1px solid #ffe0b2;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: 'Georgia', serif;
            line-height: 1.6;
            position: relative;
        }
        .data-box h3 { margin-top: 0; color: #d84315; font-size: 1rem; text-transform: uppercase; }
        
        /* GLOSSARY TABLE */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            font-size: 0.9rem;
            font-family: var(--font-main);
        }
        .glossary-table th, .glossary-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .glossary-table th { background: #0056b3; color: white; }

        /* GAP FILL LAYOUT */
        .gap-fill-container { display: flex; flex-direction: column; gap: 15px; }
        .gap-options-box { background: #eef4fa; padding: 10px; border-radius: 5px; font-weight: bold; border: 1px dashed var(--primary); }

        /* IMAGES CSS DRAWING */
        /* Q29 Sign */
        .sign-q29 {
            width: 150px; height: 200px;
            border: 3px solid #0033cc;
            border-radius: 15px;
            position: relative;
            background: white;
            margin: 10px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 20px;
        }
        .sign-q29::after { /* Blue bottom rect */
            content: ''; position: absolute; bottom: 30px; left: 10px; right: 10px;
            height: 50px; background: blue; border-radius: 5px;
        }
        .sign-circle {
            width: 80px; height: 80px;
            border: 2px dashed blue;
            border-radius: 50%;
            position: relative;
            display: flex; align-items: center; justify-content: center;
        }
        .id-card {
            width: 50px; height: 35px;
            border: 1px solid blue;
            border-radius: 3px;
            position: relative;
            background: #eef;
        }
        .id-card::before { content: ''; position: absolute; left: 5px; top: 5px; width: 15px; height: 15px; background: blue; border-radius: 50%; }
        .id-card::after { content: ''; position: absolute; left: 25px; top: 8px; width: 20px; height: 4px; background: blue; box-shadow: 0 6px 0 blue; }
        .red-slash {
            position: absolute; width: 80px; height: 6px; background: red;
            transform: rotate(-45deg); top: 37px;
        }

        /* Q30 Notice */
        .notice-q30 {
            background: #fffacd;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 3px 3px 5px rgba(0,0,0,0.2);
            text-align: center;
            font-weight: bold;
            color: #333;
            max-width: 400px;
            margin: 10px auto;
            font-family: sans-serif;
        }

        /* FOOTER & BUTTONS */
        .btn-check {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        .btn-check:hover { background: #004494; }

        .sticky-footer {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }
        .submit-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(40, 167, 69, 0.3);
        }
        .submit-btn:hover { background: #218838; transform: translateY(-2px); }
        .score-board { font-size: 1.2rem; font-weight: bold; color: var(--primary); }

        /* MODAL */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 10px; text-align: center;
            max-width: 90%; animation: slideIn 0.3s;
        }
        @keyframes slideIn { from {transform: translateY(-50px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }

    </style>
</head>
<body>

<header>
    <h1>UNIT 12 – CAREER CHOICES</h1>
    <h2>TEST 02 - Ms Mai An ULIS</h2>
</header>

<div class="container" id="quiz-container">
    </div>

<div class="sticky-footer">
    <div class="score-board" id="score-display">Score: 0/40</div>
    <button class="submit-btn" onclick="submitAll()">NỘP BÀI</button>
</div>

<div class="modal" id="resultModal">
    <div class="modal-content">
        <h2 style="color: var(--primary)">KẾT QUẢ BÀI LÀM</h2>
        <p style="font-size: 2rem; font-weight: bold;" id="final-score">0/40</p>
        <p id="feedback-msg">Hãy xem lại chi tiết giải thích bên dưới nhé!</p>
        <button class="btn-check" onclick="closeModal()">Xem chi tiết</button>
    </div>
</div>

<script>
    const quizData = [
        // PHONETICS
        {
            id: 1, type: 'mcq', section: 'Phonetics',
            q: 'Mark the letter A, B, C or D to indicate the word whose underlined part differs from the other three in pronunciation.',
            text: 'Question 1: A. b<u>a</u>rtender &nbsp;&nbsp; B. g<u>a</u>rment &nbsp;&nbsp; C. c<u>a</u>r &nbsp;&nbsp; D. ent<u>er</u>tain',
            options: ['A', 'B', 'C', 'D'],
            correct: 3, // D
            explain: {
                trans: 'Chọn từ có phần gạch chân phát âm khác.',
                opts: [
                    'A. bartender /bɑːr/: Người pha chế',
                    'B. garment /gɑːr/: Quần áo',
                    'C. car /kɑːr/: Ô tô',
                    'D. entertain /entər/: Giải trí'
                ],
                why: 'Đáp án D phần gạch chân (được hiểu là phần nguyên âm chính trong ngữ cảnh bài này thường là so sánh /ɑː/ và /ə/ hoặc /e/) nhưng rõ nhất là nhóm A, B, C đều chứa âm /ɑː/ (ar). Trong khi "entertain", âm tiết chứa "er" phát âm là /ə/ (schwa) hoặc nếu xét "en" thì là /e/. Nhóm A, B, C đồng nhất âm /ɑː/.',
                wrong: 'A, B, C đều phát âm là /ɑː/.'
            }
        },
        {
            id: 2, type: 'mcq', section: 'Phonetics',
            q: 'Mark the letter A, B, C or D...',
            text: 'Question 2: A. me<u>ch</u>anic &nbsp;&nbsp; B. <u>ch</u>oir &nbsp;&nbsp; C. <u>ch</u>urch &nbsp;&nbsp; D. <u>ch</u>emical',
            options: ['A', 'B', 'C', 'D'],
            correct: 2, // C
            explain: {
                trans: 'Chọn từ có phần "ch" phát âm khác.',
                opts: [
                    'A. mechanic /məˈkænɪk/: Thợ máy',
                    'B. choir /kwaɪər/: Dàn hợp xướng',
                    'C. church /tʃɜːrtʃ/: Nhà thờ',
                    'D. chemical /ˈkemɪkl/: Hóa chất'
                ],
                why: 'Đáp án C phát âm là /tʃ/ (âm chờ nhẹ).',
                wrong: 'Các đáp án A, B, D phần gạch chân "ch" đều phát âm là /k/.'
            }
        },
        // STRESS
        {
            id: 3, type: 'mcq', section: 'Stress',
            q: 'Mark the letter A, B, C or D to indicate the word that differs from the other three in the position of primary stress.',
            text: 'Question 3: A. worker &nbsp;&nbsp; B. cashier &nbsp;&nbsp; C. teacher &nbsp;&nbsp; D. worker',
            options: ['A', 'B', 'C', 'D'],
            correct: 1, // B
            explain: {
                trans: 'Chọn từ có trọng âm khác.',
                opts: [
                    'A. worker /ˈwɜːrkər/: Công nhân (âm 1)',
                    'B. cashier /kæˈʃɪr/: Thu ngân (âm 2)',
                    'C. teacher /ˈtiːtʃər/: Giáo viên (âm 1)',
                    'D. worker: (Trùng lặp) (âm 1)'
                ],
                why: 'Đáp án B trọng âm rơi vào âm tiết thứ 2. Quy tắc: Các từ kết thúc đuôi -ier thường nhận trọng âm.',
                wrong: 'Các đáp án còn lại trọng âm rơi vào âm tiết thứ 1.'
            }
        },
        {
            id: 4, type: 'mcq', section: 'Stress',
            q: 'Mark the letter A, B, C or D...',
            text: 'Question 4: A. particular &nbsp;&nbsp; B. vocational &nbsp;&nbsp; C. repetitive &nbsp;&nbsp; D. academic',
            options: ['A', 'B', 'C', 'D'],
            correct: 3, // D
            explain: {
                trans: 'Chọn từ có trọng âm khác.',
                opts: [
                    'A. particular /pərˈtɪkjələr/: Cụ thể (âm 2)',
                    'B. vocational /voʊˈkeɪʃənl/: Thuộc nghề nghiệp (âm 2)',
                    'C. repetitive /rɪˈpetətɪv/: Lặp đi lặp lại (âm 2)',
                    'D. academic /ˌækəˈdemɪk/: Thuộc học thuật (âm 3)'
                ],
                why: 'Đáp án D trọng âm rơi vào âm tiết thứ 3 (trước đuôi -ic).',
                wrong: 'Các đáp án A, B, C trọng âm đều rơi vào âm tiết thứ 2.'
            }
        },
        // GRAMMAR & VOCAB
        {
            id: 5, type: 'mcq', section: 'Grammar',
            q: 'Choose the correct answer.',
            text: 'Question 5: A: “ I don’t know whether I choose the right career for me.”<br>B: “ __________”',
            options: ['A. You’re welcome', 'B. Don’t worry', 'C. OK, I got it', 'D. I don’t think so'],
            correct: 1, // B
            explain: {
                trans: 'A: Tôi không biết liệu tôi có chọn đúng nghề cho mình không. - B: Đừng lo lắng.',
                opts: ['A. Không có chi (Đáp lại lời cảm ơn)', 'B. Đừng lo lắng (Trấn an)', 'C. OK, tôi hiểu rồi', 'D. Tôi không nghĩ vậy'],
                why: 'Đáp án B là lời đáp phù hợp nhất để trấn an người đang có sự băn khoăn, lo lắng.',
                wrong: 'A sai ngữ cảnh. C và D không mang tính chia sẻ hay khuyên nhủ phù hợp.'
            }
        },
        {
            id: 6, type: 'mcq', section: 'Grammar',
            q: 'Choose the correct answer.',
            text: 'Question 6: _________ footballers are well-paid, they have short careers.',
            options: ['A. Although', 'B. Despite', 'C. Because', 'D. In spite of'],
            correct: 0, // A
            explain: {
                trans: 'Mặc dù cầu thủ bóng đá được trả lương cao, họ lại có sự nghiệp ngắn ngủi.',
                opts: ['A. Mặc dù (+ mệnh đề)', 'B. Mặc dù (+ Noun/Ving)', 'C. Bởi vì', 'D. Mặc dù (+ Noun/Ving)'],
                why: 'Câu có chủ ngữ (footballers) và động từ (are) -> tạo thành mệnh đề. Ta dùng "Although".',
                wrong: 'Despite và In spite of đi với danh từ/V-ing. Because sai nghĩa (không phải quan hệ nguyên nhân).'
            }
        },
        {
            id: 7, type: 'mcq', section: 'Grammar',
            q: 'Choose the correct answer.',
            text: 'Question 7: She is __________ that all the ladies in the neighbourhood like the clothes she makes.',
            options: ['A. So skilful tailor', 'B. Such skilful tailor', 'C. such a skilful tailor', 'D. so a skilful tailor'],
            correct: 2, // C
            explain: {
                trans: 'Cô ấy là một thợ may khéo léo đến nỗi tất cả quý bà trong xóm đều thích quần áo cô may.',
                opts: ['(Cấu trúc Such... that)'],
                why: 'Cấu trúc: S + be + such + (a/an) + Adj + Noun + that + clause. "Tailor" là danh từ đếm được số ít nên cần mạo từ "a".',
                wrong: 'A, D sai cấu trúc (So... that dùng với Adj/Adv, nếu dùng với danh từ phải đảo). B thiếu mạo từ "a".'
            }
        },
        {
            id: 8, type: 'mcq', section: 'Vocab',
            q: 'Choose the correct answer.',
            text: 'Question 8: Mr Lam is a ______leader. He makes decisions quickly and reasonably.',
            options: ['A. Determined', 'B. strong-minded', 'C. firm', 'D. undecided'],
            correct: 0, // A (Or B/C depending on exact synonymy, but Decisive is best. Given options: Determined fits well)
            // Let's re-evaluate "decisive". "Determined" means having made a firm decision. 
            // Context: "Makes decisions quickly". The word "Decisive" (quyết đoán) matches best.
            // Options provided: Determined, strong-minded, firm, undecided. 
            // "Determined" (Kiên quyết) is the closest positive trait listed. "Decisive" would be perfect. 
            // However, looking at key often associated with this textbook unit: "Decisive" usually appears. 
            // If strictly choosing from A,B,C,D: "Determined" is acceptable. "Firm" is also close. 
            // Let's stick to A as standard Textbook answer for this context.
            // Wait, looking at typical Vietnamese tests, "decisive" is usually the target. If "decisive" isn't there, "determined" is best.
            explain: {
                trans: 'Ông Lâm là một lãnh đạo kiên định/quyết đoán. Ông ấy ra quyết định nhanh và hợp lý.',
                opts: ['A. Determined (adj): Kiên quyết, quyết tâm', 'B. Strong-minded (adj): Kiên định, cứng cỏi', 'C. Firm (adj): Rắn chắc, cương quyết', 'D. Undecided (adj): Do dự'],
                why: 'Người đưa ra quyết định nhanh chóng thường được mô tả là "decisive" (quyết đoán). Trong các đáp án, "Determined" (Kiên quyết) có nghĩa gần nhất với phẩm chất tích cực của lãnh đạo.',
                wrong: 'D sai nghĩa (do dự). B và C cũng có nét nghĩa đúng nhưng thường "Determined" đi với nỗ lực đạt mục tiêu.'
            }
        },
        {
            id: 9, type: 'mcq', section: 'Grammar',
            q: 'Choose the correct answer.',
            text: 'Question 9: Helen got the job ______she thought she couldn\'t get it.',
            options: ['A. Because', 'B. and', 'C. though', 'D. since'],
            correct: 2, // C
            explain: {
                trans: 'Helen đã nhận được công việc mặc dù cô ấy nghĩ mình không thể.',
                opts: ['A. Bởi vì', 'B. Và', 'C. Mặc dù', 'D. Bởi vì/Kể từ khi'],
                why: 'Hai vế câu mang nghĩa tương phản: Nhận được việc <-> Nghĩ không làm được. Dùng liên từ chỉ sự nhượng bộ "though".',
                wrong: 'A, D chỉ nguyên nhân. B chỉ sự bổ sung.'
            }
        },
        {
            id: 10, type: 'mcq', section: 'Vocab',
            q: 'Choose the correct answer.',
            text: 'Question 10: She had a successful ________ in education and retired at the age of 58.',
            options: ['A. Employment', 'B. occupation', 'C. work', 'D. career'],
            correct: 3, // D
            explain: {
                trans: 'Bà ấy có một sự nghiệp thành công trong ngành giáo dục và nghỉ hưu năm 58 tuổi.',
                opts: ['A. Việc làm', 'B. Nghề nghiệp (chung chung)', 'C. Công việc', 'D. Sự nghiệp (cả quá trình phấn đấu)'],
                why: '"Career" ám chỉ một quá trình làm việc lâu dài, có thăng tiến và gắn bó (từ khi làm đến khi nghỉ hưu).',
                wrong: 'Occupation chỉ nghề nghiệp nói chung. Work là danh từ không đếm được chỉ công việc.'
            }
        },
        {
            id: 11, type: 'mcq', section: 'Vocab',
            q: 'Choose the correct answer.',
            text: 'Question 11: Linda can do basic maths and use a cash register, so he can work as a _______.',
            options: ['A. Store cashier', 'B. maths teacher', 'C. garment worker', 'D. software engineer'],
            correct: 0, // A
            explain: {
                trans: 'Linda có thể làm toán cơ bản và dùng máy tính tiền, nên cậu ấy có thể làm thu ngân.',
                opts: ['A. Thu ngân cửa hàng', 'B. Giáo viên toán', 'C. Công nhân may', 'D. Kỹ sư phần mềm'],
                why: 'Từ khóa "cash register" (máy tính tiền) gắn liền với nghề Cashier.',
                wrong: 'Giáo viên toán cần trình độ cao hơn toán cơ bản. Kỹ sư phần mềm cần kỹ năng lập trình.'
            }
        },
        {
            id: 12, type: 'mcq', section: 'Grammar',
            q: 'Choose the correct answer.',
            text: 'Question 12: She has a massive passion _________ teaching children.',
            options: ['A. In', 'B. for', 'C. of', 'D. at'],
            correct: 1, // B
            explain: {
                trans: 'Cô ấy có niềm đam mê to lớn dành cho việc dạy trẻ.',
                opts: ['(Giới từ)'],
                why: 'Collocation: Passion for something (Đam mê cái gì).',
                wrong: 'Các giới từ khác không đi với Passion.'
            }
        },
        // CLOZE TEST (Bartender)
        {
            id: 13, type: 'mcq', section: 'Reading',
            q: 'Read the announcement and choose the best option.',
            text: 'Question 13: Become a bartender (13) ___ 4 weeks',
            options: ['A. for', 'B. in', 'C. about', 'D. at'],
            correct: 1, // B
            explain: {
                trans: 'Trở thành người pha chế trong vòng 4 tuần.',
                opts: ['A. for (khoảng)', 'B. in (trong vòng - chỉ thời hạn hoàn thành)', 'C. about', 'D. at'],
                why: 'Dùng "in" + khoảng thời gian để chỉ việc gì đó hoàn thành trong bao lâu (trong vòng 4 tuần là học xong).',
                wrong: '"For" chỉ hành động kéo dài liên tục.'
            }
        },
        {
            id: 14, type: 'mcq', section: 'Reading',
            q: 'Read the announcement and choose the best option.',
            text: 'Question 14: Result depends (14) ____ your effort.',
            options: ['A. on', 'B. in', 'C. upon', 'D. at'],
            correct: 0, // A (Upon is also correct but On is more common in signs, usually only 1 right. If both, On is standard B1). Wait, "Depend on" and "Depend upon" are same. Usually MCQ won't have both unless formality check. Let's pick A.
            explain: {
                trans: 'Kết quả phụ thuộc vào nỗ lực của bạn.',
                opts: ['A. on', 'B. in', 'C. upon (trang trọng hơn của on)', 'D. at'],
                why: 'Cấu trúc: Depend on (Phụ thuộc vào).',
                wrong: 'Các giới từ khác sai.'
            }
        },
        {
            id: 15, type: 'mcq', section: 'Reading',
            q: 'Read the announcement and choose the best option.',
            text: 'Question 15: IBC will (15) ______.',
            options: ['A. take you that', 'B. get you there', 'C. take it for you', 'D. get you for that'],
            correct: 1, // B
            explain: {
                trans: 'IBC sẽ đưa bạn đến đó (giúp bạn đạt được mục tiêu).',
                opts: ['A. (vô nghĩa)', 'B. get you there (giúp bạn đạt được vị trí/mục tiêu đó)', 'C. (sai ngữ pháp)', 'D. (sai ngữ pháp)'],
                why: 'Cụm từ "get someone there" nghĩa là giúp ai đó đạt được thành công/mục đích đã đề ra.',
                wrong: 'Các phương án khác sắp xếp từ không tạo thành nghĩa đúng.'
            }
        },
        {
            id: 16, type: 'mcq', section: 'Reading',
            q: 'Read the announcement and choose the best option.',
            text: 'Question 16: You’ll be first (16) _____the best jobs in the industry.',
            options: ['A. line in', 'B. line at', 'C. line for', 'D. for line'],
            correct: 0, // Idiom: First in line
            explain: {
                trans: 'Bạn sẽ là người đầu tiên xếp hàng (ưu tiên) cho những công việc tốt nhất.',
                opts: ['A. line in', 'B. line at', 'C. line for', 'D. for line'],
                why: 'Thành ngữ: "First in line for something" (Người đầu tiên được xét duyệt/ưu tiên cho cái gì). Cấu trúc ở đây có thể là "in line for".',
                wrong: 'Các giới từ khác không tạo thành idiom đúng.'
            }
        },
        // SENTENCE REARRANGEMENT
        {
            id: 17, type: 'mcq', section: 'Writing',
            q: 'Arrange the sentences to form a coherent letter.',
            text: `Question 17. 
            <br>(a) In the afternoon, we are going to try cooking in bamboo tubes
            <br>(b) Dear Jimmy, We are going to have the annual Spring Fair this Sunday. Can you join us?
            <br>(c) All the students are going to enjoy an enormous concert in the morning.
            <br>(d) Late at night, making Banh Chung must be the key activity for a foreigner like you.`,
            options: ['A. b-c-a-d', 'B. b-a-d-c', 'C. b-d-a-c', 'D. b-a-d-c'],
            correct: 0, // A
            explain: {
                trans: 'Sắp xếp thư mời hội chợ xuân.',
                opts: ['A. b (Mở đầu) - c (Sáng) - a (Chiều) - d (Đêm)'],
                why: 'Logic thời gian: Mở đầu thư (Dear Jimmy...) -> Hoạt động buổi sáng (Concert) -> Buổi chiều (Cooking bamboo) -> Đêm (Banh Chung).',
                wrong: 'Các trật tự khác sai logic thời gian.'
            }
        },
        {
            id: 18, type: 'mcq', section: 'Writing',
            q: 'Choose the sentence that most appropriately ends the text (in question 17).',
            text: 'Question 18: Choose the ending.',
            options: [
                'A. The weather is quite good now',
                'B. We have arranged everything, so you don’t have to bring anything.',
                'C. Good bye',
                'D. Cooking rice in bamboo tubes is so exciting and you shouldn’t miss it.'
            ],
            correct: 3, // D (Fits the persuasive tone of an invite describing activities) OR B (Polite closing).
            // Context: Usually closing sentence reinforces the invite. "You shouldn't miss it" is a strong closing for an informal invite letter in textbooks.
            explain: {
                trans: 'Chọn câu kết phù hợp.',
                opts: ['A. Thời tiết giờ khá đẹp', 'B. Chúng tôi đã lo mọi thứ...', 'C. Tạm biệt', 'D. Nấu cơm lam rất thú vị và bạn không nên bỏ lỡ.'],
                why: 'Đáp án D đóng vai trò như một lời chốt lại sự hấp dẫn của sự kiện để thuyết phục người nhận tham gia (you shouldn\'t miss it).',
                wrong: 'A lạc đề. C quá cụt lủn. B mang tính thông báo hậu cần hơn là câu kết cảm xúc.'
            }
        },
        // READING (Vietnam TEFL)
        {
            id: 19, type: 'mcq', section: 'Reading',
            q: 'Read the passage and fill in the blanks.',
            text: 'Question 19: ...English (19) ____ a foreign language.',
            options: ['A. Like', 'B. similar', 'C. as', 'D. for'],
            correct: 2, // C
            explain: {
                trans: 'TEFL: Dạy tiếng Anh như một ngoại ngữ.',
                why: 'Cụm cố định: English as a Foreign Language (EFL) / Teaching English as a Foreign Language (TEFL). "As" = với tư cách là.',
                wrong: 'Like (giống như) không dùng trong tên gọi học thuật này.'
            }
        },
        {
            id: 20, type: 'mcq', section: 'Reading',
            q: 'Read the passage and fill in the blanks.',
            text: 'Question 20: The site (20) ________that a foreign English teacher can earn...',
            options: ['A. guesses', 'B. estimates', 'C. judges', 'D. evaluates'],
            correct: 1, // B
            explain: {
                trans: 'Trang web ước tính rằng giáo viên nước ngoài có thể kiếm...',
                opts: ['A. đoán', 'B. ước tính (dựa trên số liệu)', 'C. phán xét', 'D. đánh giá'],
                why: 'Khi nói về con số, lương bổng, ta dùng "estimates" (ước tính).',
                wrong: 'Guess là đoán mò. Judge/Evaluate là đánh giá chất lượng.'
            }
        },
        {
            id: 21, type: 'mcq', section: 'Reading',
            q: 'Read the passage and fill in the blanks.',
            text: 'Question 21: ...Vietnam, (21) ______  the average annual income in 2016 was just 2,200 USD.',
            options: ['A. where', 'B. which', 'C. that', 'D. what'],
            correct: 0, // A
            explain: {
                trans: '...tại Việt Nam, nơi mà thu nhập bình quân năm chỉ là...',
                why: 'Dùng đại từ quan hệ "where" thay thế cho địa điểm "Vietnam" để giới thiệu mệnh đề chỉ nơi chốn.',
                wrong: 'Which cần giới từ (in which). That không dùng sau dấu phẩy.'
            }
        },
        {
            id: 22, type: 'mcq', section: 'Reading',
            q: 'Read the passage and fill in the blanks.',
            text: 'Question 22: They can (22)______ a job any time of year...',
            options: ['A. hunt', 'B. search', 'C. find', 'D. seek'],
            correct: 2, // C (Find a job). "Hunt" usually implies process. "Find" implies result. Context: "Can find a job" (capability to get one).
            explain: {
                trans: 'Họ có thể tìm được việc bất cứ lúc nào...',
                opts: ['A. săn', 'B. tìm kiếm (hành động)', 'C. tìm thấy/kiếm được (kết quả)', 'D. tìm kiếm'],
                why: 'Trong ngữ cảnh "có việc làm", ta dùng "find a job" (tìm được việc). "Hunt" hay "Seek" chỉ hành động tìm kiếm, chưa chắc có kết quả.',
                wrong: 'Search thường đi với for (search for a job).'
            }
        },
        {
            id: 23, type: 'mcq', section: 'Reading',
            q: 'Read the passage and fill in the blanks.',
            text: 'Question 23: Candidates only need to hold a bachelor\'s (23)_____',
            options: ['A. degree', 'B. qualification', 'C. diploma', 'D. level'],
            correct: 0, // A
            explain: {
                trans: 'Ứng viên chỉ cần có bằng cử nhân...',
                why: 'Collocation: Bachelor\'s degree (Bằng cử nhân đại học).',
                wrong: 'Diploma là chứng chỉ (thường ngắn hạn hơn). Qualification là trình độ chung.'
            }
        },
        {
            id: 24, type: 'mcq', section: 'Reading',
            q: 'Read the passage and fill in the blanks.',
            text: 'Question 24: ...demand high (24)_________.',
            options: ['A. capacity', 'B. competency', 'C. experience', 'D. ability'],
            correct: 1, // B (Competency/Proficiency). Wait, "Demand high experience"? Or "high competency"?
            // Context: "demand high _______... Foreign language centers... students as young as 3".
            // Actually, usually schools demand "high proficiency" or "competency".
            // Let's check common collocations. "Demand high competency" (năng lực cao).
            // "Demand high experience" is unnatural (usually "require extensive experience").
            // "Demand high ability" - unnatural.
            // Let's deduce. Teaching English requires competency (năng lực/trình độ).
            explain: {
                trans: 'Nhiều trường tiểu học yêu cầu năng lực/trình độ cao.',
                opts: ['A. sức chứa', 'B. năng lực/trình độ giỏi', 'C. kinh nghiệm', 'D. khả năng'],
                why: 'Competency (năng lực nghề nghiệp) là từ phù hợp nhất trong bối cảnh tuyển dụng giáo viên. (Lưu ý: Đôi khi đề dùng Proficiency, nhưng Competency cũng đúng).',
                wrong: 'Capacity thường là sức chứa. Experience đi với "much/extensive" chứ ít khi dùng "high experience".'
            }
        },
        // SENTENCE TRANSFORMATION
        {
            id: 25, type: 'mcq', section: 'Writing',
            q: 'Choose the sentence closest in meaning.',
            text: 'Question 25: “Let’s light a fire and cook the sausages over it,” said the children.',
            options: [
                'A. The children said that we lighted a fired and cooked the sausages over it.',
                'B. The children recommended them to light a fire and cook the sausages over it.',
                'C. The children suggested lighting a fire and cooking the sausages over it.',
                'D. The children wondered if they could light a fire and cook the sausages over it.'
            ],
            correct: 2, // C
            explain: {
                trans: 'Lũ trẻ nói: "Hãy đốt lửa và nướng xúc xích đi".',
                why: 'Cấu trúc "Let\'s + V" là câu đề nghị. Khi chuyển sang gián tiếp dùng: Suggest + V-ing.',
                wrong: 'A sai ngữ pháp (lùi thì không đúng logic đề nghị). B sai cấu trúc (Recommend + s.o + to V ít dùng, thường là recommend + Ving hoặc that clause). D sai nghĩa (tự hỏi).'
            }
        },
        {
            id: 26, type: 'mcq', section: 'Writing',
            q: 'Choose the sentence closest in meaning.',
            text: 'Question 26: Lido doesn’t earn enough money to buy his favourite car.',
            options: [
                'A. Buying his favourite car isn’t enough for Lido to earn money.',
                'B. Lido’s favourite car is too expensive for him to earn money.',
                'C. Earning enough money to buy Lido’s favourite car is his plan.',
                'D. Lido wishes he earned enough money to buy his favourite car.'
            ],
            correct: 3, // D (Wishes).
            // Actually, strictly meaning: "He doesn't earn enough" -> Fact.
            // D: "He wishes he earned enough" -> Wish. It implies the fact, but is it the closest paraphrase?
            // Usually: "The car is too expensive for him to buy" is best.
            // Let's look at B: "too expensive for him to earn money" -> SAI NGHĨA (quá đắt để kiếm tiền??).
            // So B is wrong.
            // A is nonsense. C adds "plan" (not in source).
            // D is the only logical sentence derived from the situation, implying a desire due to lack. Or it's a transformation drill: Fact -> Wish.
            explain: {
                trans: 'Lido không kiếm đủ tiền để mua chiếc xe yêu thích.',
                why: 'Đây là câu viết lại dùng cấu trúc "Wish" (Ước) cho hiện tại trái ngược với thực tế. "Lido ước cậu ấy kiếm đủ tiền...".',
                wrong: 'A, B vô nghĩa. B sai ở đoạn "to earn money" (đáng lẽ phải là "for him to buy").'
            }
        },
        {
            id: 27, type: 'mcq', section: 'Writing',
            q: 'Build a sentence from the cues.',
            text: 'Question 27: renewable energy/ gain/ popularity/ fossil fuels/ still/ dominate/ global energy use.',
            options: [
                'A. Renewable energy is gaining popularity because fossil fuels still dominate global energy use.',
                'B. When renewable energy is gaining popularity, fossil fuels will dominate global energy use.',
                'C. Renewable energy will gain popularity if fossil fuels still dominate global energy use.',
                'D. Although renewable energy is gaining popularity, fossil fuels still dominate global energy use'
            ],
            correct: 3, // D
            explain: {
                trans: 'Mặc dù năng lượng tái tạo đang trở nên phổ biến, nhiên liệu hóa thạch vẫn thống trị...',
                why: 'Hai vế tương phản: Phổ biến (tốt) nhưng Vẫn thống trị (thực tế cũ). Dùng "Although" là hợp lý nhất.',
                wrong: 'A dùng "Because" (nguyên nhân) là sai logic. B, C sai nghĩa.'
            }
        },
        {
            id: 28, type: 'mcq', section: 'Writing',
            q: 'Build a sentence from the cues.',
            text: 'Question 28: Minh/ couldn’t enter/ conference hall/ he forgot/ student card.',
            options: [
                'A. Minh couldn’t enter the conference hall because he forgot his student card',
                'B. Minh couldn’t enter the conference hall because of he forgot this student card.',
                'C. Minh couldn’t enter the conference hall due to he forgot student card.',
                'D. Minh couldn\'t enter the conference hall although he forgot his student card.'
            ],
            correct: 0, // A
            explain: {
                trans: 'Minh không thể vào hội trường vì cậu ấy quên thẻ sinh viên.',
                why: 'Cấu trúc chỉ nguyên nhân: Because + Clause (S + V).',
                wrong: 'B sai vì "Because of" + Noun/Ving. C sai vì "Due to" + Noun/Ving. D sai từ nối "Although" (mặc dù).'
            }
        },
        // IMAGES
        {
            id: 29, type: 'mcq', section: 'Signs',
            q: 'What does the sign say?',
            text: `Question 29. 
            <div class="sign-q29">
                <div class="sign-circle">
                    <div class="id-card"></div>
                    <div class="red-slash"></div>
                </div>
            </div>`,
            options: [
                'A. Everyone can enter the area freely without needing a pass.',
                'B. You can only enter this area if you have a pass or permission.',
                'C. You do not need a pass to enter this area; it is open to all',
                'D. Having a pass is not necessary; entry is allowed without one.'
            ],
            correct: 1, // B
            explain: {
                trans: 'Biển báo nói gì?',
                opts: ['A, C, D: Không cần thẻ cũng vào được (vào tự do).', 'B: Chỉ vào được nếu có thẻ/giấy phép.'],
                why: 'Phân tích logic trắc nghiệm: Các đáp án A, C, D có nghĩa tương đương nhau (Free entry/No pass needed). Trong 4 đáp án chỉ có 1 đúng, nên đáp án khác biệt nhất (B) thường là đáp án đúng. Về mặt ý nghĩa biển báo: Hình tròn đỏ gạch chéo thường là "Cấm" hoặc "Hạn chế". Ở đây ám chỉ khu vực bị kiểm soát (Restricted Area) hoặc "No Entry without Pass".',
                wrong: 'A, C, D đồng nghĩa nên nếu 1 cái đúng thì cả 3 cùng đúng -> Vô lý.'
            }
        },
        {
            id: 30, type: 'mcq', section: 'Signs',
            q: 'What does the notice say?',
            text: `Question 30.
            <div class="notice-q30">
                "The dining area is closed for setup. It will be open after 1 PM"
            </div>`,
            options: [
                'A. The dining area only opens after 1 PM',
                'B. The dining area will be closed for preparation. Please eat within 1 hour',
                'C. You can eat within 1 hour while we finish preparing',
                'D. The dining area is closed for setup and will open after 1 PM'
            ],
            correct: 3, // D
            explain: {
                trans: 'Thông báo: Khu vực ăn uống đóng cửa để sắp xếp. Nó sẽ mở sau 1 giờ chiều.',
                why: 'Đáp án D thuật lại đầy đủ và chính xác nhất nội dung thông báo gốc.',
                wrong: 'A thiếu thông tin lý do. B và C sai thông tin (ăn trong vòng 1 giờ).'
            }
        },
        // READING (Cover Letter)
        {
            id: 31, type: 'mcq', section: 'Reading',
            q: 'Read the passage about Cover Letters and answer.',
            text: 'Question 31: What is the main idea of the passage?',
            options: [
                'A. The importance of cover letter in job applications',
                'B. The role of recruiters in the hiring process',
                'C. The benefits of including a resume in a job search',
                'D. The study conducted by Zippia on cover letter usage.'
            ],
            correct: 0, // A
            explain: {
                trans: 'Ý chính của đoạn văn là gì? -> Tầm quan trọng của thư xin việc.',
                why: 'Bài đọc thảo luận việc nhà tuyển dụng vẫn coi trọng cover letter, nó giúp bạn nổi bật, và giải thích các khoảng trống trong hồ sơ.',
                wrong: 'B, C, D chỉ là các chi tiết nhỏ hoặc không phải trọng tâm.'
            }
        },
        {
            id: 32, type: 'mcq', section: 'Reading',
            q: 'Read the passage and answer.',
            text: 'Question 32: According to the 2023 study, _________of the employers think cover letter are important.',
            options: ['A. Two thirds', 'B. nearly half', 'C. a fourth', 'D. nearly all'],
            correct: 2, // C
            explain: {
                trans: 'Theo nghiên cứu 2023, bao nhiêu nhà tuyển dụng nghĩ thư xin việc quan trọng?',
                why: 'Dẫn chứng: "more than a fourth (26 %) of employers ‘always read cover letters’ and think they’re an important factor". 26% xấp xỉ 1/4 (a fourth).',
                wrong: 'A, B, D sai số liệu.'
            }
        },
        {
            id: 33, type: 'mcq', section: 'Reading',
            q: 'Read the passage and answer.',
            text: 'Question 33: According to the passage, not including a cover letter could potentially result in _______.',
            options: [
                'A. Improving your chances of getting a job',
                'B. Making your application stand out',
                'C. Getting your application rejected',
                'D. Addressing potential biases'
            ],
            correct: 2, // C
            explain: {
                trans: 'Không gửi kèm thư xin việc có thể dẫn đến...',
                why: 'Dẫn chứng: "almost half (45%) said that not including a cover letter could get your application rejected."',
                wrong: 'A, B, D là lợi ích của việc CÓ gửi thư, không phải hậu quả của việc KHÔNG gửi.'
            }
        },
        {
            id: 34, type: 'mcq', section: 'Reading',
            q: 'Read the passage and answer.',
            text: 'Question 34: The word "divisive" in the passage can be replaced with ________.',
            options: ['A. Positive', 'B. unimportant', 'C. controversial', 'D. spectacular'],
            correct: 2, // C
            explain: {
                trans: 'Từ "divisive" (gây chia rẽ/tranh cãi) có thể thay thế bằng...',
                opts: ['A. Tích cực', 'B. Không quan trọng', 'C. Gây tranh cãi', 'D. Hùng vĩ'],
                why: 'Divisive nghĩa là gây ra sự bất đồng quan điểm = Controversial.',
                wrong: 'Các từ còn lại sai nghĩa.'
            }
        },
        {
            id: 35, type: 'mcq', section: 'Reading',
            q: 'Read the passage and answer.',
            text: 'Question 35: The phrase “stand out from the crowd” is CLOSEST in meaning to ____',
            options: ['A. Blend in', 'B. remain unnoticed', 'C. Follow others', 'D. Be different'],
            correct: 3, // D
            explain: {
                trans: 'Cụm từ "stand out from the crowd" (nổi bật giữa đám đông) nghĩa gần nhất với...',
                opts: ['A. Hòa lẫn vào', 'B. Không ai chú ý', 'C. Theo người khác', 'D. Khác biệt/Nổi bật'],
                why: 'Stand out = Be different/distinguishable.',
                wrong: 'A, B, C đều mang nghĩa trái ngược (mờ nhạt, giống hệt).'
            }
        },
        {
            id: 36, type: 'mcq', section: 'Reading',
            q: 'Read the passage and answer.',
            text: 'Question 36: Why is it recommended to include a cover letter in most cases?',
            options: [
                'A. To highlight your unique skills and personality.',
                'B. To make you qualified and professional',
                'C. To make the job search easier and less time-consuming',
                'D. To improve your qualifications compared to other candidates'
            ],
            correct: 0, // A
            explain: {
                trans: 'Tại sao nên gửi thư xin việc?',
                why: 'Dẫn chứng: "a cover letter allows you to highlight your personality and special skills."',
                wrong: 'C sai (viết thư tốn công hơn). B và D không chính xác hoàn toàn (thư không làm tăng bằng cấp/qualification của bạn, chỉ giúp bạn show ra thôi).'
            }
        },
        // GAP FILL (Mature Students)
        {
            id: 37, type: 'gapfill', section: 'GapFill',
            q: 'Choose the correct phrase to fill in the blanks.',
            text: 'Question 37',
            options: ['A', 'B', 'C', 'D'],
            correct: 3, // D
            explain: {
                trans: 'Sự phát triển của việc học mở... (37) đã làm tăng cơ hội cho nhiều người.',
                why: 'Chủ ngữ là "The development..." (số ít) cần động từ chính. Phương án D "has increased..." phù hợp ngữ pháp và nghĩa.',
                wrong: 'A, B là câu hoàn chỉnh không nối được. C bắt đầu bằng "and" không hợp lý ở vị trí động từ chính.'
            }
        },
        {
            id: 38, type: 'gapfill', section: 'GapFill',
            q: 'Choose the correct phrase.',
            text: 'Question 38',
            options: ['A', 'B', 'C', 'D'],
            correct: 2, // C
            explain: {
                trans: '...bao gồm các khóa học trên TV, CD-ROM, Internet, (38) và các khóa tự học...',
                why: 'Liệt kê các phương thức học: TV, Internet, AND self-access courses. Cấu trúc song hành.',
                wrong: 'Các câu A, B, D không phù hợp ngữ pháp liệt kê danh từ/cụm từ.'
            }
        },
        {
            id: 39, type: 'gapfill', section: 'GapFill',
            q: 'Choose the correct phrase.',
            text: 'Question 39',
            options: ['A', 'B', 'C', 'D'],
            correct: 0, // A
            explain: {
                trans: '(39) Khoảng 40% người lớn tham gia giáo dục chính quy. Khoảng một nửa trong số họ...',
                why: 'Câu sau có "About half of them" (Một nửa trong số họ). Vậy câu trước phải giới thiệu đối tượng "họ" là ai. Đáp án A "About 40% of adults..." cung cấp chủ ngữ cho câu sau.',
                wrong: 'B, C, D không tạo liên kết logic với "half of them".'
            }
        },
        {
            id: 40, type: 'gapfill', section: 'GapFill',
            q: 'Choose the correct phrase.',
            text: 'Question 40',
            options: ['A', 'B', 'C', 'D'],
            correct: 1, // B
            explain: {
                trans: '(40) Các trường học và cao đẳng cộng đồng tổ chức lớp buổi tối, và danh mục khóa học được xuất bản...',
                why: 'Cần một mệnh đề độc lập trước chữ "and". Đáp án B cung cấp thông tin về nơi tổ chức khóa học, phù hợp với vế sau nói về "catalog of courses".',
                wrong: 'A, C, D không khớp ngữ cảnh.'
            }
        }
    ];

    // READING TEXTS & GAP FILL OPTIONS
    const readingBox1 = `
    <div class="data-box">
        <h3>Reading Passage (For Q19-24)</h3>
        <p>With job vacancies available all year round offering high salaries, Vietnam has been ranked the second best place in the world to teach English by TEFL Exchange, a community for teachers of English (19) ____ a foreign language. The site (20) ________that a foreign English teacher can earn between 1,200-2,200 USD a month in Vietnam, (21) ______  the average annual income in 2016 was just 2,200 USD. They can (22)______ a job any time of year and the best places to do so are the country's three largest cities: Hanoi, Ho Chi Minh City and Da Nang. Candidates only need to hold a bachelor's (23)_____ and a TEFL (Teaching English as a Foreign Language) certificate. English is an obligatory subject from sixth grade across Vietnam, but in large cities, many primary schools demand high (24)_________ Foreign language centers have been thriving here, with students as young as three years old.</p>
        
        <table class="glossary-table">
            <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
            <tr><td>Vacancy</td><td>(n)</td><td>Vị trí tuyển dụng trống</td></tr>
            <tr><td>Obligatory</td><td>(adj)</td><td>Bắt buộc</td></tr>
            <tr><td>Thrive</td><td>(v)</td><td>Phát triển mạnh, thịnh vượng</td></tr>
        </table>
    </div>`;

    const readingBox2 = `
    <div class="data-box">
        <h3>Reading Passage (For Q31-36)</h3>
        <p>While the cover letter has become a divisive topic among employers and job seekers, many employers still think cover letters are important. According to a 2023 study by employment website Zippia, more than a fourth (26 %) of employers ‘always read cover letters’ and think they’re an important factor of the hiring decision. And almost half (45%) said that not including a cover letter could get your application rejected. So, in most cases, it’s best to be cautious and include one. It can help you stand out from the crowd. As a result, if you have similar abilities as other candidates, a cover letter allows you to highlight your personality and special skills. In short, including a cover letter is truly useful for job search. Here’s how:<br>
        • It shows that you are willing to put in extra effort. Looking for a new job requires a lot of work, so it might be hard to write different cover letters for different positions. However, according to the Zippia study, 61 percent of hiring managers consider a customized resume (including a cover letter and portfolio link) as the "top method for applicants to increase their chances of getting a job."<br>
        • You can solve any biases that may exist. In an ideal world, employers wouldn't judge you based on things like gaps in employment or frequent job changes. Career coach Marlo Lyons suggests using your cover letter to explain any gaps and provide context for these situations, so employers don't get the wrong impression.</p>
        
        <table class="glossary-table">
            <tr><th>Word</th><th>Type</th><th>Meaning</th></tr>
            <tr><td>Divisive</td><td>(adj)</td><td>Gây tranh cãi, chia rẽ</td></tr>
            <tr><td>Bias</td><td>(n)</td><td>Thiên kiến, định kiến</td></tr>
            <tr><td>Cautious</td><td>(adj)</td><td>Thận trọng</td></tr>
        </table>
    </div>`;

    const gapFillBox = `
    <div class="data-box">
        <h3>Gap Fill Text (For Q37-40)</h3>
        <div class="gap-options-box">
            A – About 40% of adults take part in some kind of formal education<br>
            B – Schools and community colleges arrange evening classes<br>
            C – and self-access courses at language or computer centers<br>
            D – has increased the opportunities available to many people
        </div>
        <p>Some people return to college as mature students and take full- or part-time training courses in a skill that will help them to get a job. The development of open learning, making it possible to study when it is convenient for the students, (37) ______. This type of study was formerly restricted to book-based learning and correspondence courses but now includes courses on TV, CD-ROM or the Internet, (38) _____. Americans believe that education is important at all stages of life and should not stop when people get their first job. (39) ______. About half of them are trying to get qualifications and skills to help them with their jobs, the rest are taking recreational subjects for personal satisfaction. (40) ______, and a catalog of courses is published by local boards of education.</p>
    </div>`;

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        let html = '';

        quizData.forEach((item, index) => {
            // Insert Reading Boxes at correct positions
            if (item.id === 19) html += readingBox1;
            if (item.id === 31) html += readingBox2;
            if (item.id === 37) html += gapFillBox;

            html += `
            <div class="card" id="card-${index}">
                <div class="question-text">${item.text}</div>
                <div class="options-grid">
                    ${item.options.map((opt, i) => `
                        <div class="option-btn" onclick="selectAnswer(${index}, ${i}, this)">
                            ${opt}
                        </div>
                    `).join('')}
                </div>
                <button class="btn-check" id="check-${index}" onclick="checkQuestion(${index})" style="display:none">Kiểm tra ngay</button>
                <div class="explanation" id="exp-${index}">
                    <h4><span class="tag noun">GIẢI THÍCH CHI TIẾT</span></h4>
                    <div class="exp-detail"><b>Dịch:</b> ${item.explain.trans}</div>
                    ${item.explain.opts ? `<div class="exp-detail"><b>Lựa chọn:</b><br>${item.explain.opts.join('<br>')}</div>` : ''}
                    <div class="exp-detail" style="color:var(--success)"><b>Tại sao đúng?</b> ${item.explain.why}</div>
                    <div class="exp-detail" style="color:var(--danger)"><b>Tại sao sai?</b> ${item.explain.wrong}</div>
                </div>
            </div>`;
        });
        container.innerHTML = html;
    }

    // State management
    let userAnswers = new Array(quizData.length).fill(null);

    function selectAnswer(qIndex, optIndex, btnElement) {
        // Prevent changing after checked
        if (document.getElementById(`exp-${qIndex}`).style.display === 'block') return;

        userAnswers[qIndex] = optIndex;
        
        // Visual selection
        const options = document.querySelectorAll(`#card-${qIndex} .option-btn`);
        options.forEach(opt => opt.classList.remove('selected'));
        btnElement.classList.add('selected');

        // Show individual check button
        document.getElementById(`check-${qIndex}`).style.display = 'inline-block';
    }

    function checkQuestion(qIndex) {
        const correctOpt = quizData[qIndex].correct;
        const userOpt = userAnswers[qIndex];
        const options = document.querySelectorAll(`#card-${qIndex} .option-btn`);
        const expBox = document.getElementById(`exp-${qIndex}`);
        const checkBtn = document.getElementById(`check-${qIndex}`);

        // Reveal styling
        options[correctOpt].classList.add('correct');
        if (userOpt !== null && userOpt !== correctOpt) {
            options[userOpt].classList.add('wrong');
        }

        // Show Explanation
        expBox.style.display = 'block';
        checkBtn.style.display = 'none'; // Hide button after checking
    }

    function submitAll() {
        let score = 0;
        let unanswered = 0;

        quizData.forEach((item, index) => {
            const correctOpt = item.correct;
            const userOpt = userAnswers[index];
            const options = document.querySelectorAll(`#card-${index} .option-btn`);
            const expBox = document.getElementById(`exp-${index}`);

            // Force check logic if not already checked
            if (expBox.style.display !== 'block') {
                if (userOpt === null) {
                    unanswered++;
                    options[correctOpt].classList.add('missed'); // Highlight correct if missed
                } else {
                    options[correctOpt].classList.add('correct');
                    if (userOpt !== correctOpt) options[userOpt].classList.add('wrong');
                }
                expBox.style.display = 'block'; // Show all explanations
                document.getElementById(`check-${index}`).style.display = 'none';
            }

            // Calculate score
            if (userOpt === correctOpt) score++;
        });

        // Update footer
        document.getElementById('score-display').innerText = `Score: ${score}/${quizData.length}`;
        
        // Show Modal
        const modal = document.getElementById('resultModal');
        document.getElementById('final-score').innerText = `${score}/${quizData.length}`;
        document.getElementById('feedback-msg').innerText = score > 30 ? "Xuất sắc! Cô Mai An rất tự hào về em!" : "Cố gắng thêm nhé! Hãy xem kỹ phần giải thích bên dưới.";
        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Initialize
    window.onload = renderQuiz;

</script>
</body>
</html>